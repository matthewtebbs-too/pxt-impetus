"use strict";var __assign=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},__extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts;!function(e){var t,n,o,r,i,a,s,l;(t=e.SyntaxKind||(e.SyntaxKind={}))[t.Unknown=0]="Unknown",t[t.EndOfFileToken=1]="EndOfFileToken",t[t.SingleLineCommentTrivia=2]="SingleLineCommentTrivia",t[t.MultiLineCommentTrivia=3]="MultiLineCommentTrivia",t[t.NewLineTrivia=4]="NewLineTrivia",t[t.WhitespaceTrivia=5]="WhitespaceTrivia",t[t.ShebangTrivia=6]="ShebangTrivia",t[t.ConflictMarkerTrivia=7]="ConflictMarkerTrivia",t[t.NumericLiteral=8]="NumericLiteral",t[t.StringLiteral=9]="StringLiteral",t[t.JsxText=10]="JsxText",t[t.JsxTextAllWhiteSpaces=11]="JsxTextAllWhiteSpaces",t[t.RegularExpressionLiteral=12]="RegularExpressionLiteral",t[t.NoSubstitutionTemplateLiteral=13]="NoSubstitutionTemplateLiteral",t[t.TemplateHead=14]="TemplateHead",t[t.TemplateMiddle=15]="TemplateMiddle",t[t.TemplateTail=16]="TemplateTail",t[t.OpenBraceToken=17]="OpenBraceToken",t[t.CloseBraceToken=18]="CloseBraceToken",t[t.OpenParenToken=19]="OpenParenToken",t[t.CloseParenToken=20]="CloseParenToken",t[t.OpenBracketToken=21]="OpenBracketToken",t[t.CloseBracketToken=22]="CloseBracketToken",t[t.DotToken=23]="DotToken",t[t.DotDotDotToken=24]="DotDotDotToken",t[t.SemicolonToken=25]="SemicolonToken",t[t.CommaToken=26]="CommaToken",t[t.LessThanToken=27]="LessThanToken",t[t.LessThanSlashToken=28]="LessThanSlashToken",t[t.GreaterThanToken=29]="GreaterThanToken",t[t.LessThanEqualsToken=30]="LessThanEqualsToken",t[t.GreaterThanEqualsToken=31]="GreaterThanEqualsToken",t[t.EqualsEqualsToken=32]="EqualsEqualsToken",t[t.ExclamationEqualsToken=33]="ExclamationEqualsToken",t[t.EqualsEqualsEqualsToken=34]="EqualsEqualsEqualsToken",t[t.ExclamationEqualsEqualsToken=35]="ExclamationEqualsEqualsToken",t[t.EqualsGreaterThanToken=36]="EqualsGreaterThanToken",t[t.PlusToken=37]="PlusToken",t[t.MinusToken=38]="MinusToken",t[t.AsteriskToken=39]="AsteriskToken",t[t.AsteriskAsteriskToken=40]="AsteriskAsteriskToken",t[t.SlashToken=41]="SlashToken",t[t.PercentToken=42]="PercentToken",t[t.PlusPlusToken=43]="PlusPlusToken",t[t.MinusMinusToken=44]="MinusMinusToken",t[t.LessThanLessThanToken=45]="LessThanLessThanToken",t[t.GreaterThanGreaterThanToken=46]="GreaterThanGreaterThanToken",t[t.GreaterThanGreaterThanGreaterThanToken=47]="GreaterThanGreaterThanGreaterThanToken",t[t.AmpersandToken=48]="AmpersandToken",t[t.BarToken=49]="BarToken",t[t.CaretToken=50]="CaretToken",t[t.ExclamationToken=51]="ExclamationToken",t[t.TildeToken=52]="TildeToken",t[t.AmpersandAmpersandToken=53]="AmpersandAmpersandToken",t[t.BarBarToken=54]="BarBarToken",t[t.QuestionToken=55]="QuestionToken",t[t.ColonToken=56]="ColonToken",t[t.AtToken=57]="AtToken",t[t.EqualsToken=58]="EqualsToken",t[t.PlusEqualsToken=59]="PlusEqualsToken",t[t.MinusEqualsToken=60]="MinusEqualsToken",t[t.AsteriskEqualsToken=61]="AsteriskEqualsToken",t[t.AsteriskAsteriskEqualsToken=62]="AsteriskAsteriskEqualsToken",t[t.SlashEqualsToken=63]="SlashEqualsToken",t[t.PercentEqualsToken=64]="PercentEqualsToken",t[t.LessThanLessThanEqualsToken=65]="LessThanLessThanEqualsToken",t[t.GreaterThanGreaterThanEqualsToken=66]="GreaterThanGreaterThanEqualsToken",t[t.GreaterThanGreaterThanGreaterThanEqualsToken=67]="GreaterThanGreaterThanGreaterThanEqualsToken",t[t.AmpersandEqualsToken=68]="AmpersandEqualsToken",t[t.BarEqualsToken=69]="BarEqualsToken",t[t.CaretEqualsToken=70]="CaretEqualsToken",t[t.Identifier=71]="Identifier",t[t.BreakKeyword=72]="BreakKeyword",t[t.CaseKeyword=73]="CaseKeyword",t[t.CatchKeyword=74]="CatchKeyword",t[t.ClassKeyword=75]="ClassKeyword",t[t.ConstKeyword=76]="ConstKeyword",t[t.ContinueKeyword=77]="ContinueKeyword",t[t.DebuggerKeyword=78]="DebuggerKeyword",t[t.DefaultKeyword=79]="DefaultKeyword",t[t.DeleteKeyword=80]="DeleteKeyword",t[t.DoKeyword=81]="DoKeyword",t[t.ElseKeyword=82]="ElseKeyword",t[t.EnumKeyword=83]="EnumKeyword",t[t.ExportKeyword=84]="ExportKeyword",t[t.ExtendsKeyword=85]="ExtendsKeyword",t[t.FalseKeyword=86]="FalseKeyword",t[t.FinallyKeyword=87]="FinallyKeyword",t[t.ForKeyword=88]="ForKeyword",t[t.FunctionKeyword=89]="FunctionKeyword",t[t.IfKeyword=90]="IfKeyword",t[t.ImportKeyword=91]="ImportKeyword",t[t.InKeyword=92]="InKeyword",t[t.InstanceOfKeyword=93]="InstanceOfKeyword",t[t.NewKeyword=94]="NewKeyword",t[t.NullKeyword=95]="NullKeyword",t[t.ReturnKeyword=96]="ReturnKeyword",t[t.SuperKeyword=97]="SuperKeyword",t[t.SwitchKeyword=98]="SwitchKeyword",t[t.ThisKeyword=99]="ThisKeyword",t[t.ThrowKeyword=100]="ThrowKeyword",t[t.TrueKeyword=101]="TrueKeyword",t[t.TryKeyword=102]="TryKeyword",t[t.TypeOfKeyword=103]="TypeOfKeyword",t[t.VarKeyword=104]="VarKeyword",t[t.VoidKeyword=105]="VoidKeyword",t[t.WhileKeyword=106]="WhileKeyword",t[t.WithKeyword=107]="WithKeyword",t[t.ImplementsKeyword=108]="ImplementsKeyword",t[t.InterfaceKeyword=109]="InterfaceKeyword",t[t.LetKeyword=110]="LetKeyword",t[t.PackageKeyword=111]="PackageKeyword",t[t.PrivateKeyword=112]="PrivateKeyword",t[t.ProtectedKeyword=113]="ProtectedKeyword",t[t.PublicKeyword=114]="PublicKeyword",t[t.StaticKeyword=115]="StaticKeyword",t[t.YieldKeyword=116]="YieldKeyword",t[t.AbstractKeyword=117]="AbstractKeyword",t[t.AsKeyword=118]="AsKeyword",t[t.AnyKeyword=119]="AnyKeyword",t[t.AsyncKeyword=120]="AsyncKeyword",t[t.AwaitKeyword=121]="AwaitKeyword",t[t.BooleanKeyword=122]="BooleanKeyword",t[t.ConstructorKeyword=123]="ConstructorKeyword",t[t.DeclareKeyword=124]="DeclareKeyword",t[t.GetKeyword=125]="GetKeyword",t[t.IsKeyword=126]="IsKeyword",t[t.KeyOfKeyword=127]="KeyOfKeyword",t[t.ModuleKeyword=128]="ModuleKeyword",t[t.NamespaceKeyword=129]="NamespaceKeyword",t[t.NeverKeyword=130]="NeverKeyword",t[t.ReadonlyKeyword=131]="ReadonlyKeyword",t[t.RequireKeyword=132]="RequireKeyword",t[t.NumberKeyword=133]="NumberKeyword",t[t.ObjectKeyword=134]="ObjectKeyword",t[t.SetKeyword=135]="SetKeyword",t[t.StringKeyword=136]="StringKeyword",t[t.SymbolKeyword=137]="SymbolKeyword",t[t.TypeKeyword=138]="TypeKeyword",t[t.UndefinedKeyword=139]="UndefinedKeyword",t[t.FromKeyword=140]="FromKeyword",t[t.GlobalKeyword=141]="GlobalKeyword",t[t.OfKeyword=142]="OfKeyword",t[t.QualifiedName=143]="QualifiedName",t[t.ComputedPropertyName=144]="ComputedPropertyName",t[t.TypeParameter=145]="TypeParameter",t[t.Parameter=146]="Parameter",t[t.Decorator=147]="Decorator",t[t.PropertySignature=148]="PropertySignature",t[t.PropertyDeclaration=149]="PropertyDeclaration",t[t.MethodSignature=150]="MethodSignature",t[t.MethodDeclaration=151]="MethodDeclaration",t[t.Constructor=152]="Constructor",t[t.GetAccessor=153]="GetAccessor",t[t.SetAccessor=154]="SetAccessor",t[t.CallSignature=155]="CallSignature",t[t.ConstructSignature=156]="ConstructSignature",t[t.IndexSignature=157]="IndexSignature",t[t.TypePredicate=158]="TypePredicate",t[t.TypeReference=159]="TypeReference",t[t.FunctionType=160]="FunctionType",t[t.ConstructorType=161]="ConstructorType",t[t.TypeQuery=162]="TypeQuery",t[t.TypeLiteral=163]="TypeLiteral",t[t.ArrayType=164]="ArrayType",t[t.TupleType=165]="TupleType",t[t.UnionType=166]="UnionType",t[t.IntersectionType=167]="IntersectionType",t[t.ParenthesizedType=168]="ParenthesizedType",t[t.ThisType=169]="ThisType",t[t.TypeOperator=170]="TypeOperator",t[t.IndexedAccessType=171]="IndexedAccessType",t[t.MappedType=172]="MappedType",t[t.LiteralType=173]="LiteralType",t[t.ObjectBindingPattern=174]="ObjectBindingPattern",t[t.ArrayBindingPattern=175]="ArrayBindingPattern",t[t.BindingElement=176]="BindingElement",t[t.ArrayLiteralExpression=177]="ArrayLiteralExpression",t[t.ObjectLiteralExpression=178]="ObjectLiteralExpression",t[t.PropertyAccessExpression=179]="PropertyAccessExpression",t[t.ElementAccessExpression=180]="ElementAccessExpression",t[t.CallExpression=181]="CallExpression",t[t.NewExpression=182]="NewExpression",t[t.TaggedTemplateExpression=183]="TaggedTemplateExpression",t[t.TypeAssertionExpression=184]="TypeAssertionExpression",t[t.ParenthesizedExpression=185]="ParenthesizedExpression",t[t.FunctionExpression=186]="FunctionExpression",t[t.ArrowFunction=187]="ArrowFunction",t[t.DeleteExpression=188]="DeleteExpression",t[t.TypeOfExpression=189]="TypeOfExpression",t[t.VoidExpression=190]="VoidExpression",t[t.AwaitExpression=191]="AwaitExpression",t[t.PrefixUnaryExpression=192]="PrefixUnaryExpression",t[t.PostfixUnaryExpression=193]="PostfixUnaryExpression",t[t.BinaryExpression=194]="BinaryExpression",t[t.ConditionalExpression=195]="ConditionalExpression",t[t.TemplateExpression=196]="TemplateExpression",t[t.YieldExpression=197]="YieldExpression",t[t.SpreadElement=198]="SpreadElement",t[t.ClassExpression=199]="ClassExpression",t[t.OmittedExpression=200]="OmittedExpression",t[t.ExpressionWithTypeArguments=201]="ExpressionWithTypeArguments",t[t.AsExpression=202]="AsExpression",t[t.NonNullExpression=203]="NonNullExpression",t[t.MetaProperty=204]="MetaProperty",t[t.TemplateSpan=205]="TemplateSpan",t[t.SemicolonClassElement=206]="SemicolonClassElement",t[t.Block=207]="Block",t[t.VariableStatement=208]="VariableStatement",t[t.EmptyStatement=209]="EmptyStatement",t[t.ExpressionStatement=210]="ExpressionStatement",t[t.IfStatement=211]="IfStatement",t[t.DoStatement=212]="DoStatement",t[t.WhileStatement=213]="WhileStatement",t[t.ForStatement=214]="ForStatement",t[t.ForInStatement=215]="ForInStatement",t[t.ForOfStatement=216]="ForOfStatement",t[t.ContinueStatement=217]="ContinueStatement",t[t.BreakStatement=218]="BreakStatement",t[t.ReturnStatement=219]="ReturnStatement",t[t.WithStatement=220]="WithStatement",t[t.SwitchStatement=221]="SwitchStatement",t[t.LabeledStatement=222]="LabeledStatement",t[t.ThrowStatement=223]="ThrowStatement",t[t.TryStatement=224]="TryStatement",t[t.DebuggerStatement=225]="DebuggerStatement",t[t.VariableDeclaration=226]="VariableDeclaration",t[t.VariableDeclarationList=227]="VariableDeclarationList",t[t.FunctionDeclaration=228]="FunctionDeclaration",t[t.ClassDeclaration=229]="ClassDeclaration",t[t.InterfaceDeclaration=230]="InterfaceDeclaration",t[t.TypeAliasDeclaration=231]="TypeAliasDeclaration",t[t.EnumDeclaration=232]="EnumDeclaration",t[t.ModuleDeclaration=233]="ModuleDeclaration",t[t.ModuleBlock=234]="ModuleBlock",t[t.CaseBlock=235]="CaseBlock",t[t.NamespaceExportDeclaration=236]="NamespaceExportDeclaration",t[t.ImportEqualsDeclaration=237]="ImportEqualsDeclaration",t[t.ImportDeclaration=238]="ImportDeclaration",t[t.ImportClause=239]="ImportClause",t[t.NamespaceImport=240]="NamespaceImport",t[t.NamedImports=241]="NamedImports",t[t.ImportSpecifier=242]="ImportSpecifier",t[t.ExportAssignment=243]="ExportAssignment",t[t.ExportDeclaration=244]="ExportDeclaration",t[t.NamedExports=245]="NamedExports",t[t.ExportSpecifier=246]="ExportSpecifier",t[t.MissingDeclaration=247]="MissingDeclaration",t[t.ExternalModuleReference=248]="ExternalModuleReference",t[t.JsxElement=249]="JsxElement",t[t.JsxSelfClosingElement=250]="JsxSelfClosingElement",t[t.JsxOpeningElement=251]="JsxOpeningElement",t[t.JsxClosingElement=252]="JsxClosingElement",t[t.JsxAttribute=253]="JsxAttribute",t[t.JsxAttributes=254]="JsxAttributes",t[t.JsxSpreadAttribute=255]="JsxSpreadAttribute",t[t.JsxExpression=256]="JsxExpression",t[t.CaseClause=257]="CaseClause",t[t.DefaultClause=258]="DefaultClause",t[t.HeritageClause=259]="HeritageClause",t[t.CatchClause=260]="CatchClause",t[t.PropertyAssignment=261]="PropertyAssignment",t[t.ShorthandPropertyAssignment=262]="ShorthandPropertyAssignment",t[t.SpreadAssignment=263]="SpreadAssignment",t[t.EnumMember=264]="EnumMember",t[t.SourceFile=265]="SourceFile",t[t.Bundle=266]="Bundle",t[t.JSDocTypeExpression=267]="JSDocTypeExpression",t[t.JSDocAllType=268]="JSDocAllType",t[t.JSDocUnknownType=269]="JSDocUnknownType",t[t.JSDocNullableType=270]="JSDocNullableType",t[t.JSDocNonNullableType=271]="JSDocNonNullableType",t[t.JSDocOptionalType=272]="JSDocOptionalType",t[t.JSDocFunctionType=273]="JSDocFunctionType",t[t.JSDocVariadicType=274]="JSDocVariadicType",t[t.JSDocComment=275]="JSDocComment",t[t.JSDocTag=276]="JSDocTag",t[t.JSDocAugmentsTag=277]="JSDocAugmentsTag",t[t.JSDocClassTag=278]="JSDocClassTag",t[t.JSDocParameterTag=279]="JSDocParameterTag",t[t.JSDocReturnTag=280]="JSDocReturnTag",t[t.JSDocTypeTag=281]="JSDocTypeTag",t[t.JSDocTemplateTag=282]="JSDocTemplateTag",t[t.JSDocTypedefTag=283]="JSDocTypedefTag",t[t.JSDocPropertyTag=284]="JSDocPropertyTag",t[t.JSDocTypeLiteral=285]="JSDocTypeLiteral",t[t.SyntaxList=286]="SyntaxList",t[t.NotEmittedStatement=287]="NotEmittedStatement",t[t.PartiallyEmittedExpression=288]="PartiallyEmittedExpression",t[t.CommaListExpression=289]="CommaListExpression",t[t.MergeDeclarationMarker=290]="MergeDeclarationMarker",t[t.EndOfDeclarationMarker=291]="EndOfDeclarationMarker",t[t.Count=292]="Count",t[t.FirstAssignment=58]="FirstAssignment",t[t.LastAssignment=70]="LastAssignment",t[t.FirstCompoundAssignment=59]="FirstCompoundAssignment",t[t.LastCompoundAssignment=70]="LastCompoundAssignment",t[t.FirstReservedWord=72]="FirstReservedWord",t[t.LastReservedWord=107]="LastReservedWord",t[t.FirstKeyword=72]="FirstKeyword",t[t.LastKeyword=142]="LastKeyword",t[t.FirstFutureReservedWord=108]="FirstFutureReservedWord",t[t.LastFutureReservedWord=116]="LastFutureReservedWord",t[t.FirstTypeNode=158]="FirstTypeNode",t[t.LastTypeNode=173]="LastTypeNode",t[t.FirstPunctuation=17]="FirstPunctuation",t[t.LastPunctuation=70]="LastPunctuation",t[t.FirstToken=0]="FirstToken",t[t.LastToken=142]="LastToken",t[t.FirstTriviaToken=2]="FirstTriviaToken",t[t.LastTriviaToken=7]="LastTriviaToken",t[t.FirstLiteralToken=8]="FirstLiteralToken",t[t.LastLiteralToken=13]="LastLiteralToken",t[t.FirstTemplateToken=13]="FirstTemplateToken",t[t.LastTemplateToken=16]="LastTemplateToken",t[t.FirstBinaryOperator=27]="FirstBinaryOperator",t[t.LastBinaryOperator=70]="LastBinaryOperator",t[t.FirstNode=143]="FirstNode",t[t.FirstJSDocNode=267]="FirstJSDocNode",t[t.LastJSDocNode=285]="LastJSDocNode",t[t.FirstJSDocTagNode=276]="FirstJSDocTagNode",t[t.LastJSDocTagNode=285]="LastJSDocTagNode",(n=e.NodeFlags||(e.NodeFlags={}))[n.None=0]="None",n[n.Let=1]="Let",n[n.Const=2]="Const",n[n.NestedNamespace=4]="NestedNamespace",n[n.Synthesized=8]="Synthesized",n[n.Namespace=16]="Namespace",n[n.ExportContext=32]="ExportContext",n[n.ContainsThis=64]="ContainsThis",n[n.HasImplicitReturn=128]="HasImplicitReturn",n[n.HasExplicitReturn=256]="HasExplicitReturn",n[n.GlobalAugmentation=512]="GlobalAugmentation",n[n.HasAsyncFunctions=1024]="HasAsyncFunctions",n[n.DisallowInContext=2048]="DisallowInContext",n[n.YieldContext=4096]="YieldContext",n[n.DecoratorContext=8192]="DecoratorContext",n[n.AwaitContext=16384]="AwaitContext",n[n.ThisNodeHasError=32768]="ThisNodeHasError",n[n.JavaScriptFile=65536]="JavaScriptFile",n[n.ThisNodeOrAnySubNodesHasError=131072]="ThisNodeOrAnySubNodesHasError",n[n.HasAggregatedChildData=262144]="HasAggregatedChildData",n[n.PossiblyContainsDynamicImport=524288]="PossiblyContainsDynamicImport",n[n.JSDoc=1048576]="JSDoc",n[n.BlockScoped=3]="BlockScoped",n[n.ReachabilityCheckFlags=384]="ReachabilityCheckFlags",n[n.ReachabilityAndEmitFlags=1408]="ReachabilityAndEmitFlags",n[n.ContextFlags=96256]="ContextFlags",n[n.TypeExcludesFlags=20480]="TypeExcludesFlags",(o=e.ModifierFlags||(e.ModifierFlags={}))[o.None=0]="None",o[o.Export=1]="Export",o[o.Ambient=2]="Ambient",o[o.Public=4]="Public",o[o.Private=8]="Private",o[o.Protected=16]="Protected",o[o.Static=32]="Static",o[o.Readonly=64]="Readonly",o[o.Abstract=128]="Abstract",o[o.Async=256]="Async",o[o.Default=512]="Default",o[o.Const=2048]="Const",o[o.HasComputedFlags=536870912]="HasComputedFlags",o[o.AccessibilityModifier=28]="AccessibilityModifier",o[o.ParameterPropertyModifier=92]="ParameterPropertyModifier",o[o.NonPublicAccessibilityModifier=24]="NonPublicAccessibilityModifier",o[o.TypeScriptModifier=2270]="TypeScriptModifier",o[o.ExportDefault=513]="ExportDefault",(r=e.JsxFlags||(e.JsxFlags={}))[r.None=0]="None",r[r.IntrinsicNamedElement=1]="IntrinsicNamedElement",r[r.IntrinsicIndexedElement=2]="IntrinsicIndexedElement",r[r.IntrinsicElement=3]="IntrinsicElement",(i=e.RelationComparisonResult||(e.RelationComparisonResult={}))[i.Succeeded=1]="Succeeded",i[i.Failed=2]="Failed",i[i.FailedAndReported=3]="FailedAndReported",(a=e.GeneratedIdentifierKind||(e.GeneratedIdentifierKind={}))[a.None=0]="None",a[a.Auto=1]="Auto",a[a.Loop=2]="Loop",a[a.Unique=3]="Unique",a[a.Node=4]="Node",(s=e.NumericLiteralFlags||(e.NumericLiteralFlags={}))[s.None=0]="None",s[s.Scientific=2]="Scientific",s[s.Octal=4]="Octal",s[s.HexSpecifier=8]="HexSpecifier",s[s.BinarySpecifier=16]="BinarySpecifier",s[s.OctalSpecifier=32]="OctalSpecifier",s[s.BinaryOrOctalSpecifier=48]="BinaryOrOctalSpecifier",(l=e.FlowFlags||(e.FlowFlags={}))[l.Unreachable=1]="Unreachable",l[l.Start=2]="Start",l[l.BranchLabel=4]="BranchLabel",l[l.LoopLabel=8]="LoopLabel",l[l.Assignment=16]="Assignment",l[l.TrueCondition=32]="TrueCondition",l[l.FalseCondition=64]="FalseCondition",l[l.SwitchClause=128]="SwitchClause",l[l.ArrayMutation=256]="ArrayMutation",l[l.Referenced=512]="Referenced",l[l.Shared=1024]="Shared",l[l.PreFinally=2048]="PreFinally",l[l.AfterFinally=4096]="AfterFinally",l[l.Label=12]="Label",l[l.Condition=96]="Condition";var c,u,g,p,d,_,f,h,m,y,v,b,k,T,E,S,C,x,A,D,B,I,N,w,O,R,L,P,M,F,U,H,G,V,W,K,z,j,Y,X=function(){};e.OperationCanceledException=X,(c=e.StructureIsReused||(e.StructureIsReused={}))[c.Not=0]="Not",c[c.SafeModules=1]="SafeModules",c[c.Completely=2]="Completely",(u=e.ExitStatus||(e.ExitStatus={}))[u.Success=0]="Success",u[u.DiagnosticsPresent_OutputsSkipped=1]="DiagnosticsPresent_OutputsSkipped",u[u.DiagnosticsPresent_OutputsGenerated=2]="DiagnosticsPresent_OutputsGenerated",(g=e.NodeBuilderFlags||(e.NodeBuilderFlags={}))[g.None=0]="None",g[g.NoTruncation=1]="NoTruncation",g[g.WriteArrayAsGenericType=2]="WriteArrayAsGenericType",g[g.WriteTypeArgumentsOfSignature=32]="WriteTypeArgumentsOfSignature",g[g.UseFullyQualifiedType=64]="UseFullyQualifiedType",g[g.SuppressAnyReturnType=256]="SuppressAnyReturnType",g[g.WriteTypeParametersInQualifiedName=512]="WriteTypeParametersInQualifiedName",g[g.AllowThisInObjectLiteral=1024]="AllowThisInObjectLiteral",g[g.AllowQualifedNameInPlaceOfIdentifier=2048]="AllowQualifedNameInPlaceOfIdentifier",g[g.AllowAnonymousIdentifier=8192]="AllowAnonymousIdentifier",g[g.AllowEmptyUnionOrIntersection=16384]="AllowEmptyUnionOrIntersection",g[g.AllowEmptyTuple=32768]="AllowEmptyTuple",g[g.IgnoreErrors=60416]="IgnoreErrors",g[g.InObjectTypeLiteral=1048576]="InObjectTypeLiteral",g[g.InTypeAlias=8388608]="InTypeAlias",(p=e.TypeFormatFlags||(e.TypeFormatFlags={}))[p.None=0]="None",p[p.WriteArrayAsGenericType=1]="WriteArrayAsGenericType",p[p.UseTypeOfFunction=4]="UseTypeOfFunction",p[p.NoTruncation=8]="NoTruncation",p[p.WriteArrowStyleSignature=16]="WriteArrowStyleSignature",p[p.WriteOwnNameForAnyLike=32]="WriteOwnNameForAnyLike",p[p.WriteTypeArgumentsOfSignature=64]="WriteTypeArgumentsOfSignature",p[p.InElementType=128]="InElementType",p[p.UseFullyQualifiedType=256]="UseFullyQualifiedType",p[p.InFirstTypeArgument=512]="InFirstTypeArgument",p[p.InTypeAlias=1024]="InTypeAlias",p[p.SuppressAnyReturnType=4096]="SuppressAnyReturnType",p[p.AddUndefined=8192]="AddUndefined",p[p.WriteClassExpressionAsTypeLiteral=16384]="WriteClassExpressionAsTypeLiteral",p[p.InArrayType=32768]="InArrayType",p[p.UseAliasDefinedOutsideCurrentScope=65536]="UseAliasDefinedOutsideCurrentScope",(d=e.SymbolFormatFlags||(e.SymbolFormatFlags={}))[d.None=0]="None",d[d.WriteTypeParametersOrArguments=1]="WriteTypeParametersOrArguments",d[d.UseOnlyExternalAliasing=2]="UseOnlyExternalAliasing",(_=e.SymbolAccessibility||(e.SymbolAccessibility={}))[_.Accessible=0]="Accessible",_[_.NotAccessible=1]="NotAccessible",_[_.CannotBeNamed=2]="CannotBeNamed",(f=e.SyntheticSymbolKind||(e.SyntheticSymbolKind={}))[f.UnionOrIntersection=0]="UnionOrIntersection",f[f.Spread=1]="Spread",(h=e.TypePredicateKind||(e.TypePredicateKind={}))[h.This=0]="This",h[h.Identifier=1]="Identifier",(m=e.TypeReferenceSerializationKind||(e.TypeReferenceSerializationKind={}))[m.Unknown=0]="Unknown",m[m.TypeWithConstructSignatureAndValue=1]="TypeWithConstructSignatureAndValue",m[m.VoidNullableOrNeverType=2]="VoidNullableOrNeverType",m[m.NumberLikeType=3]="NumberLikeType",m[m.StringLikeType=4]="StringLikeType",m[m.BooleanType=5]="BooleanType",m[m.ArrayLikeType=6]="ArrayLikeType",m[m.ESSymbolType=7]="ESSymbolType",m[m.Promise=8]="Promise",m[m.TypeWithCallSignature=9]="TypeWithCallSignature",m[m.ObjectType=10]="ObjectType",(y=e.SymbolFlags||(e.SymbolFlags={}))[y.None=0]="None",y[y.FunctionScopedVariable=1]="FunctionScopedVariable",y[y.BlockScopedVariable=2]="BlockScopedVariable",y[y.Property=4]="Property",y[y.EnumMember=8]="EnumMember",y[y.Function=16]="Function",y[y.Class=32]="Class",y[y.Interface=64]="Interface",y[y.ConstEnum=128]="ConstEnum",y[y.RegularEnum=256]="RegularEnum",y[y.ValueModule=512]="ValueModule",y[y.NamespaceModule=1024]="NamespaceModule",y[y.TypeLiteral=2048]="TypeLiteral",y[y.ObjectLiteral=4096]="ObjectLiteral",y[y.Method=8192]="Method",y[y.Constructor=16384]="Constructor",y[y.GetAccessor=32768]="GetAccessor",y[y.SetAccessor=65536]="SetAccessor",y[y.Signature=131072]="Signature",y[y.TypeParameter=262144]="TypeParameter",y[y.TypeAlias=524288]="TypeAlias",y[y.ExportValue=1048576]="ExportValue",y[y.Alias=2097152]="Alias",y[y.Prototype=4194304]="Prototype",y[y.ExportStar=8388608]="ExportStar",y[y.Optional=16777216]="Optional",y[y.Transient=33554432]="Transient",y[y.Enum=384]="Enum",y[y.Variable=3]="Variable",y[y.Value=107455]="Value",y[y.Type=793064]="Type",y[y.Namespace=1920]="Namespace",y[y.Module=1536]="Module",y[y.Accessor=98304]="Accessor",y[y.FunctionScopedVariableExcludes=107454]="FunctionScopedVariableExcludes",y[y.BlockScopedVariableExcludes=107455]="BlockScopedVariableExcludes",y[y.ParameterExcludes=107455]="ParameterExcludes",y[y.PropertyExcludes=0]="PropertyExcludes",y[y.EnumMemberExcludes=900095]="EnumMemberExcludes",y[y.FunctionExcludes=106927]="FunctionExcludes",y[y.ClassExcludes=899519]="ClassExcludes",y[y.InterfaceExcludes=792968]="InterfaceExcludes",y[y.RegularEnumExcludes=899327]="RegularEnumExcludes",y[y.ConstEnumExcludes=899967]="ConstEnumExcludes",y[y.ValueModuleExcludes=106639]="ValueModuleExcludes",y[y.NamespaceModuleExcludes=0]="NamespaceModuleExcludes",y[y.MethodExcludes=99263]="MethodExcludes",y[y.GetAccessorExcludes=41919]="GetAccessorExcludes",y[y.SetAccessorExcludes=74687]="SetAccessorExcludes",y[y.TypeParameterExcludes=530920]="TypeParameterExcludes",y[y.TypeAliasExcludes=793064]="TypeAliasExcludes",y[y.AliasExcludes=2097152]="AliasExcludes",y[y.ModuleMember=2623475]="ModuleMember",y[y.ExportHasLocal=944]="ExportHasLocal",y[y.HasExports=1952]="HasExports",y[y.HasMembers=6240]="HasMembers",y[y.BlockScoped=418]="BlockScoped",y[y.PropertyOrAccessor=98308]="PropertyOrAccessor",y[y.ClassMember=106500]="ClassMember",y[y.Classifiable=788448]="Classifiable",(v=e.EnumKind||(e.EnumKind={}))[v.Numeric=0]="Numeric",v[v.Literal=1]="Literal",(b=e.CheckFlags||(e.CheckFlags={}))[b.Instantiated=1]="Instantiated",b[b.SyntheticProperty=2]="SyntheticProperty",b[b.SyntheticMethod=4]="SyntheticMethod",b[b.Readonly=8]="Readonly",b[b.Partial=16]="Partial",b[b.HasNonUniformType=32]="HasNonUniformType",b[b.ContainsPublic=64]="ContainsPublic",b[b.ContainsProtected=128]="ContainsProtected",b[b.ContainsPrivate=256]="ContainsPrivate",b[b.ContainsStatic=512]="ContainsStatic",b[b.Synthetic=6]="Synthetic",(k=e.InternalSymbolName||(e.InternalSymbolName={})).Call="__call",k.Constructor="__constructor",k.New="__new",k.Index="__index",k.ExportStar="__export",k.Global="__global",k.Missing="__missing",k.Type="__type",k.Object="__object",k.JSXAttributes="__jsxAttributes",k.Class="__class",k.Function="__function",k.Computed="__computed",k.Resolving="__resolving__",k.ExportEquals="export=",k.Default="default",(T=e.NodeCheckFlags||(e.NodeCheckFlags={}))[T.TypeChecked=1]="TypeChecked",T[T.LexicalThis=2]="LexicalThis",T[T.CaptureThis=4]="CaptureThis",T[T.CaptureNewTarget=8]="CaptureNewTarget",T[T.SuperInstance=256]="SuperInstance",T[T.SuperStatic=512]="SuperStatic",T[T.ContextChecked=1024]="ContextChecked",T[T.AsyncMethodWithSuper=2048]="AsyncMethodWithSuper",T[T.AsyncMethodWithSuperBinding=4096]="AsyncMethodWithSuperBinding",T[T.CaptureArguments=8192]="CaptureArguments",T[T.EnumValuesComputed=16384]="EnumValuesComputed",T[T.LexicalModuleMergesWithClass=32768]="LexicalModuleMergesWithClass",T[T.LoopWithCapturedBlockScopedBinding=65536]="LoopWithCapturedBlockScopedBinding",T[T.CapturedBlockScopedBinding=131072]="CapturedBlockScopedBinding",T[T.BlockScopedBindingInLoop=262144]="BlockScopedBindingInLoop",T[T.ClassWithBodyScopedClassBinding=524288]="ClassWithBodyScopedClassBinding",T[T.BodyScopedClassBinding=1048576]="BodyScopedClassBinding",T[T.NeedsLoopOutParameter=2097152]="NeedsLoopOutParameter",T[T.AssignmentsMarked=4194304]="AssignmentsMarked",T[T.ClassWithConstructorReference=8388608]="ClassWithConstructorReference",T[T.ConstructorReferenceInClass=16777216]="ConstructorReferenceInClass",(E=e.TypeFlags||(e.TypeFlags={}))[E.Any=1]="Any",E[E.String=2]="String",E[E.Number=4]="Number",E[E.Boolean=8]="Boolean",E[E.Enum=16]="Enum",E[E.StringLiteral=32]="StringLiteral",E[E.NumberLiteral=64]="NumberLiteral",E[E.BooleanLiteral=128]="BooleanLiteral",E[E.EnumLiteral=256]="EnumLiteral",E[E.ESSymbol=512]="ESSymbol",E[E.Void=1024]="Void",E[E.Undefined=2048]="Undefined",E[E.Null=4096]="Null",E[E.Never=8192]="Never",E[E.TypeParameter=16384]="TypeParameter",E[E.Object=32768]="Object",E[E.Union=65536]="Union",E[E.Intersection=131072]="Intersection",E[E.Index=262144]="Index",E[E.IndexedAccess=524288]="IndexedAccess",E[E.FreshLiteral=1048576]="FreshLiteral",E[E.ContainsWideningType=2097152]="ContainsWideningType",E[E.ContainsObjectLiteral=4194304]="ContainsObjectLiteral",E[E.ContainsAnyFunctionType=8388608]="ContainsAnyFunctionType",E[E.NonPrimitive=16777216]="NonPrimitive",E[E.JsxAttributes=33554432]="JsxAttributes",E[E.MarkerType=67108864]="MarkerType",E[E.Nullable=6144]="Nullable",E[E.Literal=224]="Literal",E[E.Unit=6368]="Unit",E[E.StringOrNumberLiteral=96]="StringOrNumberLiteral",E[E.DefinitelyFalsy=7392]="DefinitelyFalsy",E[E.PossiblyFalsy=7406]="PossiblyFalsy",E[E.Intrinsic=16793231]="Intrinsic",E[E.Primitive=8190]="Primitive",E[E.StringLike=262178]="StringLike",E[E.NumberLike=84]="NumberLike",E[E.BooleanLike=136]="BooleanLike",E[E.EnumLike=272]="EnumLike",E[E.UnionOrIntersection=196608]="UnionOrIntersection",E[E.StructuredType=229376]="StructuredType",E[E.StructuredOrTypeVariable=1032192]="StructuredOrTypeVariable",E[E.TypeVariable=540672]="TypeVariable",E[E.Narrowable=17810175]="Narrowable",E[E.NotUnionOrUnit=16810497]="NotUnionOrUnit",E[E.RequiresWidening=6291456]="RequiresWidening",E[E.PropagatingFlags=14680064]="PropagatingFlags",(S=e.ObjectFlags||(e.ObjectFlags={}))[S.Class=1]="Class",S[S.Interface=2]="Interface",S[S.Reference=4]="Reference",S[S.Tuple=8]="Tuple",S[S.Anonymous=16]="Anonymous",S[S.Mapped=32]="Mapped",S[S.Instantiated=64]="Instantiated",S[S.ObjectLiteral=128]="ObjectLiteral",S[S.EvolvingArray=256]="EvolvingArray",S[S.ObjectLiteralPatternWithComputedProperties=512]="ObjectLiteralPatternWithComputedProperties",S[S.ClassOrInterface=3]="ClassOrInterface",(C=e.Variance||(e.Variance={}))[C.Invariant=0]="Invariant",C[C.Covariant=1]="Covariant",C[C.Contravariant=2]="Contravariant",C[C.Bivariant=3]="Bivariant",C[C.Independent=4]="Independent",(x=e.SignatureKind||(e.SignatureKind={}))[x.Call=0]="Call",x[x.Construct=1]="Construct",(A=e.IndexKind||(e.IndexKind={}))[A.String=0]="String",A[A.Number=1]="Number",(D=e.InferencePriority||(e.InferencePriority={}))[D.Contravariant=1]="Contravariant",D[D.NakedTypeVariable=2]="NakedTypeVariable",D[D.MappedType=4]="MappedType",D[D.ReturnType=8]="ReturnType",(B=e.InferenceFlags||(e.InferenceFlags={}))[B.InferUnionTypes=1]="InferUnionTypes",B[B.NoDefault=2]="NoDefault",B[B.AnyDefault=4]="AnyDefault",(I=e.Ternary||(e.Ternary={}))[I.False=0]="False",I[I.Maybe=1]="Maybe",I[I.True=-1]="True",(N=e.SpecialPropertyAssignmentKind||(e.SpecialPropertyAssignmentKind={}))[N.None=0]="None",N[N.ExportsProperty=1]="ExportsProperty",N[N.ModuleExports=2]="ModuleExports",N[N.PrototypeProperty=3]="PrototypeProperty",N[N.ThisProperty=4]="ThisProperty",N[N.Property=5]="Property",(w=e.DiagnosticCategory||(e.DiagnosticCategory={}))[w.Warning=0]="Warning",w[w.Error=1]="Error",w[w.Message=2]="Message",(O=e.ModuleResolutionKind||(e.ModuleResolutionKind={}))[O.Classic=1]="Classic",O[O.NodeJs=2]="NodeJs",(R=e.ModuleKind||(e.ModuleKind={}))[R.None=0]="None",R[R.CommonJS=1]="CommonJS",R[R.AMD=2]="AMD",R[R.UMD=3]="UMD",R[R.System=4]="System",R[R.ES2015=5]="ES2015",R[R.ESNext=6]="ESNext",(L=e.JsxEmit||(e.JsxEmit={}))[L.None=0]="None",L[L.Preserve=1]="Preserve",L[L.React=2]="React",L[L.ReactNative=3]="ReactNative",(P=e.NewLineKind||(e.NewLineKind={}))[P.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",P[P.LineFeed=1]="LineFeed",(M=e.ScriptKind||(e.ScriptKind={}))[M.Unknown=0]="Unknown",M[M.JS=1]="JS",M[M.JSX=2]="JSX",M[M.TS=3]="TS",M[M.TSX=4]="TSX",M[M.External=5]="External",M[M.JSON=6]="JSON",(F=e.ScriptTarget||(e.ScriptTarget={}))[F.ES3=0]="ES3",F[F.ES5=1]="ES5",F[F.ES2015=2]="ES2015",F[F.ES2016=3]="ES2016",F[F.ES2017=4]="ES2017",F[F.ESNext=5]="ESNext",F[F.Latest=5]="Latest",(U=e.LanguageVariant||(e.LanguageVariant={}))[U.Standard=0]="Standard",U[U.JSX=1]="JSX",(H=e.DiagnosticStyle||(e.DiagnosticStyle={}))[H.Simple=0]="Simple",H[H.Pretty=1]="Pretty",(G=e.WatchDirectoryFlags||(e.WatchDirectoryFlags={}))[G.None=0]="None",G[G.Recursive=1]="Recursive",(V=e.CharacterCodes||(e.CharacterCodes={}))[V.nullCharacter=0]="nullCharacter",V[V.maxAsciiCharacter=127]="maxAsciiCharacter",V[V.lineFeed=10]="lineFeed",V[V.carriageReturn=13]="carriageReturn",V[V.lineSeparator=8232]="lineSeparator",V[V.paragraphSeparator=8233]="paragraphSeparator",V[V.nextLine=133]="nextLine",V[V.space=32]="space",V[V.nonBreakingSpace=160]="nonBreakingSpace",V[V.enQuad=8192]="enQuad",V[V.emQuad=8193]="emQuad",V[V.enSpace=8194]="enSpace",V[V.emSpace=8195]="emSpace",V[V.threePerEmSpace=8196]="threePerEmSpace",V[V.fourPerEmSpace=8197]="fourPerEmSpace",V[V.sixPerEmSpace=8198]="sixPerEmSpace",V[V.figureSpace=8199]="figureSpace",V[V.punctuationSpace=8200]="punctuationSpace",V[V.thinSpace=8201]="thinSpace",V[V.hairSpace=8202]="hairSpace",V[V.zeroWidthSpace=8203]="zeroWidthSpace",V[V.narrowNoBreakSpace=8239]="narrowNoBreakSpace",V[V.ideographicSpace=12288]="ideographicSpace",V[V.mathematicalSpace=8287]="mathematicalSpace",V[V.ogham=5760]="ogham",V[V._=95]="_",V[V.$=36]="$",V[V._0=48]="_0",V[V._1=49]="_1",V[V._2=50]="_2",V[V._3=51]="_3",V[V._4=52]="_4",V[V._5=53]="_5",V[V._6=54]="_6",V[V._7=55]="_7",V[V._8=56]="_8",V[V._9=57]="_9",V[V.a=97]="a",V[V.b=98]="b",V[V.c=99]="c",V[V.d=100]="d",V[V.e=101]="e",V[V.f=102]="f",V[V.g=103]="g",V[V.h=104]="h",V[V.i=105]="i",V[V.j=106]="j",V[V.k=107]="k",V[V.l=108]="l",V[V.m=109]="m",V[V.n=110]="n",V[V.o=111]="o",V[V.p=112]="p",V[V.q=113]="q",V[V.r=114]="r",V[V.s=115]="s",V[V.t=116]="t",V[V.u=117]="u",V[V.v=118]="v",V[V.w=119]="w",V[V.x=120]="x",V[V.y=121]="y",V[V.z=122]="z",V[V.A=65]="A",V[V.B=66]="B",V[V.C=67]="C",V[V.D=68]="D",V[V.E=69]="E",V[V.F=70]="F",V[V.G=71]="G",V[V.H=72]="H",V[V.I=73]="I",V[V.J=74]="J",V[V.K=75]="K",V[V.L=76]="L",V[V.M=77]="M",V[V.N=78]="N",V[V.O=79]="O",V[V.P=80]="P",V[V.Q=81]="Q",V[V.R=82]="R",V[V.S=83]="S",V[V.T=84]="T",V[V.U=85]="U",V[V.V=86]="V",V[V.W=87]="W",V[V.X=88]="X",V[V.Y=89]="Y",V[V.Z=90]="Z",V[V.ampersand=38]="ampersand",V[V.asterisk=42]="asterisk",V[V.at=64]="at",V[V.backslash=92]="backslash",V[V.backtick=96]="backtick",V[V.bar=124]="bar",V[V.caret=94]="caret",V[V.closeBrace=125]="closeBrace",V[V.closeBracket=93]="closeBracket",V[V.closeParen=41]="closeParen",V[V.colon=58]="colon",V[V.comma=44]="comma",V[V.dot=46]="dot",V[V.doubleQuote=34]="doubleQuote",V[V.equals=61]="equals",V[V.exclamation=33]="exclamation",V[V.greaterThan=62]="greaterThan",V[V.hash=35]="hash",V[V.lessThan=60]="lessThan",V[V.minus=45]="minus",V[V.openBrace=123]="openBrace",V[V.openBracket=91]="openBracket",V[V.openParen=40]="openParen",V[V.percent=37]="percent",V[V.plus=43]="plus",V[V.question=63]="question",V[V.semicolon=59]="semicolon",V[V.singleQuote=39]="singleQuote",V[V.slash=47]="slash",V[V.tilde=126]="tilde",V[V.backspace=8]="backspace",V[V.formFeed=12]="formFeed",V[V.byteOrderMark=65279]="byteOrderMark",V[V.tab=9]="tab",V[V.verticalTab=11]="verticalTab",(W=e.Extension||(e.Extension={})).Ts=".ts",W.Tsx=".tsx",W.Dts=".d.ts",W.Js=".js",W.Jsx=".jsx",W.Json=".json",(K=e.TransformFlags||(e.TransformFlags={}))[K.None=0]="None",K[K.TypeScript=1]="TypeScript",K[K.ContainsTypeScript=2]="ContainsTypeScript",K[K.ContainsJsx=4]="ContainsJsx",K[K.ContainsESNext=8]="ContainsESNext",K[K.ContainsES2017=16]="ContainsES2017",K[K.ContainsES2016=32]="ContainsES2016",K[K.ES2015=64]="ES2015",K[K.ContainsES2015=128]="ContainsES2015",K[K.Generator=256]="Generator",K[K.ContainsGenerator=512]="ContainsGenerator",K[K.DestructuringAssignment=1024]="DestructuringAssignment",K[K.ContainsDestructuringAssignment=2048]="ContainsDestructuringAssignment",K[K.ContainsDecorators=4096]="ContainsDecorators",K[K.ContainsPropertyInitializer=8192]="ContainsPropertyInitializer",K[K.ContainsLexicalThis=16384]="ContainsLexicalThis",K[K.ContainsCapturedLexicalThis=32768]="ContainsCapturedLexicalThis",K[K.ContainsLexicalThisInComputedPropertyName=65536]="ContainsLexicalThisInComputedPropertyName",K[K.ContainsDefaultValueAssignments=131072]="ContainsDefaultValueAssignments",K[K.ContainsParameterPropertyAssignments=262144]="ContainsParameterPropertyAssignments",K[K.ContainsSpread=524288]="ContainsSpread",K[K.ContainsObjectSpread=1048576]="ContainsObjectSpread",K[K.ContainsRest=524288]="ContainsRest",K[K.ContainsObjectRest=1048576]="ContainsObjectRest",K[K.ContainsComputedPropertyName=2097152]="ContainsComputedPropertyName",K[K.ContainsBlockScopedBinding=4194304]="ContainsBlockScopedBinding",K[K.ContainsBindingPattern=8388608]="ContainsBindingPattern",K[K.ContainsYield=16777216]="ContainsYield",K[K.ContainsHoistedDeclarationOrCompletion=33554432]="ContainsHoistedDeclarationOrCompletion",K[K.ContainsDynamicImport=67108864]="ContainsDynamicImport",K[K.HasComputedFlags=536870912]="HasComputedFlags",K[K.AssertTypeScript=3]="AssertTypeScript",K[K.AssertJsx=4]="AssertJsx",K[K.AssertESNext=8]="AssertESNext",K[K.AssertES2017=16]="AssertES2017",K[K.AssertES2016=32]="AssertES2016",K[K.AssertES2015=192]="AssertES2015",K[K.AssertGenerator=768]="AssertGenerator",K[K.AssertDestructuringAssignment=3072]="AssertDestructuringAssignment",K[K.NodeExcludes=536872257]="NodeExcludes",K[K.ArrowFunctionExcludes=601249089]="ArrowFunctionExcludes",K[K.FunctionExcludes=601281857]="FunctionExcludes",K[K.ConstructorExcludes=601015617]="ConstructorExcludes",K[K.MethodOrAccessorExcludes=601015617]="MethodOrAccessorExcludes",K[K.ClassExcludes=539358529]="ClassExcludes",K[K.ModuleExcludes=574674241]="ModuleExcludes",K[K.TypeExcludes=-3]="TypeExcludes",K[K.ObjectLiteralExcludes=540087617]="ObjectLiteralExcludes",K[K.ArrayLiteralOrCallOrNewExcludes=537396545]="ArrayLiteralOrCallOrNewExcludes",K[K.VariableDeclarationListExcludes=546309441]="VariableDeclarationListExcludes",K[K.ParameterExcludes=536872257]="ParameterExcludes",K[K.CatchClauseExcludes=537920833]="CatchClauseExcludes",K[K.BindingPatternExcludes=537396545]="BindingPatternExcludes",K[K.TypeScriptClassSyntaxMask=274432]="TypeScriptClassSyntaxMask",K[K.ES2015FunctionSyntaxMask=163840]="ES2015FunctionSyntaxMask",(z=e.EmitFlags||(e.EmitFlags={}))[z.SingleLine=1]="SingleLine",z[z.AdviseOnEmitNode=2]="AdviseOnEmitNode",z[z.NoSubstitution=4]="NoSubstitution",z[z.CapturesThis=8]="CapturesThis",z[z.NoLeadingSourceMap=16]="NoLeadingSourceMap",z[z.NoTrailingSourceMap=32]="NoTrailingSourceMap",z[z.NoSourceMap=48]="NoSourceMap",z[z.NoNestedSourceMaps=64]="NoNestedSourceMaps",z[z.NoTokenLeadingSourceMaps=128]="NoTokenLeadingSourceMaps",z[z.NoTokenTrailingSourceMaps=256]="NoTokenTrailingSourceMaps",z[z.NoTokenSourceMaps=384]="NoTokenSourceMaps",z[z.NoLeadingComments=512]="NoLeadingComments",z[z.NoTrailingComments=1024]="NoTrailingComments",z[z.NoComments=1536]="NoComments",z[z.NoNestedComments=2048]="NoNestedComments",z[z.HelperName=4096]="HelperName",z[z.ExportName=8192]="ExportName",z[z.LocalName=16384]="LocalName",z[z.InternalName=32768]="InternalName",z[z.Indented=65536]="Indented",z[z.NoIndentation=131072]="NoIndentation",z[z.AsyncFunctionBody=262144]="AsyncFunctionBody",z[z.ReuseTempVariableScope=524288]="ReuseTempVariableScope",z[z.CustomPrologue=1048576]="CustomPrologue",z[z.NoHoisting=2097152]="NoHoisting",z[z.HasEndOfDeclarationMarker=4194304]="HasEndOfDeclarationMarker",z[z.Iterator=8388608]="Iterator",z[z.NoAsciiEscaping=16777216]="NoAsciiEscaping",z[z.TypeScriptClassWrapper=33554432]="TypeScriptClassWrapper",(j=e.ExternalEmitHelpers||(e.ExternalEmitHelpers={}))[j.Extends=1]="Extends",j[j.Assign=2]="Assign",j[j.Rest=4]="Rest",j[j.Decorate=8]="Decorate",j[j.Metadata=16]="Metadata",j[j.Param=32]="Param",j[j.Awaiter=64]="Awaiter",j[j.Generator=128]="Generator",j[j.Values=256]="Values",j[j.Read=512]="Read",j[j.Spread=1024]="Spread",j[j.Await=2048]="Await",j[j.AsyncGenerator=4096]="AsyncGenerator",j[j.AsyncDelegator=8192]="AsyncDelegator",j[j.AsyncValues=16384]="AsyncValues",j[j.ExportStar=32768]="ExportStar",j[j.MakeTemplateObject=65536]="MakeTemplateObject",j[j.FirstEmitHelper=1]="FirstEmitHelper",j[j.LastEmitHelper=65536]="LastEmitHelper",j[j.ForOfIncludes=256]="ForOfIncludes",j[j.ForAwaitOfIncludes=16384]="ForAwaitOfIncludes",j[j.AsyncGeneratorIncludes=6144]="AsyncGeneratorIncludes",j[j.AsyncDelegatorIncludes=26624]="AsyncDelegatorIncludes",j[j.SpreadIncludes=1536]="SpreadIncludes",(Y=e.EmitHint||(e.EmitHint={}))[Y.SourceFile=0]="SourceFile",Y[Y.Expression=1]="Expression",Y[Y.IdentifierName=2]="IdentifierName",Y[Y.MappedTypeParameter=3]="MappedTypeParameter",Y[Y.Unspecified=4]="Unspecified"}(ts||(ts={})),(ts||(ts={})).timestamp="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now?Date.now:function(){return+new Date},function(i){var e,t,a,s,n,l,c;e=i.performance||(i.performance={}),n="function"==typeof onProfilerEvent&&!0===onProfilerEvent.profiler?onProfilerEvent:function(e){},l=!1,c=0,e.mark=function(e){l&&(a.set(e,i.timestamp()),t.set(e,(t.get(e)||0)+1),n(e))},e.measure=function(e,t,n){if(l){var o=n&&a.get(n)||i.timestamp(),r=t&&a.get(t)||c;s.set(e,(s.get(e)||0)+(o-r))}},e.getCount=function(e){return t&&t.get(e)||0},e.getDuration=function(e){return s&&s.get(e)||0},e.forEachMeasure=function(n){s.forEach(function(e,t){n(t,e)})},e.enable=function(){t=i.createMap(),a=i.createMap(),s=i.createMap(),l=!0,c=i.timestamp()},e.disable=function(){l=!1}}(ts||(ts={})),function(e){e.versionMajorMinor="2.6",e.version=e.versionMajorMinor+".1"}(ts||(ts={})),function(t){t.isExternalModuleNameRelative=function(e){return t.pathIsRelative(e)||t.isRootedDiskPath(e)}}(ts||(ts={})),function(m){function t(){var e=Object.create(null);return e.__=void 0,delete e.__,e}function h(){return new o}m.collator="object"==typeof Intl&&"function"==typeof Intl.Collator?new Intl.Collator(void 0,{usage:"sort",sensitivity:"accent"}):void 0,m.localeCompareIsCorrect=m.collator&&m.collator.compare("a","B")<0,m.createMap=h,m.createUnderscoreEscapedMap=function(){return new o},m.createSymbolTable=function(e){var t=h();if(e)for(var n=0,o=e;n<o.length;n++){var r=o[n];t.set(r.escapedName,r)}return t},m.createMapFromTemplate=function(e){var t=new o;for(var n in e)S.call(e,n)&&t.set(n,e[n]);return t};var n,e,o="undefined"!=typeof Map&&"entries"in Map.prototype?Map:(n=function(){function e(e,t){this.index=0,this.data=e,this.selector=t,this.keys=Object.keys(e)}return e.prototype.next=function(){var e=this.index;return e<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[e]),done:!1}):{value:void 0,done:!0}},e}(),function(){function e(){this.data=t(),this.size=0}return e.prototype.get=function(e){return this.data[e]},e.prototype.set=function(e,t){return this.has(e)||this.size++,this.data[e]=t,this},e.prototype.has=function(e){return e in this.data},e.prototype.delete=function(e){return!!this.has(e)&&(this.size--,delete this.data[e],!0)},e.prototype.clear=function(){this.data=t(),this.size=0},e.prototype.keys=function(){return new n(this.data,function(e,t){return t})},e.prototype.values=function(){return new n(this.data,function(e,t){return e[t]})},e.prototype.entries=function(){return new n(this.data,function(e,t){return[t,e[t]]})},e.prototype.forEach=function(e){for(var t in this.data)e(this.data[t],t)},e}());function r(e,t){if(e)for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o)return o}}function i(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(t(o,n))return o}}function T(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return n;return-1}function a(e,t){if(e)for(var n=0,o=e;n<o.length;n++){if(o[n]===t)return!0}return!1}function s(e,t,n){for(var o=n||0;o<e.length;o++)if(a(t,e.charCodeAt(o)))return o;return-1}function y(e,t){for(var n=0,o=0;o<e.length;o++)t(e[o],o,e)&&(e[n]=e[o],n++);e.length=n}function v(e,t){var n;if(e){n=[];for(var o=0;o<e.length;o++)n.push(t(e[o],o))}return n}function g(e){var t;if(e){t=[];for(var n=0,o=e;n<o.length;n++){var r=o[n];r&&(N(r)?d(t,r):t.push(r))}}return t}function l(e,t){var n;if(e){n=[];for(var o=0;o<e.length;o++){var r=t(e[o],o);r&&(N(r)?d(n,r):n.push(r))}}return n}function b(e,t){if(e){if(!t)return 0<e.length;for(var n=0,o=e;n<o.length;n++){if(t(o[n]))return!0}}return!1}function c(e,t){var n;if(e){n=[];e:for(var o=0,r=e;o<r.length;o++){for(var i=r[o],a=0,s=n;a<s.length;a++){var l=s[a];if(t?t(l,i):l===i)continue e}n.push(i)}}return n}function u(e,t,n){if(!e||!t)return e===t;if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++){if(!(n?n(e[o],t[o]):e[o]===t[o]))return!1}return!0}function p(e,t){return t<0?e.length+t:t}function d(e,t,n,o){if(void 0===t||0===t.length)return e;if(void 0===e)return t.slice(n,o);n=void 0===n?0:p(t,n),o=void 0===o?t.length:p(t,o);for(var r=n;r<o&&r<t.length;r++){void 0!==t[r]&&e.push(t[r])}return e}function _(e,t){return!a(e,t)&&(e.push(t),!0)}function f(e,t){if(e&&(t=p(e,t))<e.length)return e[t]}function k(e){return f(e,-1)}function E(e,t,n,o,r){if(e&&0<e.length){var i=e.length;if(0<i){var a=void 0===o||o<0?0:o,s=void 0===r||i-1<a+r?i-1:a+r,l=void 0;for(arguments.length<=2?(l=e[a],a++):l=n;a<=s;)l=t(l,e[a],a),a++;return l}}return n}m.toPath=function(e,t,n){return n(te(e)?Y(e):re(e,t))},(e=m.Comparison||(m.Comparison={}))[e.LessThan=-1]="LessThan",e[e.EqualTo=0]="EqualTo",e[e.GreaterThan=1]="GreaterThan",m.length=function(e){return e?e.length:0},m.forEach=r,m.firstDefined=function(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(void 0!==o)return o}},m.findAncestor=function(e,t){for(;e;){var n=t(e);if("quit"===n)return;if(n)return e;e=e.parent}},m.zipWith=function(e,t,n){var o=[];Fe.assert(e.length===t.length);for(var r=0;r<e.length;r++)o.push(n(e[r],t[r],r));return o},m.zipToMap=function(e,t){Fe.assert(e.length===t.length);for(var n=h(),o=0;o<e.length;++o)n.set(e[o],t[o]);return n},m.every=function(e,t){if(e)for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0},m.find=i,m.findLast=function(e,t){for(var n=e.length-1;0<=n;n--){var o=e[n];if(t(o,n))return o}},m.findIndex=T,m.findMap=function(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o)return o}Fe.fail()},m.contains=a,m.indexOf=function(e,t){if(e)for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},m.indexOfAnyCharCode=s,m.countWhere=function(e,t){var n=0;if(e)for(var o=0;o<e.length;o++)t(e[o],o)&&n++;return n},m.filter=function(e,t){if(e){for(var n=e.length,o=0;o<n&&t(e[o]);)o++;if(o<n){var r=e.slice(0,o);for(o++;o<n;){var i=e[o];t(i)&&r.push(i),o++}return r}}return e},m.filterMutate=y,m.clear=function(e){e.length=0},m.map=v,m.sameMap=function(e,t){var n;if(e)for(var o=0;o<e.length;o++)if(n)n.push(t(e[o],o));else{var r=e[o],i=t(r,o);r!==i&&(n=e.slice(0,o)).push(i)}return n||e},m.flatten=g,m.flatMap=l,m.flatMapIter=function(e,t){for(var n=[];;){var o=e.next(),r=o.value;if(o.done)break;var i=t(r);i&&(N(i)?n.push.apply(n,i):n.push(i))}return n},m.sameFlatMap=function(e,t){var n;if(e)for(var o=0;o<e.length;o++){var r=e[o],i=t(r,o);(n||r!==i||N(i))&&(n||(n=e.slice(0,o)),N(i)?d(n,i):n.push(i))}return n||e},m.mapDefined=function(e,t){var n=[];if(e)for(var o=0;o<e.length;o++){var r=t(e[o],o);void 0!==r&&n.push(r)}return n},m.mapDefinedIter=function(e,t){for(var n=[];;){var o=e.next(),r=o.value;if(o.done)break;var i=t(r);void 0!==i&&n.push(i)}return n},m.span=function(e,t){if(e){for(var n=0;n<e.length;n++)if(!t(e[n],n))return[e.slice(0,n),e.slice(n)];return[e.slice(0),[]]}},m.spanMap=function(e,t,n){var o;if(e){o=[];for(var r=e.length,i=void 0,a=void 0,s=0,l=0;s<r;){for(;l<r;){if(a=t(e[l],l),0===l)i=a;else if(a!==i)break;l++}if(s<l){var c=n(e.slice(s,l),i,s,l);c&&o.push(c),s=l}i=a,l++}}return o},m.mapEntries=function(e,i){if(e){var a=h();return e.forEach(function(e,t){var n=i(t,e),o=n[0],r=n[1];a.set(o,r)}),a}},m.some=b,m.concatenate=function(e,t){return b(t)?b(e)?e.concat(t):t:e},m.deduplicate=c,m.arrayIsEqualTo=u,m.changesAffectModuleResolution=function(e,t){return!(e&&e.module===t.module&&e.moduleResolution===t.moduleResolution&&e.noResolve===t.noResolve&&e.target===t.target&&e.noLib===t.noLib&&e.jsx===t.jsx&&e.allowJs===t.allowJs&&e.rootDir===t.rootDir&&e.configFilePath===t.configFilePath&&e.baseUrl===t.baseUrl&&e.maxNodeModuleJsDepth===t.maxNodeModuleJsDepth&&u(e.lib,t.lib)&&u(e.typeRoots,t.typeRoots)&&u(e.rootDirs,t.rootDirs)&&A(e.paths,t.paths))},m.compact=function(e){var t;if(e)for(var n=0;n<e.length;n++){var o=e[n];!t&&o||(t||(t=e.slice(0,n)),o&&t.push(o))}return t||e},m.relativeComplement=function(e,t,n,o,r){if(void 0===n&&(n=M),void 0===o&&(o=0),void 0===r&&(r=0),!t||!e||0===t.length||0===e.length)return t;var i=[];e:for(;r<t.length;r++){t:for(;o<e.length;o++)switch(n(t[r],e[o])){case-1:break t;case 0:continue e;case 1:continue t}i.push(t[r])}return i},m.sum=function(e,t){for(var n=0,o=0,r=e;o<r.length;o++)n+=r[o][t];return n},m.append=function(e,t){return void 0===t?e:void 0===e?[t]:(e.push(t),e)},m.addRange=d,m.pushIfUnique=_,m.appendIfUnique=function(e,t){return e?(_(e,t),e):[t]},m.stableSort=function(n,o){return void 0===o&&(o=M),n.map(function(e,t){return t}).sort(function(e,t){return o(n[e],n[t])||M(e,t)}).map(function(e){return n[e]})},m.rangeEquals=function(e,t,n,o){for(;n<o;){if(e[n]!==t[n])return!1;n++}return!0},m.elementAt=f,m.firstOrUndefined=function(e){return f(e,0)},m.first=function(e){return Fe.assert(0!==e.length),e[0]},m.lastOrUndefined=k,m.last=function(e){return Fe.assert(0!==e.length),e[e.length-1]},m.singleOrUndefined=function(e){return e&&1===e.length?e[0]:void 0},m.singleOrMany=function(e){return e&&1===e.length?e[0]:e},m.replaceElement=function(e,t,n){var o=e.slice(0);return o[t]=n,o},m.binarySearch=function(e,t,n,o){if(!e||0===e.length)return-1;var r=o||0,i=e.length-1;for(n=void 0!==n?n:function(e,t){return e<t?-1:t<e?1:0};r<=i;){var a=r+(i-r>>1),s=e[a];if(0===n(s,t))return a;0<n(s,t)?i=a-1:r=a+1}return~r},m.reduceLeft=E,m.reduceRight=function(e,t,n,o,r){if(e){var i=e.length;if(0<i){var a=void 0===o||i-1<o?i-1:o,s=void 0===r||a-r<0?0:a-r,l=void 0;for(arguments.length<=2?(l=e[a],a--):l=n;s<=a;)l=t(l,e[a],a),a--;return l}}return n};var S=Object.prototype.hasOwnProperty;function C(e,t){return S.call(e,t)}function x(e,n){e.forEach(function(e,t){n.set(t,e)})}function A(e,t,n){if(e===t)return!0;if(!e||!t)return!1;for(var o in e)if(S.call(e,o)){if(void 0===!S.call(t,o))return!1;if(n?!n(e[o],t[o]):e[o]!==t[o])return!1}for(var o in t)if(S.call(t,o)&&!S.call(e,o))return!1;return!0}function D(e,t,n){for(var o=h(),r=0,i=e;r<i.length;r++){var a=i[r];o.set(t(a),n?n(a):a)}return o}function B(e,t){var n=this.get(e);return n?n.push(t):this.set(e,n=[t]),n}function I(e,t){var n=this.get(e);n&&(qe(n,t),n.length||this.delete(e))}function N(e){return Array.isArray?Array.isArray(e):e instanceof Array}function w(e){return"string"==typeof e}function O(e){var t;return function(){return e&&(t=e(),e=void 0),t}}function R(t,n,o,r,e){if(e){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return function(e){return E(i,function(e,t){return t(e)},e)}}return r?function(e){return r(o(n(t(e))))}:o?function(e){return o(n(t(e)))}:n?function(e){return n(t(e))}:t?function(e){return t(e)}:function(e){return e}}function L(e,n,o){return o=o||0,e.replace(/{(\d+)}/g,function(e,t){return n[+t+o]})}function P(e){return m.localizedDiagnosticMessages&&m.localizedDiagnosticMessages[e.key]||e.message}function M(e,t){return e===t?0:void 0===e?-1:void 0===t?1:e<t?-1:1}function F(e,t,n){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;if(n){if(m.collator){var o=m.localeCompareIsCorrect?m.collator.compare(e,t):e.localeCompare(t,void 0,{usage:"sort",sensitivity:"accent"});return o<0?-1:0<o?1:0}if((e=e.toUpperCase())===(t=t.toUpperCase()))return 0}return e<t?-1:1}function U(e,t){return F(e,t,!0)}function H(e){return e.file?e.file.fileName:void 0}function G(e,t){return M(H(e),H(t))||M(e.start,t.start)||M(e.length,t.length)||M(e.code,t.code)||function(e,t){for(;e&&t;){var n=w(e)?e:e.messageText,o=w(t)?t:t.messageText,r=M(n,o);if(r)return r;e=w(e)?void 0:e.next,t=w(t)?void 0:t.next}if(!e&&!t)return 0;return e?1:-1}(e.messageText,t.messageText)||0}function V(e){if(e.length<2)return e;for(var t=[e[0]],n=e[0],o=1;o<e.length;o++){var r=e[o];0===G(r,n)||(t.push(r),n=r)}return t}function W(e){return e.replace(/\\/g,"/")}function K(e){if(47===e.charCodeAt(0)){if(47!==e.charCodeAt(1))return 1;var t=e.indexOf("/",2);if(t<0)return 2;var n=e.indexOf("/",t+1);return n<0?t+1:n+1}if(58===e.charCodeAt(1))return 47===e.charCodeAt(2)?3:2;if(0===e.lastIndexOf("file:///",0))return"file:///".length;var o=e.indexOf("://");return-1!==o?o+"://".length:0}m.hasProperty=C,m.getProperty=function(e,t){return S.call(e,t)?e[t]:void 0},m.getOwnKeys=function(e){var t=[];for(var n in e)S.call(e,n)&&t.push(n);return t},m.getOwnValues=function(e){var t=[];for(var n in e)S.call(e,n)&&t.push(e[n]);return t},m.arrayFrom=function(e,t){for(var n,o=[],r=e.next(),i=r.value,a=r.done;!a;i=(n=e.next()).value,a=n.done,n)o.push(t?t(i):i);return o},m.forEachEntry=function(e,t){for(var n,o=e.entries(),r=o.next(),i=r.value,a=r.done;!a;i=(n=o.next()).value,a=n.done,n){var s=i[0],l=t(i[1],s);if(l)return l}},m.forEachKey=function(e,t){for(var n,o=e.keys(),r=o.next(),i=r.value,a=r.done;!a;i=(n=o.next()).value,a=n.done,n){var s=t(i);if(s)return s}},m.copyEntries=x,m.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var o=0,r=t;o<r.length;o++){var i=r[o];for(var a in i)C(i,a)&&(e[a]=i[a])}return e},m.equalOwnProperties=A,m.arrayToMap=D,m.arrayToNumericMap=function(e,t){for(var n=[],o=0,r=e;o<r.length;o++){var i=r[o];n[t(i)]=i}return n},m.arrayToSet=function(e,t){return D(e,t||function(e){return e},function(){return!0})},m.cloneMap=function(e){var t=h();return x(e,t),t},m.clone=function(e){var t={};for(var n in e)S.call(e,n)&&(t[n]=e[n]);return t},m.extend=function(e,t){var n={};for(var o in t)S.call(t,o)&&(n[o]=t[o]);for(var o in e)S.call(e,o)&&(n[o]=e[o]);return n},m.createMultiMap=function(){var e=h();return e.add=B,e.remove=I,e},m.isArray=N,m.isString=w,m.tryCast=function(e,t){return void 0!==e&&t(e)?e:void 0},m.cast=function(e,t){if(void 0!==e&&t(e))return e;Fe.fail("Invalid cast. The supplied value did not pass the test '"+Fe.getFunctionName(t)+"'.")},m.noop=function(){},m.returnFalse=function(){return!1},m.returnTrue=function(){return!0},m.identity=function(e){return e},m.notImplemented=function(){throw new Error("Not implemented")},m.memoize=O,m.chain=function(t,n,o,r,e){if(e){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return function(t){return R.apply(void 0,v(i,function(e){return e(t)}))}}return r?function(e){return R(t(e),n(e),o(e),r(e))}:o?function(e){return R(t(e),n(e),o(e))}:n?function(e){return R(t(e),n(e))}:t?function(e){return R(t(e))}:function(e){return function(e){return e}}},m.compose=R,m.formatStringFromArgs=L,m.localizedDiagnosticMessages=void 0,m.getLocaleSpecificMessage=P,m.createFileDiagnostic=function(e,t,n,o){Fe.assertGreaterThanOrEqual(t,0),Fe.assertGreaterThanOrEqual(n,0),e&&(Fe.assertLessThanOrEqual(t,e.text.length),Fe.assertLessThanOrEqual(t+n,e.text.length));var r=P(o);return 4<arguments.length&&(r=L(r,arguments,4)),{file:e,start:t,length:n,messageText:r,category:o.category,code:o.code}},m.formatMessage=function(e,t){var n=P(t);return 2<arguments.length&&(n=L(n,arguments,2)),n},m.createCompilerDiagnostic=function(e){var t=P(e);return 1<arguments.length&&(t=L(t,arguments,1)),{file:void 0,start:void 0,length:void 0,messageText:t,category:e.category,code:e.code}},m.createCompilerDiagnosticFromMessageChain=function(e){return{file:void 0,start:void 0,length:void 0,code:e.code,category:e.category,messageText:e.next?e:e.messageText}},m.chainDiagnosticMessages=function(e,t){var n=P(t);return 2<arguments.length&&(n=L(n,arguments,2)),{messageText:n,category:t.category,code:t.code,next:e}},m.concatenateDiagnosticMessageChains=function(e,t){for(var n=e;n.next;)n=n.next;return n.next=t,e},m.compareValues=M,m.compareStrings=F,m.compareStringsCaseInsensitive=U,m.compareDiagnostics=G,m.sortAndDeduplicateDiagnostics=function(e){return V(e.sort(G))},m.deduplicateSortedDiagnostics=V,m.normalizeSlashes=W,m.getRootLength=K,m.directorySeparator="/";var z=47;function j(e,t){for(var n=[],o=0,r=e.substr(t).split(m.directorySeparator);o<r.length;o++){var i=r[o];"."!==i&&(".."===i&&0<n.length&&".."!==k(n)?n.pop():i&&n.push(i))}return n}function Y(e){return X(e).path}function X(e){var t=K(e=W(e)),n=e.substr(0,t),o=j(e,t);if(o.length){var r=n+o.join(m.directorySeparator);return{path:J(e)?r+m.directorySeparator:r,parts:o}}return{path:n,parts:o}}function J(e){return e.charCodeAt(e.length-1)===z}function q(e){return e.substr(0,Math.max(K(e),e.lastIndexOf(m.directorySeparator)))}function Z(e){return e&&!te(e)&&_e(e,"://")}function $(e){return e.target||0}function Q(e){return"number"==typeof e.module?e.module:2<=$(e)?m.ModuleKind.ES2015:m.ModuleKind.CommonJS}function ee(e){for(var t=!1,n=0;n<e.length;n++)if(42===e.charCodeAt(n)){if(t)return!1;t=!0}return!0}function te(e){return e&&0!==K(e)}function ne(e,t){var n=j(e,t);return[e.substr(0,t)].concat(n)}function oe(e,t){var n=K(e=W(e));return 0===n&&(n=K(e=ce(W(t),e))),ne(e,n)}function re(e,t){return ie(oe(e,t))}function ie(e){if(e&&e.length)return e[0]+e.slice(1).join(m.directorySeparator)}function ae(e,t){return Z(e)?function(e){for(var t=e.length,n=e.indexOf("://")+"://".length;n<t&&47===e.charCodeAt(n);)n++;if(n===t)return[e];var o=e.indexOf(m.directorySeparator,n);return-1!==o?ne(e,n=o+1):[e+m.directorySeparator]}(e):oe(e,t)}function se(e,t,n,o,r){var i,a=ae(t,n),s=ae(e,n);for(1<s.length&&""===k(s)&&s.pop(),i=0;i<a.length&&i<s.length&&o(s[i])===o(a[i]);i++);if(i){for(var l="",c=a.slice(i,a.length);i<s.length;i++)""!==s[i]&&(l=l+".."+m.directorySeparator);return l+c.join(m.directorySeparator)}var u=ie(a);return r&&te(u)&&(u="file:///"+u),u}function le(e){if(void 0!==e){var t=e.lastIndexOf(m.directorySeparator);return t<0?e:e.substring(t+1)}}function ce(e,t){return e&&e.length?t&&t.length?0!==K(t)?t:e.charAt(e.length-1)===m.directorySeparator?e+t:e+m.directorySeparator+t:e:t}function ue(e){return e.charAt(e.length-1)===m.directorySeparator?e.substr(0,e.length-1):e}function ge(e,t,n,o){if(void 0===e||void 0===t)return!1;if(e===t)return!0;if((e=ue(e))===(t=ue(t)))return!0;var r=oe(e,n),i=oe(t,n);if(i.length<r.length)return!1;for(var a=0;a<r.length;a++){if(0!==F(r[a],i[a],o))return!1}return!0}function pe(e,t){return 0===e.lastIndexOf(t,0)}function de(e,t){var n=e.length-t.length;return 0<=n&&e.indexOf(t,n)===n}function _e(e,t){return-1!==e.indexOf(t)}function fe(e){return _e(le(e),".")}function he(e,t){return e.length>t.length&&de(e,t)}function me(e,t){for(var n=0,o=t;n<o.length;n++){if(he(e,o[n]))return!0}return!1}m.normalizePath=Y,m.normalizePathAndParts=X,m.pathEndsWithDirectorySeparator=J,m.getDirectoryPath=q,m.isUrl=Z,m.pathIsRelative=function(e){return/^\.\.?($|[\\/])/.test(e)},m.moduleHasNonRelativeName=function(e){return!m.isExternalModuleNameRelative(e)},m.getEmitScriptTarget=$,m.getEmitModuleKind=Q,m.getEmitModuleResolutionKind=function(e){var t=e.moduleResolution;return void 0===t&&(t=Q(e)===m.ModuleKind.CommonJS?m.ModuleResolutionKind.NodeJs:m.ModuleResolutionKind.Classic),t},m.hasZeroOrOneAsteriskCharacter=ee,m.isRootedDiskPath=te,m.convertToRelativePath=function(e,t,n){return te(e)?se(t,e,t,n,!1):e},m.getNormalizedPathComponents=oe,m.getNormalizedAbsolutePath=re,m.getNormalizedPathFromPathComponents=ie,m.getRelativePathToDirectoryOrUrl=se,m.getBaseFileName=le,m.combinePaths=ce,m.removeTrailingDirectorySeparator=ue,m.ensureTrailingDirectorySeparator=function(e){return e.charAt(e.length-1)!==m.directorySeparator?e+m.directorySeparator:e},m.comparePaths=function(e,t,n,o){if(e===t)return 0;if(void 0===e)return-1;if(void 0===t)return 1;e=ue(e),t=ue(t);for(var r=oe(e,n),i=oe(t,n),a=Math.min(r.length,i.length),s=0;s<a;s++){var l=F(r[s],i[s],o);if(0!==l)return l}return M(r.length,i.length)},m.containsPath=ge,m.startsWith=pe,m.removePrefix=function(e,t){return pe(e,t)?e.substr(t.length):e},m.endsWith=de,m.stringContains=_e,m.hasExtension=fe,m.fileExtensionIs=he,m.fileExtensionIsOneOf=me;var ye=/[^\w\s\/]/g,ve=[42,63];m.commonPackageFolders=["node_modules","bower_components","jspm_packages"];var be="(?!("+m.commonPackageFolders.join("|")+")(/|$))",ke={singleAsteriskRegexFragment:"([^./]|(\\.(?!min\\.js$))?)*",doubleAsteriskRegexFragment:"(/"+be+"[^/.][^/]*)*?",replaceWildcardCharacter:function(e){return De(e,ke.singleAsteriskRegexFragment)}},Te={singleAsteriskRegexFragment:"[^/]*",doubleAsteriskRegexFragment:"(/"+be+"[^/.][^/]*)*?",replaceWildcardCharacter:function(e){return De(e,Te.singleAsteriskRegexFragment)}},Ee={singleAsteriskRegexFragment:"[^/]*",doubleAsteriskRegexFragment:"(/.+?)?",replaceWildcardCharacter:function(e){return De(e,Ee.singleAsteriskRegexFragment)}},Se={files:ke,directories:Te,exclude:Ee};function Ce(e,t,n){var o=xe(e,t,n);if(o&&o.length)return"^("+o.map(function(e){return"("+e+")"}).join("|")+")"+("exclude"===n?"($|/)":"$")}function xe(e,t,n){if(void 0!==e&&0!==e.length)return l(e,function(e){return e&&function(e,t,n,o){var r=o.singleAsteriskRegexFragment,i=o.doubleAsteriskRegexFragment,a=o.replaceWildcardCharacter,s="",l=!1,c=!1,u=oe(e,t),g=k(u);if("exclude"!==n&&"**"===g)return;u[0]=ue(u[0]),Ae(g)&&u.push("**","*");for(var p=0,d=0,_=u;d<_.length;d++){var f=_[d];if("**"===f){if(l)return;s+=i,l=!0}else if("directories"===n&&(s+="(",p++),c&&(s+=m.directorySeparator),"exclude"!==n){var h="";42===f.charCodeAt(0)?(h+="([^./]"+r+")?",f=f.substr(1)):63===f.charCodeAt(0)&&(h+="[^./]",f=f.substr(1)),(h+=f.replace(ye,a))!==f&&(s+=be),s+=h}else s+=f.replace(ye,a);c=!0}for(;0<p;)s+=")?",p--;return s}(e,t,n,Se[n])})}function Ae(e){return!/[.*?]/.test(e)}function De(e,t){return"*"===e?t:"?"===e?"[^/]":"\\"+e}function Be(e,t,n,o,r){e=Y(e);var i=ce(r=Y(r),e);return{includeFilePatterns:v(xe(n,i,"files"),function(e){return"^"+e+"$"}),includeFilePattern:Ce(n,i,"files"),includeDirectoryPattern:Ce(n,i,"directories"),excludePattern:Ce(t,i,"exclude"),basePaths:function(n,e,o){var r=[n];if(e){for(var t=[],i=0,a=e;i<a.length;i++){var s=a[i],l=te(s)?s:Y(ce(n,s));t.push(Ne(l))}t.sort(o?F:U);for(var c=function(t){m.every(r,function(e){return!ge(e,t,n,!o)})&&r.push(t)},u=0,g=t;u<g.length;u++){var p=g[u];c(p)}}return r}(e,n,o)}}function Ie(e,_,t,n,o,r,i,f){for(var a=Be(e=Y(e),t,n,o,r=Y(r)),s=o?"":"i",h=a.includeFilePatterns&&a.includeFilePatterns.map(function(e){return new RegExp(e,s)}),m=a.includeDirectoryPattern&&new RegExp(a.includeDirectoryPattern,s),y=a.excludePattern&&new RegExp(a.excludePattern,s),v=h?h.map(function(){return[]}):[[]],b=o?F:U,l=0,c=a.basePaths;l<c.length;l++){var u=c[l];k(u,ce(r,u),i)}return g(v);function k(r,i,e){for(var t=f(r),n=t.files,o=t.directories,a=function(e){var t=ce(r,e),n=ce(i,e);if(_&&!me(t,_))return"continue";if(y&&y.test(n))return"continue";if(h){var o=T(h,function(e){return e.test(n)});-1!==o&&v[o].push(t)}else v[0].push(t)},s=0,l=n=n.slice().sort(b);s<l.length;s++){a(g=l[s])}if(void 0===e||0!=--e)for(var c=0,u=o=o.slice().sort(b);c<u.length;c++){var g=u[c],p=ce(r,g),d=ce(i,g);m&&!m.test(d)||y&&y.test(d)||k(p,d,e)}}}function Ne(e){var t=s(e,ve);return t<0?fe(e)?ue(q(e)):e:e.substring(0,e.lastIndexOf(m.directorySeparator,t))}function we(e){switch(e.substr(e.lastIndexOf(".")).toLowerCase()){case".js":return 1;case".jsx":return 2;case".ts":return 3;case".tsx":return 4;case".json":return 6;default:return 0}}m.getRegularExpressionForWildcard=Ce,m.isImplicitGlob=Ae,m.getFileMatcherPatterns=Be,m.matchFiles=Ie,m.ensureScriptKind=function(e,t){return t||we(e)||3},m.getScriptKindFromFileName=we,m.supportedTypeScriptExtensions=[".ts",".tsx",".d.ts"],m.supportedTypescriptExtensionsForExtractExtension=[".d.ts",".ts",".tsx"],m.supportedJavascriptExtensions=[".js",".jsx"];var Oe,Re=m.supportedTypeScriptExtensions.concat(m.supportedJavascriptExtensions);function Le(e,t){var n=e&&e.allowJs;return t&&0!==t.length&&n?c(Re.concat(t.map(function(e){return e.extension}))):n?Re:m.supportedTypeScriptExtensions}function Pe(e,t){return e<2?0:e<t.length?2:t.length}m.getSupportedExtensions=Le,m.hasJavaScriptFileExtension=function(t){return r(m.supportedJavascriptExtensions,function(e){return he(t,e)})},m.hasTypeScriptFileExtension=function(t){return r(m.supportedTypeScriptExtensions,function(e){return he(t,e)})},m.isSupportedSourceFileName=function(e,t,n){if(!e)return!1;for(var o=0,r=Le(t,n);o<r.length;o++)if(he(e,r[o]))return!0;return!1},(Oe=m.ExtensionPriority||(m.ExtensionPriority={}))[Oe.TypeScriptFiles=0]="TypeScriptFiles",Oe[Oe.DeclarationAndJavaScriptFiles=2]="DeclarationAndJavaScriptFiles",Oe[Oe.Highest=0]="Highest",Oe[Oe.Lowest=2]="Lowest",m.getExtensionPriority=function(e,t){for(var n=t.length-1;0<=n;n--)if(he(e,t[n]))return Pe(n,t);return 0},m.adjustExtensionPriority=Pe,m.getNextLowestExtensionPriority=function(e,t){return e<2?2:t.length};var Me,Fe,Ue=[".d.ts",".ts",".js",".tsx",".jsx"];function He(e){for(var t=0,n=Ue;t<n.length;t++){var o=Ge(e,n[t]);if(void 0!==o)return o}return e}function Ge(e,t){return he(e,t)?Ve(e,t):void 0}function Ve(e,t){return e.substring(0,e.length-t.length)}function We(e,t){this.flags=e,this.escapedName=t,this.declarations=void 0}function Ke(e,t){this.flags=t,Fe.isDebugging&&(this.checker=e)}function ze(){}function je(e,t,n){this.id=0,this.kind=e,this.pos=t,this.end=n,this.flags=0,this.modifierFlagsCache=0,this.transformFlags=0,this.parent=void 0,this.original=void 0}function Ye(e,t,n){this.fileName=e,this.text=t,this.skipTrivia=n||function(e){return e}}function Xe(e,t){for(var n=t;n<e.length-1;n++)e[n]=e[n+1];e.pop()}function Je(e,t){e[t]=e[e.length-1],e.pop()}function qe(e,t){!function(e,t){for(var n=0;n<e.length;n++)if(t(e[n])){Je(e,n);break}}(e,function(e){return e===t})}function Ze(e){return e?function(e){return e}:function(e){return e.toLowerCase()}}function $e(e,t,n){for(var o=void 0,r=-1,i=0,a=e;i<a.length;i++){var s=a[i],l=t(s);Qe(l,n)&&l.prefix.length>r&&(r=l.prefix.length,o=s)}return o}function Qe(e,t){var n=e.prefix,o=e.suffix;return t.length>=n.length+o.length&&pe(t,n)&&de(t,o)}function et(e){Fe.assert(ee(e));var t=e.indexOf("*");return-1===t?void 0:{prefix:e.substr(0,t),suffix:e.substr(t+1)}}function tt(t){return i(m.supportedTypescriptExtensionsForExtractExtension,function(e){return he(t,e)})||i(m.supportedJavascriptExtensions,function(e){return he(t,e)})}m.removeFileExtension=He,m.tryRemoveExtension=Ge,m.removeExtension=Ve,m.changeExtension=function(e,t){return He(e)+t},m.objectAllocator={getNodeConstructor:function(){return je},getTokenConstructor:function(){return je},getIdentifierConstructor:function(){return je},getSourceFileConstructor:function(){return je},getSymbolConstructor:function(){return We},getTypeConstructor:function(){return Ke},getSignatureConstructor:function(){return ze},getSourceMapSourceConstructor:function(){return Ye}},(Me=m.AssertionLevel||(m.AssertionLevel={}))[Me.None=0]="None",Me[Me.Normal=1]="Normal",Me[Me.Aggressive=2]="Aggressive",Me[Me.VeryAggressive=3]="VeryAggressive",function(t){function i(e,t){var n=new Error(e?"Debug Failure. "+e:"Debug Failure.");throw Error.captureStackTrace&&Error.captureStackTrace(n,t||i),n}t.currentAssertionLevel=0,t.isDebugging=!1,t.shouldAssert=function(e){return t.currentAssertionLevel>=e},t.assert=function e(t,n,o,r){t||(o&&(n+="\r\nVerbose Debug Information: "+("string"==typeof o?o:o())),i(n?"False expression: "+n:"False expression.",r||e))},t.assertEqual=function(e,t,n,o){e!==t&&i("Expected "+e+" === "+t+". "+(n?o?n+" "+o:n:""))},t.assertLessThan=function(e,t,n){t<=e&&i("Expected "+e+" < "+t+". "+(n||""))},t.assertLessThanOrEqual=function(e,t){t<e&&i("Expected "+e+" <= "+t)},t.assertGreaterThanOrEqual=function(e,t){e<t&&i("Expected "+e+" >= "+t)},t.fail=i,t.assertNever=function e(t,n,o){return i(n||"Illegal value: "+t,o||e)},t.getFunctionName=function(e){if("function"!=typeof e)return"";if(e.hasOwnProperty("name"))return e.name;var t=Function.prototype.toString.call(e),n=/^function\s+([\w\$]+)\s*\(/.exec(t);return n?n[1]:""}}(Fe=m.Debug||(m.Debug={})),m.orderedRemoveItem=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return Xe(e,n),!0;return!1},m.orderedRemoveItemAt=Xe,m.unorderedRemoveItemAt=Je,m.unorderedRemoveItem=qe,m.createGetCanonicalFileName=Ze,m.matchPatternOrExact=function(e,t){for(var n=[],o=0,r=e;o<r.length;o++){var i=r[o],a=et(i);if(a)n.push(a);else if(i===t)return i}return $e(n,function(e){return e},t)},m.patternText=function(e){return e.prefix+"*"+e.suffix},m.matchedText=function(e,t){return Fe.assert(Qe(e,t)),t.substr(e.prefix.length,t.length-e.suffix.length)},m.findBestPatternMatch=$e,m.tryParsePattern=et,m.positionIsSynthesized=function(e){return!(0<=e)},m.extensionIsTypeScript=function(e){return".ts"===e||".tsx"===e||".d.ts"===e},m.extensionFromPath=function(e){var t=tt(e);if(void 0!==t)return t;Fe.fail("File "+e+" has unknown extension.")},m.isAnySupportedFileExtension=function(e){return void 0!==tt(e)},m.tryGetExtensionFromPath=tt,m.getAnyExtensionFromPath=function(e){var t=le(e),n=t.lastIndexOf(".");if(0<=n)return t.substring(n)},m.isCheckJsEnabledForFile=function(e,t){return e.checkJsDirective?e.checkJsDirective.enabled:t.checkJs},m.and=function(t,n){return function(e){return t(e)&&n(e)}},m.assertTypeIsNever=function(e){},m.createCachedDirectoryStructureHost=function(s){var i=h(),l=O(function(){return s.getCurrentDirectory()}),n=Ze(s.useCaseSensitiveFileNames);return{useCaseSensitiveFileNames:s.useCaseSensitiveFileNames,newLine:s.newLine,readFile:function(e,t){return s.readFile(e,t)},write:function(e){return s.write(e)},writeFile:function(e,t,n){var o=a(c(e));return o&&f(o,g(e),!0),s.writeFile(e,t,n)},fileExists:function(e){var t=a(c(e));return t&&r(t.files,g(e))||s.fileExists(e)},directoryExists:function(e){var t=c(e);return i.has(t)||s.directoryExists(e)},createDirectory:function(e){var t=a(c(e)),n=g(e);t&&_(t.directories,n,!0),s.createDirectory(e)},getCurrentDirectory:l,getDirectories:function(e){var t=c(e),n=d(e,t);return n?n.directories.slice():s.getDirectories(e)},readDirectory:function(e,t,n,o,r){var i=c(e),a=d(e,i);return a?Ie(e,t,n,o,s.useCaseSensitiveFileNames,l(),r,function(e){var t=c(e);return t===i?a:u(t)||p(e,t)}):s.readDirectory(e,t,n,o,r)},addOrDeleteFileOrDirectory:function(e,t){if(u(t))s.directoryExists(e)||i.delete(t);else{var n=a(t);if(n){var o=g(e);if(n){var r={fileExists:s.fileExists(t),directoryExists:s.directoryExists(t)};return f(n,o,r.fileExists),_(n.directories,o,r.directoryExists),r}}}},addOrDeleteFile:function(e,t,n){if(n!==m.FileWatcherEventKind.Changed){var o=a(t);o&&f(o,g(e),n===m.FileWatcherEventKind.Created)}},clearCache:function(){i.clear()},exit:function(e){return s.exit(e)}};function c(e){return m.toPath(e,l(),n)}function u(e){return i.get(e)}function a(e){return u(q(e))}function g(e){return le(Y(e))}function p(e,t){var n={files:v(s.readDirectory(e,void 0,void 0,["*.*"]),g)||[],directories:s.getDirectories(e)||[]};return i.set(t,n),n}function d(e,t){var n=u(t);if(n)return n;try{return p(e,t)}catch(e){return void Fe.assert(!i.has(t))}}function o(e,t){return n(e)===n(t)}function r(e,t){return b(e,function(e){return o(e,t)})}function _(e,t,n){if(r(e,t)){if(!n)return y(e,function(e){return!o(e,t)})}else if(n)return e.push(t)}function f(e,t,n){_(e.files,t,n)}}}(ts||(ts={})),function(b){var k,e;function T(){if("undefined"!=typeof process){var e=process.version;if(e){var t=e.indexOf(".");if(-1!==t)return parseInt(e.substring(1,t))}}}b.setStackTraceLimit=function(){Error.stackTraceLimit<100&&(Error.stackTraceLimit=100)},(e=k=b.FileWatcherEventKind||(b.FileWatcherEventKind={}))[e.Created=0]="Created",e[e.Changed=1]="Changed",e[e.Deleted=2]="Deleted",b.getNodeMajorVersion=T,b.sys=function(){var r,e;if("undefined"!=typeof ChakraHost?(e=ChakraHost.realpath&&function(e){return ChakraHost.realpath(e)},r={newLine:ChakraHost.newLine||"\r\n",args:ChakraHost.args,useCaseSensitiveFileNames:!!ChakraHost.useCaseSensitiveFileNames,write:ChakraHost.echo,readFile:function(e,t){return ChakraHost.readFile(e)},writeFile:function(e,t,n){n&&(t="\ufeff"+t),ChakraHost.writeFile(e,t)},resolvePath:ChakraHost.resolvePath,fileExists:ChakraHost.fileExists,directoryExists:ChakraHost.directoryExists,createDirectory:ChakraHost.createDirectory,getExecutingFilePath:function(){return ChakraHost.executingFile},getCurrentDirectory:function(){return ChakraHost.currentDirectory},getDirectories:ChakraHost.getDirectories,getEnvironmentVariable:ChakraHost.getEnvironmentVariable||function(){return""},readDirectory:function(e,t,n,o,r){var i=b.getFileMatcherPatterns(e,n,o,!!ChakraHost.useCaseSensitiveFileNames,ChakraHost.currentDirectory);return ChakraHost.readDirectory(e,t,i.basePaths,i.excludePattern,i.includeFilePattern,i.includeDirectoryPattern)},exit:ChakraHost.quit,realpath:e}):"undefined"!=typeof process&&process.nextTick&&!process.browser&&"undefined"!=typeof require&&(r=function(){var a,l,e,t,c=require("fs"),n=require("path"),o=require("os"),r=require("crypto"),i=process.env.TSC_NONPOLLING_WATCHER,s=(a=b.createMap(),l=b.createMultiMap(),{addFile:function(e,t){return n=e,o=t,l.add(n,o),function(n){var e=a.get(n);if(e)return e.referenceCount+=1;(e=_(n||".",function(e,t){return function(e,t,n){var o=b.isString(t)?b.getNormalizedAbsolutePath(t,n):void 0;if("change"===e||"rename"===e){var r=l.get(o);if(r)for(var i=0,a=r;i<a.length;i++){var s=a[i];s(o,k.Changed)}}}(e,t,n)})).referenceCount=1,a.set(n,e)}(b.getDirectoryPath(e)),{fileName:e,callback:t};var n,o},removeFile:function(e){var t,n,o,r,i;r=e.fileName,i=e.callback,l.remove(r,i),t=e.fileName,n=b.getDirectoryPath(t),(o=a.get(n))&&(o.referenceCount-=1,o.referenceCount<=0&&(o.close(),a.delete(n)))}}),u=4<=T(),g=o.platform(),p="win32"!==g&&"win64"!==g&&!m(__filename.replace(/\w/g,function(e){var t=e.toUpperCase();return e===t?e.toLowerCase():t}));function d(a,s,e){return c.watchFile(a,{persistent:!0,interval:e||250},t),{close:function(){return c.unwatchFile(a,t)}};function t(e,t){var n=0==+e.mtime,o=0==+t.mtime,r=n&&!o,i=!n&&o?k.Created:r?k.Deleted:k.Changed;i===k.Changed&&+e.mtime<=+t.mtime||s(a,i)}}function _(n,o,t){var r,i=y(n)?a():s();return{close:function(){i.close()}};function a(){void 0===r&&(r=!u||"win32"!==process.platform&&"darwin"!==process.platform?{persistent:!0}:{persistent:!0,recursive:!!t});var e=c.watch(n,r,o);return e.on("error",function(){y(n)||(i=s(),o("rename",""))}),e}function s(){return d(n,function(e,t){t===k.Created&&y(n)&&(i.close(),i=a(),o("rename",""))})}}function f(e){try{for(var t=c.readdirSync(e||".").sort(),n=[],o=[],r=0,i=t;r<i.length;r++){var a=i[r];if("."!==a&&".."!==a){var s=b.combinePaths(e,a),l=void 0;try{l=c.statSync(s)}catch(e){continue}l.isFile()?n.push(a):l.isDirectory()&&o.push(a)}}return{files:n,directories:o}}catch(e){return{files:[],directories:[]}}}function h(e,t){try{var n=c.statSync(e);switch(t){case 0:return n.isFile();case 1:return n.isDirectory()}}catch(e){return!1}}function m(e){return h(e,0)}function y(e){return h(e,1)}(t=e||(e={}))[t.File=0]="File",t[t.Directory=1]="Directory";var v={args:process.argv.slice(2),newLine:o.EOL,useCaseSensitiveFileNames:p,write:function(e){process.stdout.write(e)},readFile:function(e,t){if(m(e)){var n=c.readFileSync(e),o=n.length;if(2<=o&&254===n[0]&&255===n[1]){o&=-2;for(var r=0;r<o;r+=2){var i=n[r];n[r]=n[r+1],n[r+1]=i}return n.toString("utf16le",2)}return 2<=o&&255===n[0]&&254===n[1]?n.toString("utf16le",2):3<=o&&239===n[0]&&187===n[1]&&191===n[2]?n.toString("utf8",3):n.toString("utf8")}},writeFile:function(e,t,n){var o;n&&(t="\ufeff"+t);try{o=c.openSync(e,"w"),c.writeSync(o,t,void 0,"utf8")}finally{void 0!==o&&c.closeSync(o)}},watchFile:function(e,t,n){if(i){var o=s.addFile(e,t);return{close:function(){return s.removeFile(o)}}}return d(e,t,n)},watchDirectory:function(n,o,e){return _(n,function(e,t){"rename"===e&&o(t?b.normalizePath(b.combinePaths(n,t)):t)},e)},resolvePath:function(e){return n.resolve(e)},fileExists:m,directoryExists:y,createDirectory:function(e){v.directoryExists(e)||c.mkdirSync(e)},getExecutingFilePath:function(){return __filename},getCurrentDirectory:function(){return process.cwd()},getDirectories:function(t){return b.filter(c.readdirSync(t),function(e){return h(b.combinePaths(t,e),1)})},getEnvironmentVariable:function(e){return process.env[e]||""},readDirectory:function(e,t,n,o,r){return b.matchFiles(e,t,n,o,p,process.cwd(),r,f)},getModifiedTime:function(e){try{return c.statSync(e).mtime}catch(e){return}},createHash:function(e){var t=r.createHash("md5");return t.update(e),t.digest("hex")},getMemoryUsage:function(){return global.gc&&global.gc(),process.memoryUsage().heapUsed},getFileSize:function(e){try{var t=c.statSync(e);if(t.isFile())return t.size}catch(e){}return 0},exit:function(e){process.exit(e)},realpath:function(e){return c.realpathSync(e)},debugMode:b.some(process.execArgv,function(e){return/^--(inspect|debug)(-brk)?(=\d+)?$/i.test(e)}),tryEnableSourceMapsForHost:function(){try{require("source-map-support").install()}catch(e){}},setTimeout:setTimeout,clearTimeout:clearTimeout};return v}()),r){var i=r.writeFile;r.writeFile=function(e,t,n){var o=b.getDirectoryPath(b.normalizeSlashes(e));o&&!r.directoryExists(o)&&function e(t,n){var o=b.getDirectoryPath(t),r=""!==o&&t!==o&&!n.directoryExists(o);r&&e(o,n),!r&&n.directoryExists(t)||n.createDirectory(t)}(o,r),i.call(r,e,t,n)}}return r}(),b.sys&&b.sys.getEnvironmentVariable&&(b.Debug.currentAssertionLevel=/^development$/i.test(b.sys.getEnvironmentVariable("NODE_ENV"))?1:0),b.sys&&b.sys.debugMode&&(b.Debug.isDebugging=!0)}(ts||(ts={})),function(e){function t(e,t,n,o){return{code:e,category:t,key:n,message:o}}e.Diagnostics={Unterminated_string_literal:t(1002,e.DiagnosticCategory.Error,"Unterminated_string_literal_1002","Unterminated string literal."),Identifier_expected:t(1003,e.DiagnosticCategory.Error,"Identifier_expected_1003","Identifier expected."),_0_expected:t(1005,e.DiagnosticCategory.Error,"_0_expected_1005","'{0}' expected."),A_file_cannot_have_a_reference_to_itself:t(1006,e.DiagnosticCategory.Error,"A_file_cannot_have_a_reference_to_itself_1006","A file cannot have a reference to itself."),Trailing_comma_not_allowed:t(1009,e.DiagnosticCategory.Error,"Trailing_comma_not_allowed_1009","Trailing comma not allowed."),Asterisk_Slash_expected:t(1010,e.DiagnosticCategory.Error,"Asterisk_Slash_expected_1010","'*/' expected."),Unexpected_token:t(1012,e.DiagnosticCategory.Error,"Unexpected_token_1012","Unexpected token."),A_rest_parameter_must_be_last_in_a_parameter_list:t(1014,e.DiagnosticCategory.Error,"A_rest_parameter_must_be_last_in_a_parameter_list_1014","A rest parameter must be last in a parameter list."),Parameter_cannot_have_question_mark_and_initializer:t(1015,e.DiagnosticCategory.Error,"Parameter_cannot_have_question_mark_and_initializer_1015","Parameter cannot have question mark and initializer."),A_required_parameter_cannot_follow_an_optional_parameter:t(1016,e.DiagnosticCategory.Error,"A_required_parameter_cannot_follow_an_optional_parameter_1016","A required parameter cannot follow an optional parameter."),An_index_signature_cannot_have_a_rest_parameter:t(1017,e.DiagnosticCategory.Error,"An_index_signature_cannot_have_a_rest_parameter_1017","An index signature cannot have a rest parameter."),An_index_signature_parameter_cannot_have_an_accessibility_modifier:t(1018,e.DiagnosticCategory.Error,"An_index_signature_parameter_cannot_have_an_accessibility_modifier_1018","An index signature parameter cannot have an accessibility modifier."),An_index_signature_parameter_cannot_have_a_question_mark:t(1019,e.DiagnosticCategory.Error,"An_index_signature_parameter_cannot_have_a_question_mark_1019","An index signature parameter cannot have a question mark."),An_index_signature_parameter_cannot_have_an_initializer:t(1020,e.DiagnosticCategory.Error,"An_index_signature_parameter_cannot_have_an_initializer_1020","An index signature parameter cannot have an initializer."),An_index_signature_must_have_a_type_annotation:t(1021,e.DiagnosticCategory.Error,"An_index_signature_must_have_a_type_annotation_1021","An index signature must have a type annotation."),An_index_signature_parameter_must_have_a_type_annotation:t(1022,e.DiagnosticCategory.Error,"An_index_signature_parameter_must_have_a_type_annotation_1022","An index signature parameter must have a type annotation."),An_index_signature_parameter_type_must_be_string_or_number:t(1023,e.DiagnosticCategory.Error,"An_index_signature_parameter_type_must_be_string_or_number_1023","An index signature parameter type must be 'string' or 'number'."),readonly_modifier_can_only_appear_on_a_property_declaration_or_index_signature:t(1024,e.DiagnosticCategory.Error,"readonly_modifier_can_only_appear_on_a_property_declaration_or_index_signature_1024","'readonly' modifier can only appear on a property declaration or index signature."),Accessibility_modifier_already_seen:t(1028,e.DiagnosticCategory.Error,"Accessibility_modifier_already_seen_1028","Accessibility modifier already seen."),_0_modifier_must_precede_1_modifier:t(1029,e.DiagnosticCategory.Error,"_0_modifier_must_precede_1_modifier_1029","'{0}' modifier must precede '{1}' modifier."),_0_modifier_already_seen:t(1030,e.DiagnosticCategory.Error,"_0_modifier_already_seen_1030","'{0}' modifier already seen."),_0_modifier_cannot_appear_on_a_class_element:t(1031,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_class_element_1031","'{0}' modifier cannot appear on a class element."),super_must_be_followed_by_an_argument_list_or_member_access:t(1034,e.DiagnosticCategory.Error,"super_must_be_followed_by_an_argument_list_or_member_access_1034","'super' must be followed by an argument list or member access."),Only_ambient_modules_can_use_quoted_names:t(1035,e.DiagnosticCategory.Error,"Only_ambient_modules_can_use_quoted_names_1035","Only ambient modules can use quoted names."),Statements_are_not_allowed_in_ambient_contexts:t(1036,e.DiagnosticCategory.Error,"Statements_are_not_allowed_in_ambient_contexts_1036","Statements are not allowed in ambient contexts."),A_declare_modifier_cannot_be_used_in_an_already_ambient_context:t(1038,e.DiagnosticCategory.Error,"A_declare_modifier_cannot_be_used_in_an_already_ambient_context_1038","A 'declare' modifier cannot be used in an already ambient context."),Initializers_are_not_allowed_in_ambient_contexts:t(1039,e.DiagnosticCategory.Error,"Initializers_are_not_allowed_in_ambient_contexts_1039","Initializers are not allowed in ambient contexts."),_0_modifier_cannot_be_used_in_an_ambient_context:t(1040,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_in_an_ambient_context_1040","'{0}' modifier cannot be used in an ambient context."),_0_modifier_cannot_be_used_with_a_class_declaration:t(1041,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_with_a_class_declaration_1041","'{0}' modifier cannot be used with a class declaration."),_0_modifier_cannot_be_used_here:t(1042,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_here_1042","'{0}' modifier cannot be used here."),_0_modifier_cannot_appear_on_a_data_property:t(1043,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_data_property_1043","'{0}' modifier cannot appear on a data property."),_0_modifier_cannot_appear_on_a_module_or_namespace_element:t(1044,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_module_or_namespace_element_1044","'{0}' modifier cannot appear on a module or namespace element."),A_0_modifier_cannot_be_used_with_an_interface_declaration:t(1045,e.DiagnosticCategory.Error,"A_0_modifier_cannot_be_used_with_an_interface_declaration_1045","A '{0}' modifier cannot be used with an interface declaration."),A_declare_modifier_is_required_for_a_top_level_declaration_in_a_d_ts_file:t(1046,e.DiagnosticCategory.Error,"A_declare_modifier_is_required_for_a_top_level_declaration_in_a_d_ts_file_1046","A 'declare' modifier is required for a top level declaration in a .d.ts file."),A_rest_parameter_cannot_be_optional:t(1047,e.DiagnosticCategory.Error,"A_rest_parameter_cannot_be_optional_1047","A rest parameter cannot be optional."),A_rest_parameter_cannot_have_an_initializer:t(1048,e.DiagnosticCategory.Error,"A_rest_parameter_cannot_have_an_initializer_1048","A rest parameter cannot have an initializer."),A_set_accessor_must_have_exactly_one_parameter:t(1049,e.DiagnosticCategory.Error,"A_set_accessor_must_have_exactly_one_parameter_1049","A 'set' accessor must have exactly one parameter."),A_set_accessor_cannot_have_an_optional_parameter:t(1051,e.DiagnosticCategory.Error,"A_set_accessor_cannot_have_an_optional_parameter_1051","A 'set' accessor cannot have an optional parameter."),A_set_accessor_parameter_cannot_have_an_initializer:t(1052,e.DiagnosticCategory.Error,"A_set_accessor_parameter_cannot_have_an_initializer_1052","A 'set' accessor parameter cannot have an initializer."),A_set_accessor_cannot_have_rest_parameter:t(1053,e.DiagnosticCategory.Error,"A_set_accessor_cannot_have_rest_parameter_1053","A 'set' accessor cannot have rest parameter."),A_get_accessor_cannot_have_parameters:t(1054,e.DiagnosticCategory.Error,"A_get_accessor_cannot_have_parameters_1054","A 'get' accessor cannot have parameters."),Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value:t(1055,e.DiagnosticCategory.Error,"Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Prom_1055","Type '{0}' is not a valid async function return type in ES5/ES3 because it does not refer to a Promise-compatible constructor value."),Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher:t(1056,e.DiagnosticCategory.Error,"Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher_1056","Accessors are only available when targeting ECMAScript 5 and higher."),An_async_function_or_method_must_have_a_valid_awaitable_return_type:t(1057,e.DiagnosticCategory.Error,"An_async_function_or_method_must_have_a_valid_awaitable_return_type_1057","An async function or method must have a valid awaitable return type."),The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1058,e.DiagnosticCategory.Error,"The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_t_1058","The return type of an async function must either be a valid promise or must not contain a callable 'then' member."),A_promise_must_have_a_then_method:t(1059,e.DiagnosticCategory.Error,"A_promise_must_have_a_then_method_1059","A promise must have a 'then' method."),The_first_parameter_of_the_then_method_of_a_promise_must_be_a_callback:t(1060,e.DiagnosticCategory.Error,"The_first_parameter_of_the_then_method_of_a_promise_must_be_a_callback_1060","The first parameter of the 'then' method of a promise must be a callback."),Enum_member_must_have_initializer:t(1061,e.DiagnosticCategory.Error,"Enum_member_must_have_initializer_1061","Enum member must have initializer."),Type_is_referenced_directly_or_indirectly_in_the_fulfillment_callback_of_its_own_then_method:t(1062,e.DiagnosticCategory.Error,"Type_is_referenced_directly_or_indirectly_in_the_fulfillment_callback_of_its_own_then_method_1062","Type is referenced directly or indirectly in the fulfillment callback of its own 'then' method."),An_export_assignment_cannot_be_used_in_a_namespace:t(1063,e.DiagnosticCategory.Error,"An_export_assignment_cannot_be_used_in_a_namespace_1063","An export assignment cannot be used in a namespace."),The_return_type_of_an_async_function_or_method_must_be_the_global_Promise_T_type:t(1064,e.DiagnosticCategory.Error,"The_return_type_of_an_async_function_or_method_must_be_the_global_Promise_T_type_1064","The return type of an async function or method must be the global Promise<T> type."),In_ambient_enum_declarations_member_initializer_must_be_constant_expression:t(1066,e.DiagnosticCategory.Error,"In_ambient_enum_declarations_member_initializer_must_be_constant_expression_1066","In ambient enum declarations member initializer must be constant expression."),Unexpected_token_A_constructor_method_accessor_or_property_was_expected:t(1068,e.DiagnosticCategory.Error,"Unexpected_token_A_constructor_method_accessor_or_property_was_expected_1068","Unexpected token. A constructor, method, accessor, or property was expected."),_0_modifier_cannot_appear_on_a_type_member:t(1070,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_type_member_1070","'{0}' modifier cannot appear on a type member."),_0_modifier_cannot_appear_on_an_index_signature:t(1071,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_an_index_signature_1071","'{0}' modifier cannot appear on an index signature."),A_0_modifier_cannot_be_used_with_an_import_declaration:t(1079,e.DiagnosticCategory.Error,"A_0_modifier_cannot_be_used_with_an_import_declaration_1079","A '{0}' modifier cannot be used with an import declaration."),Invalid_reference_directive_syntax:t(1084,e.DiagnosticCategory.Error,"Invalid_reference_directive_syntax_1084","Invalid 'reference' directive syntax."),Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher_Use_the_syntax_0:t(1085,e.DiagnosticCategory.Error,"Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher_Use_the_syntax_0_1085","Octal literals are not available when targeting ECMAScript 5 and higher. Use the syntax '{0}'."),An_accessor_cannot_be_declared_in_an_ambient_context:t(1086,e.DiagnosticCategory.Error,"An_accessor_cannot_be_declared_in_an_ambient_context_1086","An accessor cannot be declared in an ambient context."),_0_modifier_cannot_appear_on_a_constructor_declaration:t(1089,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_constructor_declaration_1089","'{0}' modifier cannot appear on a constructor declaration."),_0_modifier_cannot_appear_on_a_parameter:t(1090,e.DiagnosticCategory.Error,"_0_modifier_cannot_appear_on_a_parameter_1090","'{0}' modifier cannot appear on a parameter."),Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement:t(1091,e.DiagnosticCategory.Error,"Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement_1091","Only a single variable declaration is allowed in a 'for...in' statement."),Type_parameters_cannot_appear_on_a_constructor_declaration:t(1092,e.DiagnosticCategory.Error,"Type_parameters_cannot_appear_on_a_constructor_declaration_1092","Type parameters cannot appear on a constructor declaration."),Type_annotation_cannot_appear_on_a_constructor_declaration:t(1093,e.DiagnosticCategory.Error,"Type_annotation_cannot_appear_on_a_constructor_declaration_1093","Type annotation cannot appear on a constructor declaration."),An_accessor_cannot_have_type_parameters:t(1094,e.DiagnosticCategory.Error,"An_accessor_cannot_have_type_parameters_1094","An accessor cannot have type parameters."),A_set_accessor_cannot_have_a_return_type_annotation:t(1095,e.DiagnosticCategory.Error,"A_set_accessor_cannot_have_a_return_type_annotation_1095","A 'set' accessor cannot have a return type annotation."),An_index_signature_must_have_exactly_one_parameter:t(1096,e.DiagnosticCategory.Error,"An_index_signature_must_have_exactly_one_parameter_1096","An index signature must have exactly one parameter."),_0_list_cannot_be_empty:t(1097,e.DiagnosticCategory.Error,"_0_list_cannot_be_empty_1097","'{0}' list cannot be empty."),Type_parameter_list_cannot_be_empty:t(1098,e.DiagnosticCategory.Error,"Type_parameter_list_cannot_be_empty_1098","Type parameter list cannot be empty."),Type_argument_list_cannot_be_empty:t(1099,e.DiagnosticCategory.Error,"Type_argument_list_cannot_be_empty_1099","Type argument list cannot be empty."),Invalid_use_of_0_in_strict_mode:t(1100,e.DiagnosticCategory.Error,"Invalid_use_of_0_in_strict_mode_1100","Invalid use of '{0}' in strict mode."),with_statements_are_not_allowed_in_strict_mode:t(1101,e.DiagnosticCategory.Error,"with_statements_are_not_allowed_in_strict_mode_1101","'with' statements are not allowed in strict mode."),delete_cannot_be_called_on_an_identifier_in_strict_mode:t(1102,e.DiagnosticCategory.Error,"delete_cannot_be_called_on_an_identifier_in_strict_mode_1102","'delete' cannot be called on an identifier in strict mode."),A_for_await_of_statement_is_only_allowed_within_an_async_function_or_async_generator:t(1103,e.DiagnosticCategory.Error,"A_for_await_of_statement_is_only_allowed_within_an_async_function_or_async_generator_1103","A 'for-await-of' statement is only allowed within an async function or async generator."),A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement:t(1104,e.DiagnosticCategory.Error,"A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement_1104","A 'continue' statement can only be used within an enclosing iteration statement."),A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement:t(1105,e.DiagnosticCategory.Error,"A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement_1105","A 'break' statement can only be used within an enclosing iteration or switch statement."),Jump_target_cannot_cross_function_boundary:t(1107,e.DiagnosticCategory.Error,"Jump_target_cannot_cross_function_boundary_1107","Jump target cannot cross function boundary."),A_return_statement_can_only_be_used_within_a_function_body:t(1108,e.DiagnosticCategory.Error,"A_return_statement_can_only_be_used_within_a_function_body_1108","A 'return' statement can only be used within a function body."),Expression_expected:t(1109,e.DiagnosticCategory.Error,"Expression_expected_1109","Expression expected."),Type_expected:t(1110,e.DiagnosticCategory.Error,"Type_expected_1110","Type expected."),A_default_clause_cannot_appear_more_than_once_in_a_switch_statement:t(1113,e.DiagnosticCategory.Error,"A_default_clause_cannot_appear_more_than_once_in_a_switch_statement_1113","A 'default' clause cannot appear more than once in a 'switch' statement."),Duplicate_label_0:t(1114,e.DiagnosticCategory.Error,"Duplicate_label_0_1114","Duplicate label '{0}'."),A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement:t(1115,e.DiagnosticCategory.Error,"A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement_1115","A 'continue' statement can only jump to a label of an enclosing iteration statement."),A_break_statement_can_only_jump_to_a_label_of_an_enclosing_statement:t(1116,e.DiagnosticCategory.Error,"A_break_statement_can_only_jump_to_a_label_of_an_enclosing_statement_1116","A 'break' statement can only jump to a label of an enclosing statement."),An_object_literal_cannot_have_multiple_properties_with_the_same_name_in_strict_mode:t(1117,e.DiagnosticCategory.Error,"An_object_literal_cannot_have_multiple_properties_with_the_same_name_in_strict_mode_1117","An object literal cannot have multiple properties with the same name in strict mode."),An_object_literal_cannot_have_multiple_get_Slashset_accessors_with_the_same_name:t(1118,e.DiagnosticCategory.Error,"An_object_literal_cannot_have_multiple_get_Slashset_accessors_with_the_same_name_1118","An object literal cannot have multiple get/set accessors with the same name."),An_object_literal_cannot_have_property_and_accessor_with_the_same_name:t(1119,e.DiagnosticCategory.Error,"An_object_literal_cannot_have_property_and_accessor_with_the_same_name_1119","An object literal cannot have property and accessor with the same name."),An_export_assignment_cannot_have_modifiers:t(1120,e.DiagnosticCategory.Error,"An_export_assignment_cannot_have_modifiers_1120","An export assignment cannot have modifiers."),Octal_literals_are_not_allowed_in_strict_mode:t(1121,e.DiagnosticCategory.Error,"Octal_literals_are_not_allowed_in_strict_mode_1121","Octal literals are not allowed in strict mode."),A_tuple_type_element_list_cannot_be_empty:t(1122,e.DiagnosticCategory.Error,"A_tuple_type_element_list_cannot_be_empty_1122","A tuple type element list cannot be empty."),Variable_declaration_list_cannot_be_empty:t(1123,e.DiagnosticCategory.Error,"Variable_declaration_list_cannot_be_empty_1123","Variable declaration list cannot be empty."),Digit_expected:t(1124,e.DiagnosticCategory.Error,"Digit_expected_1124","Digit expected."),Hexadecimal_digit_expected:t(1125,e.DiagnosticCategory.Error,"Hexadecimal_digit_expected_1125","Hexadecimal digit expected."),Unexpected_end_of_text:t(1126,e.DiagnosticCategory.Error,"Unexpected_end_of_text_1126","Unexpected end of text."),Invalid_character:t(1127,e.DiagnosticCategory.Error,"Invalid_character_1127","Invalid character."),Declaration_or_statement_expected:t(1128,e.DiagnosticCategory.Error,"Declaration_or_statement_expected_1128","Declaration or statement expected."),Statement_expected:t(1129,e.DiagnosticCategory.Error,"Statement_expected_1129","Statement expected."),case_or_default_expected:t(1130,e.DiagnosticCategory.Error,"case_or_default_expected_1130","'case' or 'default' expected."),Property_or_signature_expected:t(1131,e.DiagnosticCategory.Error,"Property_or_signature_expected_1131","Property or signature expected."),Enum_member_expected:t(1132,e.DiagnosticCategory.Error,"Enum_member_expected_1132","Enum member expected."),Variable_declaration_expected:t(1134,e.DiagnosticCategory.Error,"Variable_declaration_expected_1134","Variable declaration expected."),Argument_expression_expected:t(1135,e.DiagnosticCategory.Error,"Argument_expression_expected_1135","Argument expression expected."),Property_assignment_expected:t(1136,e.DiagnosticCategory.Error,"Property_assignment_expected_1136","Property assignment expected."),Expression_or_comma_expected:t(1137,e.DiagnosticCategory.Error,"Expression_or_comma_expected_1137","Expression or comma expected."),Parameter_declaration_expected:t(1138,e.DiagnosticCategory.Error,"Parameter_declaration_expected_1138","Parameter declaration expected."),Type_parameter_declaration_expected:t(1139,e.DiagnosticCategory.Error,"Type_parameter_declaration_expected_1139","Type parameter declaration expected."),Type_argument_expected:t(1140,e.DiagnosticCategory.Error,"Type_argument_expected_1140","Type argument expected."),String_literal_expected:t(1141,e.DiagnosticCategory.Error,"String_literal_expected_1141","String literal expected."),Line_break_not_permitted_here:t(1142,e.DiagnosticCategory.Error,"Line_break_not_permitted_here_1142","Line break not permitted here."),or_expected:t(1144,e.DiagnosticCategory.Error,"or_expected_1144","'{' or ';' expected."),Declaration_expected:t(1146,e.DiagnosticCategory.Error,"Declaration_expected_1146","Declaration expected."),Import_declarations_in_a_namespace_cannot_reference_a_module:t(1147,e.DiagnosticCategory.Error,"Import_declarations_in_a_namespace_cannot_reference_a_module_1147","Import declarations in a namespace cannot reference a module."),Cannot_use_imports_exports_or_module_augmentations_when_module_is_none:t(1148,e.DiagnosticCategory.Error,"Cannot_use_imports_exports_or_module_augmentations_when_module_is_none_1148","Cannot use imports, exports, or module augmentations when '--module' is 'none'."),File_name_0_differs_from_already_included_file_name_1_only_in_casing:t(1149,e.DiagnosticCategory.Error,"File_name_0_differs_from_already_included_file_name_1_only_in_casing_1149","File name '{0}' differs from already included file name '{1}' only in casing."),new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead:t(1150,e.DiagnosticCategory.Error,"new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead_1150","'new T[]' cannot be used to create an array. Use 'new Array<T>()' instead."),const_declarations_must_be_initialized:t(1155,e.DiagnosticCategory.Error,"const_declarations_must_be_initialized_1155","'const' declarations must be initialized."),const_declarations_can_only_be_declared_inside_a_block:t(1156,e.DiagnosticCategory.Error,"const_declarations_can_only_be_declared_inside_a_block_1156","'const' declarations can only be declared inside a block."),let_declarations_can_only_be_declared_inside_a_block:t(1157,e.DiagnosticCategory.Error,"let_declarations_can_only_be_declared_inside_a_block_1157","'let' declarations can only be declared inside a block."),Unterminated_template_literal:t(1160,e.DiagnosticCategory.Error,"Unterminated_template_literal_1160","Unterminated template literal."),Unterminated_regular_expression_literal:t(1161,e.DiagnosticCategory.Error,"Unterminated_regular_expression_literal_1161","Unterminated regular expression literal."),An_object_member_cannot_be_declared_optional:t(1162,e.DiagnosticCategory.Error,"An_object_member_cannot_be_declared_optional_1162","An object member cannot be declared optional."),A_yield_expression_is_only_allowed_in_a_generator_body:t(1163,e.DiagnosticCategory.Error,"A_yield_expression_is_only_allowed_in_a_generator_body_1163","A 'yield' expression is only allowed in a generator body."),Computed_property_names_are_not_allowed_in_enums:t(1164,e.DiagnosticCategory.Error,"Computed_property_names_are_not_allowed_in_enums_1164","Computed property names are not allowed in enums."),A_computed_property_name_in_an_ambient_context_must_directly_refer_to_a_built_in_symbol:t(1165,e.DiagnosticCategory.Error,"A_computed_property_name_in_an_ambient_context_must_directly_refer_to_a_built_in_symbol_1165","A computed property name in an ambient context must directly refer to a built-in symbol."),A_computed_property_name_in_a_class_property_declaration_must_directly_refer_to_a_built_in_symbol:t(1166,e.DiagnosticCategory.Error,"A_computed_property_name_in_a_class_property_declaration_must_directly_refer_to_a_built_in_symbol_1166","A computed property name in a class property declaration must directly refer to a built-in symbol."),A_computed_property_name_in_a_method_overload_must_directly_refer_to_a_built_in_symbol:t(1168,e.DiagnosticCategory.Error,"A_computed_property_name_in_a_method_overload_must_directly_refer_to_a_built_in_symbol_1168","A computed property name in a method overload must directly refer to a built-in symbol."),A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol:t(1169,e.DiagnosticCategory.Error,"A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol_1169","A computed property name in an interface must directly refer to a built-in symbol."),A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol:t(1170,e.DiagnosticCategory.Error,"A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol_1170","A computed property name in a type literal must directly refer to a built-in symbol."),A_comma_expression_is_not_allowed_in_a_computed_property_name:t(1171,e.DiagnosticCategory.Error,"A_comma_expression_is_not_allowed_in_a_computed_property_name_1171","A comma expression is not allowed in a computed property name."),extends_clause_already_seen:t(1172,e.DiagnosticCategory.Error,"extends_clause_already_seen_1172","'extends' clause already seen."),extends_clause_must_precede_implements_clause:t(1173,e.DiagnosticCategory.Error,"extends_clause_must_precede_implements_clause_1173","'extends' clause must precede 'implements' clause."),Classes_can_only_extend_a_single_class:t(1174,e.DiagnosticCategory.Error,"Classes_can_only_extend_a_single_class_1174","Classes can only extend a single class."),implements_clause_already_seen:t(1175,e.DiagnosticCategory.Error,"implements_clause_already_seen_1175","'implements' clause already seen."),Interface_declaration_cannot_have_implements_clause:t(1176,e.DiagnosticCategory.Error,"Interface_declaration_cannot_have_implements_clause_1176","Interface declaration cannot have 'implements' clause."),Binary_digit_expected:t(1177,e.DiagnosticCategory.Error,"Binary_digit_expected_1177","Binary digit expected."),Octal_digit_expected:t(1178,e.DiagnosticCategory.Error,"Octal_digit_expected_1178","Octal digit expected."),Unexpected_token_expected:t(1179,e.DiagnosticCategory.Error,"Unexpected_token_expected_1179","Unexpected token. '{' expected."),Property_destructuring_pattern_expected:t(1180,e.DiagnosticCategory.Error,"Property_destructuring_pattern_expected_1180","Property destructuring pattern expected."),Array_element_destructuring_pattern_expected:t(1181,e.DiagnosticCategory.Error,"Array_element_destructuring_pattern_expected_1181","Array element destructuring pattern expected."),A_destructuring_declaration_must_have_an_initializer:t(1182,e.DiagnosticCategory.Error,"A_destructuring_declaration_must_have_an_initializer_1182","A destructuring declaration must have an initializer."),An_implementation_cannot_be_declared_in_ambient_contexts:t(1183,e.DiagnosticCategory.Error,"An_implementation_cannot_be_declared_in_ambient_contexts_1183","An implementation cannot be declared in ambient contexts."),Modifiers_cannot_appear_here:t(1184,e.DiagnosticCategory.Error,"Modifiers_cannot_appear_here_1184","Modifiers cannot appear here."),Merge_conflict_marker_encountered:t(1185,e.DiagnosticCategory.Error,"Merge_conflict_marker_encountered_1185","Merge conflict marker encountered."),A_rest_element_cannot_have_an_initializer:t(1186,e.DiagnosticCategory.Error,"A_rest_element_cannot_have_an_initializer_1186","A rest element cannot have an initializer."),A_parameter_property_may_not_be_declared_using_a_binding_pattern:t(1187,e.DiagnosticCategory.Error,"A_parameter_property_may_not_be_declared_using_a_binding_pattern_1187","A parameter property may not be declared using a binding pattern."),Only_a_single_variable_declaration_is_allowed_in_a_for_of_statement:t(1188,e.DiagnosticCategory.Error,"Only_a_single_variable_declaration_is_allowed_in_a_for_of_statement_1188","Only a single variable declaration is allowed in a 'for...of' statement."),The_variable_declaration_of_a_for_in_statement_cannot_have_an_initializer:t(1189,e.DiagnosticCategory.Error,"The_variable_declaration_of_a_for_in_statement_cannot_have_an_initializer_1189","The variable declaration of a 'for...in' statement cannot have an initializer."),The_variable_declaration_of_a_for_of_statement_cannot_have_an_initializer:t(1190,e.DiagnosticCategory.Error,"The_variable_declaration_of_a_for_of_statement_cannot_have_an_initializer_1190","The variable declaration of a 'for...of' statement cannot have an initializer."),An_import_declaration_cannot_have_modifiers:t(1191,e.DiagnosticCategory.Error,"An_import_declaration_cannot_have_modifiers_1191","An import declaration cannot have modifiers."),Module_0_has_no_default_export:t(1192,e.DiagnosticCategory.Error,"Module_0_has_no_default_export_1192","Module '{0}' has no default export."),An_export_declaration_cannot_have_modifiers:t(1193,e.DiagnosticCategory.Error,"An_export_declaration_cannot_have_modifiers_1193","An export declaration cannot have modifiers."),Export_declarations_are_not_permitted_in_a_namespace:t(1194,e.DiagnosticCategory.Error,"Export_declarations_are_not_permitted_in_a_namespace_1194","Export declarations are not permitted in a namespace."),Catch_clause_variable_cannot_have_a_type_annotation:t(1196,e.DiagnosticCategory.Error,"Catch_clause_variable_cannot_have_a_type_annotation_1196","Catch clause variable cannot have a type annotation."),Catch_clause_variable_cannot_have_an_initializer:t(1197,e.DiagnosticCategory.Error,"Catch_clause_variable_cannot_have_an_initializer_1197","Catch clause variable cannot have an initializer."),An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive:t(1198,e.DiagnosticCategory.Error,"An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive_1198","An extended Unicode escape value must be between 0x0 and 0x10FFFF inclusive."),Unterminated_Unicode_escape_sequence:t(1199,e.DiagnosticCategory.Error,"Unterminated_Unicode_escape_sequence_1199","Unterminated Unicode escape sequence."),Line_terminator_not_permitted_before_arrow:t(1200,e.DiagnosticCategory.Error,"Line_terminator_not_permitted_before_arrow_1200","Line terminator not permitted before arrow."),Import_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_import_Asterisk_as_ns_from_mod_import_a_from_mod_import_d_from_mod_or_another_module_format_instead:t(1202,e.DiagnosticCategory.Error,"Import_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_import_Asterisk_as_1202","Import assignment cannot be used when targeting ECMAScript modules. Consider using 'import * as ns from \"mod\"', 'import {a} from \"mod\"', 'import d from \"mod\"', or another module format instead."),Export_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_export_default_or_another_module_format_instead:t(1203,e.DiagnosticCategory.Error,"Export_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_export_default_or__1203","Export assignment cannot be used when targeting ECMAScript modules. Consider using 'export default' or another module format instead."),Cannot_re_export_a_type_when_the_isolatedModules_flag_is_provided:t(1205,e.DiagnosticCategory.Error,"Cannot_re_export_a_type_when_the_isolatedModules_flag_is_provided_1205","Cannot re-export a type when the '--isolatedModules' flag is provided."),Decorators_are_not_valid_here:t(1206,e.DiagnosticCategory.Error,"Decorators_are_not_valid_here_1206","Decorators are not valid here."),Decorators_cannot_be_applied_to_multiple_get_Slashset_accessors_of_the_same_name:t(1207,e.DiagnosticCategory.Error,"Decorators_cannot_be_applied_to_multiple_get_Slashset_accessors_of_the_same_name_1207","Decorators cannot be applied to multiple get/set accessors of the same name."),Cannot_compile_namespaces_when_the_isolatedModules_flag_is_provided:t(1208,e.DiagnosticCategory.Error,"Cannot_compile_namespaces_when_the_isolatedModules_flag_is_provided_1208","Cannot compile namespaces when the '--isolatedModules' flag is provided."),Ambient_const_enums_are_not_allowed_when_the_isolatedModules_flag_is_provided:t(1209,e.DiagnosticCategory.Error,"Ambient_const_enums_are_not_allowed_when_the_isolatedModules_flag_is_provided_1209","Ambient const enums are not allowed when the '--isolatedModules' flag is provided."),Invalid_use_of_0_Class_definitions_are_automatically_in_strict_mode:t(1210,e.DiagnosticCategory.Error,"Invalid_use_of_0_Class_definitions_are_automatically_in_strict_mode_1210","Invalid use of '{0}'. Class definitions are automatically in strict mode."),A_class_declaration_without_the_default_modifier_must_have_a_name:t(1211,e.DiagnosticCategory.Error,"A_class_declaration_without_the_default_modifier_must_have_a_name_1211","A class declaration without the 'default' modifier must have a name."),Identifier_expected_0_is_a_reserved_word_in_strict_mode:t(1212,e.DiagnosticCategory.Error,"Identifier_expected_0_is_a_reserved_word_in_strict_mode_1212","Identifier expected. '{0}' is a reserved word in strict mode."),Identifier_expected_0_is_a_reserved_word_in_strict_mode_Class_definitions_are_automatically_in_strict_mode:t(1213,e.DiagnosticCategory.Error,"Identifier_expected_0_is_a_reserved_word_in_strict_mode_Class_definitions_are_automatically_in_stric_1213","Identifier expected. '{0}' is a reserved word in strict mode. Class definitions are automatically in strict mode."),Identifier_expected_0_is_a_reserved_word_in_strict_mode_Modules_are_automatically_in_strict_mode:t(1214,e.DiagnosticCategory.Error,"Identifier_expected_0_is_a_reserved_word_in_strict_mode_Modules_are_automatically_in_strict_mode_1214","Identifier expected. '{0}' is a reserved word in strict mode. Modules are automatically in strict mode."),Invalid_use_of_0_Modules_are_automatically_in_strict_mode:t(1215,e.DiagnosticCategory.Error,"Invalid_use_of_0_Modules_are_automatically_in_strict_mode_1215","Invalid use of '{0}'. Modules are automatically in strict mode."),Identifier_expected_esModule_is_reserved_as_an_exported_marker_when_transforming_ECMAScript_modules:t(1216,e.DiagnosticCategory.Error,"Identifier_expected_esModule_is_reserved_as_an_exported_marker_when_transforming_ECMAScript_modules_1216","Identifier expected. '__esModule' is reserved as an exported marker when transforming ECMAScript modules."),Export_assignment_is_not_supported_when_module_flag_is_system:t(1218,e.DiagnosticCategory.Error,"Export_assignment_is_not_supported_when_module_flag_is_system_1218","Export assignment is not supported when '--module' flag is 'system'."),Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_the_experimentalDecorators_option_to_remove_this_warning:t(1219,e.DiagnosticCategory.Error,"Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_t_1219","Experimental support for decorators is a feature that is subject to change in a future release. Set the 'experimentalDecorators' option to remove this warning."),Generators_are_only_available_when_targeting_ECMAScript_2015_or_higher:t(1220,e.DiagnosticCategory.Error,"Generators_are_only_available_when_targeting_ECMAScript_2015_or_higher_1220","Generators are only available when targeting ECMAScript 2015 or higher."),Generators_are_not_allowed_in_an_ambient_context:t(1221,e.DiagnosticCategory.Error,"Generators_are_not_allowed_in_an_ambient_context_1221","Generators are not allowed in an ambient context."),An_overload_signature_cannot_be_declared_as_a_generator:t(1222,e.DiagnosticCategory.Error,"An_overload_signature_cannot_be_declared_as_a_generator_1222","An overload signature cannot be declared as a generator."),_0_tag_already_specified:t(1223,e.DiagnosticCategory.Error,"_0_tag_already_specified_1223","'{0}' tag already specified."),Signature_0_must_be_a_type_predicate:t(1224,e.DiagnosticCategory.Error,"Signature_0_must_be_a_type_predicate_1224","Signature '{0}' must be a type predicate."),Cannot_find_parameter_0:t(1225,e.DiagnosticCategory.Error,"Cannot_find_parameter_0_1225","Cannot find parameter '{0}'."),Type_predicate_0_is_not_assignable_to_1:t(1226,e.DiagnosticCategory.Error,"Type_predicate_0_is_not_assignable_to_1_1226","Type predicate '{0}' is not assignable to '{1}'."),Parameter_0_is_not_in_the_same_position_as_parameter_1:t(1227,e.DiagnosticCategory.Error,"Parameter_0_is_not_in_the_same_position_as_parameter_1_1227","Parameter '{0}' is not in the same position as parameter '{1}'."),A_type_predicate_is_only_allowed_in_return_type_position_for_functions_and_methods:t(1228,e.DiagnosticCategory.Error,"A_type_predicate_is_only_allowed_in_return_type_position_for_functions_and_methods_1228","A type predicate is only allowed in return type position for functions and methods."),A_type_predicate_cannot_reference_a_rest_parameter:t(1229,e.DiagnosticCategory.Error,"A_type_predicate_cannot_reference_a_rest_parameter_1229","A type predicate cannot reference a rest parameter."),A_type_predicate_cannot_reference_element_0_in_a_binding_pattern:t(1230,e.DiagnosticCategory.Error,"A_type_predicate_cannot_reference_element_0_in_a_binding_pattern_1230","A type predicate cannot reference element '{0}' in a binding pattern."),An_export_assignment_can_only_be_used_in_a_module:t(1231,e.DiagnosticCategory.Error,"An_export_assignment_can_only_be_used_in_a_module_1231","An export assignment can only be used in a module."),An_import_declaration_can_only_be_used_in_a_namespace_or_module:t(1232,e.DiagnosticCategory.Error,"An_import_declaration_can_only_be_used_in_a_namespace_or_module_1232","An import declaration can only be used in a namespace or module."),An_export_declaration_can_only_be_used_in_a_module:t(1233,e.DiagnosticCategory.Error,"An_export_declaration_can_only_be_used_in_a_module_1233","An export declaration can only be used in a module."),An_ambient_module_declaration_is_only_allowed_at_the_top_level_in_a_file:t(1234,e.DiagnosticCategory.Error,"An_ambient_module_declaration_is_only_allowed_at_the_top_level_in_a_file_1234","An ambient module declaration is only allowed at the top level in a file."),A_namespace_declaration_is_only_allowed_in_a_namespace_or_module:t(1235,e.DiagnosticCategory.Error,"A_namespace_declaration_is_only_allowed_in_a_namespace_or_module_1235","A namespace declaration is only allowed in a namespace or module."),The_return_type_of_a_property_decorator_function_must_be_either_void_or_any:t(1236,e.DiagnosticCategory.Error,"The_return_type_of_a_property_decorator_function_must_be_either_void_or_any_1236","The return type of a property decorator function must be either 'void' or 'any'."),The_return_type_of_a_parameter_decorator_function_must_be_either_void_or_any:t(1237,e.DiagnosticCategory.Error,"The_return_type_of_a_parameter_decorator_function_must_be_either_void_or_any_1237","The return type of a parameter decorator function must be either 'void' or 'any'."),Unable_to_resolve_signature_of_class_decorator_when_called_as_an_expression:t(1238,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_class_decorator_when_called_as_an_expression_1238","Unable to resolve signature of class decorator when called as an expression."),Unable_to_resolve_signature_of_parameter_decorator_when_called_as_an_expression:t(1239,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_parameter_decorator_when_called_as_an_expression_1239","Unable to resolve signature of parameter decorator when called as an expression."),Unable_to_resolve_signature_of_property_decorator_when_called_as_an_expression:t(1240,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_property_decorator_when_called_as_an_expression_1240","Unable to resolve signature of property decorator when called as an expression."),Unable_to_resolve_signature_of_method_decorator_when_called_as_an_expression:t(1241,e.DiagnosticCategory.Error,"Unable_to_resolve_signature_of_method_decorator_when_called_as_an_expression_1241","Unable to resolve signature of method decorator when called as an expression."),abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration:t(1242,e.DiagnosticCategory.Error,"abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration_1242","'abstract' modifier can only appear on a class, method, or property declaration."),_0_modifier_cannot_be_used_with_1_modifier:t(1243,e.DiagnosticCategory.Error,"_0_modifier_cannot_be_used_with_1_modifier_1243","'{0}' modifier cannot be used with '{1}' modifier."),Abstract_methods_can_only_appear_within_an_abstract_class:t(1244,e.DiagnosticCategory.Error,"Abstract_methods_can_only_appear_within_an_abstract_class_1244","Abstract methods can only appear within an abstract class."),Method_0_cannot_have_an_implementation_because_it_is_marked_abstract:t(1245,e.DiagnosticCategory.Error,"Method_0_cannot_have_an_implementation_because_it_is_marked_abstract_1245","Method '{0}' cannot have an implementation because it is marked abstract."),An_interface_property_cannot_have_an_initializer:t(1246,e.DiagnosticCategory.Error,"An_interface_property_cannot_have_an_initializer_1246","An interface property cannot have an initializer."),A_type_literal_property_cannot_have_an_initializer:t(1247,e.DiagnosticCategory.Error,"A_type_literal_property_cannot_have_an_initializer_1247","A type literal property cannot have an initializer."),A_class_member_cannot_have_the_0_keyword:t(1248,e.DiagnosticCategory.Error,"A_class_member_cannot_have_the_0_keyword_1248","A class member cannot have the '{0}' keyword."),A_decorator_can_only_decorate_a_method_implementation_not_an_overload:t(1249,e.DiagnosticCategory.Error,"A_decorator_can_only_decorate_a_method_implementation_not_an_overload_1249","A decorator can only decorate a method implementation, not an overload."),Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5:t(1250,e.DiagnosticCategory.Error,"Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_1250","Function declarations are not allowed inside blocks in strict mode when targeting 'ES3' or 'ES5'."),Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Class_definitions_are_automatically_in_strict_mode:t(1251,e.DiagnosticCategory.Error,"Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Class_d_1251","Function declarations are not allowed inside blocks in strict mode when targeting 'ES3' or 'ES5'. Class definitions are automatically in strict mode."),Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Modules_are_automatically_in_strict_mode:t(1252,e.DiagnosticCategory.Error,"Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Modules_1252","Function declarations are not allowed inside blocks in strict mode when targeting 'ES3' or 'ES5'. Modules are automatically in strict mode."),_0_tag_cannot_be_used_independently_as_a_top_level_JSDoc_tag:t(1253,e.DiagnosticCategory.Error,"_0_tag_cannot_be_used_independently_as_a_top_level_JSDoc_tag_1253","'{0}' tag cannot be used independently as a top level JSDoc tag."),A_const_initializer_in_an_ambient_context_must_be_a_string_or_numeric_literal:t(1254,e.DiagnosticCategory.Error,"A_const_initializer_in_an_ambient_context_must_be_a_string_or_numeric_literal_1254","A 'const' initializer in an ambient context must be a string or numeric literal."),with_statements_are_not_allowed_in_an_async_function_block:t(1300,e.DiagnosticCategory.Error,"with_statements_are_not_allowed_in_an_async_function_block_1300","'with' statements are not allowed in an async function block."),await_expression_is_only_allowed_within_an_async_function:t(1308,e.DiagnosticCategory.Error,"await_expression_is_only_allowed_within_an_async_function_1308","'await' expression is only allowed within an async function."),can_only_be_used_in_an_object_literal_property_inside_a_destructuring_assignment:t(1312,e.DiagnosticCategory.Error,"can_only_be_used_in_an_object_literal_property_inside_a_destructuring_assignment_1312","'=' can only be used in an object literal property inside a destructuring assignment."),The_body_of_an_if_statement_cannot_be_the_empty_statement:t(1313,e.DiagnosticCategory.Error,"The_body_of_an_if_statement_cannot_be_the_empty_statement_1313","The body of an 'if' statement cannot be the empty statement."),Global_module_exports_may_only_appear_in_module_files:t(1314,e.DiagnosticCategory.Error,"Global_module_exports_may_only_appear_in_module_files_1314","Global module exports may only appear in module files."),Global_module_exports_may_only_appear_in_declaration_files:t(1315,e.DiagnosticCategory.Error,"Global_module_exports_may_only_appear_in_declaration_files_1315","Global module exports may only appear in declaration files."),Global_module_exports_may_only_appear_at_top_level:t(1316,e.DiagnosticCategory.Error,"Global_module_exports_may_only_appear_at_top_level_1316","Global module exports may only appear at top level."),A_parameter_property_cannot_be_declared_using_a_rest_parameter:t(1317,e.DiagnosticCategory.Error,"A_parameter_property_cannot_be_declared_using_a_rest_parameter_1317","A parameter property cannot be declared using a rest parameter."),An_abstract_accessor_cannot_have_an_implementation:t(1318,e.DiagnosticCategory.Error,"An_abstract_accessor_cannot_have_an_implementation_1318","An abstract accessor cannot have an implementation."),A_default_export_can_only_be_used_in_an_ECMAScript_style_module:t(1319,e.DiagnosticCategory.Error,"A_default_export_can_only_be_used_in_an_ECMAScript_style_module_1319","A default export can only be used in an ECMAScript-style module."),Type_of_await_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1320,e.DiagnosticCategory.Error,"Type_of_await_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member_1320","Type of 'await' operand must either be a valid promise or must not contain a callable 'then' member."),Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1321,e.DiagnosticCategory.Error,"Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_cal_1321","Type of 'yield' operand in an async generator must either be a valid promise or must not contain a callable 'then' member."),Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:t(1322,e.DiagnosticCategory.Error,"Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_con_1322","Type of iterated elements of a 'yield*' operand must either be a valid promise or must not contain a callable 'then' member."),Dynamic_import_cannot_be_used_when_targeting_ECMAScript_2015_modules:t(1323,e.DiagnosticCategory.Error,"Dynamic_import_cannot_be_used_when_targeting_ECMAScript_2015_modules_1323","Dynamic import cannot be used when targeting ECMAScript 2015 modules."),Dynamic_import_must_have_one_specifier_as_an_argument:t(1324,e.DiagnosticCategory.Error,"Dynamic_import_must_have_one_specifier_as_an_argument_1324","Dynamic import must have one specifier as an argument."),Specifier_of_dynamic_import_cannot_be_spread_element:t(1325,e.DiagnosticCategory.Error,"Specifier_of_dynamic_import_cannot_be_spread_element_1325","Specifier of dynamic import cannot be spread element."),Dynamic_import_cannot_have_type_arguments:t(1326,e.DiagnosticCategory.Error,"Dynamic_import_cannot_have_type_arguments_1326","Dynamic import cannot have type arguments"),String_literal_with_double_quotes_expected:t(1327,e.DiagnosticCategory.Error,"String_literal_with_double_quotes_expected_1327","String literal with double quotes expected."),Property_value_can_only_be_string_literal_numeric_literal_true_false_null_object_literal_or_array_literal:t(1328,e.DiagnosticCategory.Error,"Property_value_can_only_be_string_literal_numeric_literal_true_false_null_object_literal_or_array_li_1328","Property value can only be string literal, numeric literal, 'true', 'false', 'null', object literal or array literal."),_0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write_0:t(1329,e.DiagnosticCategory.Error,"_0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write__1329","'{0}' accepts too few arguments to be used as a decorator here. Did you mean to call it first and write '@{0}()'?"),Duplicate_identifier_0:t(2300,e.DiagnosticCategory.Error,"Duplicate_identifier_0_2300","Duplicate identifier '{0}'."),Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor:t(2301,e.DiagnosticCategory.Error,"Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor_2301","Initializer of instance member variable '{0}' cannot reference identifier '{1}' declared in the constructor."),Static_members_cannot_reference_class_type_parameters:t(2302,e.DiagnosticCategory.Error,"Static_members_cannot_reference_class_type_parameters_2302","Static members cannot reference class type parameters."),Circular_definition_of_import_alias_0:t(2303,e.DiagnosticCategory.Error,"Circular_definition_of_import_alias_0_2303","Circular definition of import alias '{0}'."),Cannot_find_name_0:t(2304,e.DiagnosticCategory.Error,"Cannot_find_name_0_2304","Cannot find name '{0}'."),Module_0_has_no_exported_member_1:t(2305,e.DiagnosticCategory.Error,"Module_0_has_no_exported_member_1_2305","Module '{0}' has no exported member '{1}'."),File_0_is_not_a_module:t(2306,e.DiagnosticCategory.Error,"File_0_is_not_a_module_2306","File '{0}' is not a module."),Cannot_find_module_0:t(2307,e.DiagnosticCategory.Error,"Cannot_find_module_0_2307","Cannot find module '{0}'."),Module_0_has_already_exported_a_member_named_1_Consider_explicitly_re_exporting_to_resolve_the_ambiguity:t(2308,e.DiagnosticCategory.Error,"Module_0_has_already_exported_a_member_named_1_Consider_explicitly_re_exporting_to_resolve_the_ambig_2308","Module {0} has already exported a member named '{1}'. Consider explicitly re-exporting to resolve the ambiguity."),An_export_assignment_cannot_be_used_in_a_module_with_other_exported_elements:t(2309,e.DiagnosticCategory.Error,"An_export_assignment_cannot_be_used_in_a_module_with_other_exported_elements_2309","An export assignment cannot be used in a module with other exported elements."),Type_0_recursively_references_itself_as_a_base_type:t(2310,e.DiagnosticCategory.Error,"Type_0_recursively_references_itself_as_a_base_type_2310","Type '{0}' recursively references itself as a base type."),A_class_may_only_extend_another_class:t(2311,e.DiagnosticCategory.Error,"A_class_may_only_extend_another_class_2311","A class may only extend another class."),An_interface_may_only_extend_a_class_or_another_interface:t(2312,e.DiagnosticCategory.Error,"An_interface_may_only_extend_a_class_or_another_interface_2312","An interface may only extend a class or another interface."),Type_parameter_0_has_a_circular_constraint:t(2313,e.DiagnosticCategory.Error,"Type_parameter_0_has_a_circular_constraint_2313","Type parameter '{0}' has a circular constraint."),Generic_type_0_requires_1_type_argument_s:t(2314,e.DiagnosticCategory.Error,"Generic_type_0_requires_1_type_argument_s_2314","Generic type '{0}' requires {1} type argument(s)."),Type_0_is_not_generic:t(2315,e.DiagnosticCategory.Error,"Type_0_is_not_generic_2315","Type '{0}' is not generic."),Global_type_0_must_be_a_class_or_interface_type:t(2316,e.DiagnosticCategory.Error,"Global_type_0_must_be_a_class_or_interface_type_2316","Global type '{0}' must be a class or interface type."),Global_type_0_must_have_1_type_parameter_s:t(2317,e.DiagnosticCategory.Error,"Global_type_0_must_have_1_type_parameter_s_2317","Global type '{0}' must have {1} type parameter(s)."),Cannot_find_global_type_0:t(2318,e.DiagnosticCategory.Error,"Cannot_find_global_type_0_2318","Cannot find global type '{0}'."),Named_property_0_of_types_1_and_2_are_not_identical:t(2319,e.DiagnosticCategory.Error,"Named_property_0_of_types_1_and_2_are_not_identical_2319","Named property '{0}' of types '{1}' and '{2}' are not identical."),Interface_0_cannot_simultaneously_extend_types_1_and_2:t(2320,e.DiagnosticCategory.Error,"Interface_0_cannot_simultaneously_extend_types_1_and_2_2320","Interface '{0}' cannot simultaneously extend types '{1}' and '{2}'."),Excessive_stack_depth_comparing_types_0_and_1:t(2321,e.DiagnosticCategory.Error,"Excessive_stack_depth_comparing_types_0_and_1_2321","Excessive stack depth comparing types '{0}' and '{1}'."),Type_0_is_not_assignable_to_type_1:t(2322,e.DiagnosticCategory.Error,"Type_0_is_not_assignable_to_type_1_2322","Type '{0}' is not assignable to type '{1}'."),Cannot_redeclare_exported_variable_0:t(2323,e.DiagnosticCategory.Error,"Cannot_redeclare_exported_variable_0_2323","Cannot redeclare exported variable '{0}'."),Property_0_is_missing_in_type_1:t(2324,e.DiagnosticCategory.Error,"Property_0_is_missing_in_type_1_2324","Property '{0}' is missing in type '{1}'."),Property_0_is_private_in_type_1_but_not_in_type_2:t(2325,e.DiagnosticCategory.Error,"Property_0_is_private_in_type_1_but_not_in_type_2_2325","Property '{0}' is private in type '{1}' but not in type '{2}'."),Types_of_property_0_are_incompatible:t(2326,e.DiagnosticCategory.Error,"Types_of_property_0_are_incompatible_2326","Types of property '{0}' are incompatible."),Property_0_is_optional_in_type_1_but_required_in_type_2:t(2327,e.DiagnosticCategory.Error,"Property_0_is_optional_in_type_1_but_required_in_type_2_2327","Property '{0}' is optional in type '{1}' but required in type '{2}'."),Types_of_parameters_0_and_1_are_incompatible:t(2328,e.DiagnosticCategory.Error,"Types_of_parameters_0_and_1_are_incompatible_2328","Types of parameters '{0}' and '{1}' are incompatible."),Index_signature_is_missing_in_type_0:t(2329,e.DiagnosticCategory.Error,"Index_signature_is_missing_in_type_0_2329","Index signature is missing in type '{0}'."),Index_signatures_are_incompatible:t(2330,e.DiagnosticCategory.Error,"Index_signatures_are_incompatible_2330","Index signatures are incompatible."),this_cannot_be_referenced_in_a_module_or_namespace_body:t(2331,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_a_module_or_namespace_body_2331","'this' cannot be referenced in a module or namespace body."),this_cannot_be_referenced_in_current_location:t(2332,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_current_location_2332","'this' cannot be referenced in current location."),this_cannot_be_referenced_in_constructor_arguments:t(2333,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_constructor_arguments_2333","'this' cannot be referenced in constructor arguments."),this_cannot_be_referenced_in_a_static_property_initializer:t(2334,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_a_static_property_initializer_2334","'this' cannot be referenced in a static property initializer."),super_can_only_be_referenced_in_a_derived_class:t(2335,e.DiagnosticCategory.Error,"super_can_only_be_referenced_in_a_derived_class_2335","'super' can only be referenced in a derived class."),super_cannot_be_referenced_in_constructor_arguments:t(2336,e.DiagnosticCategory.Error,"super_cannot_be_referenced_in_constructor_arguments_2336","'super' cannot be referenced in constructor arguments."),Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors:t(2337,e.DiagnosticCategory.Error,"Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors_2337","Super calls are not permitted outside constructors or in nested functions inside constructors."),super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_derived_class:t(2338,e.DiagnosticCategory.Error,"super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_der_2338","'super' property access is permitted only in a constructor, member function, or member accessor of a derived class."),Property_0_does_not_exist_on_type_1:t(2339,e.DiagnosticCategory.Error,"Property_0_does_not_exist_on_type_1_2339","Property '{0}' does not exist on type '{1}'."),Only_public_and_protected_methods_of_the_base_class_are_accessible_via_the_super_keyword:t(2340,e.DiagnosticCategory.Error,"Only_public_and_protected_methods_of_the_base_class_are_accessible_via_the_super_keyword_2340","Only public and protected methods of the base class are accessible via the 'super' keyword."),Property_0_is_private_and_only_accessible_within_class_1:t(2341,e.DiagnosticCategory.Error,"Property_0_is_private_and_only_accessible_within_class_1_2341","Property '{0}' is private and only accessible within class '{1}'."),An_index_expression_argument_must_be_of_type_string_number_symbol_or_any:t(2342,e.DiagnosticCategory.Error,"An_index_expression_argument_must_be_of_type_string_number_symbol_or_any_2342","An index expression argument must be of type 'string', 'number', 'symbol', or 'any'."),This_syntax_requires_an_imported_helper_named_1_but_module_0_has_no_exported_member_1:t(2343,e.DiagnosticCategory.Error,"This_syntax_requires_an_imported_helper_named_1_but_module_0_has_no_exported_member_1_2343","This syntax requires an imported helper named '{1}', but module '{0}' has no exported member '{1}'."),Type_0_does_not_satisfy_the_constraint_1:t(2344,e.DiagnosticCategory.Error,"Type_0_does_not_satisfy_the_constraint_1_2344","Type '{0}' does not satisfy the constraint '{1}'."),Argument_of_type_0_is_not_assignable_to_parameter_of_type_1:t(2345,e.DiagnosticCategory.Error,"Argument_of_type_0_is_not_assignable_to_parameter_of_type_1_2345","Argument of type '{0}' is not assignable to parameter of type '{1}'."),Call_target_does_not_contain_any_signatures:t(2346,e.DiagnosticCategory.Error,"Call_target_does_not_contain_any_signatures_2346","Call target does not contain any signatures."),Untyped_function_calls_may_not_accept_type_arguments:t(2347,e.DiagnosticCategory.Error,"Untyped_function_calls_may_not_accept_type_arguments_2347","Untyped function calls may not accept type arguments."),Value_of_type_0_is_not_callable_Did_you_mean_to_include_new:t(2348,e.DiagnosticCategory.Error,"Value_of_type_0_is_not_callable_Did_you_mean_to_include_new_2348","Value of type '{0}' is not callable. Did you mean to include 'new'?"),Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures:t(2349,e.DiagnosticCategory.Error,"Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatur_2349","Cannot invoke an expression whose type lacks a call signature. Type '{0}' has no compatible call signatures."),Only_a_void_function_can_be_called_with_the_new_keyword:t(2350,e.DiagnosticCategory.Error,"Only_a_void_function_can_be_called_with_the_new_keyword_2350","Only a void function can be called with the 'new' keyword."),Cannot_use_new_with_an_expression_whose_type_lacks_a_call_or_construct_signature:t(2351,e.DiagnosticCategory.Error,"Cannot_use_new_with_an_expression_whose_type_lacks_a_call_or_construct_signature_2351","Cannot use 'new' with an expression whose type lacks a call or construct signature."),Type_0_cannot_be_converted_to_type_1:t(2352,e.DiagnosticCategory.Error,"Type_0_cannot_be_converted_to_type_1_2352","Type '{0}' cannot be converted to type '{1}'."),Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1:t(2353,e.DiagnosticCategory.Error,"Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1_2353","Object literal may only specify known properties, and '{0}' does not exist in type '{1}'."),This_syntax_requires_an_imported_helper_but_module_0_cannot_be_found:t(2354,e.DiagnosticCategory.Error,"This_syntax_requires_an_imported_helper_but_module_0_cannot_be_found_2354","This syntax requires an imported helper but module '{0}' cannot be found."),A_function_whose_declared_type_is_neither_void_nor_any_must_return_a_value:t(2355,e.DiagnosticCategory.Error,"A_function_whose_declared_type_is_neither_void_nor_any_must_return_a_value_2355","A function whose declared type is neither 'void' nor 'any' must return a value."),An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type:t(2356,e.DiagnosticCategory.Error,"An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type_2356","An arithmetic operand must be of type 'any', 'number' or an enum type."),The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access:t(2357,e.DiagnosticCategory.Error,"The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access_2357","The operand of an increment or decrement operator must be a variable or a property access."),The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_parameter:t(2358,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_paramete_2358","The left-hand side of an 'instanceof' expression must be of type 'any', an object type or a type parameter."),The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_Function_interface_type:t(2359,e.DiagnosticCategory.Error,"The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_F_2359","The right-hand side of an 'instanceof' expression must be of type 'any' or of a type assignable to the 'Function' interface type."),The_left_hand_side_of_an_in_expression_must_be_of_type_any_string_number_or_symbol:t(2360,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_in_expression_must_be_of_type_any_string_number_or_symbol_2360","The left-hand side of an 'in' expression must be of type 'any', 'string', 'number', or 'symbol'."),The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter:t(2361,e.DiagnosticCategory.Error,"The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter_2361","The right-hand side of an 'in' expression must be of type 'any', an object type or a type parameter."),The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type:t(2362,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type_2362","The left-hand side of an arithmetic operation must be of type 'any', 'number' or an enum type."),The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type:t(2363,e.DiagnosticCategory.Error,"The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type_2363","The right-hand side of an arithmetic operation must be of type 'any', 'number' or an enum type."),The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access:t(2364,e.DiagnosticCategory.Error,"The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access_2364","The left-hand side of an assignment expression must be a variable or a property access."),Operator_0_cannot_be_applied_to_types_1_and_2:t(2365,e.DiagnosticCategory.Error,"Operator_0_cannot_be_applied_to_types_1_and_2_2365","Operator '{0}' cannot be applied to types '{1}' and '{2}'."),Function_lacks_ending_return_statement_and_return_type_does_not_include_undefined:t(2366,e.DiagnosticCategory.Error,"Function_lacks_ending_return_statement_and_return_type_does_not_include_undefined_2366","Function lacks ending return statement and return type does not include 'undefined'."),Type_parameter_name_cannot_be_0:t(2368,e.DiagnosticCategory.Error,"Type_parameter_name_cannot_be_0_2368","Type parameter name cannot be '{0}'."),A_parameter_property_is_only_allowed_in_a_constructor_implementation:t(2369,e.DiagnosticCategory.Error,"A_parameter_property_is_only_allowed_in_a_constructor_implementation_2369","A parameter property is only allowed in a constructor implementation."),A_rest_parameter_must_be_of_an_array_type:t(2370,e.DiagnosticCategory.Error,"A_rest_parameter_must_be_of_an_array_type_2370","A rest parameter must be of an array type."),A_parameter_initializer_is_only_allowed_in_a_function_or_constructor_implementation:t(2371,e.DiagnosticCategory.Error,"A_parameter_initializer_is_only_allowed_in_a_function_or_constructor_implementation_2371","A parameter initializer is only allowed in a function or constructor implementation."),Parameter_0_cannot_be_referenced_in_its_initializer:t(2372,e.DiagnosticCategory.Error,"Parameter_0_cannot_be_referenced_in_its_initializer_2372","Parameter '{0}' cannot be referenced in its initializer."),Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it:t(2373,e.DiagnosticCategory.Error,"Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it_2373","Initializer of parameter '{0}' cannot reference identifier '{1}' declared after it."),Duplicate_string_index_signature:t(2374,e.DiagnosticCategory.Error,"Duplicate_string_index_signature_2374","Duplicate string index signature."),Duplicate_number_index_signature:t(2375,e.DiagnosticCategory.Error,"Duplicate_number_index_signature_2375","Duplicate number index signature."),A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_properties_or_has_parameter_properties:t(2376,e.DiagnosticCategory.Error,"A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_proper_2376","A 'super' call must be the first statement in the constructor when a class contains initialized properties or has parameter properties."),Constructors_for_derived_classes_must_contain_a_super_call:t(2377,e.DiagnosticCategory.Error,"Constructors_for_derived_classes_must_contain_a_super_call_2377","Constructors for derived classes must contain a 'super' call."),A_get_accessor_must_return_a_value:t(2378,e.DiagnosticCategory.Error,"A_get_accessor_must_return_a_value_2378","A 'get' accessor must return a value."),Getter_and_setter_accessors_do_not_agree_in_visibility:t(2379,e.DiagnosticCategory.Error,"Getter_and_setter_accessors_do_not_agree_in_visibility_2379","Getter and setter accessors do not agree in visibility."),get_and_set_accessor_must_have_the_same_type:t(2380,e.DiagnosticCategory.Error,"get_and_set_accessor_must_have_the_same_type_2380","'get' and 'set' accessor must have the same type."),A_signature_with_an_implementation_cannot_use_a_string_literal_type:t(2381,e.DiagnosticCategory.Error,"A_signature_with_an_implementation_cannot_use_a_string_literal_type_2381","A signature with an implementation cannot use a string literal type."),Specialized_overload_signature_is_not_assignable_to_any_non_specialized_signature:t(2382,e.DiagnosticCategory.Error,"Specialized_overload_signature_is_not_assignable_to_any_non_specialized_signature_2382","Specialized overload signature is not assignable to any non-specialized signature."),Overload_signatures_must_all_be_exported_or_non_exported:t(2383,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_exported_or_non_exported_2383","Overload signatures must all be exported or non-exported."),Overload_signatures_must_all_be_ambient_or_non_ambient:t(2384,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_ambient_or_non_ambient_2384","Overload signatures must all be ambient or non-ambient."),Overload_signatures_must_all_be_public_private_or_protected:t(2385,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_public_private_or_protected_2385","Overload signatures must all be public, private or protected."),Overload_signatures_must_all_be_optional_or_required:t(2386,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_optional_or_required_2386","Overload signatures must all be optional or required."),Function_overload_must_be_static:t(2387,e.DiagnosticCategory.Error,"Function_overload_must_be_static_2387","Function overload must be static."),Function_overload_must_not_be_static:t(2388,e.DiagnosticCategory.Error,"Function_overload_must_not_be_static_2388","Function overload must not be static."),Function_implementation_name_must_be_0:t(2389,e.DiagnosticCategory.Error,"Function_implementation_name_must_be_0_2389","Function implementation name must be '{0}'."),Constructor_implementation_is_missing:t(2390,e.DiagnosticCategory.Error,"Constructor_implementation_is_missing_2390","Constructor implementation is missing."),Function_implementation_is_missing_or_not_immediately_following_the_declaration:t(2391,e.DiagnosticCategory.Error,"Function_implementation_is_missing_or_not_immediately_following_the_declaration_2391","Function implementation is missing or not immediately following the declaration."),Multiple_constructor_implementations_are_not_allowed:t(2392,e.DiagnosticCategory.Error,"Multiple_constructor_implementations_are_not_allowed_2392","Multiple constructor implementations are not allowed."),Duplicate_function_implementation:t(2393,e.DiagnosticCategory.Error,"Duplicate_function_implementation_2393","Duplicate function implementation."),Overload_signature_is_not_compatible_with_function_implementation:t(2394,e.DiagnosticCategory.Error,"Overload_signature_is_not_compatible_with_function_implementation_2394","Overload signature is not compatible with function implementation."),Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local:t(2395,e.DiagnosticCategory.Error,"Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local_2395","Individual declarations in merged declaration '{0}' must be all exported or all local."),Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters:t(2396,e.DiagnosticCategory.Error,"Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters_2396","Duplicate identifier 'arguments'. Compiler uses 'arguments' to initialize rest parameters."),Declaration_name_conflicts_with_built_in_global_identifier_0:t(2397,e.DiagnosticCategory.Error,"Declaration_name_conflicts_with_built_in_global_identifier_0_2397","Declaration name conflicts with built-in global identifier '{0}'."),Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference:t(2399,e.DiagnosticCategory.Error,"Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference_2399","Duplicate identifier '_this'. Compiler uses variable declaration '_this' to capture 'this' reference."),Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference:t(2400,e.DiagnosticCategory.Error,"Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference_2400","Expression resolves to variable declaration '_this' that compiler uses to capture 'this' reference."),Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference:t(2401,e.DiagnosticCategory.Error,"Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference_2401","Duplicate identifier '_super'. Compiler uses '_super' to capture base class reference."),Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference:t(2402,e.DiagnosticCategory.Error,"Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference_2402","Expression resolves to '_super' that compiler uses to capture base class reference."),Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2:t(2403,e.DiagnosticCategory.Error,"Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_t_2403","Subsequent variable declarations must have the same type.  Variable '{0}' must be of type '{1}', but here has type '{2}'."),The_left_hand_side_of_a_for_in_statement_cannot_use_a_type_annotation:t(2404,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_cannot_use_a_type_annotation_2404","The left-hand side of a 'for...in' statement cannot use a type annotation."),The_left_hand_side_of_a_for_in_statement_must_be_of_type_string_or_any:t(2405,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_must_be_of_type_string_or_any_2405","The left-hand side of a 'for...in' statement must be of type 'string' or 'any'."),The_left_hand_side_of_a_for_in_statement_must_be_a_variable_or_a_property_access:t(2406,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_must_be_a_variable_or_a_property_access_2406","The left-hand side of a 'for...in' statement must be a variable or a property access."),The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter:t(2407,e.DiagnosticCategory.Error,"The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter_2407","The right-hand side of a 'for...in' statement must be of type 'any', an object type or a type parameter."),Setters_cannot_return_a_value:t(2408,e.DiagnosticCategory.Error,"Setters_cannot_return_a_value_2408","Setters cannot return a value."),Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class:t(2409,e.DiagnosticCategory.Error,"Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class_2409","Return type of constructor signature must be assignable to the instance type of the class."),The_with_statement_is_not_supported_All_symbols_in_a_with_block_will_have_type_any:t(2410,e.DiagnosticCategory.Error,"The_with_statement_is_not_supported_All_symbols_in_a_with_block_will_have_type_any_2410","The 'with' statement is not supported. All symbols in a 'with' block will have type 'any'."),Property_0_of_type_1_is_not_assignable_to_string_index_type_2:t(2411,e.DiagnosticCategory.Error,"Property_0_of_type_1_is_not_assignable_to_string_index_type_2_2411","Property '{0}' of type '{1}' is not assignable to string index type '{2}'."),Property_0_of_type_1_is_not_assignable_to_numeric_index_type_2:t(2412,e.DiagnosticCategory.Error,"Property_0_of_type_1_is_not_assignable_to_numeric_index_type_2_2412","Property '{0}' of type '{1}' is not assignable to numeric index type '{2}'."),Numeric_index_type_0_is_not_assignable_to_string_index_type_1:t(2413,e.DiagnosticCategory.Error,"Numeric_index_type_0_is_not_assignable_to_string_index_type_1_2413","Numeric index type '{0}' is not assignable to string index type '{1}'."),Class_name_cannot_be_0:t(2414,e.DiagnosticCategory.Error,"Class_name_cannot_be_0_2414","Class name cannot be '{0}'."),Class_0_incorrectly_extends_base_class_1:t(2415,e.DiagnosticCategory.Error,"Class_0_incorrectly_extends_base_class_1_2415","Class '{0}' incorrectly extends base class '{1}'."),Class_static_side_0_incorrectly_extends_base_class_static_side_1:t(2417,e.DiagnosticCategory.Error,"Class_static_side_0_incorrectly_extends_base_class_static_side_1_2417","Class static side '{0}' incorrectly extends base class static side '{1}'."),Class_0_incorrectly_implements_interface_1:t(2420,e.DiagnosticCategory.Error,"Class_0_incorrectly_implements_interface_1_2420","Class '{0}' incorrectly implements interface '{1}'."),A_class_may_only_implement_another_class_or_interface:t(2422,e.DiagnosticCategory.Error,"A_class_may_only_implement_another_class_or_interface_2422","A class may only implement another class or interface."),Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_accessor:t(2423,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_access_2423","Class '{0}' defines instance member function '{1}', but extended class '{2}' defines it as instance member accessor."),Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_property:t(2424,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_proper_2424","Class '{0}' defines instance member function '{1}', but extended class '{2}' defines it as instance member property."),Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_function:t(2425,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_functi_2425","Class '{0}' defines instance member property '{1}', but extended class '{2}' defines it as instance member function."),Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_function:t(2426,e.DiagnosticCategory.Error,"Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_functi_2426","Class '{0}' defines instance member accessor '{1}', but extended class '{2}' defines it as instance member function."),Interface_name_cannot_be_0:t(2427,e.DiagnosticCategory.Error,"Interface_name_cannot_be_0_2427","Interface name cannot be '{0}'."),All_declarations_of_0_must_have_identical_type_parameters:t(2428,e.DiagnosticCategory.Error,"All_declarations_of_0_must_have_identical_type_parameters_2428","All declarations of '{0}' must have identical type parameters."),Interface_0_incorrectly_extends_interface_1:t(2430,e.DiagnosticCategory.Error,"Interface_0_incorrectly_extends_interface_1_2430","Interface '{0}' incorrectly extends interface '{1}'."),Enum_name_cannot_be_0:t(2431,e.DiagnosticCategory.Error,"Enum_name_cannot_be_0_2431","Enum name cannot be '{0}'."),In_an_enum_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_its_first_enum_element:t(2432,e.DiagnosticCategory.Error,"In_an_enum_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_its_first_enu_2432","In an enum with multiple declarations, only one declaration can omit an initializer for its first enum element."),A_namespace_declaration_cannot_be_in_a_different_file_from_a_class_or_function_with_which_it_is_merged:t(2433,e.DiagnosticCategory.Error,"A_namespace_declaration_cannot_be_in_a_different_file_from_a_class_or_function_with_which_it_is_merg_2433","A namespace declaration cannot be in a different file from a class or function with which it is merged."),A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged:t(2434,e.DiagnosticCategory.Error,"A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged_2434","A namespace declaration cannot be located prior to a class or function with which it is merged."),Ambient_modules_cannot_be_nested_in_other_modules_or_namespaces:t(2435,e.DiagnosticCategory.Error,"Ambient_modules_cannot_be_nested_in_other_modules_or_namespaces_2435","Ambient modules cannot be nested in other modules or namespaces."),Ambient_module_declaration_cannot_specify_relative_module_name:t(2436,e.DiagnosticCategory.Error,"Ambient_module_declaration_cannot_specify_relative_module_name_2436","Ambient module declaration cannot specify relative module name."),Module_0_is_hidden_by_a_local_declaration_with_the_same_name:t(2437,e.DiagnosticCategory.Error,"Module_0_is_hidden_by_a_local_declaration_with_the_same_name_2437","Module '{0}' is hidden by a local declaration with the same name."),Import_name_cannot_be_0:t(2438,e.DiagnosticCategory.Error,"Import_name_cannot_be_0_2438","Import name cannot be '{0}'."),Import_or_export_declaration_in_an_ambient_module_declaration_cannot_reference_module_through_relative_module_name:t(2439,e.DiagnosticCategory.Error,"Import_or_export_declaration_in_an_ambient_module_declaration_cannot_reference_module_through_relati_2439","Import or export declaration in an ambient module declaration cannot reference module through relative module name."),Import_declaration_conflicts_with_local_declaration_of_0:t(2440,e.DiagnosticCategory.Error,"Import_declaration_conflicts_with_local_declaration_of_0_2440","Import declaration conflicts with local declaration of '{0}'."),Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module:t(2441,e.DiagnosticCategory.Error,"Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_2441","Duplicate identifier '{0}'. Compiler reserves name '{1}' in top level scope of a module."),Types_have_separate_declarations_of_a_private_property_0:t(2442,e.DiagnosticCategory.Error,"Types_have_separate_declarations_of_a_private_property_0_2442","Types have separate declarations of a private property '{0}'."),Property_0_is_protected_but_type_1_is_not_a_class_derived_from_2:t(2443,e.DiagnosticCategory.Error,"Property_0_is_protected_but_type_1_is_not_a_class_derived_from_2_2443","Property '{0}' is protected but type '{1}' is not a class derived from '{2}'."),Property_0_is_protected_in_type_1_but_public_in_type_2:t(2444,e.DiagnosticCategory.Error,"Property_0_is_protected_in_type_1_but_public_in_type_2_2444","Property '{0}' is protected in type '{1}' but public in type '{2}'."),Property_0_is_protected_and_only_accessible_within_class_1_and_its_subclasses:t(2445,e.DiagnosticCategory.Error,"Property_0_is_protected_and_only_accessible_within_class_1_and_its_subclasses_2445","Property '{0}' is protected and only accessible within class '{1}' and its subclasses."),Property_0_is_protected_and_only_accessible_through_an_instance_of_class_1:t(2446,e.DiagnosticCategory.Error,"Property_0_is_protected_and_only_accessible_through_an_instance_of_class_1_2446","Property '{0}' is protected and only accessible through an instance of class '{1}'."),The_0_operator_is_not_allowed_for_boolean_types_Consider_using_1_instead:t(2447,e.DiagnosticCategory.Error,"The_0_operator_is_not_allowed_for_boolean_types_Consider_using_1_instead_2447","The '{0}' operator is not allowed for boolean types. Consider using '{1}' instead."),Block_scoped_variable_0_used_before_its_declaration:t(2448,e.DiagnosticCategory.Error,"Block_scoped_variable_0_used_before_its_declaration_2448","Block-scoped variable '{0}' used before its declaration."),Class_0_used_before_its_declaration:t(2449,e.DiagnosticCategory.Error,"Class_0_used_before_its_declaration_2449","Class '{0}' used before its declaration."),Enum_0_used_before_its_declaration:t(2450,e.DiagnosticCategory.Error,"Enum_0_used_before_its_declaration_2450","Enum '{0}' used before its declaration."),Cannot_redeclare_block_scoped_variable_0:t(2451,e.DiagnosticCategory.Error,"Cannot_redeclare_block_scoped_variable_0_2451","Cannot redeclare block-scoped variable '{0}'."),An_enum_member_cannot_have_a_numeric_name:t(2452,e.DiagnosticCategory.Error,"An_enum_member_cannot_have_a_numeric_name_2452","An enum member cannot have a numeric name."),The_type_argument_for_type_parameter_0_cannot_be_inferred_from_the_usage_Consider_specifying_the_type_arguments_explicitly:t(2453,e.DiagnosticCategory.Error,"The_type_argument_for_type_parameter_0_cannot_be_inferred_from_the_usage_Consider_specifying_the_typ_2453","The type argument for type parameter '{0}' cannot be inferred from the usage. Consider specifying the type arguments explicitly."),Variable_0_is_used_before_being_assigned:t(2454,e.DiagnosticCategory.Error,"Variable_0_is_used_before_being_assigned_2454","Variable '{0}' is used before being assigned."),Type_argument_candidate_1_is_not_a_valid_type_argument_because_it_is_not_a_supertype_of_candidate_0:t(2455,e.DiagnosticCategory.Error,"Type_argument_candidate_1_is_not_a_valid_type_argument_because_it_is_not_a_supertype_of_candidate_0_2455","Type argument candidate '{1}' is not a valid type argument because it is not a supertype of candidate '{0}'."),Type_alias_0_circularly_references_itself:t(2456,e.DiagnosticCategory.Error,"Type_alias_0_circularly_references_itself_2456","Type alias '{0}' circularly references itself."),Type_alias_name_cannot_be_0:t(2457,e.DiagnosticCategory.Error,"Type_alias_name_cannot_be_0_2457","Type alias name cannot be '{0}'."),An_AMD_module_cannot_have_multiple_name_assignments:t(2458,e.DiagnosticCategory.Error,"An_AMD_module_cannot_have_multiple_name_assignments_2458","An AMD module cannot have multiple name assignments."),Type_0_has_no_property_1_and_no_string_index_signature:t(2459,e.DiagnosticCategory.Error,"Type_0_has_no_property_1_and_no_string_index_signature_2459","Type '{0}' has no property '{1}' and no string index signature."),Type_0_has_no_property_1:t(2460,e.DiagnosticCategory.Error,"Type_0_has_no_property_1_2460","Type '{0}' has no property '{1}'."),Type_0_is_not_an_array_type:t(2461,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_2461","Type '{0}' is not an array type."),A_rest_element_must_be_last_in_a_destructuring_pattern:t(2462,e.DiagnosticCategory.Error,"A_rest_element_must_be_last_in_a_destructuring_pattern_2462","A rest element must be last in a destructuring pattern."),A_binding_pattern_parameter_cannot_be_optional_in_an_implementation_signature:t(2463,e.DiagnosticCategory.Error,"A_binding_pattern_parameter_cannot_be_optional_in_an_implementation_signature_2463","A binding pattern parameter cannot be optional in an implementation signature."),A_computed_property_name_must_be_of_type_string_number_symbol_or_any:t(2464,e.DiagnosticCategory.Error,"A_computed_property_name_must_be_of_type_string_number_symbol_or_any_2464","A computed property name must be of type 'string', 'number', 'symbol', or 'any'."),this_cannot_be_referenced_in_a_computed_property_name:t(2465,e.DiagnosticCategory.Error,"this_cannot_be_referenced_in_a_computed_property_name_2465","'this' cannot be referenced in a computed property name."),super_cannot_be_referenced_in_a_computed_property_name:t(2466,e.DiagnosticCategory.Error,"super_cannot_be_referenced_in_a_computed_property_name_2466","'super' cannot be referenced in a computed property name."),A_computed_property_name_cannot_reference_a_type_parameter_from_its_containing_type:t(2467,e.DiagnosticCategory.Error,"A_computed_property_name_cannot_reference_a_type_parameter_from_its_containing_type_2467","A computed property name cannot reference a type parameter from its containing type."),Cannot_find_global_value_0:t(2468,e.DiagnosticCategory.Error,"Cannot_find_global_value_0_2468","Cannot find global value '{0}'."),The_0_operator_cannot_be_applied_to_type_symbol:t(2469,e.DiagnosticCategory.Error,"The_0_operator_cannot_be_applied_to_type_symbol_2469","The '{0}' operator cannot be applied to type 'symbol'."),Symbol_reference_does_not_refer_to_the_global_Symbol_constructor_object:t(2470,e.DiagnosticCategory.Error,"Symbol_reference_does_not_refer_to_the_global_Symbol_constructor_object_2470","'Symbol' reference does not refer to the global Symbol constructor object."),A_computed_property_name_of_the_form_0_must_be_of_type_symbol:t(2471,e.DiagnosticCategory.Error,"A_computed_property_name_of_the_form_0_must_be_of_type_symbol_2471","A computed property name of the form '{0}' must be of type 'symbol'."),Spread_operator_in_new_expressions_is_only_available_when_targeting_ECMAScript_5_and_higher:t(2472,e.DiagnosticCategory.Error,"Spread_operator_in_new_expressions_is_only_available_when_targeting_ECMAScript_5_and_higher_2472","Spread operator in 'new' expressions is only available when targeting ECMAScript 5 and higher."),Enum_declarations_must_all_be_const_or_non_const:t(2473,e.DiagnosticCategory.Error,"Enum_declarations_must_all_be_const_or_non_const_2473","Enum declarations must all be const or non-const."),In_const_enum_declarations_member_initializer_must_be_constant_expression:t(2474,e.DiagnosticCategory.Error,"In_const_enum_declarations_member_initializer_must_be_constant_expression_2474","In 'const' enum declarations member initializer must be constant expression."),const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_import_declaration_or_export_assignment:t(2475,e.DiagnosticCategory.Error,"const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_im_2475","'const' enums can only be used in property or index access expressions or the right hand side of an import declaration or export assignment."),A_const_enum_member_can_only_be_accessed_using_a_string_literal:t(2476,e.DiagnosticCategory.Error,"A_const_enum_member_can_only_be_accessed_using_a_string_literal_2476","A const enum member can only be accessed using a string literal."),const_enum_member_initializer_was_evaluated_to_a_non_finite_value:t(2477,e.DiagnosticCategory.Error,"const_enum_member_initializer_was_evaluated_to_a_non_finite_value_2477","'const' enum member initializer was evaluated to a non-finite value."),const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN:t(2478,e.DiagnosticCategory.Error,"const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN_2478","'const' enum member initializer was evaluated to disallowed value 'NaN'."),Property_0_does_not_exist_on_const_enum_1:t(2479,e.DiagnosticCategory.Error,"Property_0_does_not_exist_on_const_enum_1_2479","Property '{0}' does not exist on 'const' enum '{1}'."),let_is_not_allowed_to_be_used_as_a_name_in_let_or_const_declarations:t(2480,e.DiagnosticCategory.Error,"let_is_not_allowed_to_be_used_as_a_name_in_let_or_const_declarations_2480","'let' is not allowed to be used as a name in 'let' or 'const' declarations."),Cannot_initialize_outer_scoped_variable_0_in_the_same_scope_as_block_scoped_declaration_1:t(2481,e.DiagnosticCategory.Error,"Cannot_initialize_outer_scoped_variable_0_in_the_same_scope_as_block_scoped_declaration_1_2481","Cannot initialize outer scoped variable '{0}' in the same scope as block scoped declaration '{1}'."),The_left_hand_side_of_a_for_of_statement_cannot_use_a_type_annotation:t(2483,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_of_statement_cannot_use_a_type_annotation_2483","The left-hand side of a 'for...of' statement cannot use a type annotation."),Export_declaration_conflicts_with_exported_declaration_of_0:t(2484,e.DiagnosticCategory.Error,"Export_declaration_conflicts_with_exported_declaration_of_0_2484","Export declaration conflicts with exported declaration of '{0}'."),The_left_hand_side_of_a_for_of_statement_must_be_a_variable_or_a_property_access:t(2487,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_of_statement_must_be_a_variable_or_a_property_access_2487","The left-hand side of a 'for...of' statement must be a variable or a property access."),Type_must_have_a_Symbol_iterator_method_that_returns_an_iterator:t(2488,e.DiagnosticCategory.Error,"Type_must_have_a_Symbol_iterator_method_that_returns_an_iterator_2488","Type must have a '[Symbol.iterator]()' method that returns an iterator."),An_iterator_must_have_a_next_method:t(2489,e.DiagnosticCategory.Error,"An_iterator_must_have_a_next_method_2489","An iterator must have a 'next()' method."),The_type_returned_by_the_next_method_of_an_iterator_must_have_a_value_property:t(2490,e.DiagnosticCategory.Error,"The_type_returned_by_the_next_method_of_an_iterator_must_have_a_value_property_2490","The type returned by the 'next()' method of an iterator must have a 'value' property."),The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern:t(2491,e.DiagnosticCategory.Error,"The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern_2491","The left-hand side of a 'for...in' statement cannot be a destructuring pattern."),Cannot_redeclare_identifier_0_in_catch_clause:t(2492,e.DiagnosticCategory.Error,"Cannot_redeclare_identifier_0_in_catch_clause_2492","Cannot redeclare identifier '{0}' in catch clause."),Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2:t(2493,e.DiagnosticCategory.Error,"Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2_2493","Tuple type '{0}' with length '{1}' cannot be assigned to tuple with length '{2}'."),Using_a_string_in_a_for_of_statement_is_only_supported_in_ECMAScript_5_and_higher:t(2494,e.DiagnosticCategory.Error,"Using_a_string_in_a_for_of_statement_is_only_supported_in_ECMAScript_5_and_higher_2494","Using a string in a 'for...of' statement is only supported in ECMAScript 5 and higher."),Type_0_is_not_an_array_type_or_a_string_type:t(2495,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_or_a_string_type_2495","Type '{0}' is not an array type or a string type."),The_arguments_object_cannot_be_referenced_in_an_arrow_function_in_ES3_and_ES5_Consider_using_a_standard_function_expression:t(2496,e.DiagnosticCategory.Error,"The_arguments_object_cannot_be_referenced_in_an_arrow_function_in_ES3_and_ES5_Consider_using_a_stand_2496","The 'arguments' object cannot be referenced in an arrow function in ES3 and ES5. Consider using a standard function expression."),Module_0_resolves_to_a_non_module_entity_and_cannot_be_imported_using_this_construct:t(2497,e.DiagnosticCategory.Error,"Module_0_resolves_to_a_non_module_entity_and_cannot_be_imported_using_this_construct_2497","Module '{0}' resolves to a non-module entity and cannot be imported using this construct."),Module_0_uses_export_and_cannot_be_used_with_export_Asterisk:t(2498,e.DiagnosticCategory.Error,"Module_0_uses_export_and_cannot_be_used_with_export_Asterisk_2498","Module '{0}' uses 'export =' and cannot be used with 'export *'."),An_interface_can_only_extend_an_identifier_Slashqualified_name_with_optional_type_arguments:t(2499,e.DiagnosticCategory.Error,"An_interface_can_only_extend_an_identifier_Slashqualified_name_with_optional_type_arguments_2499","An interface can only extend an identifier/qualified-name with optional type arguments."),A_class_can_only_implement_an_identifier_Slashqualified_name_with_optional_type_arguments:t(2500,e.DiagnosticCategory.Error,"A_class_can_only_implement_an_identifier_Slashqualified_name_with_optional_type_arguments_2500","A class can only implement an identifier/qualified-name with optional type arguments."),A_rest_element_cannot_contain_a_binding_pattern:t(2501,e.DiagnosticCategory.Error,"A_rest_element_cannot_contain_a_binding_pattern_2501","A rest element cannot contain a binding pattern."),_0_is_referenced_directly_or_indirectly_in_its_own_type_annotation:t(2502,e.DiagnosticCategory.Error,"_0_is_referenced_directly_or_indirectly_in_its_own_type_annotation_2502","'{0}' is referenced directly or indirectly in its own type annotation."),Cannot_find_namespace_0:t(2503,e.DiagnosticCategory.Error,"Cannot_find_namespace_0_2503","Cannot find namespace '{0}'."),Type_must_have_a_Symbol_asyncIterator_method_that_returns_an_async_iterator:t(2504,e.DiagnosticCategory.Error,"Type_must_have_a_Symbol_asyncIterator_method_that_returns_an_async_iterator_2504","Type must have a '[Symbol.asyncIterator]()' method that returns an async iterator."),A_generator_cannot_have_a_void_type_annotation:t(2505,e.DiagnosticCategory.Error,"A_generator_cannot_have_a_void_type_annotation_2505","A generator cannot have a 'void' type annotation."),_0_is_referenced_directly_or_indirectly_in_its_own_base_expression:t(2506,e.DiagnosticCategory.Error,"_0_is_referenced_directly_or_indirectly_in_its_own_base_expression_2506","'{0}' is referenced directly or indirectly in its own base expression."),Type_0_is_not_a_constructor_function_type:t(2507,e.DiagnosticCategory.Error,"Type_0_is_not_a_constructor_function_type_2507","Type '{0}' is not a constructor function type."),No_base_constructor_has_the_specified_number_of_type_arguments:t(2508,e.DiagnosticCategory.Error,"No_base_constructor_has_the_specified_number_of_type_arguments_2508","No base constructor has the specified number of type arguments."),Base_constructor_return_type_0_is_not_a_class_or_interface_type:t(2509,e.DiagnosticCategory.Error,"Base_constructor_return_type_0_is_not_a_class_or_interface_type_2509","Base constructor return type '{0}' is not a class or interface type."),Base_constructors_must_all_have_the_same_return_type:t(2510,e.DiagnosticCategory.Error,"Base_constructors_must_all_have_the_same_return_type_2510","Base constructors must all have the same return type."),Cannot_create_an_instance_of_the_abstract_class_0:t(2511,e.DiagnosticCategory.Error,"Cannot_create_an_instance_of_the_abstract_class_0_2511","Cannot create an instance of the abstract class '{0}'."),Overload_signatures_must_all_be_abstract_or_non_abstract:t(2512,e.DiagnosticCategory.Error,"Overload_signatures_must_all_be_abstract_or_non_abstract_2512","Overload signatures must all be abstract or non-abstract."),Abstract_method_0_in_class_1_cannot_be_accessed_via_super_expression:t(2513,e.DiagnosticCategory.Error,"Abstract_method_0_in_class_1_cannot_be_accessed_via_super_expression_2513","Abstract method '{0}' in class '{1}' cannot be accessed via super expression."),Classes_containing_abstract_methods_must_be_marked_abstract:t(2514,e.DiagnosticCategory.Error,"Classes_containing_abstract_methods_must_be_marked_abstract_2514","Classes containing abstract methods must be marked abstract."),Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2:t(2515,e.DiagnosticCategory.Error,"Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2_2515","Non-abstract class '{0}' does not implement inherited abstract member '{1}' from class '{2}'."),All_declarations_of_an_abstract_method_must_be_consecutive:t(2516,e.DiagnosticCategory.Error,"All_declarations_of_an_abstract_method_must_be_consecutive_2516","All declarations of an abstract method must be consecutive."),Cannot_assign_an_abstract_constructor_type_to_a_non_abstract_constructor_type:t(2517,e.DiagnosticCategory.Error,"Cannot_assign_an_abstract_constructor_type_to_a_non_abstract_constructor_type_2517","Cannot assign an abstract constructor type to a non-abstract constructor type."),A_this_based_type_guard_is_not_compatible_with_a_parameter_based_type_guard:t(2518,e.DiagnosticCategory.Error,"A_this_based_type_guard_is_not_compatible_with_a_parameter_based_type_guard_2518","A 'this'-based type guard is not compatible with a parameter-based type guard."),An_async_iterator_must_have_a_next_method:t(2519,e.DiagnosticCategory.Error,"An_async_iterator_must_have_a_next_method_2519","An async iterator must have a 'next()' method."),Duplicate_identifier_0_Compiler_uses_declaration_1_to_support_async_functions:t(2520,e.DiagnosticCategory.Error,"Duplicate_identifier_0_Compiler_uses_declaration_1_to_support_async_functions_2520","Duplicate identifier '{0}'. Compiler uses declaration '{1}' to support async functions."),Expression_resolves_to_variable_declaration_0_that_compiler_uses_to_support_async_functions:t(2521,e.DiagnosticCategory.Error,"Expression_resolves_to_variable_declaration_0_that_compiler_uses_to_support_async_functions_2521","Expression resolves to variable declaration '{0}' that compiler uses to support async functions."),The_arguments_object_cannot_be_referenced_in_an_async_function_or_method_in_ES3_and_ES5_Consider_using_a_standard_function_or_method:t(2522,e.DiagnosticCategory.Error,"The_arguments_object_cannot_be_referenced_in_an_async_function_or_method_in_ES3_and_ES5_Consider_usi_2522","The 'arguments' object cannot be referenced in an async function or method in ES3 and ES5. Consider using a standard function or method."),yield_expressions_cannot_be_used_in_a_parameter_initializer:t(2523,e.DiagnosticCategory.Error,"yield_expressions_cannot_be_used_in_a_parameter_initializer_2523","'yield' expressions cannot be used in a parameter initializer."),await_expressions_cannot_be_used_in_a_parameter_initializer:t(2524,e.DiagnosticCategory.Error,"await_expressions_cannot_be_used_in_a_parameter_initializer_2524","'await' expressions cannot be used in a parameter initializer."),Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value:t(2525,e.DiagnosticCategory.Error,"Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value_2525","Initializer provides no value for this binding element and the binding element has no default value."),A_this_type_is_available_only_in_a_non_static_member_of_a_class_or_interface:t(2526,e.DiagnosticCategory.Error,"A_this_type_is_available_only_in_a_non_static_member_of_a_class_or_interface_2526","A 'this' type is available only in a non-static member of a class or interface."),The_inferred_type_of_0_references_an_inaccessible_this_type_A_type_annotation_is_necessary:t(2527,e.DiagnosticCategory.Error,"The_inferred_type_of_0_references_an_inaccessible_this_type_A_type_annotation_is_necessary_2527","The inferred type of '{0}' references an inaccessible 'this' type. A type annotation is necessary."),A_module_cannot_have_multiple_default_exports:t(2528,e.DiagnosticCategory.Error,"A_module_cannot_have_multiple_default_exports_2528","A module cannot have multiple default exports."),Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_containing_async_functions:t(2529,e.DiagnosticCategory.Error,"Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_containing_async_func_2529","Duplicate identifier '{0}'. Compiler reserves name '{1}' in top level scope of a module containing async functions."),Property_0_is_incompatible_with_index_signature:t(2530,e.DiagnosticCategory.Error,"Property_0_is_incompatible_with_index_signature_2530","Property '{0}' is incompatible with index signature."),Object_is_possibly_null:t(2531,e.DiagnosticCategory.Error,"Object_is_possibly_null_2531","Object is possibly 'null'."),Object_is_possibly_undefined:t(2532,e.DiagnosticCategory.Error,"Object_is_possibly_undefined_2532","Object is possibly 'undefined'."),Object_is_possibly_null_or_undefined:t(2533,e.DiagnosticCategory.Error,"Object_is_possibly_null_or_undefined_2533","Object is possibly 'null' or 'undefined'."),A_function_returning_never_cannot_have_a_reachable_end_point:t(2534,e.DiagnosticCategory.Error,"A_function_returning_never_cannot_have_a_reachable_end_point_2534","A function returning 'never' cannot have a reachable end point."),Enum_type_0_has_members_with_initializers_that_are_not_literals:t(2535,e.DiagnosticCategory.Error,"Enum_type_0_has_members_with_initializers_that_are_not_literals_2535","Enum type '{0}' has members with initializers that are not literals."),Type_0_cannot_be_used_to_index_type_1:t(2536,e.DiagnosticCategory.Error,"Type_0_cannot_be_used_to_index_type_1_2536","Type '{0}' cannot be used to index type '{1}'."),Type_0_has_no_matching_index_signature_for_type_1:t(2537,e.DiagnosticCategory.Error,"Type_0_has_no_matching_index_signature_for_type_1_2537","Type '{0}' has no matching index signature for type '{1}'."),Type_0_cannot_be_used_as_an_index_type:t(2538,e.DiagnosticCategory.Error,"Type_0_cannot_be_used_as_an_index_type_2538","Type '{0}' cannot be used as an index type."),Cannot_assign_to_0_because_it_is_not_a_variable:t(2539,e.DiagnosticCategory.Error,"Cannot_assign_to_0_because_it_is_not_a_variable_2539","Cannot assign to '{0}' because it is not a variable."),Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property:t(2540,e.DiagnosticCategory.Error,"Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property_2540","Cannot assign to '{0}' because it is a constant or a read-only property."),The_target_of_an_assignment_must_be_a_variable_or_a_property_access:t(2541,e.DiagnosticCategory.Error,"The_target_of_an_assignment_must_be_a_variable_or_a_property_access_2541","The target of an assignment must be a variable or a property access."),Index_signature_in_type_0_only_permits_reading:t(2542,e.DiagnosticCategory.Error,"Index_signature_in_type_0_only_permits_reading_2542","Index signature in type '{0}' only permits reading."),Duplicate_identifier_newTarget_Compiler_uses_variable_declaration_newTarget_to_capture_new_target_meta_property_reference:t(2543,e.DiagnosticCategory.Error,"Duplicate_identifier_newTarget_Compiler_uses_variable_declaration_newTarget_to_capture_new_target_me_2543","Duplicate identifier '_newTarget'. Compiler uses variable declaration '_newTarget' to capture 'new.target' meta-property reference."),Expression_resolves_to_variable_declaration_newTarget_that_compiler_uses_to_capture_new_target_meta_property_reference:t(2544,e.DiagnosticCategory.Error,"Expression_resolves_to_variable_declaration_newTarget_that_compiler_uses_to_capture_new_target_meta__2544","Expression resolves to variable declaration '_newTarget' that compiler uses to capture 'new.target' meta-property reference."),A_mixin_class_must_have_a_constructor_with_a_single_rest_parameter_of_type_any:t(2545,e.DiagnosticCategory.Error,"A_mixin_class_must_have_a_constructor_with_a_single_rest_parameter_of_type_any_2545","A mixin class must have a constructor with a single rest parameter of type 'any[]'."),Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1:t(2546,e.DiagnosticCategory.Error,"Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1_2546","Property '{0}' has conflicting declarations and is inaccessible in type '{1}'."),The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value_property:t(2547,e.DiagnosticCategory.Error,"The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value__2547","The type returned by the 'next()' method of an async iterator must be a promise for a type with a 'value' property."),Type_0_is_not_an_array_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:t(2548,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator_2548","Type '{0}' is not an array type or does not have a '[Symbol.iterator]()' method that returns an iterator."),Type_0_is_not_an_array_type_or_a_string_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:t(2549,e.DiagnosticCategory.Error,"Type_0_is_not_an_array_type_or_a_string_type_or_does_not_have_a_Symbol_iterator_method_that_returns__2549","Type '{0}' is not an array type or a string type or does not have a '[Symbol.iterator]()' method that returns an iterator."),Generic_type_instantiation_is_excessively_deep_and_possibly_infinite:t(2550,e.DiagnosticCategory.Error,"Generic_type_instantiation_is_excessively_deep_and_possibly_infinite_2550","Generic type instantiation is excessively deep and possibly infinite."),Property_0_does_not_exist_on_type_1_Did_you_mean_2:t(2551,e.DiagnosticCategory.Error,"Property_0_does_not_exist_on_type_1_Did_you_mean_2_2551","Property '{0}' does not exist on type '{1}'. Did you mean '{2}'?"),Cannot_find_name_0_Did_you_mean_1:t(2552,e.DiagnosticCategory.Error,"Cannot_find_name_0_Did_you_mean_1_2552","Cannot find name '{0}'. Did you mean '{1}'?"),Computed_values_are_not_permitted_in_an_enum_with_string_valued_members:t(2553,e.DiagnosticCategory.Error,"Computed_values_are_not_permitted_in_an_enum_with_string_valued_members_2553","Computed values are not permitted in an enum with string valued members."),Expected_0_arguments_but_got_1:t(2554,e.DiagnosticCategory.Error,"Expected_0_arguments_but_got_1_2554","Expected {0} arguments, but got {1}."),Expected_at_least_0_arguments_but_got_1:t(2555,e.DiagnosticCategory.Error,"Expected_at_least_0_arguments_but_got_1_2555","Expected at least {0} arguments, but got {1}."),Expected_0_arguments_but_got_a_minimum_of_1:t(2556,e.DiagnosticCategory.Error,"Expected_0_arguments_but_got_a_minimum_of_1_2556","Expected {0} arguments, but got a minimum of {1}."),Expected_at_least_0_arguments_but_got_a_minimum_of_1:t(2557,e.DiagnosticCategory.Error,"Expected_at_least_0_arguments_but_got_a_minimum_of_1_2557","Expected at least {0} arguments, but got a minimum of {1}."),Expected_0_type_arguments_but_got_1:t(2558,e.DiagnosticCategory.Error,"Expected_0_type_arguments_but_got_1_2558","Expected {0} type arguments, but got {1}."),Type_0_has_no_properties_in_common_with_type_1:t(2559,e.DiagnosticCategory.Error,"Type_0_has_no_properties_in_common_with_type_1_2559","Type '{0}' has no properties in common with type '{1}'."),Value_of_type_0_has_no_properties_in_common_with_type_1_Did_you_mean_to_call_it:t(2560,e.DiagnosticCategory.Error,"Value_of_type_0_has_no_properties_in_common_with_type_1_Did_you_mean_to_call_it_2560","Value of type '{0}' has no properties in common with type '{1}'. Did you mean to call it?"),Object_literal_may_only_specify_known_properties_but_0_does_not_exist_in_type_1_Did_you_mean_to_write_2:t(2561,e.DiagnosticCategory.Error,"Object_literal_may_only_specify_known_properties_but_0_does_not_exist_in_type_1_Did_you_mean_to_writ_2561","Object literal may only specify known properties, but '{0}' does not exist in type '{1}'. Did you mean to write '{2}'?"),Base_class_expressions_cannot_reference_class_type_parameters:t(2562,e.DiagnosticCategory.Error,"Base_class_expressions_cannot_reference_class_type_parameters_2562","Base class expressions cannot reference class type parameters."),The_containing_function_or_module_body_is_too_large_for_control_flow_analysis:t(2563,e.DiagnosticCategory.Error,"The_containing_function_or_module_body_is_too_large_for_control_flow_analysis_2563","The containing function or module body is too large for control flow analysis."),JSX_element_attributes_type_0_may_not_be_a_union_type:t(2600,e.DiagnosticCategory.Error,"JSX_element_attributes_type_0_may_not_be_a_union_type_2600","JSX element attributes type '{0}' may not be a union type."),The_return_type_of_a_JSX_element_constructor_must_return_an_object_type:t(2601,e.DiagnosticCategory.Error,"The_return_type_of_a_JSX_element_constructor_must_return_an_object_type_2601","The return type of a JSX element constructor must return an object type."),JSX_element_implicitly_has_type_any_because_the_global_type_JSX_Element_does_not_exist:t(2602,e.DiagnosticCategory.Error,"JSX_element_implicitly_has_type_any_because_the_global_type_JSX_Element_does_not_exist_2602","JSX element implicitly has type 'any' because the global type 'JSX.Element' does not exist."),Property_0_in_type_1_is_not_assignable_to_type_2:t(2603,e.DiagnosticCategory.Error,"Property_0_in_type_1_is_not_assignable_to_type_2_2603","Property '{0}' in type '{1}' is not assignable to type '{2}'."),JSX_element_type_0_does_not_have_any_construct_or_call_signatures:t(2604,e.DiagnosticCategory.Error,"JSX_element_type_0_does_not_have_any_construct_or_call_signatures_2604","JSX element type '{0}' does not have any construct or call signatures."),JSX_element_type_0_is_not_a_constructor_function_for_JSX_elements:t(2605,e.DiagnosticCategory.Error,"JSX_element_type_0_is_not_a_constructor_function_for_JSX_elements_2605","JSX element type '{0}' is not a constructor function for JSX elements."),Property_0_of_JSX_spread_attribute_is_not_assignable_to_target_property:t(2606,e.DiagnosticCategory.Error,"Property_0_of_JSX_spread_attribute_is_not_assignable_to_target_property_2606","Property '{0}' of JSX spread attribute is not assignable to target property."),JSX_element_class_does_not_support_attributes_because_it_does_not_have_a_0_property:t(2607,e.DiagnosticCategory.Error,"JSX_element_class_does_not_support_attributes_because_it_does_not_have_a_0_property_2607","JSX element class does not support attributes because it does not have a '{0}' property."),The_global_type_JSX_0_may_not_have_more_than_one_property:t(2608,e.DiagnosticCategory.Error,"The_global_type_JSX_0_may_not_have_more_than_one_property_2608","The global type 'JSX.{0}' may not have more than one property."),JSX_spread_child_must_be_an_array_type:t(2609,e.DiagnosticCategory.Error,"JSX_spread_child_must_be_an_array_type_2609","JSX spread child must be an array type."),Cannot_augment_module_0_with_value_exports_because_it_resolves_to_a_non_module_entity:t(2649,e.DiagnosticCategory.Error,"Cannot_augment_module_0_with_value_exports_because_it_resolves_to_a_non_module_entity_2649","Cannot augment module '{0}' with value exports because it resolves to a non-module entity."),A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums:t(2651,e.DiagnosticCategory.Error,"A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_memb_2651","A member initializer in a enum declaration cannot reference members declared after it, including members defined in other enums."),Merged_declaration_0_cannot_include_a_default_export_declaration_Consider_adding_a_separate_export_default_0_declaration_instead:t(2652,e.DiagnosticCategory.Error,"Merged_declaration_0_cannot_include_a_default_export_declaration_Consider_adding_a_separate_export_d_2652","Merged declaration '{0}' cannot include a default export declaration. Consider adding a separate 'export default {0}' declaration instead."),Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1:t(2653,e.DiagnosticCategory.Error,"Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1_2653","Non-abstract class expression does not implement inherited abstract member '{0}' from class '{1}'."),Exported_external_package_typings_file_cannot_contain_tripleslash_references_Please_contact_the_package_author_to_update_the_package_definition:t(2654,e.DiagnosticCategory.Error,"Exported_external_package_typings_file_cannot_contain_tripleslash_references_Please_contact_the_pack_2654","Exported external package typings file cannot contain tripleslash references. Please contact the package author to update the package definition."),Exported_external_package_typings_file_0_is_not_a_module_Please_contact_the_package_author_to_update_the_package_definition:t(2656,e.DiagnosticCategory.Error,"Exported_external_package_typings_file_0_is_not_a_module_Please_contact_the_package_author_to_update_2656","Exported external package typings file '{0}' is not a module. Please contact the package author to update the package definition."),JSX_expressions_must_have_one_parent_element:t(2657,e.DiagnosticCategory.Error,"JSX_expressions_must_have_one_parent_element_2657","JSX expressions must have one parent element."),Type_0_provides_no_match_for_the_signature_1:t(2658,e.DiagnosticCategory.Error,"Type_0_provides_no_match_for_the_signature_1_2658","Type '{0}' provides no match for the signature '{1}'."),super_is_only_allowed_in_members_of_object_literal_expressions_when_option_target_is_ES2015_or_higher:t(2659,e.DiagnosticCategory.Error,"super_is_only_allowed_in_members_of_object_literal_expressions_when_option_target_is_ES2015_or_highe_2659","'super' is only allowed in members of object literal expressions when option 'target' is 'ES2015' or higher."),super_can_only_be_referenced_in_members_of_derived_classes_or_object_literal_expressions:t(2660,e.DiagnosticCategory.Error,"super_can_only_be_referenced_in_members_of_derived_classes_or_object_literal_expressions_2660","'super' can only be referenced in members of derived classes or object literal expressions."),Cannot_export_0_Only_local_declarations_can_be_exported_from_a_module:t(2661,e.DiagnosticCategory.Error,"Cannot_export_0_Only_local_declarations_can_be_exported_from_a_module_2661","Cannot export '{0}'. Only local declarations can be exported from a module."),Cannot_find_name_0_Did_you_mean_the_static_member_1_0:t(2662,e.DiagnosticCategory.Error,"Cannot_find_name_0_Did_you_mean_the_static_member_1_0_2662","Cannot find name '{0}'. Did you mean the static member '{1}.{0}'?"),Cannot_find_name_0_Did_you_mean_the_instance_member_this_0:t(2663,e.DiagnosticCategory.Error,"Cannot_find_name_0_Did_you_mean_the_instance_member_this_0_2663","Cannot find name '{0}'. Did you mean the instance member 'this.{0}'?"),Invalid_module_name_in_augmentation_module_0_cannot_be_found:t(2664,e.DiagnosticCategory.Error,"Invalid_module_name_in_augmentation_module_0_cannot_be_found_2664","Invalid module name in augmentation, module '{0}' cannot be found."),Invalid_module_name_in_augmentation_Module_0_resolves_to_an_untyped_module_at_1_which_cannot_be_augmented:t(2665,e.DiagnosticCategory.Error,"Invalid_module_name_in_augmentation_Module_0_resolves_to_an_untyped_module_at_1_which_cannot_be_augm_2665","Invalid module name in augmentation. Module '{0}' resolves to an untyped module at '{1}', which cannot be augmented."),Exports_and_export_assignments_are_not_permitted_in_module_augmentations:t(2666,e.DiagnosticCategory.Error,"Exports_and_export_assignments_are_not_permitted_in_module_augmentations_2666","Exports and export assignments are not permitted in module augmentations."),Imports_are_not_permitted_in_module_augmentations_Consider_moving_them_to_the_enclosing_external_module:t(2667,e.DiagnosticCategory.Error,"Imports_are_not_permitted_in_module_augmentations_Consider_moving_them_to_the_enclosing_external_mod_2667","Imports are not permitted in module augmentations. Consider moving them to the enclosing external module."),export_modifier_cannot_be_applied_to_ambient_modules_and_module_augmentations_since_they_are_always_visible:t(2668,e.DiagnosticCategory.Error,"export_modifier_cannot_be_applied_to_ambient_modules_and_module_augmentations_since_they_are_always__2668","'export' modifier cannot be applied to ambient modules and module augmentations since they are always visible."),Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_declarations:t(2669,e.DiagnosticCategory.Error,"Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_2669","Augmentations for the global scope can only be directly nested in external modules or ambient module declarations."),Augmentations_for_the_global_scope_should_have_declare_modifier_unless_they_appear_in_already_ambient_context:t(2670,e.DiagnosticCategory.Error,"Augmentations_for_the_global_scope_should_have_declare_modifier_unless_they_appear_in_already_ambien_2670","Augmentations for the global scope should have 'declare' modifier unless they appear in already ambient context."),Cannot_augment_module_0_because_it_resolves_to_a_non_module_entity:t(2671,e.DiagnosticCategory.Error,"Cannot_augment_module_0_because_it_resolves_to_a_non_module_entity_2671","Cannot augment module '{0}' because it resolves to a non-module entity."),Cannot_assign_a_0_constructor_type_to_a_1_constructor_type:t(2672,e.DiagnosticCategory.Error,"Cannot_assign_a_0_constructor_type_to_a_1_constructor_type_2672","Cannot assign a '{0}' constructor type to a '{1}' constructor type."),Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration:t(2673,e.DiagnosticCategory.Error,"Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration_2673","Constructor of class '{0}' is private and only accessible within the class declaration."),Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration:t(2674,e.DiagnosticCategory.Error,"Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration_2674","Constructor of class '{0}' is protected and only accessible within the class declaration."),Cannot_extend_a_class_0_Class_constructor_is_marked_as_private:t(2675,e.DiagnosticCategory.Error,"Cannot_extend_a_class_0_Class_constructor_is_marked_as_private_2675","Cannot extend a class '{0}'. Class constructor is marked as private."),Accessors_must_both_be_abstract_or_non_abstract:t(2676,e.DiagnosticCategory.Error,"Accessors_must_both_be_abstract_or_non_abstract_2676","Accessors must both be abstract or non-abstract."),A_type_predicate_s_type_must_be_assignable_to_its_parameter_s_type:t(2677,e.DiagnosticCategory.Error,"A_type_predicate_s_type_must_be_assignable_to_its_parameter_s_type_2677","A type predicate's type must be assignable to its parameter's type."),Type_0_is_not_comparable_to_type_1:t(2678,e.DiagnosticCategory.Error,"Type_0_is_not_comparable_to_type_1_2678","Type '{0}' is not comparable to type '{1}'."),A_function_that_is_called_with_the_new_keyword_cannot_have_a_this_type_that_is_void:t(2679,e.DiagnosticCategory.Error,"A_function_that_is_called_with_the_new_keyword_cannot_have_a_this_type_that_is_void_2679","A function that is called with the 'new' keyword cannot have a 'this' type that is 'void'."),A_0_parameter_must_be_the_first_parameter:t(2680,e.DiagnosticCategory.Error,"A_0_parameter_must_be_the_first_parameter_2680","A '{0}' parameter must be the first parameter."),A_constructor_cannot_have_a_this_parameter:t(2681,e.DiagnosticCategory.Error,"A_constructor_cannot_have_a_this_parameter_2681","A constructor cannot have a 'this' parameter."),get_and_set_accessor_must_have_the_same_this_type:t(2682,e.DiagnosticCategory.Error,"get_and_set_accessor_must_have_the_same_this_type_2682","'get' and 'set' accessor must have the same 'this' type."),this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation:t(2683,e.DiagnosticCategory.Error,"this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_2683","'this' implicitly has type 'any' because it does not have a type annotation."),The_this_context_of_type_0_is_not_assignable_to_method_s_this_of_type_1:t(2684,e.DiagnosticCategory.Error,"The_this_context_of_type_0_is_not_assignable_to_method_s_this_of_type_1_2684","The 'this' context of type '{0}' is not assignable to method's 'this' of type '{1}'."),The_this_types_of_each_signature_are_incompatible:t(2685,e.DiagnosticCategory.Error,"The_this_types_of_each_signature_are_incompatible_2685","The 'this' types of each signature are incompatible."),_0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead:t(2686,e.DiagnosticCategory.Error,"_0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead_2686","'{0}' refers to a UMD global, but the current file is a module. Consider adding an import instead."),All_declarations_of_0_must_have_identical_modifiers:t(2687,e.DiagnosticCategory.Error,"All_declarations_of_0_must_have_identical_modifiers_2687","All declarations of '{0}' must have identical modifiers."),Cannot_find_type_definition_file_for_0:t(2688,e.DiagnosticCategory.Error,"Cannot_find_type_definition_file_for_0_2688","Cannot find type definition file for '{0}'."),Cannot_extend_an_interface_0_Did_you_mean_implements:t(2689,e.DiagnosticCategory.Error,"Cannot_extend_an_interface_0_Did_you_mean_implements_2689","Cannot extend an interface '{0}'. Did you mean 'implements'?"),An_import_path_cannot_end_with_a_0_extension_Consider_importing_1_instead:t(2691,e.DiagnosticCategory.Error,"An_import_path_cannot_end_with_a_0_extension_Consider_importing_1_instead_2691","An import path cannot end with a '{0}' extension. Consider importing '{1}' instead."),_0_is_a_primitive_but_1_is_a_wrapper_object_Prefer_using_0_when_possible:t(2692,e.DiagnosticCategory.Error,"_0_is_a_primitive_but_1_is_a_wrapper_object_Prefer_using_0_when_possible_2692","'{0}' is a primitive, but '{1}' is a wrapper object. Prefer using '{0}' when possible."),_0_only_refers_to_a_type_but_is_being_used_as_a_value_here:t(2693,e.DiagnosticCategory.Error,"_0_only_refers_to_a_type_but_is_being_used_as_a_value_here_2693","'{0}' only refers to a type, but is being used as a value here."),Namespace_0_has_no_exported_member_1:t(2694,e.DiagnosticCategory.Error,"Namespace_0_has_no_exported_member_1_2694","Namespace '{0}' has no exported member '{1}'."),Left_side_of_comma_operator_is_unused_and_has_no_side_effects:t(2695,e.DiagnosticCategory.Error,"Left_side_of_comma_operator_is_unused_and_has_no_side_effects_2695","Left side of comma operator is unused and has no side effects."),The_Object_type_is_assignable_to_very_few_other_types_Did_you_mean_to_use_the_any_type_instead:t(2696,e.DiagnosticCategory.Error,"The_Object_type_is_assignable_to_very_few_other_types_Did_you_mean_to_use_the_any_type_instead_2696","The 'Object' type is assignable to very few other types. Did you mean to use the 'any' type instead?"),An_async_function_or_method_must_return_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option:t(2697,e.DiagnosticCategory.Error,"An_async_function_or_method_must_return_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_in_2697","An async function or method must return a 'Promise'. Make sure you have a declaration for 'Promise' or include 'ES2015' in your `--lib` option."),Spread_types_may_only_be_created_from_object_types:t(2698,e.DiagnosticCategory.Error,"Spread_types_may_only_be_created_from_object_types_2698","Spread types may only be created from object types."),Static_property_0_conflicts_with_built_in_property_Function_0_of_constructor_function_1:t(2699,e.DiagnosticCategory.Error,"Static_property_0_conflicts_with_built_in_property_Function_0_of_constructor_function_1_2699","Static property '{0}' conflicts with built-in property 'Function.{0}' of constructor function '{1}'."),Rest_types_may_only_be_created_from_object_types:t(2700,e.DiagnosticCategory.Error,"Rest_types_may_only_be_created_from_object_types_2700","Rest types may only be created from object types."),The_target_of_an_object_rest_assignment_must_be_a_variable_or_a_property_access:t(2701,e.DiagnosticCategory.Error,"The_target_of_an_object_rest_assignment_must_be_a_variable_or_a_property_access_2701","The target of an object rest assignment must be a variable or a property access."),_0_only_refers_to_a_type_but_is_being_used_as_a_namespace_here:t(2702,e.DiagnosticCategory.Error,"_0_only_refers_to_a_type_but_is_being_used_as_a_namespace_here_2702","'{0}' only refers to a type, but is being used as a namespace here."),The_operand_of_a_delete_operator_must_be_a_property_reference:t(2703,e.DiagnosticCategory.Error,"The_operand_of_a_delete_operator_must_be_a_property_reference_2703","The operand of a delete operator must be a property reference."),The_operand_of_a_delete_operator_cannot_be_a_read_only_property:t(2704,e.DiagnosticCategory.Error,"The_operand_of_a_delete_operator_cannot_be_a_read_only_property_2704","The operand of a delete operator cannot be a read-only property."),An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option:t(2705,e.DiagnosticCategory.Error,"An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_de_2705","An async function or method in ES5/ES3 requires the 'Promise' constructor.  Make sure you have a declaration for the 'Promise' constructor or include 'ES2015' in your `--lib` option."),Required_type_parameters_may_not_follow_optional_type_parameters:t(2706,e.DiagnosticCategory.Error,"Required_type_parameters_may_not_follow_optional_type_parameters_2706","Required type parameters may not follow optional type parameters."),Generic_type_0_requires_between_1_and_2_type_arguments:t(2707,e.DiagnosticCategory.Error,"Generic_type_0_requires_between_1_and_2_type_arguments_2707","Generic type '{0}' requires between {1} and {2} type arguments."),Cannot_use_namespace_0_as_a_value:t(2708,e.DiagnosticCategory.Error,"Cannot_use_namespace_0_as_a_value_2708","Cannot use namespace '{0}' as a value."),Cannot_use_namespace_0_as_a_type:t(2709,e.DiagnosticCategory.Error,"Cannot_use_namespace_0_as_a_type_2709","Cannot use namespace '{0}' as a type."),_0_are_specified_twice_The_attribute_named_0_will_be_overwritten:t(2710,e.DiagnosticCategory.Error,"_0_are_specified_twice_The_attribute_named_0_will_be_overwritten_2710","'{0}' are specified twice. The attribute named '{0}' will be overwritten."),A_dynamic_import_call_returns_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option:t(2711,e.DiagnosticCategory.Error,"A_dynamic_import_call_returns_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES20_2711","A dynamic import call returns a 'Promise'. Make sure you have a declaration for 'Promise' or include 'ES2015' in your `--lib` option."),A_dynamic_import_call_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option:t(2712,e.DiagnosticCategory.Error,"A_dynamic_import_call_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declarat_2712","A dynamic import call in ES5/ES3 requires the 'Promise' constructor.  Make sure you have a declaration for the 'Promise' constructor or include 'ES2015' in your `--lib` option."),Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_property_1_in_0_with_0_1:t(2713,e.DiagnosticCategory.Error,"Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_p_2713","Cannot access '{0}.{1}' because '{0}' is a type, but not a namespace. Did you mean to retrieve the type of the property '{1}' in '{0}' with '{0}[\"{1}\"]'?"),The_expression_of_an_export_assignment_must_be_an_identifier_or_qualified_name_in_an_ambient_context:t(2714,e.DiagnosticCategory.Error,"The_expression_of_an_export_assignment_must_be_an_identifier_or_qualified_name_in_an_ambient_context_2714","The expression of an export assignment must be an identifier or qualified name in an ambient context."),Type_parameter_0_has_a_circular_default:t(2716,e.DiagnosticCategory.Error,"Type_parameter_0_has_a_circular_default_2716","Type parameter '{0}' has a circular default."),Import_declaration_0_is_using_private_name_1:t(4e3,e.DiagnosticCategory.Error,"Import_declaration_0_is_using_private_name_1_4000","Import declaration '{0}' is using private name '{1}'."),Type_parameter_0_of_exported_class_has_or_is_using_private_name_1:t(4002,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_class_has_or_is_using_private_name_1_4002","Type parameter '{0}' of exported class has or is using private name '{1}'."),Type_parameter_0_of_exported_interface_has_or_is_using_private_name_1:t(4004,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_interface_has_or_is_using_private_name_1_4004","Type parameter '{0}' of exported interface has or is using private name '{1}'."),Type_parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1:t(4006,e.DiagnosticCategory.Error,"Type_parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1_4006","Type parameter '{0}' of constructor signature from exported interface has or is using private name '{1}'."),Type_parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1:t(4008,e.DiagnosticCategory.Error,"Type_parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1_4008","Type parameter '{0}' of call signature from exported interface has or is using private name '{1}'."),Type_parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:t(4010,e.DiagnosticCategory.Error,"Type_parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1_4010","Type parameter '{0}' of public static method from exported class has or is using private name '{1}'."),Type_parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:t(4012,e.DiagnosticCategory.Error,"Type_parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1_4012","Type parameter '{0}' of public method from exported class has or is using private name '{1}'."),Type_parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1:t(4014,e.DiagnosticCategory.Error,"Type_parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1_4014","Type parameter '{0}' of method from exported interface has or is using private name '{1}'."),Type_parameter_0_of_exported_function_has_or_is_using_private_name_1:t(4016,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_function_has_or_is_using_private_name_1_4016","Type parameter '{0}' of exported function has or is using private name '{1}'."),Implements_clause_of_exported_class_0_has_or_is_using_private_name_1:t(4019,e.DiagnosticCategory.Error,"Implements_clause_of_exported_class_0_has_or_is_using_private_name_1_4019","Implements clause of exported class '{0}' has or is using private name '{1}'."),extends_clause_of_exported_class_0_has_or_is_using_private_name_1:t(4020,e.DiagnosticCategory.Error,"extends_clause_of_exported_class_0_has_or_is_using_private_name_1_4020","'extends' clause of exported class '{0}' has or is using private name '{1}'."),extends_clause_of_exported_interface_0_has_or_is_using_private_name_1:t(4022,e.DiagnosticCategory.Error,"extends_clause_of_exported_interface_0_has_or_is_using_private_name_1_4022","'extends' clause of exported interface '{0}' has or is using private name '{1}'."),Exported_variable_0_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4023,e.DiagnosticCategory.Error,"Exported_variable_0_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named_4023","Exported variable '{0}' has or is using name '{1}' from external module {2} but cannot be named."),Exported_variable_0_has_or_is_using_name_1_from_private_module_2:t(4024,e.DiagnosticCategory.Error,"Exported_variable_0_has_or_is_using_name_1_from_private_module_2_4024","Exported variable '{0}' has or is using name '{1}' from private module '{2}'."),Exported_variable_0_has_or_is_using_private_name_1:t(4025,e.DiagnosticCategory.Error,"Exported_variable_0_has_or_is_using_private_name_1_4025","Exported variable '{0}' has or is using private name '{1}'."),Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4026,e.DiagnosticCategory.Error,"Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot__4026","Public static property '{0}' of exported class has or is using name '{1}' from external module {2} but cannot be named."),Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:t(4027,e.DiagnosticCategory.Error,"Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2_4027","Public static property '{0}' of exported class has or is using name '{1}' from private module '{2}'."),Public_static_property_0_of_exported_class_has_or_is_using_private_name_1:t(4028,e.DiagnosticCategory.Error,"Public_static_property_0_of_exported_class_has_or_is_using_private_name_1_4028","Public static property '{0}' of exported class has or is using private name '{1}'."),Public_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4029,e.DiagnosticCategory.Error,"Public_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_name_4029","Public property '{0}' of exported class has or is using name '{1}' from external module {2} but cannot be named."),Public_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:t(4030,e.DiagnosticCategory.Error,"Public_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2_4030","Public property '{0}' of exported class has or is using name '{1}' from private module '{2}'."),Public_property_0_of_exported_class_has_or_is_using_private_name_1:t(4031,e.DiagnosticCategory.Error,"Public_property_0_of_exported_class_has_or_is_using_private_name_1_4031","Public property '{0}' of exported class has or is using private name '{1}'."),Property_0_of_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4032,e.DiagnosticCategory.Error,"Property_0_of_exported_interface_has_or_is_using_name_1_from_private_module_2_4032","Property '{0}' of exported interface has or is using name '{1}' from private module '{2}'."),Property_0_of_exported_interface_has_or_is_using_private_name_1:t(4033,e.DiagnosticCategory.Error,"Property_0_of_exported_interface_has_or_is_using_private_name_1_4033","Property '{0}' of exported interface has or is using private name '{1}'."),Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4034,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_name_1_from_private_4034","Parameter '{0}' of public static property setter from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_name_1:t(4035,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_name_1_4035","Parameter '{0}' of public static property setter from exported class has or is using private name '{1}'."),Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4036,e.DiagnosticCategory.Error,"Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_4036","Parameter '{0}' of public property setter from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_name_1:t(4037,e.DiagnosticCategory.Error,"Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_name_1_4037","Parameter '{0}' of public property setter from exported class has or is using private name '{1}'."),Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4038,e.DiagnosticCategory.Error,"Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_externa_4038","Return type of public static property getter from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4039,e.DiagnosticCategory.Error,"Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_private_4039","Return type of public static property getter from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_name_0:t(4040,e.DiagnosticCategory.Error,"Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_name_0_4040","Return type of public static property getter from exported class has or is using private name '{0}'."),Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4041,e.DiagnosticCategory.Error,"Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_external_modul_4041","Return type of public property getter from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4042,e.DiagnosticCategory.Error,"Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_4042","Return type of public property getter from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_name_0:t(4043,e.DiagnosticCategory.Error,"Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_name_0_4043","Return type of public property getter from exported class has or is using private name '{0}'."),Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4044,e.DiagnosticCategory.Error,"Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_name_0_from_private_mod_4044","Return type of constructor signature from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_0:t(4045,e.DiagnosticCategory.Error,"Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_0_4045","Return type of constructor signature from exported interface has or is using private name '{0}'."),Return_type_of_call_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4046,e.DiagnosticCategory.Error,"Return_type_of_call_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1_4046","Return type of call signature from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_name_0:t(4047,e.DiagnosticCategory.Error,"Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_name_0_4047","Return type of call signature from exported interface has or is using private name '{0}'."),Return_type_of_index_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4048,e.DiagnosticCategory.Error,"Return_type_of_index_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1_4048","Return type of index signature from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_name_0:t(4049,e.DiagnosticCategory.Error,"Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_name_0_4049","Return type of index signature from exported interface has or is using private name '{0}'."),Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4050,e.DiagnosticCategory.Error,"Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_external_module__4050","Return type of public static method from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4051,e.DiagnosticCategory.Error,"Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_private_module_1_4051","Return type of public static method from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_name_0:t(4052,e.DiagnosticCategory.Error,"Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_name_0_4052","Return type of public static method from exported class has or is using private name '{0}'."),Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4053,e.DiagnosticCategory.Error,"Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_c_4053","Return type of public method from exported class has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:t(4054,e.DiagnosticCategory.Error,"Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_private_module_1_4054","Return type of public method from exported class has or is using name '{0}' from private module '{1}'."),Return_type_of_public_method_from_exported_class_has_or_is_using_private_name_0:t(4055,e.DiagnosticCategory.Error,"Return_type_of_public_method_from_exported_class_has_or_is_using_private_name_0_4055","Return type of public method from exported class has or is using private name '{0}'."),Return_type_of_method_from_exported_interface_has_or_is_using_name_0_from_private_module_1:t(4056,e.DiagnosticCategory.Error,"Return_type_of_method_from_exported_interface_has_or_is_using_name_0_from_private_module_1_4056","Return type of method from exported interface has or is using name '{0}' from private module '{1}'."),Return_type_of_method_from_exported_interface_has_or_is_using_private_name_0:t(4057,e.DiagnosticCategory.Error,"Return_type_of_method_from_exported_interface_has_or_is_using_private_name_0_4057","Return type of method from exported interface has or is using private name '{0}'."),Return_type_of_exported_function_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:t(4058,e.DiagnosticCategory.Error,"Return_type_of_exported_function_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named_4058","Return type of exported function has or is using name '{0}' from external module {1} but cannot be named."),Return_type_of_exported_function_has_or_is_using_name_0_from_private_module_1:t(4059,e.DiagnosticCategory.Error,"Return_type_of_exported_function_has_or_is_using_name_0_from_private_module_1_4059","Return type of exported function has or is using name '{0}' from private module '{1}'."),Return_type_of_exported_function_has_or_is_using_private_name_0:t(4060,e.DiagnosticCategory.Error,"Return_type_of_exported_function_has_or_is_using_private_name_0_4060","Return type of exported function has or is using private name '{0}'."),Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4061,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_can_4061","Parameter '{0}' of constructor from exported class has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4062,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_private_module_2_4062","Parameter '{0}' of constructor from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_name_1:t(4063,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_name_1_4063","Parameter '{0}' of constructor from exported class has or is using private name '{1}'."),Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4064,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_name_1_from_private_mod_4064","Parameter '{0}' of constructor signature from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1:t(4065,e.DiagnosticCategory.Error,"Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1_4065","Parameter '{0}' of constructor signature from exported interface has or is using private name '{1}'."),Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4066,e.DiagnosticCategory.Error,"Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2_4066","Parameter '{0}' of call signature from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1:t(4067,e.DiagnosticCategory.Error,"Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1_4067","Parameter '{0}' of call signature from exported interface has or is using private name '{1}'."),Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4068,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_external_module__4068","Parameter '{0}' of public static method from exported class has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4069,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_private_module_2_4069","Parameter '{0}' of public static method from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:t(4070,e.DiagnosticCategory.Error,"Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1_4070","Parameter '{0}' of public static method from exported class has or is using private name '{1}'."),Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4071,e.DiagnosticCategory.Error,"Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_c_4071","Parameter '{0}' of public method from exported class has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:t(4072,e.DiagnosticCategory.Error,"Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_private_module_2_4072","Parameter '{0}' of public method from exported class has or is using name '{1}' from private module '{2}'."),Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:t(4073,e.DiagnosticCategory.Error,"Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1_4073","Parameter '{0}' of public method from exported class has or is using private name '{1}'."),Parameter_0_of_method_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4074,e.DiagnosticCategory.Error,"Parameter_0_of_method_from_exported_interface_has_or_is_using_name_1_from_private_module_2_4074","Parameter '{0}' of method from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1:t(4075,e.DiagnosticCategory.Error,"Parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1_4075","Parameter '{0}' of method from exported interface has or is using private name '{1}'."),Parameter_0_of_exported_function_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:t(4076,e.DiagnosticCategory.Error,"Parameter_0_of_exported_function_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named_4076","Parameter '{0}' of exported function has or is using name '{1}' from external module {2} but cannot be named."),Parameter_0_of_exported_function_has_or_is_using_name_1_from_private_module_2:t(4077,e.DiagnosticCategory.Error,"Parameter_0_of_exported_function_has_or_is_using_name_1_from_private_module_2_4077","Parameter '{0}' of exported function has or is using name '{1}' from private module '{2}'."),Parameter_0_of_exported_function_has_or_is_using_private_name_1:t(4078,e.DiagnosticCategory.Error,"Parameter_0_of_exported_function_has_or_is_using_private_name_1_4078","Parameter '{0}' of exported function has or is using private name '{1}'."),Exported_type_alias_0_has_or_is_using_private_name_1:t(4081,e.DiagnosticCategory.Error,"Exported_type_alias_0_has_or_is_using_private_name_1_4081","Exported type alias '{0}' has or is using private name '{1}'."),Default_export_of_the_module_has_or_is_using_private_name_0:t(4082,e.DiagnosticCategory.Error,"Default_export_of_the_module_has_or_is_using_private_name_0_4082","Default export of the module has or is using private name '{0}'."),Type_parameter_0_of_exported_type_alias_has_or_is_using_private_name_1:t(4083,e.DiagnosticCategory.Error,"Type_parameter_0_of_exported_type_alias_has_or_is_using_private_name_1_4083","Type parameter '{0}' of exported type alias has or is using private name '{1}'."),Conflicting_definitions_for_0_found_at_1_and_2_Consider_installing_a_specific_version_of_this_library_to_resolve_the_conflict:t(4090,e.DiagnosticCategory.Message,"Conflicting_definitions_for_0_found_at_1_and_2_Consider_installing_a_specific_version_of_this_librar_4090","Conflicting definitions for '{0}' found at '{1}' and '{2}'. Consider installing a specific version of this library to resolve the conflict."),Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:t(4091,e.DiagnosticCategory.Error,"Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2_4091","Parameter '{0}' of index signature from exported interface has or is using name '{1}' from private module '{2}'."),Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_private_name_1:t(4092,e.DiagnosticCategory.Error,"Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_private_name_1_4092","Parameter '{0}' of index signature from exported interface has or is using private name '{1}'."),Property_0_of_exported_class_expression_may_not_be_private_or_protected:t(4094,e.DiagnosticCategory.Error,"Property_0_of_exported_class_expression_may_not_be_private_or_protected_4094","Property '{0}' of exported class expression may not be private or protected."),The_current_host_does_not_support_the_0_option:t(5001,e.DiagnosticCategory.Error,"The_current_host_does_not_support_the_0_option_5001","The current host does not support the '{0}' option."),Cannot_find_the_common_subdirectory_path_for_the_input_files:t(5009,e.DiagnosticCategory.Error,"Cannot_find_the_common_subdirectory_path_for_the_input_files_5009","Cannot find the common subdirectory path for the input files."),File_specification_cannot_end_in_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0:t(5010,e.DiagnosticCategory.Error,"File_specification_cannot_end_in_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0_5010","File specification cannot end in a recursive directory wildcard ('**'): '{0}'."),File_specification_cannot_contain_multiple_recursive_directory_wildcards_Asterisk_Asterisk_Colon_0:t(5011,e.DiagnosticCategory.Error,"File_specification_cannot_contain_multiple_recursive_directory_wildcards_Asterisk_Asterisk_Colon_0_5011","File specification cannot contain multiple recursive directory wildcards ('**'): '{0}'."),Cannot_read_file_0_Colon_1:t(5012,e.DiagnosticCategory.Error,"Cannot_read_file_0_Colon_1_5012","Cannot read file '{0}': {1}."),Failed_to_parse_file_0_Colon_1:t(5014,e.DiagnosticCategory.Error,"Failed_to_parse_file_0_Colon_1_5014","Failed to parse file '{0}': {1}."),Unknown_compiler_option_0:t(5023,e.DiagnosticCategory.Error,"Unknown_compiler_option_0_5023","Unknown compiler option '{0}'."),Compiler_option_0_requires_a_value_of_type_1:t(5024,e.DiagnosticCategory.Error,"Compiler_option_0_requires_a_value_of_type_1_5024","Compiler option '{0}' requires a value of type {1}."),Could_not_write_file_0_Colon_1:t(5033,e.DiagnosticCategory.Error,"Could_not_write_file_0_Colon_1_5033","Could not write file '{0}': {1}."),Option_project_cannot_be_mixed_with_source_files_on_a_command_line:t(5042,e.DiagnosticCategory.Error,"Option_project_cannot_be_mixed_with_source_files_on_a_command_line_5042","Option 'project' cannot be mixed with source files on a command line."),Option_isolatedModules_can_only_be_used_when_either_option_module_is_provided_or_option_target_is_ES2015_or_higher:t(5047,e.DiagnosticCategory.Error,"Option_isolatedModules_can_only_be_used_when_either_option_module_is_provided_or_option_target_is_ES_5047","Option 'isolatedModules' can only be used when either option '--module' is provided or option 'target' is 'ES2015' or higher."),Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided:t(5051,e.DiagnosticCategory.Error,"Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided_5051","Option '{0} can only be used when either option '--inlineSourceMap' or option '--sourceMap' is provided."),Option_0_cannot_be_specified_without_specifying_option_1:t(5052,e.DiagnosticCategory.Error,"Option_0_cannot_be_specified_without_specifying_option_1_5052","Option '{0}' cannot be specified without specifying option '{1}'."),Option_0_cannot_be_specified_with_option_1:t(5053,e.DiagnosticCategory.Error,"Option_0_cannot_be_specified_with_option_1_5053","Option '{0}' cannot be specified with option '{1}'."),A_tsconfig_json_file_is_already_defined_at_Colon_0:t(5054,e.DiagnosticCategory.Error,"A_tsconfig_json_file_is_already_defined_at_Colon_0_5054","A 'tsconfig.json' file is already defined at: '{0}'."),Cannot_write_file_0_because_it_would_overwrite_input_file:t(5055,e.DiagnosticCategory.Error,"Cannot_write_file_0_because_it_would_overwrite_input_file_5055","Cannot write file '{0}' because it would overwrite input file."),Cannot_write_file_0_because_it_would_be_overwritten_by_multiple_input_files:t(5056,e.DiagnosticCategory.Error,"Cannot_write_file_0_because_it_would_be_overwritten_by_multiple_input_files_5056","Cannot write file '{0}' because it would be overwritten by multiple input files."),Cannot_find_a_tsconfig_json_file_at_the_specified_directory_Colon_0:t(5057,e.DiagnosticCategory.Error,"Cannot_find_a_tsconfig_json_file_at_the_specified_directory_Colon_0_5057","Cannot find a tsconfig.json file at the specified directory: '{0}'."),The_specified_path_does_not_exist_Colon_0:t(5058,e.DiagnosticCategory.Error,"The_specified_path_does_not_exist_Colon_0_5058","The specified path does not exist: '{0}'."),Invalid_value_for_reactNamespace_0_is_not_a_valid_identifier:t(5059,e.DiagnosticCategory.Error,"Invalid_value_for_reactNamespace_0_is_not_a_valid_identifier_5059","Invalid value for '--reactNamespace'. '{0}' is not a valid identifier."),Option_paths_cannot_be_used_without_specifying_baseUrl_option:t(5060,e.DiagnosticCategory.Error,"Option_paths_cannot_be_used_without_specifying_baseUrl_option_5060","Option 'paths' cannot be used without specifying '--baseUrl' option."),Pattern_0_can_have_at_most_one_Asterisk_character:t(5061,e.DiagnosticCategory.Error,"Pattern_0_can_have_at_most_one_Asterisk_character_5061","Pattern '{0}' can have at most one '*' character."),Substitution_0_in_pattern_1_in_can_have_at_most_one_Asterisk_character:t(5062,e.DiagnosticCategory.Error,"Substitution_0_in_pattern_1_in_can_have_at_most_one_Asterisk_character_5062","Substitution '{0}' in pattern '{1}' in can have at most one '*' character."),Substitutions_for_pattern_0_should_be_an_array:t(5063,e.DiagnosticCategory.Error,"Substitutions_for_pattern_0_should_be_an_array_5063","Substitutions for pattern '{0}' should be an array."),Substitution_0_for_pattern_1_has_incorrect_type_expected_string_got_2:t(5064,e.DiagnosticCategory.Error,"Substitution_0_for_pattern_1_has_incorrect_type_expected_string_got_2_5064","Substitution '{0}' for pattern '{1}' has incorrect type, expected 'string', got '{2}'."),File_specification_cannot_contain_a_parent_directory_that_appears_after_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0:t(5065,e.DiagnosticCategory.Error,"File_specification_cannot_contain_a_parent_directory_that_appears_after_a_recursive_directory_wildca_5065","File specification cannot contain a parent directory ('..') that appears after a recursive directory wildcard ('**'): '{0}'."),Substitutions_for_pattern_0_shouldn_t_be_an_empty_array:t(5066,e.DiagnosticCategory.Error,"Substitutions_for_pattern_0_shouldn_t_be_an_empty_array_5066","Substitutions for pattern '{0}' shouldn't be an empty array."),Invalid_value_for_jsxFactory_0_is_not_a_valid_identifier_or_qualified_name:t(5067,e.DiagnosticCategory.Error,"Invalid_value_for_jsxFactory_0_is_not_a_valid_identifier_or_qualified_name_5067","Invalid value for 'jsxFactory'. '{0}' is not a valid identifier or qualified-name."),Concatenate_and_emit_output_to_single_file:t(6001,e.DiagnosticCategory.Message,"Concatenate_and_emit_output_to_single_file_6001","Concatenate and emit output to single file."),Generates_corresponding_d_ts_file:t(6002,e.DiagnosticCategory.Message,"Generates_corresponding_d_ts_file_6002","Generates corresponding '.d.ts' file."),Specify_the_location_where_debugger_should_locate_map_files_instead_of_generated_locations:t(6003,e.DiagnosticCategory.Message,"Specify_the_location_where_debugger_should_locate_map_files_instead_of_generated_locations_6003","Specify the location where debugger should locate map files instead of generated locations."),Specify_the_location_where_debugger_should_locate_TypeScript_files_instead_of_source_locations:t(6004,e.DiagnosticCategory.Message,"Specify_the_location_where_debugger_should_locate_TypeScript_files_instead_of_source_locations_6004","Specify the location where debugger should locate TypeScript files instead of source locations."),Watch_input_files:t(6005,e.DiagnosticCategory.Message,"Watch_input_files_6005","Watch input files."),Redirect_output_structure_to_the_directory:t(6006,e.DiagnosticCategory.Message,"Redirect_output_structure_to_the_directory_6006","Redirect output structure to the directory."),Do_not_erase_const_enum_declarations_in_generated_code:t(6007,e.DiagnosticCategory.Message,"Do_not_erase_const_enum_declarations_in_generated_code_6007","Do not erase const enum declarations in generated code."),Do_not_emit_outputs_if_any_errors_were_reported:t(6008,e.DiagnosticCategory.Message,"Do_not_emit_outputs_if_any_errors_were_reported_6008","Do not emit outputs if any errors were reported."),Do_not_emit_comments_to_output:t(6009,e.DiagnosticCategory.Message,"Do_not_emit_comments_to_output_6009","Do not emit comments to output."),Do_not_emit_outputs:t(6010,e.DiagnosticCategory.Message,"Do_not_emit_outputs_6010","Do not emit outputs."),Allow_default_imports_from_modules_with_no_default_export_This_does_not_affect_code_emit_just_typechecking:t(6011,e.DiagnosticCategory.Message,"Allow_default_imports_from_modules_with_no_default_export_This_does_not_affect_code_emit_just_typech_6011","Allow default imports from modules with no default export. This does not affect code emit, just typechecking."),Skip_type_checking_of_declaration_files:t(6012,e.DiagnosticCategory.Message,"Skip_type_checking_of_declaration_files_6012","Skip type checking of declaration files."),Do_not_resolve_the_real_path_of_symlinks:t(6013,e.DiagnosticCategory.Message,"Do_not_resolve_the_real_path_of_symlinks_6013","Do not resolve the real path of symlinks."),Specify_ECMAScript_target_version_Colon_ES3_default_ES5_ES2015_ES2016_ES2017_or_ESNEXT:t(6015,e.DiagnosticCategory.Message,"Specify_ECMAScript_target_version_Colon_ES3_default_ES5_ES2015_ES2016_ES2017_or_ESNEXT_6015","Specify ECMAScript target version: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017', or 'ESNEXT'."),Specify_module_code_generation_Colon_none_commonjs_amd_system_umd_es2015_or_ESNext:t(6016,e.DiagnosticCategory.Message,"Specify_module_code_generation_Colon_none_commonjs_amd_system_umd_es2015_or_ESNext_6016","Specify module code generation: 'none', 'commonjs', 'amd', 'system', 'umd', 'es2015', or 'ESNext'."),Print_this_message:t(6017,e.DiagnosticCategory.Message,"Print_this_message_6017","Print this message."),Print_the_compiler_s_version:t(6019,e.DiagnosticCategory.Message,"Print_the_compiler_s_version_6019","Print the compiler's version."),Compile_the_project_given_the_path_to_its_configuration_file_or_to_a_folder_with_a_tsconfig_json:t(6020,e.DiagnosticCategory.Message,"Compile_the_project_given_the_path_to_its_configuration_file_or_to_a_folder_with_a_tsconfig_json_6020","Compile the project given the path to its configuration file, or to a folder with a 'tsconfig.json'."),Syntax_Colon_0:t(6023,e.DiagnosticCategory.Message,"Syntax_Colon_0_6023","Syntax: {0}"),options:t(6024,e.DiagnosticCategory.Message,"options_6024","options"),file:t(6025,e.DiagnosticCategory.Message,"file_6025","file"),Examples_Colon_0:t(6026,e.DiagnosticCategory.Message,"Examples_Colon_0_6026","Examples: {0}"),Options_Colon:t(6027,e.DiagnosticCategory.Message,"Options_Colon_6027","Options:"),Version_0:t(6029,e.DiagnosticCategory.Message,"Version_0_6029","Version {0}"),Insert_command_line_options_and_files_from_a_file:t(6030,e.DiagnosticCategory.Message,"Insert_command_line_options_and_files_from_a_file_6030","Insert command line options and files from a file."),File_change_detected_Starting_incremental_compilation:t(6032,e.DiagnosticCategory.Message,"File_change_detected_Starting_incremental_compilation_6032","File change detected. Starting incremental compilation..."),KIND:t(6034,e.DiagnosticCategory.Message,"KIND_6034","KIND"),FILE:t(6035,e.DiagnosticCategory.Message,"FILE_6035","FILE"),VERSION:t(6036,e.DiagnosticCategory.Message,"VERSION_6036","VERSION"),LOCATION:t(6037,e.DiagnosticCategory.Message,"LOCATION_6037","LOCATION"),DIRECTORY:t(6038,e.DiagnosticCategory.Message,"DIRECTORY_6038","DIRECTORY"),STRATEGY:t(6039,e.DiagnosticCategory.Message,"STRATEGY_6039","STRATEGY"),FILE_OR_DIRECTORY:t(6040,e.DiagnosticCategory.Message,"FILE_OR_DIRECTORY_6040","FILE OR DIRECTORY"),Compilation_complete_Watching_for_file_changes:t(6042,e.DiagnosticCategory.Message,"Compilation_complete_Watching_for_file_changes_6042","Compilation complete. Watching for file changes."),Generates_corresponding_map_file:t(6043,e.DiagnosticCategory.Message,"Generates_corresponding_map_file_6043","Generates corresponding '.map' file."),Compiler_option_0_expects_an_argument:t(6044,e.DiagnosticCategory.Error,"Compiler_option_0_expects_an_argument_6044","Compiler option '{0}' expects an argument."),Unterminated_quoted_string_in_response_file_0:t(6045,e.DiagnosticCategory.Error,"Unterminated_quoted_string_in_response_file_0_6045","Unterminated quoted string in response file '{0}'."),Argument_for_0_option_must_be_Colon_1:t(6046,e.DiagnosticCategory.Error,"Argument_for_0_option_must_be_Colon_1_6046","Argument for '{0}' option must be: {1}."),Locale_must_be_of_the_form_language_or_language_territory_For_example_0_or_1:t(6048,e.DiagnosticCategory.Error,"Locale_must_be_of_the_form_language_or_language_territory_For_example_0_or_1_6048","Locale must be of the form <language> or <language>-<territory>. For example '{0}' or '{1}'."),Unsupported_locale_0:t(6049,e.DiagnosticCategory.Error,"Unsupported_locale_0_6049","Unsupported locale '{0}'."),Unable_to_open_file_0:t(6050,e.DiagnosticCategory.Error,"Unable_to_open_file_0_6050","Unable to open file '{0}'."),Corrupted_locale_file_0:t(6051,e.DiagnosticCategory.Error,"Corrupted_locale_file_0_6051","Corrupted locale file {0}."),Raise_error_on_expressions_and_declarations_with_an_implied_any_type:t(6052,e.DiagnosticCategory.Message,"Raise_error_on_expressions_and_declarations_with_an_implied_any_type_6052","Raise error on expressions and declarations with an implied 'any' type."),File_0_not_found:t(6053,e.DiagnosticCategory.Error,"File_0_not_found_6053","File '{0}' not found."),File_0_has_unsupported_extension_The_only_supported_extensions_are_1:t(6054,e.DiagnosticCategory.Error,"File_0_has_unsupported_extension_The_only_supported_extensions_are_1_6054","File '{0}' has unsupported extension. The only supported extensions are {1}."),Suppress_noImplicitAny_errors_for_indexing_objects_lacking_index_signatures:t(6055,e.DiagnosticCategory.Message,"Suppress_noImplicitAny_errors_for_indexing_objects_lacking_index_signatures_6055","Suppress noImplicitAny errors for indexing objects lacking index signatures."),Do_not_emit_declarations_for_code_that_has_an_internal_annotation:t(6056,e.DiagnosticCategory.Message,"Do_not_emit_declarations_for_code_that_has_an_internal_annotation_6056","Do not emit declarations for code that has an '@internal' annotation."),Specify_the_root_directory_of_input_files_Use_to_control_the_output_directory_structure_with_outDir:t(6058,e.DiagnosticCategory.Message,"Specify_the_root_directory_of_input_files_Use_to_control_the_output_directory_structure_with_outDir_6058","Specify the root directory of input files. Use to control the output directory structure with --outDir."),File_0_is_not_under_rootDir_1_rootDir_is_expected_to_contain_all_source_files:t(6059,e.DiagnosticCategory.Error,"File_0_is_not_under_rootDir_1_rootDir_is_expected_to_contain_all_source_files_6059","File '{0}' is not under 'rootDir' '{1}'. 'rootDir' is expected to contain all source files."),Specify_the_end_of_line_sequence_to_be_used_when_emitting_files_Colon_CRLF_dos_or_LF_unix:t(6060,e.DiagnosticCategory.Message,"Specify_the_end_of_line_sequence_to_be_used_when_emitting_files_Colon_CRLF_dos_or_LF_unix_6060","Specify the end of line sequence to be used when emitting files: 'CRLF' (dos) or 'LF' (unix)."),NEWLINE:t(6061,e.DiagnosticCategory.Message,"NEWLINE_6061","NEWLINE"),Option_0_can_only_be_specified_in_tsconfig_json_file:t(6064,e.DiagnosticCategory.Error,"Option_0_can_only_be_specified_in_tsconfig_json_file_6064","Option '{0}' can only be specified in 'tsconfig.json' file."),Enables_experimental_support_for_ES7_decorators:t(6065,e.DiagnosticCategory.Message,"Enables_experimental_support_for_ES7_decorators_6065","Enables experimental support for ES7 decorators."),Enables_experimental_support_for_emitting_type_metadata_for_decorators:t(6066,e.DiagnosticCategory.Message,"Enables_experimental_support_for_emitting_type_metadata_for_decorators_6066","Enables experimental support for emitting type metadata for decorators."),Enables_experimental_support_for_ES7_async_functions:t(6068,e.DiagnosticCategory.Message,"Enables_experimental_support_for_ES7_async_functions_6068","Enables experimental support for ES7 async functions."),Specify_module_resolution_strategy_Colon_node_Node_js_or_classic_TypeScript_pre_1_6:t(6069,e.DiagnosticCategory.Message,"Specify_module_resolution_strategy_Colon_node_Node_js_or_classic_TypeScript_pre_1_6_6069","Specify module resolution strategy: 'node' (Node.js) or 'classic' (TypeScript pre-1.6)."),Initializes_a_TypeScript_project_and_creates_a_tsconfig_json_file:t(6070,e.DiagnosticCategory.Message,"Initializes_a_TypeScript_project_and_creates_a_tsconfig_json_file_6070","Initializes a TypeScript project and creates a tsconfig.json file."),Successfully_created_a_tsconfig_json_file:t(6071,e.DiagnosticCategory.Message,"Successfully_created_a_tsconfig_json_file_6071","Successfully created a tsconfig.json file."),Suppress_excess_property_checks_for_object_literals:t(6072,e.DiagnosticCategory.Message,"Suppress_excess_property_checks_for_object_literals_6072","Suppress excess property checks for object literals."),Stylize_errors_and_messages_using_color_and_context_experimental:t(6073,e.DiagnosticCategory.Message,"Stylize_errors_and_messages_using_color_and_context_experimental_6073","Stylize errors and messages using color and context (experimental)."),Do_not_report_errors_on_unused_labels:t(6074,e.DiagnosticCategory.Message,"Do_not_report_errors_on_unused_labels_6074","Do not report errors on unused labels."),Report_error_when_not_all_code_paths_in_function_return_a_value:t(6075,e.DiagnosticCategory.Message,"Report_error_when_not_all_code_paths_in_function_return_a_value_6075","Report error when not all code paths in function return a value."),Report_errors_for_fallthrough_cases_in_switch_statement:t(6076,e.DiagnosticCategory.Message,"Report_errors_for_fallthrough_cases_in_switch_statement_6076","Report errors for fallthrough cases in switch statement."),Do_not_report_errors_on_unreachable_code:t(6077,e.DiagnosticCategory.Message,"Do_not_report_errors_on_unreachable_code_6077","Do not report errors on unreachable code."),Disallow_inconsistently_cased_references_to_the_same_file:t(6078,e.DiagnosticCategory.Message,"Disallow_inconsistently_cased_references_to_the_same_file_6078","Disallow inconsistently-cased references to the same file."),Specify_library_files_to_be_included_in_the_compilation_Colon:t(6079,e.DiagnosticCategory.Message,"Specify_library_files_to_be_included_in_the_compilation_Colon_6079","Specify library files to be included in the compilation: "),Specify_JSX_code_generation_Colon_preserve_react_native_or_react:t(6080,e.DiagnosticCategory.Message,"Specify_JSX_code_generation_Colon_preserve_react_native_or_react_6080","Specify JSX code generation: 'preserve', 'react-native', or 'react'."),File_0_has_an_unsupported_extension_so_skipping_it:t(6081,e.DiagnosticCategory.Message,"File_0_has_an_unsupported_extension_so_skipping_it_6081","File '{0}' has an unsupported extension, so skipping it."),Only_amd_and_system_modules_are_supported_alongside_0:t(6082,e.DiagnosticCategory.Error,"Only_amd_and_system_modules_are_supported_alongside_0_6082","Only 'amd' and 'system' modules are supported alongside --{0}."),Base_directory_to_resolve_non_absolute_module_names:t(6083,e.DiagnosticCategory.Message,"Base_directory_to_resolve_non_absolute_module_names_6083","Base directory to resolve non-absolute module names."),Deprecated_Use_jsxFactory_instead_Specify_the_object_invoked_for_createElement_when_targeting_react_JSX_emit:t(6084,e.DiagnosticCategory.Message,"Deprecated_Use_jsxFactory_instead_Specify_the_object_invoked_for_createElement_when_targeting_react__6084","[Deprecated] Use '--jsxFactory' instead. Specify the object invoked for createElement when targeting 'react' JSX emit"),Enable_tracing_of_the_name_resolution_process:t(6085,e.DiagnosticCategory.Message,"Enable_tracing_of_the_name_resolution_process_6085","Enable tracing of the name resolution process."),Resolving_module_0_from_1:t(6086,e.DiagnosticCategory.Message,"Resolving_module_0_from_1_6086","======== Resolving module '{0}' from '{1}'. ========"),Explicitly_specified_module_resolution_kind_Colon_0:t(6087,e.DiagnosticCategory.Message,"Explicitly_specified_module_resolution_kind_Colon_0_6087","Explicitly specified module resolution kind: '{0}'."),Module_resolution_kind_is_not_specified_using_0:t(6088,e.DiagnosticCategory.Message,"Module_resolution_kind_is_not_specified_using_0_6088","Module resolution kind is not specified, using '{0}'."),Module_name_0_was_successfully_resolved_to_1:t(6089,e.DiagnosticCategory.Message,"Module_name_0_was_successfully_resolved_to_1_6089","======== Module name '{0}' was successfully resolved to '{1}'. ========"),Module_name_0_was_not_resolved:t(6090,e.DiagnosticCategory.Message,"Module_name_0_was_not_resolved_6090","======== Module name '{0}' was not resolved. ========"),paths_option_is_specified_looking_for_a_pattern_to_match_module_name_0:t(6091,e.DiagnosticCategory.Message,"paths_option_is_specified_looking_for_a_pattern_to_match_module_name_0_6091","'paths' option is specified, looking for a pattern to match module name '{0}'."),Module_name_0_matched_pattern_1:t(6092,e.DiagnosticCategory.Message,"Module_name_0_matched_pattern_1_6092","Module name '{0}', matched pattern '{1}'."),Trying_substitution_0_candidate_module_location_Colon_1:t(6093,e.DiagnosticCategory.Message,"Trying_substitution_0_candidate_module_location_Colon_1_6093","Trying substitution '{0}', candidate module location: '{1}'."),Resolving_module_name_0_relative_to_base_url_1_2:t(6094,e.DiagnosticCategory.Message,"Resolving_module_name_0_relative_to_base_url_1_2_6094","Resolving module name '{0}' relative to base url '{1}' - '{2}'."),Loading_module_as_file_Slash_folder_candidate_module_location_0_target_file_type_1:t(6095,e.DiagnosticCategory.Message,"Loading_module_as_file_Slash_folder_candidate_module_location_0_target_file_type_1_6095","Loading module as file / folder, candidate module location '{0}', target file type '{1}'."),File_0_does_not_exist:t(6096,e.DiagnosticCategory.Message,"File_0_does_not_exist_6096","File '{0}' does not exist."),File_0_exist_use_it_as_a_name_resolution_result:t(6097,e.DiagnosticCategory.Message,"File_0_exist_use_it_as_a_name_resolution_result_6097","File '{0}' exist - use it as a name resolution result."),Loading_module_0_from_node_modules_folder_target_file_type_1:t(6098,e.DiagnosticCategory.Message,"Loading_module_0_from_node_modules_folder_target_file_type_1_6098","Loading module '{0}' from 'node_modules' folder, target file type '{1}'."),Found_package_json_at_0:t(6099,e.DiagnosticCategory.Message,"Found_package_json_at_0_6099","Found 'package.json' at '{0}'."),package_json_does_not_have_a_0_field:t(6100,e.DiagnosticCategory.Message,"package_json_does_not_have_a_0_field_6100","'package.json' does not have a '{0}' field."),package_json_has_0_field_1_that_references_2:t(6101,e.DiagnosticCategory.Message,"package_json_has_0_field_1_that_references_2_6101","'package.json' has '{0}' field '{1}' that references '{2}'."),Allow_javascript_files_to_be_compiled:t(6102,e.DiagnosticCategory.Message,"Allow_javascript_files_to_be_compiled_6102","Allow javascript files to be compiled."),Option_0_should_have_array_of_strings_as_a_value:t(6103,e.DiagnosticCategory.Error,"Option_0_should_have_array_of_strings_as_a_value_6103","Option '{0}' should have array of strings as a value."),Checking_if_0_is_the_longest_matching_prefix_for_1_2:t(6104,e.DiagnosticCategory.Message,"Checking_if_0_is_the_longest_matching_prefix_for_1_2_6104","Checking if '{0}' is the longest matching prefix for '{1}' - '{2}'."),Expected_type_of_0_field_in_package_json_to_be_string_got_1:t(6105,e.DiagnosticCategory.Message,"Expected_type_of_0_field_in_package_json_to_be_string_got_1_6105","Expected type of '{0}' field in 'package.json' to be 'string', got '{1}'."),baseUrl_option_is_set_to_0_using_this_value_to_resolve_non_relative_module_name_1:t(6106,e.DiagnosticCategory.Message,"baseUrl_option_is_set_to_0_using_this_value_to_resolve_non_relative_module_name_1_6106","'baseUrl' option is set to '{0}', using this value to resolve non-relative module name '{1}'."),rootDirs_option_is_set_using_it_to_resolve_relative_module_name_0:t(6107,e.DiagnosticCategory.Message,"rootDirs_option_is_set_using_it_to_resolve_relative_module_name_0_6107","'rootDirs' option is set, using it to resolve relative module name '{0}'."),Longest_matching_prefix_for_0_is_1:t(6108,e.DiagnosticCategory.Message,"Longest_matching_prefix_for_0_is_1_6108","Longest matching prefix for '{0}' is '{1}'."),Loading_0_from_the_root_dir_1_candidate_location_2:t(6109,e.DiagnosticCategory.Message,"Loading_0_from_the_root_dir_1_candidate_location_2_6109","Loading '{0}' from the root dir '{1}', candidate location '{2}'."),Trying_other_entries_in_rootDirs:t(6110,e.DiagnosticCategory.Message,"Trying_other_entries_in_rootDirs_6110","Trying other entries in 'rootDirs'."),Module_resolution_using_rootDirs_has_failed:t(6111,e.DiagnosticCategory.Message,"Module_resolution_using_rootDirs_has_failed_6111","Module resolution using 'rootDirs' has failed."),Do_not_emit_use_strict_directives_in_module_output:t(6112,e.DiagnosticCategory.Message,"Do_not_emit_use_strict_directives_in_module_output_6112","Do not emit 'use strict' directives in module output."),Enable_strict_null_checks:t(6113,e.DiagnosticCategory.Message,"Enable_strict_null_checks_6113","Enable strict null checks."),Unknown_option_excludes_Did_you_mean_exclude:t(6114,e.DiagnosticCategory.Error,"Unknown_option_excludes_Did_you_mean_exclude_6114","Unknown option 'excludes'. Did you mean 'exclude'?"),Raise_error_on_this_expressions_with_an_implied_any_type:t(6115,e.DiagnosticCategory.Message,"Raise_error_on_this_expressions_with_an_implied_any_type_6115","Raise error on 'this' expressions with an implied 'any' type."),Resolving_type_reference_directive_0_containing_file_1_root_directory_2:t(6116,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_1_root_directory_2_6116","======== Resolving type reference directive '{0}', containing file '{1}', root directory '{2}'. ========"),Resolving_using_primary_search_paths:t(6117,e.DiagnosticCategory.Message,"Resolving_using_primary_search_paths_6117","Resolving using primary search paths..."),Resolving_from_node_modules_folder:t(6118,e.DiagnosticCategory.Message,"Resolving_from_node_modules_folder_6118","Resolving from node_modules folder..."),Type_reference_directive_0_was_successfully_resolved_to_1_primary_Colon_2:t(6119,e.DiagnosticCategory.Message,"Type_reference_directive_0_was_successfully_resolved_to_1_primary_Colon_2_6119","======== Type reference directive '{0}' was successfully resolved to '{1}', primary: {2}. ========"),Type_reference_directive_0_was_not_resolved:t(6120,e.DiagnosticCategory.Message,"Type_reference_directive_0_was_not_resolved_6120","======== Type reference directive '{0}' was not resolved. ========"),Resolving_with_primary_search_path_0:t(6121,e.DiagnosticCategory.Message,"Resolving_with_primary_search_path_0_6121","Resolving with primary search path '{0}'."),Root_directory_cannot_be_determined_skipping_primary_search_paths:t(6122,e.DiagnosticCategory.Message,"Root_directory_cannot_be_determined_skipping_primary_search_paths_6122","Root directory cannot be determined, skipping primary search paths."),Resolving_type_reference_directive_0_containing_file_1_root_directory_not_set:t(6123,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_1_root_directory_not_set_6123","======== Resolving type reference directive '{0}', containing file '{1}', root directory not set. ========"),Type_declaration_files_to_be_included_in_compilation:t(6124,e.DiagnosticCategory.Message,"Type_declaration_files_to_be_included_in_compilation_6124","Type declaration files to be included in compilation."),Looking_up_in_node_modules_folder_initial_location_0:t(6125,e.DiagnosticCategory.Message,"Looking_up_in_node_modules_folder_initial_location_0_6125","Looking up in 'node_modules' folder, initial location '{0}'."),Containing_file_is_not_specified_and_root_directory_cannot_be_determined_skipping_lookup_in_node_modules_folder:t(6126,e.DiagnosticCategory.Message,"Containing_file_is_not_specified_and_root_directory_cannot_be_determined_skipping_lookup_in_node_mod_6126","Containing file is not specified and root directory cannot be determined, skipping lookup in 'node_modules' folder."),Resolving_type_reference_directive_0_containing_file_not_set_root_directory_1:t(6127,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_not_set_root_directory_1_6127","======== Resolving type reference directive '{0}', containing file not set, root directory '{1}'. ========"),Resolving_type_reference_directive_0_containing_file_not_set_root_directory_not_set:t(6128,e.DiagnosticCategory.Message,"Resolving_type_reference_directive_0_containing_file_not_set_root_directory_not_set_6128","======== Resolving type reference directive '{0}', containing file not set, root directory not set. ========"),Resolving_real_path_for_0_result_1:t(6130,e.DiagnosticCategory.Message,"Resolving_real_path_for_0_result_1_6130","Resolving real path for '{0}', result '{1}'."),Cannot_compile_modules_using_option_0_unless_the_module_flag_is_amd_or_system:t(6131,e.DiagnosticCategory.Error,"Cannot_compile_modules_using_option_0_unless_the_module_flag_is_amd_or_system_6131","Cannot compile modules using option '{0}' unless the '--module' flag is 'amd' or 'system'."),File_name_0_has_a_1_extension_stripping_it:t(6132,e.DiagnosticCategory.Message,"File_name_0_has_a_1_extension_stripping_it_6132","File name '{0}' has a '{1}' extension - stripping it."),_0_is_declared_but_its_value_is_never_read:t(6133,e.DiagnosticCategory.Error,"_0_is_declared_but_its_value_is_never_read_6133","'{0}' is declared but its value is never read."),Report_errors_on_unused_locals:t(6134,e.DiagnosticCategory.Message,"Report_errors_on_unused_locals_6134","Report errors on unused locals."),Report_errors_on_unused_parameters:t(6135,e.DiagnosticCategory.Message,"Report_errors_on_unused_parameters_6135","Report errors on unused parameters."),The_maximum_dependency_depth_to_search_under_node_modules_and_load_JavaScript_files:t(6136,e.DiagnosticCategory.Message,"The_maximum_dependency_depth_to_search_under_node_modules_and_load_JavaScript_files_6136","The maximum dependency depth to search under node_modules and load JavaScript files."),Cannot_import_type_declaration_files_Consider_importing_0_instead_of_1:t(6137,e.DiagnosticCategory.Error,"Cannot_import_type_declaration_files_Consider_importing_0_instead_of_1_6137","Cannot import type declaration files. Consider importing '{0}' instead of '{1}'."),Property_0_is_declared_but_its_value_is_never_read:t(6138,e.DiagnosticCategory.Error,"Property_0_is_declared_but_its_value_is_never_read_6138","Property '{0}' is declared but its value is never read."),Import_emit_helpers_from_tslib:t(6139,e.DiagnosticCategory.Message,"Import_emit_helpers_from_tslib_6139","Import emit helpers from 'tslib'."),Auto_discovery_for_typings_is_enabled_in_project_0_Running_extra_resolution_pass_for_module_1_using_cache_location_2:t(6140,e.DiagnosticCategory.Error,"Auto_discovery_for_typings_is_enabled_in_project_0_Running_extra_resolution_pass_for_module_1_using__6140","Auto discovery for typings is enabled in project '{0}'. Running extra resolution pass for module '{1}' using cache location '{2}'."),Parse_in_strict_mode_and_emit_use_strict_for_each_source_file:t(6141,e.DiagnosticCategory.Message,"Parse_in_strict_mode_and_emit_use_strict_for_each_source_file_6141",'Parse in strict mode and emit "use strict" for each source file.'),Module_0_was_resolved_to_1_but_jsx_is_not_set:t(6142,e.DiagnosticCategory.Error,"Module_0_was_resolved_to_1_but_jsx_is_not_set_6142","Module '{0}' was resolved to '{1}', but '--jsx' is not set."),Module_0_was_resolved_as_locally_declared_ambient_module_in_file_1:t(6144,e.DiagnosticCategory.Message,"Module_0_was_resolved_as_locally_declared_ambient_module_in_file_1_6144","Module '{0}' was resolved as locally declared ambient module in file '{1}'."),Module_0_was_resolved_as_ambient_module_declared_in_1_since_this_file_was_not_modified:t(6145,e.DiagnosticCategory.Message,"Module_0_was_resolved_as_ambient_module_declared_in_1_since_this_file_was_not_modified_6145","Module '{0}' was resolved as ambient module declared in '{1}' since this file was not modified."),Specify_the_JSX_factory_function_to_use_when_targeting_react_JSX_emit_e_g_React_createElement_or_h:t(6146,e.DiagnosticCategory.Message,"Specify_the_JSX_factory_function_to_use_when_targeting_react_JSX_emit_e_g_React_createElement_or_h_6146","Specify the JSX factory function to use when targeting 'react' JSX emit, e.g. 'React.createElement' or 'h'."),Resolution_for_module_0_was_found_in_cache:t(6147,e.DiagnosticCategory.Message,"Resolution_for_module_0_was_found_in_cache_6147","Resolution for module '{0}' was found in cache."),Directory_0_does_not_exist_skipping_all_lookups_in_it:t(6148,e.DiagnosticCategory.Message,"Directory_0_does_not_exist_skipping_all_lookups_in_it_6148","Directory '{0}' does not exist, skipping all lookups in it."),Show_diagnostic_information:t(6149,e.DiagnosticCategory.Message,"Show_diagnostic_information_6149","Show diagnostic information."),Show_verbose_diagnostic_information:t(6150,e.DiagnosticCategory.Message,"Show_verbose_diagnostic_information_6150","Show verbose diagnostic information."),Emit_a_single_file_with_source_maps_instead_of_having_a_separate_file:t(6151,e.DiagnosticCategory.Message,"Emit_a_single_file_with_source_maps_instead_of_having_a_separate_file_6151","Emit a single file with source maps instead of having a separate file."),Emit_the_source_alongside_the_sourcemaps_within_a_single_file_requires_inlineSourceMap_or_sourceMap_to_be_set:t(6152,e.DiagnosticCategory.Message,"Emit_the_source_alongside_the_sourcemaps_within_a_single_file_requires_inlineSourceMap_or_sourceMap__6152","Emit the source alongside the sourcemaps within a single file; requires '--inlineSourceMap' or '--sourceMap' to be set."),Transpile_each_file_as_a_separate_module_similar_to_ts_transpileModule:t(6153,e.DiagnosticCategory.Message,"Transpile_each_file_as_a_separate_module_similar_to_ts_transpileModule_6153","Transpile each file as a separate module (similar to 'ts.transpileModule')."),Print_names_of_generated_files_part_of_the_compilation:t(6154,e.DiagnosticCategory.Message,"Print_names_of_generated_files_part_of_the_compilation_6154","Print names of generated files part of the compilation."),Print_names_of_files_part_of_the_compilation:t(6155,e.DiagnosticCategory.Message,"Print_names_of_files_part_of_the_compilation_6155","Print names of files part of the compilation."),The_locale_used_when_displaying_messages_to_the_user_e_g_en_us:t(6156,e.DiagnosticCategory.Message,"The_locale_used_when_displaying_messages_to_the_user_e_g_en_us_6156","The locale used when displaying messages to the user (e.g. 'en-us')"),Do_not_generate_custom_helper_functions_like_extends_in_compiled_output:t(6157,e.DiagnosticCategory.Message,"Do_not_generate_custom_helper_functions_like_extends_in_compiled_output_6157","Do not generate custom helper functions like '__extends' in compiled output."),Do_not_include_the_default_library_file_lib_d_ts:t(6158,e.DiagnosticCategory.Message,"Do_not_include_the_default_library_file_lib_d_ts_6158","Do not include the default library file (lib.d.ts)."),Do_not_add_triple_slash_references_or_imported_modules_to_the_list_of_compiled_files:t(6159,e.DiagnosticCategory.Message,"Do_not_add_triple_slash_references_or_imported_modules_to_the_list_of_compiled_files_6159","Do not add triple-slash references or imported modules to the list of compiled files."),Deprecated_Use_skipLibCheck_instead_Skip_type_checking_of_default_library_declaration_files:t(6160,e.DiagnosticCategory.Message,"Deprecated_Use_skipLibCheck_instead_Skip_type_checking_of_default_library_declaration_files_6160","[Deprecated] Use '--skipLibCheck' instead. Skip type checking of default library declaration files."),List_of_folders_to_include_type_definitions_from:t(6161,e.DiagnosticCategory.Message,"List_of_folders_to_include_type_definitions_from_6161","List of folders to include type definitions from."),Disable_size_limitations_on_JavaScript_projects:t(6162,e.DiagnosticCategory.Message,"Disable_size_limitations_on_JavaScript_projects_6162","Disable size limitations on JavaScript projects."),The_character_set_of_the_input_files:t(6163,e.DiagnosticCategory.Message,"The_character_set_of_the_input_files_6163","The character set of the input files."),Emit_a_UTF_8_Byte_Order_Mark_BOM_in_the_beginning_of_output_files:t(6164,e.DiagnosticCategory.Message,"Emit_a_UTF_8_Byte_Order_Mark_BOM_in_the_beginning_of_output_files_6164","Emit a UTF-8 Byte Order Mark (BOM) in the beginning of output files."),Do_not_truncate_error_messages:t(6165,e.DiagnosticCategory.Message,"Do_not_truncate_error_messages_6165","Do not truncate error messages."),Output_directory_for_generated_declaration_files:t(6166,e.DiagnosticCategory.Message,"Output_directory_for_generated_declaration_files_6166","Output directory for generated declaration files."),A_series_of_entries_which_re_map_imports_to_lookup_locations_relative_to_the_baseUrl:t(6167,e.DiagnosticCategory.Message,"A_series_of_entries_which_re_map_imports_to_lookup_locations_relative_to_the_baseUrl_6167","A series of entries which re-map imports to lookup locations relative to the 'baseUrl'."),List_of_root_folders_whose_combined_content_represents_the_structure_of_the_project_at_runtime:t(6168,e.DiagnosticCategory.Message,"List_of_root_folders_whose_combined_content_represents_the_structure_of_the_project_at_runtime_6168","List of root folders whose combined content represents the structure of the project at runtime."),Show_all_compiler_options:t(6169,e.DiagnosticCategory.Message,"Show_all_compiler_options_6169","Show all compiler options."),Deprecated_Use_outFile_instead_Concatenate_and_emit_output_to_single_file:t(6170,e.DiagnosticCategory.Message,"Deprecated_Use_outFile_instead_Concatenate_and_emit_output_to_single_file_6170","[Deprecated] Use '--outFile' instead. Concatenate and emit output to single file"),Command_line_Options:t(6171,e.DiagnosticCategory.Message,"Command_line_Options_6171","Command-line Options"),Basic_Options:t(6172,e.DiagnosticCategory.Message,"Basic_Options_6172","Basic Options"),Strict_Type_Checking_Options:t(6173,e.DiagnosticCategory.Message,"Strict_Type_Checking_Options_6173","Strict Type-Checking Options"),Module_Resolution_Options:t(6174,e.DiagnosticCategory.Message,"Module_Resolution_Options_6174","Module Resolution Options"),Source_Map_Options:t(6175,e.DiagnosticCategory.Message,"Source_Map_Options_6175","Source Map Options"),Additional_Checks:t(6176,e.DiagnosticCategory.Message,"Additional_Checks_6176","Additional Checks"),Experimental_Options:t(6177,e.DiagnosticCategory.Message,"Experimental_Options_6177","Experimental Options"),Advanced_Options:t(6178,e.DiagnosticCategory.Message,"Advanced_Options_6178","Advanced Options"),Provide_full_support_for_iterables_in_for_of_spread_and_destructuring_when_targeting_ES5_or_ES3:t(6179,e.DiagnosticCategory.Message,"Provide_full_support_for_iterables_in_for_of_spread_and_destructuring_when_targeting_ES5_or_ES3_6179","Provide full support for iterables in 'for-of', spread, and destructuring when targeting 'ES5' or 'ES3'."),Enable_all_strict_type_checking_options:t(6180,e.DiagnosticCategory.Message,"Enable_all_strict_type_checking_options_6180","Enable all strict type-checking options."),List_of_language_service_plugins:t(6181,e.DiagnosticCategory.Message,"List_of_language_service_plugins_6181","List of language service plugins."),Scoped_package_detected_looking_in_0:t(6182,e.DiagnosticCategory.Message,"Scoped_package_detected_looking_in_0_6182","Scoped package detected, looking in '{0}'"),Reusing_resolution_of_module_0_to_file_1_from_old_program:t(6183,e.DiagnosticCategory.Message,"Reusing_resolution_of_module_0_to_file_1_from_old_program_6183","Reusing resolution of module '{0}' to file '{1}' from old program."),Reusing_module_resolutions_originating_in_0_since_resolutions_are_unchanged_from_old_program:t(6184,e.DiagnosticCategory.Message,"Reusing_module_resolutions_originating_in_0_since_resolutions_are_unchanged_from_old_program_6184","Reusing module resolutions originating in '{0}' since resolutions are unchanged from old program."),Disable_strict_checking_of_generic_signatures_in_function_types:t(6185,e.DiagnosticCategory.Message,"Disable_strict_checking_of_generic_signatures_in_function_types_6185","Disable strict checking of generic signatures in function types."),Enable_strict_checking_of_function_types:t(6186,e.DiagnosticCategory.Message,"Enable_strict_checking_of_function_types_6186","Enable strict checking of function types."),Variable_0_implicitly_has_an_1_type:t(7005,e.DiagnosticCategory.Error,"Variable_0_implicitly_has_an_1_type_7005","Variable '{0}' implicitly has an '{1}' type."),Parameter_0_implicitly_has_an_1_type:t(7006,e.DiagnosticCategory.Error,"Parameter_0_implicitly_has_an_1_type_7006","Parameter '{0}' implicitly has an '{1}' type."),Member_0_implicitly_has_an_1_type:t(7008,e.DiagnosticCategory.Error,"Member_0_implicitly_has_an_1_type_7008","Member '{0}' implicitly has an '{1}' type."),new_expression_whose_target_lacks_a_construct_signature_implicitly_has_an_any_type:t(7009,e.DiagnosticCategory.Error,"new_expression_whose_target_lacks_a_construct_signature_implicitly_has_an_any_type_7009","'new' expression, whose target lacks a construct signature, implicitly has an 'any' type."),_0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type:t(7010,e.DiagnosticCategory.Error,"_0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type_7010","'{0}', which lacks return-type annotation, implicitly has an '{1}' return type."),Function_expression_which_lacks_return_type_annotation_implicitly_has_an_0_return_type:t(7011,e.DiagnosticCategory.Error,"Function_expression_which_lacks_return_type_annotation_implicitly_has_an_0_return_type_7011","Function expression, which lacks return-type annotation, implicitly has an '{0}' return type."),Construct_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type:t(7013,e.DiagnosticCategory.Error,"Construct_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type_7013","Construct signature, which lacks return-type annotation, implicitly has an 'any' return type."),Element_implicitly_has_an_any_type_because_index_expression_is_not_of_type_number:t(7015,e.DiagnosticCategory.Error,"Element_implicitly_has_an_any_type_because_index_expression_is_not_of_type_number_7015","Element implicitly has an 'any' type because index expression is not of type 'number'."),Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type:t(7016,e.DiagnosticCategory.Error,"Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type_7016","Could not find a declaration file for module '{0}'. '{1}' implicitly has an 'any' type."),Element_implicitly_has_an_any_type_because_type_0_has_no_index_signature:t(7017,e.DiagnosticCategory.Error,"Element_implicitly_has_an_any_type_because_type_0_has_no_index_signature_7017","Element implicitly has an 'any' type because type '{0}' has no index signature."),Object_literal_s_property_0_implicitly_has_an_1_type:t(7018,e.DiagnosticCategory.Error,"Object_literal_s_property_0_implicitly_has_an_1_type_7018","Object literal's property '{0}' implicitly has an '{1}' type."),Rest_parameter_0_implicitly_has_an_any_type:t(7019,e.DiagnosticCategory.Error,"Rest_parameter_0_implicitly_has_an_any_type_7019","Rest parameter '{0}' implicitly has an 'any[]' type."),Call_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type:t(7020,e.DiagnosticCategory.Error,"Call_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type_7020","Call signature, which lacks return-type annotation, implicitly has an 'any' return type."),_0_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_and_is_referenced_directly_or_indirectly_in_its_own_initializer:t(7022,e.DiagnosticCategory.Error,"_0_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_and_is_referenced_directly_or__7022","'{0}' implicitly has type 'any' because it does not have a type annotation and is referenced directly or indirectly in its own initializer."),_0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions:t(7023,e.DiagnosticCategory.Error,"_0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_reference_7023","'{0}' implicitly has return type 'any' because it does not have a return type annotation and is referenced directly or indirectly in one of its return expressions."),Function_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions:t(7024,e.DiagnosticCategory.Error,"Function_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_ref_7024","Function implicitly has return type 'any' because it does not have a return type annotation and is referenced directly or indirectly in one of its return expressions."),Generator_implicitly_has_type_0_because_it_does_not_yield_any_values_Consider_supplying_a_return_type:t(7025,e.DiagnosticCategory.Error,"Generator_implicitly_has_type_0_because_it_does_not_yield_any_values_Consider_supplying_a_return_typ_7025","Generator implicitly has type '{0}' because it does not yield any values. Consider supplying a return type."),JSX_element_implicitly_has_type_any_because_no_interface_JSX_0_exists:t(7026,e.DiagnosticCategory.Error,"JSX_element_implicitly_has_type_any_because_no_interface_JSX_0_exists_7026","JSX element implicitly has type 'any' because no interface 'JSX.{0}' exists."),Unreachable_code_detected:t(7027,e.DiagnosticCategory.Error,"Unreachable_code_detected_7027","Unreachable code detected."),Unused_label:t(7028,e.DiagnosticCategory.Error,"Unused_label_7028","Unused label."),Fallthrough_case_in_switch:t(7029,e.DiagnosticCategory.Error,"Fallthrough_case_in_switch_7029","Fallthrough case in switch."),Not_all_code_paths_return_a_value:t(7030,e.DiagnosticCategory.Error,"Not_all_code_paths_return_a_value_7030","Not all code paths return a value."),Binding_element_0_implicitly_has_an_1_type:t(7031,e.DiagnosticCategory.Error,"Binding_element_0_implicitly_has_an_1_type_7031","Binding element '{0}' implicitly has an '{1}' type."),Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation:t(7032,e.DiagnosticCategory.Error,"Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation_7032","Property '{0}' implicitly has type 'any', because its set accessor lacks a parameter type annotation."),Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation:t(7033,e.DiagnosticCategory.Error,"Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation_7033","Property '{0}' implicitly has type 'any', because its get accessor lacks a return type annotation."),Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined:t(7034,e.DiagnosticCategory.Error,"Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined_7034","Variable '{0}' implicitly has type '{1}' in some locations where its type cannot be determined."),Try_npm_install_types_Slash_0_if_it_exists_or_add_a_new_declaration_d_ts_file_containing_declare_module_0:t(7035,e.DiagnosticCategory.Error,"Try_npm_install_types_Slash_0_if_it_exists_or_add_a_new_declaration_d_ts_file_containing_declare_mod_7035","Try `npm install @types/{0}` if it exists or add a new declaration (.d.ts) file containing `declare module '{0}';`"),Dynamic_import_s_specifier_must_be_of_type_string_but_here_has_type_0:t(7036,e.DiagnosticCategory.Error,"Dynamic_import_s_specifier_must_be_of_type_string_but_here_has_type_0_7036","Dynamic import's specifier must be of type 'string', but here has type '{0}'."),You_cannot_rename_this_element:t(8e3,e.DiagnosticCategory.Error,"You_cannot_rename_this_element_8000","You cannot rename this element."),You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library:t(8001,e.DiagnosticCategory.Error,"You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library_8001","You cannot rename elements that are defined in the standard TypeScript library."),import_can_only_be_used_in_a_ts_file:t(8002,e.DiagnosticCategory.Error,"import_can_only_be_used_in_a_ts_file_8002","'import ... =' can only be used in a .ts file."),export_can_only_be_used_in_a_ts_file:t(8003,e.DiagnosticCategory.Error,"export_can_only_be_used_in_a_ts_file_8003","'export=' can only be used in a .ts file."),type_parameter_declarations_can_only_be_used_in_a_ts_file:t(8004,e.DiagnosticCategory.Error,"type_parameter_declarations_can_only_be_used_in_a_ts_file_8004","'type parameter declarations' can only be used in a .ts file."),implements_clauses_can_only_be_used_in_a_ts_file:t(8005,e.DiagnosticCategory.Error,"implements_clauses_can_only_be_used_in_a_ts_file_8005","'implements clauses' can only be used in a .ts file."),interface_declarations_can_only_be_used_in_a_ts_file:t(8006,e.DiagnosticCategory.Error,"interface_declarations_can_only_be_used_in_a_ts_file_8006","'interface declarations' can only be used in a .ts file."),module_declarations_can_only_be_used_in_a_ts_file:t(8007,e.DiagnosticCategory.Error,"module_declarations_can_only_be_used_in_a_ts_file_8007","'module declarations' can only be used in a .ts file."),type_aliases_can_only_be_used_in_a_ts_file:t(8008,e.DiagnosticCategory.Error,"type_aliases_can_only_be_used_in_a_ts_file_8008","'type aliases' can only be used in a .ts file."),_0_can_only_be_used_in_a_ts_file:t(8009,e.DiagnosticCategory.Error,"_0_can_only_be_used_in_a_ts_file_8009","'{0}' can only be used in a .ts file."),types_can_only_be_used_in_a_ts_file:t(8010,e.DiagnosticCategory.Error,"types_can_only_be_used_in_a_ts_file_8010","'types' can only be used in a .ts file."),type_arguments_can_only_be_used_in_a_ts_file:t(8011,e.DiagnosticCategory.Error,"type_arguments_can_only_be_used_in_a_ts_file_8011","'type arguments' can only be used in a .ts file."),parameter_modifiers_can_only_be_used_in_a_ts_file:t(8012,e.DiagnosticCategory.Error,"parameter_modifiers_can_only_be_used_in_a_ts_file_8012","'parameter modifiers' can only be used in a .ts file."),non_null_assertions_can_only_be_used_in_a_ts_file:t(8013,e.DiagnosticCategory.Error,"non_null_assertions_can_only_be_used_in_a_ts_file_8013","'non-null assertions' can only be used in a .ts file."),enum_declarations_can_only_be_used_in_a_ts_file:t(8015,e.DiagnosticCategory.Error,"enum_declarations_can_only_be_used_in_a_ts_file_8015","'enum declarations' can only be used in a .ts file."),type_assertion_expressions_can_only_be_used_in_a_ts_file:t(8016,e.DiagnosticCategory.Error,"type_assertion_expressions_can_only_be_used_in_a_ts_file_8016","'type assertion expressions' can only be used in a .ts file."),Octal_literal_types_must_use_ES2015_syntax_Use_the_syntax_0:t(8017,e.DiagnosticCategory.Error,"Octal_literal_types_must_use_ES2015_syntax_Use_the_syntax_0_8017","Octal literal types must use ES2015 syntax. Use the syntax '{0}'."),Octal_literals_are_not_allowed_in_enums_members_initializer_Use_the_syntax_0:t(8018,e.DiagnosticCategory.Error,"Octal_literals_are_not_allowed_in_enums_members_initializer_Use_the_syntax_0_8018","Octal literals are not allowed in enums members initializer. Use the syntax '{0}'."),Report_errors_in_js_files:t(8019,e.DiagnosticCategory.Message,"Report_errors_in_js_files_8019","Report errors in .js files."),JSDoc_types_can_only_be_used_inside_documentation_comments:t(8020,e.DiagnosticCategory.Error,"JSDoc_types_can_only_be_used_inside_documentation_comments_8020","JSDoc types can only be used inside documentation comments."),JSDoc_typedef_tag_should_either_have_a_type_annotation_or_be_followed_by_property_or_member_tags:t(8021,e.DiagnosticCategory.Error,"JSDoc_typedef_tag_should_either_have_a_type_annotation_or_be_followed_by_property_or_member_tags_8021","JSDoc '@typedef' tag should either have a type annotation or be followed by '@property' or '@member' tags."),JSDoc_0_is_not_attached_to_a_class:t(8022,e.DiagnosticCategory.Error,"JSDoc_0_is_not_attached_to_a_class_8022","JSDoc '@{0}' is not attached to a class."),JSDoc_0_1_does_not_match_the_extends_2_clause:t(8023,e.DiagnosticCategory.Error,"JSDoc_0_1_does_not_match_the_extends_2_clause_8023","JSDoc '@{0} {1}' does not match the 'extends {2}' clause."),JSDoc_param_tag_has_name_0_but_there_is_no_parameter_with_that_name:t(8024,e.DiagnosticCategory.Error,"JSDoc_param_tag_has_name_0_but_there_is_no_parameter_with_that_name_8024","JSDoc '@param' tag has name '{0}', but there is no parameter with that name."),Class_declarations_cannot_have_more_than_one_augments_or_extends_tag:t(8025,e.DiagnosticCategory.Error,"Class_declarations_cannot_have_more_than_one_augments_or_extends_tag_8025","Class declarations cannot have more than one `@augments` or `@extends` tag."),Only_identifiers_Slashqualified_names_with_optional_type_arguments_are_currently_supported_in_a_class_extends_clause:t(9002,e.DiagnosticCategory.Error,"Only_identifiers_Slashqualified_names_with_optional_type_arguments_are_currently_supported_in_a_clas_9002","Only identifiers/qualified-names with optional type arguments are currently supported in a class 'extends' clause."),class_expressions_are_not_currently_supported:t(9003,e.DiagnosticCategory.Error,"class_expressions_are_not_currently_supported_9003","'class' expressions are not currently supported."),Language_service_is_disabled:t(9004,e.DiagnosticCategory.Error,"Language_service_is_disabled_9004","Language service is disabled."),JSX_attributes_must_only_be_assigned_a_non_empty_expression:t(17e3,e.DiagnosticCategory.Error,"JSX_attributes_must_only_be_assigned_a_non_empty_expression_17000","JSX attributes must only be assigned a non-empty 'expression'."),JSX_elements_cannot_have_multiple_attributes_with_the_same_name:t(17001,e.DiagnosticCategory.Error,"JSX_elements_cannot_have_multiple_attributes_with_the_same_name_17001","JSX elements cannot have multiple attributes with the same name."),Expected_corresponding_JSX_closing_tag_for_0:t(17002,e.DiagnosticCategory.Error,"Expected_corresponding_JSX_closing_tag_for_0_17002","Expected corresponding JSX closing tag for '{0}'."),JSX_attribute_expected:t(17003,e.DiagnosticCategory.Error,"JSX_attribute_expected_17003","JSX attribute expected."),Cannot_use_JSX_unless_the_jsx_flag_is_provided:t(17004,e.DiagnosticCategory.Error,"Cannot_use_JSX_unless_the_jsx_flag_is_provided_17004","Cannot use JSX unless the '--jsx' flag is provided."),A_constructor_cannot_contain_a_super_call_when_its_class_extends_null:t(17005,e.DiagnosticCategory.Error,"A_constructor_cannot_contain_a_super_call_when_its_class_extends_null_17005","A constructor cannot contain a 'super' call when its class extends 'null'."),An_unary_expression_with_the_0_operator_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses:t(17006,e.DiagnosticCategory.Error,"An_unary_expression_with_the_0_operator_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_ex_17006","An unary expression with the '{0}' operator is not allowed in the left-hand side of an exponentiation expression. Consider enclosing the expression in parentheses."),A_type_assertion_expression_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses:t(17007,e.DiagnosticCategory.Error,"A_type_assertion_expression_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Con_17007","A type assertion expression is not allowed in the left-hand side of an exponentiation expression. Consider enclosing the expression in parentheses."),JSX_element_0_has_no_corresponding_closing_tag:t(17008,e.DiagnosticCategory.Error,"JSX_element_0_has_no_corresponding_closing_tag_17008","JSX element '{0}' has no corresponding closing tag."),super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class:t(17009,e.DiagnosticCategory.Error,"super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class_17009","'super' must be called before accessing 'this' in the constructor of a derived class."),Unknown_type_acquisition_option_0:t(17010,e.DiagnosticCategory.Error,"Unknown_type_acquisition_option_0_17010","Unknown type acquisition option '{0}'."),super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class:t(17011,e.DiagnosticCategory.Error,"super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class_17011","'super' must be called before accessing a property of 'super' in the constructor of a derived class."),_0_is_not_a_valid_meta_property_for_keyword_1_Did_you_mean_2:t(17012,e.DiagnosticCategory.Error,"_0_is_not_a_valid_meta_property_for_keyword_1_Did_you_mean_2_17012","'{0}' is not a valid meta-property for keyword '{1}'. Did you mean '{2}'?"),Meta_property_0_is_only_allowed_in_the_body_of_a_function_declaration_function_expression_or_constructor:t(17013,e.DiagnosticCategory.Error,"Meta_property_0_is_only_allowed_in_the_body_of_a_function_declaration_function_expression_or_constru_17013","Meta-property '{0}' is only allowed in the body of a function declaration, function expression, or constructor."),Circularity_detected_while_resolving_configuration_Colon_0:t(18e3,e.DiagnosticCategory.Error,"Circularity_detected_while_resolving_configuration_Colon_0_18000","Circularity detected while resolving configuration: {0}"),A_path_in_an_extends_option_must_be_relative_or_rooted_but_0_is_not:t(18001,e.DiagnosticCategory.Error,"A_path_in_an_extends_option_must_be_relative_or_rooted_but_0_is_not_18001","A path in an 'extends' option must be relative or rooted, but '{0}' is not."),The_files_list_in_config_file_0_is_empty:t(18002,e.DiagnosticCategory.Error,"The_files_list_in_config_file_0_is_empty_18002","The 'files' list in config file '{0}' is empty."),No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2:t(18003,e.DiagnosticCategory.Error,"No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2_18003","No inputs were found in config file '{0}'. Specified 'include' paths were '{1}' and 'exclude' paths were '{2}'."),Add_missing_super_call:t(90001,e.DiagnosticCategory.Message,"Add_missing_super_call_90001","Add missing 'super()' call."),Make_super_call_the_first_statement_in_the_constructor:t(90002,e.DiagnosticCategory.Message,"Make_super_call_the_first_statement_in_the_constructor_90002","Make 'super()' call the first statement in the constructor."),Change_extends_to_implements:t(90003,e.DiagnosticCategory.Message,"Change_extends_to_implements_90003","Change 'extends' to 'implements'."),Remove_declaration_for_Colon_0:t(90004,e.DiagnosticCategory.Message,"Remove_declaration_for_Colon_0_90004","Remove declaration for: '{0}'."),Implement_interface_0:t(90006,e.DiagnosticCategory.Message,"Implement_interface_0_90006","Implement interface '{0}'."),Implement_inherited_abstract_class:t(90007,e.DiagnosticCategory.Message,"Implement_inherited_abstract_class_90007","Implement inherited abstract class."),Add_this_to_unresolved_variable:t(90008,e.DiagnosticCategory.Message,"Add_this_to_unresolved_variable_90008","Add 'this.' to unresolved variable."),Adding_a_tsconfig_json_file_will_help_organize_projects_that_contain_both_TypeScript_and_JavaScript_files_Learn_more_at_https_Colon_Slash_Slashaka_ms_Slashtsconfig:t(90009,e.DiagnosticCategory.Error,"Adding_a_tsconfig_json_file_will_help_organize_projects_that_contain_both_TypeScript_and_JavaScript__90009","Adding a tsconfig.json file will help organize projects that contain both TypeScript and JavaScript files. Learn more at https://aka.ms/tsconfig."),Type_0_is_not_assignable_to_type_1_Two_different_types_with_this_name_exist_but_they_are_unrelated:t(90010,e.DiagnosticCategory.Error,"Type_0_is_not_assignable_to_type_1_Two_different_types_with_this_name_exist_but_they_are_unrelated_90010","Type '{0}' is not assignable to type '{1}'. Two different types with this name exist, but they are unrelated."),Import_0_from_1:t(90013,e.DiagnosticCategory.Message,"Import_0_from_1_90013","Import '{0}' from \"{1}\"."),Change_0_to_1:t(90014,e.DiagnosticCategory.Message,"Change_0_to_1_90014","Change '{0}' to '{1}'."),Add_0_to_existing_import_declaration_from_1:t(90015,e.DiagnosticCategory.Message,"Add_0_to_existing_import_declaration_from_1_90015","Add '{0}' to existing import declaration from \"{1}\"."),Declare_property_0:t(90016,e.DiagnosticCategory.Message,"Declare_property_0_90016","Declare property '{0}'."),Add_index_signature_for_property_0:t(90017,e.DiagnosticCategory.Message,"Add_index_signature_for_property_0_90017","Add index signature for property '{0}'."),Disable_checking_for_this_file:t(90018,e.DiagnosticCategory.Message,"Disable_checking_for_this_file_90018","Disable checking for this file."),Ignore_this_error_message:t(90019,e.DiagnosticCategory.Message,"Ignore_this_error_message_90019","Ignore this error message."),Initialize_property_0_in_the_constructor:t(90020,e.DiagnosticCategory.Message,"Initialize_property_0_in_the_constructor_90020","Initialize property '{0}' in the constructor."),Initialize_static_property_0:t(90021,e.DiagnosticCategory.Message,"Initialize_static_property_0_90021","Initialize static property '{0}'."),Change_spelling_to_0:t(90022,e.DiagnosticCategory.Message,"Change_spelling_to_0_90022","Change spelling to '{0}'."),Declare_method_0:t(90023,e.DiagnosticCategory.Message,"Declare_method_0_90023","Declare method '{0}'."),Declare_static_method_0:t(90024,e.DiagnosticCategory.Message,"Declare_static_method_0_90024","Declare static method '{0}'."),Prefix_0_with_an_underscore:t(90025,e.DiagnosticCategory.Message,"Prefix_0_with_an_underscore_90025","Prefix '{0}' with an underscore."),Rewrite_as_the_indexed_access_type_0:t(90026,e.DiagnosticCategory.Message,"Rewrite_as_the_indexed_access_type_0_90026","Rewrite as the indexed access type '{0}'."),Declare_static_property_0:t(90027,e.DiagnosticCategory.Message,"Declare_static_property_0_90027","Declare static property '{0}'."),Call_decorator_expression:t(90028,e.DiagnosticCategory.Message,"Call_decorator_expression_90028","Call decorator expression."),Convert_function_to_an_ES2015_class:t(95001,e.DiagnosticCategory.Message,"Convert_function_to_an_ES2015_class_95001","Convert function to an ES2015 class"),Convert_function_0_to_class:t(95002,e.DiagnosticCategory.Message,"Convert_function_0_to_class_95002","Convert function '{0}' to class"),Extract_symbol:t(95003,e.DiagnosticCategory.Message,"Extract_symbol_95003","Extract symbol"),Extract_to_0_in_1:t(95004,e.DiagnosticCategory.Message,"Extract_to_0_in_1_95004","Extract to {0} in {1}"),Extract_function:t(95005,e.DiagnosticCategory.Message,"Extract_function_95005","Extract function"),Extract_constant:t(95006,e.DiagnosticCategory.Message,"Extract_constant_95006","Extract constant"),Extract_to_0_in_enclosing_scope:t(95007,e.DiagnosticCategory.Message,"Extract_to_0_in_enclosing_scope_95007","Extract to {0} in enclosing scope"),Extract_to_0_in_1_scope:t(95008,e.DiagnosticCategory.Message,"Extract_to_0_in_1_scope_95008","Extract to {0} in {1} scope"),Annotate_with_type_from_JSDoc:t(95009,e.DiagnosticCategory.Message,"Annotate_with_type_from_JSDoc_95009","Annotate with type from JSDoc"),Annotate_with_types_from_JSDoc:t(95010,e.DiagnosticCategory.Message,"Annotate_with_types_from_JSDoc_95010","Annotate with types from JSDoc"),Infer_type_of_0_from_usage:t(95011,e.DiagnosticCategory.Message,"Infer_type_of_0_from_usage_95011","Infer type of '{0}' from usage."),Infer_parameter_types_from_usage:t(95012,e.DiagnosticCategory.Message,"Infer_parameter_types_from_usage_95012","Infer parameter types from usage.")}}(ts||(ts={})),function(P){function M(e){return 71<=e}P.tokenIsIdentifierOrKeyword=M;var F=P.createMapFromTemplate({abstract:117,any:119,as:118,boolean:122,break:72,case:73,catch:74,class:75,continue:77,const:76,constructor:123,debugger:78,declare:124,default:79,delete:80,do:81,else:82,enum:83,export:84,extends:85,false:86,finally:87,for:88,from:140,function:89,get:125,if:90,implements:108,import:91,in:92,instanceof:93,interface:109,is:126,keyof:127,let:110,module:128,namespace:129,never:130,new:94,null:95,number:133,object:134,package:111,private:112,protected:113,public:114,readonly:131,require:132,global:141,return:96,set:135,static:115,string:136,super:97,switch:98,symbol:137,this:99,throw:100,true:101,try:102,type:138,typeof:103,undefined:139,var:104,void:105,while:106,with:107,yield:116,async:120,await:121,of:142,"{":17,"}":18,"(":19,")":20,"[":21,"]":22,".":23,"...":24,";":25,",":26,"<":27,">":29,"<=":30,">=":31,"==":32,"!=":33,"===":34,"!==":35,"=>":36,"+":37,"-":38,"**":40,"*":39,"/":41,"%":42,"++":43,"--":44,"<<":45,"</":28,">>":46,">>>":47,"&":48,"|":49,"^":50,"!":51,"~":52,"&&":53,"||":54,"?":55,":":56,"=":58,"+=":59,"-=":60,"*=":61,"**=":62,"/=":63,"%=":64,"<<=":65,">>=":66,">>>=":67,"&=":68,"|=":69,"^=":70,"@":57}),n=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1569,1594,1600,1610,1649,1747,1749,1749,1765,1766,1786,1788,1808,1808,1810,1836,1920,1957,2309,2361,2365,2365,2384,2384,2392,2401,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2784,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2877,2877,2908,2909,2911,2913,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3294,3294,3296,3297,3333,3340,3342,3344,3346,3368,3370,3385,3424,3425,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3805,3840,3840,3904,3911,3913,3946,3976,3979,4096,4129,4131,4135,4137,4138,4176,4181,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6067,6176,6263,6272,6312,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8319,8319,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12329,12337,12341,12344,12346,12353,12436,12445,12446,12449,12538,12540,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65138,65140,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],o=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,768,846,864,866,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1155,1158,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1425,1441,1443,1465,1467,1469,1471,1471,1473,1474,1476,1476,1488,1514,1520,1522,1569,1594,1600,1621,1632,1641,1648,1747,1749,1756,1759,1768,1770,1773,1776,1788,1808,1836,1840,1866,1920,1968,2305,2307,2309,2361,2364,2381,2384,2388,2392,2403,2406,2415,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2492,2494,2500,2503,2504,2507,2509,2519,2519,2524,2525,2527,2531,2534,2545,2562,2562,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2649,2652,2654,2654,2662,2676,2689,2691,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2784,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2876,2883,2887,2888,2891,2893,2902,2903,2908,2909,2911,2913,2918,2927,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3006,3010,3014,3016,3018,3021,3031,3031,3047,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3134,3140,3142,3144,3146,3149,3157,3158,3168,3169,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3262,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3297,3302,3311,3330,3331,3333,3340,3342,3344,3346,3368,3370,3385,3390,3395,3398,3400,3402,3405,3415,3415,3424,3425,3430,3439,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3805,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3946,3953,3972,3974,3979,3984,3991,3993,4028,4038,4038,4096,4129,4131,4135,4137,4138,4140,4146,4150,4153,4160,4169,4176,4185,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,4969,4977,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6099,6112,6121,6160,6169,6176,6263,6272,6313,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8255,8256,8319,8319,8400,8412,8417,8417,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12335,12337,12341,12344,12346,12353,12436,12441,12442,12445,12446,12449,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65056,65059,65075,65076,65101,65103,65136,65138,65140,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65381,65470,65474,65479,65482,65487,65490,65495,65498,65500],r=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2208,2208,2210,2220,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3807,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7098,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7413,7414,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11506,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43744,43754,43762,43764,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],i=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,768,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1155,1159,1162,1319,1329,1366,1369,1369,1377,1415,1425,1469,1471,1471,1473,1474,1476,1477,1479,1479,1488,1514,1520,1522,1552,1562,1568,1641,1646,1747,1749,1756,1759,1768,1770,1788,1791,1791,1808,1866,1869,1969,1984,2037,2042,2042,2048,2093,2112,2139,2208,2208,2210,2220,2276,2302,2304,2403,2406,2415,2417,2423,2425,2431,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2500,2503,2504,2507,2510,2519,2519,2524,2525,2527,2531,2534,2545,2561,2563,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2641,2641,2649,2652,2654,2654,2662,2677,2689,2691,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2787,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2876,2884,2887,2888,2891,2893,2902,2903,2908,2909,2911,2915,2918,2927,2929,2929,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3006,3010,3014,3016,3018,3021,3024,3024,3031,3031,3046,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3140,3142,3144,3146,3149,3157,3158,3160,3161,3168,3171,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3260,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3299,3302,3311,3313,3314,3330,3331,3333,3340,3342,3344,3346,3386,3389,3396,3398,3400,3402,3406,3415,3415,3424,3427,3430,3439,3450,3455,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3807,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3948,3953,3972,3974,3991,3993,4028,4038,4038,4096,4169,4176,4253,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4957,4959,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5908,5920,5940,5952,5971,5984,5996,5998,6e3,6002,6003,6016,6099,6103,6103,6108,6109,6112,6121,6155,6157,6160,6169,6176,6263,6272,6314,6320,6389,6400,6428,6432,6443,6448,6459,6470,6509,6512,6516,6528,6571,6576,6601,6608,6617,6656,6683,6688,6750,6752,6780,6783,6793,6800,6809,6823,6823,6912,6987,6992,7001,7019,7027,7040,7155,7168,7223,7232,7241,7245,7293,7376,7378,7380,7414,7424,7654,7676,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8204,8205,8255,8256,8276,8276,8305,8305,8319,8319,8336,8348,8400,8412,8417,8417,8421,8432,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11647,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11744,11775,11823,11823,12293,12295,12321,12335,12337,12341,12344,12348,12353,12438,12441,12442,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42539,42560,42607,42612,42621,42623,42647,42655,42737,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43047,43072,43123,43136,43204,43216,43225,43232,43255,43259,43259,43264,43309,43312,43347,43360,43388,43392,43456,43471,43481,43520,43574,43584,43597,43600,43609,43616,43638,43642,43643,43648,43714,43739,43741,43744,43759,43762,43766,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44010,44012,44013,44016,44025,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65024,65039,65056,65062,65075,65076,65101,65103,65136,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500];function a(e,t){if(e<t[0])return!1;for(var n,o=0,r=t.length;o+1<r;){if(n=o+(r-o)/2,t[n-=n%2]<=e&&e<=t[n+1])return!0;e<t[n]?r=n:o=n+2}return!1}function s(e,t){return a(e,1<=t?r:n)}P.isUnicodeIdentifierStart=s;var l,t=(l=[],F.forEach(function(e,t){l[e]=t}),l);function c(e){for(var t=new Array,n=0,o=0;n<e.length;){var r=e.charCodeAt(n);switch(n++,r){case 13:10===e.charCodeAt(n)&&n++;case 10:t.push(o),o=n;break;default:127<r&&G(r)&&(t.push(o),o=n)}}return t.push(o),t}function u(e,t,n,o){P.Debug.assert(0<=t&&t<e.length);var r=e[t]+n;return t<e.length-1?P.Debug.assert(r<e[t+1]):void 0!==o&&P.Debug.assert(r<=o.length),r}function g(e){return e.lineMap||(e.lineMap=c(e.text))}function p(e,t){var n=P.binarySearch(e,t);return n<0&&(n=~n-1,P.Debug.assert(-1!==n,"position cannot precede the beginning of the file")),{line:n,character:t-e[n]}}function U(e){return H(e)||G(e)}function H(e){return 32===e||9===e||11===e||12===e||160===e||133===e||5760===e||8192<=e&&e<=8203||8239===e||8287===e||12288===e||65279===e}function G(e){return 10===e||13===e||8232===e||8233===e}function V(e){return 48<=e&&e<=57}function W(e){return 48<=e&&e<=55}P.tokenToString=function(e){return t[e]},P.stringToToken=function(e){return F.get(e)},P.computeLineStarts=c,P.getPositionOfLineAndCharacter=function(e,t,n){return u(g(e),t,n,e.text)},P.computePositionOfLineAndCharacter=u,P.getLineStarts=g,P.computeLineAndCharacterOfPosition=p,P.getLineAndCharacterOfPosition=function(e,t){return p(g(e),t)},P.isWhiteSpaceLike=U,P.isWhiteSpaceSingleLine=H,P.isLineBreak=G,P.isOctalDigit=W,P.couldStartTrivia=function(e,t){var n=e.charCodeAt(t);switch(n){case 13:case 10:case 9:case 11:case 12:case 32:case 47:case 60:case 124:case 61:case 62:return!0;case 35:return 0===t;default:return 127<n}},P.skipTrivia=function(e,t,n,o){if(void 0===o&&(o=!1),P.positionIsSynthesized(t))return t;for(;;){var r=e.charCodeAt(t);switch(r){case 13:10===e.charCodeAt(t+1)&&t++;case 10:if(t++,n)return t;continue;case 9:case 11:case 12:case 32:t++;continue;case 47:if(o)break;if(47===e.charCodeAt(t+1)){for(t+=2;t<e.length&&!G(e.charCodeAt(t));)t++;continue}if(42===e.charCodeAt(t+1)){for(t+=2;t<e.length;){if(42===e.charCodeAt(t)&&47===e.charCodeAt(t+1)){t+=2;break}t++}continue}break;case 60:case 124:case 61:case 62:if(K(e,t)){t=z(e,t);continue}break;case 35:if(0===t&&j(e,t)){t=Y(e,t);continue}break;default:if(127<r&&U(r)){t++;continue}}return t}};var d="<<<<<<<".length;function K(e,t){if(P.Debug.assert(0<=t),0===t||G(e.charCodeAt(t-1))){var n=e.charCodeAt(t);if(t+d<e.length){for(var o=0;o<d;o++)if(e.charCodeAt(t+o)!==n)return!1;return 61===n||32===e.charCodeAt(t+d)}}return!1}function z(e,t,n){n&&n(P.Diagnostics.Merge_conflict_marker_encountered,d);var o=e.charCodeAt(t),r=e.length;if(60===o||62===o)for(;t<r&&!G(e.charCodeAt(t));)t++;else for(P.Debug.assert(124===o||61===o);t<r;){var i=e.charCodeAt(t);if((61===i||62===i)&&i!==o&&K(e,t))break;t++}return t}var _=/^#!.*/;function j(e,t){return P.Debug.assert(0===t),_.test(e)}function Y(e,t){return t+=_.exec(e)[0].length}function f(e,t,n,o,r,i,a){var s,l,c,u,g=!1,p=o||0===n,d=a;e:for(;0<=n&&n<t.length;){var _=t.charCodeAt(n);switch(_){case 13:10===t.charCodeAt(n+1)&&n++;case 10:if(n++,o)break e;p=!0,g&&(u=!0);continue;case 9:case 11:case 12:case 32:n++;continue;case 47:var f=t.charCodeAt(n+1),h=!1;if(47===f||42===f){var m=47===f?2:3,y=n;if(n+=2,47===f)for(;n<t.length;){if(G(t.charCodeAt(n))){h=!0;break}n++}else for(;n<t.length;){if(42===t.charCodeAt(n)&&47===t.charCodeAt(n+1)){n+=2;break}n++}if(p){if(g){if(d=r(s,l,c,u,i,d),!e&&d)return d;g=!1}s=y,l=n,c=m,u=h,g=!0}continue}break e;default:if(127<_&&U(_)){g&&G(_)&&(u=!0),n++;continue}break e}}return g&&(d=r(s,l,c,u,i,d)),d}function h(e,t,n,o,r){return f(!0,e,t,!1,n,o,r)}function m(e,t,n,o,r){return f(!0,e,t,!0,n,o,r)}function y(e,t,n,o,r,i){return i||(i=[]),i.push({kind:n,pos:e,end:t,hasTrailingNewLine:o}),i}function X(e,t){return 65<=e&&e<=90||97<=e&&e<=122||36===e||95===e||127<e&&s(e,t)}function J(e,t){return 65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||36===e||95===e||127<e&&a(e,1<=t?i:o)}P.forEachLeadingCommentRange=function(e,t,n,o){return f(!1,e,t,!1,n,o)},P.forEachTrailingCommentRange=function(e,t,n,o){return f(!1,e,t,!0,n,o)},P.reduceEachLeadingCommentRange=h,P.reduceEachTrailingCommentRange=m,P.getLeadingCommentRanges=function(e,t){return h(e,t,y,void 0,void 0)},P.getTrailingCommentRanges=function(e,t){return m(e,t,y,void 0,void 0)},P.getShebang=function(e){var t=_.exec(e);if(t)return t[0]},P.isIdentifierStart=X,P.isIdentifierPart=J,P.isIdentifierText=function(e,t){if(!X(e.charCodeAt(0),t))return!1;for(var n=1;n<e.length;n++)if(!J(e.charCodeAt(n),t))return!1;return!0},P.createScanner=function(i,a,s,d,n,e,t){var _,f,h,m,y,v,b,k,T,l;return void 0===s&&(s=0),R(d,e,t),{getStartPos:function(){return h},getTextPos:function(){return _},getToken:function(){return y},getTokenPos:function(){return m},getTokenText:function(){return d.substring(m,_)},getTokenValue:function(){return v},hasExtendedUnicodeEscape:function(){return k},hasPrecedingLineBreak:function(){return b},isIdentifier:function(){return 71===y||107<y},isReservedWord:function(){return 72<=y&&y<=107},isUnterminated:function(){return T},getNumericLiteralFlags:function(){return l},reScanGreaterToken:function(){if(29===y){if(62===d.charCodeAt(_))return 62===d.charCodeAt(_+1)?61===d.charCodeAt(_+2)?(_+=3,y=67):(_+=2,y=47):61===d.charCodeAt(_+1)?(_+=2,y=66):(_++,y=46);if(61===d.charCodeAt(_))return _++,y=31}return y},reScanSlashToken:function(){if(41===y||63===y){for(var e=m+1,t=!1,n=!1;;){if(f<=e){T=!0,c(P.Diagnostics.Unterminated_regular_expression_literal);break}var o=d.charCodeAt(e);if(G(o)){T=!0,c(P.Diagnostics.Unterminated_regular_expression_literal);break}if(t)t=!1;else{if(47===o&&!n){e++;break}91===o?n=!0:92===o?t=!0:93===o&&(n=!1)}e++}for(;e<f&&J(d.charCodeAt(e),i);)e++;_=e,v=d.substring(m,_),y=12}return y},reScanTemplateToken:function(){return P.Debug.assert(18===y,"'reScanTemplateToken' should only be called on a '}'"),_=m,y=S()},scanJsxIdentifier:function(){if(M(y)){for(var e=_;_<f;){var t=d.charCodeAt(_);if(45!==t&&(e===_?!X(t,i):!J(t,i)))break;_++}v+=d.substr(e,_-e)}return y},scanJsxAttributeValue:function(){switch(h=_,d.charCodeAt(_)){case 34:case 39:return v=E(!1),y=9;default:return N()}},reScanJsxToken:function(){return _=m=h,y=w()},scanJsxToken:w,scanJSDocToken:function(){if(f<=_)return y=1;m=h=_;var e=d.charCodeAt(_);switch(e){case 9:case 11:case 12:case 32:for(;_<f&&H(d.charCodeAt(_));)_++;return y=5;case 64:return _++,y=57;case 10:case 13:return _++,y=4;case 42:return _++,y=39;case 123:return _++,y=17;case 125:return _++,y=18;case 91:return _++,y=21;case 93:return _++,y=22;case 60:return _++,y=27;case 62:return _++,y=29;case 61:return _++,y=58;case 44:return _++,y=26;case 46:return _++,y=23}if(X(e,5)){for(_++;J(d.charCodeAt(_),5)&&_<f;)_++;return y=71}return _+=1,y=0},scan:N,getText:function(){return d},setText:R,setScriptTarget:function(e){i=e},setLanguageVariant:function(e){s=e},setOnError:function(e){n=e},setTextPos:L,tryScan:function(e){return O(e,!1)},lookAhead:function(e){return O(e,!0)},scanRange:function(e,t,n){var o=f,r=_,i=h,a=m,s=y,l=b,c=v,u=k,g=T;R(d,e,t);var p=n();return f=o,_=r,h=i,m=a,y=s,b=l,v=c,k=u,T=g,p}};function c(e,t){n&&n(e,t||0)}function u(){for(var e=_;V(d.charCodeAt(_));)_++;if(46===d.charCodeAt(_))for(_++;V(d.charCodeAt(_));)_++;var t=_;if(69===d.charCodeAt(_)||101===d.charCodeAt(_))if(_++,l=2,43!==d.charCodeAt(_)&&45!==d.charCodeAt(_)||_++,V(d.charCodeAt(_))){for(_++;V(d.charCodeAt(_));)_++;t=_}else c(P.Diagnostics.Digit_expected);return""+ +d.substring(e,t)}function g(){for(var e=_;W(d.charCodeAt(_));)_++;return+d.substring(e,_)}function o(e){return r(e,!1)}function p(e){return r(e,!0)}function r(e,t){for(var n=0,o=0;n<e||t;){var r=d.charCodeAt(_);if(48<=r&&r<=57)o=16*o+r-48;else if(65<=r&&r<=70)o=16*o+r-65+10;else{if(!(97<=r&&r<=102))break;o=16*o+r-97+10}_++,n++}return n<e&&(o=-1),o}function E(e){void 0===e&&(e=!0);for(var t=d.charCodeAt(_),n="",o=++_;;){if(f<=_){n+=d.substring(o,_),T=!0,c(P.Diagnostics.Unterminated_string_literal);break}var r=d.charCodeAt(_);if(r===t){n+=d.substring(o,_),_++;break}if(92===r&&e)n+=d.substring(o,_),n+=C(),o=_;else{if(G(r)){n+=d.substring(o,_),T=!0,c(P.Diagnostics.Unterminated_string_literal);break}_++}}return n}function S(){for(var e,t=96===d.charCodeAt(_),n=++_,o="";;){if(f<=_){o+=d.substring(n,_),T=!0,c(P.Diagnostics.Unterminated_template_literal),e=t?13:16;break}var r=d.charCodeAt(_);if(96===r){o+=d.substring(n,_),_++,e=t?13:16;break}if(36===r&&_+1<f&&123===d.charCodeAt(_+1)){o+=d.substring(n,_),_+=2,e=t?14:15;break}92!==r?13!==r?_++:(o+=d.substring(n,_),++_<f&&10===d.charCodeAt(_)&&_++,o+="\n",n=_):(o+=d.substring(n,_),o+=C(),n=_)}return P.Debug.assert(void 0!==e),v=o,e}function C(){if(f<=++_)return c(P.Diagnostics.Unexpected_end_of_text),"";var e,t,n=d.charCodeAt(_);switch(_++,n){case 48:return"\0";case 98:return"\b";case 116:return"\t";case 110:return"\n";case 118:return"\v";case 102:return"\f";case 114:return"\r";case 39:return"'";case 34:return'"';case 117:return _<f&&123===d.charCodeAt(_)?(k=!0,_++,e=p(1),t=!1,e<0?(c(P.Diagnostics.Hexadecimal_digit_expected),t=!0):1114111<e&&(c(P.Diagnostics.An_extended_Unicode_escape_value_must_be_between_0x0_and_0x10FFFF_inclusive),t=!0),f<=_?(c(P.Diagnostics.Unexpected_end_of_text),t=!0):125===d.charCodeAt(_)?_++:(c(P.Diagnostics.Unterminated_Unicode_escape_sequence),t=!0),t?"":function(e){if(P.Debug.assert(0<=e&&e<=1114111),e<=65535)return String.fromCharCode(e);var t=Math.floor((e-65536)/1024)+55296,n=(e-65536)%1024+56320;return String.fromCharCode(t,n)}(e)):x(4);case 120:return x(2);case 13:_<f&&10===d.charCodeAt(_)&&_++;case 10:case 8232:case 8233:return"";default:return String.fromCharCode(n)}}function x(e){var t=o(e);return 0<=t?String.fromCharCode(t):(c(P.Diagnostics.Hexadecimal_digit_expected),"")}function A(){if(_+5<f&&117===d.charCodeAt(_+1)){var e=_;_+=2;var t=o(4);return _=e,t}return-1}function D(){for(var e="",t=_;_<f;){var n=d.charCodeAt(_);if(J(n,i))_++;else{if(92!==n)break;if(!(0<=(n=A())&&J(n,i)))break;e+=d.substring(t,_),e+=String.fromCharCode(n),t=_+=6}}return e+=d.substring(t,_)}function B(){var e=v.length;if(2<=e&&e<=11){var t=v.charCodeAt(0);if(97<=t&&t<=122&&void 0!==(y=F.get(v)))return y}return y=71}function I(e){P.Debug.assert(2===e||8===e,"Expected either base 2 or base 8");for(var t=0,n=0;;){var o=d.charCodeAt(_),r=o-48;if(!V(o)||e<=r)break;t=t*e+r,_++,n++}return 0===n?-1:t}function N(){for(h=_,T=b=k=!1,l=0;;){if(f<=(m=_))return y=1;var e=d.charCodeAt(_);if(35===e&&0===_&&j(d,_)){if(_=Y(d,_),a)continue;return y=6}switch(e){case 10:case 13:if(b=!0,a){_++;continue}return 13===e&&_+1<f&&10===d.charCodeAt(_+1)?_+=2:_++,y=4;case 9:case 11:case 12:case 32:if(a){_++;continue}for(;_<f&&H(d.charCodeAt(_));)_++;return y=5;case 33:return 61===d.charCodeAt(_+1)?61===d.charCodeAt(_+2)?(_+=3,y=35):(_+=2,y=33):(_++,y=51);case 34:case 39:return v=E(),y=9;case 96:return y=S();case 37:return 61===d.charCodeAt(_+1)?(_+=2,y=64):(_++,y=42);case 38:return 38===d.charCodeAt(_+1)?(_+=2,y=53):61===d.charCodeAt(_+1)?(_+=2,y=68):(_++,y=48);case 40:return _++,y=19;case 41:return _++,y=20;case 42:return 61===d.charCodeAt(_+1)?(_+=2,y=61):42===d.charCodeAt(_+1)?61===d.charCodeAt(_+2)?(_+=3,y=62):(_+=2,y=40):(_++,y=39);case 43:return 43===d.charCodeAt(_+1)?(_+=2,y=43):61===d.charCodeAt(_+1)?(_+=2,y=59):(_++,y=37);case 44:return _++,y=26;case 45:return 45===d.charCodeAt(_+1)?(_+=2,y=44):61===d.charCodeAt(_+1)?(_+=2,y=60):(_++,y=38);case 46:return V(d.charCodeAt(_+1))?(v=u(),y=8):46===d.charCodeAt(_+1)&&46===d.charCodeAt(_+2)?(_+=3,y=24):(_++,y=23);case 47:if(47===d.charCodeAt(_+1)){for(_+=2;_<f&&!G(d.charCodeAt(_));)_++;if(a)continue;return y=2}if(42===d.charCodeAt(_+1)){_+=2;for(var t=!1;_<f;){var n=d.charCodeAt(_);if(42===n&&47===d.charCodeAt(_+1)){_+=2,t=!0;break}G(n)&&(b=!0),_++}if(t||c(P.Diagnostics.Asterisk_Slash_expected),a)continue;return T=!t,y=3}return 61===d.charCodeAt(_+1)?(_+=2,y=63):(_++,y=41);case 48:var o;if(_+2<f&&(88===d.charCodeAt(_+1)||120===d.charCodeAt(_+1)))return _+=2,(o=p(1))<0&&(c(P.Diagnostics.Hexadecimal_digit_expected),o=0),v=""+o,y=l=8;if(_+2<f&&(66===d.charCodeAt(_+1)||98===d.charCodeAt(_+1)))return _+=2,(o=I(2))<0&&(c(P.Diagnostics.Binary_digit_expected),o=0),v=""+o,l=16,y=8;if(_+2<f&&(79===d.charCodeAt(_+1)||111===d.charCodeAt(_+1)))return _+=2,(o=I(8))<0&&(c(P.Diagnostics.Octal_digit_expected),o=0),v=""+o,l=32,y=8;if(_+1<f&&W(d.charCodeAt(_+1)))return v=""+g(),l=4,y=8;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return v=u(),y=8;case 58:return _++,y=56;case 59:return _++,y=25;case 60:if(K(d,_)){if(_=z(d,_,c),a)continue;return y=7}return 60===d.charCodeAt(_+1)?61===d.charCodeAt(_+2)?(_+=3,y=65):(_+=2,y=45):61===d.charCodeAt(_+1)?(_+=2,y=30):1===s&&47===d.charCodeAt(_+1)&&42!==d.charCodeAt(_+2)?(_+=2,y=28):(_++,y=27);case 61:if(K(d,_)){if(_=z(d,_,c),a)continue;return y=7}return 61===d.charCodeAt(_+1)?61===d.charCodeAt(_+2)?(_+=3,y=34):(_+=2,y=32):62===d.charCodeAt(_+1)?(_+=2,y=36):(_++,y=58);case 62:if(K(d,_)){if(_=z(d,_,c),a)continue;return y=7}return _++,y=29;case 63:return _++,y=55;case 91:return _++,y=21;case 93:return _++,y=22;case 94:return 61===d.charCodeAt(_+1)?(_+=2,y=70):(_++,y=50);case 123:return _++,y=17;case 124:if(K(d,_)){if(_=z(d,_,c),a)continue;return y=7}return 124===d.charCodeAt(_+1)?(_+=2,y=54):61===d.charCodeAt(_+1)?(_+=2,y=69):(_++,y=49);case 125:return _++,y=18;case 126:return _++,y=52;case 64:return _++,y=57;case 92:var r=A();return 0<=r&&X(r,i)?(_+=6,v=String.fromCharCode(r)+D(),y=B()):(c(P.Diagnostics.Invalid_character),_++,y=0);default:if(X(e,i)){for(_++;_<f&&J(e=d.charCodeAt(_),i);)_++;return v=d.substring(m,_),92===e&&(v+=D()),y=B()}if(H(e)){_++;continue}if(G(e)){b=!0,_++;continue}return c(P.Diagnostics.Invalid_character),_++,y=0}}}function w(){if(h=m=_,f<=_)return y=1;var e=d.charCodeAt(_);if(60===e)return 47===d.charCodeAt(_+1)?(_+=2,y=28):(_++,y=27);if(123===e)return _++,y=17;for(var t=0;_<f&&123!==(e=d.charCodeAt(_));){if(60===e){if(K(d,_))return _=z(d,_,c),y=7;break}G(e)&&0===t?t=-1:U(e)||(t=_),_++}return-1===t?11:10}function O(e,t){var n=_,o=h,r=m,i=y,a=v,s=b,l=e();return l&&!t||(_=n,h=o,m=r,y=i,v=a,b=s),l}function R(e,t,n){d=e||"",f=void 0===n?d.length:t+n,L(t||0)}function L(e){P.Debug.assert(0<=e),m=h=_=e,v=void(y=0),T=k=b=!1}}}(ts||(ts={})),function(f){f.emptyArray=[],f.emptyMap=f.createMap(),f.externalHelpersModuleNameText="tslib",f.getDeclarationOfKind=function(e,t){var n=e.declarations;if(n)for(var o=0,r=n;o<r.length;o++){var i=r[o];if(i.kind===t)return i}};var t,e,n=(t="",{string:function(){return t},writeKeyword:e=function(e){return t+=e},writeOperator:e,writePunctuation:e,writeSpace:e,writeStringLiteral:e,writeParameter:e,writeProperty:e,writeSymbol:e,writeLine:function(){return t+=" "},increaseIndent:f.noop,decreaseIndent:f.noop,clear:function(){return t=""},trackSymbol:f.noop,reportInaccessibleThisError:f.noop,reportPrivateInBaseOfClassExpression:f.noop});function o(e){return e.end-e.pos}function r(e){return function(e){if(!(262144&e.flags)){var t=0!=(32768&e.flags)||f.forEachChild(e,r);t&&(e.flags|=131072),e.flags|=262144}}(e),0!=(131072&e.flags)}function i(e){for(;e&&265!==e.kind;)e=e.parent;return e}function a(e,t){f.Debug.assert(0<=e);var n=f.getLineStarts(t),o=e,r=t.text;if(o+1===n.length)return r.length-1;var i=n[o],a=n[o+1]-1;for(f.Debug.assert(f.isLineBreak(r.charCodeAt(a)));i<=a&&f.isLineBreak(r.charCodeAt(a));)a--;return a}function s(e){return void 0===e||e.pos===e.end&&0<=e.pos&&1!==e.kind}function l(e){return!s(e)}function _(e,t){return 42===e.charCodeAt(t.pos+1)&&33===e.charCodeAt(t.pos+2)}function c(e,t,n){return s(e)?e.pos:f.isJSDocNode(e)?f.skipTrivia((t||i(e)).text,e.pos,!1,!0):n&&f.hasJSDocNodes(e)?c(e.jsDoc[0]):286===e.kind&&0<e._children.length?c(e._children[0],t,n):f.skipTrivia((t||i(e)).text,e.pos)}function u(e,t,n){if(void 0===n&&(n=!1),s(t))return"";var o=e.text;return o.substring(n?t.pos:f.skipTrivia(o,t.pos),t.end)}function g(e,t){return s(t)?"":e.substring(f.skipTrivia(e,t.pos),t.end)}function p(e,t){return void 0===t&&(t=!1),u(i(e),e,t)}function d(e,t){var n=e.pos,o=t.pos;return n<o?-1:o<n?1:0}function h(e){var t=e.emitNode;return t&&t.flags}function m(e){return 2<=e.length&&95===e.charCodeAt(0)&&95===e.charCodeAt(1)?"_"+e:e}function y(e){var t=ge(e);return 226===t.kind&&260===t.parent.kind}function v(e){return e&&233===e.kind&&(9===e.name.kind||k(e))}function b(e){return f.isModuleDeclaration(e)&&9===e.name.kind}function k(e){return!!(512&e.flags)}function T(e,t){switch(e.kind){case 265:case 235:case 260:case 233:case 214:case 215:case 216:case 152:case 151:case 153:case 154:case 228:case 186:case 187:return!0;case 207:return t&&!f.isFunctionLike(t)}return!1}function E(e){return 0===o(e)?"(Missing)":p(e)}function S(e){switch(e.kind){case 71:return e.escapedText;case 9:case 8:return m(e.text);case 144:if(re(e.expression))return m(e.expression.text)}}function C(e,t,n,o,r,i){var a=A(e,t);return f.createFileDiagnostic(e,a.start,a.length,n,o,r,i)}function x(e,t){var n=f.createScanner(e.languageVersion,!0,e.languageVariant,e.text,void 0,t);n.scan();var o=n.getTokenPos();return f.createTextSpanFromBounds(o,n.getTextPos())}function A(e,t){var n=t;switch(t.kind){case 265:var o=f.skipTrivia(e.text,0,!1);return o===e.text.length?f.createTextSpan(0,0):x(e,o);case 226:case 176:case 229:case 199:case 230:case 233:case 232:case 264:case 228:case 186:case 151:case 153:case 154:case 231:n=t.name;break;case 187:return function(e,t){var n=f.skipTrivia(e.text,t.pos);if(t.body&&207===t.body.kind){var o=f.getLineAndCharacterOfPosition(e,t.body.pos).line;if(o<f.getLineAndCharacterOfPosition(e,t.body.end).line)return f.createTextSpan(n,a(o,e)-n+1)}return f.createTextSpanFromBounds(n,t.end)}(e,t)}if(void 0===n)return x(e,t.pos);var r=s(n)?n.pos:f.skipTrivia(e.text,n.pos);return f.createTextSpanFromBounds(r,n.end)}function D(e){return!!(2&f.getCombinedNodeFlags(e))||!!(2048&f.getCombinedModifierFlags(e))}f.usingSingleLineStringWriter=function(e){var t=n.string();try{return e(n),n.string()}finally{n.clear(),n.writeKeyword(t)}},f.getFullWidth=o,f.getResolvedModule=function(e,t){return e&&e.resolvedModules&&e.resolvedModules.get(t)},f.setResolvedModule=function(e,t,n){e.resolvedModules||(e.resolvedModules=f.createMap()),e.resolvedModules.set(t,n)},f.setResolvedTypeReferenceDirective=function(e,t,n){e.resolvedTypeReferenceDirectiveNames||(e.resolvedTypeReferenceDirectiveNames=f.createMap()),e.resolvedTypeReferenceDirectiveNames.set(t,n)},f.moduleResolutionIsEqualTo=function(e,t){return e.isExternalLibraryImport===t.isExternalLibraryImport&&e.extension===t.extension&&e.resolvedFileName===t.resolvedFileName&&(n=e.packageId,o=t.packageId,n===o||n&&o&&n.name===o.name&&n.subModuleName===o.subModuleName&&n.version===o.version);var n,o},f.typeDirectiveIsEqualTo=function(e,t){return e.resolvedFileName===t.resolvedFileName&&e.primary===t.primary},f.hasChangesInResolutions=function(e,t,n,o){f.Debug.assert(e.length===t.length);for(var r=0;r<e.length;r++){var i=t[r],a=n&&n.get(e[r]);if(a?!i||!o(a,i):i)return!0}return!1},f.containsParseError=r,f.getSourceFileOfNode=i,f.isStatementWithLocals=function(e){switch(e.kind){case 207:case 235:case 214:case 215:case 216:return!0}return!1},f.getStartPositionOfLine=function(e,t){return f.Debug.assert(0<=e),f.getLineStarts(t)[e]},f.nodePosToString=function(e){var t=i(e),n=f.getLineAndCharacterOfPosition(t,e.pos);return t.fileName+"("+(n.line+1)+","+(n.character+1)+")"},f.getEndLinePosition=a,f.nodeIsMissing=s,f.nodeIsPresent=l,f.isRecognizedTripleSlashComment=function(e,t,n){if(47===e.charCodeAt(t+1)&&t+2<n&&47===e.charCodeAt(t+2)){var o=e.substring(t,n);return!!(o.match(f.fullTripleSlashReferencePathRegEx)||o.match(f.fullTripleSlashAMDReferencePathRegEx)||o.match(B)||o.match(O))}return!1},f.isPinnedComment=_,f.getTokenPosOfNode=c,f.getNonDecoratorTokenPosOfNode=function(e,t){return s(e)||!e.decorators?c(e,t):f.skipTrivia((t||i(e)).text,e.decorators.end)},f.getSourceTextOfNodeFromSourceFile=u,f.getTextOfNodeFromSourceText=g,f.getTextOfNode=p,f.indexOfNode=function(e,t){return f.binarySearch(e,t,d)},f.getEmitFlags=h,f.getLiteralText=function(e,t){if(!pe(e)&&e.parent)return u(t,e);var n=16777216&h(e)?ke:xe;switch(e.kind){case 9:return e.singleQuote?"'"+n(e.text,39)+"'":'"'+n(e.text,34)+'"';case 13:return"`"+n(e.text,96)+"`";case 14:return"`"+n(e.text,96)+"${";case 15:return"}"+n(e.text,96)+"${";case 16:return"}"+n(e.text,96)+"`";case 8:case 12:return e.text}f.Debug.fail("Literal kind '"+e.kind+"' not accounted for.")},f.getTextOfConstantValue=function(e){return f.isString(e)?'"'+xe(e)+'"':""+e},f.escapeLeadingUnderscores=m,f.escapeIdentifier=function(e){return e},f.makeIdentifierFromModuleName=function(e){return f.getBaseFileName(e).replace(/^(\d)/,"_$1").replace(/\W/g,"_")},f.isBlockOrCatchScoped=function(e){return 0!=(3&f.getCombinedNodeFlags(e))||y(e)},f.isCatchClauseVariableDeclarationOrBindingElement=y,f.isAmbientModule=v,f.isModuleWithStringLiteralName=b,f.isNonGlobalAmbientModule=function(e){return f.isModuleDeclaration(e)&&f.isStringLiteral(e.name)},f.isShorthandAmbientModuleSymbol=function(e){return(t=e.valueDeclaration)&&233===t.kind&&!t.body;var t},f.isBlockScopedContainerTopLevel=function(e){return 265===e.kind||233===e.kind||f.isFunctionLike(e)},f.isGlobalScopeAugmentation=k,f.isExternalModuleAugmentation=function(e){if(!e||!v(e))return!1;switch(e.parent.kind){case 265:return f.isExternalModule(e.parent);case 234:return v(e.parent.parent)&&!f.isExternalModule(e.parent.parent.parent)}return!1},f.isEffectiveExternalModule=function(e,t){return f.isExternalModule(e)||t.isolatedModules},f.isBlockScope=T,f.isDeclarationWithTypeParameters=function(e){switch(e.kind){case 155:case 156:case 150:case 157:case 160:case 161:case 273:case 229:case 199:case 230:case 231:case 282:case 228:case 151:case 152:case 153:case 154:case 186:case 187:return!0;default:return f.assertTypeIsNever(e),!1}},f.isAnyImportSyntax=function(e){switch(e.kind){case 238:case 237:return!0;default:return!1}},f.getEnclosingBlockScopeContainer=function(e){for(var t=e.parent;t;){if(T(t,t.parent))return t;t=t.parent}},f.declarationNameToString=E,f.getNameFromIndexInfo=function(e){return e.declaration?E(e.declaration.parameters[0].name):void 0},f.getTextOfPropertyName=S,f.entityNameToString=function e(t){switch(t.kind){case 71:return 0===o(t)?f.idText(t):p(t);case 143:return e(t.left)+"."+e(t.right);case 179:return e(t.expression)+"."+e(t.name)}},f.createDiagnosticForNode=function(e,t,n,o,r){return C(i(e),e,t,n,o,r)},f.createDiagnosticForNodeInSourceFile=C,f.createDiagnosticForNodeFromMessageChain=function(e,t){var n=i(e),o=A(n,e);return{file:n,start:o.start,length:o.length,code:t.code,category:t.category,messageText:t.next?t:t.messageText}},f.getSpanOfTokenAtPosition=x,f.getErrorSpanForNode=A,f.isExternalOrCommonJsModule=function(e){return void 0!==(e.externalModuleIndicator||e.commonJsModuleIndicator)},f.isConstEnumDeclaration=function(e){return 232===e.kind&&D(e)},f.isConst=D,f.isLet=function(e){return!!(1&f.getCombinedNodeFlags(e))},f.isSuperCall=function(e){return 181===e.kind&&97===e.expression.kind},f.isImportCall=function(e){return 181===e.kind&&91===e.expression.kind},f.isPrologueDirective=function(e){return 210===e.kind&&9===e.expression.kind},f.getLeadingCommentRangesOfNode=function(e,t){return 10!==e.kind?f.getLeadingCommentRanges(t.text,e.pos):void 0},f.getJSDocCommentRanges=function(e,t){var n=146===e.kind||145===e.kind||186===e.kind||187===e.kind||185===e.kind?f.concatenate(f.getTrailingCommentRanges(t,e.pos),f.getLeadingCommentRanges(t,e.pos)):f.getLeadingCommentRanges(t,e.pos);return f.filter(n,function(e){return 42===t.charCodeAt(e.pos+1)&&42===t.charCodeAt(e.pos+2)&&47!==t.charCodeAt(e.pos+3)})},f.fullTripleSlashReferencePathRegEx=/^(\/\/\/\s*<reference\s+path\s*=\s*)('|")(.+?)\2.*?\/>/;var B=/^(\/\/\/\s*<reference\s+types\s*=\s*)('|")(.+?)\2.*?\/>/;f.fullTripleSlashAMDReferencePathRegEx=/^(\/\/\/\s*<amd-dependency\s+path\s*=\s*)('|")(.+?)\2.*?\/>/;var I,N,w,O=/^(\/\/\/\s*<reference\s+no-default-lib\s*=\s*)('|")(.+?)\2\s*\/>/;function R(e){if(158<=e.kind&&e.kind<=173)return!0;switch(e.kind){case 119:case 133:case 136:case 122:case 137:case 139:case 130:return!0;case 105:return 190!==e.parent.kind;case 201:return!et(e);case 71:143===e.parent.kind&&e.parent.right===e?e=e.parent:179===e.parent.kind&&e.parent.name===e&&(e=e.parent),f.Debug.assert(71===e.kind||143===e.kind||179===e.kind,"'node' was expected to be a qualified name, identifier or property access in 'isPartOfTypeNode'.");case 143:case 179:case 99:var t=e.parent;if(162===t.kind)return!1;if(158<=t.kind&&t.kind<=173)return!0;switch(t.kind){case 201:return!et(t);case 145:return e===t.constraint;case 149:case 148:case 146:case 226:return e===t.type;case 228:case 186:case 187:case 152:case 151:case 150:case 153:case 154:return e===t.type;case 155:case 156:case 157:case 184:return e===t.type;case 181:case 182:return t.typeArguments&&0<=f.indexOf(t.typeArguments,e);case 183:return!1}}return!1}function L(e){if(e)switch(e.kind){case 176:case 264:case 146:case 261:case 149:case 148:case 262:case 226:return!0}return!1}function P(e,t){for(;;){if(!(e=e.parent))return;switch(e.kind){case 144:if(f.isClassLike(e.parent.parent))return e;e=e.parent;break;case 147:146===e.parent.kind&&f.isClassElement(e.parent.parent)?e=e.parent.parent:f.isClassElement(e.parent)&&(e=e.parent);break;case 187:if(!t)continue;case 228:case 186:case 233:case 149:case 148:case 151:case 150:case 152:case 153:case 154:case 155:case 156:case 157:case 232:case 265:return e}}}function M(e){switch(e.kind){case 229:return!0;case 149:return 229===e.parent.kind;case 153:case 154:case 151:return void 0!==e.body&&229===e.parent.kind;case 146:return void 0!==e.parent.body&&(152===e.parent.kind||151===e.parent.kind||154===e.parent.kind)&&229===e.parent.parent.kind}return!1}function F(e){return void 0!==e.decorators&&M(e)}function U(e){return F(e)||H(e)}function H(e){switch(e.kind){case 229:return f.forEach(e.members,U);case 151:case 154:return f.forEach(e.parameters,F)}}function G(e){var t=e.parent;return(251===t.kind||250===t.kind||252===t.kind)&&t.tagName===e}function V(e){switch(e.kind){case 97:case 95:case 101:case 86:case 12:case 177:case 178:case 179:case 180:case 181:case 182:case 183:case 202:case 184:case 203:case 185:case 186:case 199:case 187:case 190:case 188:case 189:case 192:case 193:case 194:case 195:case 198:case 196:case 13:case 200:case 249:case 250:case 197:case 191:case 204:return!0;case 143:for(;143===e.parent.kind;)e=e.parent;return 162===e.parent.kind||G(e);case 71:if(162===e.parent.kind||G(e))return!0;case 8:case 9:case 99:return W(e);default:return!1}}function W(e){var t=e.parent;switch(t.kind){case 226:case 146:case 149:case 148:case 264:case 261:case 176:return t.initializer===e;case 210:case 211:case 212:case 213:case 219:case 220:case 221:case 257:case 223:return t.expression===e;case 214:var n=t;return n.initializer===e&&227!==n.initializer.kind||n.condition===e||n.incrementor===e;case 215:case 216:var o=t;return o.initializer===e&&227!==o.initializer.kind||o.expression===e;case 184:case 202:case 205:case 144:return e===t.expression;case 147:case 256:case 255:case 263:return!0;case 201:return t.expression===e&&et(t);default:return V(t)}}function K(e){return 237===e.kind&&248===e.moduleReference.kind}function z(e){return j(e)}function j(e){return e&&!!(65536&e.flags)}function Y(e){if(!j(e))return 0;if(58!==e.operatorToken.kind||179!==e.left.kind)return 0;var t=e.left;if(71===t.expression.kind){var n=t.expression;return"exports"===n.escapedText?1:"module"===n.escapedText&&"exports"===t.name.escapedText?2:5}if(99===t.expression.kind)return 4;if(179===t.expression.kind){var o=t.expression;if(71===o.expression.kind){if("module"===o.expression.escapedText&&"exports"===o.name.escapedText)return 1;if("prototype"===o.name.escapedText)return 3}}return 0}function X(e){return f.isExpressionStatement(e)&&e.expression&&f.isBinaryExpression(e.expression)&&58===e.expression.operatorToken.kind&&e.expression.right}function J(e,t){return f.isVariableStatement(e)&&0<e.declarationList.declarations.length&&(!t||e.declarationList.declarations[0].initializer===t)&&e.declarationList.declarations[0].initializer}function q(e,t){return f.isVariableStatement(e)&&0<e.declarationList.declarations.length&&(!t||e.declarationList.declarations[0]===t)&&e.declarationList.declarations[0]}function Z(e){return 233===e.kind&&e.body&&233===e.body.kind&&e.body}function $(e){var o;return function e(t){var n=t.parent;n&&(261===n.kind||Z(n))&&e(n);n&&n.parent&&(q(n.parent,t)||X(n.parent))&&e(n.parent);n&&n.parent&&n.parent.parent&&J(n.parent.parent,t)&&e(n.parent.parent);146===t.kind&&(o=f.addRange(o,f.getJSDocParameterTags(t)));L(t)&&t.initializer&&f.hasJSDocNodes(t.initializer)&&(o=f.addRange(o,t.initializer.jsDoc));f.hasJSDocNodes(t)&&(o=f.addRange(o,t.jsDoc))}(e),o||f.emptyArray}function Q(e){return f.Debug.assert(275===e.parent.kind),e.parent.parent}function ee(e){return void 0!==e.dotDotDotToken}function te(e){for(var t=e.parent;;){switch(t.kind){case 194:var n=t.operatorToken.kind;return Ze(n)&&t.left===e?58===n?1:2:0;case 192:case 193:var o=t.operator;return 43===o||44===o?2:0;case 215:case 216:return t.initializer===e?1:0;case 185:case 177:case 198:e=t;break;case 262:if(t.name!==e)return 0;e=t.parent;break;case 261:if(t.name===e)return 0;e=t.parent;break;default:return 0}t=e.parent}}function ne(e){return tt(e.expression)}function oe(e,t){if(e)for(var n=0,o=e;n<o.length;n++){var r=o[n];if(r.token===t)return r}}function re(e){var t=e.kind;return 9===t||8===t}function ie(e){var t=f.getNameOfDeclaration(e);return t&&ae(t)}function ae(e){return 144===e.kind&&!re(e.expression)&&!se(e.expression)}function se(e){return f.isPropertyAccessExpression(e)&&ue(e.expression)}function le(e){if(71===e.kind)return e.escapedText;if(9===e.kind||8===e.kind)return m(e.text);if(144===e.kind){var t=e.expression;if(se(t))return ce(f.idText(t.name));if(9===t.kind||8===t.kind)return m(t.text)}}function ce(e){return"__@"+e}function ue(e){return 71===e.kind&&"Symbol"===e.escapedText}function ge(e){for(;176===e.kind;)e=e.parent.parent;return e}function pe(e){return f.positionIsSynthesized(e.pos)||f.positionIsSynthesized(e.end)}function de(e,t,n){switch(e){case 182:return n?0:1;case 192:case 189:case 190:case 188:case 191:case 195:case 197:return 1;case 194:switch(t){case 40:case 58:case 59:case 60:case 62:case 61:case 63:case 64:case 65:case 66:case 67:case 68:case 70:case 69:return 1}}return 0}function _e(e){return 194===e.kind?e.operatorToken.kind:192===e.kind||193===e.kind?e.operator:e.kind}function fe(e,t,n){switch(e){case 99:case 97:case 71:case 95:case 101:case 86:case 8:case 9:case 177:case 178:case 186:case 187:case 199:case 249:case 250:case 12:case 13:case 196:case 185:case 200:return 19;case 183:case 179:case 180:return 18;case 182:return n?18:17;case 181:return 17;case 193:return 16;case 192:case 189:case 190:case 188:case 191:return 15;case 194:switch(t){case 51:case 52:return 15;case 40:case 39:case 41:case 42:return 14;case 37:case 38:return 13;case 45:case 46:case 47:return 12;case 27:case 30:case 29:case 31:case 92:case 93:return 11;case 32:case 34:case 33:case 35:return 10;case 48:return 9;case 50:return 8;case 49:return 7;case 53:return 6;case 54:return 5;case 58:case 59:case 60:case 62:case 61:case 63:case 64:case 65:case 66:case 67:case 68:case 70:case 69:return 3;case 26:return 0;default:return-1}case 195:return 4;case 197:return 2;case 198:return 1;case 289:return 0;default:return-1}}f.isPartOfTypeNode=R,f.isChildOfNodeWithKind=function(e,t){for(;e;){if(e.kind===t)return!0;e=e.parent}return!1},f.forEachReturnStatement=function(e,n){return function e(t){switch(t.kind){case 219:return n(t);case 235:case 207:case 211:case 212:case 213:case 214:case 215:case 216:case 220:case 221:case 257:case 258:case 222:case 224:case 260:return f.forEachChild(t,e)}}(e)},f.forEachYieldExpression=function(e,r){return function e(t){switch(t.kind){case 197:r(t);var n=t.expression;return void(n&&e(n));case 232:case 230:case 233:case 231:case 229:case 199:return;default:if(f.isFunctionLike(t)){var o=t.name;if(o&&144===o.kind)return void e(o.expression)}else R(t)||f.forEachChild(t,e)}}(e)},f.getRestParameterElementType=function(e){return e&&164===e.kind?e.elementType:e&&159===e.kind?f.singleOrUndefined(e.typeArguments):void 0},f.isVariableLike=L,f.introducesArgumentsExoticObject=function(e){switch(e.kind){case 151:case 150:case 152:case 153:case 154:case 228:case 186:return!0}return!1},f.unwrapInnermostStatementOfLabel=function(e,t){for(;;){if(t&&t(e),222!==e.statement.kind)return e.statement;e=e.statement}},f.isFunctionBlock=function(e){return e&&207===e.kind&&f.isFunctionLike(e.parent)},f.isObjectLiteralMethod=function(e){return e&&151===e.kind&&178===e.parent.kind},f.isObjectLiteralOrClassExpressionMethod=function(e){return 151===e.kind&&(178===e.parent.kind||199===e.parent.kind)},f.isIdentifierTypePredicate=function(e){return e&&1===e.kind},f.isThisTypePredicate=function(e){return e&&0===e.kind},f.getPropertyAssignment=function(e,n,o){return f.filter(e.properties,function(e){if(261===e.kind){var t=S(e.name);return n===t||o&&o===t}})},f.getContainingFunction=function(e){return f.findAncestor(e.parent,f.isFunctionLike)},f.getContainingClass=function(e){return f.findAncestor(e.parent,f.isClassLike)},f.getThisContainer=P,f.getNewTargetContainer=function(e){var t=P(e,!1);if(t)switch(t.kind){case 152:case 228:case 186:return t}},f.getSuperContainer=function(e,t){for(;;){if(!(e=e.parent))return e;switch(e.kind){case 144:e=e.parent;break;case 228:case 186:case 187:if(!t)continue;case 149:case 148:case 151:case 150:case 152:case 153:case 154:return e;case 147:146===e.parent.kind&&f.isClassElement(e.parent.parent)?e=e.parent.parent:f.isClassElement(e.parent)&&(e=e.parent)}}},f.getImmediatelyInvokedFunctionExpression=function(e){if(186===e.kind||187===e.kind){for(var t=e,n=e.parent;185===n.kind;)n=(t=n).parent;if(181===n.kind&&n.expression===t)return n}},f.isSuperProperty=function(e){var t=e.kind;return(179===t||180===t)&&97===e.expression.kind},f.getEntityNameFromTypeNode=function(e){switch(e.kind){case 159:return e.typeName;case 201:return tt(e.expression)?e.expression:void 0;case 71:case 143:return e}},f.getInvokedExpression=function(e){return 183===e.kind?e.tag:f.isJsxOpeningLikeElement(e)?e.tagName:e.expression},f.nodeCanBeDecorated=M,f.nodeIsDecorated=F,f.nodeOrChildIsDecorated=U,f.childIsDecorated=H,f.isJSXTagName=G,f.isPartOfExpression=V,f.isInExpressionContext=W,f.isExternalModuleImportEqualsDeclaration=K,f.getExternalModuleImportEqualsDeclarationExpression=function(e){return f.Debug.assert(K(e)),e.moduleReference.expression},f.isInternalModuleImportEqualsDeclaration=function(e){return 237===e.kind&&248!==e.moduleReference.kind},f.isSourceFileJavaScript=z,f.isInJavaScriptFile=j,f.isInJSDoc=function(e){return e&&!!(1048576&e.flags)},f.isJSDocIndexSignature=function(e){return f.isTypeReferenceNode(e)&&f.isIdentifier(e.typeName)&&"Object"===e.typeName.escapedText&&e.typeArguments&&2===e.typeArguments.length&&(136===e.typeArguments[0].kind||133===e.typeArguments[0].kind)},f.isRequireCall=function(e,t){if(181!==e.kind)return!1;var n=e,o=n.expression,r=n.arguments;if(71!==o.kind||"require"!==o.escapedText)return!1;if(1!==r.length)return!1;var i=r[0];return!t||9===i.kind||13===i.kind},f.isSingleOrDoubleQuote=function(e){return 39===e||34===e},f.isStringDoubleQuoted=function(e,t){return 34===u(t,e).charCodeAt(0)},f.isDeclarationOfFunctionOrClassExpression=function(e){if(e.valueDeclaration&&226===e.valueDeclaration.kind){var t=e.valueDeclaration;return t.initializer&&(186===t.initializer.kind||199===t.initializer.kind)}return!1},f.getRightMostAssignedExpression=function(e){for(;Qe(e,!0);)e=e.right;return e},f.isExportsIdentifier=function(e){return f.isIdentifier(e)&&"exports"===e.escapedText},f.isModuleExportsPropertyAccessExpression=function(e){return f.isPropertyAccessExpression(e)&&f.isIdentifier(e.expression)&&"module"===e.expression.escapedText&&"exports"===e.name.escapedText},f.getSpecialPropertyAssignmentKind=Y,f.getExternalModuleName=function(e){if(238===e.kind)return e.moduleSpecifier;if(237===e.kind){var t=e.moduleReference;if(248===t.kind)return t.expression}return 244===e.kind?e.moduleSpecifier:b(e)?e.name:void 0},f.getNamespaceDeclarationNode=function(e){if(237===e.kind)return e;var t=e.importClause;return t&&t.namedBindings&&240===t.namedBindings.kind?t.namedBindings:void 0},f.isDefaultImport=function(e){return 238===e.kind&&e.importClause&&!!e.importClause.name},f.hasQuestionToken=function(e){if(e)switch(e.kind){case 146:case 151:case 150:case 262:case 261:case 149:case 148:return void 0!==e.questionToken}return!1},f.isJSDocConstructSignature=function(e){return 273===e.kind&&0<e.parameters.length&&e.parameters[0].name&&"new"===e.parameters[0].name.escapedText},f.getAllJSDocs=function(e){return f.isJSDocTypedefTag(e)?[e.parent]:$(e)},f.getSourceOfAssignment=X,f.getSingleInitializerOfVariableStatement=J,f.getSingleVariableOfVariableStatement=q,f.getNestedModuleDeclaration=Z,f.getJSDocCommentsAndTags=$,f.getParameterSymbolFromJSDoc=function(e){if(e.symbol)return e.symbol;if(f.isIdentifier(e.name)){var t=e.name.escapedText,n=Q(e),o=X(n)||J(n)||q(n)||Z(n)||n;if(o&&f.isFunctionLike(o)){var r=f.find(o.parameters,function(e){return 71===e.name.kind&&e.name.escapedText===t});return r&&r.symbol}}},f.getJSDocHost=Q,f.getTypeParameterFromJsDoc=function(e){var t=e.name.escapedText,n=e.parent.parent.parent.typeParameters;return f.find(n,function(e){return e.name.escapedText===t})},f.hasRestParameter=function(e){var t=f.lastOrUndefined(e.parameters);return t&&ee(t)},f.isRestParameter=ee,(I=f.AssignmentKind||(f.AssignmentKind={}))[I.None=0]="None",I[I.Definite=1]="Definite",I[I.Compound=2]="Compound",f.getAssignmentTargetKind=te,f.isAssignmentTarget=function(e){return 0!==te(e)},f.isDeleteTarget=function(e){if(179!==e.kind&&180!==e.kind)return!1;for(e=e.parent;e&&185===e.kind;)e=e.parent;return e&&188===e.kind},f.isNodeDescendantOf=function(e,t){for(;e;){if(e===t)return!0;e=e.parent}return!1},f.isInAmbientContext=function(e){for(;e;){if(je(e,2)||265===e.kind&&e.isDeclarationFile)return!0;e=e.parent}return!1},f.isDeclarationName=function(e){switch(e.kind){case 71:case 9:case 8:return f.isDeclaration(e.parent)&&e.parent.name===e;default:return!1}},f.isAnyDeclarationName=function(e){switch(e.kind){case 71:case 9:case 8:if(f.isDeclaration(e.parent))return e.parent.name===e;var t=e.parent.parent;return f.isBinaryExpression(t)&&0!==Y(t)&&f.getNameOfDeclaration(t)===e;default:return!1}},f.isLiteralComputedPropertyDeclarationName=function(e){return(9===e.kind||8===e.kind)&&144===e.parent.kind&&f.isDeclaration(e.parent.parent)},f.isIdentifierName=function(e){var t=e.parent;switch(t.kind){case 149:case 148:case 151:case 150:case 153:case 154:case 264:case 261:case 179:return t.name===e;case 143:if(t.right===e){for(;143===t.kind;)t=t.parent;return 162===t.kind}return!1;case 176:case 242:return t.propertyName===e;case 246:case 253:return!0}return!1},f.isAliasSymbolDeclaration=function(e){return 237===e.kind||236===e.kind||239===e.kind&&!!e.name||240===e.kind||242===e.kind||246===e.kind||243===e.kind&&ne(e)},f.exportAssignmentIsAlias=ne,f.getClassExtendsHeritageClauseElement=function(e){var t=oe(e.heritageClauses,85);return t&&0<t.types.length?t.types[0]:void 0},f.getClassImplementsHeritageClauseElements=function(e){var t=oe(e.heritageClauses,108);return t?t.types:void 0},f.getInterfaceBaseTypeNodes=function(e){var t=oe(e.heritageClauses,85);return t?t.types:void 0},f.getHeritageClause=oe,f.tryResolveScriptReference=function(e,t,n){if(!e.getCompilerOptions().noResolve){var o=f.isRootedDiskPath(n.fileName)?n.fileName:f.combinePaths(f.getDirectoryPath(t.fileName),n.fileName);return e.getSourceFile(o)}},f.getAncestor=function(e,t){for(;e;){if(e.kind===t)return e;e=e.parent}},f.getFileReferenceFromReferencePath=function(e,t){var n=new RegExp(O.source,"gim");if(/^\/\/\/\s*<reference\s+/gim.test(e)){if(n.test(e))return{isNoDefaultLib:!0};var o=f.fullTripleSlashReferencePathRegEx.exec(e),r=!o&&B.exec(e),i=o||r;if(i){var a=t.pos+i[1].length+i[2].length;return{fileReference:{pos:a,end:a+i[3].length,fileName:i[3]},isNoDefaultLib:!1,isTypeReferenceDirective:!!r}}return{diagnosticMessage:f.Diagnostics.Invalid_reference_directive_syntax,isNoDefaultLib:!1}}},f.isKeyword=function(e){return 72<=e&&e<=142},f.isTrivia=function(e){return 2<=e&&e<=7},(N=f.FunctionFlags||(f.FunctionFlags={}))[N.Normal=0]="Normal",N[N.Generator=1]="Generator",N[N.Async=2]="Async",N[N.Invalid=4]="Invalid",N[N.AsyncGenerator=3]="AsyncGenerator",f.getFunctionFlags=function(e){if(!e)return 4;var t=0;switch(e.kind){case 228:case 186:case 151:e.asteriskToken&&(t|=1);case 187:je(e,256)&&(t|=2)}return e.body||(t|=4),t},f.isAsyncFunction=function(e){switch(e.kind){case 228:case 186:case 187:case 151:return void 0!==e.body&&void 0===e.asteriskToken&&je(e,256)}return!1},f.isStringOrNumericLiteral=re,f.hasDynamicName=ie,f.isDynamicName=ae,f.isWellKnownSymbolSyntactically=se,f.getPropertyNameForPropertyNameNode=le,f.getTextOfIdentifierOrLiteral=function(e){if(e){if(71===e.kind)return f.idText(e);if(9===e.kind||8===e.kind)return e.text}},f.getEscapedTextOfIdentifierOrLiteral=function(e){if(e){if(71===e.kind)return e.escapedText;if(9===e.kind||8===e.kind)return m(e.text)}},f.getPropertyNameForKnownSymbolName=ce,f.isESSymbolIdentifier=ue,f.isPushOrUnshiftIdentifier=function(e){return"push"===e.escapedText||"unshift"===e.escapedText},f.isParameterDeclaration=function(e){return 146===ge(e).kind},f.getRootDeclaration=ge,f.nodeStartsNewLexicalEnvironment=function(e){var t=e.kind;return 152===t||186===t||228===t||187===t||151===t||153===t||154===t||233===t||265===t},f.nodeIsSynthesized=pe,f.getOriginalSourceFile=function(e){return f.getParseTreeNode(e,f.isSourceFile)||e},(w=f.Associativity||(f.Associativity={}))[w.Left=0]="Left",w[w.Right=1]="Right",f.getExpressionAssociativity=function(e){var t=_e(e),n=182===e.kind&&void 0!==e.arguments;return de(e.kind,t,n)},f.getOperatorAssociativity=de,f.getExpressionPrecedence=function(e){var t=_e(e),n=182===e.kind&&void 0!==e.arguments;return fe(e.kind,t,n)},f.getOperator=_e,f.getOperatorPrecedence=fe,f.createDiagnosticCollection=function(){var o=[],r=f.createMap(),n=!1,i=0;return{add:function(e){var t;e.file?(t=r.get(e.file.fileName))||(t=[],r.set(e.file.fileName,t)):t=o,t.push(e),n=!0,i++},getGlobalDiagnostics:function(){return a(),o},getDiagnostics:function(e){if(a(),e)return r.get(e)||[];var t=[];function n(e){t.push(e)}return f.forEach(o,n),r.forEach(function(e){f.forEach(e,n)}),f.sortAndDeduplicateDiagnostics(t)},getModificationCount:function(){return i},reattachFileDiagnostics:function(t){f.forEach(r.get(t.fileName),function(e){return e.file=t})}};function a(){n&&(n=!1,o=f.sortAndDeduplicateDiagnostics(o),r.forEach(function(e,t){r.set(t,f.sortAndDeduplicateDiagnostics(e))}))}};var he=/[\\\"\u0000-\u001f\t\v\f\b\r\n\u2028\u2029\u0085]/g,me=/[\\\'\u0000-\u001f\t\v\f\b\r\n\u2028\u2029\u0085]/g,ye=/[\\\`\u0000-\u001f\t\v\f\b\r\n\u2028\u2029\u0085]/g,ve=f.createMapFromTemplate({"\0":"\\0","\t":"\\t","\v":"\\v","\f":"\\f","\b":"\\b","\r":"\\r","\n":"\\n","\\":"\\\\",'"':'\\"',"'":"\\'","`":"\\`","\u2028":"\\u2028","\u2029":"\\u2029","":"\\u0085"}),be=/\\0[0-9]/g;function ke(e,t){var n=96===t?ye:39===t?me:he;return e.replace(n,Ee).replace(be,Te)}function Te(e){return"\\x00"+e.charAt(e.length-1)}function Ee(e){return ve.get(e)||Se(e.charCodeAt(0))}function Se(e){return"\\u"+("0000"+e.toString(16).toUpperCase()).slice(-4)}f.escapeString=ke,f.isIntrinsicJsxName=function(e){var t=e.substr(0,1);return t.toLowerCase()===t};var Ce=/[^\u0000-\u007F]/g;function xe(e,t){return e=ke(e,t),Ce.test(e)?e.replace(Ce,function(e){return Se(e.charCodeAt(0))}):e}f.escapeNonAsciiString=xe;var Ae=["","    "];function De(e){return void 0===Ae[e]&&(Ae[e]=De(e-1)+Ae[1]),Ae[e]}function Be(){return Ae[1].length}function Ie(e,t){return t.moduleName||Ne(e,t.fileName)}function Ne(t,e){var n=function(e){return t.getCanonicalFileName(e)},o=f.toPath(t.getCommonSourceDirectory(),t.getCurrentDirectory(),n),r=f.getNormalizedAbsolutePath(e,t.getCurrentDirectory()),i=f.getRelativePathToDirectoryOrUrl(o,r,o,n,!1);return f.removeFileExtension(i)}function we(e,t,n){return!(t.noEmitForJsFiles&&z(e)||e.isDeclarationFile||n(e))}function Oe(e,t,n){var o=f.getNormalizedAbsolutePath(e.fileName,t.getCurrentDirectory()),r=t.getCommonSourceDirectory();return o=0===t.getCanonicalFileName(o).indexOf(t.getCanonicalFileName(r))?o.substring(r.length):o,f.combinePaths(n,o)}function Re(e,t){return f.getLineAndCharacterOfPosition(e,t).line}function Le(e,t){return f.computeLineAndCharacterOfPosition(e,t).line}function Pe(e){if(e&&0<e.parameters.length){var t=2===e.parameters.length&&Me(e.parameters[0]);return e.parameters[t?1:0]}}function Me(e){return Fe(e.name)}function Fe(e){return e&&71===e.kind&&Ue(e)}function Ue(e){return 99===e.originalKeywordKind}function He(e,t){return e.type?e.type:t||j(e)?f.getJSDocType(e):void 0}function Ge(e,t,n,o){Ve(e,t,n.pos,o)}function Ve(e,t,n,o){o&&o.length&&n!==o[0].pos&&Le(e,n)!==Le(e,o[0].pos)&&t.writeLine()}function We(e,t,n,o,r,i,a,s){if(o&&0<o.length){r&&n.write(" ");for(var l=!1,c=0,u=o;c<u.length;c++){var g=u[c];l&&(n.write(" "),l=!1),s(e,t,n,g.pos,g.end,a),g.hasTrailingNewLine?n.writeLine():l=!0}l&&i&&n.write(" ")}}function Ke(e,t,n,o,r,i){var a=Math.min(t,i-1),s=e.substring(r,a).replace(/^\s+|\s+$/g,"");s?(n.write(s),a!==t&&n.writeLine()):n.writeLiteral(o)}function ze(e,t,n){for(var o=0;t<n&&f.isWhiteSpaceSingleLine(e.charCodeAt(t));t++)9===e.charCodeAt(t)?o+=Be()-o%Be():o++;return o}function je(e,t){return!!Ye(e,t)}function Ye(e,t){return Xe(e)&t}function Xe(e){if(536870912&e.modifierFlagsCache)return-536870913&e.modifierFlagsCache;var t=Je(e);return e.modifierFlagsCache=536870912|t,t}function Je(e){var t=0;if(e.modifiers)for(var n=0,o=e.modifiers;n<o.length;n++){t|=qe(o[n].kind)}return(4&e.flags||71===e.kind&&e.isInJSDocNamespace)&&(t|=1),t}function qe(e){switch(e){case 115:return 32;case 114:return 4;case 113:return 16;case 112:return 8;case 117:return 128;case 84:return 1;case 124:return 2;case 76:return 2048;case 79:return 512;case 120:return 256;case 131:return 64}return 0}function Ze(e){return 58<=e&&e<=70}function $e(e){if(201===e.kind&&85===e.parent.token&&f.isClassLike(e.parent.parent))return e.parent.parent}function Qe(e,t){return f.isBinaryExpression(e)&&(t?58===e.operatorToken.kind:Ze(e.operatorToken.kind))&&f.isLeftHandSideExpression(e.left)}function et(e){return void 0!==$e(e)}function tt(e){return 71===e.kind||179===e.kind&&tt(e.expression)}f.getIndentString=De,f.getIndentSize=Be,f.createTextWriter=function(e){var n,t,o,r,i;function a(e){e&&e.length&&(o&&(n+=De(t),o=!1),n+=e)}function s(){n="",o=!(t=0),i=r=0}return s(),{write:a,rawWrite:function(e){void 0!==e&&(o&&(o=!1),n+=e)},writeTextOfNode:function(e,t){a(g(e,t))},writeLiteral:function(e){if(e&&e.length){a(e);var t=f.computeLineStarts(e);1<t.length&&(r=r+t.length-1,i=n.length-e.length+f.lastOrUndefined(t))}},writeLine:function(){o||(r++,i=(n+=e).length,o=!0)},increaseIndent:function(){t++},decreaseIndent:function(){t--},getIndent:function(){return t},getTextPos:function(){return n.length},getLine:function(){return r+1},getColumn:function(){return o?t*Be()+1:n.length-i+1},getText:function(){return n},isAtStartOfLine:function(){return o},reset:s}},f.getResolvedExternalModuleName=Ie,f.getExternalModuleNameFromDeclaration=function(e,t,n){var o=t.getExternalModuleFileFromDeclaration(n);if(o&&!o.isDeclarationFile)return Ie(e,o)},f.getExternalModuleNameFromPath=Ne,f.getOwnEmitOutputFilePath=function(e,t,n){var o=t.getCompilerOptions();return(o.outDir?f.removeFileExtension(Oe(e,t,o.outDir)):f.removeFileExtension(e.fileName))+n},f.getDeclarationEmitOutputFilePath=function(e,t){var n=t.getCompilerOptions(),o=n.declarationDir||n.outDir,r=o?Oe(e,t,o):e.fileName;return f.removeFileExtension(r)+".d.ts"},f.getSourceFilesToEmit=function(t,e){var n=t.getCompilerOptions(),o=function(e){return t.isSourceFileFromExternalLibrary(e)};if(n.outFile||n.out){var r=f.getEmitModuleKind(n),i=r===f.ModuleKind.AMD||r===f.ModuleKind.System;return f.filter(t.getSourceFiles(),function(e){return(i||!f.isExternalModule(e))&&we(e,n,o)})}var a=void 0===e?t.getSourceFiles():[e];return f.filter(a,function(e){return we(e,n,o)})},f.sourceFileMayBeEmitted=we,f.getSourceFilePathInNewDir=Oe,f.writeFile=function(e,t,n,o,r,i){e.writeFile(n,o,r,function(e){t.add(f.createCompilerDiagnostic(f.Diagnostics.Could_not_write_file_0_Colon_1,n,e))},i)},f.getLineOfLocalPosition=Re,f.getLineOfLocalPositionFromLineMap=Le,f.getFirstConstructorWithBody=function(e){return f.forEach(e.members,function(e){if(152===e.kind&&l(e.body))return e})},f.getSetAccessorTypeAnnotationNode=function(e){var t=Pe(e);return t&&t.type},f.getThisParameter=function(e){if(e.parameters.length){var t=e.parameters[0];if(Me(t))return t}},f.parameterIsThisKeyword=Me,f.isThisIdentifier=Fe,f.identifierIsThisKeyword=Ue,f.getAllAccessorDeclarations=function(e,t){var n,o,r,i;return ie(t)?153===(n=t).kind?r=t:154===t.kind?i=t:f.Debug.fail("Accessor has wrong kind"):f.forEach(e,function(e){153!==e.kind&&154!==e.kind||je(e,32)!==je(t,32)||le(e.name)===le(t.name)&&(n?o||(o=e):n=e,153!==e.kind||r||(r=e),154!==e.kind||i||(i=e))}),{firstAccessor:n,secondAccessor:o,getAccessor:r,setAccessor:i}},f.getEffectiveTypeAnnotationNode=He,f.getEffectiveReturnTypeNode=function(e,t){return e.type?e.type:t||j(e)?f.getJSDocReturnType(e):void 0},f.getEffectiveTypeParameterDeclarations=function(e,t){if(e.typeParameters)return e.typeParameters;if(t||j(e)){var n=f.getJSDocTemplateTag(e);return n&&n.typeParameters}},f.getEffectiveSetAccessorTypeAnnotationNode=function(e,t){var n=Pe(e);return n&&He(n,t)},f.emitNewLineBeforeLeadingComments=Ge,f.emitNewLineBeforeLeadingCommentsOfPosition=Ve,f.emitNewLineBeforeLeadingCommentOfPosition=function(e,t,n,o){n!==o&&Le(e,n)!==Le(e,o)&&t.writeLine()},f.emitComments=We,f.emitDetachedComments=function(t,e,n,o,r,i,a){var s,l;if(a?0===r.pos&&(s=f.filter(f.getLeadingCommentRanges(t,r.pos),function(e){return _(t,e)})):s=f.getLeadingCommentRanges(t,r.pos),s){for(var c=[],u=void 0,g=0,p=s;g<p.length;g++){var d=p[g];if(u&&Le(e,u.end)+2<=Le(e,d.pos))break;c.push(d),u=d}c.length&&Le(e,f.lastOrUndefined(c).end)+2<=Le(e,f.skipTrivia(t,r.pos))&&(Ge(e,n,r,s),We(t,e,n,c,!1,!0,i,o),l={nodePos:r.pos,detachedCommentEndPos:f.lastOrUndefined(c).end})}return l},f.writeCommentRange=function(e,t,n,o,r,i){if(42===e.charCodeAt(o+1))for(var a=f.computeLineAndCharacterOfPosition(t,o),s=t.length,l=void 0,c=o,u=a.line;c<r;u++){var g=u+1===s?e.length+1:t[u+1];if(c!==o){void 0===l&&(l=ze(e,t[a.line],o));var p=n.getIndent()*Be()-l+ze(e,c,g);if(0<p){var d=p%Be(),_=De((p-d)/Be());for(n.rawWrite(_);d;)n.rawWrite(" "),d--}else n.rawWrite("")}Ke(e,r,n,i,c,g),c=g}else n.write(e.substring(o,r))},f.hasModifiers=function(e){return 0!==Xe(e)},f.hasModifier=je,f.getSelectedModifierFlags=Ye,f.getModifierFlags=Xe,f.getModifierFlagsNoCache=Je,f.modifierToFlag=qe,f.isLogicalOperator=function(e){return 54===e||53===e||51===e},f.isAssignmentOperator=Ze,f.tryGetClassExtendingExpressionWithTypeArguments=$e,f.isAssignmentExpression=Qe,f.isDestructuringAssignment=function(e){if(Qe(e,!0)){var t=e.left.kind;return 178===t||177===t}return!1},f.isExpressionWithTypeArgumentsInClassExtendsClause=et,f.isExpressionWithTypeArgumentsInClassImplementsClause=function(e){return 201===e.kind&&tt(e.expression)&&e.parent&&108===e.parent.token&&e.parent.parent&&f.isClassLike(e.parent.parent)},f.isEntityNameExpression=tt,f.isRightSideOfQualifiedNameOrPropertyAccess=function(e){return 143===e.parent.kind&&e.parent.right===e||179===e.parent.kind&&e.parent.name===e},f.isEmptyObjectLiteral=function(e){return 178===e.kind&&0===e.properties.length},f.isEmptyArrayLiteral=function(e){return 177===e.kind&&0===e.elements.length},f.getLocalSymbolForExportDefault=function(e){return(t=e)&&0<f.length(t.declarations)&&je(t.declarations[0],512)?e.declarations[0].localSymbol:void 0;var t},f.tryExtractTypeScriptExtension=function(t){return f.find(f.supportedTypescriptExtensionsForExtractExtension,function(e){return f.fileExtensionIs(t,e)})};var nt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f.convertToBase64=function(e){for(var t,n,o,r,i="",a=function(e){for(var t=[],n=e.length,o=0;o<n;o++){var r=e.charCodeAt(o);r<128?t.push(r):r<2048?(t.push(r>>6|192),t.push(63&r|128)):r<65536?(t.push(r>>12|224),t.push(r>>6&63|128),t.push(63&r|128)):r<131072?(t.push(r>>18|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):f.Debug.assert(!1,"Unexpected code point")}return t}(e),s=0,l=a.length;s<l;)t=a[s]>>2,n=(3&a[s])<<4|a[s+1]>>4,o=(15&a[s+1])<<2|a[s+2]>>6,r=63&a[s+2],l<=s+1?o=r=64:l<=s+2&&(r=64),i+=nt.charAt(t)+nt.charAt(n)+nt.charAt(o)+nt.charAt(r),s+=3;return i};var ot,rt,it="\r\n",at="\n";function st(e,t,n){void 0===e&&(e=0);var o=function(e){var t=[];for(var n in e){var o=e[n];"number"==typeof o&&t.push([o,n])}return f.stableSort(t,function(e,t){return f.compareValues(e[0],t[0])})}(t);if(0===e)return 0<o.length&&0===o[0][0]?o[0][1]:"0";if(n){for(var r="",i=e,a=o.length-1;0<=a&&0!==i;a--){var s=o[a],l=s[0],c=s[1];0!==l&&(i&l)===l&&(i&=~l,r=c+(r?", ":"")+r)}if(0===i)return r}else for(var u=0,g=o;u<g.length;u++){var p=g[u];l=p[0],c=p[1];if(l===e)return c}return e.toString()}function lt(e,t){return{pos:e,end:t}}function ct(e,t){return lt(t,e.end)}function ut(e){return e.decorators&&0<e.decorators.length?ct(e,e.decorators.end):e}function gt(e,t,n){return pt(dt(e,n),t.end,n)}function pt(e,t,n){return e===t||Re(n,e)===Re(n,t)}function dt(e,t){return f.positionIsSynthesized(e.pos)?-1:f.skipTrivia(t.text,e.pos)}function _t(e){return void 0!==e.initializer}function ft(e){return 33554432&e.flags?e.checkFlags:0}function ht(e){var t=e.parent;if(!t)return 0;switch(t.kind){case 193:case 192:var n=t.operator;return 43===n||44===n?a():0;case 194:var o=t,r=o.left,i=o.operatorToken;return r===e&&Ze(i.kind)?a():0;case 179:return t.name!==e?0:ht(t);default:return 0}function a(){return t.parent&&210===t.parent.kind?1:2}}f.getNewLineCharacter=function(e,t){switch(e.newLine){case 0:return it;case 1:return at}return t?t.newLine:f.sys?f.sys.newLine:it},f.formatSyntaxKind=function(e){return st(e,f.SyntaxKind,!1)},f.formatModifierFlags=function(e){return st(e,f.ModifierFlags,!0)},f.formatTransformFlags=function(e){return st(e,f.TransformFlags,!0)},f.formatEmitFlags=function(e){return st(e,f.EmitFlags,!0)},f.formatSymbolFlags=function(e){return st(e,f.SymbolFlags,!0)},f.formatTypeFlags=function(e){return st(e,f.TypeFlags,!0)},f.formatObjectFlags=function(e){return st(e,f.ObjectFlags,!0)},f.createRange=lt,f.moveRangeEnd=function(e,t){return lt(e.pos,t)},f.moveRangePos=ct,f.moveRangePastDecorators=ut,f.moveRangePastModifiers=function(e){return e.modifiers&&0<e.modifiers.length?ct(e,e.modifiers.end):ut(e)},f.isCollapsedRange=function(e){return e.pos===e.end},f.createTokenRange=function(e,t){return lt(e,e+f.tokenToString(t).length)},f.rangeIsOnSingleLine=function(e,t){return gt(e,e,t)},f.rangeStartPositionsAreOnSameLine=function(e,t,n){return pt(dt(e,n),dt(t,n),n)},f.rangeEndPositionsAreOnSameLine=function(e,t,n){return pt(e.end,t.end,n)},f.rangeStartIsOnSameLineAsRangeEnd=gt,f.rangeEndIsOnSameLineAsRangeStart=function(e,t,n){return pt(e.end,dt(t,n),n)},f.positionsAreOnSameLine=pt,f.getStartPositionOfRange=dt,f.isDeclarationNameOfEnumOrNamespace=function(e){var t=f.getParseTreeNode(e);if(t)switch(t.parent.kind){case 232:case 233:return t===t.parent.name}return!1},f.getInitializedVariables=function(e){return f.filter(e.declarations,_t)},f.isWatchSet=function(e){return e.watch&&e.hasOwnProperty("watch")},f.getCheckFlags=ft,f.getDeclarationModifierFlagsFromSymbol=function(e){if(e.valueDeclaration){var t=f.getCombinedModifierFlags(e.valueDeclaration);return e.parent&&32&e.parent.flags?t:-29&t}if(6&ft(e)){var n=e.checkFlags;return(256&n?8:64&n?4:16)|(512&n?32:0)}return 4194304&e.flags?36:0},f.levenshtein=function(e,t){for(var n=new Array(t.length+1),o=new Array(t.length+1),r=0;r<t.length+1;r++)o[n[r]=r]=-1;for(r=1;r<e.length+1;r++){o[0]=r;for(var i=1;i<t.length+1;i++)o[i]=Math.min(n[i]+1,o[i-1]+1,n[i-1]+(e[r-1]===t[i-1]?0:2));var a=n;n=o,o=a}return n[n.length-1]},f.skipAlias=function(e,t){return 2097152&e.flags?t.getAliasedSymbol(e):e},f.getCombinedLocalAndExportSymbolFlags=function(e){return e.exportSymbol?e.exportSymbol.flags|e.flags:e.flags},f.isWriteOnlyAccess=function(e){return 1===ht(e)},f.isWriteAccess=function(e){return 0!==ht(e)},(rt=ot||(ot={}))[rt.Read=0]="Read",rt[rt.Write=1]="Write",rt[rt.ReadWrite=2]="ReadWrite",f.compareDataObjects=function e(t,n){if(!t||!n||Object.keys(t).length!==Object.keys(n).length)return!1;for(var o in t)if("object"==typeof t[o]){if(!e(t[o],n[o]))return!1}else if("function"!=typeof t[o]&&t[o]!==n[o])return!1;return!0},f.clearMap=function(e,t){e.forEach(t),e.clear()},f.mutateMap=function(o,r,e){var n=e.createNewValue,i=e.onDeleteValue,a=e.onExistingValue;o.forEach(function(e,t){var n=r.get(t);void 0===n?(o.delete(t),i(e,t)):a&&a(e,n,t)}),r.forEach(function(e,t){o.has(t)||o.set(t,n(t,e))})},f.forEachAncestorDirectory=function(e,t){for(;;){var n=t(e);if(void 0!==n)return n;var o=f.getDirectoryPath(e);if(o===e)return;e=o}}}(ts||(ts={})),function(d){function _(e){return e.start+e.length}function t(e){return 0===e.length}function n(e,t){if(e<0)throw new Error("start < 0");if(t<0)throw new Error("length < 0");return{start:e,length:t}}function f(e,t){return n(e,t-e)}function h(e,t){if(t<0)throw new Error("newLength < 0");return{span:e,newLength:t}}function o(e){return!!d.isBindingPattern(e)&&d.every(e.elements,r)}function r(e){return!!d.isOmittedExpression(e)||o(e.name)}function i(e){for(;e&&(176===e.kind||d.isBindingPattern(e));)e=e.parent;return e}function a(e,t){if(e)for(;void 0!==e.original;)e=e.original;return!t||t(e)?e:void 0}function s(e){return 0==(8&e.flags)}function l(e){var t=e;return 3<=t.length&&95===t.charCodeAt(0)&&95===t.charCodeAt(1)&&95===t.charCodeAt(2)?t.substr(1):t}function c(e){var t=g(e);return d.isIdentifier(t)?t:void 0}function u(e){return e.name||function(e){var t=e.parent.parent;if(t){if(d.isDeclaration(t))return c(t);switch(t.kind){case 208:return t.declarationList&&t.declarationList.declarations[0]?c(t.declarationList.declarations[0]):void 0;case 210:var n=t.expression;switch(n.kind){case 179:return n.name;case 180:var o=n.argumentExpression;if(d.isIdentifier(o))return o}return;case 1:return;case 185:return c(t.expression);case 222:return d.isDeclaration(t.statement)||d.isExpression(t.statement)?c(t.statement):void 0;default:d.Debug.assertNever(t,"Found typedef tag attached to node which it should not be!")}}}(e)}function g(e){if(e){switch(e.kind){case 284:case 279:var t=e.name;if(143===t.kind)return t.right;break;case 194:var n=e;switch(d.getSpecialPropertyAssignmentKind(n)){case 1:case 4:case 5:case 3:return n.left.name;default:return}case 283:return u(e);case 243:var o=e.expression;return d.isIdentifier(o)?o:void 0}return e.name}}function p(e){if(e.name&&d.isIdentifier(e.name)){var t=e.name.escapedText;return y(e.parent).filter(function(e){return d.isJSDocParameterTag(e)&&d.isIdentifier(e.name)&&e.name.escapedText===t})}}function m(e){return v(e,280)}function y(e){var t=e.jsDocCache;return void 0===t&&(e.jsDocCache=t=d.flatMap(d.getJSDocCommentsAndTags(e),function(e){return d.isJSDoc(e)?e.tags:e})),t}function v(e,t){var n=y(e);return d.find(n,function(e){return e.kind===t})}d.getDefaultLibFileName=function(e){switch(e.target){case 5:return"lib.esnext.full.d.ts";case 4:return"lib.es2017.full.d.ts";case 3:return"lib.es2016.full.d.ts";case 2:return"lib.es6.d.ts";default:return"lib.d.ts"}},d.textSpanEnd=_,d.textSpanIsEmpty=t,d.textSpanContainsPosition=function(e,t){return t>=e.start&&t<_(e)},d.textSpanContainsTextSpan=function(e,t){return t.start>=e.start&&_(t)<=_(e)},d.textSpanOverlapsWith=function(e,t){return Math.max(e.start,t.start)<Math.min(_(e),_(t))},d.textSpanOverlap=function(e,t){var n=Math.max(e.start,t.start),o=Math.min(_(e),_(t));if(n<o)return f(n,o)},d.textSpanIntersectsWithTextSpan=function(e,t){return t.start<=_(e)&&_(t)>=e.start},d.textSpanIntersectsWith=function(e,t,n){var o=t+n;return t<=_(e)&&o>=e.start},d.decodedTextSpanIntersectsWith=function(e,t,n,o){return n<=e+t&&e<=n+o},d.textSpanIntersectsWithPosition=function(e,t){return t<=_(e)&&t>=e.start},d.textSpanIntersection=function(e,t){var n=Math.max(e.start,t.start),o=Math.min(_(e),_(t));if(n<=o)return f(n,o)},d.createTextSpan=n,d.createTextSpanFromBounds=f,d.textChangeRangeNewSpan=function(e){return n(e.span.start,e.newLength)},d.textChangeRangeIsUnchanged=function(e){return t(e.span)&&0===e.newLength},d.createTextChangeRange=h,d.unchangedTextChangeRange=h(n(0,0),0),d.collapseTextChangeRangesAcrossMultipleVersions=function(e){if(0===e.length)return d.unchangedTextChangeRange;if(1===e.length)return e[0];for(var t=e[0],n=t.span.start,o=_(t.span),r=n+t.newLength,i=1;i<e.length;i++){var a=e[i],s=n,l=o,c=r,u=a.span.start,g=_(a.span),p=u+a.newLength;n=Math.min(s,u),o=Math.max(l,l+(g-c)),r=Math.max(p,p+(c-g))}return h(f(n,o),r-n)},d.getTypeParameterOwner=function(e){if(e&&145===e.kind)for(var t=e;t;t=t.parent)if(d.isFunctionLike(t)||d.isClassLike(t)||230===t.kind)return t},d.isParameterPropertyDeclaration=function(e){return d.hasModifier(e,92)&&152===e.parent.kind&&d.isClassLike(e.parent.parent)},d.isEmptyBindingPattern=o,d.isEmptyBindingElement=r,d.getCombinedModifierFlags=function(e){e=i(e);var t=d.getModifierFlags(e);return 226===e.kind&&(e=e.parent),e&&227===e.kind&&(t|=d.getModifierFlags(e),e=e.parent),e&&208===e.kind&&(t|=d.getModifierFlags(e)),t},d.getCombinedNodeFlags=function(e){var t=(e=i(e)).flags;return 226===e.kind&&(e=e.parent),e&&227===e.kind&&(t|=e.flags,e=e.parent),e&&208===e.kind&&(t|=e.flags),t},d.validateLocaleAndSetLanguage=function(e,s,t){var n=/^([a-z]+)([_\-]([a-z]+))?$/.exec(e.toLowerCase());if(n){var o=n[1];r(o,n[3],t)||r(o,void 0,t)}else t&&t.push(d.createCompilerDiagnostic(d.Diagnostics.Locale_must_be_of_the_form_language_or_language_territory_For_example_0_or_1,"en","ja-jp"));function r(e,t,n){var o=d.normalizePath(s.getExecutingFilePath()),r=d.getDirectoryPath(o),i=d.combinePaths(r,e);if(t&&(i=i+"-"+t),i=s.resolvePath(d.combinePaths(i,"diagnosticMessages.generated.json")),!s.fileExists(i))return!1;var a="";try{a=s.readFile(i)}catch(e){return n&&n.push(d.createCompilerDiagnostic(d.Diagnostics.Unable_to_open_file_0,i)),!1}try{d.localizedDiagnosticMessages=JSON.parse(a)}catch(e){return n&&n.push(d.createCompilerDiagnostic(d.Diagnostics.Corrupted_locale_file_0,i)),!1}return!0}},d.getOriginalNode=a,d.isParseTreeNode=s,d.getParseTreeNode=function(e,t){return void 0===e||s(e)?e:!s(e=a(e))||t&&!t(e)?void 0:e},d.unescapeLeadingUnderscores=l,d.idText=function(e){return l(e.escapedText)},d.symbolName=function(e){return l(e.escapedName)},d.unescapeIdentifier=function(e){return e},d.getNameOfJSDocTypedef=u,d.getNameOfDeclaration=g,d.getJSDocParameterTags=p,d.hasJSDocParameterTags=function(e){return!!v(e,279)},d.getJSDocAugmentsTag=function(e){return v(e,277)},d.getJSDocClassTag=function(e){return v(e,278)},d.getJSDocReturnTag=m,d.getJSDocTemplateTag=function(e){return v(e,282)},d.getJSDocTypeTag=function(e){var t=v(e,281);if(t&&t.typeExpression&&t.typeExpression.type)return t},d.getJSDocType=function(e){var t=v(e,281);if(!t&&146===e.kind){var n=p(e);n&&(t=d.find(n,function(e){return!!e.typeExpression}))}return t&&t.typeExpression&&t.typeExpression.type},d.getJSDocReturnType=function(e){var t=m(e);return t&&t.typeExpression&&t.typeExpression.type},d.getJSDocTags=y,d.getAllJSDocTagsOfKind=function(e,t){var n=y(e);return d.filter(n,function(e){return e.kind===t})}}(ts||(ts={})),function(e){e.isNumericLiteral=function(e){return 8===e.kind},e.isStringLiteral=function(e){return 9===e.kind},e.isJsxText=function(e){return 10===e.kind},e.isRegularExpressionLiteral=function(e){return 12===e.kind},e.isNoSubstitutionTemplateLiteral=function(e){return 13===e.kind},e.isTemplateHead=function(e){return 14===e.kind},e.isTemplateMiddle=function(e){return 15===e.kind},e.isTemplateTail=function(e){return 16===e.kind},e.isIdentifier=function(e){return 71===e.kind},e.isQualifiedName=function(e){return 143===e.kind},e.isComputedPropertyName=function(e){return 144===e.kind},e.isTypeParameterDeclaration=function(e){return 145===e.kind},e.isParameter=function(e){return 146===e.kind},e.isDecorator=function(e){return 147===e.kind},e.isPropertySignature=function(e){return 148===e.kind},e.isPropertyDeclaration=function(e){return 149===e.kind},e.isMethodSignature=function(e){return 150===e.kind},e.isMethodDeclaration=function(e){return 151===e.kind},e.isConstructorDeclaration=function(e){return 152===e.kind},e.isGetAccessorDeclaration=function(e){return 153===e.kind},e.isSetAccessorDeclaration=function(e){return 154===e.kind},e.isCallSignatureDeclaration=function(e){return 155===e.kind},e.isConstructSignatureDeclaration=function(e){return 156===e.kind},e.isIndexSignatureDeclaration=function(e){return 157===e.kind},e.isTypePredicateNode=function(e){return 158===e.kind},e.isTypeReferenceNode=function(e){return 159===e.kind},e.isFunctionTypeNode=function(e){return 160===e.kind},e.isConstructorTypeNode=function(e){return 161===e.kind},e.isTypeQueryNode=function(e){return 162===e.kind},e.isTypeLiteralNode=function(e){return 163===e.kind},e.isArrayTypeNode=function(e){return 164===e.kind},e.isTupleTypeNode=function(e){return 165===e.kind},e.isUnionTypeNode=function(e){return 166===e.kind},e.isIntersectionTypeNode=function(e){return 167===e.kind},e.isParenthesizedTypeNode=function(e){return 168===e.kind},e.isThisTypeNode=function(e){return 169===e.kind},e.isTypeOperatorNode=function(e){return 170===e.kind},e.isIndexedAccessTypeNode=function(e){return 171===e.kind},e.isMappedTypeNode=function(e){return 172===e.kind},e.isLiteralTypeNode=function(e){return 173===e.kind},e.isObjectBindingPattern=function(e){return 174===e.kind},e.isArrayBindingPattern=function(e){return 175===e.kind},e.isBindingElement=function(e){return 176===e.kind},e.isArrayLiteralExpression=function(e){return 177===e.kind},e.isObjectLiteralExpression=function(e){return 178===e.kind},e.isPropertyAccessExpression=function(e){return 179===e.kind},e.isElementAccessExpression=function(e){return 180===e.kind},e.isCallExpression=function(e){return 181===e.kind},e.isNewExpression=function(e){return 182===e.kind},e.isTaggedTemplateExpression=function(e){return 183===e.kind},e.isTypeAssertion=function(e){return 184===e.kind},e.isParenthesizedExpression=function(e){return 185===e.kind},e.skipPartiallyEmittedExpressions=function(e){for(;288===e.kind;)e=e.expression;return e},e.isFunctionExpression=function(e){return 186===e.kind},e.isArrowFunction=function(e){return 187===e.kind},e.isDeleteExpression=function(e){return 188===e.kind},e.isTypeOfExpression=function(e){return 191===e.kind},e.isVoidExpression=function(e){return 190===e.kind},e.isAwaitExpression=function(e){return 191===e.kind},e.isPrefixUnaryExpression=function(e){return 192===e.kind},e.isPostfixUnaryExpression=function(e){return 193===e.kind},e.isBinaryExpression=function(e){return 194===e.kind},e.isConditionalExpression=function(e){return 195===e.kind},e.isTemplateExpression=function(e){return 196===e.kind},e.isYieldExpression=function(e){return 197===e.kind},e.isSpreadElement=function(e){return 198===e.kind},e.isClassExpression=function(e){return 199===e.kind},e.isOmittedExpression=function(e){return 200===e.kind},e.isExpressionWithTypeArguments=function(e){return 201===e.kind},e.isAsExpression=function(e){return 202===e.kind},e.isNonNullExpression=function(e){return 203===e.kind},e.isMetaProperty=function(e){return 204===e.kind},e.isTemplateSpan=function(e){return 205===e.kind},e.isSemicolonClassElement=function(e){return 206===e.kind},e.isBlock=function(e){return 207===e.kind},e.isVariableStatement=function(e){return 208===e.kind},e.isEmptyStatement=function(e){return 209===e.kind},e.isExpressionStatement=function(e){return 210===e.kind},e.isIfStatement=function(e){return 211===e.kind},e.isDoStatement=function(e){return 212===e.kind},e.isWhileStatement=function(e){return 213===e.kind},e.isForStatement=function(e){return 214===e.kind},e.isForInStatement=function(e){return 215===e.kind},e.isForOfStatement=function(e){return 216===e.kind},e.isContinueStatement=function(e){return 217===e.kind},e.isBreakStatement=function(e){return 218===e.kind},e.isReturnStatement=function(e){return 219===e.kind},e.isWithStatement=function(e){return 220===e.kind},e.isSwitchStatement=function(e){return 221===e.kind},e.isLabeledStatement=function(e){return 222===e.kind},e.isThrowStatement=function(e){return 223===e.kind},e.isTryStatement=function(e){return 224===e.kind},e.isDebuggerStatement=function(e){return 225===e.kind},e.isVariableDeclaration=function(e){return 226===e.kind},e.isVariableDeclarationList=function(e){return 227===e.kind},e.isFunctionDeclaration=function(e){return 228===e.kind},e.isClassDeclaration=function(e){return 229===e.kind},e.isInterfaceDeclaration=function(e){return 230===e.kind},e.isTypeAliasDeclaration=function(e){return 231===e.kind},e.isEnumDeclaration=function(e){return 232===e.kind},e.isModuleDeclaration=function(e){return 233===e.kind},e.isModuleBlock=function(e){return 234===e.kind},e.isCaseBlock=function(e){return 235===e.kind},e.isNamespaceExportDeclaration=function(e){return 236===e.kind},e.isImportEqualsDeclaration=function(e){return 237===e.kind},e.isImportDeclaration=function(e){return 238===e.kind},e.isImportClause=function(e){return 239===e.kind},e.isNamespaceImport=function(e){return 240===e.kind},e.isNamedImports=function(e){return 241===e.kind},e.isImportSpecifier=function(e){return 242===e.kind},e.isExportAssignment=function(e){return 243===e.kind},e.isExportDeclaration=function(e){return 244===e.kind},e.isNamedExports=function(e){return 245===e.kind},e.isExportSpecifier=function(e){return 246===e.kind},e.isMissingDeclaration=function(e){return 247===e.kind},e.isExternalModuleReference=function(e){return 248===e.kind},e.isJsxElement=function(e){return 249===e.kind},e.isJsxSelfClosingElement=function(e){return 250===e.kind},e.isJsxOpeningElement=function(e){return 251===e.kind},e.isJsxClosingElement=function(e){return 252===e.kind},e.isJsxAttribute=function(e){return 253===e.kind},e.isJsxAttributes=function(e){return 254===e.kind},e.isJsxSpreadAttribute=function(e){return 255===e.kind},e.isJsxExpression=function(e){return 256===e.kind},e.isCaseClause=function(e){return 257===e.kind},e.isDefaultClause=function(e){return 258===e.kind},e.isHeritageClause=function(e){return 259===e.kind},e.isCatchClause=function(e){return 260===e.kind},e.isPropertyAssignment=function(e){return 261===e.kind},e.isShorthandPropertyAssignment=function(e){return 262===e.kind},e.isSpreadAssignment=function(e){return 263===e.kind},e.isEnumMember=function(e){return 264===e.kind},e.isSourceFile=function(e){return 265===e.kind},e.isBundle=function(e){return 266===e.kind},e.isJSDocTypeExpression=function(e){return 267===e.kind},e.isJSDocAllType=function(e){return 268===e.kind},e.isJSDocUnknownType=function(e){return 269===e.kind},e.isJSDocNullableType=function(e){return 270===e.kind},e.isJSDocNonNullableType=function(e){return 271===e.kind},e.isJSDocOptionalType=function(e){return 272===e.kind},e.isJSDocFunctionType=function(e){return 273===e.kind},e.isJSDocVariadicType=function(e){return 274===e.kind},e.isJSDoc=function(e){return 275===e.kind},e.isJSDocAugmentsTag=function(e){return 277===e.kind},e.isJSDocParameterTag=function(e){return 279===e.kind},e.isJSDocReturnTag=function(e){return 280===e.kind},e.isJSDocTypeTag=function(e){return 281===e.kind},e.isJSDocTemplateTag=function(e){return 282===e.kind},e.isJSDocTypedefTag=function(e){return 283===e.kind},e.isJSDocPropertyTag=function(e){return 284===e.kind},e.isJSDocPropertyLikeTag=function(e){return 284===e.kind||279===e.kind},e.isJSDocTypeLiteral=function(e){return 285===e.kind}}(ts||(ts={})),function(o){function t(e){return 143<=e}function n(e){return 8<=e&&e<=13}function r(e){switch(e){case 117:case 120:case 76:case 124:case 79:case 84:case 114:case 112:case 113:case 131:case 115:return!0}return!1}function i(e){return e&&s(e.kind)}function a(e){switch(e){case 228:case 151:case 152:case 153:case 154:case 186:case 187:return!0;default:return!1}}function s(e){switch(e){case 150:case 155:case 156:case 157:case 160:case 273:case 161:return!0;default:return a(e)}}function l(e){switch(e.kind){case 174:case 178:return!0}return!1}function c(e){switch(e.kind){case 175:case 177:return!0}return!1}function u(e){switch(e){case 179:case 180:case 182:case 181:case 249:case 250:case 183:case 177:case 185:case 178:case 199:case 186:case 71:case 12:case 8:case 9:case 13:case 196:case 86:case 95:case 99:case 101:case 97:case 203:case 204:case 91:return!0;default:return!1}}function g(e){switch(e){case 192:case 193:case 188:case 189:case 190:case 191:case 184:return!0;default:return u(e)}}function p(e){return function(e){switch(e){case 195:case 197:case 187:case 194:case 198:case 202:case 200:case 289:case 288:return!0;default:return g(e)}}(o.skipPartiallyEmittedExpressions(e).kind)}function d(e){return 288===e.kind}function _(e){return 287===e.kind}function f(e){return 228===e||247===e||229===e||230===e||231===e||232===e||233===e||238===e||237===e||244===e||243===e||236===e}function h(e){return 218===e||217===e||225===e||212===e||210===e||209===e||215===e||216===e||214===e||211===e||222===e||219===e||221===e||223===e||224===e||208===e||213===e||220===e||287===e||291===e||290===e}function m(e){return 276<=e.kind&&e.kind<=285}o.isSyntaxList=function(e){return 286===e.kind},o.isNode=function(e){return t(e.kind)},o.isNodeKind=t,o.isToken=function(e){return 0<=e.kind&&e.kind<=142},o.isNodeArray=function(e){return e.hasOwnProperty("pos")&&e.hasOwnProperty("end")},o.isLiteralKind=n,o.isLiteralExpression=function(e){return n(e.kind)},o.isTemplateLiteralKind=function(e){return 13<=e&&e<=16},o.isTemplateMiddleOrTemplateTail=function(e){var t=e.kind;return 15===t||16===t},o.isStringTextContainingNode=function(e){switch(e.kind){case 9:case 14:case 15:case 16:case 13:return!0;default:return!1}},o.isGeneratedIdentifier=function(e){return o.isIdentifier(e)&&0<e.autoGenerateKind},o.isModifierKind=r,o.isModifier=function(e){return r(e.kind)},o.isEntityName=function(e){var t=e.kind;return 143===t||71===t},o.isPropertyName=function(e){var t=e.kind;return 71===t||9===t||8===t||144===t},o.isBindingName=function(e){var t=e.kind;return 71===t||174===t||175===t},o.isFunctionLike=i,o.isFunctionLikeDeclaration=function(e){return e&&a(e.kind)},o.isFunctionLikeKind=s,o.isFunctionOrModuleBlock=function(e){return o.isSourceFile(e)||o.isModuleBlock(e)||o.isBlock(e)&&i(e.parent)},o.isClassElement=function(e){var t=e.kind;return 152===t||149===t||151===t||153===t||154===t||157===t||206===t||247===t},o.isClassLike=function(e){return e&&(229===e.kind||199===e.kind)},o.isAccessor=function(e){return e&&(153===e.kind||154===e.kind)},o.isTypeElement=function(e){var t=e.kind;return 156===t||155===t||148===t||150===t||157===t||247===t},o.isObjectLiteralElementLike=function(e){var t=e.kind;return 261===t||262===t||263===t||151===t||153===t||154===t||247===t},o.isTypeNode=function(e){return 158<=(t=e.kind)&&t<=173||119===t||133===t||134===t||122===t||136===t||137===t||99===t||105===t||139===t||95===t||130===t||201===t||268===t||269===t||270===t||271===t||272===t||273===t||274===t;var t},o.isFunctionOrConstructorTypeNode=function(e){switch(e.kind){case 160:case 161:return!0}return!1},o.isBindingPattern=function(e){if(e){var t=e.kind;return 175===t||174===t}return!1},o.isAssignmentPattern=function(e){var t=e.kind;return 177===t||178===t},o.isArrayBindingElement=function(e){var t=e.kind;return 176===t||200===t},o.isDeclarationBindingElement=function(e){switch(e.kind){case 226:case 146:case 176:return!0}return!1},o.isBindingOrAssignmentPattern=function(e){return l(e)||c(e)},o.isObjectBindingOrAssignmentPattern=l,o.isArrayBindingOrAssignmentPattern=c,o.isPropertyAccessOrQualifiedName=function(e){var t=e.kind;return 179===t||143===t},o.isCallLikeExpression=function(e){switch(e.kind){case 251:case 250:case 181:case 182:case 183:case 147:return!0;default:return!1}},o.isCallOrNewExpression=function(e){return 181===e.kind||182===e.kind},o.isTemplateLiteral=function(e){var t=e.kind;return 196===t||13===t},o.isLeftHandSideExpression=function(e){return u(o.skipPartiallyEmittedExpressions(e).kind)},o.isUnaryExpression=function(e){return g(o.skipPartiallyEmittedExpressions(e).kind)},o.isUnaryExpressionWithWrite=function(e){switch(e.kind){case 193:return!0;case 192:return 43===e.operator||44===e.operator;default:return!1}},o.isExpression=p,o.isAssertionExpression=function(e){var t=e.kind;return 184===t||202===t},o.isPartiallyEmittedExpression=d,o.isNotEmittedStatement=_,o.isNotEmittedOrPartiallyEmittedNode=function(e){return _(e)||d(e)},o.isIterationStatement=function e(t,n){switch(t.kind){case 214:case 215:case 216:case 212:case 213:return!0;case 222:return n&&e(t.statement,n)}return!1},o.isForInOrOfStatement=function(e){return 215===e.kind||216===e.kind},o.isConciseBody=function(e){return o.isBlock(e)||p(e)},o.isFunctionBody=function(e){return o.isBlock(e)},o.isForInitializer=function(e){return o.isVariableDeclarationList(e)||p(e)},o.isModuleBody=function(e){var t=e.kind;return 234===t||233===t||71===t},o.isNamespaceBody=function(e){var t=e.kind;return 234===t||233===t},o.isJSDocNamespaceBody=function(e){var t=e.kind;return 71===t||233===t},o.isNamedImportBindings=function(e){var t=e.kind;return 241===t||240===t},o.isModuleOrEnumDeclaration=function(e){return 233===e.kind||232===e.kind},o.isDeclaration=function(e){return 145===e.kind?282!==e.parent.kind||o.isInJavaScriptFile(e):187===(t=e.kind)||176===t||229===t||199===t||152===t||232===t||264===t||246===t||228===t||186===t||153===t||239===t||237===t||242===t||230===t||253===t||151===t||150===t||233===t||236===t||240===t||146===t||261===t||149===t||148===t||154===t||262===t||231===t||145===t||226===t||283===t;var t},o.isDeclarationStatement=function(e){return f(e.kind)},o.isStatementButNotDeclaration=function(e){return h(e.kind)},o.isStatement=function(e){var t=e.kind;return h(t)||f(t)||(n=e,207===n.kind&&(void 0===n.parent||224!==n.parent.kind&&260!==n.parent.kind)&&!o.isFunctionBlock(n));var n},o.isModuleReference=function(e){var t=e.kind;return 248===t||143===t||71===t},o.isJsxTagNameExpression=function(e){var t=e.kind;return 99===t||71===t||179===t},o.isJsxChild=function(e){var t=e.kind;return 249===t||256===t||250===t||10===t},o.isJsxAttributeLike=function(e){var t=e.kind;return 253===t||255===t},o.isStringLiteralOrJsxExpression=function(e){var t=e.kind;return 9===t||256===t},o.isJsxOpeningLikeElement=function(e){var t=e.kind;return 251===t||250===t},o.isCaseOrDefaultClause=function(e){var t=e.kind;return 257===t||258===t},o.isJSDocNode=function(e){return 267<=e.kind&&e.kind<=285},o.isJSDocCommentContainingNode=function(e){return 275===e.kind||m(e)},o.isJSDocTag=m,o.isSetAccessor=function(e){return 154===e.kind},o.isGetAccessor=function(e){return 153===e.kind},o.hasJSDocNodes=function(e){return!!e.jsDoc&&0<e.jsDoc.length}}(ts||(ts={})),function(po){var e,t,o,r,i,a,p,s;function l(e,t){return t&&e(t)}function c(e,t,n){if(n){if(t)return t(n);for(var o=0,r=n;o<r.length;o++){var i=e(r[o]);if(i)return i}}}function _o(e,t,n){if(e&&!(e.kind<=142))switch(e.kind){case 143:return l(t,e.left)||l(t,e.right);case 145:return l(t,e.name)||l(t,e.constraint)||l(t,e.default)||l(t,e.expression);case 262:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.name)||l(t,e.questionToken)||l(t,e.equalsToken)||l(t,e.objectAssignmentInitializer);case 263:return l(t,e.expression);case 146:case 149:case 148:case 261:case 226:case 176:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.propertyName)||l(t,e.dotDotDotToken)||l(t,e.name)||l(t,e.questionToken)||l(t,e.type)||l(t,e.initializer);case 160:case 161:case 155:case 156:case 157:return c(t,n,e.decorators)||c(t,n,e.modifiers)||c(t,n,e.typeParameters)||c(t,n,e.parameters)||l(t,e.type);case 151:case 150:case 152:case 153:case 154:case 186:case 228:case 187:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.asteriskToken)||l(t,e.name)||l(t,e.questionToken)||c(t,n,e.typeParameters)||c(t,n,e.parameters)||l(t,e.type)||l(t,e.equalsGreaterThanToken)||l(t,e.body);case 159:return l(t,e.typeName)||c(t,n,e.typeArguments);case 158:return l(t,e.parameterName)||l(t,e.type);case 162:return l(t,e.exprName);case 163:return c(t,n,e.members);case 164:return l(t,e.elementType);case 165:return c(t,n,e.elementTypes);case 166:case 167:return c(t,n,e.types);case 168:case 170:return l(t,e.type);case 171:return l(t,e.objectType)||l(t,e.indexType);case 172:return l(t,e.readonlyToken)||l(t,e.typeParameter)||l(t,e.questionToken)||l(t,e.type);case 173:return l(t,e.literal);case 174:case 175:case 177:return c(t,n,e.elements);case 178:return c(t,n,e.properties);case 179:return l(t,e.expression)||l(t,e.name);case 180:return l(t,e.expression)||l(t,e.argumentExpression);case 181:case 182:return l(t,e.expression)||c(t,n,e.typeArguments)||c(t,n,e.arguments);case 183:return l(t,e.tag)||l(t,e.template);case 184:return l(t,e.type)||l(t,e.expression);case 185:case 188:case 189:case 190:return l(t,e.expression);case 192:return l(t,e.operand);case 197:return l(t,e.asteriskToken)||l(t,e.expression);case 191:return l(t,e.expression);case 193:return l(t,e.operand);case 194:return l(t,e.left)||l(t,e.operatorToken)||l(t,e.right);case 202:return l(t,e.expression)||l(t,e.type);case 203:return l(t,e.expression);case 204:return l(t,e.name);case 195:return l(t,e.condition)||l(t,e.questionToken)||l(t,e.whenTrue)||l(t,e.colonToken)||l(t,e.whenFalse);case 198:return l(t,e.expression);case 207:case 234:return c(t,n,e.statements);case 265:return c(t,n,e.statements)||l(t,e.endOfFileToken);case 208:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.declarationList);case 227:return c(t,n,e.declarations);case 210:return l(t,e.expression);case 211:return l(t,e.expression)||l(t,e.thenStatement)||l(t,e.elseStatement);case 212:return l(t,e.statement)||l(t,e.expression);case 213:return l(t,e.expression)||l(t,e.statement);case 214:return l(t,e.initializer)||l(t,e.condition)||l(t,e.incrementor)||l(t,e.statement);case 215:return l(t,e.initializer)||l(t,e.expression)||l(t,e.statement);case 216:return l(t,e.awaitModifier)||l(t,e.initializer)||l(t,e.expression)||l(t,e.statement);case 217:case 218:return l(t,e.label);case 219:return l(t,e.expression);case 220:return l(t,e.expression)||l(t,e.statement);case 221:return l(t,e.expression)||l(t,e.caseBlock);case 235:return c(t,n,e.clauses);case 257:return l(t,e.expression)||c(t,n,e.statements);case 258:return c(t,n,e.statements);case 222:return l(t,e.label)||l(t,e.statement);case 223:return l(t,e.expression);case 224:return l(t,e.tryBlock)||l(t,e.catchClause)||l(t,e.finallyBlock);case 260:return l(t,e.variableDeclaration)||l(t,e.block);case 147:return l(t,e.expression);case 229:case 199:case 230:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.name)||c(t,n,e.typeParameters)||c(t,n,e.heritageClauses)||c(t,n,e.members);case 231:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.name)||c(t,n,e.typeParameters)||l(t,e.type);case 232:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.name)||c(t,n,e.members);case 264:return l(t,e.name)||l(t,e.initializer);case 233:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.name)||l(t,e.body);case 237:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.name)||l(t,e.moduleReference);case 238:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.importClause)||l(t,e.moduleSpecifier);case 239:return l(t,e.name)||l(t,e.namedBindings);case 236:case 240:return l(t,e.name);case 241:case 245:return c(t,n,e.elements);case 244:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.exportClause)||l(t,e.moduleSpecifier);case 242:case 246:return l(t,e.propertyName)||l(t,e.name);case 243:return c(t,n,e.decorators)||c(t,n,e.modifiers)||l(t,e.expression);case 196:return l(t,e.head)||c(t,n,e.templateSpans);case 205:return l(t,e.expression)||l(t,e.literal);case 144:return l(t,e.expression);case 259:return c(t,n,e.types);case 201:return l(t,e.expression)||c(t,n,e.typeArguments);case 248:return l(t,e.expression);case 247:return c(t,n,e.decorators);case 289:return c(t,n,e.elements);case 249:return l(t,e.openingElement)||c(t,n,e.children)||l(t,e.closingElement);case 250:case 251:return l(t,e.tagName)||l(t,e.attributes);case 254:return c(t,n,e.properties);case 253:return l(t,e.name)||l(t,e.initializer);case 255:return l(t,e.expression);case 256:return l(t,e.dotDotDotToken)||l(t,e.expression);case 252:return l(t,e.tagName);case 267:case 271:case 270:case 272:return l(t,e.type);case 273:return c(t,n,e.parameters)||l(t,e.type);case 274:return l(t,e.type);case 275:return c(t,n,e.tags);case 279:case 284:return e.isNameFirst?l(t,e.name)||l(t,e.typeExpression):l(t,e.typeExpression)||l(t,e.name);case 280:case 281:return l(t,e.typeExpression);case 277:return l(t,e.class);case 282:return c(t,n,e.typeParameters);case 283:return e.typeExpression&&267===e.typeExpression.kind?l(t,e.typeExpression)||l(t,e.fullName):l(t,e.fullName)||l(t,e.typeExpression);case 285:if(e.jsDocPropertyTags)for(var o=0,r=e.jsDocPropertyTags;o<r.length;o++){l(t,r[o])}return;case 288:return l(t,e.expression)}}(t=e||(e={}))[t.None=0]="None",t[t.Yield=1]="Yield",t[t.Await=2]="Await",t[t.Type=4]="Type",t[t.RequireCompleteParameterList=8]="RequireCompleteParameterList",t[t.IgnoreMissingOpenBrace=16]="IgnoreMissingOpenBrace",t[t.JSDoc=32]="JSDoc",po.createNode=function(e,t,n){return 265===e?new(a||(a=po.objectAllocator.getSourceFileConstructor()))(e,t,n):71===e?new(i||(i=po.objectAllocator.getIdentifierConstructor()))(e,t,n):po.isNodeKind(e)?new(o||(o=po.objectAllocator.getNodeConstructor()))(e,t,n):new(r||(r=po.objectAllocator.getTokenConstructor()))(e,t,n)},po.forEachChild=_o,po.createSourceFile=function(e,t,n,o,r){void 0===o&&(o=!1),po.performance.mark("beforeParse");var i=p.parseSourceFile(e,t,n,void 0,o,r);return po.performance.mark("afterParse"),po.performance.measure("Parse","beforeParse","afterParse"),i},po.parseIsolatedEntityName=function(e,t){return p.parseIsolatedEntityName(e,t)},po.parseJsonText=function(e,t){return p.parseJsonText(e,t)},po.isExternalModule=function(e){return void 0!==e.externalModuleIndicator},po.updateSourceFile=function(e,t,n,o){var r=s.updateSourceFile(e,t,n,o);return r.flags|=524288&e.flags,r},po.parseIsolatedJSDocComment=function(e,t,n){var o=p.JSDocParser.parseIsolatedJSDocComment(e,t,n);return o&&o.jsDoc&&p.fixupParentReferences(o.jsDoc),o},po.parseJSDocTypeExpressionForTests=function(e,t,n){return p.JSDocParser.parseJSDocTypeExpressionForTests(e,t,n)},function(e){var r,i,a,s,p,v,l,B,I,d,_,f,c,h,t,n,o,u,g,N=po.createScanner(5,!0),m=10240,y=!1;function b(e){return 4===e||2===e||1===e||6===e?1:0}function k(e,t,n,o){r=po.objectAllocator.getNodeConstructor(),i=po.objectAllocator.getTokenConstructor(),a=po.objectAllocator.getIdentifierConstructor(),s=po.objectAllocator.getSourceFileConstructor(),I=e,l=n,v=[],c=0,_=po.createMap(),d=f=0,h=1===o||2===o||6===o?65536:0,y=!1,N.setText(I),N.setOnError(z),N.setScriptTarget(t),N.setLanguageVariant(b(o))}function T(){N.setText(""),N.setOnError(void 0),I=l=_=p=v=void 0}function E(e){var t=po.getJSDocCommentRanges(e,p.text);if(t)for(var n=0,o=t;n<o.length;n++){var r=o[n],i=g.parseJSDocComment(e,r.pos,r.end-r.pos);i&&(e.jsDoc||(e.jsDoc=[]),e.jsDoc.push(i))}return e}function S(e){var a=e;return void _o(e,function e(t){if(t.parent!==a){var n=t.parent=a;if(_o(a=t,e),po.hasJSDocNodes(t))for(var o=0,r=t.jsDoc;o<r.length;o++){var i=r[o];i.parent=t,_o(a=i,e)}a=n}})}function C(e,t,n){var o=new s(265,0,I.length);return d++,o.text=I,o.bindDiagnostics=[],o.languageVersion=t,o.fileName=po.normalizePath(e),o.languageVariant=b(n),o.isDeclarationFile=po.fileExtensionIs(o.fileName,".d.ts"),o.scriptKind=n,o}function x(e,t){e?h|=t:h&=~t}function A(e){x(e,2048)}function D(e){x(e,4096)}function w(e){x(e,8192)}function O(e){x(e,16384)}function R(e,t){var n=e&h;if(n){x(!1,n);var o=t();return x(!0,n),o}return t()}function L(e,t){var n=e&~h;if(n){x(!0,n);var o=t();return x(!1,n),o}return t()}function P(e){return R(2048,e)}function M(e){return L(16384,e)}function F(e){return 0!=(h&e)}function U(){return F(4096)}function H(){return F(2048)}function G(){return F(8192)}function V(){return F(16384)}function W(e,t){var n=N.getTokenPos();K(n,N.getTextPos()-n,e,t)}function K(e,t,n,o){var r=po.lastOrUndefined(v);r&&e===r.start||v.push(po.createFileDiagnostic(p,e,t,n,o)),y=!0}function z(e,t){K(N.getTextPos(),t||0,e)}function j(){return N.getStartPos()}function Y(){return B}function X(){return B=N.scan()}function J(){return B=N.reScanGreaterToken()}function q(){return B=N.scanJsxIdentifier()}function Z(){return B=N.scanJsxToken()}function $(e,t){var n=B,o=v.length,r=y,i=h,a=t?N.lookAhead(e):N.tryScan(e);return po.Debug.assert(i===h),a&&!t||(B=n,v.length=o,y=r),a}function Q(e){return $(e,!0)}function ee(e){return $(e,!1)}function te(){return 71===Y()||(116!==Y()||!U())&&((121!==Y()||!V())&&107<Y())}function ne(e,t,n){return void 0===n&&(n=!0),Y()===e?(n&&X(),!0):(t?W(t):W(po.Diagnostics._0_expected,po.tokenToString(e)),!1)}function oe(e){return Y()===e&&(X(),!0)}function re(e){if(Y()===e)return ae()}function ie(e,t,n,o){return re(e)||pe(e,t,n,o)}function ae(){var e=ce(Y());return X(),ge(e)}function se(){return 25===Y()||(18===Y()||1===Y()||N.hasPrecedingLineBreak())}function le(){return se()?(25===Y()&&X(),!0):ne(25)}function ce(e,t){return d++,0<=t||(t=N.getStartPos()),po.isNodeKind(e)?new r(e,t,t):71===e?new a(e,t,t):new i(e,t,t)}function ue(e,t,n){var o=e.length,r=1<=o&&o<=4?e.slice():e;return r.pos=t,r.end=void 0===n?N.getStartPos():n,r}function ge(e,t){return e.end=void 0===t?N.getStartPos():t,h&&(e.flags|=h),y&&(y=!1,e.flags|=32768),e}function pe(e,t,n,o){t?K(N.getStartPos(),0,n,o):W(n,o);var r=ce(e,N.getStartPos());return 71===e?r.escapedText="":(po.isLiteralKind(e)||po.isTemplateLiteralKind(e))&&(r.text=""),ge(r)}function de(e){var t=_.get(e);return void 0===t&&_.set(e,t=e),t}function _e(e,t){if(f++,e){var n=ce(71);return 71!==Y()&&(n.originalKeywordKind=Y()),n.escapedText=po.escapeLeadingUnderscores(de(N.getTokenValue())),X(),ge(n)}return pe(71,1===Y(),t||po.Diagnostics.Identifier_expected)}function fe(e){return _e(te(),e)}function he(e){return _e(po.tokenIsIdentifierOrKeyword(Y()),e)}function me(){return po.tokenIsIdentifierOrKeyword(Y())||9===Y()||8===Y()}function ye(e){if(9===Y()||8===Y()){var t=Ke();return t.text=de(t.text),t}return e&&21===Y()?(n=ce(144),ne(21),n.expression=P(It),ne(22),ge(n)):he();var n}function ve(){return ye(!0)}function be(e){return Y()===e&&ee(Te)}function ke(){return X(),!N.hasPrecedingLineBreak()&&Ee()}function Te(){return 76===Y()?83===X():84===Y()?(X(),79===Y()?Q(Se):39!==Y()&&118!==Y()&&17!==Y()&&Ee()):79===Y()?Se():115===Y()?(X(),Ee()):ke()}function Ee(){return 21===Y()||17===Y()||39===Y()||24===Y()||me()}function Se(){return X(),75===Y()||89===Y()||109===Y()||117===Y()&&Q(vn)||120===Y()&&Q(bn)}function Ce(e,t){if(Re(e))return!0;switch(e){case 0:case 1:case 3:return!(25===Y()&&t)&&Sn();case 2:return 73===Y()||79===Y();case 4:return Q(at);case 5:return Q(Kn)||25===Y()&&!t;case 6:return 21===Y()||me();case 12:return 21===Y()||39===Y()||24===Y()||me();case 17:return me();case 9:return 21===Y()||24===Y()||me();case 7:return 17===Y()?Q(xe):t?te()&&!Be():Dt()&&!Be();case 8:return wn();case 10:return 26===Y()||24===Y()||wn();case 18:return te();case 11:case 15:return 26===Y()||24===Y()||Bt();case 16:return $e();case 19:case 20:return 26===Y()||mt();case 21:return to();case 22:return po.tokenIsIdentifierOrKeyword(Y());case 13:return po.tokenIsIdentifierOrKeyword(Y())||17===Y();case 14:return!0}po.Debug.fail("Non-exhaustive case in 'isListElement'.")}function xe(){if(po.Debug.assert(17===Y()),18===X()){var e=X();return 26===e||17===e||85===e||108===e}return!0}function Ae(){return X(),te()}function De(){return X(),po.tokenIsIdentifierOrKeyword(Y())}function Be(){return(108===Y()||85===Y())&&Q(Ie)}function Ie(){return X(),Bt()}function Ne(e){if(1===Y())return!0;switch(e){case 1:case 2:case 4:case 5:case 6:case 12:case 9:case 22:return 18===Y();case 3:return 18===Y()||73===Y()||79===Y();case 7:return 17===Y()||85===Y()||108===Y();case 8:return function(){if(se())return!0;if(Ht(Y()))return!0;if(36===Y())return!0;return!1}();case 18:return 29===Y()||19===Y()||17===Y()||85===Y()||108===Y();case 11:return 20===Y()||25===Y();case 15:case 20:case 10:return 22===Y();case 16:case 17:return 20===Y()||22===Y();case 19:return 26!==Y();case 21:return 17===Y()||18===Y();case 13:return 29===Y()||41===Y();case 14:return 27===Y()&&Q(ao)}}function we(e,t){var n=c;c|=1<<e;for(var o=[],r=j();!Ne(e);)if(Ce(e,!1)){var i=Oe(e,t);o.push(i)}else if(Le(e))break;return c=n,ue(o,r)}function Oe(e,t){var n,o=Re(e);return o?(n=o,N.setTextPos(n.end),X(),n):t()}function Re(e){if(!y&&l){var t=l.currentNode(N.getStartPos());if(!po.nodeIsMissing(t))if(!t.intersectsChange)if(!po.containsParseError(t))if((96256&t.flags)===h&&function(e,t){switch(t){case 5:return function(e){if(e)switch(e.kind){case 152:case 157:case 153:case 154:case 149:case 206:return!0;case 151:var t=e,n=71===t.name.kind&&123===t.name.originalKeywordKind;return!n}return!1}(e);case 2:return function(e){if(e)switch(e.kind){case 257:case 258:return!0}return!1}(e);case 0:case 1:case 3:return function(e){if(e)switch(e.kind){case 228:case 208:case 207:case 211:case 210:case 223:case 219:case 221:case 218:case 217:case 215:case 216:case 214:case 213:case 220:case 209:case 224:case 222:case 212:case 225:case 238:case 237:case 244:case 243:case 233:case 229:case 230:case 232:case 231:return!0}return!1}(e);case 6:return 264===e.kind;case 4:return function(e){if(e)switch(e.kind){case 156:case 150:case 157:case 148:case 155:return!0}return!1}(e);case 8:return function(e){if(226!==e.kind)return!1;return void 0===e.initializer}(e);case 16:return function(e){if(146!==e.kind)return!1;return void 0===e.initializer}(e);case 17:return!1}return!1}(t,e))return t}}function Le(e){return W(function(e){switch(e){case 0:case 1:return po.Diagnostics.Declaration_or_statement_expected;case 2:return po.Diagnostics.case_or_default_expected;case 3:return po.Diagnostics.Statement_expected;case 17:case 4:return po.Diagnostics.Property_or_signature_expected;case 5:return po.Diagnostics.Unexpected_token_A_constructor_method_accessor_or_property_was_expected;case 6:return po.Diagnostics.Enum_member_expected;case 7:return po.Diagnostics.Expression_expected;case 8:return po.Diagnostics.Variable_declaration_expected;case 9:return po.Diagnostics.Property_destructuring_pattern_expected;case 10:return po.Diagnostics.Array_element_destructuring_pattern_expected;case 11:return po.Diagnostics.Argument_expression_expected;case 12:return po.Diagnostics.Property_assignment_expected;case 15:return po.Diagnostics.Expression_or_comma_expected;case 16:return po.Diagnostics.Parameter_declaration_expected;case 18:return po.Diagnostics.Type_parameter_declaration_expected;case 19:return po.Diagnostics.Type_argument_expected;case 20:return po.Diagnostics.Type_expected;case 21:return po.Diagnostics.Unexpected_token_expected;case 22:case 13:case 14:return po.Diagnostics.Identifier_expected}}(e)),!!function(){for(var e=0;e<23;e++)if(c&1<<e&&(Ce(e,!0)||Ne(e)))return!0;return!1}()||(X(),!1)}function Pe(e,t,n){var o=c;c|=1<<e;for(var r=[],i=j(),a=-1;;)if(Ce(e,!1)){var s=N.getStartPos();if(r.push(Oe(e,t)),a=N.getTokenPos(),oe(26))continue;if(a=-1,Ne(e))break;ne(26),n&&25===Y()&&!N.hasPrecedingLineBreak()&&X(),s===N.getStartPos()&&X()}else{if(Ne(e))break;if(Le(e))break}c=o;var l=ue(r,i);return 0<=a&&(l.hasTrailingComma=!0),l}function Me(){return ue([],j())}function Fe(e,t,n,o){if(ne(n)){var r=Pe(e,t);return ne(o),r}return Me()}function Ue(e,t){for(var n=e?he(t):fe(t),o=N.getStartPos();oe(23);){if(27===Y()){n.jsdocDotPos=o;break}o=N.getStartPos(),n=He(n,Ge(e))}return n}function He(e,t){var n=ce(143,e.pos);return n.left=e,n.right=t,ge(n)}function Ge(e){if(N.hasPrecedingLineBreak()&&po.tokenIsIdentifierOrKeyword(Y())&&Q(yn))return pe(71,!0,po.Diagnostics.Identifier_expected);return e?he():fe()}function Ve(){var e,t=ce(196);t.head=(e=ze(Y()),po.Debug.assert(14===e.kind,"Template head has wrong token kind"),e),po.Debug.assert(14===t.head.kind,"Template head has wrong token kind");for(var n=[],o=j();n.push(We()),15===po.lastOrUndefined(n).literal.kind;);return t.templateSpans=ue(n,o),ge(t)}function We(){var e,t,n=ce(205);return n.expression=P(It),18===Y()?(B=N.reScanTemplateToken(),t=ze(Y()),po.Debug.assert(15===t.kind||16===t.kind,"Template fragment has wrong token kind"),e=t):e=ie(16,!1,po.Diagnostics._0_expected,po.tokenToString(18)),n.literal=e,ge(n)}function Ke(){return ze(Y())}function ze(e){var t=ce(e),n=N.getTokenValue();return t.text=n,N.hasExtendedUnicodeEscape()&&(t.hasExtendedUnicodeEscape=!0),N.isUnterminated()&&(t.isUnterminated=!0),8===t.kind&&(t.numericLiteralFlags=N.getNumericLiteralFlags()),X(),ge(t),t}function je(){var e=ce(159);return e.typeName=Ue(!0,po.Diagnostics.Type_expected),N.hasPrecedingLineBreak()||27!==Y()||(e.typeArguments=Fe(19,Ct,27,29)),ge(e)}function Ye(){var e=ce(146);return 99!==Y()&&94!==Y()||(e.name=he(),ne(56)),e.type=Ct(),ge(e)}function Xe(e){var t=ce(e);return X(),t.type=ht(),ge(t)}function Je(){var e=ce(145);return e.name=fe(),oe(85)&&(mt()||!Bt()?e.constraint=Ct():e.expression=zt()),oe(58)&&(e.default=Ct()),ge(e)}function qe(){if(27===Y())return Fe(18,Je,27,29)}function Ze(){if(oe(56))return Ct()}function $e(){return 24===Y()||wn()||po.isModifierKind(Y())||57===Y()||mt(!0)}function Qe(e){var t=ce(146);return 99===Y()?(t.name=_e(!0),t.type=Ze(),ge(t)):(t.decorators=zn(),t.modifiers=jn(),t.dotDotDotToken=re(24),t.name=On(),0===po.getFullWidth(t.name)&&!po.hasModifiers(t)&&po.isModifierKind(Y())&&X(),t.questionToken=re(55),t.type=Ze(),t.initializer=Nt(!0,e),E(ge(t)))}function et(e,t,n){var o,r;32&t||(n.typeParameters=qe()),n.parameters=function(e){if(ne(19)){var t=U(),n=V();D(!!(1&e)),O(!!(2&e));var o=Pe(16,32&e?Ye:function(){return Qe(!!(8&e))});if(D(t),O(n),!ne(20)&&8&e)return;return o}return 8&e?void 0:Me()}(t),n.type=(r=!!(4&t),(36===(o=e)?(ne(o),1):oe(56)||r&&36===Y()&&(W(po.Diagnostics._0_expected,po.tokenToString(56)),X(),1))?function(){var e=te()&&ee(St),t=Ct();if(e){var n=ce(158,e.pos);return n.parameterName=e,n.type=t,ge(n)}return t}():void 0)}function tt(){oe(26)||le()}function nt(e){var t=ce(e);return 156===e&&ne(94),et(56,4,t),tt(),E(ge(t))}function ot(){return 21===Y()&&Q(rt)}function rt(){if(X(),24===Y()||22===Y())return!0;if(po.isModifierKind(Y())){if(X(),te())return!0}else{if(!te())return!1;X()}return 56===Y()||26===Y()||55===Y()&&(X(),56===Y()||26===Y()||22===Y())}function it(e,t,n){var o=ce(157,e);return o.decorators=t,o.modifiers=n,o.parameters=Fe(16,Qe,21,22),o.type=At(),tt(),E(ge(o))}function at(){if(19===Y()||27===Y())return!0;for(var e;po.isModifierKind(Y());)e=!0,X();return 21===Y()||(me()&&(e=!0,X()),!!e&&(19===Y()||27===Y()||55===Y()||56===Y()||26===Y()||se()))}function st(){if(19===Y()||27===Y())return nt(155);if(94===Y()&&Q(lt))return nt(156);var e=j(),t=jn();return ot()?it(e,void 0,t):function(e,t){var n=ve(),o=re(55);if(19===Y()||27===Y()){var r=ce(150,e);return r.modifiers=t,r.name=n,r.questionToken=o,et(56,4,r),tt(),E(ge(r))}var i=ce(148,e);return i.modifiers=t,i.name=n,i.questionToken=o,i.type=At(),58===Y()&&(i.initializer=Gn()),tt(),E(ge(i))}(e,t)}function lt(){return X(),19===Y()||27===Y()}function ct(){var e;return ne(17)?(e=we(4,st),ne(18)):e=Me(),e}function ut(){return X(),131===Y()&&X(),21===Y()&&Ae()&&92===X()}function gt(){var e,t=ce(172);return ne(17),t.readonlyToken=re(131),ne(21),t.typeParameter=((e=ce(145)).name=fe(),ne(92),e.constraint=Ct(),ge(e)),ne(22),t.questionToken=re(55),t.type=At(),le(),ne(18),ge(t)}function pt(e){var t=ce(e);return 161===e&&ne(94),et(36,4,t),E(ge(t))}function dt(){var e=ae();return 23===Y()?void 0:e}function _t(e){var t,n=ce(173);e&&((t=ce(192)).operator=38,X());var o=101===Y()||86===Y()?ae():ze(Y());return e&&(t.operand=o,ge(t),o=t),n.literal=o,ge(n)}function ft(){return 8===X()}function ht(){switch(Y()){case 119:case 136:case 133:case 122:case 137:case 139:case 130:case 134:return ee(dt)||je();case 39:return l=ce(268),X(),ge(l);case 55:return s=N.getStartPos(),X(),26===Y()||18===Y()||20===Y()||29===Y()||58===Y()||49===Y()?ge(a=ce(269,s)):((a=ce(270,s)).type=Ct(),ge(a));case 89:return function(){if(Q(io)){var e=ce(273);return X(),et(56,36,e),E(ge(e))}var t=ce(159);return t.typeName=he(),ge(t)}();case 24:return Xe(274);case 51:return Xe(271);case 13:case 9:case 8:case 101:case 86:return _t();case 38:return Q(ft)?_t(!0):je();case 105:case 95:return ae();case 99:var e=(i=ce(169),X(),ge(i));return 126!==Y()||N.hasPrecedingLineBreak()?e:function(e){X();var t=ce(158,e.pos);return t.parameterName=e,t.type=Ct(),ge(t)}(e);case 103:return r=ce(162),ne(103),r.exprName=Ue(!0),ge(r);case 17:return Q(ut)?gt():((o=ce(163)).members=ct(),ge(o));case 21:return(n=ce(165)).elementTypes=Fe(20,Ct,21,22),ge(n);case 19:return t=ce(168),ne(19),t.type=Ct(),ne(20),ge(t);default:return je()}var t,n,o,r,i,a,s,l}function mt(e){switch(Y()){case 119:case 136:case 133:case 122:case 137:case 105:case 139:case 95:case 99:case 103:case 130:case 17:case 21:case 27:case 49:case 48:case 94:case 9:case 8:case 101:case 86:case 134:case 39:case 55:case 51:case 24:return!0;case 38:return!e&&Q(ft);case 19:return!e&&Q(yt);default:return te()}}function yt(){return X(),20===Y()||$e()||mt()}function vt(e,t){X();var n=ce(e,t.pos);return n.type=t,ge(n)}function bt(){switch(Y()){case 127:return e=127,t=ce(170),ne(e),t.operator=e,t.type=bt(),ge(t)}var e,t;return function(){for(var e=ht();!N.hasPrecedingLineBreak();)switch(Y()){case 58:if(!(1048576&h))return e;e=vt(272,e);break;case 51:e=vt(271,e);break;case 55:e=vt(270,e);break;case 21:var t;ne(21),mt()?((t=ce(171,e.pos)).objectType=e,t.indexType=Ct()):(t=ce(164,e.pos)).elementType=e,ne(22),e=ge(t);break;default:return e}return e}()}function kt(e,t,n){oe(n);var o=t();if(Y()===n){for(var r=[o];oe(n);)r.push(t());var i=ce(e,o.pos);i.types=ue(r,o.pos),o=ge(i)}return o}function Tt(){return kt(167,bt,48)}function Et(){if(X(),20===Y()||24===Y())return!0;if(function(){if(po.isModifierKind(Y())&&jn(),te()||99===Y())return X(),!0;if(21===Y()||17===Y()){var e=v.length;return On(),e===v.length}return!1}()){if(56===Y()||26===Y()||55===Y()||58===Y())return!0;if(20===Y()&&(X(),36===Y()))return!0}return!1}function St(){var e=fe();if(126===Y()&&!N.hasPrecedingLineBreak())return X(),e}function Ct(){return R(20480,xt)}function xt(){return 27===Y()||19===Y()&&Q(Et)?pt(160):94===Y()?pt(161):kt(166,Tt,49)}function At(){return oe(56)?Ct():void 0}function Dt(){switch(Y()){case 99:case 97:case 95:case 101:case 86:case 8:case 9:case 13:case 14:case 19:case 21:case 17:case 89:case 75:case 94:case 41:case 63:case 71:return!0;case 91:return Q(lt);default:return te()}}function Bt(){if(Dt())return!0;switch(Y()){case 37:case 38:case 52:case 51:case 80:case 103:case 105:case 43:case 44:case 27:case 121:case 116:return!0;default:return!!function(){if(H()&&92===Y())return!1;return 0<Vt()}()||te()}}function It(){var e=G();e&&w(!1);for(var t,n=wt();t=re(26);)n=Wt(n,t,wt());return e&&w(!0),n}function Nt(e,t){if(58!==Y()){if(N.hasPrecedingLineBreak()||e&&17===Y()||!Bt())return;if(e&&t){var n=pe(71,!0,po.Diagnostics._0_expected,"=");return n.escapedText="= not found",n}}return ne(58),wt()}function wt(){if(function(){if(116===Y())return!!U()||Q(kn);return!1}())return e=ce(197),X(),N.hasPrecedingLineBreak()||39!==Y()&&!Bt()||(e.asteriskToken=re(39),e.expression=wt()),ge(e);var e,t=function(){var e=function(){if(19===Y()||27===Y()||120===Y())return Q(Rt);if(36===Y())return 1;return 0}();if(0===e)return;var t=1===e?Mt(!0):ee(Lt);if(!t)return;var n=po.hasModifier(t,256),o=Y();return t.equalsGreaterThanToken=ie(36,!1,po.Diagnostics._0_expected,"=>"),t.body=36===o||17===o?Ft(n):fe(),E(ge(t))}()||function(){if(120===Y()&&1===Q(Pt)){var e=Yn(),t=Ut(0);return Ot(t,e)}return}();if(t)return t;var n=Ut(0);return 71===n.kind&&36===Y()?Ot(n):po.isLeftHandSideExpression(n)&&po.isAssignmentOperator(J())?Wt(n,ae(),wt()):function(e){var t=re(55);if(!t)return e;var n=ce(195,e.pos);return n.condition=e,n.questionToken=t,n.whenTrue=R(m,wt),n.colonToken=ie(56,!1,po.Diagnostics._0_expected,po.tokenToString(56)),n.whenFalse=wt(),ge(n)}(n)}function Ot(e,t){var n;po.Debug.assert(36===Y(),"parseSimpleArrowFunctionExpression should only have been called if we had a =>"),t?(n=ce(187,t.pos)).modifiers=t:n=ce(187,e.pos);var o=ce(146,e.pos);return o.name=e,ge(o),n.parameters=ue([o],o.pos,o.end),n.equalsGreaterThanToken=ie(36,!1,po.Diagnostics._0_expected,"=>"),n.body=Ft(!!t),E(ge(n))}function Rt(){if(120===Y()){if(X(),N.hasPrecedingLineBreak())return 0;if(19!==Y()&&27!==Y())return 0}var e=Y(),t=X();if(19===e){if(20===t)switch(X()){case 36:case 56:case 17:return 1;default:return 0}return 21===t||17===t?2:24===t?1:te()?56===X()?1:2:0}return po.Debug.assert(27===e),te()?1===p.languageVariant?Q(function(){var e=X();if(85===e)switch(X()){case 58:case 29:return!1;default:return!0}else if(26===e)return!0;return!1})?1:0:2:0}function Lt(){return Mt(!1)}function Pt(){if(120===Y()){if(X(),N.hasPrecedingLineBreak()||36===Y())return 0;var e=Ut(0);if(!N.hasPrecedingLineBreak()&&71===e.kind&&36===Y())return 1}return 0}function Mt(e){var t=ce(187);if(t.modifiers=Yn(),et(56,(po.hasModifier(t,256)?2:0)|(e?0:8),t),t.parameters&&(e||!(36!==Y()&&17!==Y()||po.find(t.parameters,function(e){return e.initializer&&po.isIdentifier(e.initializer)&&"= not found"===e.initializer.escapedText}))))return t}function Ft(e){return 17===Y()?dn(e?2:0):25===Y()||89===Y()||75===Y()||!Sn()||17!==Y()&&89!==Y()&&75!==Y()&&57!==Y()&&Bt()?e?M(wt):R(16384,wt):dn(16|(e?2:0))}function Ut(e){return Gt(e,zt())}function Ht(e){return 92===e||142===e}function Gt(e,t){for(;;){J();var n=Vt();if(!(40===Y()?e<=n:e<n))break;if(92===Y()&&H())break;if(118===Y()){if(N.hasPrecedingLineBreak())break;X(),t=Kt(t,Ct())}else t=Wt(t,ae(),Ut(n))}return t}function Vt(){switch(Y()){case 54:return 1;case 53:return 2;case 49:return 3;case 50:return 4;case 48:return 5;case 32:case 33:case 34:case 35:return 6;case 27:case 29:case 30:case 31:case 93:case 92:case 118:return 7;case 45:case 46:case 47:return 8;case 37:case 38:return 9;case 39:case 41:case 42:return 10;case 40:return 11}return-1}function Wt(e,t,n){var o=ce(194,e.pos);return o.left=e,o.operatorToken=t,o.right=n,ge(o)}function Kt(e,t){var n=ce(202,e.pos);return n.expression=e,n.type=t,ge(n)}function zt(){if(function(){switch(Y()){case 37:case 38:case 52:case 51:case 80:case 103:case 105:case 121:return!1;case 27:if(1!==p.languageVariant)return!1;default:return!0}}()){var e=Yt();return 40===Y()?Gt(Vt(),e):e}var t=Y(),n=jt();if(40===Y()){var o=po.skipTrivia(I,n.pos);184===n.kind?K(o,n.end-o,po.Diagnostics.A_type_assertion_expression_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses):K(o,n.end-o,po.Diagnostics.An_unary_expression_with_the_0_operator_is_not_allowed_in_the_left_hand_side_of_an_exponentiation_expression_Consider_enclosing_the_expression_in_parentheses,po.tokenToString(t))}return n}function jt(){switch(Y()){case 37:case 38:case 52:case 51:return(i=ce(192)).operator=Y(),X(),i.operand=jt(),ge(i);case 80:return r=ce(188),X(),r.expression=jt(),ge(r);case 103:return o=ce(189),X(),o.expression=jt(),ge(o);case 105:return n=ce(190),X(),n.expression=jt(),ge(n);case 27:return t=ce(184),ne(27),t.type=Ct(),ne(29),t.expression=jt(),ge(t);case 121:if(121===Y()&&(V()||Q(kn)))return e=ce(191),X(),e.expression=jt(),ge(e);default:return Yt()}var e,t,n,o,r,i}function Yt(){if(43===Y()||44===Y())return(e=ce(192)).operator=Y(),X(),e.operand=Xt(),ge(e);if(1===p.languageVariant&&27===Y()&&Q(De))return qt(!0);var e,t=Xt();return po.Debug.assert(po.isLeftHandSideExpression(t)),43!==Y()&&44!==Y()||N.hasPrecedingLineBreak()?t:((e=ce(193,t.pos)).operand=t,e.operator=Y(),X(),ge(e))}function Xt(){var e;return 91===Y()&&Q(lt)?(p.flags|=524288,e=ae()):e=97===Y()?function(){var e=ae();if(19===Y()||23===Y()||21===Y())return e;var t=ce(179,e.pos);return t.expression=e,ie(23,!1,po.Diagnostics.super_must_be_followed_by_an_argument_list_or_member_access),t.name=Ge(!0),ge(t)}():Jt(),function(e){for(;;)if(e=tn(e),27!==Y()){if(19!==Y())return e;var t=ce(181,e.pos);t.expression=e,t.arguments=nn(),e=ge(t)}else{var n=ee(on);if(!n)return e;var t=ce(181,e.pos);t.expression=e,t.typeArguments=n,t.arguments=nn(),e=ge(t)}}(e)}function Jt(){return tn(function(){switch(Y()){case 8:case 9:case 13:return Ke();case 99:case 97:case 95:case 101:case 86:return ae();case 19:return e=ce(185),ne(19),e.expression=P(It),ne(20),E(ge(e));case 21:return function(){var e=ce(177);ne(21),N.hasPrecedingLineBreak()&&(e.multiLine=!0);return e.elements=Pe(15,rn),ne(22),ge(e)}();case 17:return cn();case 120:if(!Q(bn))break;return un();case 75:return qn(N.getStartPos(),void 0,void 0,199);case 89:return un();case 94:return function(){var e=N.getStartPos();if(ne(94),oe(23)){var t=ce(204,e);return t.keywordToken=94,t.name=he(),ge(t)}var n=ce(182,e);n.expression=Jt(),n.typeArguments=ee(on),(n.typeArguments||19===Y())&&(n.arguments=nn());return ge(n)}();case 41:case 63:if(12===(B=N.reScanSlashToken()))return Ke();break;case 14:return Ve()}var e;return fe(po.Diagnostics.Expression_expected)}())}function qt(e){var t,n=function(e){var t=N.getStartPos();ne(27);var n,o=$t(),r=(i=ce(254),i.properties=we(13,en),ge(i));var i;29===Y()?(n=ce(251,t),Z()):(ne(41),e?ne(29):(ne(29,void 0,!1),Z()),n=ce(250,t));return n.tagName=o,n.attributes=r,ge(n)}(e);if(251===n.kind){var o=ce(249,n.pos);o.openingElement=n,o.children=function(e){var t=[],n=j(),o=c;c|=16384;for(;B=N.reScanJsxToken(),28!==Y();){if(1===Y()){K(e.pos,e.end-e.pos,po.Diagnostics.JSX_element_0_has_no_corresponding_closing_tag,po.getTextOfNodeFromSourceText(I,e));break}if(7===Y())break;var r=Zt();r&&t.push(r)}return c=o,ue(t,n)}(o.openingElement.tagName),o.closingElement=function(e){var t=ce(252);ne(28),t.tagName=$t(),e?ne(29):(ne(29,void 0,!1),Z());return ge(t)}(e),function e(t,n){return t.kind===n.kind&&(71===t.kind?t.escapedText===n.escapedText:99===t.kind||t.name.escapedText===n.name.escapedText&&e(t.expression,n.expression))}(o.openingElement.tagName,o.closingElement.tagName)||K(o.closingElement.pos,o.closingElement.end-o.closingElement.pos,po.Diagnostics.Expected_corresponding_JSX_closing_tag_for_0,po.getTextOfNodeFromSourceText(I,o.openingElement.tagName)),t=ge(o)}else po.Debug.assert(250===n.kind),t=n;if(e&&27===Y()){var r=ee(function(){return qt(!0)});if(r){W(po.Diagnostics.JSX_expressions_must_have_one_parent_element);var i=ce(194,t.pos);return i.end=r.end,i.left=t,i.right=r,i.operatorToken=pe(26,!1,void 0),i.operatorToken.pos=i.operatorToken.end=i.right.pos,i}}return t}function Zt(){switch(Y()){case 10:case 11:return(e=ce(10,N.getStartPos())).containsOnlyWhiteSpaces=11===B,B=N.scanJsxToken(),ge(e);case 17:return Qt(!1);case 27:return qt(!1)}var e;po.Debug.fail("Unknown JSX child kind "+Y())}function $t(){q();for(var e=99===Y()?ae():he();oe(23);){var t=ce(179,e.pos);t.expression=e,t.name=Ge(!0),e=ge(t)}return e}function Qt(e){var t=ce(256);return ne(17),18!==Y()&&(t.dotDotDotToken=re(24),t.expression=wt()),e?ne(18):(ne(18,void 0,!1),Z()),ge(t)}function en(){if(17===Y())return e=ce(255),ne(17),ne(24),e.expression=It(),ne(18),ge(e);var e;q();var t=ce(253);if(t.name=he(),58===Y())switch(B=N.scanJsxAttributeValue()){case 9:t.initializer=Ke();break;default:t.initializer=Qt(!0)}return ge(t)}function tn(e){for(;;){if(re(23)){var t=ce(179,e.pos);t.expression=e,t.name=Ge(!0),e=ge(t)}else if(51!==Y()||N.hasPrecedingLineBreak())if(G()||!oe(21)){if(13!==Y()&&14!==Y())return e;var n=ce(183,e.pos);n.tag=e,n.template=13===Y()?Ke():Ve(),e=ge(n)}else{var o=ce(180,e.pos);if(o.expression=e,22!==Y()&&(o.argumentExpression=P(It),9===o.argumentExpression.kind||8===o.argumentExpression.kind)){var r=o.argumentExpression;r.text=de(r.text)}ne(22),e=ge(o)}else{X();var i=ce(203,e.pos);i.expression=e,e=ge(i)}}}function nn(){ne(19);var e=Pe(11,an);return ne(20),e}function on(){if(oe(27)){var e=Pe(19,Ct);if(ne(29))return e&&function(){switch(Y()){case 19:case 23:case 20:case 22:case 56:case 25:case 55:case 32:case 34:case 33:case 35:case 53:case 54:case 50:case 48:case 49:case 18:case 1:return!0;case 26:case 17:default:return!1}}()?e:void 0}}function rn(){return 24===Y()?(e=ce(198),ne(24),e.expression=wt(),ge(e)):26===Y()?ce(200):wt();var e}function an(){return R(m,rn)}function sn(e,t,n){return be(125)?Vn(153,e,t,n):be(135)?Vn(154,e,t,n):void 0}function ln(){var e=N.getStartPos();if(re(24)){var t=ce(263,e);return t.expression=wt(),E(ge(t))}var n=zn(),o=jn(),r=sn(e,n,o);if(r)return r;var i=re(39),a=te(),s=ve(),l=re(55);if(i||19===Y()||27===Y())return Un(e,n,o,i,s,l);if(a&&(26===Y()||18===Y()||58===Y())){var c=ce(262,e);c.name=s,c.questionToken=l;var u=re(58);return u&&(c.equalsToken=u,c.objectAssignmentInitializer=P(wt)),E(ge(c))}var g=ce(261,e);return g.modifiers=o,g.name=s,g.questionToken=l,ne(56),g.initializer=P(wt),E(ge(g))}function cn(){var e=ce(178);return ne(17),N.hasPrecedingLineBreak()&&(e.multiLine=!0),e.properties=Pe(12,ln,!0),ne(18),ge(e)}function un(){var e=G();e&&w(!1);var t=ce(186);t.modifiers=jn(),ne(89),t.asteriskToken=re(39);var n=t.asteriskToken?1:0,o=po.hasModifier(t,256)?2:0;return t.name=n&&o?L(20480,gn):n?L(4096,gn):o?M(gn):gn(),et(56,n|o,t),t.body=dn(n|o),e&&w(!0),E(ge(t))}function gn(){return te()?fe():void 0}function pn(e,t){var n=ce(207);return ne(17,t)||e?(N.hasPrecedingLineBreak()&&(n.multiLine=!0),n.statements=we(1,xn),ne(18)):n.statements=Me(),ge(n)}function dn(e,t){var n=U();D(!!(1&e));var o=V();O(!!(2&e));var r=G();r&&w(!1);var i=pn(!!(16&e),t);return r&&w(!0),D(n),O(o),i}function _n(){var e=j();ne(88);var t=re(121);ne(19);var n,o=void 0;if(25!==Y()&&(o=104===Y()||110===Y()||76===Y()?Ln(!0):L(2048,It)),t?ne(142):oe(142)){var r=ce(216,e);r.awaitModifier=t,r.initializer=o,r.expression=P(wt),ne(20),n=r}else if(oe(92)){var i=ce(215,e);i.initializer=o,i.expression=P(It),ne(20),n=i}else{var a=ce(214,e);a.initializer=o,ne(25),25!==Y()&&20!==Y()&&(a.condition=P(It)),ne(25),20!==Y()&&(a.incrementor=P(It)),ne(20),n=a}return n.statement=xn(),ge(n)}function fn(e){var t=ce(e);return ne(218===e?72:77),se()||(t.label=fe()),le(),ge(t)}function hn(){return 73===Y()?(t=ce(257),ne(73),t.expression=P(It),ne(56),t.statements=we(3,xn),ge(t)):(e=ce(258),ne(79),ne(56),e.statements=we(3,xn),ge(e));var e,t}function mn(){var e=ce(224);return ne(102),e.tryBlock=pn(!1),e.catchClause=74===Y()?function(){var e=ce(260);ne(74),oe(19)?(e.variableDeclaration=Rn(),ne(20)):e.variableDeclaration=void 0;return e.block=pn(!1),ge(e)}():void 0,e.catchClause&&87!==Y()||(ne(87),e.finallyBlock=pn(!1)),ge(e)}function yn(){return X(),po.tokenIsIdentifierOrKeyword(Y())&&!N.hasPrecedingLineBreak()}function vn(){return X(),75===Y()&&!N.hasPrecedingLineBreak()}function bn(){return X(),89===Y()&&!N.hasPrecedingLineBreak()}function kn(){return X(),(po.tokenIsIdentifierOrKeyword(Y())||8===Y()||9===Y())&&!N.hasPrecedingLineBreak()}function Tn(){for(;;)switch(Y()){case 104:case 110:case 76:case 89:case 75:case 83:return!0;case 109:case 138:return X(),!N.hasPrecedingLineBreak()&&te();case 128:case 129:return Dn();case 117:case 120:case 124:case 112:case 113:case 114:case 131:if(X(),N.hasPrecedingLineBreak())return!1;continue;case 141:return X(),17===Y()||71===Y()||84===Y();case 91:return X(),9===Y()||39===Y()||17===Y()||po.tokenIsIdentifierOrKeyword(Y());case 84:if(X(),58===Y()||39===Y()||17===Y()||79===Y()||118===Y())return!0;continue;case 115:X();continue;default:return!1}}function En(){return Q(Tn)}function Sn(){switch(Y()){case 57:case 25:case 17:case 104:case 110:case 89:case 75:case 83:case 90:case 81:case 106:case 88:case 77:case 72:case 96:case 107:case 98:case 100:case 102:case 78:case 74:case 87:return!0;case 91:return En()||Q(lt);case 76:case 84:return En();case 120:case 124:case 109:case 128:case 129:case 138:case 141:return!0;case 114:case 112:case 113:case 115:case 131:return En()||!Q(yn);default:return Bt()}}function Cn(){return X(),te()||17===Y()||21===Y()}function xn(){switch(Y()){case 25:return s=ce(209),ne(25),ge(s);case 17:return pn(!1);case 104:return Mn(N.getStartPos(),void 0,void 0);case 110:if(Q(Cn))return Mn(N.getStartPos(),void 0,void 0);break;case 89:return Fn(N.getStartPos(),void 0,void 0);case 75:return Jn(N.getStartPos(),void 0,void 0);case 90:return a=ce(211),ne(90),ne(19),a.expression=P(It),ne(20),a.thenStatement=xn(),a.elseStatement=oe(82)?xn():void 0,ge(a);case 81:return i=ce(212),ne(81),i.statement=xn(),ne(106),ne(19),i.expression=P(It),ne(20),oe(25),ge(i);case 106:return r=ce(213),ne(106),ne(19),r.expression=P(It),ne(20),r.statement=xn(),ge(r);case 88:return _n();case 77:return fn(217);case 72:return fn(218);case 96:return o=ce(219),ne(96),se()||(o.expression=P(It)),le(),ge(o);case 107:return n=ce(220),ne(107),ne(19),n.expression=P(It),ne(20),n.statement=xn(),ge(n);case 98:return function(){var e=ce(221);ne(98),ne(19),e.expression=P(It),ne(20);var t=ce(235,N.getStartPos());return ne(17),t.clauses=we(2,hn),ne(18),e.caseBlock=ge(t),ge(e)}();case 100:return t=ce(223),ne(100),t.expression=N.hasPrecedingLineBreak()?void 0:P(It),le(),ge(t);case 102:case 74:case 87:return mn();case 78:return e=ce(225),ne(78),le(),ge(e);case 57:return An();case 120:case 109:case 138:case 128:case 129:case 124:case 76:case 83:case 84:case 91:case 112:case 113:case 114:case 117:case 115:case 131:case 141:if(En())return An()}var e,t,n,o,r,i,a,s;return function(){var e=N.getStartPos(),t=P(It);if(71===t.kind&&oe(56)){var n=ce(222,e);return n.label=t,n.statement=xn(),E(ge(n))}var o=ce(210,e);return o.expression=t,le(),E(ge(o))}()}function An(){var e,t,n,o,r,i,a,s,l,c=j(),u=zn(),g=jn();switch(Y()){case 104:case 110:case 76:return Mn(c,u,g);case 89:return Fn(c,u,g);case 75:return Jn(c,u,g);case 109:return a=u,s=g,(l=ce(230,c)).decorators=a,l.modifiers=s,ne(109),l.name=fe(),l.typeParameters=qe(),l.heritageClauses=Zn(),l.members=ct(),E(ge(l));case 138:return o=u,r=g,(i=ce(231,c)).decorators=o,i.modifiers=r,ne(138),i.name=fe(),i.typeParameters=qe(),ne(58),i.type=Ct(),le(),E(ge(i));case 83:return function(e,t,n){var o=ce(232,e);o.decorators=t,o.modifiers=n,ne(83),o.name=fe(),ne(17)?(o.members=Pe(6,no),ne(18)):o.members=Me();return E(ge(o))}(c,u,g);case 141:case 128:case 129:return function(e,t,n){var o=0;{if(141===Y())return ro(e,t,n);if(oe(129))o|=16;else if(ne(128),9===Y())return ro(e,t,n)}return function e(t,n,o,r){var i=ce(233,t);var a=16&r;i.decorators=n;i.modifiers=o;i.flags|=r;i.name=fe();i.body=oe(23)?e(j(),void 0,void 0,4|a):oo();return E(ge(i))}(e,t,n,o)}(c,u,g);case 91:return function(e,t,n){ne(91);var o,r=N.getStartPos();if(te()&&(o=fe(),26!==Y()&&140!==Y()))return i=t,a=n,s=o,(l=ce(237,e)).decorators=i,l.modifiers=a,l.name=s,ne(58),l.moduleReference=132===Y()&&Q(io)?(c=ce(248),ne(132),ne(19),c.expression=so(),ne(20),ge(c)):Ue(!1),le(),E(ge(l));var i,a,s,l,c;var u=ce(238,e);u.decorators=t,u.modifiers=n,(o||39===Y()||17===Y())&&(u.importClause=function(e,t){var n=ce(239,t);e&&(n.name=e);n.name&&!oe(26)||(n.namedBindings=39===Y()?(o=ce(240),ne(39),ne(118),o.name=fe(),ge(o)):lo(241));var o;return ge(n)}(o,r),ne(140));return u.moduleSpecifier=so(),le(),ge(u)}(c,u,g);case 84:switch(X(),Y()){case 79:case 58:return function(e,t,n){var o=ce(243,e);o.decorators=t,o.modifiers=n,oe(58)?o.isExportEquals=!0:ne(79);return o.expression=wt(),le(),ge(o)}(c,u,g);case 118:return e=u,t=g,(n=ce(236,c)).decorators=e,n.modifiers=t,ne(118),ne(129),n.name=fe(),le(),ge(n);default:return function(e,t,n){var o=ce(244,e);o.decorators=t,o.modifiers=n,oe(39)?(ne(140),o.moduleSpecifier=so()):(o.exportClause=lo(245),(140===Y()||9===Y()&&!N.hasPrecedingLineBreak())&&(ne(140),o.moduleSpecifier=so()));return le(),ge(o)}(c,u,g)}default:if(u||g){var p=pe(247,!0,po.Diagnostics.Declaration_expected);return p.pos=c,p.decorators=u,p.modifiers=g,ge(p)}}}function Dn(){return X(),!N.hasPrecedingLineBreak()&&(te()||9===Y())}function Bn(e,t){if(17===Y()||!se())return dn(e,t);le()}function In(){if(26===Y())return ce(200);var e=ce(176);return e.dotDotDotToken=re(24),e.name=On(),e.initializer=Nt(!1),ge(e)}function Nn(){var e=ce(176);e.dotDotDotToken=re(24);var t=te(),n=ve();return t&&56!==Y()?e.name=n:(ne(56),e.propertyName=n,e.name=On()),e.initializer=Nt(!1),ge(e)}function wn(){return 17===Y()||21===Y()||te()}function On(){return 21===Y()?(e=ce(175),ne(21),e.elements=Pe(10,In),ne(22),ge(e)):17===Y()?(t=ce(174),ne(17),t.elements=Pe(9,Nn),ne(18),ge(t)):fe();var e,t}function Rn(){var e=ce(226);return e.name=On(),e.type=At(),Ht(Y())||(e.initializer=Gn()),ge(e)}function Ln(e){var t=ce(227);switch(Y()){case 104:break;case 110:t.flags|=1;break;case 76:t.flags|=2;break;default:po.Debug.fail()}if(X(),142===Y()&&Q(Pn))t.declarations=Me();else{var n=H();A(e),t.declarations=Pe(8,Rn),A(n)}return ge(t)}function Pn(){return Ae()&&20===X()}function Mn(e,t,n){var o=ce(208,e);return o.decorators=t,o.modifiers=n,o.declarationList=Ln(!1),le(),E(ge(o))}function Fn(e,t,n){var o=ce(228,e);o.decorators=t,o.modifiers=n,ne(89),o.asteriskToken=re(39),o.name=po.hasModifier(o,512)?gn():fe();var r=o.asteriskToken?1:0,i=po.hasModifier(o,256)?2:0;return et(56,r|i,o),o.body=Bn(r|i,po.Diagnostics.or_expected),E(ge(o))}function Un(e,t,n,o,r,i,a){var s=ce(151,e);s.decorators=t,s.modifiers=n,s.asteriskToken=o,s.name=r,s.questionToken=i;var l=o?1:0,c=po.hasModifier(s,256)?2:0;return et(56,l|c,s),s.body=Bn(l|c,a),E(ge(s))}function Hn(e,t,n,o,r){var i=ce(149,e);return i.decorators=t,i.modifiers=n,i.name=o,i.questionToken=r,i.type=At(),i.initializer=po.hasModifier(i,32)?P(Gn):R(6144,Gn),le(),E(ge(i))}function Gn(){return Nt(!1)}function Vn(e,t,n,o){var r=ce(e,t);return r.decorators=n,r.modifiers=o,r.name=ve(),et(56,0,r),r.body=Bn(0),E(ge(r))}function Wn(e){switch(e){case 114:case 112:case 113:case 115:case 131:return!0;default:return!1}}function Kn(){var e;if(57===Y())return!0;for(;po.isModifierKind(Y());){if(Wn(e=Y()))return!0;X()}if(39===Y())return!0;if(me()&&(e=Y(),X()),21===Y())return!0;if(void 0!==e){if(!po.isKeyword(e)||135===e||125===e)return!0;switch(Y()){case 19:case 27:case 56:case 58:case 55:return!0;default:return se()}}return!1}function zn(){for(var e,t=j();;){var n=j();if(!oe(57))break;var o=ce(147,n);o.expression=L(8192,Xt),ge(o),(e||(e=[])).push(o)}return e&&ue(e,t)}function jn(e){for(var t,n=j();;){var o=N.getStartPos(),r=Y();if(76===Y()&&e){if(!ee(ke))break}else if(!po.isModifierKind(Y())||!ee(Te))break;var i=ge(ce(r,o));(t||(t=[])).push(i)}return t&&ue(t,n)}function Yn(){var e;if(120===Y()){var t=N.getStartPos(),n=Y();X(),e=ue([ge(ce(n,t))],t)}return e}function Xn(){if(25===Y()){var e=ce(206);return X(),ge(e)}var t,n,o,r,i,a,s,l,c,u=j(),g=zn(),p=jn(!0),d=sn(u,g,p);return d||(123===Y()?(t=g,n=p,(o=ce(152,u)).decorators=t,o.modifiers=n,ne(123),et(56,0,o),o.body=Bn(0,po.Diagnostics.or_expected),E(ge(o))):ot()?it(u,g,p):po.tokenIsIdentifierOrKeyword(Y())||9===Y()||8===Y()||39===Y()||21===Y()?(r=u,i=g,a=p,s=re(39),l=ve(),c=re(55),s||19===Y()||27===Y()?Un(r,i,a,s,l,c,po.Diagnostics.or_expected):Hn(r,i,a,l,c)):g||p?Hn(u,g,p,pe(71,!0,po.Diagnostics.Declaration_expected),void 0):void po.Debug.fail("Should not have attempted to parse class member declaration."))}function Jn(e,t,n){return qn(e,t,n,229)}function qn(e,t,n,o){var r=ce(o,e);return r.decorators=t,r.modifiers=n,ne(75),r.name=!te()||108===Y()&&Q(De)?void 0:fe(),r.typeParameters=qe(),r.heritageClauses=Zn(),ne(17)?(r.members=we(5,Xn),ne(18)):r.members=Me(),E(ge(r))}function Zn(){if(to())return we(21,$n)}function $n(){var e=Y();if(85===e||108===e){var t=ce(259);return t.token=e,X(),t.types=Pe(7,Qn),ge(t)}}function Qn(){var e=ce(201);return e.expression=Xt(),e.typeArguments=eo(),ge(e)}function eo(){return 27===Y()?Fe(19,Ct,27,29):void 0}function to(){return 85===Y()||108===Y()}function no(){var e=ce(264,N.getStartPos());return e.name=ve(),e.initializer=P(Gn),E(ge(e))}function oo(){var e=ce(234,N.getStartPos());return ne(17)?(e.statements=we(1,xn),ne(18)):e.statements=Me(),ge(e)}function ro(e,t,n){var o=ce(233,e);return o.decorators=t,o.modifiers=n,141===Y()?(o.name=fe(),o.flags|=512):(o.name=Ke(),o.name.text=de(o.name.text)),17===Y()?o.body=oo():le(),ge(o)}function io(){return 19===X()}function ao(){return 41===X()}function so(){if(9===Y()){var e=Ke();return e.text=de(e.text),e}return It()}function lo(e){var t=ce(e);return t.elements=Fe(22,241===e?uo:co,17,18),ge(t)}function co(){return go(246)}function uo(){return go(242)}function go(e){var t=ce(e),n=po.isKeyword(Y())&&!te(),o=N.getTokenPos(),r=N.getTextPos(),i=he();return 118===Y()?(t.propertyName=i,ne(118),n=po.isKeyword(Y())&&!te(),o=N.getTokenPos(),r=N.getTextPos(),t.name=he()):t.name=i,242===e&&n&&K(o,r-o,po.Diagnostics.Identifier_expected),ge(t)}e.parseSourceFile=function(e,t,n,o,r,i){k(t,n,o,i=po.ensureScriptKind(e,i));var a=(s=e,l=n,c=r,u=i,(p=C(s,l,u)).flags=h,X(),function(e){for(var t,n=po.createScanner(e.languageVersion,!1,0,I),o=[],r=[],i=[],a=void 0;;){var s=n.scan();if(2!==s){if(po.isTrivia(s))continue;break}var l={kind:n.getToken(),pos:n.getTokenPos(),end:n.getTextPos()},c=I.substring(l.pos,l.end),u=po.getFileReferenceFromReferencePath(c,l);if(u){var g=u.fileReference;e.hasNoDefaultLib=u.isNoDefaultLib;var p=u.diagnosticMessage;g&&(u.isTypeReferenceDirective?r.push(g):o.push(g)),p&&v.push(po.createFileDiagnostic(e,l.pos,l.end-l.pos,p))}else{var d=/^\/\/\/\s*<amd-module\s+name\s*=\s*('|")(.+?)\1/gim.exec(c);d&&(t&&v.push(po.createFileDiagnostic(e,l.pos,l.end-l.pos,po.Diagnostics.An_AMD_module_cannot_have_multiple_name_assignments)),t=d[2]);var _=/^\/\/\/\s*<amd-dependency\s/gim.exec(c);if(_){var f=/\spath\s*=\s*('|")(.+?)\1/gim.exec(c),h=/\sname\s*=\s*('|")(.+?)\1/gim.exec(c);if(f){var m={path:f[2],name:h?h[2]:void 0};i.push(m)}}var y=/^\/\/\/?\s*(@ts-check|@ts-nocheck)\s*$/gim.exec(c);y&&(a={enabled:0===po.compareStrings(y[1],"@ts-check",!0),end:l.end,pos:l.pos})}}e.referencedFiles=o,e.typeReferenceDirectives=r,e.amdDependencies=i,e.moduleName=t,e.checkJsDirective=a}(p),p.statements=we(0,xn),po.Debug.assert(1===Y()),p.endOfFileToken=E(ae()),(g=p).externalModuleIndicator=po.forEach(g.statements,function(e){return po.hasModifier(e,1)||237===e.kind&&248===e.moduleReference.kind||238===e.kind||243===e.kind||244===e.kind?e:void 0}),p.nodeCount=d,p.identifierCount=f,p.identifiers=_,p.parseDiagnostics=v,c&&S(p),p);var s,l,c,u,g;return T(),a},e.parseIsolatedEntityName=function(e,t){k(e,t,void 0,1),X();var n=Ue(!0),o=1===Y()&&!v.length;return T(),o?n:void 0},e.parseJsonText=function(e,t){k(t,2,void 0,6);var n=p=C(e,2,6);return X(),1===Y()?p.endOfFileToken=ae():17===Y()||Q(function(){return 9===Y()})?(n.jsonObject=cn(),p.endOfFileToken=ie(1,!1,po.Diagnostics.Unexpected_token)):ne(17),p.parseDiagnostics=v,T(),n},e.fixupParentReferences=S,(n=t||(t={}))[n.SourceElements=0]="SourceElements",n[n.BlockStatements=1]="BlockStatements",n[n.SwitchClauses=2]="SwitchClauses",n[n.SwitchClauseStatements=3]="SwitchClauseStatements",n[n.TypeMembers=4]="TypeMembers",n[n.ClassMembers=5]="ClassMembers",n[n.EnumMembers=6]="EnumMembers",n[n.HeritageClauseElement=7]="HeritageClauseElement",n[n.VariableDeclarations=8]="VariableDeclarations",n[n.ObjectBindingElements=9]="ObjectBindingElements",n[n.ArrayBindingElements=10]="ArrayBindingElements",n[n.ArgumentExpressions=11]="ArgumentExpressions",n[n.ObjectLiteralMembers=12]="ObjectLiteralMembers",n[n.JsxAttributes=13]="JsxAttributes",n[n.JsxChildren=14]="JsxChildren",n[n.ArrayLiteralMembers=15]="ArrayLiteralMembers",n[n.Parameters=16]="Parameters",n[n.RestProperties=17]="RestProperties",n[n.TypeParameters=18]="TypeParameters",n[n.TypeArguments=19]="TypeArguments",n[n.TupleElementTypes=20]="TupleElementTypes",n[n.HeritageClauses=21]="HeritageClauses",n[n.ImportOrExportSpecifiers=22]="ImportOrExportSpecifiers",n[n.Count=23]="Count",(u=o||(o={}))[u.False=0]="False",u[u.True=1]="True",u[u.Unknown=2]="Unknown",function(e){function s(e){var t=ce(267,N.getTokenPos());if(ne(17)||!e)return t.type=L(1048576,Ct),ne(18),S(t),ge(t)}var t,n,o,r;function l(l,e){var c=I;l=l||0;var u,g,p,d=void 0===e?c.length:l+e;e=d-l,po.Debug.assert(0<=l),po.Debug.assert(l<=d),po.Debug.assert(d<=c.length);var _,t,n,f=[];return n=l,47!==(t=c).charCodeAt(n)||42!==t.charCodeAt(n+1)||42!==t.charCodeAt(n+2)||42===t.charCodeAt(n+3)||N.scanRange(l+3,e-5,function(){var e,t=!0,n=1,o=void 0,r=l-Math.max(c.lastIndexOf("\n",l),0)+4;function i(e){o||(o=r),f.push(e),r+=e.length}for(A();5===Y();)A();for(4===Y()&&(r=n=0,A());1!==Y();){switch(Y()){case 57:0===n||1===n?(m(f),v(r),t=!1,o=void(n=0),r++):i(N.getTokenText());break;case 4:f.push(N.getTokenText()),r=n=0;break;case 39:var a=N.getTokenText();1===n||2===n?(n=2,i(a)):(n=1,r+=a.length);break;case 71:i(N.getTokenText()),n=2;break;case 5:var s=N.getTokenText();2===n?f.push(s):void 0!==o&&r+s.length>o&&f.push(s.slice(o-r-1)),r+=s.length;break;case 1:break;default:n=2,i(N.getTokenText())}t?A():t=!0}h(f),m(f),(e=ce(275,l)).tags=u&&ue(u,g,p),e.comment=f.length?f.join(""):void 0,_=ge(e,d)}),_;function h(e){for(;e.length&&("\n"===e[0]||"\r"===e[0]);)e.shift()}function m(e){for(;e.length&&("\n"===e[e.length-1]||"\r"===e[e.length-1]);)e.pop()}function y(){for(;5===Y()||4===Y();)A()}function v(e){po.Debug.assert(57===Y());var t=ce(57,N.getTokenPos());t.end=N.getTextPos(),A();var n=D();if(y(),n){var o,r,i,a,s,l,c;if(n)switch(n.escapedText){case"augments":case"extends":l=n,(c=ce(277,(s=t).pos)).atToken=s,c.tagName=l,c.class=function(){var e=oe(17),t=ce(201);t.expression=function(){for(var e=D(!0);oe(23);){var t=ce(179,e.pos);t.expression=e,t.name=D(),e=ge(t)}return e}(),t.typeArguments=eo();var n=ge(t);return e&&ne(18),n}(),o=ge(c);break;case"class":case"constructor":i=n,(a=ce(278,(r=t).pos)).atToken=r,a.tagName=i,o=ge(a);break;case"arg":case"argument":case"param":o=S(t,n,1);break;case"return":case"returns":o=function(e,t){po.forEach(u,function(e){return 280===e.kind})&&K(t.pos,N.getTokenPos()-t.pos,po.Diagnostics._0_tag_already_specified,t.escapedText);var n=ce(280,e.pos);return n.atToken=e,n.tagName=t,n.typeExpression=k(),ge(n)}(t,n);break;case"template":o=function(e,t){po.forEach(u,function(e){return 282===e.kind})&&K(t.pos,N.getTokenPos()-t.pos,po.Diagnostics._0_tag_already_specified,t.escapedText);var n=[],o=j();for(;;){var r=D();if(y(),!r)return void K(N.getStartPos(),0,po.Diagnostics.Identifier_expected);var i=ce(145,r.pos);if(i.name=r,ge(i),n.push(i),26!==Y())break;A(),y()}var a=ce(282,e.pos);return a.atToken=e,a.tagName=t,a.typeParameters=ue(n,o),ge(a),a}(t,n);break;case"type":o=C(t,n);break;case"typedef":o=function(e,t){var n=k();y();var o=ce(283,e.pos);if(o.atToken=e,o.tagName=t,o.fullName=function e(t){var n=N.getTokenPos(),o=D();if(o&&oe(23)){var r=ce(233,n);return r.flags|=t,r.name=o,r.body=e(4),ge(r)}return o&&4&t&&(o.isInJSDocNamespace=!0),o}(0),o.fullName)for(var r=o.fullName;;){if(71===r.kind||!r.body){o.name=71===r.kind?r:r.name;break}r=r.body}if(y(),!(o.typeExpression=n)||E(n.type)){for(var i=void 0,a=void 0,s=void 0,l=N.getStartPos();i=ee(function(){return x(0)});)if(a||(a=ce(285,l)),281===i.kind){if(s)break;s=i}else a.jsDocPropertyTags||(a.jsDocPropertyTags=[]),a.jsDocPropertyTags.push(i);a&&(n&&164===n.type.kind&&(a.isArrayType=!0),o.typeExpression=s&&s.typeExpression&&!E(s.typeExpression.type)?s.typeExpression:ge(a))}return ge(o)}(t,n);break;default:o=b(t,n)}else o=b(t,n);o&&function(e,t){e.comment=t.join(""),u?u.push(e):(u=[e],g=e.pos);p=e.end}(o,function(t){var n,o=[],e=0;function r(e){n||(n=t),o.push(e),t+=e.length}for(;57!==Y()&&1!==Y();){switch(Y()){case 4:1<=e&&(e=0,o.push(N.getTokenText())),t=0;break;case 57:break;case 5:if(2===e)r(N.getTokenText());else{var i=N.getTokenText();void 0!==n&&t+i.length>n&&o.push(i.slice(n-t-1)),t+=i.length}break;case 39:if(0===e){e=1,t+=N.getTokenText().length;break}default:e=2,r(N.getTokenText())}if(57===Y())break;A()}return h(o),m(o),o}(e+o.end-o.pos))}}function b(e,t){var n=ce(276,e.pos);return n.atToken=e,n.tagName=t,ge(n)}function k(){return y(),17===Y()?s():void 0}function T(){var e=oe(21),t=function(){var e=D(!0);oe(21)&&ne(22);for(;oe(23);){var t=D(!0);oe(21)&&ne(22),e=He(e,t)}return e}();return e&&(y(),re(58)&&It(),ne(22)),{name:t,isBracketed:e}}function E(e){switch(e.kind){case 134:return!0;case 164:return E(e.elementType);default:return po.isTypeReferenceNode(e)&&po.isIdentifier(e.typeName)&&"Object"===e.typeName.escapedText}}function S(e,t,n){var o=k(),r=!o;y();var i=T(),a=i.name,s=i.isBracketed;y(),r&&(o=k());var l=ce(1===n?279:284,e.pos),c=function(e,t){if(e&&E(e.type)){for(var n=ce(267,N.getTokenPos()),o=void 0,r=void 0,i=N.getStartPos(),a=void 0;o=ee(function(){return x(1,t)});)a||(a=[]),a.push(o);if(a)return(r=ce(285,i)).jsDocPropertyTags=a,164===e.type.kind&&(r.isArrayType=!0),n.type=ge(r),ge(n)}}(o,a);return c&&(o=c,r=!0),l.atToken=e,l.tagName=t,l.typeExpression=o,l.name=a,l.isNameFirst=r,l.isBracketed=s,ge(l)}function C(e,t){po.forEach(u,function(e){return 281===e.kind})&&K(t.pos,N.getTokenPos()-t.pos,po.Diagnostics._0_tag_already_specified,t.escapedText);var n=ce(281,e.pos);return n.atToken=e,n.tagName=t,n.typeExpression=s(!0),ge(n)}function i(e,t){for(;!po.isIdentifier(e)||!po.isIdentifier(t);){if(po.isIdentifier(e)||po.isIdentifier(t)||e.right.escapedText!==t.right.escapedText)return!1;e=e.left,t=t.left}return e.escapedText===t.escapedText}function x(e,t){for(var n=!0,o=!1;;)switch(A(),Y()){case 57:if(n){var r=a(e);return!(r&&279===r.kind&&(po.isIdentifier(r.name)||!i(t,r.name.left)))&&r}o=!1;break;case 4:o=!(n=!0);break;case 39:o&&(n=!1),o=!0;break;case 71:n=!1;break;case 1:return!1}}function a(e){po.Debug.assert(57===Y());var t=ce(57,N.getStartPos());t.end=N.getTextPos(),A();var n=D();if(y(),!n)return!1;switch(n.escapedText){case"type":return 0===e&&C(t,n);case"prop":case"property":return 0===e&&S(t,n,e);case"arg":case"argument":case"param":return 1===e&&S(t,n,e)}return!1}function A(){return B=N.scanJSDocToken()}function D(e){if(void 0===e&&(e=!1),!po.tokenIsIdentifierOrKeyword(Y()))return e?pe(71,!0,po.Diagnostics.Identifier_expected):void W(po.Diagnostics.Identifier_expected);var t=N.getTokenPos(),n=N.getTextPos(),o=ce(71,t);return o.escapedText=po.escapeLeadingUnderscores(c.substring(t,n)),ge(o,n),A(),o}}e.parseJSDocTypeExpressionForTests=function(e,t,n){k(e,5,void 0,1),p=C("file.js",5,1),N.setText(e,t,n),B=N.scan();var o=s(),r=v;return T(),o?{jsDocTypeExpression:o,diagnostics:r}:void 0},e.parseJSDocTypeExpression=s,e.parseIsolatedJSDocComment=function(e,t,n){k(e,5,void 0,1),p={languageVariant:0,text:e};var o=l(t,n),r=v;return T(),o?{jsDoc:o,diagnostics:r}:void 0},e.parseJSDocComment=function(e,t,n){var o,r=B,i=v.length,a=y,s=l(t,n);return s&&(s.parent=e),po.isInJavaScriptFile(e)&&(p.jsDocDiagnostics||(p.jsDocDiagnostics=[]),(o=p.jsDocDiagnostics).push.apply(o,v)),B=r,v.length=i,y=a,s},(n=t||(t={}))[n.BeginningOfLine=0]="BeginningOfLine",n[n.SawAsterisk=1]="SawAsterisk",n[n.SavingComments=2]="SavingComments",(r=o||(o={}))[r.Property=0]="Property",r[r.Parameter=1]="Parameter",e.parseJSDocCommentWorker=l}(g=e.JSDocParser||(e.JSDocParser={}))}(p||(p={})),function(e){function d(e,t,r,i,a,s){return void(t?c(e):l(e));function l(e){var t="";if(s&&u(e)&&(t=i.substring(e.pos,e.end)),e._children&&(e._children=void 0),e.pos+=r,e.end+=r,s&&u(e)&&po.Debug.assert(t===a.substring(e.pos,e.end)),_o(e,l,c),po.hasJSDocNodes(e))for(var n=0,o=e.jsDoc;n<o.length;n++){_o(o[n],l,c)}f(e,s)}function c(e){e._children=void 0,e.pos+=r,e.end+=r;for(var t=0,n=e;t<n.length;t++){l(n[t])}}}function u(e){switch(e.kind){case 9:case 8:case 71:return!0}return!1}function _(e,t,n,o,r){po.Debug.assert(e.end>=t,"Adjusting an element that was entirely before the change range"),po.Debug.assert(e.pos<=n,"Adjusting an element that was entirely after the change range"),po.Debug.assert(e.pos<=e.end),e.pos=Math.min(e.pos,o),e.end>=n?e.end+=r:e.end=Math.min(e.end,o),po.Debug.assert(e.pos<=e.end),e.parent&&(po.Debug.assert(e.pos>=e.parent.pos),po.Debug.assert(e.end<=e.parent.end))}function f(e,t){if(t){var n=e.pos;_o(e,function(e){po.Debug.assert(e.pos>=n),n=e.end}),po.Debug.assert(n<=e.end)}}function c(e,n){var o,r=e;if(_o(e,function e(t){if(po.nodeIsMissing(t))return;{if(!(t.pos<=n))return po.Debug.assert(t.pos>n),!0;if(t.pos>=r.pos&&(r=t),n<t.end)return _o(t,e),!0;po.Debug.assert(t.end<=n),o=t}}),o){var t=function(e){for(;;){var t=i(e);if(!t)return e;e=t}}(o);t.pos>r.pos&&(r=t)}return r;function i(e){var t=void 0;return _o(e,function(e){po.nodeIsPresent(e)&&(t=e)}),t}}function g(e,t,n,o){var r=e.text;if(n&&(po.Debug.assert(r.length-n.span.length+n.newLength===t.length),o||po.Debug.shouldAssert(3))){var i=r.substr(0,n.span.start),a=t.substr(0,n.span.start);po.Debug.assert(i===a);var s=r.substring(po.textSpanEnd(n.span),r.length),l=t.substring(po.textSpanEnd(po.textChangeRangeNewSpan(n)),t.length);po.Debug.assert(s===l)}}var t,n;(s||(s={})).updateSourceFile=function(e,t,n,o){if(g(e,t,n,o=o||po.Debug.shouldAssert(2)),po.textChangeRangeIsUnchanged(n))return e;if(0===e.statements.length)return p.parseSourceFile(e.fileName,t,e.languageVersion,void 0,!0,e.scriptKind);var r=e;po.Debug.assert(!r.hasBeenIncrementallyParsed),r.hasBeenIncrementallyParsed=!0;var i=e.text,a=function(t){var a=t.statements,s=0;po.Debug.assert(s<a.length);var l=a[s],n=-1;return{currentNode:function(e){return e!==n&&(l&&l.end===e&&s<a.length-1&&(l=a[++s]),l&&l.pos===e||function(o){return s=-1,l=a=void 0,_o(t,r,i);function r(e){return o>=e.pos&&o<e.end&&(_o(e,r,i),!0)}function i(e){if(o>=e.pos&&o<e.end)for(var t=0;t<e.length;t++){var n=e[t];if(n){if(n.pos===o)return a=e,s=t,l=n,!0;if(n.pos<o&&o<n.end)return _o(n,r,i),!0}}return!1}}(e)),n=e,po.Debug.assert(!l||l.pos===e),l}}}(e),s=function(e,t){for(var n=t.span.start,o=0;0<n&&o<=1;o++){var r=c(e,n);po.Debug.assert(r.pos<=n);var i=r.pos;n=Math.max(0,i-1)}var a=po.createTextSpanFromBounds(n,po.textSpanEnd(t.span)),s=t.newLength+(t.span.start-n);return po.createTextChangeRange(a,s)}(e,n);g(e,t,s,o),po.Debug.assert(s.span.start<=n.span.start),po.Debug.assert(po.textSpanEnd(s.span)===po.textSpanEnd(n.span)),po.Debug.assert(po.textSpanEnd(po.textChangeRangeNewSpan(s))===po.textSpanEnd(po.textChangeRangeNewSpan(n)));var l=po.textChangeRangeNewSpan(s).length-s.span.length;return function(e,i,a,s,l,c,u,g){return p(e);function p(e){if(po.Debug.assert(e.pos<=e.end),e.pos>a)d(e,!1,l,c,u,g);else{var t=e.end;if(i<=t)return e.intersectsChange=!0,e._children=void 0,_(e,i,a,s,l),_o(e,p,n),void f(e,g);po.Debug.assert(t<i)}}function n(e){if(po.Debug.assert(e.pos<=e.end),e.pos>a)d(e,!0,l,c,u,g);else{var t=e.end;if(i<=t){e.intersectsChange=!0,e._children=void 0,_(e,i,a,s,l);for(var n=0,o=e;n<o.length;n++){var r=o[n];p(r)}}else po.Debug.assert(t<i)}}}(r,s.span.start,po.textSpanEnd(s.span),po.textSpanEnd(po.textChangeRangeNewSpan(s)),l,i,t,o),p.parseSourceFile(e.fileName,t,e.languageVersion,a,!0,e.scriptKind)},(n=t||(t={}))[n.Value=-1]="Value"}()}(ts||(ts={})),function(we){var e,t,n;function Oe(e){if(230===e.kind||231===e.kind)return 0;if(we.isConstEnumDeclaration(e))return 2;if(238!==e.kind&&237!==e.kind||we.hasModifier(e,1)){if(234===e.kind){var t=0;return we.forEachChild(e,function(e){switch(Oe(e)){case 0:return!1;case 2:return!(t=2);case 1:return t=1,!0}}),t}if(233===e.kind){var n=e.body;return n?Oe(n):1}return 71===e.kind&&e.isInJSDocNamespace?0:1}return 0}(e=we.ModuleInstanceState||(we.ModuleInstanceState={}))[e.NonInstantiated=0]="NonInstantiated",e[e.Instantiated=1]="Instantiated",e[e.ConstEnumOnly=2]="ConstEnumOnly",we.getModuleInstanceState=Oe,(n=t||(t={}))[n.None=0]="None",n[n.IsContainer=1]="IsContainer",n[n.IsBlockScopedContainer=2]="IsBlockScopedContainer",n[n.IsControlFlowContainer=4]="IsControlFlowContainer",n[n.IsFunctionLike=8]="IsFunctionLike",n[n.IsFunctionExpression=16]="IsFunctionExpression",n[n.HasLocals=32]="HasLocals",n[n.IsInterface=64]="IsInterface",n[n.IsObjectLiteralOrClassExpressionMethod=128]="IsObjectLiteralOrClassExpressionMethod";var o=function(){var R,L,r,S,C,g,i,x,P,M,F,U,H,G,V,W,K,A,D,a,B,s,l=0,z={flags:1},j={flags:1},Y=0;function X(e,t,n,o,r){return we.createDiagnosticForNodeInSourceFile(we.getSourceFileOfNode(e)||R,e,t,n,o,r)}return function(e,t){R=e,L=t,r=we.getEmitScriptTarget(L),n=R,o=t,D=!((void 0===o.alwaysStrict?!o.strict:!o.alwaysStrict)||n.isDeclarationFile)||!!n.externalModuleIndicator,B=we.createUnderscoreEscapedMap(),l=0,s=R.isDeclarationFile,a=we.objectAllocator.getSymbolConstructor(),R.locals||(Te(R),R.symbolCount=l,R.classifiableNames=B);var n,o;R=void 0,L=void 0,r=void 0,S=void 0,C=void 0,g=void 0,i=void 0,x=!1,P=void 0,M=void 0,F=void 0,U=void 0,H=void 0,G=void 0,W=void 0,K=!1,Y=A=0};function I(e,t){return l++,new a(e,t)}function N(e,t,n){if(e.flags|=n,(t.symbol=e).declarations?e.declarations.push(t):e.declarations=[t],1952&n&&!e.exports&&(e.exports=we.createSymbolTable()),6240&n&&!e.members&&(e.members=we.createSymbolTable()),107455&n){var o=e.valueDeclaration;(!o||o.kind!==t.kind&&233===o.kind)&&(e.valueDeclaration=t)}}function w(e){if(243===e.kind)return e.isExportEquals?"export=":"default";var t=we.getNameOfDeclaration(e);if(t){if(we.isAmbientModule(e)){var n=we.getTextOfIdentifierOrLiteral(t);return we.isGlobalScopeAugmentation(e)?"__global":'"'+n+'"'}if(144===t.kind){var o=t.expression;return we.isStringOrNumericLiteral(o)?we.escapeLeadingUnderscores(o.text):(we.Debug.assert(we.isWellKnownSymbolSyntactically(o)),we.getPropertyNameForKnownSymbolName(we.idText(o.name)))}return we.getEscapedTextOfIdentifierOrLiteral(t)}switch(e.kind){case 152:return"__constructor";case 160:case 155:return"__call";case 161:case 156:return"__new";case 157:return"__index";case 244:return"__export";case 194:if(2===we.getSpecialPropertyAssignmentKind(e))return"export=";we.Debug.fail("Unknown binary declaration kind");break;case 228:case 229:return we.hasModifier(e,512)?"default":void 0;case 273:return we.isJSDocConstructSignature(e)?"__new":"__call";case 146:we.Debug.assert(273===e.parent.kind);var r=e.parent,i=we.indexOf(r.parameters,e);return"arg"+i;case 283:var a=we.getNameOfJSDocTypedef(e);return void 0!==a?a.escapedText:void 0}}function u(e){return e.name?we.declarationNameToString(e.name):we.unescapeLeadingUnderscores(w(e))}function O(e,t,n,o,r,i){we.Debug.assert(!we.hasDynamicName(n));var a,s=we.hasModifier(n,512),l=s&&t?"default":w(n);if(void 0===l)a=I(0,"__missing");else if(a=e.get(l),788448&o&&B.set(l,!0),a){if(i&&!a.isReplaceableByMethod)return a;if(a.flags&r)if(a.isReplaceableByMethod)e.set(l,a=I(0,l));else{n.name&&(n.name.parent=n);var c=2&a.flags?we.Diagnostics.Cannot_redeclare_block_scoped_variable_0:we.Diagnostics.Duplicate_identifier_0;a.declarations&&a.declarations.length&&(s?c=we.Diagnostics.A_module_cannot_have_multiple_default_exports:a.declarations&&a.declarations.length&&(s||243===n.kind&&!n.isExportEquals)&&(c=we.Diagnostics.A_module_cannot_have_multiple_default_exports)),we.forEach(a.declarations,function(e){R.bindDiagnostics.push(X(we.getNameOfDeclaration(e)||e,c,u(e)))}),R.bindDiagnostics.push(X(we.getNameOfDeclaration(n)||n,c,u(n))),a=I(0,l)}}else e.set(l,a=I(0,l)),i&&(a.isReplaceableByMethod=!0);return N(a,n,o),a.parent=t,a}function c(e,t,n){var o=1&we.getCombinedModifierFlags(e);if(2097152&t)return 246===e.kind||237===e.kind&&o?O(C.symbol.exports,C.symbol,e,t,n):O(C.locals,void 0,e,t,n);283===e.kind&&we.Debug.assert(we.isInJavaScriptFile(e));var r=283===e.kind&&e.name&&71===e.name.kind&&e.name.isInJSDocNamespace;if(!we.isAmbientModule(e)&&(o||32&C.flags)||r){var i=107455&t?1048576:0,a=O(C.locals,void 0,e,i,n);return a.exportSymbol=O(C.symbol.exports,C.symbol,e,t,n),e.localSymbol=a}return O(C.locals,void 0,e,t,n)}function p(e){if(s)n(e);else if(536870912&e.transformFlags)s=!0,n(e),s=!1,Y|=e.transformFlags&~b(e.kind);else{var t=Y;Y=0,n(e),Y=t|v(e,Y)}}function J(e){if(void 0!==e)if(s)we.forEach(e,Te);else{for(var t=Y,n=Y=0,o=0,r=e;o<r.length;o++){var i=r[o];Te(i),n|=-536870913&i.transformFlags}e.transformFlags=536870912|n,Y|=t}}function q(e){we.forEachChild(e,Te,J)}function n(e){if(we.hasJSDocNodes(e))if(we.isInJavaScriptFile(e))for(var t=0,n=e.jsDoc;t<n.length;t++){var o=n[t];Te(o)}else for(var r=0,i=e.jsDoc;r<i.length;r++){var o=i[r];Re(e,o)}var a,s,l,c,u,g,p,d,_,f,h,m,y,v,b,k,T,E,S,C,x,A,D,B,I,N,w,O;if(function(e){if(!(1&P.flags))return!1;if(P===z){var t=we.isStatementButNotDeclaration(e)&&209!==e.kind||229===e.kind||233===e.kind&&(1===(o=Oe(e))||2===o&&L.preserveConstEnums)||232===e.kind&&(!we.isConstEnumDeclaration(e)||L.preserveConstEnums);if(t){P=j;var n=!L.allowUnreachableCode&&!we.isInAmbientContext(e)&&(208!==e.kind||3&we.getCombinedNodeFlags(e.declarationList)||we.forEach(e.declarationList.declarations,function(e){return e.initializer}));n&&ke(e,we.Diagnostics.Unreachable_code_detected)}}var o;return!0}(e))q(e);else switch(e.kind){case 213:I=e,N=ee(),w=Q(),O=Q(),te(N,P),P=N,se(I.expression,w,O),P=ie(w),le(I.statement,O,N),te(N,P),P=ie(O);break;case 212:C=e,x=ee(),A=222===C.parent.kind?we.lastOrUndefined(W):void 0,D=A?A.continueTarget:Q(),B=A?A.breakTarget:Q(),te(x,P),P=x,le(C.statement,B,D),te(D,P),P=ie(D),se(C.expression,x,B),P=ie(B);break;case 214:k=e,T=ee(),E=Q(),S=Q(),Te(k.initializer),te(T,P),P=T,se(k.condition,E,S),P=ie(E),le(k.statement,S,T),Te(k.incrementor),te(T,P),P=ie(S);break;case 215:case 216:!function(e){var t=ee(),n=Q();te(t,P),P=t,216===e.kind&&Te(e.awaitModifier);Te(e.expression),te(n,P),Te(e.initializer),227!==e.initializer.kind&&ue(e.initializer);le(e.statement,n,t),te(t,P),P=ie(n)}(e);break;case 211:m=e,y=Q(),v=Q(),b=Q(),se(m.expression,y,v),P=ie(y),Te(m.thenStatement),te(b,P),P=ie(v),Te(m.elseStatement),te(b,P),P=ie(b);break;case 219:case 223:!function(e){Te(e.expression),219===e.kind&&(K=!0,U&&te(U,P));P=z}(e);break;case 218:case 217:!function(e){if(Te(e.label),e.label){var t=function(e){if(W)for(var t=0,n=W;t<n.length;t++){var o=n[t];if(o.name===e)return o}return}(e.label.escapedText);t&&(t.referenced=!0,ce(e,t.breakTarget,t.continueTarget))}else ce(e,M,F)}(e);break;case 224:!function(e){var t=Q(),n=P;Te(e.tryBlock),te(t,P);var o=P,r=z;e.catchClause&&(P=n,Te(e.catchClause),te(t,P),r=P);if(e.finallyBlock){var i={flags:2048,antecedent:n,lock:{}};if(te(t,i),P=ie(t),Te(e.finallyBlock),1&P.flags||1&o.flags&&1&r.flags&&(P=o===j||r===j?j:z),!(1&P.flags)){var a={flags:4096,antecedent:P};i.lock=a,P=a}}else P=ie(t)}(e);break;case 221:!function(e){var t=Q();Te(e.expression);var n=M,o=V;M=t,V=P,Te(e.caseBlock),te(t,P);var r=we.forEach(e.caseBlock.clauses,function(e){return 258===e.kind});e.possiblyExhaustive=!r&&!t.antecedents,r||te(t,ne(V,e,0,0));M=n,V=o,P=ie(t)}(e);break;case 235:!function(e){var t=Y;Y=0;for(var n=e.clauses,o=z,r=0;r<n.length;r++){for(var i=r;!n[r].statements.length&&r+1<n.length;)Te(n[r]),r++;var a=Q();te(a,ne(V,e.parent,i,r+1)),te(a,o),P=ie(a);var s=n[r];Te(s),1&(o=P).flags||r===n.length-1||!L.noFallthroughCasesInSwitch||ke(s,we.Diagnostics.Fallthrough_case_in_switch)}n.transformFlags=536870912|Y,Y|=t}(e);break;case 257:h=P,P=V,Te((f=e).expression),P=h,J(f.statements);break;case 222:!function(e){var t=ee(),n=Q();Te(e.label),te(t,P);var o=(r=e.label.escapedText,i=n,a=t,s={name:r,breakTarget:i,continueTarget:a,referenced:!1},(W||(W=[])).push(s),s);var r,i,a,s;Te(e.statement),W.pop(),o.referenced||L.allowUnusedLabels||R.bindDiagnostics.push(X(e.label,we.Diagnostics.Unused_label));e.statement&&212===e.statement.kind||(te(n,P),P=ie(n))}(e);break;case 192:!function(e){if(51===e.operator){var t=H;H=G,G=t,q(e),G=H,H=t}else q(e),43!==e.operator&&44!==e.operator||ue(e.operand)}(e);break;case 193:q(_=e),(43===_.operator||44===_.operator)&&ue(_.operand);break;case 194:!function(e){var t=e.operatorToken.kind;if(53===t||54===t)if(function(e){for(;185===e.parent.kind||192===e.parent.kind&&51===e.parent.operator;)e=e.parent;return!function(e){var t=e.parent;switch(t.kind){case 211:case 213:case 212:return t.expression===e;case 214:case 195:return t.condition===e}return!1}(e)&&!ae(e.parent)}(e)){var n=Q();ge(e,n,n),P=ie(n)}else ge(e,H,G);else if(q(e),we.isAssignmentOperator(t)&&!we.isAssignmentTarget(e)&&(ue(e.left),58===t&&180===e.left.kind)){var o=e.left;$(o.expression)&&(P=re(P,e))}}(e);break;case 188:q(d=e),179===d.expression.kind&&ue(d.expression);break;case 195:c=e,u=Q(),g=Q(),p=Q(),se(c.condition,u,g),P=ie(u),Te(c.questionToken),Te(c.whenTrue),te(p,P),P=ie(g),Te(c.colonToken),Te(c.whenFalse),te(p,P),P=ie(p);break;case 226:q(l=e),(l.initializer||we.isForInOrOfStatement(l.parent.parent))&&function e(t){var n=we.isOmittedExpression(t)?void 0:t.name;if(we.isBindingPattern(n))for(var o=0,r=n.elements;o<r.length;o++){var i=r[o];e(i)}else P=oe(P,t)}(l);break;case 181:!function(e){var t=e.expression;for(;185===t.kind;)t=t.expression;186===t.kind||187===t.kind?(J(e.typeArguments),J(e.arguments),Te(e.expression)):q(e);if(179===e.expression.kind){var n=e.expression;$(n.expression)&&we.isPushOrUnshiftIdentifier(n.name)&&(P=re(P,e))}}(e);break;case 275:s=e,we.forEachChild(s,function(e){283!==e.kind&&Te(e)});break;case 283:a=e,we.forEachChild(a,function(e){a.fullName&&e===a.name&&71!==a.fullName.kind||Te(e)});break;default:q(e)}}function d(e){switch(e.kind){case 71:case 99:case 179:return Z(e);case 181:return function(e){if(e.arguments)for(var t=0,n=e.arguments;t<n.length;t++){var o=n[t];if(Z(o))return!0}if(179===e.expression.kind&&Z(e.expression.expression))return!0;return!1}(e);case 185:return d(e.expression);case 194:return function(e){switch(e.operatorToken.kind){case 58:return Z(e.left);case 32:case 33:case 34:case 35:return $(e.left)||$(e.right)||t(e.right,e.left)||t(e.left,e.right);case 93:return $(e.left);case 26:return d(e.right)}return!1}(e);case 192:return 51===e.operator&&d(e.operand)}return!1}function Z(e){return 71===e.kind||99===e.kind||97===e.kind||179===e.kind&&Z(e.expression)}function t(e,t){return 189===e.kind&&$(e.expression)&&9===t.kind}function $(e){switch(e.kind){case 185:return $(e.expression);case 194:switch(e.operatorToken.kind){case 58:return $(e.left);case 26:return $(e.right)}}return Z(e)}function Q(){return{flags:4,antecedents:void 0}}function ee(){return{flags:8,antecedents:void 0}}function _(e){e.flags|=512&e.flags?1024:512}function te(e,t){1&t.flags||we.contains(e.antecedents,t)||((e.antecedents||(e.antecedents=[])).push(t),_(t))}function f(e,t,n){return 1&t.flags?t:n?101===n.kind&&64&e||86===n.kind&&32&e?z:d(n)?(_(t),{flags:e,expression:n,antecedent:t}):t:32&e?t:z}function ne(e,t,n,o){return d(t.expression)?(_(e),{flags:128,switchStatement:t,clauseStart:n,clauseEnd:o,antecedent:e}):e}function oe(e,t){return _(e),{flags:16,antecedent:e,node:t}}function re(e,t){_(e);var n={flags:256,antecedent:e,node:t};return n}function ie(e){var t=e.antecedents;return t?1===t.length?t[0]:e:z}function ae(e){for(;;)if(185===e.kind)e=e.expression;else{if(192!==e.kind||51!==e.operator)return 194===e.kind&&(53===e.operatorToken.kind||54===e.operatorToken.kind);e=e.operand}}function se(e,t,n){var o=H,r=G;H=t,G=n,Te(e),H=o,G=r,e&&ae(e)||(te(t,f(32,P,e)),te(n,f(64,P,e)))}function le(e,t,n){var o=M,r=F;M=t,F=n,Te(e),M=o,F=r}function ce(e,t,n){var o=218===e.kind?t:n;o&&(te(o,P),P=z)}function h(e){194===e.kind&&58===e.operatorToken.kind?ue(e.left):ue(e)}function ue(e){if(Z(e))P=oe(P,e);else if(177===e.kind)for(var t=0,n=e.elements;t<n.length;t++){var o=n[t];198===o.kind?ue(o.expression):h(o)}else if(178===e.kind)for(var r=0,i=e.properties;r<i.length;r++){var a=i[r];261===a.kind?h(a.initializer):262===a.kind?ue(a.name):263===a.kind&&ue(a.expression)}}function ge(e,t,n){var o=Q();53===e.operatorToken.kind?se(e.left,o,n):se(e.left,t,o),P=ie(o),Te(e.operatorToken),se(e.right,t,n)}function m(e){i&&(i.nextContainer=e),i=e}function pe(e,t,n){switch(C.kind){case 233:return c(e,t,n);case 265:return a=e,s=t,l=n,we.isExternalModule(R)?c(a,s,l):O(R.locals,void 0,a,s,l);case 199:case 229:return o=e,r=t,i=n,we.hasModifier(o,32)?O(C.symbol.exports,C.symbol,o,r,i):O(C.symbol.members,C.symbol,o,r,i);case 232:return O(C.symbol.exports,C.symbol,e,t,n);case 163:case 285:case 178:case 230:case 254:return O(C.symbol.members,C.symbol,e,t,n);case 160:case 161:case 155:case 156:case 157:case 151:case 150:case 152:case 153:case 154:case 228:case 186:case 187:case 273:case 231:case 172:return O(C.locals,void 0,e,t,n)}var o,r,i,a,s,l}function de(e){we.isInAmbientContext(e)&&!function(e){var t=265===e.kind?e:e.body;if(t&&(265===t.kind||234===t.kind))for(var n=0,o=t.statements;n<o.length;n++){var r=o[n];if(244===r.kind||243===r.kind)return!0}return!1}(e)?e.flags|=32:e.flags&=-33}function _e(e){var t=Oe(e),n=0!==t;return pe(e,n?512:1024,n?106639:0),t}function fe(e,t,n){var o=I(t,n);8&t&&(o.parent=C.symbol),N(o,e,t)}function he(e,t,n){switch(g.kind){case 233:c(e,t,n);break;case 265:if(we.isExternalModule(C)){c(e,t,n);break}default:g.locals||(g.locals=we.createSymbolTable(),m(g)),O(g.locals,void 0,e,t,n)}}function me(e){D&&108<=e.originalKeywordKind&&e.originalKeywordKind<=116&&!we.isIdentifierName(e)&&!we.isInAmbientContext(e)&&(R.parseDiagnostics.length||R.bindDiagnostics.push(X(e,function(e){if(we.getContainingClass(e))return we.Diagnostics.Identifier_expected_0_is_a_reserved_word_in_strict_mode_Class_definitions_are_automatically_in_strict_mode;if(R.externalModuleIndicator)return we.Diagnostics.Identifier_expected_0_is_a_reserved_word_in_strict_mode_Modules_are_automatically_in_strict_mode;return we.Diagnostics.Identifier_expected_0_is_a_reserved_word_in_strict_mode}(e),we.declarationNameToString(e))))}function ye(e,t){if(t&&71===t.kind){var n=t;if(r=n,we.isIdentifier(r)&&("eval"===r.escapedText||"arguments"===r.escapedText)){var o=we.getErrorSpanForNode(R,t);R.bindDiagnostics.push(we.createFileDiagnostic(R,o.start,o.length,function(e){if(we.getContainingClass(e))return we.Diagnostics.Invalid_use_of_0_Class_definitions_are_automatically_in_strict_mode;if(R.externalModuleIndicator)return we.Diagnostics.Invalid_use_of_0_Modules_are_automatically_in_strict_mode;return we.Diagnostics.Invalid_use_of_0_in_strict_mode}(e),we.idText(n)))}}var r}function ve(e){D&&ye(e,e.name)}function be(e){if(r<2&&265!==g.kind&&233!==g.kind&&!we.isFunctionLike(g)){var t=we.getErrorSpanForNode(R,e);R.bindDiagnostics.push(we.createFileDiagnostic(R,t.start,t.length,function(e){if(we.getContainingClass(e))return we.Diagnostics.Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Class_definitions_are_automatically_in_strict_mode;if(R.externalModuleIndicator)return we.Diagnostics.Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5_Modules_are_automatically_in_strict_mode;return we.Diagnostics.Function_declarations_are_not_allowed_inside_blocks_in_strict_mode_when_targeting_ES3_or_ES5}(e)))}}function ke(e,t,n,o,r){var i=we.getSpanOfTokenAtPosition(R,e.pos);R.bindDiagnostics.push(we.createFileDiagnostic(R,i.start,i.length,t,n,o,r))}function Te(e){if(e){e.parent=S;var t=D;if(we.isInJavaScriptFile(e)&&function(e){if(!we.hasJSDocNodes(e))return;for(var t=0,n=e.jsDoc;t<n.length;t++){var o=n[t];if(o.tags)for(var r=0,i=o.tags;r<i.length;r++){var a=i[r];if(283===a.kind){var s=S;S=o,Te(a),S=s}}}}(e),function(e){switch(e.kind){case 71:if(e.isInJSDocNamespace){for(var t=e.parent;t&&283!==t.kind;)t=t.parent;he(t,524288,793064);break}case 99:return P&&(we.isExpression(e)||262===S.kind)&&(e.flowNode=P),me(e);case 179:P&&Z(e)&&(e.flowNode=P);break;case 194:var n=we.getSpecialPropertyAssignmentKind(e);switch(n){case 1:xe(e);break;case 2:!function(e){var t=we.getRightMostAssignedExpression(e.right);if(we.isEmptyObjectLiteral(t)||Ae(t))return Ce(e);Ce(e),O(R.symbol.exports,R.symbol,e,1049092,0)}(e);break;case 3:k=(b=e).left,T=k.expression,E=T.expression,k.parent=b,(E.parent=T).parent=k,Be(E.escapedText,k,!0);break;case 4:!function(e){we.Debug.assert(we.isInJavaScriptFile(e));var t=we.getThisContainer(e,!1);switch(t.kind){case 228:case 186:t.symbol.members=t.symbol.members||we.createSymbolTable(),O(t.symbol.members,t.symbol,e,4,0);break;case 152:case 149:case 151:case 153:case 154:var n=t.parent,o=we.hasModifier(t,32)?n.symbol.exports:n.symbol.members;O(o,n.symbol,e,4,0,!0)}}(e);break;case 5:y=(m=e).left,v=y.expression,we.isIdentifier(v)&&(y.parent=m,v.parent=y,De(v)?xe(m):Be(v.escapedText,y,!1));break;case 0:break;default:we.Debug.fail("Unknown special property assignment kind")}return h=e,D&&we.isLeftHandSideExpression(h.left)&&we.isAssignmentOperator(h.operatorToken.kind)&&ye(h,h.left);case 260:return f=e,D&&f.variableDeclaration&&ye(f,f.variableDeclaration.name);case 188:return function(e){if(D&&71===e.expression.kind){var t=we.getErrorSpanForNode(R,e.expression);R.bindDiagnostics.push(we.createFileDiagnostic(R,t.start,t.length,we.Diagnostics.delete_cannot_be_called_on_an_identifier_in_strict_mode))}}(e);case 8:return _=e,D&&4&_.numericLiteralFlags&&R.bindDiagnostics.push(X(_,we.Diagnostics.Octal_literals_are_not_allowed_in_strict_mode));case 193:return d=e,D&&ye(d,d.operand);case 192:return p=e,D&&(43!==p.operator&&44!==p.operator||ye(p,p.operand));case 220:return g=e,D&&ke(g,we.Diagnostics.with_statements_are_not_allowed_in_strict_mode);case 169:return x=!0;case 158:return function(e){var t=e.parameterName,n=e.type;t&&71===t.kind&&me(t);t&&169===t.kind&&(x=!0);Te(n)}(e);case 145:return pe(e,262144,530920);case 146:return function(e){D&&!we.isInAmbientContext(e)&&ye(e,e.name);we.isBindingPattern(e.name)?fe(e,1,"__"+we.indexOf(e.parent.parameters,e)):pe(e,1,107455);if(we.isParameterPropertyDeclaration(e)){var t=e.parent.parent;O(t.symbol.members,t.symbol,e,4|(e.questionToken?16777216:0),0)}}(e);case 226:return Ie(e);case 176:return e.flowNode=P,Ie(e);case 149:case 148:return Ne(u=e,4|(u.questionToken?16777216:0),0);case 261:case 262:return Ne(e,4,0);case 264:return Ne(e,8,900095);case 155:case 156:case 157:return pe(e,131072,0);case 151:case 150:return Ne(e,8192|(e.questionToken?16777216:0),we.isObjectLiteralMethod(e)?0:99263);case 228:return function(e){R.isDeclarationFile||we.isInAmbientContext(e)||we.isAsyncFunction(e)&&(A|=1024);ve(e),D?(be(e),he(e,16,106927)):pe(e,16,106927)}(e);case 152:return pe(e,16384,0);case 153:return Ne(e,32768,41919);case 154:return Ne(e,65536,74687);case 160:case 273:case 161:return function(e){var t=I(131072,w(e));N(t,e,131072);var n=I(2048,"__type");N(n,e,2048),n.members=we.createSymbolTable(),n.members.set(t.escapedName,t)}(e);case 163:case 285:case 172:return fe(e,2048,"__type");case 178:return function(e){var t;if(u=t||(t={}),u[u.Property=1]="Property",u[u.Accessor=2]="Accessor",D)for(var n=we.createUnderscoreEscapedMap(),o=0,r=e.properties;o<r.length;o++){var i=r[o];if(263!==i.kind&&71===i.name.kind){var a=i.name,s=261===i.kind||262===i.kind||151===i.kind?1:2,l=n.get(a.escapedText);if(l){if(1===s&&1===l){var c=we.getErrorSpanForNode(R,a);R.bindDiagnostics.push(we.createFileDiagnostic(R,c.start,c.length,we.Diagnostics.An_object_literal_cannot_have_multiple_properties_with_the_same_name_in_strict_mode))}}else n.set(a.escapedText,s)}}var u;fe(e,4096,"__object")}(e);case 186:case 187:return function(e){R.isDeclarationFile||we.isInAmbientContext(e)||we.isAsyncFunction(e)&&(A|=1024);P&&(e.flowNode=P);ve(e);var t=e.name?e.name.escapedText:"__function";fe(e,16,t)}(e);case 181:we.isInJavaScriptFile(e)&&(c=e,!R.commonJsModuleIndicator&&we.isRequireCall(c,!1)&&Ce(c));break;case 199:case 229:return D=!0,function(e){if(229===e.kind)he(e,32,899519);else{var t=e.name?e.name.escapedText:"__class";fe(e,32,t),e.name&&B.set(e.name.escapedText,!0)}var n=e.symbol,o=I(4194308,"prototype"),r=n.exports.get(o.escapedName);r&&(e.name&&(e.name.parent=e),R.bindDiagnostics.push(X(r.declarations[0],we.Diagnostics.Duplicate_identifier_0,we.symbolName(o))));n.exports.set(o.escapedName,o),o.parent=n}(e);case 230:return he(e,64,792968);case 231:return he(e,524288,793064);case 232:return l=e,we.isConst(l)?he(l,128,899967):he(l,256,899327);case 233:return function(e){if(de(e),we.isAmbientModule(e))if(we.hasModifier(e,1)&&ke(e,we.Diagnostics.export_modifier_cannot_be_applied_to_ambient_modules_and_module_augmentations_since_they_are_always_visible),we.isExternalModuleAugmentation(e))_e(e);else{var t=void 0;if(9===e.name.kind){var n=e.name.text;we.hasZeroOrOneAsteriskCharacter(n)?t=we.tryParsePattern(n):ke(e.name,we.Diagnostics.Pattern_0_can_have_at_most_one_Asterisk_character,n)}var o=pe(e,512,106639);t&&(R.patternAmbientModules||(R.patternAmbientModules=[])).push({pattern:t,symbol:o})}else{var r=_e(e);if(0!==r)if(304&e.symbol.flags)e.symbol.constEnumOnlyModule=!1;else{var i=2===r;void 0===e.symbol.constEnumOnlyModule?e.symbol.constEnumOnlyModule=i:e.symbol.constEnumOnlyModule=e.symbol.constEnumOnlyModule&&i}}}(e);case 254:return fe(e,4096,"__jsxAttributes");case 253:return pe(e,4,0);case 237:case 240:case 242:case 246:return pe(e,2097152,2097152);case 236:return function(e){e.modifiers&&e.modifiers.length&&R.bindDiagnostics.push(X(e,we.Diagnostics.Modifiers_cannot_appear_here));{if(265!==e.parent.kind)return R.bindDiagnostics.push(X(e,we.Diagnostics.Global_module_exports_may_only_appear_at_top_level));var t=e.parent;if(!we.isExternalModule(t))return R.bindDiagnostics.push(X(e,we.Diagnostics.Global_module_exports_may_only_appear_in_module_files));if(!t.isDeclarationFile)return R.bindDiagnostics.push(X(e,we.Diagnostics.Global_module_exports_may_only_appear_in_declaration_files))}R.symbol.globalExports=R.symbol.globalExports||we.createSymbolTable(),O(R.symbol.globalExports,R.symbol,e,2097152,2097152)}(e);case 239:return(s=e).name&&pe(s,2097152,2097152);case 244:return a=e,C.symbol&&C.symbol.exports?a.exportClause||O(C.symbol.exports,C.symbol,a,8388608,0):fe(a,8388608,w(a));case 243:return function(e){if(C.symbol&&C.symbol.exports){var t=243===e.kind&&we.exportAssignmentIsAlias(e)?2097152:4;O(C.symbol.exports,C.symbol,e,t,2097204)}else fe(e,2097152,w(e))}(e);case 265:return Ee(e.statements),de(R),we.isExternalModule(R)&&Se();case 207:if(!we.isFunctionLike(e.parent))return;case 234:return Ee(e.statements);case 279:if(285!==e.parent.kind)break;case 284:var o=e,r=o.isBracketed||o.typeExpression&&272===o.typeExpression.type.kind?16777220:4;return pe(o,r,0);case 283:var i=e.fullName;if(!i||71===i.kind)return he(e,524288,793064)}var a;var s;var l;var c;var u;var g;var p;var d;var _;var f;var h;var m,y,v;var b,k,T,E}(e),142<e.kind){var n=S,o=function(e){switch(e.kind){case 199:case 229:case 232:case 178:case 163:case 285:case 254:return 1;case 230:return 65;case 233:case 231:case 172:return 33;case 265:return 37;case 151:if(we.isObjectLiteralOrClassExpressionMethod(e))return 173;case 152:case 228:case 150:case 153:case 154:case 155:case 273:case 160:case 156:case 157:case 161:return 45;case 186:case 187:return 61;case 234:return 4;case 149:return e.initializer?4:0;case 260:case 214:case 215:case 216:case 235:return 2;case 207:return we.isFunctionLike(e.parent)?0:2}return 0}(S=e);0===o?p(e):function(e,t){var n=C,o=g;1&t?(C=g=e,32&t&&(C.locals=we.createSymbolTable()),m(C)):2&t&&((g=e).locals=void 0);if(4&t){var r=P,i=M,a=F,s=U,l=W,c=K,u=16&t&&!we.hasModifier(e,256)&&!!we.getImmediatelyInvokedFunctionExpression(e);u?U=Q():(P={flags:2},144&t&&(P.container=e),U=void 0),W=F=M=void 0,K=!1,p(e),e.flags&=-1409,!(1&P.flags)&&8&t&&we.nodeIsPresent(e.body)&&(e.flags|=128,K&&(e.flags|=256)),265===e.kind&&(e.flags|=A),u?(te(U,P),P=ie(U)):P=r,M=i,F=a,U=s,W=l,K=c}else 64&t?(x=!1,p(e),e.flags=x?64|e.flags:-65&e.flags):p(e);C=n,g=o}(e,o),S=n}else s||0!=(536870912&e.transformFlags)||(Y|=v(e,0));D=t}}function Ee(e){if(!D)for(var t=0,n=e;t<n.length;t++){var o=n[t];if(!we.isPrologueDirective(o))return;if(r=o,void 0,'"use strict"'===(i=we.getTextOfNodeFromSourceText(R.text,r.expression))||"'use strict'"===i)return void(D=!0)}var r,i}function Se(){fe(R,512,'"'+we.removeFileExtension(R.fileName)+'"')}function Ce(e){R.commonJsModuleIndicator||(R.commonJsModuleIndicator=e,R.externalModuleIndicator||Se())}function xe(e){Ce(e),O(R.symbol.exports,R.symbol,e.left,1048580,0)}function Ae(e){return we.isExportsIdentifier(e)||we.isModuleExportsPropertyAccessExpression(e)||we.isIdentifier(e)&&De(e)}function De(e){var t=y(e.escapedText);return t&&t.valueDeclaration&&we.isVariableDeclaration(t.valueDeclaration)&&t.valueDeclaration.initializer&&function e(t){return Ae(t)||we.isAssignmentExpression(t,!0)&&(e(t.left)||e(t.right))}(t.valueDeclaration.initializer)}function y(e){return C.symbol&&C.symbol.exports&&C.symbol.exports.get(e)||C.locals&&C.locals.get(e)}function Be(e,t,n){var o=y(e);if(o&&we.isDeclarationOfFunctionOrClassExpression(o)&&(o=o.valueDeclaration.initializer.symbol),o&&48&o.flags){var r=n?o.members||(o.members=we.createSymbolTable()):o.exports||(o.exports=we.createSymbolTable());O(r,o,t,4,0)}}function Ie(e){D&&ye(e,e.name),we.isBindingPattern(e.name)||(we.isBlockOrCatchScoped(e)?he(e,2,107455):we.isParameterDeclaration(e)?pe(e,1,107455):pe(e,1,107454))}function Ne(e,t,n){return R.isDeclarationFile||we.isInAmbientContext(e)||!we.isAsyncFunction(e)||(A|=1024),P&&we.isObjectLiteralOrClassExpressionMethod(e)&&(e.flowNode=P),we.hasDynamicName(e)?fe(e,t,"__computed"):pe(e,t,n)}}();function v(e,t){var n=e.kind;switch(n){case 181:return function(e,t){var n=t,o=e.expression,r=o.kind;e.typeArguments&&(n|=3);(524288&t||function(e,t){switch(t){case 97:return!0;case 179:case 180:var n=e.expression,o=n.kind;return 97===o}return!1}(o,r))&&(n|=192);91===o.kind&&(n|=67108864,16384&t&&(n|=32768));return e.transformFlags=536870912|n,-537396546&n}(e,t);case 182:return function(e,t){var n=t;e.typeArguments&&(n|=3);524288&t&&(n|=192);return e.transformFlags=536870912|n,-537396546&n}(e,t);case 233:return function(e,t){var n=3;0==(2&we.getModifierFlags(e))&&(n|=t);return e.transformFlags=536870912|n,-574674242&n}(e,t);case 185:return function(e,t){var n=t,o=e.expression,r=o.kind,i=o.transformFlags;202!==r&&184!==r||(n|=3);1024&i&&(n|=1024);return e.transformFlags=536870912|n,-536872258&n}(e,t);case 194:return function(e,t){var n=t,o=e.operatorToken.kind,r=e.left.kind;58===o&&178===r?n|=3272:58===o&&177===r?n|=3264:40!==o&&62!==o||(n|=32);return e.transformFlags=536870912|n,-536872258&n}(e,t);case 210:return function(e,t){var n=t;1024&e.expression.transformFlags&&(n|=192);return e.transformFlags=536870912|n,-536872258&n}(e,t);case 146:return function(e,t){var n=t,o=e.name,r=e.initializer,i=e.dotDotDotToken;(e.questionToken||e.type||4096&t||we.isThisIdentifier(o))&&(n|=3);we.hasModifier(e,92)&&(n|=262147);1048576&t&&(n|=8);(8388608&t||r||i)&&(n|=131264);return e.transformFlags=536870912|n,-536872258&n}(e,t);case 187:return function(e,t){var n=192|t;(we.hasModifier(e,2270)||e.typeParameters||e.type)&&(n|=3);we.hasModifier(e,256)&&(n|=16);1048576&t&&(n|=8);16384&t&&(n|=32768);return e.transformFlags=536870912|n,-601249090&n}(e,t);case 186:return function(e,t){var n=t;(we.hasModifier(e,2270)||e.typeParameters||e.type)&&(n|=3);we.hasModifier(e,256)&&(n|=e.asteriskToken?8:16);1048576&t&&(n|=8);163840&t&&(n|=192);e.asteriskToken&&(n|=768);return e.transformFlags=536870912|n,-601281858&n}(e,t);case 228:return function(e,t){var n,o=we.getModifierFlags(e);!e.body||2&o?n=3:(n=33554432|t,(2270&o||e.typeParameters||e.type)&&(n|=3),256&o&&(n|=e.asteriskToken?8:16),1048576&t&&(n|=8),163840&t&&(n|=192),e.asteriskToken&&(n|=768));return e.transformFlags=536870912|n,-601281858&n}(e,t);case 226:return function(e,t){var n=t;n|=8388800,1048576&t&&(n|=8);e.type&&(n|=3);return e.transformFlags=536870912|n,-536872258&n}(e,t);case 227:return function(e,t){var n=33554432|t;8388608&t&&(n|=192);3&e.flags&&(n|=4194496);return e.transformFlags=536870912|n,-546309442&n}(e,t);case 208:return function(e,t){var n,o=e.declarationList.transformFlags;we.hasModifier(e,2)?n=3:(n=t,8388608&o&&(n|=192));return e.transformFlags=536870912|n,-536872258&n}(e,t);case 222:return function(e,t){var n=t;4194304&t&&we.isIterationStatement(e,!0)&&(n|=192);return e.transformFlags=536870912|n,-536872258&n}(e,t);case 229:return function(e,t){var n;we.hasModifier(e,2)?n=3:(n=192|t,(274432&t||e.typeParameters)&&(n|=3),65536&t&&(n|=16384));return e.transformFlags=536870912|n,-539358530&n}(e,t);case 199:return function(e,t){var n=192|t;(274432&t||e.typeParameters)&&(n|=3);65536&t&&(n|=16384);return e.transformFlags=536870912|n,-539358530&n}(e,t);case 259:return function(e,t){var n=t;switch(e.token){case 85:n|=192;break;case 108:n|=3;break;default:we.Debug.fail("Unexpected token for heritage clause")}return e.transformFlags=536870912|n,-536872258&n}(e,t);case 260:return function(e,t){var n=t;e.variableDeclaration?we.isBindingPattern(e.variableDeclaration.name)&&(n|=192):n|=8;return e.transformFlags=536870912|n,-537920834&n}(e,t);case 201:return function(e,t){var n=192|t;e.typeArguments&&(n|=3);return e.transformFlags=536870912|n,-536872258&n}(e,t);case 152:return function(e,t){var n=t;!we.hasModifier(e,2270)&&e.body||(n|=3);1048576&t&&(n|=8);return e.transformFlags=536870912|n,-601015618&n}(e,t);case 149:return function(e,t){var n=3|t;e.initializer&&(n|=8192);return e.transformFlags=536870912|n,-536872258&n}(e,t);case 151:return function(e,t){var n=192|t;(e.decorators||we.hasModifier(e,2270)||e.typeParameters||e.type||!e.body)&&(n|=3);1048576&t&&(n|=8);we.hasModifier(e,256)&&(n|=e.asteriskToken?8:16);e.asteriskToken&&(n|=768);return e.transformFlags=536870912|n,-601015618&n}(e,t);case 153:case 154:return function(e,t){var n=t;(e.decorators||we.hasModifier(e,2270)||e.type||!e.body)&&(n|=3);1048576&t&&(n|=8);return e.transformFlags=536870912|n,-601015618&n}(e,t);case 237:return function(e,t){var n=t;we.isExternalModuleImportEqualsDeclaration(e)||(n|=3);return e.transformFlags=536870912|n,-536872258&n}(e,t);case 179:return function(e,t){var n=t;97===e.expression.kind&&(n|=16384);return e.transformFlags=536870912|n,-536872258&n}(e,t);default:return function(e,t,n){var o=n,r=536872257;switch(t){case 120:case 191:o|=24;break;case 114:case 112:case 113:case 117:case 124:case 76:case 232:case 264:case 184:case 202:case 203:case 131:o|=3;break;case 249:case 250:case 251:case 10:case 252:case 253:case 254:case 255:case 256:o|=4;break;case 13:case 14:case 15:case 16:case 196:case 183:case 262:case 115:case 204:o|=192;break;case 9:e.hasExtendedUnicodeEscape&&(o|=192);break;case 8:48&e.numericLiteralFlags&&(o|=192);break;case 216:e.awaitModifier&&(o|=8),o|=192;break;case 197:o|=16777416;break;case 119:case 133:case 130:case 134:case 136:case 122:case 137:case 105:case 145:case 148:case 150:case 155:case 156:case 157:case 158:case 159:case 160:case 161:case 162:case 163:case 164:case 165:case 166:case 167:case 168:case 230:case 231:case 169:case 170:case 171:case 172:case 173:case 236:r=-(o=3);break;case 144:o|=2097152,16384&n&&(o|=65536);break;case 198:o|=524480;break;case 263:o|=1048584;break;case 97:o|=192;break;case 99:o|=16384;break;case 174:o|=8388800,524288&n&&(o|=1048584),r=537396545;break;case 175:o|=8388800,r=537396545;break;case 176:o|=192,e.dotDotDotToken&&(o|=524288);break;case 147:o|=4099;break;case 178:r=540087617,2097152&n&&(o|=192),65536&n&&(o|=16384),1048576&n&&(o|=8);break;case 177:case 182:r=537396545,524288&n&&(o|=192);break;case 212:case 213:case 214:case 215:4194304&n&&(o|=192);break;case 265:32768&n&&(o|=192);break;case 219:case 217:case 218:o|=33554432}return e.transformFlags=536870912|o,o&~r}(e,n,t)}}function b(e){if(158<=e&&e<=173)return-3;switch(e){case 181:case 182:case 177:return 537396545;case 233:return 574674241;case 146:return 536872257;case 187:return 601249089;case 186:case 228:return 601281857;case 227:return 546309441;case 229:case 199:return 539358529;case 152:return 601015617;case 151:case 153:case 154:return 601015617;case 119:case 133:case 130:case 136:case 134:case 122:case 137:case 105:case 145:case 148:case 150:case 155:case 156:case 157:case 230:case 231:return-3;case 178:return 540087617;case 260:return 537920833;case 174:case 175:return 537396545;default:return 536872257}}function Re(e,t){t.parent=e,we.forEachChild(t,function(e){return Re(t,e)})}we.bindSourceFile=function(e,t){we.performance.mark("beforeBind"),o(e,t),we.performance.mark("afterBind"),we.performance.measure("Bind","beforeBind","afterBind")},we.computeTransformFlagsForNode=v,we.getTransformFlagsSubtreeExclusions=b}(ts||(ts={})),function(v){v.createGetSymbolWalker=function(i,a,g,f,s,l,h,m,y){return function(o){void 0===o&&(o=function(){return!0});var c=[],r=[];return{walkType:function(e){try{return p(e),{visitedTypes:v.getOwnValues(c),visitedSymbols:v.getOwnValues(r)}}finally{v.clear(c),v.clear(r)}},walkSymbol:function(e){try{return _(e),{visitedTypes:v.getOwnValues(c),visitedSymbols:v.getOwnValues(r)}}finally{v.clear(c),v.clear(r)}}};function p(e){if(e&&!c[e.id]){var t=_((c[e.id]=e).symbol);if(!t){if(32768&e.flags){var n=e,o=n.objectFlags;4&o&&(p((a=e).target),v.forEach(a.typeArguments,p)),32&o&&(p((i=e).typeParameter),p(i.constraintType),p(i.templateType),p(i.modifiersType)),3&o&&(u(r=e),v.forEach(r.typeParameters,p),v.forEach(g(r),p),p(r.thisType)),24&o&&u(n)}var r,i,a,s,l;16384&e.flags&&p(m(e)),196608&e.flags&&(s=e,v.forEach(s.types,p)),262144&e.flags&&p(e.type),524288&e.flags&&(p((l=e).objectType),p(l.indexType),p(l.constraint))}}}function d(e){e.typePredicate&&p(e.typePredicate.type),v.forEach(e.typeParameters,p);for(var t=0,n=e.parameters;t<n.length;t++){var o=n[t];_(o)}p(i(e)),p(a(e))}function u(e){var t=h(e,0);p(t);var n=h(e,1);p(n);for(var o=f(e),r=0,i=o.callSignatures;r<i.length;r++){var a=i[r];d(a)}for(var s=0,l=o.constructSignatures;s<l.length;s++){var a=l[s];d(a)}for(var c=0,u=o.properties;c<u.length;c++){var g=u[c];_(g)}}function _(e){if(e){var t=v.getSymbolId(e);if(!r[t]){if(r[t]=e,!o(e))return!0;var n=s(e);p(n),1952&e.flags&&e.exports.forEach(_),v.forEach(e.declarations,function(e){if(e.type&&162===e.type.kind){var t=e.type,n=l(y(t.exprName));_(n)}})}}}}}}(ts||(ts={})),function(k){function T(e){e.trace(k.formatMessage.apply(void 0,arguments))}function h(e,t){return e.traceResolution&&void 0!==t.trace}function d(e,t){return t&&{path:t.path,extension:t.ext,packageId:e}}function u(e){return d(void 0,e)}var m,e;function g(e){if(e)return k.Debug.assert(k.extensionIsTypeScript(e.extension)),{fileName:e.path,packageId:e.packageId}}function y(e,t,n){return{resolvedModule:e&&{resolvedFileName:e.path,extension:e.extension,isExternalLibraryImport:t,packageId:e.packageId},failedLookupLocations:n}}function p(e,t){try{var n=t.readFile(e);return n?JSON.parse(n):{}}catch(e){return{}}}function _(e,t){return e.typeRoots?e.typeRoots:(e.configFilePath?n=k.getDirectoryPath(e.configFilePath):t.getCurrentDirectory&&(n=t.getCurrentDirectory()),void 0!==n?function(e,n){if(!n.directoryExists)return[k.combinePaths(e,r)];var o;return k.forEachAncestorDirectory(k.normalizePath(e),function(e){var t=k.combinePaths(e,r);n.directoryExists(t)&&(o||(o=[])).push(t)}),o}(n,t):void 0);var n}k.trace=T,k.isTraceEnabled=h,(e=m||(m={}))[e.TypeScript=0]="TypeScript",e[e.JavaScript=1]="JavaScript",e[e.DtsOnly=2]="DtsOnly",k.getEffectiveTypeRoots=_;var r=k.combinePaths("node_modules","@types");function v(e,t,n,o,r,i){return k.isExternalModuleNameRelative(t)?function(e,t,n,o,r,i){if(!i.compilerOptions.rootDirs)return;i.traceEnabled&&T(i.host,k.Diagnostics.rootDirs_option_is_set_using_it_to_resolve_relative_module_name_0,t);for(var a,s,l=k.normalizePath(k.combinePaths(n,t)),c=0,u=i.compilerOptions.rootDirs;c<u.length;c++){var g=u[c],p=k.normalizePath(g);k.endsWith(p,k.directorySeparator)||(p+=k.directorySeparator);var d=k.startsWith(l,p)&&(void 0===s||s.length<p.length);i.traceEnabled&&T(i.host,k.Diagnostics.Checking_if_0_is_the_longest_matching_prefix_for_1_2,p,l,d),d&&(s=p,a=g)}if(s){i.traceEnabled&&T(i.host,k.Diagnostics.Longest_matching_prefix_for_0_is_1,l,s);var _=l.substr(s.length);i.traceEnabled&&T(i.host,k.Diagnostics.Loading_0_from_the_root_dir_1_candidate_location_2,_,s,l);var f=o(e,l,r,!S(n,i.host),i);if(f)return f;i.traceEnabled&&T(i.host,k.Diagnostics.Trying_other_entries_in_rootDirs);for(var h=0,m=i.compilerOptions.rootDirs;h<m.length;h++){var g=m[h];if(g!==a){var y=k.combinePaths(k.normalizePath(g),_);i.traceEnabled&&T(i.host,k.Diagnostics.Loading_0_from_the_root_dir_1_candidate_location_2,_,g,y);var v=k.getDirectoryPath(y),b=o(e,y,r,!S(v,i.host),i);if(b)return b}}i.traceEnabled&&T(i.host,k.Diagnostics.Module_resolution_using_rootDirs_has_failed)}return}(e,t,n,o,r,i):function(i,e,a,s,l){if(!l.compilerOptions.baseUrl)return;l.traceEnabled&&T(l.host,k.Diagnostics.baseUrl_option_is_set_to_0_using_this_value_to_resolve_non_relative_module_name_1,l.compilerOptions.baseUrl,e);var t=void 0;l.compilerOptions.paths&&(l.traceEnabled&&T(l.host,k.Diagnostics.paths_option_is_specified_looking_for_a_pattern_to_match_module_name_0,e),t=k.matchPatternOrExact(k.getOwnKeys(l.compilerOptions.paths),e));{if(t){var c=k.isString(t)?void 0:k.matchedText(t,e),n=k.isString(t)?t:k.patternText(t);return l.traceEnabled&&T(l.host,k.Diagnostics.Module_name_0_matched_pattern_1,e,n),k.forEach(l.compilerOptions.paths[n],function(e){var t=c?e.replace("*",c):e,n=k.normalizePath(k.combinePaths(l.compilerOptions.baseUrl,t));l.traceEnabled&&T(l.host,k.Diagnostics.Trying_substitution_0_candidate_module_location_Colon_1,e,t);var o=k.tryGetExtensionFromPath(n);if(void 0!==o){var r=A(n,s,!1,l);if(void 0!==r)return u({path:r,ext:o})}return a(i,n,s,!S(k.getDirectoryPath(n),l.host),l)})}var o=k.normalizePath(k.combinePaths(l.compilerOptions.baseUrl,e));return l.traceEnabled&&T(l.host,k.Diagnostics.Resolving_module_name_0_relative_to_base_url_1_2,e,l.compilerOptions.baseUrl,o),a(i,o,s,!S(k.getDirectoryPath(o),l.host),l)}}(e,t,o,r,i)}function f(e,t,n,o,r){return a(e,k.getDirectoryPath(t),n,o,r,!1)}function a(l,c,u,g,p,e){var d=h(u,g),_=[],f={compilerOptions:u,host:g,traceEnabled:d},t=e?o(m.JavaScript):o(m.TypeScript)||o(m.JavaScript);if(t&&t.value){var n=t.value;return y(n.resolved,n.isExternalLibraryImport,_)}return{resolvedModule:void 0,failedLookupLocations:_};function o(e){var t=v(e,l,c,function(e,t,n,o,r){return E(e,t,n,o,r,!0)},_,f);if(t)return U({resolved:t,isExternalLibraryImport:!1});if(k.isExternalModuleNameRelative(l)){var n=k.normalizePathAndParts(k.combinePaths(c,l)),o=n.path,r=n.parts,i=E(e,o,_,!1,f,!0);return i&&U({resolved:i,isExternalLibraryImport:k.contains(r,"node_modules")})}d&&T(g,k.Diagnostics.Loading_module_0_from_node_modules_folder_target_file_type_1,l,m[e]);var a=R(e,l,c,_,f,p);if(a){var s=a.value;return u.preserveSymlinks||(s=s&&__assign({},a.value,{path:b(a.value.path,g,d),extension:a.value.extension})),{value:s&&{resolved:s,isExternalLibraryImport:!0}}}}}function b(e,t,n){if(!t.realpath)return e;var o=k.normalizePath(t.realpath(e));return n&&T(t,k.Diagnostics.Resolving_real_path_for_0_result_1,e,o),o}function E(e,t,n,o,r,i){if(r.traceEnabled&&T(r.host,k.Diagnostics.Loading_module_as_file_Slash_folder_candidate_module_location_0_target_file_type_1,t,m[e]),!k.pathEndsWithDirectorySeparator(t)){if(!o){var a=k.getDirectoryPath(t);S(a,r.host)||(r.traceEnabled&&T(r.host,k.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,a),o=!0)}var s=x(e,t,n,o,r);if(s)return u(s)}o||(S(t,r.host)||(r.traceEnabled&&T(r.host,k.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,t),o=!0));return D(e,t,n,o,r,i)}function S(e,t){return!t.directoryExists||t.directoryExists(e)}function C(e,t,n,o,r){return u(x(e,t,n,o,r))}function x(e,t,n,o,r){var i=l(t,e,n,o,r);if(i)return i;if(k.hasJavaScriptFileExtension(t)){var a=k.removeFileExtension(t);if(r.traceEnabled){var s=t.substring(a.length);T(r.host,k.Diagnostics.File_name_0_has_a_1_extension_stripping_it,t,s)}return l(a,e,n,o,r)}}function l(n,e,o,r,i){if(!r){var t=k.getDirectoryPath(n);t&&(r=!S(t,i.host))}switch(e){case m.DtsOnly:return a(".d.ts");case m.TypeScript:return a(".ts")||a(".tsx")||a(".d.ts");case m.JavaScript:return a(".js")||a(".jsx")}function a(e){var t=A(n+e,o,r,i);return t&&{path:t,ext:e}}}function A(e,t,n,o){if(!n){if(o.host.fileExists(e))return o.traceEnabled&&T(o.host,k.Diagnostics.File_0_exist_use_it_as_a_name_resolution_result,e),e;o.traceEnabled&&T(o.host,k.Diagnostics.File_0_does_not_exist,e)}t.push(e)}function D(e,t,n,o,r,i){void 0===i&&(i=!0);var a=i?I(t,"",n,o,r):{packageJsonContent:void 0,packageId:void 0},s=a.packageJsonContent;return d(a.packageId,B(e,t,n,o,r,s))}function B(e,t,n,o,r,i){var a=i&&function(e,t,n,o,r){var i=function(e,o,r,i){return e?t("typings")||t("types"):t("main");function t(e){if(k.hasProperty(o,e)){var t=o[e];if(k.isString(t)){var n=k.normalizePath(k.combinePaths(r,t));return i.traceEnabled&&T(i.host,k.Diagnostics.package_json_has_0_field_1_that_references_2,e,t,n),n}i.traceEnabled&&T(i.host,k.Diagnostics.Expected_type_of_0_field_in_package_json_to_be_string_got_1,e,typeof t)}else i.traceEnabled&&T(i.host,k.Diagnostics.package_json_does_not_have_a_0_field,e)}}(t!==m.JavaScript,e,n,r);if(!i)return;var a=!S(k.getDirectoryPath(i),r.host),s=A(i,o,a,r);if(s){var l=s&&(c=t,u=s,void 0!==(g=k.tryGetExtensionFromPath(u))&&function(e,t){switch(e){case m.JavaScript:return".js"===t||".jsx"===t;case m.TypeScript:return".ts"===t||".tsx"===t||".d.ts"===t;case m.DtsOnly:return".d.ts"===t}}(c,g)?{path:u,ext:g}:void 0);if(l)return l;r.traceEnabled&&T(r.host,k.Diagnostics.File_0_has_an_unsupported_extension_so_skipping_it,s)}var c,u,g;var p=E(t===m.DtsOnly?m.TypeScript:t,i,o,a,r,!1);if(p)return k.Debug.assert(void 0===p.packageId),{path:p.path,ext:p.extension}}(i,e,t,n,r);if(a)return a;var s=!o&&S(t,r.host);return x(e,k.combinePaths(t,"index"),n,!s,r)}function I(e,t,n,o,r){var i=r.host,a=r.traceEnabled,s=!o&&S(e,i),l=N(e);if(s&&i.fileExists(l)){a&&T(i,k.Diagnostics.Found_package_json_at_0,l);var c=p(l,i);return{found:!0,packageJsonContent:c,packageId:"string"==typeof c.name&&"string"==typeof c.version?{name:c.name,subModuleName:t,version:c.version}:void 0}}return s&&a&&T(i,k.Diagnostics.File_0_does_not_exist,l),n.push(l),{found:!1,packageJsonContent:void 0,packageId:void 0}}function N(e){return k.combinePaths(e,"package.json")}function w(e,t,n,o,r,i){var a,s,l=k.normalizePath(k.combinePaths(n,t)),c=I(l,"",r,!o,i);if(c.found)a=c.packageJsonContent,s=c.packageId;else{var u=O(t),g=u.packageName,p=u.rest;if(""!==p)s=I(k.combinePaths(n,g),p,r,!o,i).packageId}return d(s,x(e,l,r,!o,i)||B(e,l,r,!o,i,a))}function O(e){var t=e.indexOf(k.directorySeparator);return"@"===e[0]&&(t=e.indexOf(k.directorySeparator,t+1)),-1===t?{packageName:e,rest:""}:{packageName:e.slice(0,t),rest:e.slice(t+1)}}function R(e,t,n,o,r,i){return L(e,t,n,o,r,!1,i)}function L(n,o,e,r,i,a,t){var s=t&&t.getOrCreateCacheForModuleName(o);return k.forEachAncestorDirectory(k.normalizeSlashes(e),function(e){if("node_modules"!==k.getBaseFileName(e)){var t=M(s,o,e,i.traceEnabled,i.host);return t||U(c(n,o,e,r,i,a))}})}function c(e,t,n,o,r,i){void 0===i&&(i=!1);var a=k.combinePaths(n,"node_modules"),s=S(a,r.host);!s&&r.traceEnabled&&T(r.host,k.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,a);var l=i?void 0:w(e,t,a,s,o,r);if(l)return l;if(e!==m.JavaScript){var c=k.combinePaths(a,"@types"),u=s;return s&&!S(c,r.host)&&(r.traceEnabled&&T(r.host,k.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,c),u=!1),w(m.DtsOnly,function(e,t){var n=P(e);t.traceEnabled&&n!==e&&T(t.host,k.Diagnostics.Scoped_package_detected_looking_in_0,n);return n}(t,r),c,u,o,r)}}k.resolveTypeReferenceDirective=function(r,o,e,i){var a=h(e,i),s={compilerOptions:e,host:i,traceEnabled:a},t=_(e,i);a&&(void 0===o?void 0===t?T(i,k.Diagnostics.Resolving_type_reference_directive_0_containing_file_not_set_root_directory_not_set,r):T(i,k.Diagnostics.Resolving_type_reference_directive_0_containing_file_not_set_root_directory_1,r,t):void 0===t?T(i,k.Diagnostics.Resolving_type_reference_directive_0_containing_file_1_root_directory_not_set,r,o):T(i,k.Diagnostics.Resolving_type_reference_directive_0_containing_file_1_root_directory_2,r,o,t));var n,l=[],c=function(){if(t&&t.length)return a&&T(i,k.Diagnostics.Resolving_with_primary_search_path_0,t.join(", ")),k.forEach(t,function(e){var t=k.combinePaths(e,r),n=k.getDirectoryPath(t),o=S(n,i);return!o&&a&&T(i,k.Diagnostics.Directory_0_does_not_exist_skipping_all_lookups_in_it,n),g(D(m.DtsOnly,t,l,!o,s))});a&&T(i,k.Diagnostics.Root_directory_cannot_be_determined_skipping_primary_search_paths)}(),u=!0;return c||(c=function(){var e,t=o&&k.getDirectoryPath(o);if(void 0!==t){a&&T(i,k.Diagnostics.Looking_up_in_node_modules_folder_initial_location_0,t);var n=R(m.DtsOnly,r,t,l,s,void 0);return!(e=g(n&&n.value))&&a&&T(i,k.Diagnostics.Type_reference_directive_0_was_not_resolved,r),e}a&&T(i,k.Diagnostics.Containing_file_is_not_specified_and_root_directory_cannot_be_determined_skipping_lookup_in_node_modules_folder)}(),u=!1),c&&(e.preserveSymlinks||(c=__assign({},c,{fileName:b(c.fileName,i,a)})),a&&T(i,k.Diagnostics.Type_reference_directive_0_was_successfully_resolved_to_1_primary_Colon_2,r,c.fileName,u),n={primary:u,resolvedFileName:c.fileName,packageId:c.packageId}),{resolvedTypeReferenceDirective:n,failedLookupLocations:l}},k.getAutomaticTypeDirectiveNames=function(e,t){if(e.types)return e.types;var n=[];if(t.directoryExists&&t.getDirectories){var o=_(e,t);if(o)for(var r=0,i=o;r<i.length;r++){var a=i[r];if(t.directoryExists(a))for(var s=0,l=t.getDirectories(a);s<l.length;s++){var c=l[s],u=k.normalizePath(c),g=N(k.combinePaths(a,u));t.fileExists(g)&&null===p(g,t).typings||n.push(k.getBaseFileName(u))}}}return n},k.createModuleResolutionCache=function(l,c){var o=k.createMap(),n=k.createMap();return{getOrCreateCacheForDirectory:function(e){var t=k.toPath(e,l,c),n=o.get(t);return n||(n=k.createMap(),o.set(t,n)),n},getOrCreateCacheForModuleName:function(e){if(!k.isExternalModuleNameRelative(e)){var s,t=n.get(e);return t||(s=k.createMap(),t={get:function(e){return s.get(k.toPath(e,l,c))},set:function(e,t){var n=k.toPath(e,l,c);if(!s.has(n)){s.set(n,t);for(var o=t.resolvedModule&&t.resolvedModule.resolvedFileName,r=function(e,t){if(void 0!==t){for(var n=k.toPath(k.getDirectoryPath(t),l,c),o=0;o<Math.min(e.length,n.length)&&e.charCodeAt(o)===n.charCodeAt(o);)o++;var r=e.lastIndexOf(k.directorySeparator,o);if(!(r<0))return e.substr(0,r)}}(n,o),i=n;;){var a=k.getDirectoryPath(i);if(a===i||s.has(a))break;if(s.set(a,t),(i=a)===r)break}}}},n.set(e,t)),t}}}},k.resolveModuleName=function(e,t,n,o,r){var i=h(n,o);i&&T(o,k.Diagnostics.Resolving_module_0_from_1,e,t);var a=k.getDirectoryPath(t),s=r&&r.getOrCreateCacheForDirectory(a),l=s&&s.get(e);if(l)i&&T(o,k.Diagnostics.Resolution_for_module_0_was_found_in_cache,e);else{var c=n.moduleResolution;switch(void 0===c?(c=k.getEmitModuleKind(n)===k.ModuleKind.CommonJS?k.ModuleResolutionKind.NodeJs:k.ModuleResolutionKind.Classic,i&&T(o,k.Diagnostics.Module_resolution_kind_is_not_specified_using_0,k.ModuleResolutionKind[c])):i&&T(o,k.Diagnostics.Explicitly_specified_module_resolution_kind_Colon_0,k.ModuleResolutionKind[c]),c){case k.ModuleResolutionKind.NodeJs:l=f(e,t,n,o,r);break;case k.ModuleResolutionKind.Classic:l=F(e,t,n,o,r);break;default:k.Debug.fail("Unexpected moduleResolution: "+c)}if(s){s.set(e,l);var u=r.getOrCreateCacheForModuleName(e);u&&u.set(a,l)}}return i&&(l.resolvedModule?T(o,k.Diagnostics.Module_name_0_was_successfully_resolved_to_1,e,l.resolvedModule.resolvedFileName):T(o,k.Diagnostics.Module_name_0_was_not_resolved,e)),l},k.nodeModuleNameResolver=f,k.resolveJavaScriptModule=function(e,t,n){var o=a(e,t,{moduleResolution:k.ModuleResolutionKind.NodeJs,allowJs:!0},n,void 0,!0),r=o.resolvedModule,i=o.failedLookupLocations;if(!r)throw new Error("Could not resolve JS module '"+e+"' starting at '"+t+"'. Looked in: "+i.join(", "));return r.resolvedFileName},k.directoryProbablyExists=S,k.getPackageName=O;var n="__";function P(e){if(k.startsWith(e,"@")){var t=e.replace(k.directorySeparator,n);if(t!==e)return t.slice(1)}return e}function M(e,t,n,o,r){var i=e&&e.get(n);if(i)return o&&T(r,k.Diagnostics.Resolution_for_module_0_was_found_in_cache,t),{value:i.resolvedModule&&{path:i.resolvedModule.resolvedFileName,extension:i.resolvedModule.extension,packageId:i.resolvedModule.packageId}}}function F(c,e,t,u,g){var p=h(t,u),d={compilerOptions:t,host:u,traceEnabled:p},_=[],f=k.getDirectoryPath(e),n=o(m.TypeScript)||o(m.JavaScript);return y(n&&n.value,!1,_);function o(o){var e=v(o,c,f,C,_,d);if(e)return{value:e};var r=g&&g.getOrCreateCacheForModuleName(c);if(k.isExternalModuleNameRelative(c)){var t=k.normalizePath(k.combinePaths(f,c));return U(C(o,t,_,!1,d))}var n,i,a,s,l=k.forEachAncestorDirectory(f,function(e){var t=M(r,c,e,p,u);if(t)return t;var n=k.normalizePath(k.combinePaths(e,c));return U(C(o,n,_,!1,d))});return l||(o===m.TypeScript?(n=c,i=f,a=_,s=d,L(m.DtsOnly,n,i,a,s,!0,void 0)):void 0)}}function U(e){return void 0!==e?{value:e}:void 0}k.getTypesPackageName=function(e){return"@types/"+P(e)},k.getPackageNameFromAtTypesDirectory=function(e){var t=k.removePrefix(e,"@types/");return t!==e?k.stringContains(t,n)?"@"+t.replace(n,k.directorySeparator):t:e},k.classicNameResolver=F,k.loadModuleFromGlobalCache=function(e,t,n,o,r){var i=h(n,o);i&&T(o,k.Diagnostics.Auto_discovery_for_typings_is_enabled_in_project_0_Running_extra_resolution_pass_for_module_1_using_cache_location_2,t,e,r);var a={compilerOptions:n,host:o,traceEnabled:i},s=[];return y(c(m.DtsOnly,e,r,s,a),!0,s)}}(ts||(ts={})),function(W_){var K_=/^".+"$/,t=1,n=1,z_=1,j_=1;function Y_(e){return e.id||(e.id=n,n++),e.id}function X_(e){return e.id||(e.id=t,t++),e.id}function J_(e,t){var n=W_.getModuleInstanceState(e);return 1===n||t&&2===n}function q_(e){switch(e.parent.kind){case 242:case 246:return!0;default:return W_.isDeclarationName(e)}}function Z_(e){switch(e.kind){case 239:case 237:case 240:case 242:return!0;case 71:return 242===e.parent.kind;default:return!1}}W_.getNodeId=Y_,W_.getSymbolId=X_,W_.isInstantiatedModule=J_,W_.createTypeChecker=function(h,P){var T,c,u,o=W_.objectAllocator.getSymbolConstructor(),n=W_.objectAllocator.getTypeConstructor(),g=W_.objectAllocator.getSignatureConstructor(),r=0,i=0,p=0,a=0,m=W_.createSymbolTable(),E=W_.identity,O=h.getCompilerOptions(),w=W_.getEmitScriptTarget(O),S=W_.getEmitModuleKind(O),D=!!O.noUnusedLocals||!!O.noUnusedParameters,d=void 0!==O.allowSyntheticDefaultImports?O.allowSyntheticDefaultImports:S===W_.ModuleKind.System,A=void 0===O.strictNullChecks?O.strict:O.strictNullChecks,R=void 0===O.strictFunctionTypes?O.strict:O.strictFunctionTypes,y=void 0===O.noImplicitAny?O.strict:O.noImplicitAny,_=void 0===O.noImplicitThis?O.strict:O.noImplicitThis,s=function(){var l,e=h.getResolvedTypeReferenceDirectives();return e&&(l=W_.createMap(),e.forEach(function(e,t){if(e){var n=h.getSourceFile(e.resolvedFileName);l.set(n.path,t)}})),{getReferencedExportContainer:Kd,getReferencedImportDeclaration:zd,getReferencedDeclarationWithCollidingName:Yd,isDeclarationWithCollidingName:Xd,isValueAliasDeclaration:function(e){return!(e=W_.getParseTreeNode(e))||Jd(e)},hasGlobalName:u_,isReferencedAliasDeclaration:function(e,t){return!(e=W_.getParseTreeNode(e))||function t(e,n){if(W_.isAliasSymbolDeclaration(e)){var o=Vn(e);if(o&&rn(o).referenced)return!0}return!!n&&W_.forEachChild(e,function(e){return t(e,n)})}(e,t)},getNodeCheckFlags:function(e){return(e=W_.getParseTreeNode(e))?n_(e):void 0},isTopLevelValueImportEqualsWithEntityName:qd,isDeclarationVisible:So,isImplementationOfOverload:Qd,isRequiredInitializedParameter:e_,isOptionalUninitializedParameterProperty:t_,writeTypeOfDeclaration:s_,writeReturnTypeOfSignatureDeclaration:l_,writeTypeOfExpression:c_,isSymbolAccessible:io,isEntityNameVisible:lo,getConstantValue:function(e){return(e=W_.getParseTreeNode(e,r_))?i_(e):void 0},collectLinkedAliases:Co,getReferencedValueDeclaration:p_,getTypeReferenceSerializationKind:a_,isOptionalParameter:yi,moduleExportsSomeValue:Wd,isArgumentsLocalBinding:Vd,getExternalModuleFileFromDeclaration:f_,getTypeReferenceDirectivesForEntityName:function(e){if(l){var t=179===e.kind||71===e.kind&&Dl(e)?1156031:794600,n=Bn(e,t,!0);return n&&n!==N?o(n,t):void 0}},getTypeReferenceDirectivesForSymbol:o,isLiteralConstDeclaration:d_,writeLiteralConstValue:__,getJsxFactoryEntity:function(){return St}};function o(e,t){if(l&&function(e){if(!e.declarations)return!1;for(var t=e;;){var n=Wn(t);if(!n)break;t=n}if(t.valueDeclaration&&265===t.valueDeclaration.kind&&512&t.flags)return!1;for(var o=0,r=e.declarations;o<r.length;o++){var i=r[o],a=W_.getSourceFileOfNode(i);if(l.has(a.path))return!0}return!1}(e)){for(var n,o=0,r=e.declarations;o<r.length;o++){var i=r[o];if(i.symbol&&i.symbol.flags&t){var a=W_.getSourceFileOfNode(i),s=l.get(a.path);if(!s)return;(n||(n=[])).push(s)}}return n}}}(),f=function(){return{typeToTypeNode:function(e,t,n){var o=s(t,n),r=E(e,o),i=o.encounteredError?void 0:r;return i},indexInfoToIndexSignatureDeclaration:function(e,t,n,o){var r=s(n,o),i=S(e,t,r),a=r.encounteredError?void 0:i;return a},signatureToSignatureDeclaration:function(e,t,n,o){var r=s(n,o),i=C(e,t,r),a=r.encounteredError?void 0:i;return a}};function s(e,t){return{enclosingDeclaration:e,flags:t,encounteredError:!1,symbolStack:void 0}}function E(e,T){var t=T.flags&W_.NodeBuilderFlags.InTypeAlias;if(T.flags&=~W_.NodeBuilderFlags.InTypeAlias,e){if(1&e.flags)return W_.createKeywordTypeNode(119);if(2&e.flags)return W_.createKeywordTypeNode(136);if(4&e.flags)return W_.createKeywordTypeNode(133);if(8&e.flags)return W_.createKeywordTypeNode(122);if(256&e.flags&&!(65536&e.flags)){var n=Wn(e.symbol),o=x(n,T,793064,!1),r=br(n)===e?o:W_.createQualifiedName(o,To(e.symbol,T));return W_.createTypeReferenceNode(r,void 0)}if(272&e.flags){var i=x(e.symbol,T,793064,!1);return W_.createTypeReferenceNode(i,void 0)}if(32&e.flags)return W_.createLiteralTypeNode(W_.setEmitFlags(W_.createLiteral(e.value),16777216));if(64&e.flags)return W_.createLiteralTypeNode(W_.createLiteral(e.value));if(128&e.flags)return"true"===e.intrinsicName?W_.createTrue():W_.createFalse();if(1024&e.flags)return W_.createKeywordTypeNode(105);if(2048&e.flags)return W_.createKeywordTypeNode(139);if(4096&e.flags)return W_.createKeywordTypeNode(95);if(8192&e.flags)return W_.createKeywordTypeNode(130);if(512&e.flags)return W_.createKeywordTypeNode(137);if(16777216&e.flags)return W_.createKeywordTypeNode(134);if(16384&e.flags&&e.isThisType)return T.flags&W_.NodeBuilderFlags.InObjectTypeLiteral&&(T.encounteredError||T.flags&W_.NodeBuilderFlags.AllowThisInObjectLiteral||(T.encounteredError=!0)),W_.createThis();var a=sn(e);if(4&a)return W_.Debug.assert(!!(32768&e.flags)),function(e){var t=e.typeArguments||W_.emptyArray;if(e.target===fe){if(T.flags&W_.NodeBuilderFlags.WriteArrayAsGenericType){var n=E(t[0],T);return W_.createTypeReferenceNode("Array",[n])}var o=E(t[0],T);return W_.createArrayTypeNode(o)}if(8&e.target.objectFlags){if(0<t.length){var r=k(t.slice(0,Gi(e)),T);if(r&&0<r.length)return W_.createTupleTypeNode(r)}return T.encounteredError||T.flags&W_.NodeBuilderFlags.AllowEmptyTuple?W_.createTupleTypeNode([]):void(T.encounteredError=!0)}var i=e.target.outerTypeParameters,a=0,s=void 0;if(i)for(var l=i.length;a<l;){for(var c=a,u=Pi(i[a]);++a<l&&Pi(i[a])===u;);if(!W_.rangeEquals(i,t,c,a)){var g=k(t.slice(c,a),T),p=g&&W_.createNodeArray(g),d=v(u);(71===d.kind?d:d.right).typeArguments=p,s?(W_.Debug.assert(!s.right),s=b(s,d),s=W_.createQualifiedName(s,void 0)):s=W_.createQualifiedName(d,void 0)}}var _=void 0,f=v(e.symbol);s?(W_.Debug.assert(!s.right),s=b(s,f),_=s):_=f;var h=void 0;if(0<t.length){var m=(e.target.typeParameters||W_.emptyArray).length;h=k(t.slice(a,m),T)}if(h){var y=71===_.kind?_:_.right;y.typeArguments=void 0}return W_.createTypeReferenceNode(_,h)}(e);if(16384&e.flags||3&a){var i=e.symbol?x(e.symbol,T,793064,!1):W_.createIdentifier("?");return W_.createTypeReferenceNode(i,void 0)}if(!t&&e.aliasSymbol&&ro(e.aliasSymbol,T.enclosingDeclaration)){var i=v(e.aliasSymbol),s=k(e.aliasTypeArguments,T);return W_.createTypeReferenceNode(i,s)}if(196608&e.flags){var l=65536&e.flags?mo(e.types):e.types,c=k(l,T);if(c&&0<c.length){var u=W_.createUnionOrIntersectionTypeNode(65536&e.flags?166:167,c);return u}T.encounteredError||T.flags&W_.NodeBuilderFlags.AllowEmptyUnionOrIntersection||(T.encounteredError=!0)}else{if(48&a)return W_.Debug.assert(!!(32768&e.flags)),function(e){var t,n=e.symbol;if(n){if(32&n.flags&&!Xo(n)||896&n.flags||function(){var e=!!(8192&n.flags)&&W_.some(n.declarations,function(e){return W_.hasModifier(e,32)}),t=!!(16&n.flags)&&(n.parent||W_.forEach(n.declarations,function(e){return 265===e.parent.kind||234===e.parent.kind}));if(e||t)return W_.contains(T.symbolStack,n)}())return t=x(n,T,107455,!1),W_.createTypeQueryNode(t);if(W_.contains(T.symbolStack,n)){var o=vo(e);if(o){var r=x(o,T,793064,!1);return W_.createTypeReferenceNode(r,void 0)}return W_.createKeywordTypeNode(119)}T.symbolStack||(T.symbolStack=[]),T.symbolStack.push(n);var i=_(e);return T.symbolStack.pop(),i}return _(e)}(e);if(262144&e.flags){var g=e.type,p=E(g,T);return W_.createTypeOperatorNode(p)}if(524288&e.flags){var d=E(e.objectType,T),p=E(e.indexType,T);return W_.createIndexedAccessTypeNode(d,p)}W_.Debug.fail("Should be unreachable.")}}else T.encounteredError=!0;function _(e){if(zr(e))return function(e){W_.Debug.assert(!!(32768&e.flags));var t=e.declaration&&e.declaration.readonlyToken?W_.createToken(131):void 0,n=e.declaration&&e.declaration.questionToken?W_.createToken(55):void 0,o=f(Vr(e),T),r=E(Kr(e),T),i=W_.createMappedTypeNode(t,o,n,r);return W_.setEmitFlags(i,1)}(e);var t=jr(e);if(!t.properties.length&&!t.stringIndexInfo&&!t.numberIndexInfo){if(!t.callSignatures.length&&!t.constructSignatures.length)return W_.setEmitFlags(W_.createTypeLiteralNode(void 0),1);if(1===t.callSignatures.length&&!t.constructSignatures.length){var n=t.callSignatures[0],o=C(n,160,T);return o}if(1===t.constructSignatures.length&&!t.callSignatures.length){var n=t.constructSignatures[0],o=C(n,161,T);return o}}var r=T.flags;T.flags|=W_.NodeBuilderFlags.InObjectTypeLiteral;var i=function(e){for(var t=[],n=0,o=e.callSignatures;n<o.length;n++){var r=o[n];t.push(C(r,155,T))}for(var i=0,a=e.constructSignatures;i<a.length;i++){var r=a[i];t.push(C(r,156,T))}e.stringIndexInfo&&t.push(S(e.stringIndexInfo,0,T)),e.numberIndexInfo&&t.push(S(e.numberIndexInfo,1,T));var s=e.properties;if(!s)return t;for(var l=0,c=s;l<c.length;l++){var u=c[l],g=qo(u),p=T.enclosingDeclaration;T.enclosingDeclaration=void 0;var d=x(u,T,107455,!0);T.enclosingDeclaration=p;var _=16777216&u.flags?W_.createToken(55):void 0;if(8208&u.flags&&!Yr(g).length)for(var f=ci(g,0),h=0,m=f;h<m.length;h++){var r=m[h],y=C(r,150,T);y.name=d,y.questionToken=_,t.push(y)}else{var v=g?E(g,T):W_.createKeywordTypeNode(119),b=Dg(u)?[W_.createToken(131)]:void 0,k=W_.createPropertySignature(b,d,_,v,void 0);t.push(k)}}return t.length?t:void 0}(t);T.flags=r;var a=W_.createTypeLiteralNode(i);return W_.setEmitFlags(a,1)}function v(e){var t=32&e.flags||!qn(e.escapedName)?x(e,T,793064,!1):W_.createIdentifier("");return t}function b(e,t){if(W_.Debug.assert(void 0===e.right),71===t.kind)return e.right=t,e;for(var n=t;71!==n.left.kind;)n=n.left;return e.right=n.left,n.left=e,t}}function k(e,t){if(W_.some(e)){for(var n=[],o=0;o<e.length;++o){var r=e[o],i=E(r,t);i&&n.push(i)}return n}}function S(e,t,n){var o=W_.getNameFromIndexInfo(e)||"x",r=W_.createKeywordTypeNode(0===t?136:133),i=W_.createParameter(void 0,void 0,void 0,o,void 0,r,void 0),a=E(e.type,n);return W_.createIndexSignature(void 0,e.isReadonly?[W_.createToken(131)]:void 0,[i],a)}function C(e,t,n){var o,r=e.typeParameters&&e.typeParameters.map(function(e){return f(e,n)}),i=e.parameters.map(function(e){return g(e,n)});if(e.thisParameter){var a=g(e.thisParameter,n);i.unshift(a)}if(e.typePredicate){var s=e.typePredicate,l=1===s.kind?W_.setEmitFlags(W_.createIdentifier(s.parameterName),16777216):W_.createThisTypeNode(),c=E(s.type,n);o=W_.createTypePredicateNode(l,c)}else{var u=Si(e);o=u&&E(u,n)}return n.flags&W_.NodeBuilderFlags.SuppressAnyReturnType?o&&119===o.kind&&(o=void 0):o||(o=W_.createKeywordTypeNode(119)),W_.createSignatureDeclaration(t,r,i,o)}function f(e,t){var n=x(e.symbol,t,793064,!0),o=Li(e),r=o&&E(o,t),i=ni(e),a=i&&E(i,t);return W_.createTypeParameterDeclaration(n,r,a)}function g(e,t){var n=W_.getDeclarationOfKind(e,146);if($t(e)&&e.isRestParameter)return W_.createParameter(void 0,void 0,e.isRestParameter?W_.createToken(24):void 0,"args",void 0,E(Te,t),void 0);var o=n.modifiers&&n.modifiers.map(W_.getSynthesizedClone),r=W_.isRestParameter(n)?W_.createToken(24):void 0,i=n.name?71===n.name.kind?W_.setEmitFlags(W_.getSynthesizedClone(n.name),16777216):function e(t){var n=W_.visitEachChild(t,e,W_.nullTransformationContext,void 0,e),o=W_.nodeIsSynthesized(n)?n:W_.getSynthesizedClone(n);return 176===o.kind&&(o.initializer=void 0),W_.setEmitFlags(o,16777217)}(n.name):W_.symbolName(e),a=yi(n)?W_.createToken(55):void 0,s=qo(e);e_(n)&&(s=il(s,2048));var l=E(s,t),c=W_.createParameter(void 0,o,r,i,a,l,void 0);return c}function x(e,u,t,n){var o,r=262144&e.flags;return!r&&(u.enclosingDeclaration||u.flags&W_.NodeBuilderFlags.UseFullyQualifiedType)?(o=function e(t,n,o){var r,i=no(t,u.enclosingDeclaration,n,!1);if(!i||oo(i[0],u.enclosingDeclaration,1===i.length?n:to(n))){var a=Wn(i?i[0]:t);if(a){var s=e(a,to(n),!1);s&&(r=a,i=s.concat(i||[t]))}}return i||(!o&&(!r&&W_.forEach(t.declarations,ao)||6144&t.flags)?void 0:[t])}(e,t,!0),W_.Debug.assert(o&&0<o.length)):o=[e],!n||1===o.length||u.encounteredError||u.flags&W_.NodeBuilderFlags.AllowQualifedNameInPlaceOfIdentifier||(u.encounteredError=!0),function e(t,n){W_.Debug.assert(t&&0<=n&&n<t.length);var o,r=t[n];if(u.flags&W_.NodeBuilderFlags.WriteTypeParametersInQualifiedName&&0<n){var i=t[n-1],a=void 0;if(1&W_.getCheckFlags(r))a=rr(i);else{var s=pd(i);524384&s.flags&&(a=or(r))}o=k(a,u)}var l=To(r,u),c=W_.setEmitFlags(W_.createIdentifier(l,o),16777216);return 0<n?W_.createQualifiedName(e(t,n-1),c):c}(o,o.length-1)}}(),v=Zt(4,"undefined");v.declarations=[];var M,e,B=Zt(4,"arguments"),b={getNodeCount:function(){return W_.sum(h.getSourceFiles(),"nodeCount")},getIdentifierCount:function(){return W_.sum(h.getSourceFiles(),"identifierCount")},getSymbolCount:function(){return W_.sum(h.getSourceFiles(),"symbolCount")+i},getTypeCount:function(){return r},isUndefinedSymbol:function(e){return e===v},isArgumentsSymbol:function(e){return e===B},isUnknownSymbol:function(e){return e===N},getMergedSymbol:Gn,getDiagnostics:Id,getGlobalDiagnostics:function(){return Nd(),Tt.getGlobalDiagnostics()},getTypeOfSymbolAtLocation:function(e,t){return(t=W_.getParseTreeNode(t))?function(e,t){if(e=e.exportSymbol||e,71===t.kind&&(W_.isRightSideOfQualifiedNameOrPropertyAccess(t)&&(t=t.parent),W_.isPartOfExpression(t)&&!W_.isAssignmentTarget(t))){var n=Zg(t);if(Kn(an(t).resolvedSymbol)===e)return n}return qo(e)}(e,t):H},getSymbolsOfParameterPropertyDeclaration:function(e,t){return e=W_.getParseTreeNode(e,W_.isParameter),W_.Debug.assert(void 0!==e,"Cannot get symbols of a synthetic parameter that cannot be resolved to a parse-tree node."),function(e,t){var n=e.parent,o=e.parent.parent,r=cn(n.locals,t,107455),i=cn(o.symbol.members,t,107455);if(r&&i)return[r,i];W_.Debug.fail("There should exist two symbols, one as property declaration and one as parameter declaration")}(e,W_.escapeLeadingUnderscores(t))},getDeclaredTypeOfSymbol:br,getPropertiesOfType:Jr,getPropertyOfType:function(e,t){return si(e,W_.escapeLeadingUnderscores(t))},getIndexInfoOfType:pi,getSignaturesOfType:ci,getIndexTypeOfType:di,getBaseTypes:gr,getBaseTypeOfLiteralType:$s,getWidenedType:gl,getTypeFromTypeNode:function(e){return(e=W_.getParseTreeNode(e,W_.isTypeNode))?$a(e):H},getParameterType:fg,getReturnTypeOfSignature:Si,getNullableType:il,getNonNullableType:al,typeToTypeNode:f.typeToTypeNode,indexInfoToIndexSignatureDeclaration:f.indexInfoToIndexSignatureDeclaration,signatureToSignatureDeclaration:f.signatureToSignatureDeclaration,getSymbolsInScope:function(e,t){return(e=W_.getParseTreeNode(e))?function(n,o){if(wd(n))return[];var r=W_.createSymbolTable(),i=!1;return function(){for(;n;){switch(n.locals&&!ln(n)&&s(n.locals,o),n.kind){case 233:s(Vn(n).exports,2623475&o);break;case 232:s(Vn(n).exports,8&o);break;case 199:var e=n.name;e&&a(n.symbol,o);case 229:case 230:i||s(Vn(n).members,793064&o);break;case 186:var t=n.name;t&&a(n.symbol,o)}W_.introducesArgumentsExoticObject(n)&&a(B,o),i=W_.hasModifier(n,32),n=n.parent}s($e,o)}(),fi(r);function a(e,t){if(W_.getCombinedLocalAndExportSymbolFlags(e)&t){var n=e.escapedName;r.has(n)||r.set(n,e)}}function s(e,t){t&&e.forEach(function(e){a(e,t)})}}(e,t):[]},getSymbolAtLocation:function(e){return(e=W_.getParseTreeNode(e))?Ud(e):void 0},getShorthandAssignmentValueSymbol:function(e){return(e=W_.getParseTreeNode(e))?function(e){if(e&&262===e.kind)return Bn(e.name,2204607)}(e):void 0},getExportSpecifierLocalTargetSymbol:function(e){return(e=W_.getParseTreeNode(e,W_.isExportSpecifier))?(t=e).parent.parent.moduleSpecifier?vn(t.parent.parent,t):Bn(t.propertyName||t.name,2998271):void 0;var t},getExportSymbolOfSymbol:function(e){return Gn(e.exportSymbol||e)},getTypeAtLocation:function(e){return(e=W_.getParseTreeNode(e))?Hd(e):H},getPropertySymbolOfDestructuringAssignment:function(e){return(e=W_.getParseTreeNode(e,W_.isIdentifier))?(n=function e(t){if(W_.Debug.assert(178===t.kind||177===t.kind),216===t.parent.kind){var n=Zp(t.parent.expression,t.parent.awaitModifier);return Fg(t,n||H)}if(194===t.parent.kind){var n=Zg(t.parent.right);return Fg(t,n||H)}if(261===t.parent.kind){var o=e(t.parent.parent);return Pg(o||H,t.parent)}W_.Debug.assert(177===t.parent.kind);var r=e(t.parent),i=$p(r||H,t.parent,!1,!1)||H;return Mg(t.parent,r,W_.indexOf(t.parent.elements,t),i||H)}((t=e).parent.parent))&&si(n,t.escapedText):void 0;var t,n},signatureToString:function(e,t,n,o){return _o(e,W_.getParseTreeNode(t),n,o)},typeToString:function(e,t,n){return fo(e,W_.getParseTreeNode(t),n)},getSymbolDisplayBuilder:Eo,symbolToString:function(e,t,n){return po(e,W_.getParseTreeNode(t),n)},getAugmentedPropertiesOfType:function(e){e=oi(e);var t=W_.createSymbolTable(Jr(e));return(ci(e,0).length||ci(e,1).length)&&W_.forEach(Jr(_e),function(e){t.has(e.escapedName)||t.set(e.escapedName,e)}),Zn(t)},getRootSymbols:function e(t){if(6&W_.getCheckFlags(t)){var n=[],o=t.escapedName;return W_.forEach(rn(t).containingType.types,function(e){var t=si(e,o);t&&n.push(t)}),n}if(33554432&t.flags){var r=t;if(r.leftSpread)return e(r.leftSpread).concat(e(r.rightSpread));if(r.syntheticOrigin)return e(r.syntheticOrigin);for(var i=void 0,a=t;a=rn(a).target;)i=a;if(i)return[i]}return[t]},getContextualType:function(e){return(e=W_.getParseTreeNode(e,W_.isExpression))?Gc(e):void 0},getFullyQualifiedName:Dn,getResolvedSignature:function(e,t,n){e=W_.getParseTreeNode(e,W_.isCallLikeExpression),M=n;var o=e?ag(e,t):void 0;return M=void 0,o},getConstantValue:function(e){return(e=W_.getParseTreeNode(e,r_))?i_(e):void 0},isValidPropertyAccess:function(e,t){return!!(e=W_.getParseTreeNode(e,W_.isPropertyAccessOrQualifiedName))&&(n=e,o=W_.escapeLeadingUnderscores(t),r=179===n.kind?n.expression:n.left,function e(t,n,o,r){if(r!==H&&!No(r)){var i=si(r,o);if(i)return ku(t,n,r,i);if(W_.isInJavaScriptFile(n)&&65536&r.flags)for(var a=0,s=r.types;a<s.length;a++){var l=s[a];if(e(t,n,o,l))return!0}return!1}return!0}(n,r,o,gl($g(r))));var n,o,r},getSignatureFromDeclaration:function(e){return(e=W_.getParseTreeNode(e,W_.isFunctionLike))?ki(e):void 0},isImplementationOfOverload:function(e){var t=W_.getParseTreeNode(e,W_.isFunctionLike);return t?Qd(t):void 0},getImmediateAliasedSymbol:function(e){W_.Debug.assert(0!=(2097152&e.flags),"Should only get Alias here.");var t=rn(e);if(!t.immediateTarget){var n=yn(e);W_.Debug.assert(!!n),t.immediateTarget=kn(n,!0)}return t.immediateTarget},getAliasedSymbol:Sn,getEmitResolver:function(e,t){return Id(e,t),s},getExportsOfModule:Pn,getExportsAndPropertiesOfModule:function(e){var t=Pn(e),n=On(e);return n!==e&&W_.addRange(t,Jr(qo(n))),t},getSymbolWalker:W_.createGetSymbolWalker(Ci,Si,gr,jr,qo,Al,gi,Li,vd),getAmbientModules:function(){return ge||(ge=[],$e.forEach(function(e,t){K_.test(t)&&ge.push(e)})),ge},getAllAttributesTypeFromJsxOpeningLikeElement:function(e){return(e=W_.getParseTreeNode(e,W_.isJsxOpeningLikeElement))?ou((t=e).tagName)?pu(t):du(t,!0):void 0;var t},getJsxIntrinsicTagNames:function(){var e=iu(Gt.IntrinsicElements);return e?Jr(e):W_.emptyArray},isOptionalParameter:function(e){return!!(e=W_.getParseTreeNode(e,W_.isParameter))&&yi(e)},tryGetMemberInModuleExports:function(e,t){return Mn(W_.escapeLeadingUnderscores(e),t)},tryGetMemberInModuleExportsAndProperties:function(e,t){return function(e,t){var n=Mn(e,t);if(!n){var o=On(t);if(o!==t)return si(qo(o),e)}return n}(W_.escapeLeadingUnderscores(e),t)},tryFindAmbientModuleWithoutAugmentations:function(e){return mi(e,!1)},getApparentType:oi,getUnionType:Aa,createAnonymousType:Qn,createSignature:Ir,createSymbol:Zt,createIndexInfo:Oi,getAnyType:function(){return F},getStringType:function(){return z},getNumberType:function(){return j},createPromiseType:yg,createArrayType:ma,getBooleanType:function(){return J},getVoidType:function(){return Z},getUndefinedType:function(){return G},getNullType:function(){return W},getESSymbolType:function(){return q},getNeverType:function(){return $},isSymbolAccessible:io,isArrayLikeType:Xs,getAllPossiblePropertiesOfTypes:function(e){var t=Aa(e);if(!(65536&t.flags))return Jr(t);for(var n=W_.createSymbolTable(),o=0,r=e;o<r.length;o++)for(var i=r[o],a=0,s=Jr(i);a<s.length;a++){var l=s[a].escapedName;n.has(l)||n.set(l,ri(t,l))}return W_.arrayFrom(n.values())},getSuggestionForNonexistentProperty:function(e,t){return Du(e,t)},getSuggestionForNonexistentSymbol:function(e,t,n){return Bu(e,W_.escapeLeadingUnderscores(t),n)},getBaseConstraintOfType:$r,resolveName:function(e,t,n){return gn(t,W_.escapeLeadingUnderscores(e),n,void 0,void 0,!1)},getJsxNamespace:function(){return W_.unescapeLeadingUnderscores(Jt())}},t=[],l=W_.createMap(),k=W_.createMap(),C=W_.createMap(),x=W_.createMap(),I=[],N=Zt(4,"unknown"),L=Zt(0,"__resolving__"),F=Xn(1,"any"),U=Xn(1,"any"),H=Xn(1,"unknown"),G=Xn(2048,"undefined"),V=A?G:Xn(2099200,"undefined"),W=Xn(4096,"null"),K=A?W:Xn(2101248,"null"),z=Xn(2,"string"),j=Xn(4,"number"),Y=Xn(128,"true"),X=Xn(128,"false"),J=((e=Aa([Y,X])).flags|=8,e.intrinsicName="boolean",e),q=Xn(512,"symbol"),Z=Xn(1024,"void"),$=Xn(8192,"never"),Q=Xn(8192,"never"),ee=Xn(16777216,"object"),te=Qn(void 0,m,W_.emptyArray,W_.emptyArray,void 0,void 0),ne=Zt(2048,"__type");ne.members=W_.createSymbolTable();var oe=Qn(ne,m,W_.emptyArray,W_.emptyArray,void 0,void 0),re=Qn(void 0,m,W_.emptyArray,W_.emptyArray,void 0,void 0);re.instantiations=W_.createMap();var ie=Qn(void 0,m,W_.emptyArray,W_.emptyArray,void 0,void 0);ie.flags|=8388608;var ae=Qn(void 0,m,W_.emptyArray,W_.emptyArray,void 0,void 0),se=Qn(void 0,m,W_.emptyArray,W_.emptyArray,void 0,void 0),le=Qn(void 0,m,W_.emptyArray,W_.emptyArray,void 0,void 0),ce=Yn(16384),ue=Yn(16384);ue.constraint=ce;var ge,pe,de,_e,fe,he,me,ye,ve,be,ke,Te,Ee,Se,Ce,xe,Ae,De,Be,Ie,Ne,we,Oe,Re,Le,Pe,Me,Fe,Ue,He,Ge,Ve,We,Ke,ze=Yn(16384),je=Ir(void 0,void 0,void 0,W_.emptyArray,F,void 0,0,!1,!1),Ye=Ir(void 0,void 0,void 0,W_.emptyArray,H,void 0,0,!1,!1),Xe=Ir(void 0,void 0,void 0,W_.emptyArray,F,void 0,0,!1,!1),Je=Ir(void 0,void 0,void 0,W_.emptyArray,Q,void 0,0,!1,!1),qe=Oi(z,!0),Ze=Oi(F,!1),$e=W_.createSymbolTable(),Qe=0,et=0,tt=0,nt=!1,ot=qa(""),rt=qa(0),it=[],at=[],st=[],lt=0,ct=10,ut=[],gt=[],pt=[],dt=[],_t=[],ft=[],ht=[],mt=[],yt=[],vt=[],bt=[],kt=[],Tt=W_.createDiagnosticCollection();(Ke=We||(We={}))[Ke.None=0]="None",Ke[Ke.TypeofEQString=1]="TypeofEQString",Ke[Ke.TypeofEQNumber=2]="TypeofEQNumber",Ke[Ke.TypeofEQBoolean=4]="TypeofEQBoolean",Ke[Ke.TypeofEQSymbol=8]="TypeofEQSymbol",Ke[Ke.TypeofEQObject=16]="TypeofEQObject",Ke[Ke.TypeofEQFunction=32]="TypeofEQFunction",Ke[Ke.TypeofEQHostObject=64]="TypeofEQHostObject",Ke[Ke.TypeofNEString=128]="TypeofNEString",Ke[Ke.TypeofNENumber=256]="TypeofNENumber",Ke[Ke.TypeofNEBoolean=512]="TypeofNEBoolean",Ke[Ke.TypeofNESymbol=1024]="TypeofNESymbol",Ke[Ke.TypeofNEObject=2048]="TypeofNEObject",Ke[Ke.TypeofNEFunction=4096]="TypeofNEFunction",Ke[Ke.TypeofNEHostObject=8192]="TypeofNEHostObject",Ke[Ke.EQUndefined=16384]="EQUndefined",Ke[Ke.EQNull=32768]="EQNull",Ke[Ke.EQUndefinedOrNull=65536]="EQUndefinedOrNull",Ke[Ke.NEUndefined=131072]="NEUndefined",Ke[Ke.NENull=262144]="NENull",Ke[Ke.NEUndefinedOrNull=524288]="NEUndefinedOrNull",Ke[Ke.Truthy=1048576]="Truthy",Ke[Ke.Falsy=2097152]="Falsy",Ke[Ke.Discriminatable=4194304]="Discriminatable",Ke[Ke.All=8388607]="All",Ke[Ke.BaseStringStrictFacts=933633]="BaseStringStrictFacts",Ke[Ke.BaseStringFacts=3145473]="BaseStringFacts",Ke[Ke.StringStrictFacts=4079361]="StringStrictFacts",Ke[Ke.StringFacts=4194049]="StringFacts",Ke[Ke.EmptyStringStrictFacts=3030785]="EmptyStringStrictFacts",Ke[Ke.EmptyStringFacts=3145473]="EmptyStringFacts",Ke[Ke.NonEmptyStringStrictFacts=1982209]="NonEmptyStringStrictFacts",Ke[Ke.NonEmptyStringFacts=4194049]="NonEmptyStringFacts",Ke[Ke.BaseNumberStrictFacts=933506]="BaseNumberStrictFacts",Ke[Ke.BaseNumberFacts=3145346]="BaseNumberFacts",Ke[Ke.NumberStrictFacts=4079234]="NumberStrictFacts",Ke[Ke.NumberFacts=4193922]="NumberFacts",Ke[Ke.ZeroStrictFacts=3030658]="ZeroStrictFacts",Ke[Ke.ZeroFacts=3145346]="ZeroFacts",Ke[Ke.NonZeroStrictFacts=1982082]="NonZeroStrictFacts",Ke[Ke.NonZeroFacts=4193922]="NonZeroFacts",Ke[Ke.BaseBooleanStrictFacts=933252]="BaseBooleanStrictFacts",Ke[Ke.BaseBooleanFacts=3145092]="BaseBooleanFacts",Ke[Ke.BooleanStrictFacts=4078980]="BooleanStrictFacts",Ke[Ke.BooleanFacts=4193668]="BooleanFacts",Ke[Ke.FalseStrictFacts=3030404]="FalseStrictFacts",Ke[Ke.FalseFacts=3145092]="FalseFacts",Ke[Ke.TrueStrictFacts=1981828]="TrueStrictFacts",Ke[Ke.TrueFacts=4193668]="TrueFacts",Ke[Ke.SymbolStrictFacts=1981320]="SymbolStrictFacts",Ke[Ke.SymbolFacts=4193160]="SymbolFacts",Ke[Ke.ObjectStrictFacts=6166480]="ObjectStrictFacts",Ke[Ke.ObjectFacts=8378320]="ObjectFacts",Ke[Ke.FunctionStrictFacts=6164448]="FunctionStrictFacts",Ke[Ke.FunctionFacts=8376288]="FunctionFacts",Ke[Ke.UndefinedFacts=2457472]="UndefinedFacts",Ke[Ke.NullFacts=2340752]="NullFacts";var Et,St,Ct,xt,At,Dt,Bt,It,Nt,wt,Ot,Rt=W_.createMapFromTemplate({string:1,number:2,boolean:4,symbol:8,undefined:16384,object:16,function:32}),Lt=W_.createMapFromTemplate({string:128,number:256,boolean:512,symbol:1024,undefined:131072,object:2048,function:4096}),Pt=W_.createMapFromTemplate({string:z,number:j,boolean:J,symbol:q,undefined:G}),Mt=Aa(W_.arrayFrom(Rt.keys(),qa)),Ft=!1,Ut=!1,Ht=W_.createUnderscoreEscapedMap(),Gt={JSX:"JSX",IntrinsicElements:"IntrinsicElements",ElementClass:"ElementClass",ElementAttributesPropertyNameContainer:"ElementAttributesProperty",ElementChildrenAttributeNameContainer:"ElementChildrenAttribute",Element:"Element",IntrinsicAttributes:"IntrinsicAttributes",IntrinsicClassAttributes:"IntrinsicClassAttributes"},Vt=W_.createMap(),Wt=W_.createMap(),Kt=W_.createMap(),zt=W_.createMap(),jt=W_.createMap();(Bt=Dt||(Dt={}))[Bt.Type=0]="Type",Bt[Bt.ResolvedBaseConstructorType=1]="ResolvedBaseConstructorType",Bt[Bt.DeclaredType=2]="DeclaredType",Bt[Bt.ResolvedReturnType=3]="ResolvedReturnType",(Nt=It||(It={}))[Nt.Normal=0]="Normal",Nt[Nt.SkipContextSensitive=1]="SkipContextSensitive",Nt[Nt.Inferential=2]="Inferential",(Ot=wt||(wt={}))[Ot.None=0]="None",Ot[Ot.Bivariant=1]="Bivariant",Ot[Ot.Strict=2]="Strict";var Yt=W_.createSymbolTable();Yt.set(v.escapedName,v);var Xt=W_.and(xd,function(e){return!W_.isAccessor(e)});return function(){for(var e=0,t=h.getSourceFiles();e<t.length;e++){var n=t[e];W_.bindSourceFile(n,O)}for(var o,r=0,i=h.getSourceFiles();r<i.length;r++){var n=i[r];if(W_.isExternalOrCommonJsModule(n)||nn($e,n.locals),n.patternAmbientModules&&n.patternAmbientModules.length&&(pe=W_.concatenate(pe,n.patternAmbientModules)),n.moduleAugmentations.length&&(o||(o=[])).push(n.moduleAugmentations),n.symbol&&n.symbol.globalExports){var a=n.symbol.globalExports;a.forEach(function(e,t){$e.has(t)||$e.set(t,e)})}}if(o)for(var s=0,l=o;s<l.length;s++)for(var c=l[s],u=0,g=c;u<g.length;u++){var p=g[u];on(p)}var d,_,f;d=$e,_=Yt,f=W_.Diagnostics.Declaration_name_conflicts_with_built_in_global_identifier_0,_.forEach(function(e,t){var n,o,r=d.get(t);r?W_.forEach(r.declarations,(n=W_.unescapeLeadingUnderscores(t),o=f,function(e){return Tt.add(W_.createDiagnosticForNode(e,o,n))})):d.set(t,e)}),rn(v).type=V,rn(B).type=ea("IArguments",0,!0),rn(N).type=H,fe=ea("Array",1,!0),de=ea("Object",0,!0),_e=ea("Function",0,!0),me=ea("String",0,!0),ye=ea("Number",0,!0),ve=ea("Boolean",0,!0),be=ea("RegExp",0,!0),Te=ma(F),Ee=ma(U),he=ua("ReadonlyArray",1),Se=he?pa(he,[F]):Te,ke=ua("ThisType",1)}(),b;function Jt(){return Et||(Et="React",O.jsxFactory?(St=W_.parseIsolatedEntityName(O.jsxFactory,w))&&(Et=vd(St).escapedText):O.reactNamespace&&(Et=W_.escapeLeadingUnderscores(O.reactNamespace))),Et}function qt(e,t,n,o,r){var i=e?W_.createDiagnosticForNode(e,t,n,o,r):W_.createCompilerDiagnostic(t,n,o,r);Tt.add(i)}function Zt(e,t){i++;var n=new o(33554432|e,t);return n.checkFlags=0,n}function $t(e){return 0!=(33554432&e.flags)}function Qt(e,t){t.mergeId||(t.mergeId=z_,z_++),ut[t.mergeId]=e}function en(e){var t=Zt(e.flags,e.escapedName);return t.declarations=e.declarations?e.declarations.slice():[],t.parent=e.parent,e.valueDeclaration&&(t.valueDeclaration=e.valueDeclaration),e.constEnumOnlyModule&&(t.constEnumOnlyModule=!0),e.members&&(t.members=W_.cloneMap(e.members)),e.exports&&(t.exports=W_.cloneMap(e.exports)),Qt(t,e),t}function tn(e,t){if(e.flags&(o=t.flags,r=0,2&o&&(r|=107455),1&o&&(r|=107454),4&o&&(r|=0),8&o&&(r|=900095),16&o&&(r|=106927),32&o&&(r|=899519),64&o&&(r|=792968),256&o&&(r|=899327),128&o&&(r|=899967),512&o&&(r|=106639),8192&o&&(r|=99263),32768&o&&(r|=41919),65536&o&&(r|=74687),262144&o&&(r|=530920),524288&o&&(r|=793064),2097152&o&&(r|=2097152),r))if(1024&e.flags)qt(W_.getNameOfDeclaration(t.declarations[0]),W_.Diagnostics.Cannot_augment_module_0_with_value_exports_because_it_resolves_to_a_non_module_entity,po(e));else{var n=2&e.flags||2&t.flags?W_.Diagnostics.Cannot_redeclare_block_scoped_variable_0:W_.Diagnostics.Duplicate_identifier_0;W_.forEach(t.declarations,function(e){qt(W_.getNameOfDeclaration(e)||e,n,po(t))}),W_.forEach(e.declarations,function(e){qt(W_.getNameOfDeclaration(e)||e,n,po(t))})}else 512&t.flags&&512&e.flags&&e.constEnumOnlyModule&&!t.constEnumOnlyModule&&(e.constEnumOnlyModule=!1),e.flags|=t.flags,t.valueDeclaration&&(!e.valueDeclaration||233===e.valueDeclaration.kind&&233!==t.valueDeclaration.kind)&&(e.valueDeclaration=t.valueDeclaration),W_.addRange(e.declarations,t.declarations),t.members&&(e.members||(e.members=W_.createSymbolTable()),nn(e.members,t.members)),t.exports&&(e.exports||(e.exports=W_.createSymbolTable()),nn(e.exports,t.exports)),Qt(e,t);var o,r}function nn(o,e){e.forEach(function(e,t){var n=o.get(t);n?(33554432&n.flags||(n=en(n),o.set(t,n)),tn(n,e)):o.set(t,e)})}function on(e){var t=e.parent;if(t.symbol.declarations[0]===t)if(W_.isGlobalScopeAugmentation(t))nn($e,t.symbol.exports);else{var n=Nn(e,e,W_.isInAmbientContext(e.parent.parent)?void 0:W_.Diagnostics.Invalid_module_name_in_augmentation_module_0_cannot_be_found,!0);if(!n)return;1920&(n=On(n)).flags?tn(n=33554432&n.flags?n:en(n),t.symbol):qt(e,W_.Diagnostics.Cannot_augment_module_0_because_it_resolves_to_a_non_module_entity,e.text)}else W_.Debug.assert(1<t.symbol.declarations.length)}function rn(e){if(33554432&e.flags)return e;var t=X_(e);return gt[t]||(gt[t]={})}function an(e){var t=Y_(e);return pt[t]||(pt[t]={flags:0})}function sn(e){return 32768&e.flags?e.objectFlags:0}function ln(e){return 265===e.kind&&!W_.isExternalOrCommonJsModule(e)}function cn(e,t,n){if(n){var o=e.get(t);if(o){if(W_.Debug.assert(0==(1&W_.getCheckFlags(o)),"Should never get an instantiated symbol here."),o.flags&n)return o;if(2097152&o.flags){var r=Sn(o);if(r===N||r.flags&n)return o}}}}function un(e,t){var n=W_.getSourceFileOfNode(e),o=W_.getSourceFileOfNode(t);if(n!==o){if(S&&(n.externalModuleIndicator||o.externalModuleIndicator)||!O.outFile&&!O.out||Dl(t)||W_.isInAmbientContext(e))return!0;if(s(t,e))return!0;var r=h.getSourceFiles();return W_.indexOf(r,n)<=W_.indexOf(r,o)}if(e.pos<=t.pos){if(176===e.kind){var i=W_.getAncestor(t,176);return i?W_.findAncestor(i,W_.isBindingElement)!==W_.findAncestor(e,W_.isBindingElement)||e.pos<i.pos:un(W_.getAncestor(e,226),t)}return 226!==e.kind||!function(e,t){var n=W_.getEnclosingBlockScopeContainer(e);switch(e.parent.parent.kind){case 208:case 214:case 216:if(hn(t,e,n))return!0}return W_.isForInOrOfStatement(e.parent.parent)&&hn(t,e.parent.parent.expression,n)}(e,t)}if(246===t.parent.kind||243===t.parent.kind&&t.parent.isExportEquals)return!0;if(243===t.kind&&t.isExportEquals)return!0;var a=W_.getEnclosingBlockScopeContainer(e);return Dl(t)||s(t,e,a);function s(t,n,o){return!!W_.findAncestor(t,function(e){if(e===o)return"quit";if(W_.isFunctionLike(e))return!0;if(e.parent&&149===e.parent.kind&&e.parent.initializer===e)if(W_.hasModifier(e.parent,32)){if(151===n.kind)return!0}else if(149!==n.kind||W_.hasModifier(n,32)||W_.getContainingClass(t)!==W_.getContainingClass(n))return!0})}}function gn(e,t,n,o,r,i,a){return pn(e,t,n,o,r,i,cn,a)}function pn(e,t,n,o,r,i,a,s){var l,c,u,g,p,d=e,_=e,f=!1;e:for(;e;){if(e.locals&&!ln(e)&&(l=a(e.locals,t,n))){var h=!0;if(W_.isFunctionLike(e)&&c&&c!==e.body&&(n&l.flags&793064&&275!==c.kind&&(h=!!(262144&l.flags)&&(c===e.type||146===c.kind||145===c.kind)),107455&n&&1&l.flags&&(h=146===c.kind||c===e.type&&146===l.valueDeclaration.kind)),h)break e;l=void 0}switch(e.kind){case 265:if(!W_.isExternalOrCommonJsModule(e))break;f=!0;case 233:var m=Vn(e).exports;if(265===e.kind||W_.isAmbientModule(e)){if(l=m.get("default")){var y=W_.getLocalSymbolForExportDefault(l);if(y&&l.flags&n&&y.escapedName===t)break e;l=void 0}var v=m.get(t);if(v&&2097152===v.flags&&W_.getDeclarationOfKind(v,246))break}if(l=a(m,t,2623475&n))break e;break;case 232:if(l=a(Vn(e).exports,t,8&n))break e;break;case 149:case 148:if(W_.isClassLike(e.parent)&&!W_.hasModifier(e,32)){var b=jn(e.parent);b&&b.locals&&a(b.locals,t,107455&n)&&(g=e)}break;case 229:case 199:case 230:if(l=a(Vn(e).members,t,793064&n)){if(!_n(l,e)){l=void 0;break}if(c&&W_.hasModifier(c,32))return void qt(_,W_.Diagnostics.Static_members_cannot_reference_class_type_parameters);break e}if(199===e.kind&&32&n){var k=e.name;if(k&&t===k.escapedText){l=e.symbol;break e}}break;case 201:if(c===e.expression&&85===e.parent.token){var T=e.parent.parent;if(W_.isClassLike(T)&&(l=a(Vn(T).members,t,793064&n)))return void(o&&qt(_,W_.Diagnostics.Base_class_expressions_cannot_reference_class_type_parameters))}break;case 144:if(p=e.parent.parent,(W_.isClassLike(p)||230===p.kind)&&(l=a(Vn(p).members,t,793064&n)))return void qt(_,W_.Diagnostics.A_computed_property_name_cannot_reference_a_type_parameter_from_its_containing_type);break;case 151:case 150:case 152:case 153:case 154:case 228:case 187:if(3&n&&"arguments"===t){l=B;break e}break;case 186:if(3&n&&"arguments"===t){l=B;break e}if(16&n){var E=e.name;if(E&&t===E.escapedText){l=e.symbol;break e}}break;case 147:e.parent&&146===e.parent.kind&&(e=e.parent),e.parent&&W_.isClassElement(e.parent)&&(e=e.parent)}207!==e.kind&&(u=e),e=(c=e).parent}if(i&&l&&o&&D&&l!==u.symbol&&(l.isReferenced=!0),!l){if(c&&(W_.Debug.assert(265===c.kind),c.commonJsModuleIndicator&&"exports"===t))return c.symbol;l=a($e,t,n)}if(l){if(o){if(g){var S=g.name;return void qt(_,W_.Diagnostics.Initializer_of_instance_member_variable_0_cannot_reference_identifier_1_declared_in_the_constructor,W_.declarationNameToString(S),dn(r))}if(_&&(2&n||(32&n||384&n)&&107455==(107455&n))){var C=Kn(l);(2&C.flags||32&C.flags||384&C.flags)&&function(e,t){W_.Debug.assert(!!(2&e.flags||32&e.flags||384&e.flags));var n=W_.forEach(e.declarations,function(e){return W_.isBlockOrCatchScoped(e)||W_.isClassLike(e)||232===e.kind?e:void 0});W_.Debug.assert(void 0!==n,"Declaration to checkResolvedBlockScopedVariable is undefined"),W_.isInAmbientContext(n)||un(n,t)||(2&e.flags?qt(t,W_.Diagnostics.Block_scoped_variable_0_used_before_its_declaration,W_.declarationNameToString(W_.getNameOfDeclaration(n))):32&e.flags?qt(t,W_.Diagnostics.Class_0_used_before_its_declaration,W_.declarationNameToString(W_.getNameOfDeclaration(n))):256&e.flags&&qt(t,W_.Diagnostics.Enum_0_used_before_its_declaration,W_.declarationNameToString(W_.getNameOfDeclaration(n))))}(C,_)}if(l&&f&&107455==(107455&n)){var x=l.declarations;x&&1===x.length&&236===x[0].kind&&qt(_,W_.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead,W_.unescapeLeadingUnderscores(t))}}return l}if(o&&(!_||!(function(e,t,n){if(71===e.kind&&Rd(e)||Dl(e))return!1;for(var o=W_.getThisContainer(e,!0),r=o;r;){if(W_.isClassLike(r.parent)){var i=Vn(r.parent);if(!i)break;var a=qo(i);if(si(a,t))return qt(e,W_.Diagnostics.Cannot_find_name_0_Did_you_mean_the_static_member_1_0,dn(n),po(i)),!0;if(r===o&&!W_.hasModifier(r,32)){var s=br(i).thisType;if(si(s,t))return qt(e,W_.Diagnostics.Cannot_find_name_0_Did_you_mean_the_instance_member_this_0,dn(n)),!0}}r=r.parent}return!1}(_,t,r)||fn(_)||function(e,t,n){if(1920===n){var o=En(gn(e,t,792640,void 0,void 0,!1)),r=e.parent;if(o){if(W_.isQualifiedName(r)){W_.Debug.assert(r.left===e,"Should only be resolving left side of qualified name as a namespace");var i=r.right.escapedText,a=si(br(o),i);if(a)return qt(r,W_.Diagnostics.Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_property_1_in_0_with_0_1,W_.unescapeLeadingUnderscores(t),W_.unescapeLeadingUnderscores(i)),!0}return qt(e,W_.Diagnostics._0_only_refers_to_a_type_but_is_being_used_as_a_namespace_here,W_.unescapeLeadingUnderscores(t)),!0}}return!1}(_,t,n)||function(e,t,n){if(107455&n){if("any"===t||"string"===t||"number"===t||"boolean"===t||"never"===t)return qt(e,W_.Diagnostics._0_only_refers_to_a_type_but_is_being_used_as_a_value_here,W_.unescapeLeadingUnderscores(t)),!0;var o=En(gn(e,t,792640,void 0,void 0,!1));if(o&&!(1024&o.flags))return qt(e,W_.Diagnostics._0_only_refers_to_a_type_but_is_being_used_as_a_value_here,W_.unescapeLeadingUnderscores(t)),!0}return!1}(_,t,n)||function(e,t,n){if(107031&n){var o=En(gn(e,t,1024,void 0,void 0,!1));if(o)return qt(e,W_.Diagnostics.Cannot_use_namespace_0_as_a_value,W_.unescapeLeadingUnderscores(t)),!0}else if(792640&n){var o=En(gn(e,t,1024,void 0,void 0,!1));if(o)return qt(e,W_.Diagnostics.Cannot_use_namespace_0_as_a_type,W_.unescapeLeadingUnderscores(t)),!0}return!1}(_,t,n)))){var A=void 0;s&&lt<ct&&(A=Bu(d,t,n))&&qt(_,s,dn(r),A),A||qt(_,o,dn(r)),lt++}}function dn(e){return W_.isString(e)?W_.unescapeLeadingUnderscores(e):W_.declarationNameToString(e)}function _n(e,t){for(var n=0,o=e.declarations;n<o.length;n++){var r=o[n];if(145===r.kind&&r.parent===t)return!0}return!1}function fn(e){var t=function e(t){switch(t.kind){case 71:case 179:return t.parent?e(t.parent):void 0;case 201:if(W_.isEntityNameExpression(t.expression))return t.expression;default:return}}(e),n=!(!t||!Bn(t,64,!0));return n&&qt(e,W_.Diagnostics.Cannot_extend_an_interface_0_Did_you_mean_implements,W_.getTextOfNode(t)),n}function hn(e,t,n){return t&&!!W_.findAncestor(e,function(e){return e===n||W_.isFunctionLike(e)?"quit":e===t})}function mn(e){switch(e.kind){case 237:return e;case 239:return e.parent;case 240:return e.parent.parent;case 242:return e.parent.parent.parent;default:return}}function yn(e){return W_.find(e.declarations,W_.isAliasSymbolDeclaration)}function vn(e,t,n){var o=In(e,e.moduleSpecifier),r=Rn(o,e.moduleSpecifier,n);if(r){var i=t.propertyName||t.name;if(i.escapedText){if(W_.isShorthandAmbientModuleSymbol(o))return o;var a=void 0;a=En(a=o&&o.exports&&o.exports.get("export=")?si(qo(r),i.escapedText):function(e,t){if(3&e.flags){var n=e.valueDeclaration.type;if(n)return En(si($a(n),t))}}(r,i.escapedText),n);var s=function(e,t,n){if(1536&e.flags)return En(Fn(e).get(t),n)}(r,i.escapedText,n);!s&&d&&"default"===i.escapedText&&(s=On(o,n)||En(o,n));var l=s&&a?function(e,t){if(e===N&&t===N)return N;if(794600&e.flags)return e;var n=Zt(e.flags|t.flags,e.escapedName);return n.declarations=W_.concatenate(e.declarations,t.declarations),n.parent=e.parent||t.parent,e.valueDeclaration&&(n.valueDeclaration=e.valueDeclaration),t.members&&(n.members=t.members),e.exports&&(n.exports=e.exports),n}(a,s):s||a;return l||qt(i,W_.Diagnostics.Module_0_has_no_exported_member_1,Dn(o),W_.declarationNameToString(i)),l}}}function bn(e,t,n){return e.parent.parent.moduleSpecifier?vn(e.parent.parent,e,n):Bn(e.propertyName||e.name,t,!1,n)}function kn(e,t){switch(e.kind){case 237:return u=t,248===(c=e).moduleReference.kind?On(In(c,W_.getExternalModuleImportEqualsDeclarationExpression(c))):An(c.moduleReference,u);case 239:return function(e,t){var n=In(e,e.parent.moduleSpecifier);if(n){var o=void 0;if(W_.isShorthandAmbientModuleSymbol(n))o=n;else{var r=n.exports.get("export=");o=r?si(qo(r),"default"):En(n.exports.get("default"),t)}if(o||d){if(!o&&d)return On(n,t)||En(n,t)}else qt(e.name,W_.Diagnostics.Module_0_has_no_default_export,po(n));return o}}(e,t);case 240:return s=t,l=(a=e).parent.parent.moduleSpecifier,Rn(In(a,l),l,s);case 242:return i=t,vn((r=e).parent.parent.parent,r,i);case 246:return bn(e,901119,t);case 243:return o=t,Bn(e.expression,901119,!1,o);case 236:return n=t,On(e.parent.symbol,n)}var n,o,r,i,a,s,l,c,u}function Tn(e,t){return void 0===t&&(t=901119),e&&2097152==(e.flags&(2097152|t))}function En(e,t){return!t&&Tn(e)?Sn(e):e}function Sn(e){W_.Debug.assert(0!=(2097152&e.flags),"Should only get Alias here.");var t=rn(e);if(t.target)t.target===L&&(t.target=N);else{t.target=L;var n=yn(e);W_.Debug.assert(!!n);var o=kn(n);t.target===L?t.target=o||N:qt(n,W_.Diagnostics.Circular_definition_of_import_alias_0,po(e))}return t.target}function Cn(e){var t=Vn(e),n=Sn(t);n&&(n===N||107455&n.flags&&!$d(n))&&xn(t)}function xn(e){var t=rn(e);if(!t.referenced){t.referenced=!0;var n=yn(e);W_.Debug.assert(!!n),243===n.kind?zg(n.expression):246===n.kind?zg(n.propertyName||n.name):W_.isInternalModuleImportEqualsDeclaration(n)&&zg(n.moduleReference)}}function An(e,t){return 71===e.kind&&W_.isRightSideOfQualifiedNameOrPropertyAccess(e)&&(e=e.parent),71===e.kind||143===e.parent.kind?Bn(e,1920,!1,t):(W_.Debug.assert(237===e.parent.kind),Bn(e,901119,!1,t))}function Dn(e){return e.parent?Dn(e.parent)+"."+po(e):po(e)}function Bn(e,t,n,o,r){if(!W_.nodeIsMissing(e)){var i;if(71===e.kind){var a=1920===t?W_.Diagnostics.Cannot_find_namespace_0:W_.Diagnostics.Cannot_find_name_0;if(!(i=gn(r||e,e.escapedText,t,n?void 0:a,e,!0)))return}else if(143===e.kind||179===e.kind){var s=void 0;if(143===e.kind)s=e.left;else{if(179!==e.kind||185!==e.expression.kind&&!W_.isEntityNameExpression(e.expression))return;s=e.expression}var l=143===e.kind?e.right:e.name,c=Bn(s,1920,n,!1,r);if(!c||W_.nodeIsMissing(l))return;if(c===N)return c;if(!(i=cn(Fn(c),l.escapedText,t)))return void(n||qt(l,W_.Diagnostics.Namespace_0_has_no_exported_member_1,Dn(c),W_.declarationNameToString(l)))}else{if(185===e.kind)return W_.isEntityNameExpression(e.expression)?Bn(e.expression,t,n,o,r):void 0;W_.Debug.assertNever(e,"Unknown entity name kind.")}return W_.Debug.assert(0==(1&W_.getCheckFlags(i)),"Should never get an instantiated symbol here."),i.flags&t||o?i:Sn(i)}}function In(e,t){return Nn(e,t,W_.Diagnostics.Cannot_find_module_0)}function Nn(e,t,n,o){if(void 0===o&&(o=!1),9===t.kind||13===t.kind){var r=t;return wn(e,r.text,n,r,o)}}function wn(e,t,n,o,r){if(void 0===r&&(r=!1),void 0!==t){W_.startsWith(t,"@types/")&&qt(o,W_.Diagnostics.Cannot_import_type_declaration_files_Consider_importing_0_instead_of_1,W_.removePrefix(t,"@types/"),t);var i=mi(t,!0);if(i)return i;var a=W_.getResolvedModule(W_.getSourceFileOfNode(e),t),s=a&&W_.getResolutionDiagnostic(O,a),l=a&&!s&&h.getSourceFile(a.resolvedFileName);if(l)return l.symbol?Gn(l.symbol):void(n&&qt(o,W_.Diagnostics.File_0_is_not_a_module,l.fileName));if(pe){var c=W_.findBestPatternMatch(pe,function(e){return e.pattern},t);if(c)return Gn(c.symbol)}if(a&&!W_.extensionIsTypeScript(a.extension)&&void 0===s||s===W_.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type){if(r)qt(o,W_.Diagnostics.Invalid_module_name_in_augmentation_Module_0_resolves_to_an_untyped_module_at_1_which_cannot_be_augmented,t,a.resolvedFileName);else if(y&&n){var u=a.isExternalLibraryImport?W_.chainDiagnosticMessages(void 0,W_.Diagnostics.Try_npm_install_types_Slash_0_if_it_exists_or_add_a_new_declaration_d_ts_file_containing_declare_module_0,t):void 0;u=W_.chainDiagnosticMessages(u,W_.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type,t,a.resolvedFileName),Tt.add(W_.createDiagnosticForNodeFromMessageChain(o,u))}}else if(n)if(s)qt(o,s,t,a.resolvedFileName);else{var g=W_.tryExtractTypeScriptExtension(t);g?qt(o,W_.Diagnostics.An_import_path_cannot_end_with_a_0_extension_Consider_importing_1_instead,g,W_.removeExtension(t,g)):qt(o,n,t)}}}function On(e,t){return e&&Gn(En(e.exports.get("export="),t))||e}function Rn(e,t,n){var o=On(e,n);return n||!o||1539&o.flags||qt(t,W_.Diagnostics.Module_0_resolves_to_a_non_module_entity_and_cannot_be_imported_using_this_construct,po(e)),o}function Ln(e){return void 0!==e.exports.get("export=")}function Pn(e){return fi(Un(e))}function Mn(e,t){var n=Un(t);if(n)return n.get(e)}function Fn(e){return 1536&e.flags?Un(e):e.exports||m}function Un(e){var g,t=rn(e);return t.resolvedExports||(t.resolvedExports=(g=[],function e(t){if(t&&1952&t.flags&&W_.pushIfUnique(g,t)){var a=W_.cloneMap(t.exports),n=t.exports.get("__export");if(n){for(var o=W_.createSymbolTable(),s=W_.createMap(),r=0,i=n.declarations;r<i.length;r++){var l=i[r],c=In(l,l.moduleSpecifier),u=e(c);Hn(o,u,s,l)}s.forEach(function(e,t){var n=e.exportsWithDuplicate;if("export="!==t&&n&&n.length&&!a.has(t))for(var o=0,r=n;o<r.length;o++){var i=r[o];Tt.add(W_.createDiagnosticForNode(i,W_.Diagnostics.Module_0_has_already_exported_a_member_named_1_Consider_explicitly_re_exporting_to_resolve_the_ambiguity,s.get(t).specifierText,W_.unescapeLeadingUnderscores(t)))}}),Hn(a,o)}return a}}(On(e))||m))}function Hn(r,e,i,a){e&&e.forEach(function(e,t){if("default"!==t){var n=r.get(t);if(n){if(i&&a&&n&&En(n)!==En(e)){var o=i.get(t);o.exportsWithDuplicate?o.exportsWithDuplicate.push(a):o.exportsWithDuplicate=[a]}}else r.set(t,e),i&&a&&i.set(t,{specifierText:W_.getTextOfNode(a.moduleSpecifier)})}})}function Gn(e){var t;return e&&e.mergeId&&(t=ut[e.mergeId])?t:e}function Vn(e){return Gn(e.symbol)}function Wn(e){return Gn(e.parent)}function Kn(e){return e&&0!=(1048576&e.flags)?Gn(e.exportSymbol):e}function zn(e){return!!(107455&e.flags||2097152&e.flags&&107455&Sn(e).flags)}function jn(e){for(var t=0,n=e.members;t<n.length;t++){var o=n[t];if(152===o.kind&&W_.nodeIsPresent(o.body))return o}}function Yn(e){var t=new n(b,e);return r++,t.id=r,t}function Xn(e,t){var n=Yn(e);return n.intrinsicName=t,n}function Jn(e,t){var n=Yn(32768);return n.objectFlags=e,n.symbol=t,n}function qn(e){return 95===e.charCodeAt(0)&&95===e.charCodeAt(1)&&95!==e.charCodeAt(2)&&64!==e.charCodeAt(2)}function Zn(e){var n;return e.forEach(function(e,t){qn(t)||(n||(n=[]),zn(e)&&n.push(e))}),n||W_.emptyArray}function $n(e,t,n,o,r,i){return e.members=t,e.properties=Zn(t),e.callSignatures=n,e.constructSignatures=o,r&&(e.stringIndexInfo=r),i&&(e.numberIndexInfo=i),e}function Qn(e,t,n,o,r,i){return $n(Jn(16,e),t,n,o,r,i)}function eo(e,t){for(var n,o=e;o;o=o.parent){if(o.locals&&!ln(o)&&(n=t(o.locals)))return n;switch(o.kind){case 265:if(!W_.isExternalOrCommonJsModule(o))break;case 233:if(n=t(Vn(o).exports))return n}}return t($e)}function to(e){return 107455===e?107455:1920}function no(o,r,i,a){if(o&&!function(e){if(e.declarations&&e.declarations.length){for(var t=0,n=e.declarations;t<n.length;t++){var o=n[t];switch(o.kind){case 149:case 151:case 153:case 154:continue;default:return!1}}return!0}return!1}(o)){var s=[];return eo(r,l)}function l(e){if(W_.pushIfUnique(s,e)){var t=u((n=e).get(o.escapedName))?[o]:W_.forEachEntry(n,function(e){if(2097152&e.flags&&"export="!==e.escapedName&&!W_.getDeclarationOfKind(e,246)&&!((o=e)&&o.declarations&&o.declarations[0]&&W_.isNamespaceExportDeclaration(o.declarations[0])&&r&&W_.isExternalModule(W_.getSourceFileOfNode(r)))&&(!a||W_.some(e.declarations,W_.isExternalModuleImportEqualsDeclaration))){var t=Sn(e);if(u(e,t))return[e];var n=t.exports?l(t.exports):void 0;if(n&&c(e,to(i)))return[e].concat(n)}var o});return s.pop(),t}var n}function c(e,t){return!oo(e,r,t)||!!no(e.parent,r,to(t),a)}function u(e,t){return o===(t||e)&&!W_.some(e.declarations,ao)&&c(e,i)}}function oo(n,e,o){var r=!1;return eo(e,function(e){var t=e.get(n.escapedName);return!!t&&(t===n||!!((t=2097152&t.flags&&!W_.getDeclarationOfKind(t,246)?Sn(t):t).flags&o)&&(r=!0))}),r}function ro(e,t){return 0===io(e,t,793064,!1).accessibility}function io(e,t,n,o){if(e&&t&&!(262144&e.flags)){for(var r=e,i=n;e;){var a=no(e,t,i,!1);if(a){var s=so(a[0],o);return s||{accessibility:1,errorSymbolName:po(r,t,n),errorModuleName:e!==r?po(e,t,1920):void 0}}i=to(n),e=Wn(e)}var l=W_.forEach(r.declarations,c);return l&&l!==c(t)?{accessibility:2,errorSymbolName:po(r,t,n),errorModuleName:po(l)}:{accessibility:1,errorSymbolName:po(r,t,n)}}return{accessibility:0};function c(e){var t=W_.findAncestor(e,ao);return t&&Vn(t)}}function ao(e){return W_.isAmbientModule(e)||265===e.kind&&W_.isExternalOrCommonJsModule(e)}function so(e,n){var o;if(!W_.forEach(e.declarations,function(e){return!function(e){if(!So(e)){var t=mn(e);return!(!t||W_.hasModifier(t,1)||!So(t.parent)||(n&&(an(e).isVisible=!0,o=W_.appendIfUnique(o,t)),0))}return!0}(e)}))return{accessibility:0,aliasesToMakeVisible:o}}function lo(e,t){var n;n=162===e.parent.kind||W_.isExpressionWithTypeArgumentsInClassExtendsClause(e.parent)?1156031:143===e.kind||179===e.kind||237===e.parent.kind?1920:793064;var o=vd(e),r=gn(t,o.escapedText,n,void 0,void 0,!1);return r&&so(r,!0)||{accessibility:1,errorSymbolName:W_.getTextOfNode(o),errorNode:o}}function co(e,t){e.writeKeyword(W_.tokenToString(t))}function uo(e,t){e.writePunctuation(W_.tokenToString(t))}function go(e){e.writeSpace(" ")}function po(t,n,o){return W_.usingSingleLineStringWriter(function(e){Eo().buildSymbolDisplay(t,e,n,o)})}function _o(t,n,o,r){return W_.usingSingleLineStringWriter(function(e){Eo().buildSignatureDisplay(t,e,n,o,r)})}function fo(e,t,n){var o,r,i=f.typeToTypeNode(e,t,(o=n,r=W_.NodeBuilderFlags.None,o&&(8&o&&(r|=W_.NodeBuilderFlags.NoTruncation),256&o&&(r|=W_.NodeBuilderFlags.UseFullyQualifiedType),4096&o&&(r|=W_.NodeBuilderFlags.SuppressAnyReturnType),1&o&&(r|=W_.NodeBuilderFlags.WriteArrayAsGenericType),64&o&&(r|=W_.NodeBuilderFlags.WriteTypeArgumentsOfSignature)),r|W_.NodeBuilderFlags.IgnoreErrors|W_.NodeBuilderFlags.WriteTypeParametersInQualifiedName));W_.Debug.assert(void 0!==i,"should always get typenode");var a=W_.createTextWriter(""),s=W_.createPrinter({removeComments:!0}),l=t&&W_.getSourceFileOfNode(t);s.writeNode(4,i,l,a);var c=a.getText(),u=O.noErrorTruncation||8&n?void 0:100;return u&&c.length>=u?c.substr(0,u-"...".length)+"...":c}function ho(t,n,o){return W_.usingSingleLineStringWriter(function(e){Eo().buildTypePredicateDisplay(t,e,n,o)})}function mo(e){for(var t=[],n=0,o=0;o<e.length;o++){var r=e[o];if(n|=r.flags,!(6144&r.flags)){if(384&r.flags){var i=128&r.flags?J:hr(r);if(65536&i.flags){var a=i.types.length;if(o+a<=e.length&&e[o+a-1]===i.types[a-1]){t.push(i),o+=a-1;continue}}}t.push(r)}}return 4096&n&&t.push(W),2048&n&&t.push(G),t||e}function yo(e){return 8===e?"private":16===e?"protected":"public"}function vo(e){if(e.symbol&&2048&e.symbol.flags){var t=W_.findAncestor(e.symbol.declarations[0].parent,function(e){return 168!==e.kind});if(231===t.kind)return Vn(t)}}function bo(e){return e&&e.parent&&234===e.parent.kind&&W_.isExternalModuleAugmentation(e.parent.parent)}function ko(e){return 32&e.flags?'"'+W_.escapeString(e.value)+'"':""+e.value}function To(e,t){if(e.declarations&&e.declarations.length){var n=e.declarations[0],o=W_.getNameOfDeclaration(n);if(o)return W_.declarationNameToString(o);if(n.parent&&226===n.parent.kind)return W_.declarationNameToString(n.parent.name);switch(!t||t.encounteredError||t.flags&W_.NodeBuilderFlags.AllowAnonymousIdentifier||(t.encounteredError=!0),n.kind){case 199:return"(Anonymous class)";case 186:case 187:return"(Anonymous function)"}}if(e.syntheticLiteralTypeOrigin){var r=e.syntheticLiteralTypeOrigin.value;if(!W_.isIdentifierText(r,O.target))return'"'+W_.escapeString(r,34)+'"'}return W_.symbolName(e)}function Eo(){function p(e,t){t.writeSymbol(To(e),e)}function l(e,i,l,t,c,n){var u;function g(e){var t,n,o,r;u?(1&c&&(1&W_.getCheckFlags(e)?f(rr(2097152&u.flags?Sn(u):u),e.mapper,i,l):a(u,i,l)),n=i,o=To(t=e),r=o.charCodeAt(0),W_.isIdentifierStart(r,w)?(uo(n,23),n.writeSymbol(o,t)):(uo(n,21),W_.isSingleOrDoubleQuote(r)?n.writeStringLiteral(o):n.writeSymbol(o,t),uo(n,22))):p(e,i),u=e}i.trackSymbol(e,l,t),262144&e.flags||!l&&!(256&n)?g(e):function e(t,n,o){var r=no(t,l,n,!!(2&c));if(!r||oo(r[0],l,1===r.length?n:to(n))){var i=Wn(r?r[0]:t);i&&e(i,to(n),!1)}if(r)for(var a=0,s=r;a<s.length;a++)g(s[a]);else!o&&(!u&&W_.forEach(t.declarations,ao)||6144&t.flags)||g(t)}(e,t,!0)}function s(e,d,_,f,h){var m=16416&f,s=!1;return y(e,f);function y(e,t){var n,o,r=-1025&t;if(16793231&e.flags)d.writeKeyword(32&f||!No(e)?e.intrinsicName:"any");else if(16384&e.flags&&e.isThisType)s&&d.reportInaccessibleThisError(),d.writeKeyword("this");else if(4&sn(e))!function(e,t){var n=e.typeArguments||W_.emptyArray;if(e.target!==fe||1&t)if(8&e.target.objectFlags)uo(d,21),c(e.typeArguments.slice(0,Gi(e)),26),uo(d,22);else if(16384&t&&e.symbol.valueDeclaration&&199===e.symbol.valueDeclaration.kind)g(e,t);else{var o=e.target.outerTypeParameters,r=0;if(o)for(var i=o.length;r<i;){for(var a=r,s=Pi(o[r]);++r<i&&Pi(o[r])===s;);W_.rangeEquals(o,n,a,r)||(u(s,n,a,r,t),uo(d,23))}var l=(e.target.typeParameters||W_.emptyArray).length;u(e.symbol,n,r,l,t)}else y(n[0],32896),uo(d,21),uo(d,22)}(e,r);else if(256&e.flags&&!(65536&e.flags)){var i=Wn(e.symbol);l(i,d,_,793064,0,r),br(i)!==e&&(uo(d,23),p(e.symbol,d))}else if(3&sn(e)||16656&e.flags)l(e.symbol,d,_,793064,0,r);else if(1024&t||!e.aliasSymbol||!(65536&t||ro(e.aliasSymbol,_)))196608&e.flags?(n=e,128&(o=r)&&uo(d,19),65536&n.flags?c(mo(n.types),49):c(n.types,48),128&o&&uo(d,20)):48&sn(e)?g(e,r):96&e.flags?d.writeStringLiteral(ko(e)):262144&e.flags?(128&t&&uo(d,19),d.writeKeyword("keyof"),go(d),y(e.type,128),128&t&&uo(d,20)):524288&e.flags?(y(e.objectType,128),uo(d,21),y(e.indexType,0),uo(d,22)):(uo(d,17),go(d),uo(d,24),go(d),uo(d,18));else{var a=e.aliasTypeArguments;u(e.aliasSymbol,a,0,W_.length(a),r)}}function c(e,t){for(var n=0;n<e.length;n++)0<n&&(26!==t&&go(d),uo(d,t),go(d)),y(e[n],26===t?0:128)}function u(e,t,n,o,r){if((32&e.flags||!qn(e.escapedName))&&l(e,d,_,793064,0,r),n<o){for(uo(d,27),y(t[n],512),n++;n<o;)uo(d,26),go(d),y(t[n],0),n++;uo(d,29)}}function g(e,n){var o=e.symbol;if(o)if(32&o.flags&&!Xo(o)&&!(199===o.valueDeclaration.kind&&16384&n)||896&o.flags)r(e,n);else if(function(){var e=!!(8192&o.flags)&&W_.some(o.declarations,function(e){return W_.hasModifier(e,32)}),t=!!(16&o.flags)&&(o.parent||W_.some(o.declarations,function(e){return 265===e.parent.kind||234===e.parent.kind}));if(e||t)return!!(4&n)||W_.contains(h,o)}())r(e,n);else if(W_.contains(h,o)){var t=vo(e);t?l(t,d,_,793064,0,n):co(d,119)}else h||(h=[]),16&e.objectFlags&&e.symbol&&32&e.symbol.flags?i(e,n):(h.push(o),i(e,n),h.pop());else i(e,n)}function r(e,t){32768&t&&uo(d,19),co(d,103),go(d),l(e.symbol,d,_,107455,0,t),32768&t&&uo(d,20)}function v(e){Dg(e)&&(co(d,131),go(d)),l(e,d),16777216&e.flags&&uo(d,55)}function i(e,t){if(zr(e))i=e,uo(d,17),d.writeLine(),d.increaseIndent(),i.declaration.readonlyToken&&(co(d,131),go(d)),uo(d,21),p(Vr(i).symbol,d),go(d),co(d,92),go(d),y(Wr(i),0),uo(d,22),i.declaration.questionToken&&uo(d,55),uo(d,56),go(d),y(Kr(i),0),uo(d,25),d.writeLine(),d.decreaseIndent(),uo(d,18);else{var n=jr(e);if(!n.properties.length&&!n.stringIndexInfo&&!n.numberIndexInfo){if(!n.callSignatures.length&&!n.constructSignatures.length)return uo(d,17),void uo(d,18);if(1===n.callSignatures.length&&!n.constructSignatures.length){var o=function(e,t){if(128&t)return!0;if(512&t){var n=e.target&&64&t?e.target.typeParameters:e.typeParameters;return n&&0!==n.length}return!1}(n.callSignatures[0],t);return o&&uo(d,19),b(n.callSignatures[0],d,_,16|m,void 0,h),void(o&&uo(d,20))}if(1===n.constructSignatures.length&&!n.callSignatures.length)return 128&t&&uo(d,19),co(d,94),go(d),b(n.constructSignatures[0],d,_,16|m,void 0,h),void(128&t&&uo(d,20))}var r=s;s=!0,uo(d,17),d.writeLine(),d.increaseIndent(),function(e){for(var t=0,n=e.callSignatures;t<n.length;t++){var o=n[t];b(o,d,_,m,void 0,h),uo(d,25),d.writeLine()}for(var r=0,i=e.constructSignatures;r<i.length;r++){var o=i[r];b(o,d,_,m,1,h),uo(d,25),d.writeLine()}k(e.stringIndexInfo,d,0,_,f,h),k(e.numberIndexInfo,d,1,_,f,h);for(var a=0,s=e.properties;a<s.length;a++){var l=s[a];if(16384&f){if(4194304&l.flags)continue;24&W_.getDeclarationModifierFlagsFromSymbol(l)&&d.reportPrivateInBaseOfClassExpression(W_.symbolName(l))}var c=qo(l);if(8208&l.flags&&!Yr(c).length)for(var u=ci(c,0),g=0,p=u;g<p.length;g++){var o=p[g];v(l),b(o,d,_,m,void 0,h),uo(d,25),d.writeLine()}else v(l),uo(d,56),go(d),y(c,16384&f),uo(d,25),d.writeLine()}}(n),d.decreaseIndent(),uo(d,18),s=r}var i}}function a(e,t,n,o){var r=pd(e);(32&r.flags||64&r.flags||524288&r.flags)&&d(or(e),t,n,o)}function i(e,t,n,o,r){p(e.symbol,t);var i=qr(e);i&&(go(t),co(t,85),go(t),s(i,t,n,o,r));var a=ni(e);a&&(go(t),uo(t,58),go(t),s(a,t,n,o,r))}function c(e,t,n,o,r){var i=e.valueDeclaration;(i?W_.isRestParameter(i):$t(e)&&e.isRestParameter)&&uo(t,24),i&&W_.isBindingPattern(i.name)?u(i.name,t,n,o,r):p(e,t),i&&yi(i)&&uo(t,55),uo(t,56),go(t);var a=qo(e);i&&e_(i)&&(a=il(a,2048)),s(a,t,n,o,r)}function u(e,t,n,o,r){if(174===e.kind)uo(t,17),_(e.elements,t,function(e){return g(e,t,n,o,r)}),uo(t,18);else if(175===e.kind){uo(t,21);var i=e.elements;_(i,t,function(e){return g(e,t,n,o,r)}),i&&i.hasTrailingComma&&uo(t,26),uo(t,22)}}function g(e,t,n,o,r){W_.isOmittedExpression(e)||(W_.Debug.assert(176===e.kind),e.propertyName&&(t.writeProperty(W_.getTextOfNode(e.propertyName)),uo(t,56),go(t)),W_.isBindingPattern(e.name)?u(e.name,t,n,o,r):(e.dotDotDotToken&&uo(t,24),p(e.symbol,t)))}function d(e,t,n,o,r){e&&e.length&&(uo(t,27),_(e,t,function(e){return i(e,t,n,o,r)}),uo(t,29))}function _(e,t,n){for(var o=0;o<e.length;o++)0<o&&(uo(t,26),go(t)),n(e[o])}function f(e,t,n,o){if(e&&e.length){uo(n,27);for(var r=512,i=0;i<e.length;i++)0<i&&(uo(n,26),go(n),r=0),s(t(e[i]),n,o,r);uo(n,29)}}function h(e,t,n,o,r,i){uo(n,19),e&&c(e,n,o,r,i);for(var a=0;a<t.length;a++)(0<a||e)&&(uo(n,26),go(n)),c(t[a],n,o,r,i);uo(n,20)}function m(e,t,n,o,r){W_.isIdentifierTypePredicate(e)?t.writeParameter(e.parameterName):co(t,99),go(t),co(t,126),go(t),s(e.type,t,n,o,r)}function y(e,t,n,o,r){var i=Si(e);4096&o&&No(i)||(16&o?(go(t),uo(t,36)):uo(t,56),go(t),e.typePredicate?m(e.typePredicate,t,n,o,r):s(i,t,n,o,r))}function b(e,t,n,o,r,i){1===r&&(co(t,94),go(t)),e.target&&64&o?f(e.target.typeParameters,e.mapper,t,n):d(e.typeParameters,t,n,o,i),h(e.thisParameter,e.parameters,t,n,o,i),y(e,t,n,o,i)}function k(e,t,n,o,r,i){if(e){switch(e.isReadonly&&(co(t,131),go(t)),uo(t,21),t.writeParameter(e.declaration?W_.declarationNameToString(e.declaration.parameters[0].name):"x"),uo(t,56),go(t),n){case 1:co(t,133);break;case 0:co(t,136)}uo(t,22),uo(t,56),go(t),s(e.type,t,o,r,i),uo(t,25),t.writeLine()}}return At||(At={buildSymbolDisplay:l,buildTypeDisplay:s,buildTypeParameterDisplay:i,buildTypePredicateDisplay:m,buildParameterDisplay:c,buildDisplayForParametersAndDelimiters:h,buildDisplayForTypeParametersAndDelimiters:d,buildTypeParameterDisplayFromSymbol:a,buildSignatureDisplay:b,buildIndexSignatureDisplay:k,buildReturnTypeDisplay:y})}function So(t){if(t){var e=an(t);return void 0===e.isVisible&&(e.isVisible=!!function(){switch(t.kind){case 176:return So(t.parent.parent);case 226:if(W_.isBindingPattern(t.name)&&!t.name.elements.length)return!1;case 233:case 229:case 230:case 231:case 228:case 232:case 237:if(W_.isExternalModuleAugmentation(t))return!0;var e=Bo(t);return 1&W_.getCombinedModifierFlags(t)||237!==t.kind&&265!==e.kind&&W_.isInAmbientContext(e)?So(e):ln(e);case 149:case 148:case 153:case 154:case 151:case 150:if(W_.hasModifier(t,24))return!1;case 152:case 156:case 155:case 157:case 146:case 234:case 160:case 161:case 163:case 159:case 164:case 165:case 166:case 167:case 168:return So(t.parent);case 239:case 240:case 242:return!1;case 145:case 265:case 236:return!0;case 243:default:return!1}}()),e.isVisible}return!1}function Co(e){var t;e.parent&&243===e.parent.kind?t=gn(e.parent,e.escapedText,2998271,W_.Diagnostics.Cannot_find_name_0,e,!1):246===e.parent.kind&&(t=bn(e.parent,2998271));var a=[];return t&&function i(e){W_.forEach(e,function(e){an(e).isVisible=!0;var t=mn(e)||e;if(W_.pushIfUnique(a,t),W_.isInternalModuleImportEqualsDeclaration(e)){var n=e.moduleReference,o=vd(n),r=gn(e,o.escapedText,901119,void 0,void 0,!1);r&&i(r.declarations)}})}(t.declarations),a}function xo(e,t){var n=Ao(e,t);if(0<=n){for(var o=it.length,r=n;r<o;r++)at[r]=!1;return!1}return it.push(e),at.push(!0),st.push(t),!0}function Ao(e,t){for(var n=it.length-1;0<=n;n--){if(o=it[n],0===(r=st[n])?rn(o).type:2===r?rn(o).declaredType:1===r?o.resolvedBaseConstructorType:3===r?o.resolvedReturnType:void W_.Debug.fail("Unhandled TypeSystemPropertyName "+r))return-1;if(it[n]===e&&st[n]===t)return n}var o,r;return-1}function Do(){return it.pop(),st.pop(),at.pop()}function Bo(e){return(e=W_.findAncestor(W_.getRootDeclaration(e),function(e){switch(e.kind){case 226:case 227:case 242:case 241:case 240:case 239:return!1;default:return!0}}))&&e.parent}function Io(e,t){var n=si(e,t);return n?qo(n):void 0}function No(e){return e&&0!=(1&e.flags)}function wo(e){var t=Vn(e);return t&&rn(t).type||Uo(e,!1)}function Oo(e){return 144===e.kind&&!W_.isStringOrNumericLiteral(e.expression)}function Ro(e,t,n){if(8192&(e=Ql(e,function(e){return!(6144&e.flags)})).flags)return te;if(65536&e.flags)return ec(e,function(e){return Ro(e,t,n)});for(var o=W_.createSymbolTable(),r=W_.createUnderscoreEscapedMap(),i=0,a=t;i<a.length;i++){var s=a[i];r.set(W_.getTextOfPropertyName(s),!0)}for(var l=0,c=Jr(e);l<c.length;l++){var u=c[l],g=r.has(u.escapedName),p=24&W_.getDeclarationModifierFlagsFromSymbol(u),d=65536&u.flags&&!(32768&u.flags);g||p||ja(u)||d||o.set(u.escapedName,u)}var _=pi(e,0),f=pi(e,1);return Qn(n,o,W_.emptyArray,W_.emptyArray,_,f)}function Lo(e){var t,n=e.parent,o=wo(n.parent);if(o===H)return H;if(!o)return e.initializer?Yg(e):o;if(No(o))return o;if(174===n.kind)if(e.dotDotDotToken){if(!tu(o))return qt(e,W_.Diagnostics.Rest_types_may_only_be_created_from_object_types),H;for(var r=[],i=0,a=n.elements;i<a.length;i++){var s=a[i];s.dotDotDotToken||r.push(s.propertyName||s.name)}t=Ro(o,r,e.symbol)}else{var l=e.propertyName||e.name;if(Oo(l))return F;var c=W_.getTextOfPropertyName(l),u=Io(o,c);if(!(t=u&&_c(e,u)||Zc(c)&&di(o,1)||di(o,0)))return qt(l,W_.Diagnostics.Type_0_has_no_property_1_and_no_string_index_signature,fo(o),W_.declarationNameToString(l)),H}else{var g=$p(o,n,!1,!1);if(e.dotDotDotToken)t=ma(g);else{var p=""+W_.indexOf(n.elements,e);if(!(t=Js(o)?Io(o,p):g))return el(o)?qt(e,W_.Diagnostics.Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2,fo(o),Gi(o),n.elements.length):qt(e,W_.Diagnostics.Type_0_has_no_property_1,fo(o),p),H}}return!A||!e.initializer||2048&nl(zg(e.initializer))||(t=Ml(t,131072)),e.initializer?Aa([t,zg(e.initializer)],!0):t}function Po(e){var t=W_.getJSDocType(e);if(t)return $a(t)}function Mo(e){var t=W_.skipParentheses(e);return 177===t.kind&&0===t.elements.length}function Fo(e,t){return A&&t?il(e,2048):e}function Uo(e,t){if(215===e.parent.parent.kind){var n=wa(Tu(e.parent.parent.expression));return 278528&n.flags?n:z}if(216===e.parent.parent.kind){var o=e.parent.parent;return Zp(o.expression,o.awaitModifier)||F}if(W_.isBindingPattern(e.parent))return Lo(e);var r,i,a=W_.getEffectiveTypeAnnotationNode(e);if(a)return Fo($a(a),e.questionToken&&t);if((y||W_.isInJavaScriptFile(e))&&226===e.kind&&!W_.isBindingPattern(e.name)&&!(1&W_.getCombinedModifierFlags(e))&&!W_.isInAmbientContext(e)){if(!(2&W_.getCombinedNodeFlags(e)||e.initializer&&(r=e.initializer,95!==(i=W_.skipParentheses(r)).kind&&(71!==i.kind||Al(i)!==v))))return U;if(e.initializer&&Mo(e.initializer))return Ee}if(146===e.kind){var s=e.parent;if(154===s.kind&&!W_.hasDynamicName(s)){var l=W_.getDeclarationOfKind(e.parent.symbol,153);if(l){var c=ki(l),u=w_(s);return u&&e===u?(W_.Debug.assert(!u.type),qo(c.thisParameter)):Si(c)}}var g=void 0;if(g="this"===e.symbol.escapedName?Nc(s):wc(e))return Fo(g,e.questionToken&&t)}return e.initializer?Fo(g=Yg(e),e.questionToken&&t):W_.isJsxAttribute(e)?Y:262===e.kind?kc(e.name):W_.isBindingPattern(e.name)?Go(e.name,!1,!0):void 0}function Ho(e,t,n){return e.initializer?Yg(e):W_.isBindingPattern(e.name)?Go(e.name,t,n):(n&&y&&!Wo(e)&&pl(e,F),F)}function Go(e,t,n){return 174===e.kind?function(e,r,i){var a,s=W_.createSymbolTable(),l=!1;W_.forEach(e.elements,function(e){var t=e.propertyName||e.name;if(Oo(t))l=!0;else if(e.dotDotDotToken)a=Oi(F,!1);else{var n=W_.getTextOfPropertyName(t),o=Zt(4|(e.initializer?16777216:0),n);o.type=Ho(e,r,i),o.bindingElement=e,s.set(o.escapedName,o)}});var t=Qn(void 0,s,W_.emptyArray,W_.emptyArray,a,void 0);return r&&(t.pattern=e),l&&(t.objectFlags|=512),t}(e,t,n):function(e,t,n){var o=e.elements,r=W_.lastOrUndefined(o);if(0===o.length||!W_.isOmittedExpression(r)&&r.dotDotDotToken)return 2<=w?fa(F):Te;var i=va(W_.map(o,function(e){return W_.isOmittedExpression(e)?F:Ho(e,t,n)}));return t&&((i=Hi(i)).pattern=e),i}(e,t,n)}function Vo(e,t){var n=Uo(e,!0);return n?(t&&dl(e,n),261===e.kind?n:gl(n)):(n=e.dotDotDotToken?Te:F,t&&y&&(Wo(e)||pl(e,n)),n)}function Wo(e){var t=W_.getRootDeclaration(e);return pp(146===t.kind?t.parent:t)}function Ko(e){var t,n=rn(e);if(!n.type){if(4194304&e.flags)return n.type=(t=br(Wn(e))).typeParameters?Ui(t,W_.map(t.typeParameters,function(e){return F})):t;var o=e.valueDeclaration;if(W_.isCatchClauseVariableDeclarationOrBindingElement(o))return n.type=F;if(243===o.kind)return n.type=$g(o.expression);if(W_.isInJavaScriptFile(o)&&W_.isJSDocPropertyLikeTag(o)&&o.typeExpression)return n.type=$a(o.typeExpression.type);if(!xo(e,0))return H;var r=void 0;r=194===o.kind||179===o.kind&&194===o.parent.kind?function(e){for(var t,n=[],o=!1,r=!1,i=0,a=e.declarations;i<a.length;i++){var s=a[i],l=194===s.kind?s:179===s.kind?W_.getAncestor(s,194):void 0;if(!l)return H;W_.isPropertyAccessExpression(l.left)&&99===l.left.expression.kind&&(152===W_.getThisContainer(l,!1).kind?o=!0:r=!0);var c=Po(l.parent);if(c){var u=gl(c);if(t){if(t!==H&&u!==H&&!fs(t,u)){var g=W_.getNameOfDeclaration(s);qt(g,W_.Diagnostics.Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2,W_.declarationNameToString(g),fo(t),fo(u))}}else t=u}else t||n.push(Qs(zg(l.right)))}return gl(Fo(t||Aa(n,!0),r&&!o))}(e):Vo(o,!0),Do()||(r=Jo(e)),n.type=r}return n.type}function zo(e){if(e){if(153===e.kind){var t=W_.getEffectiveReturnTypeNode(e);return t&&$a(t)}var n=W_.getEffectiveSetAccessorTypeAnnotationNode(e);return n&&$a(n)}}function jo(e){return Ei(ki(e))}function Yo(e){var t=rn(e);if(!t.type){var n=W_.getDeclarationOfKind(e,153),o=W_.getDeclarationOfKind(e,154);if(n&&W_.isInJavaScriptFile(n)){var r=Po(n);if(r)return t.type=r}if(!xo(e,0))return H;var i=void 0,a=zo(n);if(a)i=a;else{var s=zo(o);s?i=s:n&&n.body?i=bg(n):(y&&(o?qt(o,W_.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation,po(e)):(W_.Debug.assert(!!n,"there must existed getter as we are current checking either setter or getter in this function"),qt(n,W_.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation,po(e)))),i=F)}Do()||(i=F,y&&qt(W_.getDeclarationOfKind(e,153),W_.Diagnostics._0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions,po(e))),t.type=i}return t.type}function Xo(e){var t=ur(dr(e));return 540672&t.flags?t:void 0}function Jo(e){return W_.getEffectiveTypeAnnotationNode(e.valueDeclaration)?(qt(e.valueDeclaration,W_.Diagnostics._0_is_referenced_directly_or_indirectly_in_its_own_type_annotation,po(e)),H):(y&&qt(e.valueDeclaration,W_.Diagnostics._0_implicitly_has_type_any_because_it_does_not_have_a_type_annotation_and_is_referenced_directly_or_indirectly_in_its_own_initializer,po(e)),F)}function qo(e){return 1&W_.getCheckFlags(e)?function(e){var t=rn(e);if(!t.type)if(100===a)qt(e.valueDeclaration,W_.Diagnostics.Generic_type_instantiation_is_excessively_deep_and_possibly_infinite),t.type=H;else{if(!xo(e,0))return H;a++;var n=cs(qo(t.target),t.mapper);a--,Do()||(n=Jo(e)),t.type=n}return t.type}(e):7&e.flags?Ko(e):9136&e.flags?function(e){var t=rn(e);if(!t.type)if(1536&e.flags&&W_.isShorthandAmbientModuleSymbol(e))t.type=F;else{var n=Jn(16,e);if(32&e.flags){var o=Xo(e);t.type=o?Ia([n,o]):n}else t.type=A&&16777216&e.flags?il(n,2048):n}return t.type}(e):8&e.flags?((n=rn(t=e)).type||(n.type=yr(t)),n.type):98304&e.flags?Yo(e):2097152&e.flags?function(e){var t=rn(e);if(!t.type){var n=Sn(e);t.type=107455&n.flags?qo(n):H}return t.type}(e):H;var t,n}function Zo(e,t){return void 0!==e&&void 0!==t&&0!=(4&sn(e))&&e.target===t}function $o(e){return 4&sn(e)?e.target:e}function Qo(e,o){return function e(t){if(7&sn(t)){var n=$o(t);return n===o||W_.forEach(gr(n),e)}if(131072&t.flags)return W_.forEach(t.types,e)}(e)}function er(e,t){for(var n=0,o=t;n<o.length;n++){var r=vr(Vn(o[n]));e=W_.appendIfUnique(e,r)}return e}function tr(e,t){for(;;){if(!(e=e.parent))return;switch(e.kind){case 229:case 199:case 230:case 155:case 156:case 150:case 160:case 161:case 273:case 228:case 151:case 186:case 187:case 231:case 282:case 172:var n=tr(e,t);if(172===e.kind)return W_.append(n,vr(Vn(e.typeParameter)));var o=er(n,W_.getEffectiveTypeParameterDeclarations(e)||W_.emptyArray),r=t&&(229===e.kind||199===e.kind||230===e.kind)&&dr(Vn(e)).thisType;return r?W_.append(o,r):o}}}function nr(e){return tr(32&e.flags?e.valueDeclaration:W_.getDeclarationOfKind(e,230))}function or(e){for(var t,n=0,o=e.declarations;n<o.length;n++){var r=o[n];if(230===r.kind||229===r.kind||199===r.kind||231===r.kind){var i=r;i.typeParameters&&(t=er(t,i.typeParameters))}}return t}function rr(e){return W_.concatenate(nr(e),or(e))}function ir(e){var t=ci(e,1);if(1===t.length){var n=t[0];return!n.typeParameters&&1===n.parameters.length&&n.hasRestParameter&&_g(n.parameters[0])===Te}return!1}function ar(e){if(pr(e)&&0<ci(e,1).length)return!0;if(540672&e.flags){var t=$r(e);return t&&pr(t)&&ir(t)}return!1}function sr(e){var t=e.symbol.valueDeclaration;if(W_.isInJavaScriptFile(t)){var n=W_.getJSDocAugmentsTag(t);if(n)return n.class}return W_.getClassExtendsHeritageClauseElement(t)}function lr(e,t,n){var o=W_.length(t),r=W_.isInJavaScriptFile(n);return W_.filter(ci(e,1),function(e){return(r||o>=vi(e.typeParameters))&&o<=W_.length(e.typeParameters)})}function cr(e,t,n){var o=lr(e,t,n),r=W_.map(t,$a);return W_.sameMap(o,function(e){return W_.some(e.typeParameters)?xi(e,r,W_.isInJavaScriptFile(n)):e})}function ur(e){if(!e.resolvedBaseConstructorType){var t=e.symbol.valueDeclaration,n=W_.getClassExtendsHeritageClauseElement(t),o=sr(e);if(!o)return e.resolvedBaseConstructorType=G;if(!xo(e,1))return H;var r=$g(o.expression);if(n&&o!==n&&(W_.Debug.assert(!n.typeArguments),$g(n.expression)),163840&r.flags&&jr(r),!Do())return qt(e.symbol.valueDeclaration,W_.Diagnostics._0_is_referenced_directly_or_indirectly_in_its_own_base_expression,po(e.symbol)),e.resolvedBaseConstructorType=H;if(!(1&r.flags||r===K||ar(r)))return qt(o.expression,W_.Diagnostics.Type_0_is_not_a_constructor_function_type,fo(r)),e.resolvedBaseConstructorType=H;e.resolvedBaseConstructorType=r}return e.resolvedBaseConstructorType}function gr(e){return e.resolvedBaseTypes||(8&e.objectFlags?e.resolvedBaseTypes=[ma(Aa(e.typeParameters))]:96&e.symbol.flags?(32&e.symbol.flags&&function(e){e.resolvedBaseTypes=W_.emptyArray;var t=oi(ur(e));if(163841&t.flags){var n,o=sr(e),r=Ji(o),i=t&&t.symbol?br(t.symbol):void 0;if(t.symbol&&32&t.symbol.flags&&function(e){var t=e.outerTypeParameters;if(t){var n=t.length-1,o=e.typeArguments;return t[n].symbol!==o[n].symbol}return!0}(i))n=Vi(o,t.symbol,r);else if(1&t.flags)n=t;else{var a=cr(t,o.typeArguments,o);if(!a.length)return qt(o.expression,W_.Diagnostics.No_base_constructor_has_the_specified_number_of_type_arguments);n=Si(a[0])}if(n!==H)pr(n)?e===n||Qo(n,e)?qt(e.symbol.valueDeclaration,W_.Diagnostics.Type_0_recursively_references_itself_as_a_base_type,fo(e,void 0,1)):e.resolvedBaseTypes=[n]:qt(o.expression,W_.Diagnostics.Base_constructor_return_type_0_is_not_a_class_or_interface_type,fo(n))}}(e),64&e.symbol.flags&&function(e){e.resolvedBaseTypes=e.resolvedBaseTypes||W_.emptyArray;for(var t=0,n=e.symbol.declarations;t<n.length;t++){var o=n[t];if(230===o.kind&&W_.getInterfaceBaseTypeNodes(o))for(var r=0,i=W_.getInterfaceBaseTypeNodes(o);r<i.length;r++){var a=i[r],s=$a(a);s!==H&&(pr(s)?e===s||Qo(s,e)?qt(o,W_.Diagnostics.Type_0_recursively_references_itself_as_a_base_type,fo(e,void 0,1)):e.resolvedBaseTypes===W_.emptyArray?e.resolvedBaseTypes=[s]:e.resolvedBaseTypes.push(s):qt(a,W_.Diagnostics.An_interface_may_only_extend_a_class_or_another_interface))}}}(e)):W_.Debug.fail("type must be class or interface")),e.resolvedBaseTypes}function pr(e){return 16809985&e.flags&&!zr(e)||131072&e.flags&&!W_.forEach(e.types,function(e){return!pr(e)})}function dr(e){var t=rn(e);if(!t.declaredType){var n=32&e.flags?1:2,o=t.declaredType=Jn(n,e),r=nr(e),i=or(e);(r||i||1===n||!function(e){for(var t=0,n=e.declarations;t<n.length;t++){var o=n[t];if(230===o.kind){if(64&o.flags)return!1;var r=W_.getInterfaceBaseTypeNodes(o);if(r)for(var i=0,a=r;i<a.length;i++){var s=a[i];if(W_.isEntityNameExpression(s.expression)){var l=Bn(s.expression,793064,!0);if(!l||!(64&l.flags)||dr(l).thisType)return!1}}}}return!0}(e))&&(o.objectFlags|=4,o.typeParameters=W_.concatenate(r,i),o.outerTypeParameters=r,o.localTypeParameters=i,o.instantiations=W_.createMap(),o.instantiations.set(Mi(o.typeParameters),o),(o.target=o).typeArguments=o.typeParameters,o.thisType=Yn(16384),o.thisType.isThisType=!0,o.thisType.symbol=e,o.thisType.constraint=o)}return t.declaredType}function _r(e){var t=e.initializer;if(!t)return!W_.isInAmbientContext(e);switch(t.kind){case 9:case 8:return!0;case 192:return 38===t.operator&&8===t.operand.kind;case 71:return W_.nodeIsMissing(t)||!!Vn(e.parent).exports.get(t.escapedText);default:return!1}}function fr(e){var t=rn(e);if(void 0!==t.enumKind)return t.enumKind;for(var n=!1,o=0,r=e.declarations;o<r.length;o++){var i=r[o];if(232===i.kind)for(var a=0,s=i.members;a<s.length;a++){var l=s[a];if(l.initializer&&9===l.initializer.kind)return t.enumKind=1;_r(l)||(n=!0)}}return t.enumKind=n?0:1}function hr(e){return 256&e.flags&&!(65536&e.flags)?br(Wn(e.symbol)):e}function mr(e){var t=rn(e);if(t.declaredType)return t.declaredType;if(1===fr(e)){p++;for(var n=[],o=0,r=e.declarations;o<r.length;o++){var i=r[o];if(232===i.kind)for(var a=0,s=i.members;a<s.length;a++){var l=s[a],c=qa(o_(l),p,Vn(l));rn(Vn(l)).declaredType=c,n.push(c)}}if(n.length){var u=Aa(n,!1,e,void 0);return 65536&u.flags&&(u.flags|=256,u.symbol=e),t.declaredType=u}}var g=Yn(16);return g.symbol=e,t.declaredType=g}function yr(e){var t=rn(e);if(!t.declaredType){var n=mr(Wn(e));t.declaredType||(t.declaredType=n)}return t.declaredType}function vr(e){var t=rn(e);if(!t.declaredType){var n=Yn(16384);n.symbol=e,t.declaredType=n}return t.declaredType}function br(e){return kr(e)||H}function kr(e){return 96&e.flags?dr(e):524288&e.flags?function(e){var t=rn(e);if(!t.declaredType){if(!xo(e,2))return H;var n=W_.find(e.declarations,function(e){return 283===e.kind||231===e.kind}),o=283===n.kind?n.typeExpression:n.type,r=o?$a(o):H;if(Do()){var i=or(e);i&&(t.typeParameters=i,t.instantiations=W_.createMap(),t.instantiations.set(Mi(i),r))}else r=H,qt(n.name,W_.Diagnostics.Type_alias_0_circularly_references_itself,po(e));t.declaredType=r}return t.declaredType}(e):262144&e.flags?vr(e):384&e.flags?mr(e):8&e.flags?yr(e):2097152&e.flags?((n=rn(t=e)).declaredType||(n.declaredType=br(Sn(t))),n.declaredType):void 0;var t,n}function Tr(e){switch(e.kind){case 119:case 136:case 133:case 122:case 137:case 134:case 105:case 139:case 95:case 130:case 173:return!0;case 164:return Tr(e.elementType);case 159:return function(e){if(e.typeArguments)for(var t=0,n=e.typeArguments;t<n.length;t++)if(!Tr(n[t]))return!1;return!0}(e)}return!1}function Er(e){var t=W_.getEffectiveTypeAnnotationNode(e);return t?Tr(t):!e.initializer}function Sr(e){if(e.declarations&&1===e.declarations.length){var t=e.declarations[0];if(t)switch(t.kind){case 149:case 148:return Er(t);case 151:case 150:case 152:return function(e){if(152!==e.kind){var t=W_.getEffectiveReturnTypeNode(e);if(!t||!Tr(t))return!1}for(var n=0,o=e.parameters;n<o.length;n++)if(!Er(o[n]))return!1;return!0}(t)}}return!1}function Cr(e,t,n){for(var o=W_.createSymbolTable(),r=0,i=e;r<i.length;r++){var a=i[r];o.set(a.escapedName,n&&Sr(a)?a:as(a,t))}return o}function xr(e,t){for(var n=0,o=t;n<o.length;n++){var r=o[n];e.has(r.escapedName)||e.set(r.escapedName,r)}}function Ar(e){if(!e.declaredProperties){var t=e.symbol;e.declaredProperties=Zn(t.members),e.declaredCallSignatures=Ti(t.members.get("__call")),e.declaredConstructSignatures=Ti(t.members.get("__new")),e.declaredStringIndexInfo=Ri(t,0),e.declaredNumberIndexInfo=Ri(t,1)}return e}function Dr(e,t){if(4&sn(e)){var n=e.target,o=e.typeArguments;if(W_.length(n.typeParameters)===W_.length(o))return Ui(n,W_.concatenate(o,[t||n.thisType]))}else if(131072&e.flags)return Ia(W_.map(e.types,function(e){return Dr(e,t)}));return e}function Br(e,t,n,o){var r,i,a,s,l,c;W_.rangeEquals(n,o,0,n.length)?(r=E,i=t.symbol?t.symbol.members:W_.createSymbolTable(t.declaredProperties),a=t.declaredCallSignatures,s=t.declaredConstructSignatures,l=t.declaredStringIndexInfo,c=t.declaredNumberIndexInfo):(r=ns(n,o),i=Cr(t.declaredProperties,r,1===n.length),a=ts(t.declaredCallSignatures,r),s=ts(t.declaredConstructSignatures,r),l=us(t.declaredStringIndexInfo,r),c=us(t.declaredNumberIndexInfo,r));var u=gr(t);if(u.length){t.symbol&&i===t.symbol.members&&(i=W_.createSymbolTable(t.declaredProperties));for(var g=W_.lastOrUndefined(o),p=0,d=u;p<d.length;p++){var _=d[p],f=g?Dr(cs(_,r),g):_;xr(i,Jr(f)),a=W_.concatenate(a,ci(f,0)),s=W_.concatenate(s,ci(f,1)),l||(l=f===F?Oi(F,!1):pi(f,0)),c=c||pi(f,1)}}$n(e,i,a,s,l,c)}function Ir(e,t,n,o,r,i,a,s,l){var c=new g(b);return c.declaration=e,c.typeParameters=t,c.parameters=o,c.thisParameter=n,c.resolvedReturnType=r,c.typePredicate=i,c.minArgumentCount=a,c.hasRestParameter=s,c.hasLiteralTypes=l,c}function Nr(e){return Ir(e.declaration,e.typeParameters,e.thisParameter,e.parameters,e.resolvedReturnType,e.typePredicate,e.minArgumentCount,e.hasRestParameter,e.hasLiteralTypes)}function wr(e,t,n,o,r){for(var i=0,a=e;i<a.length;i++){var s=a[i];if(Ks(s,t,n,o,r,hs))return s}}function Or(e,t,n){if(t.typeParameters){if(0<n)return;for(var o=1;o<e.length;o++)if(!wr(e[o],t,!1,!1,!1))return;return[t]}var r=void 0;for(o=0;o<e.length;o++){var i=o===n?t:wr(e[o],t,!0,!0,!0);if(!i)return;r=W_.appendIfUnique(r,i)}return r}function Rr(e,t){for(var n=W_.map(e,function(e){return ci(e,t)}),o=void 0,r=0;r<n.length;r++)for(var i=0,a=n[r];i<a.length;i++){var s=a[i];if(!o||!wr(o,s,!1,!0,!0)){var l=Or(n,s,r);if(l){var c=s;if(1<l.length){if(c=Nr(s),W_.forEach(l,function(e){return e.thisParameter})){var u=Aa(W_.map(l,function(e){return qo(e.thisParameter)||F}),!0);c.thisParameter=ll(s.thisParameter,u)}c.resolvedReturnType=void 0,c.unionSignatures=l}(o||(o=[])).push(c)}}}return o||W_.emptyArray}function Lr(e,t){for(var n=[],o=!1,r=0,i=e;r<i.length;r++){var a=pi(i[r],t);if(!a)return;n.push(a.type),o=o||a.isReadonly}return Oi(Aa(n,!0),o)}function Pr(e,t){return e?t?Ia([e,t]):e:t}function Mr(e,t){return e?t?Oi(Ia([e.type,t.type]),e.isReadonly&&t.isReadonly):e:t}function Fr(e,t){return e&&t&&Oi(Aa([e.type,t.type]),e.isReadonly||t.isReadonly)}function Ur(o){for(var r,i,a=W_.emptyArray,s=W_.emptyArray,l=o.types,c=W_.countWhere(l,ir),e=function(n){var e=o.types[n];if(0===c||c===l.length&&0===n||!ir(e)){var t=ci(e,1);t.length&&0<c&&(t=W_.map(t,function(e){var t=Nr(e);return t.resolvedReturnType=function(e,t,n){for(var o=[],r=0;r<t.length;r++)r===n?o.push(e):ir(t[r])&&o.push(Si(ci(t[r],1)[0]));return Ia(o)}(Si(e),l,n),t})),s=W_.concatenate(s,t)}a=W_.concatenate(a,ci(e,0)),r=Mr(r,pi(e,0)),i=Mr(i,pi(e,1))},t=0;t<l.length;t++)e(t);$n(o,m,a,s,r,i)}function Hr(e){var t=e.symbol;if(e.target)$n(e,n=Cr(Yr(e.target),e.mapper,!1),ts(ci(e.target,0),e.mapper),a=ts(ci(e.target,1),e.mapper),o=us(pi(e.target,0),e.mapper),i=us(pi(e.target,1),e.mapper));else if(2048&t.flags)$n(e,n=t.members,Ti(n.get("__call")),a=Ti(n.get("__new")),o=Ri(t,0),i=Ri(t,1));else{var n=m,o=void 0;if(t.exports&&(n=Fn(t)),32&t.flags){var r=ur(s=dr(t));704512&r.flags?xr(n=W_.createSymbolTable(Zn(n)),Jr(r)):r===F&&(o=Oi(F,!1))}var i=384&t.flags?qe:void 0;if($n(e,n,W_.emptyArray,W_.emptyArray,o,i),8208&t.flags&&(e.callSignatures=Ti(t)),32&t.flags){var a,s=dr(t);(a=Ti(t.members.get("__constructor"))).length||(a=function(e){var t=ci(ur(e),1);if(0===t.length)return[Ir(void 0,e.localTypeParameters,void 0,W_.emptyArray,e,void 0,0,!1,!1)];for(var n=sr(e),o=W_.isInJavaScriptFile(n),r=Ji(n),i=W_.length(r),a=[],s=0,l=t;s<l.length;s++){var c=l[s],u=vi(c.typeParameters),g=W_.length(c.typeParameters);if((o||u<=i)&&i<=g){var p=g?Ai(c,bi(r,c.typeParameters,u,o)):Nr(c);p.typeParameters=e.localTypeParameters,p.resolvedReturnType=e,a.push(p)}}return a}(s)),e.constructSignatures=a}}}function Gr(c){var u,g=W_.createSymbolTable();$n(c,m,W_.emptyArray,W_.emptyArray,void 0,void 0);var p=Vr(c),e=Wr(c),d=Kr(c),_=oi(function(e){if(!e.modifiersType){var t=e.declaration.typeParameter.constraint;if(170===t.kind)e.modifiersType=cs($a(t.type),e.mapper||E);else{var n=Ha(e.declaration),o=Wr(n),r=o&&16384&o.flags?qr(o):o;e.modifiersType=r&&262144&r.flags?cs(r.type,e.mapper||E):te}}return e.modifiersType}(c)),f=!!c.declaration.readonlyToken,h=!!c.declaration.questionToken;if(170===c.declaration.typeParameter.constraint.kind){for(var t=0,n=Jr(_);t<n.length;t++){var o=n[t];i(Na(o),o)}(1&_.flags||pi(_,0))&&i(z)}else{var r=540672&e.flags?oi(e):e;$l(262144&r.flags?wa(oi(r.type)):r,i)}function i(e,t){var n;"object"==typeof t&&(n=t);var o=ns([p],[e]),r=c.mapper?os(c.mapper,o):o,i=cs(d,r);if(32&e.flags){var a=W_.escapeLeadingUnderscores(e.value),s=si(_,a),l=Zt(4|(h||s&&16777216&s.flags?16777216:0),a);l.checkFlags=f||s&&Dg(s)?8:0,l.type=i,n&&(l.syntheticOrigin=n,l.declarations=n.declarations),l.syntheticLiteralTypeOrigin=e,g.set(a,l)}else 3&e.flags&&(u=Oi(i,f))}$n(c,g,W_.emptyArray,W_.emptyArray,u,void 0)}function Vr(e){return e.typeParameter||(e.typeParameter=vr(Vn(e.declaration.typeParameter)))}function Wr(e){return e.constraintType||(e.constraintType=cs(qr(Vr(e)),e.mapper||E)||H)}function Kr(e){return e.templateType||(e.templateType=e.declaration.type?cs(Fo($a(e.declaration.type),!!e.declaration.questionToken),e.mapper||E):H)}function zr(e){return 32&sn(e)&&La(Wr(e))}function jr(e){var t,n,o,r,i,a,s,l,c;return e.members||(32768&e.flags?4&e.objectFlags?(l=Ar((s=e).target),c=W_.concatenate(l.typeParameters,[l.thisType]),Br(s,l,c,s.typeArguments&&s.typeArguments.length===c.length?s.typeArguments:W_.concatenate(s.typeArguments,[s]))):3&e.objectFlags?Br(a=e,Ar(a),W_.emptyArray,W_.emptyArray):16&e.objectFlags?Hr(e):32&e.objectFlags&&Gr(e):65536&e.flags?(n=Rr((t=e).types,0),o=Rr(t.types,1),r=Lr(t.types,0),i=Lr(t.types,1),$n(t,m,n,o,r,i)):131072&e.flags&&Ur(e)),e}function Yr(e){return 32768&e.flags?jr(e).properties:W_.emptyArray}function Xr(e,t){if(32768&e.flags){var n=jr(e).members.get(t);if(n&&zn(n))return n}}function Jr(e){return 196608&(e=oi(e)).flags?function(e){if(!e.resolvedProperties){for(var t=W_.createSymbolTable(),n=0,o=e.types;n<o.length;n++){for(var r=0,i=Jr(o[n]);r<i.length;r++){var a=i[r];if(!t.has(a.escapedName)){var s=ai(e,a.escapedName);s&&t.set(a.escapedName,s)}}if(65536&e.flags)break}e.resolvedProperties=Zn(t)}return e.resolvedProperties}(e):Yr(e)}function qr(e){return Qr(e)?Li(e):void 0}function Zr(e){var t=Ma(e);if(t)return t;var n=$r(e.objectType),o=$r(e.indexType);return n||o?Fa(n||e.objectType,o||e.indexType):void 0}function $r(e){if(737280&e.flags){var t=ei(e);if(t!==ae&&t!==se)return t}else if(262144&e.flags)return z}function Qr(e){return ei(e)!==se}function ei(e){var n,o;if(!e.resolvedBaseConstraint){n=[];var t=p(e);e.resolvedBaseConstraint=o?se:Dr(t||ae,e)}return e.resolvedBaseConstraint;function p(e){if(!W_.contains(n,e)){n.push(e);var t=function(e){if(16384&e.flags){var t=Li(e);return e.isThisType?t:t?p(t):void 0}if(196608&e.flags){for(var n=e.types,o=[],r=0,i=n;r<i.length;r++){var a=i[r],s=p(a);s&&o.push(s)}return 65536&e.flags&&o.length===n.length?Aa(o):131072&e.flags&&o.length?Ia(o):void 0}if(262144&e.flags)return z;if(524288&e.flags){var l=Ma(e);if(l)return p(l);var c=p(e.objectType),u=p(e.indexType),g=c&&u?Fa(c,u):void 0;return g&&g!==H?p(g):void 0}return zr(e)?te:e}(e);return n.pop(),t}o=!0}}function ti(e){if(e.default)e.default===le&&(e.default=se);else if(e.target){var t=ti(e.target);e.default=t?cs(t,e.mapper):ae}else{e.default=le;var n=e.symbol&&W_.forEach(e.symbol.declarations,function(e){return W_.isTypeParameterDeclaration(e)&&e.default}),o=n?$a(n):ae;e.default===le&&(e.default=o)}return e.default}function ni(e){var t=ti(e);return t!==ae&&t!==se?t:void 0}function oi(e){var t,n=540672&e.flags?$r(e)||te:e;return 131072&n.flags?(t=n).resolvedApparentType||(t.resolvedApparentType=Dr(t,t)):262178&n.flags?me:84&n.flags?ye:136&n.flags?ve:512&n.flags?ta(2<=w):16777216&n.flags?te:n}function ri(e,t){for(var n,o=e.types,r=65536&e.flags,i=r?24:0,a=r?0:16777216,s=4,l=0,c=0,u=o;c<u.length;c++)if((y=oi(u[c]))!==H){var g=(m=si(y,t))?W_.getDeclarationModifierFlagsFromSymbol(m):0;!m||g&i?r&&(l|=16):(a&=m.flags,n=W_.appendIfUnique(n,m),l|=(Dg(m)?8:0)|(24&g?0:64)|(16&g?128:0)|(8&g?256:0)|(32&g?512:0),bu(m)||(s=2))}if(n){if(1===n.length&&!(16&l))return n[0];for(var p=[],d=[],_=void 0,f=0,h=n;f<h.length;f++){var m;(m=h[f]).declarations&&W_.addRange(d,m.declarations);var y=qo(m);_?y!==_&&(l|=32):_=y,p.push(y)}var v=Zt(4|a,t);return v.checkFlags=s|l,v.containingType=e,v.declarations=d,v.type=r?Aa(p):Ia(p),v}}function ii(e,t){var n=e.propertyCache||(e.propertyCache=W_.createSymbolTable()),o=n.get(t);return o||(o=ri(e,t))&&n.set(t,o),o}function ai(e,t){var n=ii(e,t);return!n||16&W_.getCheckFlags(n)?void 0:n}function si(e,t){if(32768&(e=oi(e)).flags){var n=jr(e),o=n.members.get(t);if(o&&zn(o))return o;if(n===ie||n.callSignatures.length||n.constructSignatures.length){var r=Xr(_e,t);if(r)return r}return Xr(de,t)}if(196608&e.flags)return ai(e,t)}function li(e,t){if(229376&e.flags){var n=jr(e);return 0===t?n.callSignatures:n.constructSignatures}return W_.emptyArray}function ci(e,t){return li(oi(e),t)}function ui(e,t){if(229376&e.flags){var n=jr(e);return 0===t?n.stringIndexInfo:n.numberIndexInfo}}function gi(e,t){var n=ui(e,t);return n&&n.type}function pi(e,t){return ui(oi(e),t)}function di(e,t){return gi(oi(e),t)}function _i(e,t){if(sl(e)){for(var n=[],o=0,r=Jr(e);o<r.length;o++){var i=r[o];(0===t||Zc(i.escapedName))&&n.push(qo(i))}if(n.length)return Aa(n,!0)}}function fi(e){var n=[];return e.forEach(function(e,t){qn(t)||n.push(e)}),n}function hi(e){if(W_.isInJavaScriptFile(e)){if(e.type&&272===e.type.kind)return!0;var t=W_.getJSDocParameterTags(e);if(t)for(var n=0,o=t;n<o.length;n++){var r=o[n];if(r.isBracketed)return!0;if(r.typeExpression)return 272===r.typeExpression.type.kind}}}function mi(e,t){if(!W_.isExternalModuleNameRelative(e)){var n=cn($e,'"'+e+'"',512);return n&&t?Gn(n):n}}function yi(e){if(W_.hasQuestionToken(e)||hi(e))return!0;if(e.initializer){var t=e.parent,n=ki(t),o=W_.indexOf(t.parameters,e);return W_.Debug.assert(0<=o),o>=n.minArgumentCount}var r=W_.getImmediatelyInvokedFunctionExpression(e.parent);return!!r&&!e.type&&!e.dotDotDotToken&&W_.indexOf(e.parent.parameters,e)>=r.arguments.length}function vi(e){var t,n=0;if(e)for(var o=0;o<e.length;o++)(t=e[o]).symbol&&W_.forEach(t.symbol.declarations,function(e){return W_.isTypeParameterDeclaration(e)&&e.default})||(n=o+1);return n}function bi(e,t,n,o){var r=W_.length(t);if(r){var i=W_.length(e);if((o||n<=i)&&i<=r){e||(e=[]);for(var a=i;a<r;a++)e[a]=Cl(o);for(a=i;a<r;a++){var s=ns(t,e),l=ni(t[a]);e[a]=l?cs(l,s):Cl(o)}}}return e}function ki(e){var t,n,o,r,i,a,s,l=an(e);if(!l.resolvedSignature){for(var c=[],u=!1,g=0,p=void 0,d=void 0,_=W_.getImmediatelyInvokedFunctionExpression(e),f=W_.isJSDocConstructSignature(e),h=!_&&!f&&W_.isInJavaScriptFile(e)&&!W_.hasJSDocParameterTags(e),m=f?1:0;m<e.parameters.length;m++){var y=e.parameters[m],v=y.symbol;v&&4&v.flags&&!W_.isBindingPattern(y.name)&&(v=gn(y,v.escapedName,107455,void 0,void 0,!1)),0===m&&"this"===v.escapedName?(d=!0,p=y.symbol):c.push(v),y.type&&173===y.type.kind&&(u=!0),y.initializer||y.questionToken||y.dotDotDotToken||_&&c.length>_.arguments.length&&!y.type||hi(y)||h||(g=c.length)}if(!(153!==e.kind&&154!==e.kind||W_.hasDynamicName(e)||d&&p)){var b=153===e.kind?154:153,k=W_.getDeclarationOfKind(e.symbol,b);k&&(p=(i=w_(k))&&i.symbol)}var T=152===e.kind?dr(Gn(e.parent.symbol)):void 0,E=T?T.localTypeParameters:(o=e,W_.forEach(W_.getEffectiveTypeParameterDeclarations(o),function(e){var t=vr(e.symbol);r=W_.appendIfUnique(r,t)}),r),S=function(e,t,n){if(t)return $a(e.parameters[0].type);if(n)return n;var o=W_.getEffectiveReturnTypeNode(e);if(o)return $a(o);if(153===e.kind&&!W_.hasDynamicName(e)){var r=W_.getDeclarationOfKind(e.symbol,154);return zo(r)}return W_.nodeIsMissing(e.body)?F:void 0}(e,f,T),C=e.type&&158===e.type.kind?(t=e.type,71===(n=t.parameterName).kind?{kind:1,parameterName:n?n.escapedText:void 0,parameterIndex:n?function(e,t){if(e)for(var n=0;n<e.length;n++){var o=e[n];if(71===o.name.kind&&o.name.escapedText===t.escapedText)return n}return-1}(t.parent.parameters,n):void 0,type:$a(t.type)}:{kind:0,type:$a(t.type)}):void 0,x=W_.hasRestParameter(e);if(!x&&W_.isInJavaScriptFile(e)&&(void 0===(s=an(a=e)).containsArgumentsReference&&(8192&s.flags?s.containsArgumentsReference=!0:s.containsArgumentsReference=function e(t){if(!t)return!1;switch(t.kind){case 71:return"arguments"===t.escapedText&&W_.isPartOfExpression(t);case 149:case 151:case 153:case 154:return 144===t.name.kind&&e(t.name);default:return!W_.nodeStartsNewLexicalEnvironment(t)&&!W_.isPartOfTypeNode(t)&&W_.forEachChild(t,e)}}(a.body)),s.containsArgumentsReference)){x=!0;var A=Zt(3,"args");A.type=Te,A.isRestParameter=!0,c.push(A)}l.resolvedSignature=Ir(e,E,p,c,S,C,g,x,u)}return l.resolvedSignature}function Ti(e){if(!e)return W_.emptyArray;for(var t=[],n=0;n<e.declarations.length;n++){var o=e.declarations[n];switch(o.kind){case 160:case 161:case 228:case 151:case 150:case 152:case 155:case 156:case 157:case 153:case 154:case 186:case 187:case 273:if(0<n&&o.body){var r=e.declarations[n-1];if(o.parent===r.parent&&o.kind===r.kind&&o.pos===r.end)break}t.push(ki(o))}}return t}function Ei(e){if(e.thisParameter)return qo(e.thisParameter)}function Si(e){if(!e.resolvedReturnType){if(!xo(e,3))return H;var t=void 0;if(t=e.target?cs(Si(e.target),e.mapper):e.unionSignatures?Aa(W_.map(e.unionSignatures,Si),!0):bg(e.declaration),!Do()&&(t=F,y)){var n=e.declaration,o=W_.getNameOfDeclaration(n);o?qt(o,W_.Diagnostics._0_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions,W_.declarationNameToString(o)):qt(n,W_.Diagnostics.Function_implicitly_has_return_type_any_because_it_does_not_have_a_return_type_annotation_and_is_referenced_directly_or_indirectly_in_one_of_its_return_expressions)}e.resolvedReturnType=t}return e.resolvedReturnType}function Ci(e){if(e.hasRestParameter){var t=qo(W_.lastOrUndefined(e.parameters));if(4&sn(t)&&t.target===fe)return t.typeArguments[0]}return F}function xi(e,t,n){t=bi(t,e.typeParameters,vi(e.typeParameters),n);var o=e.instantiations||(e.instantiations=W_.createMap()),r=Mi(t),i=o.get(r);return i||o.set(r,i=Ai(e,t)),i}function Ai(e,t){return is(e,ns(e.typeParameters,t),!0)}function Di(e){return e.typeParameters?e.erasedSignatureCache||(e.erasedSignatureCache=is(t=e,ns(t.typeParameters,void 0),!0)):e;var t}function Bi(e){return e.typeParameters?e.canonicalSignatureCache||(e.canonicalSignatureCache=xi(t=e,W_.map(t.typeParameters,function(e){return e.target&&!qr(e.target)?e.target:e}),W_.isInJavaScriptFile(t.declaration))):e;var t}function Ii(e){if(!e.isolatedSignatureType){var t=152===e.declaration.kind||156===e.declaration.kind,n=Jn(16);n.members=m,n.properties=W_.emptyArray,n.callSignatures=t?W_.emptyArray:[e],n.constructSignatures=t?[e]:W_.emptyArray,e.isolatedSignatureType=n}return e.isolatedSignatureType}function Ni(e){return e.members.get("__index")}function wi(e,t){var n=1===t?133:136,o=Ni(e);if(o)for(var r=0,i=o.declarations;r<i.length;r++){var a=i[r];if(1===a.parameters.length){var s=a.parameters[0];if(s&&s.type&&s.type.kind===n)return a}}}function Oi(e,t,n){return{type:e,isReadonly:t,declaration:n}}function Ri(e,t){var n=wi(e,t);if(n)return Oi(n.type?$a(n.type):F,W_.hasModifier(n,64),n)}function Li(e){if(!e.constraint)if(e.target){var t=qr(e.target);e.constraint=t?cs(t,e.mapper):ae}else{var n=(o=e).symbol&&W_.getDeclarationOfKind(o.symbol,145).constraint;e.constraint=n?$a(n):ae}var o;return e.constraint===ae?void 0:e.constraint}function Pi(e){return Vn(W_.getDeclarationOfKind(e.symbol,145).parent)}function Mi(e){var t="";if(e)for(var n=e.length,o=0;o<n;){for(var r=e[o].id,i=1;o+i<n&&e[o+i].id===r+i;)i++;t.length&&(t+=","),t+=r,1<i&&(t+=":"+i),o+=i}return t}function Fi(e,t){for(var n=0,o=0,r=e;o<r.length;o++){var i=r[o];i.flags&t||(n|=i.flags)}return 14680064&n}function Ui(e,t){var n=Mi(t),o=e.instantiations.get(n);return o||(o=Jn(4,e.symbol),e.instantiations.set(n,o),o.flags|=t?Fi(t,0):0,o.target=e,o.typeArguments=t),o}function Hi(e){var t=Yn(e.flags);return t.symbol=e.symbol,t.objectFlags=e.objectFlags,t.target=e.target,t.typeArguments=e.typeArguments,t}function Gi(e){return W_.length(e.target.typeParameters)}function Vi(e,t,n){var o=br(Gn(t)),r=o.localTypeParameters;if(r){var i=W_.length(e.typeArguments),a=vi(r),s=W_.isInJavaScriptFile(e);return!s&&(i<a||i>r.length)?(qt(e,a===r.length?W_.Diagnostics.Generic_type_0_requires_1_type_argument_s:W_.Diagnostics.Generic_type_0_requires_between_1_and_2_type_arguments,fo(o,void 0,1),a,r.length),H):Ui(o,W_.concatenate(o.outerTypeParameters,bi(n,r,a,s)))}return e.typeArguments?(qt(e,W_.Diagnostics.Type_0_is_not_generic,fo(o)),H):o}function Wi(e,t,n){var o,r,i,a,s,l,c,u=br(t),g=rn(t).typeParameters;if(g){var p=W_.length(e.typeArguments),d=vi(g);return p<d||p>g.length?(qt(e,d===g.length?W_.Diagnostics.Generic_type_0_requires_1_type_argument_s:W_.Diagnostics.Generic_type_0_requires_between_1_and_2_type_arguments,po(t),d,g.length),H):(r=n,i=br(o=t),a=rn(o),s=a.typeParameters,l=Mi(r),(c=a.instantiations.get(l))||a.instantiations.set(l,c=cs(i,ns(s,bi(r,s,vi(s),W_.isInJavaScriptFile(o.valueDeclaration))))),c)}return e.typeArguments?(qt(e,W_.Diagnostics.Type_0_is_not_generic,po(t)),H):u}function Ki(e){switch(e.kind){case 159:return e.typeName;case 201:var t=e.expression;if(W_.isEntityNameExpression(t))return t}}function zi(e,t){return e&&Bn(e,t)||N}function ji(e,t,n){return 96&t.flags?Vi(e,t,n):524288&t.flags?Wi(e,t,n):16&t.flags&&Yi(e)&&(t.members||W_.getJSDocClassTag(t.valueDeclaration))?lg(t):void 0}function Yi(e){return 1048576&e.flags&&159===e.kind}function Xi(e){var t=an(e);if(!t.resolvedType){var n=void 0,o=void 0,r=793064;Yi(e)&&(o=function(e){if(W_.isIdentifier(e.typeName)){if("Object"===e.typeName.escapedText){if(W_.isJSDocIndexSignature(e)){var t=$a(e.typeArguments[0]),n=Oi($a(e.typeArguments[1]),!1);return Qn(void 0,m,W_.emptyArray,W_.emptyArray,t===z&&n,t===j&&n)}return F}switch(e.typeName.escapedText){case"String":return z;case"Number":return j;case"Boolean":return J;case"Void":return Z;case"Undefined":return G;case"Null":return W;case"Function":case"function":return _e;case"Array":case"array":return e.typeArguments&&e.typeArguments.length?void 0:Te;case"Promise":case"promise":return e.typeArguments&&e.typeArguments.length?void 0:yg(F)}}}(e),r|=107455),o||(o=function(e,t){var n=Ji(e);if(t===N)return H;var o=ji(e,t,n);if(o)return o;var r=kr(t);if(void 0!==r)return n?(qt(e,W_.Diagnostics.Type_0_is_not_generic,po(t)),H):r;if(!(107455&t.flags&&Yi(e)))return H;var i=qo(t);if(i.symbol&&!cg(i)){var a=ji(e,i.symbol,n);if(a)return a}return zi(Ki(e),793064),i}(e,n=zi(Ki(e),r))),t.resolvedSymbol=n,t.resolvedType=o}return t.resolvedType}function Ji(e){return W_.map(e.typeArguments,$a)}function qi(e){var t=an(e);return t.resolvedType||(t.resolvedType=gl($g(e.exprName))),t.resolvedType}function Zi(e,t){function n(e){for(var t=0,n=e.declarations;t<n.length;t++){var o=n[t];switch(o.kind){case 229:case 230:case 232:return o}}}if(!e)return t?re:te;var o=br(e);return 32768&o.flags?W_.length(o.typeParameters)!==t?(qt(n(e),W_.Diagnostics.Global_type_0_must_have_1_type_parameter_s,W_.symbolName(e),t),t?re:te):o:(qt(n(e),W_.Diagnostics.Global_type_0_must_be_a_class_or_interface_type,W_.symbolName(e)),t?re:te)}function $i(e,t){return Qi(e,107455,t?W_.Diagnostics.Cannot_find_global_value_0:void 0)}function Qi(e,t,n){return gn(void 0,e,t,n,e,!1)}function ea(e,t,n){var o=Qi(e,793064,n?W_.Diagnostics.Cannot_find_global_type_0:void 0);return o||n?Zi(o,t):void 0}function ta(e){return xe||(xe=ea("Symbol",0,e))||te}function na(e){return De||(De=ea("Promise",1,e))||re}function oa(e){return Be||(Be=$i("Promise",e))}function ra(e){return Re||(Re=ea("AsyncIterable",1,e))||re}function ia(e){return Le||(Le=ea("AsyncIterator",1,e))||re}function aa(e){return Pe||(Pe=ea("AsyncIterableIterator",1,e))||re}function sa(e){return Ne||(Ne=ea("Iterable",1,e))||re}function la(e){return we||(we=ea("Iterator",1,e))||re}function ca(e){return Oe||(Oe=ea("IterableIterator",1,e))||re}function ua(e,t){void 0===t&&(t=0);var n=Qi(e,793064,void 0);return n&&Zi(n,t)}function ga(e,t){var n=Qi(e,1920,void 0),o=n&&cn(n.exports,t,793064);return o&&br(o)}function pa(e,t){return e!==re?Ui(e,t):te}function da(e){return pa(Ae||(Ae=ea("TypedPropertyDescriptor",1,!0))||re,[e])}function _a(e){return pa(aa(!0),[e])}function fa(e){return pa(sa(!0),[e])}function ha(e){return pa(ca(!0),[e])}function ma(e){return pa(fe,[e])}function ya(e){return t[e]||(t[e]=function(e){for(var t=[],n=[],o=0;o<e;o++){var r=Yn(16384);t.push(r);var i=Zt(4,""+o);i.type=r,n.push(i)}var a=Jn(12);return a.typeParameters=t,a.outerTypeParameters=void 0,a.localTypeParameters=t,a.instantiations=W_.createMap(),a.instantiations.set(Mi(a.typeParameters),a),(a.target=a).typeArguments=a.typeParameters,a.thisType=Yn(16384),a.thisType.isThisType=!0,(a.thisType.constraint=a).declaredProperties=n,a.declaredCallSignatures=W_.emptyArray,a.declaredConstructSignatures=W_.emptyArray,a.declaredStringIndexInfo=void 0,a.declaredNumberIndexInfo=void 0,a}(e))}function va(e){return Ui(ya(e.length),e)}function ba(e,t){for(var n=0,o=e.length-1,r=t.id;n<=o;){var i=n+(o-n>>1),a=e[i].id;if(a===r)return i;r<a?o=i-1:n=i+1}return~n}function ka(e,t){return 0<=ba(e,t)}function Ta(e,t){var n=t.flags;if(65536&n)Ea(e,t.types);else if(1&n)e.containsAny=!0;else if(!A&&6144&n)2048&n&&(e.containsUndefined=!0),4096&n&&(e.containsNull=!0),2097152&n||(e.containsNonWideningType=!0);else if(!(8192&n||131072&n&&function(e){for(var t=0,n=0,o=e.types;n<o.length;n++){var r=o[n];if(6368&r.flags&&6368&t)return!0;if(6144&(t|=r.flags)&&16809984&t)return!0}return!1}(t))){2&n&&(e.containsString=!0),4&n&&(e.containsNumber=!0),96&n&&(e.containsStringOrNumberLiteral=!0);var o=e.length,r=o&&t.id>e[o-1].id?~o:ba(e,t);r<0&&(32768&n&&16&t.objectFlags&&t.symbol&&8208&t.symbol.flags&&Sa(e,t)||e.splice(~r,0,t))}}function Ea(e,t){for(var n=0,o=t;n<o.length;n++)Ta(e,o[n])}function Sa(e,t){for(var n=0,o=e;n<o.length;n++)if(fs(o[n],t))return!0;return!1}function Ca(e,t){for(var n=0,o=t;n<o.length;n++){var r=o[n];if(e!==r&&ys(e,r))return!0}return!1}function xa(e){if(0!==e.length&&!function(e){var t=e[0];if(256&t.flags){for(var n=Wn(t.symbol),o=1;o<e.length;o++){var r=e[o];if(!(256&r.flags)||n!==Wn(r.symbol))return!1}return!0}return!1}(e))for(var t=e.length;0<t;)Ca(e[--t],e)&&W_.orderedRemoveItemAt(e,t)}function Aa(e,t,n,o){if(0===e.length)return $;if(1===e.length)return e[0];var r=[];return Ea(r,e),r.containsAny?F:(t?xa(r):r.containsStringOrNumberLiteral&&function(e){for(var t=e.length;0<t;){var n=e[--t];(32&n.flags&&e.containsString||64&n.flags&&e.containsNumber||96&n.flags&&1048576&n.flags&&ka(e,n.regularType))&&W_.orderedRemoveItemAt(e,t)}}(r),0===r.length?r.containsNull?r.containsNonWideningType?W:K:r.containsUndefined?r.containsNonWideningType?G:V:$:Da(r,n,o))}function Da(e,t,n){if(0===e.length)return $;if(1===e.length)return e[0];var o=Mi(e),r=l.get(o);return r||(r=Yn(65536|Fi(e,6144)),l.set(o,r),r.types=e,r.aliasSymbol=t,r.aliasTypeArguments=n),r}function Ba(e,t){for(var n=0,o=t;n<o.length;n++){var r=o[n];i=e,131072&(a=r).flags?Ba(i,a.types):1&a.flags?i.containsAny=!0:8192&a.flags?i.containsNever=!0:16&sn(a)&&As(a)?i.containsEmptyObject=!0:!A&&6144&a.flags||W_.contains(i,a)||(32768&a.flags&&(i.containsObjectType=!0),65536&a.flags&&void 0===i.unionIndex&&(i.unionIndex=i.length),32768&a.flags&&16&a.objectFlags&&a.symbol&&8208&a.symbol.flags&&Sa(i,a)||i.push(a))}var i,a}function Ia(e,t,n){if(0===e.length)return te;var o=[];if(Ba(o,e),o.containsNever)return $;if(o.containsAny)return F;if(o.containsEmptyObject&&!o.containsObjectType&&o.push(te),1===o.length)return o[0];var r=o.unionIndex;if(void 0!==r){var i=o[r];return Aa(W_.map(i.types,function(e){return Ia(W_.replaceElement(o,r,e))}),!1,t,n)}var a=Mi(o),s=k.get(a);return s||(s=Yn(131072|Fi(o,6144)),k.set(a,s),s.types=o,s.aliasSymbol=t,s.aliasTypeArguments=n),s}function Na(e){return 24&W_.getDeclarationModifierFlagsFromSymbol(e)||W_.startsWith(e.escapedName,"__@")?$:qa(W_.symbolName(e))}function wa(e){return wg(e,540672)?((n=e).resolvedIndexType||(n.resolvedIndexType=Yn(262144),n.resolvedIndexType.type=n),n.resolvedIndexType):32&sn(e)?Wr(e):1&e.flags||pi(e,0)?z:(t=e,Aa(W_.map(Jr(t),Na)));var t,n}function Oa(e,t,n,o){var r=n&&180===n.kind?n:void 0,i=96&t.flags?W_.escapeLeadingUnderscores(""+t.value):r&&Ru(r.argumentExpression,t,!1)?W_.getPropertyNameForKnownSymbolName(W_.idText(r.argumentExpression.name)):void 0;if(void 0!==i){var a=si(e,i);if(a){if(r){if(W_.isAssignmentTarget(r)&&(Bg(r,a)||Ig(r)))return qt(r.argumentExpression,W_.Diagnostics.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,po(a)),H;o&&(an(n).resolvedSymbol=a)}return qo(a)}}if(!(6144&t.flags)&&Og(t,262774)){if(No(e))return F;var s=Og(t,84)&&pi(e,1)||pi(e,0)||void 0;if(s)return r&&s.isReadonly&&(W_.isAssignmentTarget(r)||W_.isDeleteTarget(r))&&qt(r,W_.Diagnostics.Index_signature_in_type_0_only_permits_reading,fo(e)),s.type;if(r&&!Rg(e))return y&&!O.suppressImplicitAnyIndexErrors&&(di(e,1)?qt(r.argumentExpression,W_.Diagnostics.Element_implicitly_has_an_any_type_because_index_expression_is_not_of_type_number):qt(r,W_.Diagnostics.Element_implicitly_has_an_any_type_because_type_0_has_no_index_signature,fo(e))),F}if(n){var l=180===n.kind?n.argumentExpression:n.indexType;return 96&t.flags?qt(l,W_.Diagnostics.Property_0_does_not_exist_on_type_1,""+t.value,fo(e)):6&t.flags?qt(l,W_.Diagnostics.Type_0_has_no_matching_index_signature_for_type_1,fo(e),fo(t)):qt(l,W_.Diagnostics.Type_0_cannot_be_used_as_an_index_type,fo(t)),H}return F}function Ra(e){return!!(540672&e.flags)||(32&sn(e)?La(Wr(e)):!!(196608&e.flags)&&W_.forEach(e.types,Ra))}function La(e){return!!(802816&e.flags)||!!(196608&e.flags)&&W_.forEach(e.types,La)}function Pa(e){if(32768&e.flags&&!zr(e)){var t=jr(e);return 0===t.properties.length&&0===t.callSignatures.length&&0===t.constructSignatures.length&&t.stringIndexInfo&&!t.numberIndexInfo}return!1}function Ma(e){var t=e.objectType;if(131072&t.flags&&Ra(t)&&W_.some(t.types,Pa)){for(var n=[],o=[],r=0,i=t.types;r<i.length;r++){var a=i[r];Pa(a)?o.push(di(a,0)):n.push(a)}return Aa([Fa(Ia(n),e.indexType),Ia(o)])}if(zr(t)){var s=ns([Vr(t)],[e.indexType]),l=t.mapper,c=l?os(l,s):s;return cs(Kr(t),c)}}function Fa(e,t,n){if(La(t)||(!n||180!==n.kind)&&Ra(e)){if(1&e.flags)return e;var o=e.id+","+t.id,r=x.get(o);return r||x.set(o,(i=e,a=t,(s=Yn(524288)).objectType=i,s.indexType=a,r=s)),r}var i,a,s,l=oi(e);if(65536&t.flags&&!(8&t.flags)){for(var c=[],u=0,g=t.types;u<g.length;u++){var p=Oa(l,g[u],n,!1);if(p===H)return H;c.push(p)}return Aa(c)}return Oa(l,t,n,!0)}function Ua(e){var t=an(e);return t.resolvedType||(t.resolvedType=Fa($a(e.objectType),$a(e.indexType),e)),t.resolvedType}function Ha(e){var t=an(e);if(!t.resolvedType){var n=Jn(32,e.symbol);n.declaration=e,n.aliasSymbol=Va(e),n.aliasTypeArguments=Wa(e),Wr(t.resolvedType=n)}return t.resolvedType}function Ga(e){var t=an(e);if(!t.resolvedType){var n=Va(e);if(0!==e.symbol.members.size||n){var o=Jn(16,e.symbol);o.aliasSymbol=n,o.aliasTypeArguments=Wa(e),W_.isJSDocTypeLiteral(e)&&e.isArrayType&&(o=ma(o)),t.resolvedType=o}else t.resolvedType=oe}return t.resolvedType}function Va(e){return 231===e.parent.kind?Vn(e.parent):void 0}function Wa(e){var t=Va(e);return t?or(t):void 0}function Ka(t,n,o,r){if(1&t.flags||1&n.flags)return F;if(8192&t.flags)return n;if(8192&n.flags)return t;if(65536&t.flags)return ec(t,function(e){return Ka(e,n,o,r)});if(65536&n.flags)return ec(n,function(e){return Ka(t,e,o,r)});if(16777216&n.flags)return ee;if(262654&n.flags)return t;var e,i,a=W_.createSymbolTable(),s=W_.createUnderscoreEscapedMap();t===te?(e=pi(n,0),i=pi(n,1)):(e=Fr(pi(t,0),pi(n,0)),i=Fr(pi(t,1),pi(n,1)));for(var l=0,c=Jr(n);l<c.length;l++){var u=65536&(_=c[l]).flags&&!(32768&_.flags);24&W_.getDeclarationModifierFlagsFromSymbol(_)?s.set(_.escapedName,!0):ja(_)||u||a.set(_.escapedName,za(_))}for(var g=0,p=Jr(t);g<p.length;g++){var d=p[g];if(!(65536&d.flags&&!(32768&d.flags)||s.has(d.escapedName)||ja(d)))if(a.has(d.escapedName)){var _,f=qo(_=a.get(d.escapedName));if(16777216&_.flags){var h=W_.concatenate(d.declarations,_.declarations),m=Zt(4|16777216&d.flags,d.escapedName);m.type=Aa([qo(d),Ml(f,131072)]),m.leftSpread=d,m.rightSpread=_,m.declarations=h,a.set(d.escapedName,m)}}else a.set(d.escapedName,za(d))}var y=Qn(void 0,a,W_.emptyArray,W_.emptyArray,e,i);return y.flags|=r,y.flags|=5242880,y.objectFlags|=128,y.symbol=o,y}function za(e){if(!Dg(e))return e;var t=Zt(4|16777216&e.flags,e.escapedName);return t.type=qo(e),t.declarations=e.declarations,t.syntheticOrigin=e,t}function ja(e){return 8192&e.flags&&W_.find(e.declarations,function(e){return W_.isClassLike(e.parent)})}function Ya(e,t,n){var o=Yn(e);return o.symbol=n,o.value=t,o}function Xa(e){if(96&e.flags&&!(1048576&e.flags)){if(!e.freshType){var t=Ya(1048576|e.flags,e.value,e.symbol);(t.regularType=e).freshType=t}return e.freshType}return e}function Ja(e){return 96&e.flags&&1048576&e.flags?e.regularType:e}function qa(e,t,n){var o="number"==typeof e?"#":"@",r=t?t+o+e:o+e,i=C.get(r);if(!i){var a=("number"==typeof e?64:32)|(t?256:0);C.set(r,i=Ya(a,e,n))}return i}function Za(e){var t,n,o,r=an(e);return r.resolvedType||(r.resolvedType=(t=e,n=W_.getThisContainer(t,!1),!(o=n&&n.parent)||!W_.isClassLike(o)&&230!==o.kind||W_.hasModifier(n,32)||152===n.kind&&!W_.isNodeDescendantOf(t,n.body)?(qt(t,W_.Diagnostics.A_this_type_is_available_only_in_a_non_static_member_of_a_class_or_interface),H):dr(Vn(o)).thisType)),r.resolvedType}function $a(e){switch(e.kind){case 119:case 268:case 269:return F;case 136:return z;case 133:return j;case 122:return J;case 137:return q;case 105:return Z;case 139:return G;case 95:return W;case 130:return $;case 134:return 65536&e.flags?F:ee;case 169:case 99:return Za(e);case 173:return(_=an(d=e)).resolvedType||(_.resolvedType=Ja($g(d.literal))),_.resolvedType;case 159:return Xi(e);case 158:return J;case 201:return Xi(e);case 162:return qi(e);case 164:return(p=an(g=e)).resolvedType||(p.resolvedType=ma($a(g.elementType))),p.resolvedType;case 165:return(u=an(c=e)).resolvedType||(u.resolvedType=va(W_.map(c.elementTypes,$a))),u.resolvedType;case 166:return(l=an(s=e)).resolvedType||(l.resolvedType=Aa(W_.map(s.types,$a),!1,Va(s),Wa(s))),l.resolvedType;case 167:return(a=an(i=e)).resolvedType||(a.resolvedType=Ia(W_.map(i.types,$a),Va(i),Wa(i))),a.resolvedType;case 270:return r=$a(e.type),A?Aa([r,W]):r;case 168:case 271:case 272:case 267:return $a(e.type);case 160:case 161:case 163:case 285:case 273:return Ga(e);case 170:return(o=an(n=e)).resolvedType||(o.resolvedType=wa($a(n.type))),o.resolvedType;case 171:return Ua(e);case 172:return Ha(e);case 71:case 143:var t=Ud(e);return t&&br(t);case 274:return function(e){var t=an(e);if(!t.resolvedType){var n=$a(e.type);t.resolvedType=n?ma(n):H}return t.resolvedType}(e);default:return H}var n,o,r,i,a,s,l,c,u,g,p,d,_}function Qa(e,t,n){if(e&&e.length){for(var o=[],r=0,i=e;r<i.length;r++){var a=i[r];o.push(n(a,t))}return o}return e}function es(e,t){return Qa(e,t,cs)}function ts(e,t){return Qa(e,t,is)}function ns(e,t){return W_.Debug.assert(void 0===t||e.length===t.length),1===e.length?(l=e[0],c=t?t[0]:F,function(e){return e===l?c:e}):2===e.length?(r=e[0],i=t?t[0]:F,a=e[1],s=t?t[1]:F,function(e){return e===r?i:e===a?s:e}):(n=e,o=t,function(e){for(var t=0;t<n.length;t++)if(e===n[t])return o?o[t]:F;return e});var n,o,r,i,a,s,l,c}function os(t,n){return function(e){return cs(t(e),n)}}function rs(e){var t=Yn(16384);return t.symbol=e.symbol,t.target=e,t}function is(e,t,n){var o,r,i,a;if(e.typeParameters&&!n){o=W_.map(e.typeParameters,rs),t=os(ns(e.typeParameters,o),t);for(var s=0,l=o;s<l.length;s++)l[s].mapper=t}e.typePredicate&&(i=e.typePredicate,a=t,r=W_.isIdentifierTypePredicate(i)?{kind:1,parameterName:i.parameterName,parameterIndex:i.parameterIndex,type:cs(i.type,a)}:{kind:0,type:cs(i.type,a)});var c=Ir(e.declaration,o,e.thisParameter&&as(e.thisParameter,t),Qa(e.parameters,t,as),void 0,r,e.minArgumentCount,e.hasRestParameter,e.hasLiteralTypes);return c.target=e,c.mapper=t,c}function as(e,t){if(1&W_.getCheckFlags(e)){var n=rn(e);e=n.target,t=os(n.mapper,t)}var o=Zt(e.flags,e.escapedName);return o.checkFlags=1,o.declarations=e.declarations,o.parent=e.parent,o.target=e,o.mapper=t,e.valueDeclaration&&(o.valueDeclaration=e.valueDeclaration),e.isRestParameter&&(o.isRestParameter=e.isRestParameter),o}function ss(e,t){var n=64&e.objectFlags?e.target:e,o=n.symbol,r=rn(o),i=r.typeParameters;if(!i){var a=o.declarations[0],s=tr(a,!0)||W_.emptyArray;i=2048&o.flags&&!n.aliasTypeArguments?W_.filter(s,function(e){return function(n,e){if(n.symbol&&n.symbol.declarations&&1===n.symbol.declarations.length){var t=n.symbol.declarations[0].parent;if(W_.findAncestor(e,function(e){return 207===e.kind?"quit":e===t}))return W_.forEachChild(e,function e(t){switch(t.kind){case 169:return n.isThisType;case 71:return!n.isThisType&&W_.isPartOfTypeNode(t)&&$a(t)===n;case 162:return!0}return W_.forEachChild(t,e)})}return!0}(e,a)}):s,(r.typeParameters=i).length&&(r.instantiations=W_.createMap(),r.instantiations.set(Mi(i),n))}if(i.length){var l=64&e.objectFlags?os(e.mapper,t):t,c=W_.map(i,l),u=Mi(c),g=r.instantiations.get(u);if(!g){var p=ns(i,c);g=32&n.objectFlags?function(r,i){var e=Wr(r);if(262144&e.flags){var a=e.type;if(16384&a.flags){var t=cs(a,i);if(a!==t)return ec(t,function(e){return 704513&e.flags?ls(r,(t=a,n=e,o=i,function(e){return e===t?n:o(e)})):e;var t,n,o})}}return ls(r,i)}(n,p):ls(n,p),r.instantiations.set(u,g)}return g}return e}function ls(e,t){var n=Jn(64|e.objectFlags,e.symbol);return 32&e.objectFlags&&(n.declaration=e.declaration),n.target=e,n.mapper=t,n.aliasSymbol=e.aliasSymbol,n.aliasTypeArguments=es(e.aliasTypeArguments,t),n}function cs(e,t){if(e&&t!==E){if(16384&e.flags)return t(e);if(32768&e.flags){if(16&e.objectFlags)return e.symbol&&14384&e.symbol.flags&&e.symbol.declarations?ss(e,t):e;if(32&e.objectFlags)return ss(e,t);if(4&e.objectFlags)return Ui(e.target,es(e.typeArguments,t))}if(65536&e.flags&&!(8190&e.flags))return Aa(es(e.types,t),!1,e.aliasSymbol,es(e.aliasTypeArguments,t));if(131072&e.flags)return Ia(es(e.types,t),e.aliasSymbol,es(e.aliasTypeArguments,t));if(262144&e.flags)return wa(cs(e.type,t));if(524288&e.flags)return Fa(cs(e.objectType,t),cs(e.indexType,t))}return e}function us(e,t){return e&&Oi(cs(e.type,t),e.isReadonly,e.declaration)}function gs(e){switch(W_.Debug.assert(151!==e.kind||W_.isObjectLiteralMethod(e)),e.kind){case 186:case 187:case 151:return ps(e);case 178:return W_.forEach(e.properties,gs);case 177:return W_.forEach(e.elements,gs);case 195:return gs(e.whenTrue)||gs(e.whenFalse);case 194:return 54===e.operatorToken.kind&&(gs(e.left)||gs(e.right));case 261:return gs(e.initializer);case 185:return gs(e.expression);case 254:return W_.forEach(e.properties,gs);case 253:return e.initializer&&gs(e.initializer);case 256:return e.expression&&gs(e.expression)}return!1}function ps(e){if(e.typeParameters)return!1;if(W_.forEach(e.parameters,function(e){return!W_.getEffectiveTypeAnnotationNode(e)}))return!0;if(187!==e.kind){var t=W_.firstOrUndefined(e.parameters);if(!t||!W_.parameterIsThisKeyword(t))return!0}return 207!==e.body.kind&&gs(e.body)}function ds(e){return(Kc(e)||W_.isObjectLiteralMethod(e))&&ps(e)}function _s(e){if(32768&e.flags){var t=jr(e);if(t.constructSignatures.length){var n=Jn(16,e.symbol);return n.members=t.members,n.properties=t.properties,n.callSignatures=W_.emptyArray,n.constructSignatures=W_.emptyArray,n}}else if(131072&e.flags)return Ia(W_.map(e.types,_s));return e}function fs(e,t){return Is(e,t,zt)}function hs(e,t){return Is(e,t,zt)?-1:0}function ms(e,t){return Is(e,t,Wt)?-1:0}function ys(e,t){return Is(e,t,Vt)}function vs(e,t){return Is(e,t,Wt)}function bs(e,t){return $o(e)===$o(t)||ys(e,t)&&!fs(e,t)}function ks(e,t){return Is(e,t,Kt)}function Ts(e,t,n,o,r){return Ns(e,t,Wt,n,o,r)}function Es(e,t,n,o,r){return Ns(e,t,Kt,n,o,r)}function Ss(e,t,n,o,r,i,a){if(e===t)return-1;if(!t.hasRestParameter&&e.minArgumentCount>t.parameters.length)return 0;e.typeParameters&&e.typeParameters!==t.typeParameters&&(e=Gu(e,t=Bi(t),void 0,a));var s=t.declaration?t.declaration.kind:0,l=!n&&R&&151!==s&&150!==s&&152!==s,c=-1,u=Ei(e);if(u&&u!==Z){var g=Ei(t);if(g){if(!(T=!l&&a(u,g,!1)||a(g,u,r)))return r&&i(W_.Diagnostics.The_this_types_of_each_signature_are_incompatible),0;c&=T}}for(var p,d,_,f,h=xs(e),m=xs(t),y=(d=h,_=t,f=m,(p=e).hasRestParameter===_.hasRestParameter?p.hasRestParameter?Math.max(d,f)+1:Math.min(d,f):p.hasRestParameter?f:d),v=e.parameters,b=t.parameters,k=0;k<y;k++){var T,E=k<h?_g(v[k]):Ci(e),S=k<m?_g(b[k]):Ci(t),C=n?void 0:Hu(al(E)),x=n?void 0:Hu(al(S));if(!(T=C&&x&&!C.typePredicate&&!x.typePredicate&&(6144&nl(E))==(6144&nl(S))?Ss(x,C,l?2:1,!1,r,i,a):!n&&!l&&a(E,S,!1)||a(S,E,r)))return r&&i(W_.Diagnostics.Types_of_parameters_0_and_1_are_incompatible,W_.symbolName(v[k<h?k:h]),W_.symbolName(b[k<m?k:m])),0;c&=T}if(!o){var A=Si(t);if(A===Z)return c;var D=Si(e);if(t.typePredicate){if(e.typePredicate)c&=function(e,t,n,o,r,i,a){if(e.kind!==t.kind)return r&&(i(W_.Diagnostics.A_this_based_type_guard_is_not_compatible_with_a_parameter_based_type_guard),i(W_.Diagnostics.Type_predicate_0_is_not_assignable_to_1,ho(e),ho(t))),0;if(1===e.kind){var s=e,l=t,c=s.parameterIndex-(W_.getThisParameter(n)?1:0),u=l.parameterIndex-(W_.getThisParameter(o)?1:0);if(c!==u)return r&&(i(W_.Diagnostics.Parameter_0_is_not_in_the_same_position_as_parameter_1,s.parameterName,l.parameterName),i(W_.Diagnostics.Type_predicate_0_is_not_assignable_to_1,ho(e),ho(t))),0}var g=a(e.type,t.type,r);return 0===g&&r&&i(W_.Diagnostics.Type_predicate_0_is_not_assignable_to_1,ho(e),ho(t)),g}(e.typePredicate,t.typePredicate,e.declaration,t.declaration,r,i,a);else if(W_.isIdentifierTypePredicate(t.typePredicate))return r&&i(W_.Diagnostics.Signature_0_must_be_a_type_predicate,_o(e)),0}else c&=1===n&&a(A,D,!1)||a(D,A,r)}return c}function Cs(e,t){var n=Di(e),o=Di(t),r=Si(n),i=Si(o);return!(i!==Z&&!Is(i,r,Wt)&&!Is(r,i,Wt))&&0!==Ss(n,o,0,!0,!1,void 0,ms)}function xs(e){var t=e.parameters.length;return e.hasRestParameter?t-1:t}function As(e){return 32768&e.flags?0===(t=jr(e)).properties.length&&0===t.callSignatures.length&&0===t.constructSignatures.length&&!t.stringIndexInfo&&!t.numberIndexInfo:!!(16777216&e.flags)||(65536&e.flags?W_.forEach(e.types,As):!!(131072&e.flags)&&!W_.forEach(e.types,function(e){return!As(e)}));var t}function Ds(e,t,n){if(e===t)return!0;var o=X_(e)+","+X_(t),r=jt.get(o);if(void 0!==r)return r;if(!(e.escapedName===t.escapedName&&256&e.flags&&256&t.flags))return jt.set(o,!1),!1;for(var i=qo(t),a=0,s=Jr(qo(e));a<s.length;a++){var l=s[a];if(8&l.flags){var c=si(i,l.escapedName);if(!(c&&8&c.flags))return n&&n(W_.Diagnostics.Property_0_is_missing_in_type_1,W_.symbolName(l),fo(br(t),void 0,256)),jt.set(o,!1),!1}}return jt.set(o,!0),!0}function Bs(e,t,n,o){var r=e.flags,i=t.flags;if(8192&i)return!1;if(1&i||8192&r)return!0;if(262178&r&&2&i)return!0;if(32&r&&256&r&&32&i&&!(256&i)&&e.value===t.value)return!0;if(84&r&&4&i)return!0;if(64&r&&256&r&&64&i&&!(256&i)&&e.value===t.value)return!0;if(136&r&&8&i)return!0;if(16&r&&16&i&&Ds(e.symbol,t.symbol,o))return!0;if(256&r&&256&i){if(65536&r&&65536&i&&Ds(e.symbol,t.symbol,o))return!0;if(224&r&&224&i&&e.value===t.value&&Ds(Wn(e.symbol),Wn(t.symbol),o))return!0}if(2048&r&&(!A||3072&i))return!0;if(4096&r&&(!A||4096&i))return!0;if(32768&r&&16777216&i)return!0;if(n===Wt||n===Kt){if(1&r)return!0;if(68&r&&!(256&r)&&(16&i||64&i&&256&i))return!0}return!1}function Is(e,t,n){if(96&e.flags&&1048576&e.flags&&(e=e.regularType),96&t.flags&&1048576&t.flags&&(t=t.regularType),e===t||n!==zt&&Bs(e,t,n))return!0;if(32768&e.flags&&32768&t.flags){var o=n.get(Ms(e,t,n));if(void 0!==o)return 1===o}return!!(1032192&e.flags||1032192&t.flags)&&Ns(e,t,n,void 0)}function Ns(e,t,m,h,n,o){var y,c,u,g,r,i,p=0,d=0;(i=r||(r={}))[i.None=0]="None",i[i.Source=1]="Source",i[i.Target=2]="Target",i[i.Both=3]="Both";var _=0,f=!1,v=!1;W_.Debug.assert(m!==zt||!h,"no error reporting in identity checking");var a=T(e,t,!!h,n);return f?qt(h,W_.Diagnostics.Excessive_stack_depth_comparing_types_0_and_1,fo(e),fo(t)):y&&(o&&(y=W_.concatenateDiagnosticMessageChains(o,y)),Tt.add(W_.createDiagnosticForNodeFromMessageChain(h,y))),0!==a;function b(e,t,n,o){W_.Debug.assert(!!h),y=W_.chainDiagnosticMessages(y,e,t,n,o)}function k(e,t,n){var o=fo(t),r=fo(n);o===r&&(o=fo(t,void 0,256),r=fo(n,void 0,256)),e||(e=m===Kt?W_.Diagnostics.Type_0_is_not_comparable_to_type_1:o===r?W_.Diagnostics.Type_0_is_not_assignable_to_type_1_Two_different_types_with_this_name_exist_but_they_are_unrelated:W_.Diagnostics.Type_0_is_not_assignable_to_type_1),b(e,o,r)}function T(e,t,n,o){if(96&e.flags&&1048576&e.flags&&(e=e.regularType),96&t.flags&&1048576&t.flags&&(t=t.regularType),e===t)return-1;if(m===zt)return i=t,32768&(r=e).flags&&32768&i.flags?A(r,i,!1):(65536&r.flags&&65536&i.flags||131072&r.flags&&131072&i.flags)&&(a=E(r,i))&&(a&=E(i,r))?a:0;var r,i,a;if(Bs(e,t,m,n?b:void 0))return-1;if(128&sn(e)&&1048576&e.flags){if(function e(r,i,a){if(wg(i,32768)&&!(512&sn(i))){var s=!!(33554432&r.flags);if((m===Wt||m===Kt)&&(Zl(de,i)||!s&&As(i)))return!1;if(65536&i.flags){var t=C(r,i);if(t)return e(r,t,a)}for(var n=function(e){if(!yu(i,e.escapedName,s)){if(a)if(W_.Debug.assert(!!h),W_.isJsxAttributes(h)||W_.isJsxOpeningLikeElement(h))b(W_.Diagnostics.Property_0_does_not_exist_on_type_1,po(e),fo(i));else{var t=r.symbol&&W_.firstOrUndefined(r.symbol.declarations),n=void 0;if(e.valueDeclaration&&W_.findAncestor(e.valueDeclaration,function(e){return e===t})){var o=e.valueDeclaration;W_.Debug.assertNode(o,W_.isObjectLiteralElementLike),h=o,W_.isIdentifier(o.name)&&(n=Du(o.name,i))}void 0!==n?b(W_.Diagnostics.Object_literal_may_only_specify_known_properties_but_0_does_not_exist_in_type_1_Did_you_mean_to_write_2,po(e),fo(i),n):b(W_.Diagnostics.Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1,po(e),fo(i))}return{value:!0}}},o=0,l=Yr(r);o<l.length;o++){var c=l[o],u=n(c);if("object"==typeof u)return u.value}}return!1}(e,t,n))return n&&k(o,e,t),0;(function(e){if(!(196608&e.flags))return!1;for(var t=!1,n=0,o=e.types;n<o.length;n++)if(!(6144&o[n].flags)){if(t)return!0;t=!0}return!1})(t)&&(e=cl(e))}if(m!==Kt&&!(196608&e.flags)&&!(65536&t.flags)&&!v&&e!==de&&(0<Jr(e).length||0<ci(e,0).length||0<ci(e,1).length)&&D(t)&&!function(e,t){for(var n=!!(33554432&e.flags),o=0,r=Jr(e);o<r.length;o++){var i=r[o];if(yu(t,i.escapedName,n))return!0}return!1}(e,t)){if(n){var s=ci(e,0),l=ci(e,1);0<s.length&&T(Si(s[0]),t,!1)||0<l.length&&T(Si(l[0]),t,!1)?b(W_.Diagnostics.Value_of_type_0_has_no_properties_in_common_with_type_1_Did_you_mean_to_call_it,fo(e),fo(t)):b(W_.Diagnostics.Type_0_has_no_properties_in_common_with_type_1,fo(e),fo(t))}return 0}var c,u,g,p,d=0,_=y,f=v;return v=!1,65536&e.flags?d=m===Kt?x(e,t,n&&!(8190&e.flags)):function(e,t,n){for(var o=-1,r=e.types,i=0,a=r;i<a.length;i++){var s=a[i],l=T(s,t,n);if(!l)return 0;o&=l}return o}(e,t,n&&!(8190&e.flags)):(65536&t.flags?d=S(e,t,n&&!(8190&e.flags)&&!(8190&t.flags)):131072&t.flags?(v=!0,d=function(e,t,n){for(var o=-1,r=t.types,i=0,a=r;i<a.length;i++){var s=a[i],l=T(e,s,n);if(!l)return 0;o&=l}return o}(e,t,n)):131072&e.flags&&(d=x(e,t,!1)),!d&&(1032192&e.flags||1032192&t.flags)&&(d=A(e,t,n))&&(y=_)),v=f,!d&&n&&(32768&e.flags&&8190&t.flags?(u=t,g=fo(c=e),p=fo(u),(me===c&&z===u||ye===c&&j===u||ve===c&&J===u||ta(!1)===c&&q===u)&&b(W_.Diagnostics._0_is_a_primitive_but_1_is_a_wrapper_object_Prefer_using_0_when_possible,p,g)):e.symbol&&32768&e.flags&&de===e&&b(W_.Diagnostics.The_Object_type_is_assignable_to_very_few_other_types_Did_you_mean_to_use_the_any_type_instead),k(o,e,t)),d}function E(e,t){for(var n=-1,o=0,r=e.types;o<r.length;o++){var i=S(r[o],t,!1);if(!i)return 0;n&=i}return n}function S(e,t,n){var o=t.types;if(65536&t.flags&&ka(o,e))return-1;for(var r=0,i=o;r<i.length;r++){var a=T(e,i[r],!1);if(a)return a}return n&&T(e,C(e,t)||o[o.length-1],!0),0}function C(e,t){var n,o=Yr(e);if(o){var r=function(e,t){for(var n,o=0,r=e;o<r.length;o++){var i=r[o];if(Ol(t,i.escapedName)){if(n)return;n=i}}return n}(o,t);if(r)for(var i=qo(r),a=0,s=t.types;a<s.length;a++){var l=s[a],c=Io(l,r.escapedName);if(c&&T(i,c)){if(n)return;n=l}}}return n}function x(e,t,n){var o=e.types;if(65536&e.flags&&ka(o,t))return-1;for(var r=o.length,i=0;i<r;i++){var a=T(o[i],t,n&&i===r-1);if(a)return a}return 0}function A(e,t,n){if(f)return 0;var o=Ms(e,t,m),r=m.get(o);if(void 0!==r){if(!n||2!==r)return 1===r?-1:0;m.set(o,3)}if(c){for(var i=0;i<p;i++)if(o===c[i])return 1;if(100===d)return f=!0,0}else c=[],u=[],g=[];var a=p;c[p]=o,p++,u[d]=e,g[d]=t,d++;var s=_;1&_||!Vs(e,u,d)||(_|=1),2&_||!Vs(t,g,d)||(_|=2);var l=3!==_?function(e,t,n){var o,r,i,a=y;if(16384&t.flags){if(32&sn(e)&&Wr(e)===wa(t)&&!e.declaration.questionToken){var s=Kr(e),l=Fa(t,Vr(e));if(o=T(s,l,n))return o}}else if(262144&t.flags){if(262144&e.flags&&(o=T(t.type,e.type,!1)))return o;var c=16384&(r=t.type).flags?qr(r):524288&r.flags?Zr(r):$r(r);if(c&&(o=T(e,wa(c),n)))return o}else if(524288&t.flags){var c=Zr(t);if(c&&(o=T(e,c,n)))return y=a,o}if(16384&e.flags)if(32&sn(t)&&Wr(t)===wa(e)){var l=Fa(e,Vr(t)),s=Kr(t);if(o=T(l,s,n))return y=a,o}else{var c=qr(e);if(c||!(16777216&t.flags)){(!c||1&c.flags)&&(c=te);var u=n&&c!==te;if(o=T(c,t,u))return y=a,o}}else if(524288&e.flags){var c=Zr(e);if(c){if(o=T(c,t,n))return y=a,o}else if(524288&t.flags&&e.indexType===t.indexType&&(o=T(e.objectType,t.objectType,n)))return o}else{if(4&sn(e)&&4&sn(t)&&e.target===t.target&&!(67108864&e.flags||67108864&t.flags)){var g=Os(e.target);if(o=function(e,t,n,o){var r=e.typeArguments||W_.emptyArray,i=t.typeArguments||W_.emptyArray;if(r.length!==i.length&&m===zt)return 0;for(var a=r.length<=i.length?r.length:i.length,s=-1,l=0;l<a;l++){var c=l<n.length?n[l]:1;if(4!==c){var u=r[l],g=i[l],p=-1;if(1===c?p=T(u,g,o):2===c?p=T(g,u,o):3===c?(p=T(g,u,!1))||(p=T(u,g,o)):(p=T(u,g,o))&&(p&=T(g,u,o)),!p)return 0;s&=p}}return s}(e,t,g,n))return o;if(g!==W_.emptyArray&&!function(e,t){for(var n=0;n<t.length;n++)if(1===t[n]&&1024&e.typeArguments[n].flags)return!0;return!1}(t,g)){if(!n||!W_.some(g,function(e){return 0===e}))return 0;y=a}}var p=!!(8190&e.flags);if(m!==zt&&(e=oi(e)),163840&e.flags&&32768&t.flags){var d=n&&y===a&&!p;if(32&sn(i=t)&&i.declaration.questionToken&&!zr(e)&&As(e)?o=-1:zr(t)?o=zr(e)?function(e,t,n){var o,r=!!e.declaration.readonlyToken,i=!!e.declaration.questionToken,a=!!t.declaration.readonlyToken,s=!!t.declaration.questionToken;if((m===zt?r===a&&i===s:m===Kt||!i||s)&&(o=T(Wr(t),Wr(e),n))){var l=ns([Vr(e)],[Vr(t)]);return o&T(cs(Kr(e),l),Kr(t),n)}return 0}(e,t,d):0:(o=function(e,t,n){if(m===zt)return function(e,t){if(!(32768&e.flags&&32768&t.flags))return 0;var n=Yr(e),o=Yr(t);if(n.length!==o.length)return 0;for(var r=-1,i=0,a=n;i<a.length;i++){var s=a[i],l=Xr(t,s.escapedName);if(!l)return 0;var c=Ws(s,l,T);if(!c)return 0;r&=c}return r}(e,t);var o=m===Vt&&!(128&sn(e)),r=bl(e,t,o);if(r)return n&&b(W_.Diagnostics.Property_0_is_missing_in_type_1,po(r),fo(e)),0;for(var i=-1,a=Yr(t),s=0,l=a;s<l.length;s++){var c=l[s];if(!(4194304&c.flags)){var u=si(e,c.escapedName);if(u&&u!==c){var g=W_.getDeclarationModifierFlagsFromSymbol(u),p=W_.getDeclarationModifierFlagsFromSymbol(c);if(8&g||8&p){if(256&W_.getCheckFlags(u))return n&&b(W_.Diagnostics.Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1,po(u),fo(e)),0;if(u.valueDeclaration!==c.valueDeclaration)return n&&(8&g&&8&p?b(W_.Diagnostics.Types_have_separate_declarations_of_a_private_property_0,po(c)):b(W_.Diagnostics.Property_0_is_private_in_type_1_but_not_in_type_2,po(c),fo(8&g?e:t),fo(8&g?t:e))),0}else if(16&p){if(!Hs(u,c))return n&&b(W_.Diagnostics.Property_0_is_protected_but_type_1_is_not_a_class_derived_from_2,po(c),fo(Us(u)||e),fo(Us(c)||t)),0}else if(16&g)return n&&b(W_.Diagnostics.Property_0_is_protected_in_type_1_but_public_in_type_2,po(c),fo(e),fo(t)),0;var d=T(qo(u),qo(c),n);if(!d)return n&&b(W_.Diagnostics.Types_of_property_0_are_incompatible,po(c)),0;if(i&=d,m!==Kt&&16777216&u.flags&&!(16777216&c.flags))return n&&b(W_.Diagnostics.Property_0_is_optional_in_type_1_but_required_in_type_2,po(c),fo(e),fo(t)),0}}}return i}(e,t,d))&&(o&=B(e,t,0,d))&&(o&=B(e,t,1,d))&&(o&=w(e,t,0,p,d))&&(o&=w(e,t,1,p,d)),o)return y=a,o}}return 0}(e,t,n):1;if(_=s,d--,l){if(-1===l||0===d){for(i=a;i<p;i++)m.set(c[i],1);p=a}}else m.set(o,n?3:2),p=a;return l}function D(e){if(32768&e.flags){var t=jr(e);return 0===t.callSignatures.length&&0===t.constructSignatures.length&&!t.stringIndexInfo&&!t.numberIndexInfo&&0<t.properties.length&&W_.every(t.properties,function(e){return!!(16777216&e.flags)})}return!!(131072&e.flags)&&W_.every(e.types,D)}function B(e,t,n,o){if(m===zt)return function(e,t,n){var o=ci(e,n),r=ci(t,n);if(o.length!==r.length)return 0;for(var i=-1,a=0;a<o.length;a++){var s=Ks(o[a],r[a],!1,!1,!1,T);if(!s)return 0;i&=s}return i}(e,t,n);if(t===ie||e===ie)return-1;var r=ci(e,n),i=ci(t,n);if(1===n&&r.length&&i.length){if(Gs(e)&&!Gs(t))return o&&b(W_.Diagnostics.Cannot_assign_an_abstract_constructor_type_to_a_non_abstract_constructor_type),0;if(!function(e,t,n){if(!e.declaration||!t.declaration)return!0;var o=W_.getSelectedModifierFlags(e.declaration,24),r=W_.getSelectedModifierFlags(t.declaration,24);return 8===r||(16===r&&8!==o||(16!==r&&!o||(n&&b(W_.Diagnostics.Cannot_assign_a_0_constructor_type_to_a_1_constructor_type,yo(o),yo(r)),!1)))}(r[0],i[0],o))return 0}var a=-1,s=y;if(64&sn(e)&&64&sn(t)&&e.symbol===t.symbol)for(var l=0;l<i.length;l++){if(!(h=I(r[l],i[l],!0,o)))return 0;a&=h}else if(1===r.length&&1===i.length){var c=m===Kt||O.noStrictGenericChecks;a=I(r[0],i[0],c,o)}else e:for(var u=0,g=i;u<g.length;u++){for(var p=g[u],d=o,_=0,f=r;_<f.length;_++){var h;if(h=I(f[_],p,!0,d)){a&=h,y=s;continue e}d=!1}return d&&b(W_.Diagnostics.Type_0_provides_no_match_for_the_signature_1,fo(e),_o(p,void 0,void 0,n)),0}return a}function I(e,t,n,o){return Ss(n?Di(e):e,n?Di(t):t,0,!1,o,b,T)}function N(e,t,n){var o=T(e.type,t.type,n);return!o&&n&&b(W_.Diagnostics.Index_signatures_are_incompatible),o}function w(e,t,n,o,r){if(m===zt)return i=e,s=pi(t,a=n),(l=pi(i,a))||s?l&&s&&l.isReadonly===s.isReadonly?T(l.type,s.type):0:-1;var i,a,s,l,c=pi(t,n);if(!c||1&c.type.flags&&!o)return-1;var u=pi(e,n)||1===n&&pi(e,0);if(u)return N(u,c,r);if(zr(e))return 0===n&&T(Kr(e),c.type,r);if(sl(e)){var g=-1;if(0===n){var p=pi(e,1);p&&(g=N(p,c,r))}return g&&(g&=function(e,t,n,o){for(var r=-1,i=0,a=Yr(e);i<a.length;i++){var s=a[i];if(0===n||Zc(s.escapedName)){var l=T(qo(s),t,o);if(!l)return o&&b(W_.Diagnostics.Property_0_is_incompatible_with_index_signature,po(s)),0;r&=l}}return r}(e,c.type,n,r)),g}return r&&b(W_.Diagnostics.Index_signature_is_missing_in_type_0,fo(e)),0}}function ws(e,t,n){var o=Ui(e,W_.map(e.typeParameters,function(e){return e===t?n:e}));return o.flags|=67108864,o}function Os(e){if(!R)return W_.emptyArray;var t=e.typeParameters||W_.emptyArray,n=e.variances;if(!n){if(e===fe||e===he)n=[1];else{e.variances=W_.emptyArray,n=[];for(var o=0,r=t;o<r.length;o++){var i=r[o],a=ws(e,i,ce),s=ws(e,i,ue),l=(vs(s,a)?1:0)|(vs(a,s)?2:0);3===l&&vs(ws(e,i,ze),a)&&(l=4),n.push(l)}}e.variances=n}return n}function Rs(e){return 16384&e.flags&&!Li(e)}function Ls(e){return 4&sn(e)&&W_.some(e.typeArguments,function(e){return Rs(e)||Ls(e)})}function Ps(e,t,n){void 0===n&&(n=0);for(var o=""+e.target.id,r=0,i=e.typeArguments;r<i.length;r++){var a=i[r];if(Rs(a)){var s=W_.indexOf(t,a);s<0&&(s=t.length,t.push(a)),o+="="+s}else n<4&&Ls(a)?o+="<"+Ps(a,t,n+1)+">":o+="-"+a.id}return o}function Ms(e,t,n){if(n===zt&&e.id>t.id){var o=e;e=t,t=o}if(Ls(e)&&Ls(t)){var r=[];return Ps(e,r)+","+Ps(t,r)}return e.id+","+t.id}function Fs(e,t){if(!(6&W_.getCheckFlags(e)))return t(e);for(var n=0,o=e.containingType.types;n<o.length;n++){var r=si(o[n],e.escapedName),i=r&&Fs(r,t);if(i)return i}}function Us(e){return e.parent&&32&e.parent.flags?br(Wn(e)):void 0}function Hs(o,e){return!Fs(e,function(e){return!!(16&W_.getDeclarationModifierFlagsFromSymbol(e))&&(t=o,n=Us(e),!Fs(t,function(e){var t=Us(e);return!!t&&Qo(t,n)}));var t,n})}function Gs(e){if(16&sn(e)){var t=e.symbol;if(t&&32&t.flags){var n=dd(t);if(n&&W_.hasModifier(n,128))return!0}}return!1}function Vs(e,t,n){if(5<=n&&32768&e.flags){var o=e.symbol;if(o)for(var r=0,i=0;i<n;i++){var a=t[i];if(32768&a.flags&&a.symbol===o&&5<=++r)return!0}}return!1}function Ws(e,t,n){if(e===t)return-1;var o=24&W_.getDeclarationModifierFlagsFromSymbol(e);if(o!==(24&W_.getDeclarationModifierFlagsFromSymbol(t)))return 0;if(o){if(pd(e)!==pd(t))return 0}else if((16777216&e.flags)!=(16777216&t.flags))return 0;return Dg(e)!==Dg(t)?0:n(qo(e),qo(t))}function Ks(e,t,n,o,r,i){if(e===t)return-1;if(!function(e,t,n){if(e.parameters.length===t.parameters.length&&e.minArgumentCount===t.minArgumentCount&&e.hasRestParameter===t.hasRestParameter)return!0;var o=e.hasRestParameter?1:0,r=t.hasRestParameter?1:0;return!!(n&&e.minArgumentCount<=t.minArgumentCount&&(r<o||o===r&&e.parameters.length>=t.parameters.length))}(e,t,n))return 0;if(W_.length(e.typeParameters)!==W_.length(t.typeParameters))return 0;e=Di(e),t=Di(t);var a=-1;if(!o){var s=Ei(e);if(s){var l=Ei(t);if(l){if(!(g=i(s,l)))return 0;a&=g}}}for(var c=t.parameters.length,u=0;u<c;u++){var g;if(!(g=i(zs(e,u)?Ci(e):_g(e.parameters[u]),zs(t,u)?Ci(t):_g(t.parameters[u]))))return 0;a&=g}return r||(a&=i(Si(e),Si(t))),a}function zs(e,t){return e.hasRestParameter&&t>=e.parameters.length-1}function js(e){return function(e){for(var t,n=0,o=e;n<o.length;n++){var r=o[n],i=$s(r);if(t||(t=i),i===r||i!==t)return!1}return!0}(e)?Aa(e):W_.reduceLeft(e,function(e,t){return ys(e,t)?t:e})}function Ys(e){return 4&sn(e)&&e.target===fe}function Xs(e){return 4&sn(e)&&(e.target===fe||e.target===he)||!(6144&e.flags)&&vs(e,Se)}function Js(e){return!!si(e,"0")}function qs(e){return!!(6368&e.flags)}function Zs(e){return!!(8&e.flags)||(65536&e.flags?!!(256&e.flags)||!W_.forEach(e.types,function(e){return!qs(e)}):qs(e))}function $s(e){return 256&e.flags?hr(e):32&e.flags?z:64&e.flags?j:128&e.flags?J:65536&e.flags?Aa(W_.sameMap(e.types,$s)):e}function Qs(e){return 256&e.flags?hr(e):32&e.flags&&1048576&e.flags?z:64&e.flags&&1048576&e.flags?j:128&e.flags?J:65536&e.flags?Aa(W_.sameMap(e.types,Qs)):e}function el(e){return!!(4&sn(e)&&8&e.target.objectFlags)}function tl(e){for(var t=0,n=0,o=e;n<o.length;n++)t|=nl(o[n]);return t}function nl(e){return 65536&e.flags?tl(e.types):32&e.flags?""===e.value?32:0:64&e.flags?0===e.value?64:0:128&e.flags?e===X?128:0:7406&e.flags}function ol(e){return 7392&nl(e)?Ql(e,function(e){return!(7392&nl(e))}):e}function rl(e){return 2&e.flags?ot:4&e.flags?rt:8&e.flags||e===X?X:7168&e.flags||32&e.flags&&""===e.value||64&e.flags&&0===e.value?e:$}function il(e,t){var n=t&~e.flags&6144;return 0===n?e:Aa(2048===n?[e,G]:4096===n?[e,W]:[e,G,W])}function al(e){return A?Ml(e,524288):e}function sl(e){return e.symbol&&0!=(6656&e.symbol.flags)&&0===ci(e,0).length&&0===ci(e,1).length}function ll(e,t){var n=Zt(e.flags,e.escapedName);return n.declarations=e.declarations,n.parent=e.parent,n.type=t,(n.target=e).valueDeclaration&&(n.valueDeclaration=e.valueDeclaration),n}function cl(e){if(!(128&sn(e)&&1048576&e.flags))return e;var t=e.regularType;if(t)return t;var n=e,o=function(e,t){for(var n=W_.createSymbolTable(),o=0,r=Yr(e);o<r.length;o++){var i=r[o],a=qo(i),s=t(a);n.set(i.escapedName,s===a?i:ll(i,s))}return n}(e,cl),r=Qn(n.symbol,o,n.callSignatures,n.constructSignatures,n.stringIndexInfo,n.numberIndexInfo);return r.flags=-1048577&n.flags,r.objectFlags|=128,e.regularType=r}function ul(e){return 6144&e.flags?e:gl(e)}function gl(e){if(6291456&e.flags){if(6144&e.flags)return F;if(128&sn(e))return function(e){for(var t,n,o,r=W_.createSymbolTable(),i=0,a=Yr(e);i<a.length;i++){var s=a[i];r.set(s.escapedName,4&s.flags?(n=qo(t=s),(o=gl(n))===n?t:ll(t,o)):s)}var l=pi(e,0),c=pi(e,1);return Qn(e.symbol,r,W_.emptyArray,W_.emptyArray,l&&Oi(gl(l.type),l.isReadonly),c&&Oi(gl(c.type),c.isReadonly))}(e);if(65536&e.flags)return Aa(W_.sameMap(e.types,ul));if(Ys(e)||el(e))return Ui(e.target,W_.sameMap(e.typeArguments,gl))}return e}function pl(e,t){var n,o=fo(gl(t));switch(e.kind){case 149:case 148:n=W_.Diagnostics.Member_0_implicitly_has_an_1_type;break;case 146:n=e.dotDotDotToken?W_.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type:W_.Diagnostics.Parameter_0_implicitly_has_an_1_type;break;case 176:n=W_.Diagnostics.Binding_element_0_implicitly_has_an_1_type;break;case 228:case 151:case 150:case 153:case 154:case 186:case 187:if(!e.name)return void qt(e,W_.Diagnostics.Function_expression_which_lacks_return_type_annotation_implicitly_has_an_0_return_type,o);n=W_.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type;break;default:n=W_.Diagnostics.Variable_0_implicitly_has_an_1_type}qt(e,n,W_.declarationNameToString(W_.getNameOfDeclaration(e)),o)}function dl(e,t){P&&y&&2097152&t.flags&&(function e(t){var n=!1;if(65536&t.flags)for(var o=0,r=t.types;o<r.length;o++)e(c=r[o])&&(n=!0);if(Ys(t)||el(t))for(var i=0,a=t.typeArguments;i<a.length;i++)e(c=a[i])&&(n=!0);if(128&sn(t))for(var s=0,l=Yr(t);s<l.length;s++){var c,u=l[s];2097152&(c=qo(u)).flags&&(e(c)||qt(u.valueDeclaration,W_.Diagnostics.Object_literal_s_property_0_implicitly_has_an_1_type,W_.symbolName(u),fo(gl(c))),n=!0)}return n}(t)||pl(e,t))}function _l(e,t,n){var o,r=e.parameters.length,i=t.parameters.length;o=e.hasRestParameter&&t.hasRestParameter?Math.max(r,i):e.hasRestParameter?i:t.hasRestParameter?r:Math.min(r,i);for(var a=0;a<o;a++)n(fg(e,a),fg(t,a))}function fl(e,t,n,o){var r=o?W_.map(o,ml):W_.map(e.typeParameters,hl),i=function(e){for(var t=0;t<r.length;t++)if(e===r[t].typeParameter)return r[t].isFixed=!0,Sl(i,t);return e};return i.signature=e,i.inferences=r,i.flags=t,i.compareTypes=n||ms,i}function hl(e){return{typeParameter:e,candidates:void 0,inferredType:void 0,priority:void 0,topLevel:!0,isFixed:!1}}function ml(e){return{typeParameter:e.typeParameter,candidates:e.candidates&&e.candidates.slice(),inferredType:e.inferredType,priority:e.priority,topLevel:e.topLevel,isFixed:e.isFixed}}function yl(e){var t,n=sn(e);return!!(802816&e.flags||4&n&&W_.forEach(e.typeArguments,yl)||16&n&&e.symbol&&10288&e.symbol.flags||32&n||196608&e.flags&&(void 0===(t=e).couldContainTypeVariables&&(t.couldContainTypeVariables=W_.forEach(t.types,yl)),t.couldContainTypeVariables))}function vl(e,t){return e===t||196608&e.flags&&W_.forEach(e.types,function(e){return vl(e,t)})}function bl(e,t,n){for(var o=0,r=Yr(t);o<r.length;o++){var i=r[o];if((n||!(16777216&i.flags))&&!si(e,i.escapedName))return i}}function kl(r,e,S,C){var x,A;function D(e,t){if(yl(t))if(e.aliasSymbol&&e.aliasTypeArguments&&e.aliasSymbol===t.aliasSymbol)for(var n=e.aliasTypeArguments,o=t.aliasTypeArguments,r=0;r<n.length;r++)D(n[r],o[r]);else{if(65536&e.flags&&65536&t.flags&&!(256&e.flags&&256&t.flags)||131072&e.flags&&131072&t.flags){if(e===t){for(var i=0,a=e.types;i<a.length;i++)D(y=a[i],y);return}for(var s=void 0,l=0,c=e.types;l<c.length;l++)if(Tl(y=c[l],t.types))(s||(s=[])).push(y),D(y,y);else if(96&y.flags){var u=$s(y);Tl(u,t.types)&&(s||(s=[])).push(y,u)}s&&(e=El(e,s),t=El(t,s))}if(540672&t.flags){if(8388608&e.flags||e===Q)return;var g=I(t);if(g)return void(g.isFixed||(!g.candidates||C<g.priority?(g.candidates=[e],g.priority=C):C===g.priority&&g.candidates.push(e),8&C||!(16384&t.flags)||vl(S,t)||(g.topLevel=!1)))}else if(4&sn(e)&&4&sn(t)&&e.target===t.target){n=e.typeArguments||W_.emptyArray,o=t.typeArguments||W_.emptyArray;var p=n.length<o.length?n.length:o.length,d=Os(e.target);for(r=0;r<p;r++)r<d.length&&2===d[r]?B(n[r],o[r]):D(n[r],o[r])}else if(262144&e.flags&&262144&t.flags)D(e.type,t.type);else if(524288&e.flags&&524288&t.flags)D(e.objectType,t.objectType),D(e.indexType,t.indexType);else if(196608&t.flags){for(var _=0,f=void 0,h=0,m=o=t.types;h<m.length;h++){var y;I(y=m[h])?(f=y,_++):D(e,y)}if(1===_){var v=C;C|=2,D(e,f),C=v}}else if(65536&e.flags)for(var b=0,k=n=e.types;b<k.length;b++)D(k[b],t);else if(163840&(e=oi(e)).flags){var T=e.id+","+t.id;if(A&&A.get(T))return;(A||(A=W_.createMap())).set(T,!0);var E=32768&t.flags&&!(16&sn(t)&&t.symbol&&32&t.symbol.flags)?t.symbol:void 0;if(E){if(W_.contains(x,E))return;(x||(x=[])).push(E),N(e,t),x.pop()}else N(e,t)}}}function B(e,t){R?(C^=1,D(e,t),C^=1):D(e,t)}function I(e){if(540672&e.flags)for(var t=0,n=r;t<n.length;t++){var o=n[t];if(e===o.typeParameter)return o}}function N(e,t){if(zr(e)&&zr(t)&&(D(Wr(e),Wr(t)),D(Kr(e),Kr(t))),32&sn(t)){var n=Wr(t);if(262144&n.flags){var o=I(n.type);if(o&&!o.isFixed){var r=function(e,t){var n=Jr(e),o=pi(e,0);if(0!==n.length||o){for(var r=hl(Fa(Wr(t).type,Vr(t))),i=[r],a=Kr(t),s=!t.declaration.readonlyToken,l=t.declaration.questionToken?0:16777216,c=W_.createSymbolTable(),u=0,g=n;u<g.length;u++){var p=g[u],d=h(qo(p));if(!d)return;var _=Zt(4|p.flags&l,p.escapedName);_.checkFlags=s&&Dg(p)?8:0,_.declarations=p.declarations,_.type=d,c.set(p.escapedName,_)}if(o){var f=h(o.type);if(!f)return;o=Oi(f,s&&o.isReadonly)}return Qn(void 0,c,W_.emptyArray,W_.emptyArray,o,void 0)}function h(e){return r.candidates=void 0,kl(i,e,a),r.candidates&&Aa(r.candidates,!0)}}(e,t);if(r){var i=C;C|=4,D(r,o.typeParameter),C=i}}return}if(16384&n.flags)return D(wa(e),n),void D(Aa(W_.map(Jr(e),qo)),Kr(t))}bl(e,t,!1)&&bl(t,e,!1)||(function(e,t){for(var n=Yr(t),o=0,r=n;o<r.length;o++){var i=r[o],a=si(e,i.escapedName);a&&D(qo(a),qo(i))}}(e,t),a(e,t,0),a(e,t,1),function(e,t){var n=di(t,0);if(n){var o=di(e,0)||_i(e,0);o&&D(o,n)}var r=di(t,1);if(r){var o=di(e,1)||di(e,0)||_i(e,1);o&&D(o,r)}}(e,t))}function a(e,t,n){for(var o=ci(e,n),r=ci(t,n),i=o.length,a=r.length,s=i<a?i:a,l=0;l<s;l++)c=Di(o[i-s+l]),u=Di(r[a-s+l]),_l(c,u,B),c.typePredicate&&u.typePredicate&&c.typePredicate.kind===u.typePredicate.kind?D(c.typePredicate.type,u.typePredicate.type):D(Si(c),Si(u));var c,u}void 0===C&&(C=0),D(e,S)}function Tl(e,t){for(var n=0,o=t;n<o.length;n++)if(fs(o[n],e))return!0;return!1}function El(e,t){for(var n=[],o=0,r=e.types;o<r.length;o++){var i=r[o];Tl(i,t)||n.push(i)}return 65536&e.flags?Aa(n):Ia(n)}function Sl(e,t){var n,o,r,i,a,s=e.inferences[t],l=s.inferredType;if(!l){if(s.candidates){var c=e.signature,u=!s.topLevel||(i=s.typeParameter,(a=qr(i))&&wg(a,270334))||!s.isFixed&&vl(Si(c),s.typeParameter)?s.candidates:W_.sameMap(s.candidates,Qs);l=gl(1&s.priority?(r=u,W_.reduceLeft(r,function(e,t){return ys(t,e)?t:e})):1&e.flags||8&s.priority?Aa(u,!0):function(e){if(!A)return js(e);var t=W_.filter(e,function(e){return!(6144&e.flags)});return t.length?il(js(t),6144&tl(e)):Aa(e,!0)}(u))}else if(2&e.flags)l=Q;else{var g=ni(s.typeParameter);l=g?cs(g,os((n=e.signature.typeParameters,o=t,function(e){return W_.indexOf(n,e)>=o?te:e}),e)):Cl(!!(4&e.flags))}s.inferredType=l;var p=qr(e.signature.typeParameters[t]);if(p){var d=cs(p,e);e.compareTypes(l,Dr(d,l))||(s.inferredType=l=d)}}return l}function Cl(e){return e?F:te}function xl(e){for(var t=[],n=0;n<e.inferences.length;n++)t.push(Sl(e,n));return t}function Al(e){var t=an(e);return t.resolvedSymbol||(t.resolvedSymbol=!W_.nodeIsMissing(e)&&gn(e,e.escapedText,1156031,W_.Diagnostics.Cannot_find_name_0,e,!W_.isWriteOnlyAccess(e),W_.Diagnostics.Cannot_find_name_0_Did_you_mean_1)||N),t.resolvedSymbol}function Dl(e){return!!W_.findAncestor(e,function(e){return 162===e.kind||71!==e.kind&&143!==e.kind&&"quit"})}function Bl(e){if(174!==e.parent.kind)return""+e.parent.elements.indexOf(e);var t=e.propertyName||e.name;switch(t.kind){case 71:return W_.idText(t);case 144:return W_.isStringOrNumericLiteral(t.expression)?t.expression.text:void 0;case 9:case 8:return t.text;default:W_.Debug.fail("Unexpected name kind for binding element name")}}function Il(e,t){switch(e.kind){case 71:return 71===t.kind&&Al(e)===Al(t)||(226===t.kind||176===t.kind)&&Kn(Al(e))===Vn(t);case 99:return 99===t.kind;case 97:return 97===t.kind;case 179:return 179===t.kind&&e.name.escapedText===t.name.escapedText&&Il(e.expression,t.expression);case 176:if(179!==t.kind)return!1;var n=t;if(n.name.escapedText!==Bl(e))return!1;if(176===e.parent.parent.kind&&Il(e.parent.parent,n.expression))return!0;if(226===e.parent.parent.kind){var o=e.parent.parent.initializer;return o&&Il(o,n.expression)}}return!1}function Nl(e,t){for(;179===e.kind;)if(Il(e=e.expression,t))return!0;return!1}function wl(e,t){return 179===t.kind&&Nl(e,t.expression)&&Ol(function e(t){if(71===t.kind)return qo(Al(t));if(179===t.kind){var n=e(t.expression);return n&&Io(n,t.name.escapedText)}}(t.expression),t.name.escapedText)}function Ol(e,t){if(e&&65536&e.flags){var n=ii(e,t);if(n&&2&W_.getCheckFlags(n))return void 0===n.isDiscriminantProperty&&(n.isDiscriminantProperty=32&n.checkFlags&&Zs(qo(n))),n.isDiscriminantProperty}return!1}function Rl(e,t){return Il(e,t)||Nl(e,t)}function Ll(e,t){if(e!==t){if(8192&t.flags)return t;var n=Ql(e,function(e){return function(e,t){if(!(65536&e.flags))return vs(e,t);for(var n=0,o=e.types;n<o.length;n++)if(vs(o[n],t))return!0;return!1}(t,e)});if(!(8192&n.flags))return n}return e}function Pl(e){var t,n,o=e.flags;if(2&o)return A?4079361:4194049;if(32&o){var r=""===e.value;return A?r?3030785:1982209:r?3145473:4194049}if(20&o)return A?4079234:4193922;if(64&o){var i=0===e.value;return A?i?3030658:1982082:i?3145346:4193922}return 8&o?A?4078980:4193668:136&o?A?e===X?3030404:1981828:e===X?3145092:4193668:32768&o?(n=jr(t=e)).callSignatures.length||n.constructSignatures.length||n.members.get("bind")&&ys(t,_e)?A?6164448:8376288:A?6166480:8378320:3072&o?2457472:4096&o?2340752:512&o?A?1981320:4193160:16777216&o?A?6166480:8378320:540672&o?Pl($r(e)||te):196608&o?function(e){for(var t=0,n=0,o=e;n<o.length;n++)t|=Pl(o[n]);return t}(e.types):8388607}function Ml(e,t){if(524288&e.flags){var n=$r(e)||te,o=Ql(n,function(e){return 0!=(Pl(e)&t)});return o!==n?o:e}return Ql(e,function(e){return 0!=(Pl(e)&t)})}function Fl(e,t){if(t){var n=Zg(t);return Aa([Ml(e,131072),n])}return e}function Ul(e,t){var n=W_.getTextOfPropertyName(t);return Io(e,n)||Zc(n)&&di(e,1)||di(e,0)||H}function Hl(e,t){return Js(e)&&Io(e,""+t)||$p(e,void 0,!1,!1)||H}function Gl(e){return ma($p(e,void 0,!1,!1)||H)}function Vl(e){return 194===e.parent.kind&&e.parent.left===e||216===e.parent.kind&&e.parent.initializer===e}function Wl(e){return Ul(Kl(e.parent),e.name)}function Kl(e){var t,n,o,r,i=e.parent;switch(i.kind){case 215:return z;case 216:return Zp(i.expression,i.awaitModifier)||H;case 194:return 177===(r=i).parent.kind&&Vl(r.parent)||261===r.parent.kind&&Vl(r.parent.parent)?Fl(Kl(r),r.right):Zg(r.right);case 188:return G;case 177:return o=e,Hl(Kl(n=i),W_.indexOf(n.elements,o));case 198:return Gl(Kl(i.parent));case 261:return Wl(i);case 262:return Fl(Wl(t=i),t.objectAssignmentInitializer)}return H}function zl(e){return e.initializer?an(t=e.initializer).resolvedType||Zg(t):215===e.parent.parent.kind?z:216===e.parent.parent.kind&&Zp(e.parent.parent.expression,e.parent.parent.awaitModifier)||H;var t}function jl(e){return 226===e.kind?zl(e):(n=(t=e).parent,o=jl(n.parent),Fl(174===n.kind?Ul(o,t.propertyName||t.name):t.dotDotDotToken?Gl(o):Hl(o,W_.indexOf(n.elements,t)),t.initializer));var t,n,o}function Yl(e){return 226===e.kind||176===e.kind?jl(e):Kl(e)}function Xl(e){switch(e.kind){case 185:return Xl(e.expression);case 194:switch(e.operatorToken.kind){case 58:return Xl(e.left);case 26:return Xl(e.right)}}return e}function Jl(e){if(257===e.kind){var t=Ja(Zg(e.expression));return qs(t)?t:void 0}return $}function ql(e){var t=an(e);if(!t.switchTypes){t.switchTypes=[];for(var n=0,o=e.caseBlock.clauses;n<o.length;n++){var r=Jl(o[n]);if(void 0===r)return t.switchTypes=W_.emptyArray;t.switchTypes.push(r)}}return t.switchTypes}function Zl(e,t){return e===t||65536&t.flags&&function(e,t){if(65536&e.flags){for(var n=0,o=e.types;n<o.length;n++){var r=o[n];if(!ka(t.types,r))return!1}return!0}return!!(256&e.flags&&hr(e)===t)||ka(t.types,e)}(e,t)}function $l(e,t){return 65536&e.flags?W_.forEach(e.types,t):t(e)}function Ql(e,t){if(65536&e.flags){var n=e.types,o=W_.filter(n,t);return o===n?e:Da(o)}return t(e)?e:$}function ec(e,t){if(!(65536&e.flags))return t(e);for(var n,o,r=0,i=e.types;r<i.length;r++){var a=t(i[r]);a&&(n?o?o.push(a):o=[n,a]:n=a)}return o?Aa(o):n}function tc(e,t){return Ql(e,function(e){return 0!=(e.flags&t)})}function nc(e,t){return Zl(z,e)&&wg(t,32)||Zl(j,e)&&wg(t,64)?ec(e,function(e){return 2&e.flags?tc(t,34):4&e.flags?tc(t,68):e}):e}function oc(e){return 0===e.flags}function rc(e){return 0===e.flags?e.type:e}function ic(e,t){return t?{flags:0,type:e}:e}function ac(e){return I[e.id]||(I[e.id]=(t=e,(n=Jn(256)).elementType=t,n));var t,n}function sc(e,t){var n=$s(function(e){var t=e.contextualType;e.contextualType=F;var n=Zg(e);return e.contextualType=t,n}(t));return Zl(n,e.elementType)?e:ac(Aa([e.elementType,n]))}function lc(e){return e.finalArrayType||(e.finalArrayType=8192&(t=e.elementType).flags?Ee:ma(65536&t.flags?Aa(t.types,!0):t));var t}function cc(e){return 256&sn(e)?lc(e):e}function uc(e){return 256&sn(e)?e.elementType:$}function gc(e,t){return function(e){for(var t=!1,n=0,o=e;n<o.length;n++){var r=o[n];if(!(8192&r.flags)){if(!(256&sn(r)))return!1;t=!0}}return t}(e)?ac(Aa(W_.map(e,uc))):Aa(W_.sameMap(e,cc),t)}function pc(e){var t=function e(t){var n=t.parent;return 185===n.kind||194===n.kind&&58===n.operatorToken.kind&&n.left===t||194===n.kind&&26===n.operatorToken.kind&&n.right===t?e(n):t}(e),n=t.parent,o=179===n.kind&&("length"===n.name.escapedText||181===n.parent.kind&&W_.isPushOrUnshiftIdentifier(n.name)),r=180===n.kind&&n.expression===t&&194===n.parent.kind&&58===n.parent.operatorToken.kind&&n.parent.left===n&&!W_.isAssignmentTarget(n.parent)&&Og(Zg(n.argumentExpression),84);return o||r}function dc(e){var t=an(e);return void 0===t.maybeTypePredicate&&(t.maybeTypePredicate=function(e){if(97!==e.expression.kind){var t=Tu(e.expression);if(t!==Q){var n=oi(t);if(n!==H){var o=ci(n,0);return!!W_.forEach(o,function(e){return e.typePredicate})}}}return!1}(e)),t.maybeTypePredicate}function _c(h,m,c,u,e){var y;void 0===c&&(c=m);var g=0;if(nt)return H;if(!h.flowNode||!e&&!(17810175&m.flags))return m;var p=tt,t=rc(v(h.flowNode));tt=p;var n=256&sn(t)&&pc(h)?Te:cc(t);return 203===h.parent.kind&&8192&Ml(n,524288).flags?m:n;function v(e){if(2500===g)return nt=!0,t=h,n=W_.findAncestor(t,W_.isFunctionOrModuleBlock),o=W_.getSourceFileOfNode(t),r=W_.getSpanOfTokenAtPosition(o,n.statements.pos),Tt.add(W_.createFileDiagnostic(o,r.start,r.length,W_.Diagnostics.The_containing_function_or_module_body_is_too_large_for_control_flow_analysis)),H;var t,n,o,r;for(g++;;){var i=e.flags;if(1024&i)for(var a=p;a<tt;a++)if(mt[a]===e)return g--,yt[a];var s=void 0;if(4096&i)e.locked=!0,s=v(e.antecedent),e.locked=!1;else{if(2048&i){e=e.antecedent;continue}if(16&i){if(!(s=d(e))){e=e.antecedent;continue}}else if(96&i)s=f(e);else if(128&i)s=b(e);else if(12&i){if(1===e.antecedents.length){e=e.antecedents[0];continue}s=4&i?k(e):T(e)}else if(256&i){if(!(s=_(e))){e=e.antecedent;continue}}else if(2&i){var l=e.container;if(l&&l!==u&&179!==h.kind&&99!==h.kind){e=l.flowNode;continue}s=c}else s=Kp(m)}return 1024&i&&(mt[tt]=e,yt[tt]=s,tt++),g--,s}}function d(e){var t,n=e.node;if(Il(h,n)){if(2===W_.getAssignmentTargetKind(n)){var o=v(e.antecedent);return ic($s(rc(o)),oc(o))}if(m===U||m===Ee){if(226===(t=n).kind&&t.initializer&&Mo(t.initializer)||176!==t.kind&&194===t.parent.kind&&Mo(t.parent.right))return ac($);var r=$s(Yl(n));return vs(r,m)?r:Te}return 65536&m.flags?Ll(m,Yl(n)):m}if(Nl(h,n))return m}function _(e){if(m===U||m===Ee){var t=e.node,n=181===t.kind?t.expression.expression:t.left.expression;if(Il(h,Xl(n))){var o=v(e.antecedent),r=rc(o);if(256&sn(r)){var i=r;if(181===t.kind)for(var a=0,s=t.arguments;a<s.length;a++)i=sc(i,s[a]);else Og(Zg(t.left.argumentExpression),84)&&(i=sc(i,t.right));return i===r?o:ic(i,oc(o))}return o}}}function f(e){var t=v(e.antecedent),n=rc(t);if(8192&n.flags)return t;var o=0!=(32&e.flags),r=cc(n),i=x(r,e.expression,o);if(i===r)return t;var a=oc(t);return ic(a&&8192&i.flags?Q:i,a)}function b(t){var e=v(t.antecedent),n=rc(e),o=t.switchStatement.expression;return Il(h,o)?n=r(n,t.switchStatement,t.clauseStart,t.clauseEnd):a(o,n)&&(n=s(n,o,function(e){return r(e,t.switchStatement,t.clauseStart,t.clauseEnd)})),ic(n,oc(e))}function k(e){for(var t=[],n=!1,o=!1,r=0,i=e.antecedents;r<i.length;r++){var a=i[r];if(!(2048&a.flags&&a.lock.locked)){var s=v(a),l=rc(s);if(l===m&&m===c)return l;W_.pushIfUnique(t,l),Zl(l,m)||(n=!0),oc(s)&&(o=!0)}}return ic(gc(t,n),o)}function T(e){var t,n=((t=e).id||(t.id=j_,j_++),t.id),o=dt[n]||(dt[n]=W_.createMap());if(!y&&!(y=function e(t){if(71===t.kind){var n=Al(t);return n!==N?(yc(t)?"@":"")+X_(n):void 0}if(99===t.kind)return"0";if(179===t.kind)return(r=e(t.expression))&&r+"."+W_.idText(t.name);if(176===t.kind){var o=t.parent.parent,r=176===o.kind?e(o):o.initializer&&e(o.initializer),i=Bl(t);return r&&i&&r+"."+i}}(h)))return m;var r=o.get(y);if(r)return r;for(var i=Qe;i<et;i++)if(_t[i]===e&&ft[i]===y&&ht[i].length)return ic(gc(ht[i],!1),!0);var a,s=[],l=!1;_t[et]=e,ft[et]=y,ht[et]=s;for(var c=0,u=e.antecedents;c<u.length;c++){var g=u[c];et++;var p=v(g);et--,a||(a=p);var d=rc(p),_=o.get(y);if(_)return _;if(W_.pushIfUnique(s,d),Zl(d,m)||(l=!0),d===m)break}var f=gc(s,l);return oc(a)?ic(f,!0):(o.set(y,f),f)}function a(e,t){return 179===e.kind&&65536&t.flags&&Il(h,e.expression)&&Ol(t,e.name.escapedText)}function s(e,t,n){var o=t.name.escapedText,r=Io(e,o),i=r&&n(r);return r===i?e:Ql(e,function(e){return ks(Io(e,o),i)})}function l(e,t,n){return Il(h,t)?Ml(e,n?1048576:2097152):a(t,m)?s(e,t,function(e){return Ml(e,n?1048576:2097152)}):wl(h,t)?m:e}function o(e,t,n){switch(t.operatorToken.kind){case 58:return l(e,t.left,n);case 32:case 33:case 34:case 35:var o=t.operatorToken.kind,r=Xl(t.left),i=Xl(t.right);if(189===r.kind&&9===i.kind)return S(e,r,o,i,n);if(189===i.kind&&9===r.kind)return S(e,i,o,r,n);if(Il(h,r))return E(e,o,i,n);if(Il(h,i))return E(e,o,r,n);if(a(r,m))return s(e,r,function(e){return E(e,o,i,n)});if(a(i,m))return s(e,i,function(e){return E(e,o,r,n)});if(wl(h,r)||wl(h,i))return m;break;case 93:return function(e,t,n){var o=Xl(t.left);if(!Il(h,o))return Nl(h,o)?m:e;var r,i=Zg(t.right);if(!ys(i,_e))return e;var a=si(i,"prototype");if(a){var s=qo(a);No(s)||(r=s)}if(No(e)&&(r===de||r===_e))return e;if(!r){var l=void 0;2&sn(i)?l=Ar(i).declaredConstructSignatures:16&sn(i)&&(l=ci(i,1)),l&&l.length&&(r=Aa(W_.map(l,function(e){return Si(Di(e))})))}return r?C(e,r,n,bs):e}(e,t,n);case 26:return x(e,t.right,n)}return e}function E(e,t,n,o){if(1&e.flags)return e;33!==t&&35!==t||(o=!o);var r=Zg(n);if(6144&r.flags)return A?Ml(e,32===t||33===t?o?65536:524288:95===n.kind?o?32768:262144:o?16384:131072):e;if(16810497&e.flags)return e;if(o){var i=Ql(e,function(e){return ks(t=e,n=r)||ks(n,t);var t,n});return 8192&i.flags?e:nc(i,r)}if(qs(r)){var a=Ja(r);return Ql(e,function(e){return Ja(e)!==a})}return e}function S(e,t,n,o,r){var i=Xl(t.expression);if(!Il(h,i))return Nl(h,i)?m:e;if(33!==n&&35!==n||(r=!r),r&&!(65536&e.flags)){var a=Pt.get(o.text);if(a){if(ys(a,e))return a;if(540672&e.flags&&ys(a,$r(e)||F))return Ia([e,a])}}return Ml(e,r?Rt.get(o.text)||64:Lt.get(o.text)||8192)}function r(e,t,n,o){var r=ql(t);if(!r.length)return e;var i=r.slice(n,o),a=n===o||W_.contains(i,$),s=Aa(i),l=8192&s.flags?$:nc(Ql(e,function(e){return ks(s,e)}),s);if(!a)return l;var c=Ql(e,function(e){return!(qs(e)&&W_.contains(r,Ja(e)))});return 8192&l.flags?c:Aa([l,c])}function C(e,t,n,o){if(!n)return Ql(e,function(e){return!o(e,t)});if(65536&e.flags){var r=Ql(e,function(e){return o(e,t)});if(!(8192&r.flags))return r}return ys(t,e)?t:vs(e,t)?e:vs(t,e)?t:Ia([e,t])}function i(e,t,n){if(!function(e,t){if(e.arguments)for(var n=0,o=e.arguments;n<o.length;n++)if(Rl(t,o[n]))return!0;return!(179!==e.expression.kind||!Rl(t,e.expression.expression))}(t,h)||!dc(t))return e;var o=ag(t),r=o.typePredicate;if(!r)return e;if(No(e)&&(r.type===de||r.type===_e))return e;if(W_.isIdentifierTypePredicate(r)){var i=t.arguments[r.parameterIndex-(o.thisParameter?1:0)];if(i){if(Il(h,i))return C(e,r.type,n,ys);if(Nl(h,i))return m}}else{var a=W_.skipParentheses(t.expression);if(180===a.kind||179===a.kind){var s=a,l=W_.skipParentheses(s.expression);if(Il(h,l))return C(e,r.type,n,ys);if(Nl(h,l))return m}}return e}function x(e,t,n){switch(t.kind){case 71:case 99:case 97:case 179:return l(e,t,n);case 181:return i(e,t,n);case 185:return x(e,t.expression,n);case 194:return o(e,t,n);case 192:if(51===t.operator)return x(e,t.operand,!n)}return e}}function fc(e){return W_.findAncestor(e.parent,function(e){return W_.isFunctionLike(e)&&!W_.getImmediatelyInvokedFunctionExpression(e)||234===e.kind||265===e.kind||149===e.kind})}function hc(e){var t,n=W_.getRootDeclaration(e.valueDeclaration).parent,o=an(n);return 4194304&o.flags||(o.flags|=4194304,t=n,W_.findAncestor(t.parent,function(e){return W_.isFunctionLike(e)&&!!(4194304&an(e).flags)})||mc(n)),e.isAssigned||!1}function mc(e){if(71===e.kind){if(W_.isAssignmentTarget(e)){var t=Al(e);t.valueDeclaration&&146===W_.getRootDeclaration(t.valueDeclaration).kind&&(t.isAssigned=!0)}}else W_.forEachChild(e,mc)}function yc(e){var t=e.parent;return 179===t.kind||181===t.kind&&t.expression===e||180===t.kind&&t.expression===e}function vc(e){return 540672&e.flags&&wg($r(e)||te,6144)}function bc(e,t){var n=qo(e);return yc(t)&&$l(n,vc)?ec(gl(n),oi):n}function kc(e){var t=Al(e);if(t===N)return H;if(t===B){var n=W_.getContainingFunction(e);return w<2&&(187===n.kind?qt(e,W_.Diagnostics.The_arguments_object_cannot_be_referenced_in_an_arrow_function_in_ES3_and_ES5_Consider_using_a_standard_function_expression):W_.hasModifier(n,256)&&qt(e,W_.Diagnostics.The_arguments_object_cannot_be_referenced_in_an_async_function_or_method_in_ES3_and_ES5_Consider_using_a_standard_function_or_method)),an(n).flags|=8192,qo(t)}!Tn(t,107455)||Dl(e)||$d(Sn(t))||xn(t);var o=Kn(t),r=o.valueDeclaration;if(32&o.flags)if(229===r.kind&&W_.nodeIsDecorated(r))for(n=W_.getContainingClass(e);void 0!==n;){if(n===r&&n.name!==e){an(r).flags|=8388608,an(e).flags|=16777216;break}n=W_.getContainingClass(n)}else if(199===r.kind)for(n=W_.getThisContainer(e,!1);void 0!==n;){if(n.parent===r){149===n.kind&&W_.hasModifier(n,32)&&(an(r).flags|=8388608,an(e).flags|=16777216);break}n=W_.getThisContainer(n,!1)}Hp(e,e),Pp(e,e),Mp(e,e),function(e,t){if(!(2<=w||0==(34&t.flags)||260===t.valueDeclaration.parent.kind)){for(var n,o,r=W_.getEnclosingBlockScopeContainer(t.valueDeclaration),i=(n=e.parent,o=r,!!W_.findAncestor(n,function(e){return e===o?"quit":W_.isFunctionLike(e)})),a=r,s=!1;a&&!W_.nodeStartsNewLexicalEnvironment(a);){if(W_.isIterationStatement(a,!1)){s=!0;break}a=a.parent}s&&(i&&(an(a).flags|=65536),214===r.kind&&W_.getAncestor(t.valueDeclaration,227).parent===r&&function(e,t){for(var n=e;185===n.parent.kind;)n=n.parent;var o=!1;if(W_.isAssignmentTarget(n))o=!0;else if(192===n.parent.kind||193===n.parent.kind){var r=n.parent;o=43===r.operator||44===r.operator}return!!o&&!!W_.findAncestor(n,function(e){return e===t?"quit":e===t.statement})}(e,r)&&(an(t.valueDeclaration).flags|=2097152),an(t.valueDeclaration).flags|=262144),i&&(an(t.valueDeclaration).flags|=131072)}}(e,t);var i=bc(o,e),a=W_.getAssignmentTargetKind(e);if(a){if(!(3&o.flags))return qt(e,W_.Diagnostics.Cannot_assign_to_0_because_it_is_not_a_variable,po(t)),H;if(Dg(o))return qt(e,W_.Diagnostics.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,po(t)),H}var s=2097152&o.flags;if(3&o.flags){if(1===a)return i}else{if(!s)return i;r=W_.find(t.declarations,Z_)}if(!r)return i;for(var l,c=146===W_.getRootDeclaration(r).kind,u=fc(r),g=fc(e),p=g!==u;g!==u&&(186===g.kind||187===g.kind||W_.isObjectLiteralOrClassExpressionMethod(g))&&(3&(l=o).flags&&0!=(2&vu(l))&&qo(l)!==Ee||c&&!hc(o));)g=fc(g);var d,_,f=c||s||p||i!==U&&i!==Ee&&(!A||0!=(1&i.flags)||Dl(e)||246===e.parent.kind)||203===e.parent.kind||W_.isInAmbientContext(r),h=_c(e,i,f?c?(d=i,_=W_.getRootDeclaration(r),A&&146===_.kind&&_.initializer&&2048&nl(d)&&!(2048&nl($g(_.initializer)))?Ml(d,131072):d):i:i===U||i===Ee?G:il(i,2048),g,!f);if(i===U||i===Ee){if(h===U||h===Ee)return y&&(qt(W_.getNameOfDeclaration(r),W_.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined,po(t),fo(h)),qt(e,W_.Diagnostics.Variable_0_implicitly_has_an_1_type,po(t),fo(h))),Kp(h)}else if(!f&&!(2048&nl(i))&&2048&nl(h))return qt(e,W_.Diagnostics.Variable_0_is_used_before_being_assigned,po(t)),i;return a?$s(h):h}function Tc(e,t){an(e).flags|=2,149===t.kind||152===t.kind?an(t.parent).flags|=4:an(t).flags|=4}function Ec(e){return W_.isSuperCall(e)?e:W_.isFunctionLike(e)?void 0:W_.forEachChild(e,Ec)}function Sc(e){var t=an(e);return void 0===t.hasSuperCall&&(t.superCall=Ec(e.body),t.hasSuperCall=!!t.superCall),t.superCall}function Cc(e){return ur(br(Vn(e)))===K}function xc(e,t,n){var o=t.parent;if(W_.getClassExtendsHeritageClauseElement(o)&&!Cc(o)){var r=Sc(t);(!r||r.end>e.pos)&&qt(e,n)}}function Ac(e){var t=W_.getThisContainer(e,!0),n=!1;switch(152===t.kind&&xc(e,t,W_.Diagnostics.super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class),187===t.kind&&(t=W_.getThisContainer(t,!1),n=w<2),t.kind){case 233:qt(e,W_.Diagnostics.this_cannot_be_referenced_in_a_module_or_namespace_body);break;case 232:qt(e,W_.Diagnostics.this_cannot_be_referenced_in_current_location);break;case 152:Dc(e,t)&&qt(e,W_.Diagnostics.this_cannot_be_referenced_in_constructor_arguments);break;case 149:case 148:W_.hasModifier(t,32)&&qt(e,W_.Diagnostics.this_cannot_be_referenced_in_a_static_property_initializer);break;case 144:qt(e,W_.Diagnostics.this_cannot_be_referenced_in_a_computed_property_name)}if(n&&Tc(e,t),W_.isFunctionLike(t)&&(!Oc(e)||W_.getThisParameter(t))){if(186===t.kind&&194===t.parent.kind&&3===W_.getSpecialPropertyAssignmentKind(t.parent)){var o=$g(t.parent.left.expression.expression).symbol;if(o&&o.members&&16&o.flags)return lg(o)}var r=jo(t)||Nc(t);if(r)return r}if(W_.isClassLike(t.parent)){var i,a=Vn(t.parent);return _c(e,i=W_.hasModifier(t,32)?qo(a):br(a).thisType)}return W_.isInJavaScriptFile(e)&&(i=function(e){var t=W_.getJSDocType(e);if(t&&273===t.kind){var n=t;if(0<n.parameters.length&&n.parameters[0].name&&"this"===n.parameters[0].name.escapedText)return $a(n.parameters[0].type)}}(t))&&i!==H?i:(_&&qt(e,W_.Diagnostics.this_implicitly_has_type_any_because_it_does_not_have_a_type_annotation),F)}function Dc(e,t){return!!W_.findAncestor(e,function(e){return e===t?"quit":146===e.kind})}function Bc(e){var t=181===e.parent.kind&&e.parent.expression===e,n=W_.getSuperContainer(e,!0),o=!1;if(!t)for(;n&&187===n.kind;)n=W_.getSuperContainer(n,!0),o=w<2;var r,i=0;if(!(r=n)||(t?152!==r.kind:!W_.isClassLike(r.parent)&&178!==r.parent.kind||(W_.hasModifier(r,32)?151!==r.kind&&150!==r.kind&&153!==r.kind&&154!==r.kind:151!==r.kind&&150!==r.kind&&153!==r.kind&&154!==r.kind&&149!==r.kind&&148!==r.kind&&152!==r.kind))){var a=W_.findAncestor(e,function(e){return e===n?"quit":144===e.kind});return a&&144===a.kind?qt(e,W_.Diagnostics.super_cannot_be_referenced_in_a_computed_property_name):t?qt(e,W_.Diagnostics.Super_calls_are_not_permitted_outside_constructors_or_in_nested_functions_inside_constructors):n&&n.parent&&(W_.isClassLike(n.parent)||178===n.parent.kind)?qt(e,W_.Diagnostics.super_property_access_is_permitted_only_in_a_constructor_member_function_or_member_accessor_of_a_derived_class):qt(e,W_.Diagnostics.super_can_only_be_referenced_in_members_of_derived_classes_or_object_literal_expressions),H}if(t||152!==n.kind||xc(e,n,W_.Diagnostics.super_must_be_called_before_accessing_a_property_of_super_in_the_constructor_of_a_derived_class),i=W_.hasModifier(n,32)||t?512:256,an(e).flags|=i,151===n.kind&&W_.hasModifier(n,256)&&(W_.isSuperProperty(e.parent)&&W_.isAssignmentTarget(e.parent)?an(n).flags|=4096:an(n).flags|=2048),o&&Tc(e.parent,n),178===n.parent.kind)return w<2?(qt(e,W_.Diagnostics.super_is_only_allowed_in_members_of_object_literal_expressions_when_option_target_is_ES2015_or_higher),H):F;var s=n.parent,l=br(Vn(s)),c=l&&gr(l)[0];return c?152===n.kind&&Dc(e,n)?(qt(e,W_.Diagnostics.super_cannot_be_referenced_in_constructor_arguments),H):512===i?ur(l):Dr(c,l.thisType):(W_.getClassExtendsHeritageClauseElement(s)||qt(e,W_.Diagnostics.super_can_only_be_referenced_in_a_derived_class),H)}function Ic(e){return 4&sn(e)&&e.target===ke?e.typeArguments[0]:void 0}function Nc(e){if(187!==e.kind){if(ds(e)){var t=Yc(e);if(t){var n=t.thisParameter;if(n)return qo(n)}}var o,r=W_.isInJavaScriptFile(e);if(_||r){var i=151!==(o=e).kind&&153!==o.kind&&154!==o.kind||178!==o.parent.kind?186===o.kind&&261===o.parent.kind?o.parent.parent:void 0:o.parent;if(i){for(var a=Hc(i),s=i,l=a;l;){var c=ec(l,function(e){return 131072&e.flags?W_.forEach(e.types,Ic):Ic(e)});if(c)return cs(c,Vc(i));if(261!==s.parent.kind)break;l=Hc(s=s.parent.parent)}return a?al(a):zg(i)}var u=e.parent;if(194===u.kind&&58===u.operatorToken.kind){var g=u.left;if(179===g.kind||180===g.kind){var p=g.expression;if(r&&W_.isIdentifier(p)){var d=W_.getSourceFileOfNode(u);if(d.commonJsModuleIndicator&&Al(p)===d.symbol)return}return zg(p)}}}}}function wc(e){var t=e.parent;if(ds(t)){var n=W_.getImmediatelyInvokedFunctionExpression(t);if(n&&n.arguments){var o=W_.indexOf(t.parameters,e);if(e.dotDotDotToken){for(var r=[],i=o;i<n.arguments.length;i++)r.push(Qs($g(n.arguments[i])));return r.length?ma(Aa(r)):void 0}var a=an(n),s=a.resolvedSignature;a.resolvedSignature=je;var l=o<n.arguments.length?Qs($g(n.arguments[o])):e.initializer?void 0:V;return a.resolvedSignature=s,l}var c=Yc(t);if(c){var u=W_.hasRestParameter(t),g=t.parameters.length-(u?1:0);if(o=W_.indexOf(t.parameters,e),void 0===W_.getThisParameter(t)||c.thisParameter||(W_.Debug.assert(0!==o),o-=1),o<g)return fg(c,o);if(u&&o===t.parameters.length-1&&zs(c,t.parameters.length-1))return qo(W_.lastOrUndefined(c.parameters))}}}function Oc(e){for(;e.parent&&!W_.isFunctionLike(e.parent);){if(146===e.parent.kind&&e.parent.initializer===e)return!0;e=e.parent}return!1}function Rc(e){if(152===e.kind||W_.getEffectiveReturnTypeNode(e)||rd(e))return Si(ki(e));var t,n=zc(e);return!n||!(t=n).resolvedReturnType&&0<=Ao(t,3)?void 0:Si(n)}function Lc(e,t){var n=ju(e),o=W_.indexOf(n,t);if(0<=o)return fg(an(e).resolvedSignature===Xe?Xe:ag(e),o)}function Pc(e,n){return ec(e,function(e){var t=229376&e.flags?si(e,n):void 0;return t?qo(t):void 0})}function Mc(e,t){return ec(e,function(e){return gi(e,t)})}function Fc(e){var t=Hc(e.parent);if(t){if(!W_.hasDynamicName(e)){var n=Pc(t,Vn(e).escapedName);if(n)return n}return qc(e.name)&&Mc(t,1)||Mc(t,0)}}function Uc(e,t){return e&&(Pc(e,""+t)||Mc(e,1)||Qp(e,void 0,!1,!1,!1))}function Hc(e){var t=Gc(e);return t&&oi(t)}function Gc(e){if(!wd(e)){if(e.contextualType)return e.contextualType;var t,n,o=e.parent;switch(o.kind){case 226:case 146:case 149:case 148:case 176:return function(e){var t=e.parent;if(e===t.initializer){var n=W_.getEffectiveTypeAnnotationNode(t);if(n)return $a(n);if(146===t.kind){var o=wc(t);if(o)return o}if(W_.isBindingPattern(t.name))return Go(t.name,!0,!1);if(W_.isBindingPattern(t.parent)){var r=t.parent.parent,i=t.propertyName||t.name;if(176!==r.kind){var a=W_.getEffectiveTypeAnnotationNode(r);if(a&&!W_.isBindingPattern(i)){var s=W_.getTextOfPropertyName(i);if(s)return Io($a(a),s)}}}}}(e);case 187:case 219:return function(e){var t=W_.getContainingFunction(e);if(t){var n=W_.getFunctionFlags(t);if(1&n)return;var o=Rc(t);return 2&n?o&&hp(o):o}}(e);case 197:return function(e){var t=W_.getContainingFunction(e);if(t){var n=W_.getFunctionFlags(t),o=Rc(t);if(o)return e.asteriskToken?o:nd(o,0!=(2&n))}}(o);case 181:case 182:return Lc(o,e);case 184:case 202:return $a(o.type);case 194:return function(e){var t=e.parent,n=t.operatorToken.kind;if(W_.isAssignmentOperator(n)){if(e===t.right){switch(W_.getSpecialPropertyAssignmentKind(t)){case 0:break;case 5:if(!t.left.symbol)break;case 1:case 2:case 3:case 4:return}return Zg(t.left)}}else{if(54===n){var o=Gc(t);return o||e!==t.right||(o=Zg(t.left,!0)),o}if((53===n||26===n)&&e===t.right)return Gc(t)}}(e);case 261:case 262:return Fc(o);case 263:return Hc(o.parent);case 177:var r=o;return Uc(Hc(r),W_.indexOfNode(r.elements,e));case 195:return n=(t=e).parent,t===n.whenTrue||t===n.whenFalse?Gc(n):void 0;case 205:return W_.Debug.assert(196===o.parent.kind),function(e,t){if(183===e.parent.kind)return Lc(e.parent,t)}(o.parent,e);case 185:var i=W_.isInJavaScriptFile(o)?W_.getJSDocTypeTag(o):void 0;return i?$a(i.typeExpression.type):Gc(o);case 256:return function(e){var t=Gc(W_.isJsxAttributeLike(e.parent)?e.parent.parent:e.parent.openingElement.attributes);if(t&&!No(t)){if(W_.isJsxAttribute(e.parent))return Pc(t,e.parent.name.escapedText);if(249===e.parent.kind){var n=cu();return n&&""!==n?Pc(t,n):F}return t}}(o);case 253:case 255:return function(e){var t=Gc(e.parent);if(W_.isJsxAttribute(e)){if(!t||No(t))return;return Pc(t,e.name.escapedText)}return t}(o);case 251:case 250:return _u(o)}}}function Vc(e){return(e=W_.findAncestor(e,function(e){return!!e.contextualMapper}))?e.contextualMapper:E}function Wc(e,t){var n=li(e,0);if(1===n.length){var o=n[0];if(!function(e,t){for(var n=0;n<t.parameters.length;n++){var o=t.parameters[n];if(o.initializer||o.questionToken||o.dotDotDotToken||hi(o))break}return t.parameters.length&&W_.parameterIsThisKeyword(t.parameters[0])&&n--,(e.hasRestParameter?Number.MAX_VALUE:e.parameters.length)<n}(o,t))return o}}function Kc(e){return 186===e.kind||187===e.kind}function zc(e){return Kc(e)||W_.isObjectLiteralMethod(e)?Yc(e):void 0}function jc(e){return W_.isObjectLiteralMethod(e)?function(e){if(W_.Debug.assert(W_.isObjectLiteralMethod(e)),!wd(e))return Fc(e)}(e):Hc(e)}function Yc(e){W_.Debug.assert(151!==e.kind||W_.isObjectLiteralMethod(e));var t=jc(e);if(t){if(!(65536&t.flags))return Wc(t,e);for(var n,o,r=0,i=t.types;r<i.length;r++){var a=Wc(i[r],e);if(a)if(n){if(!Ks(n[0],a,!1,!0,!0,hs))return;n.push(a)}else n=[a]}return n&&((o=Nr(n[0])).resolvedReturnType=void 0,o.unionSignatures=n),o}}function Xc(e){return 176===e.kind&&!!e.initializer||194===e.kind&&58===e.operatorToken.kind}function Jc(e,t){for(var n,o=e.elements,r=!1,i=[],a=W_.isAssignmentTarget(e),s=Hc(e),l=0;l<o.length;l++){var c=o[l];if(a&&198===c.kind){var u=$g(c.expression,t),g=di(u,1)||Qp(u,void 0,!1,!1,!1);g&&i.push(g)}else{var p=Jg(c,t,Uc(s,l));i.push(p)}r=r||198===c.kind}if(!r){if(a&&i.length)return(p=Hi(va(i))).pattern=e,p;var d=Hc(e);if(d&&(65536&(n=d).flags?W_.forEach(n.types,Js):Js(n))){var _=d.pattern;if(_&&(175===_.kind||177===_.kind))for(var f=_.elements,h=i.length;h<f.length;h++){var m=f[h];Xc(m)?i.push(d.typeArguments[h]):(200!==m.kind&&qt(m,W_.Diagnostics.Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value),i.push(H))}if(i.length)return va(i)}}return ma(i.length?Aa(i,!0):A?$:V)}function qc(e){switch(e.kind){case 144:return Og($c(e),84);case 71:return Zc(e.escapedText);case 8:case 9:return Zc(e.text);default:return!1}}function Zc(e){return(+e).toString()===e}function $c(e){var t=an(e.expression);return t.resolvedType||(t.resolvedType=$g(e.expression),6144&t.resolvedType.flags||!Og(t.resolvedType,262774)&&!vs(t.resolvedType,Aa([z,j,q]))?qt(e,W_.Diagnostics.A_computed_property_name_must_be_of_type_string_number_symbol_or_any):Ru(e.expression,t.resolvedType,!0)),t.resolvedType}function Qc(e,t,n,o){for(var r=[],i=0;i<n.length;i++)(0===o||qc(e[i+t].name))&&r.push(qo(n[i]));return Oi(r.length?Aa(r,!0):G,!1)}function eu(r,e){var t,n,o,i,a=W_.isAssignmentTarget(r);!function(e,t){for(var n=W_.createUnderscoreEscapedMap(),o=0,r=e.properties;o<r.length;o++){var i=r[o];if(263!==i.kind){var a=i.name;if(144===a.kind&&D_(a),262===i.kind&&!t&&i.objectAssignmentInitializer)return H_(i.equalsToken,W_.Diagnostics.can_only_be_used_in_an_object_literal_property_inside_a_destructuring_assignment);if(i.modifiers)for(var s=0,l=i.modifiers;s<l.length;s++){var c=l[s];120===c.kind&&151===i.kind||H_(c,W_.Diagnostics._0_modifier_cannot_be_used_here,W_.getTextOfNode(c))}var u=void 0;261===i.kind||262===i.kind?(I_(i.questionToken,W_.Diagnostics.An_object_member_cannot_be_declared_optional),8===a.kind&&V_(a),u=1):151===i.kind?u=1:153===i.kind?u=2:154===i.kind?u=4:W_.Debug.assertNever(i,"Unexpected syntax kind:"+i.kind);var g=W_.getPropertyNameForPropertyNameNode(a);if(void 0!==g){var p=n.get(g);if(p)if(1===u&&1===p)H_(a,W_.Diagnostics.Duplicate_identifier_0,W_.getTextOfNode(a));else{if(!(6&u&&6&p))return H_(a,W_.Diagnostics.An_object_literal_cannot_have_property_and_accessor_with_the_same_name);if(6===p||u===p)return H_(a,W_.Diagnostics.An_object_literal_cannot_have_multiple_get_Slashset_accessors_with_the_same_name);n.set(g,u|p)}else n.set(g,u)}}}}(r,a);for(var s=W_.createSymbolTable(),l=[],c=te,u=0,g=Hc(r),p=g&&g.pattern&&(174===g.pattern.kind||178===g.pattern.kind),d=!g&&W_.isInJavaScriptFile(r),_=0,f=!1,h=!1,m=!1,y=W_.isInJavaScriptFile(r),v=0,b=0;b<r.properties.length;b++){var k=r.properties[b],T=k.symbol,E=void 0;if(261===k.kind||262===k.kind||W_.isObjectLiteralMethod(k)){var S=void 0;y&&(S=Po(k));var C=void 0;if(261===k.kind){if(144===k.name.kind){var x=$c(k.name);224&x.flags&&(E=W_.escapeLeadingUnderscores(""+x.value))}i=e,144===(o=k).name.kind&&$c(o.name),C=Jg(o.initializer,i)}else 151===k.kind?(n=e,R_(t=k),144===t.name.kind&&$c(t.name),C=qg(t,Cg(t,n),n)):(W_.Debug.assert(262===k.kind),C=Jg(k.name,e));S&&(Ts(C,S,k),C=S),_|=C.flags;var A=Zt(4|T.flags,E||T.escapedName);if(a)(261===k.kind&&Xc(k.initializer)||262===k.kind&&k.objectAssignmentInitializer)&&(A.flags|=16777216),!E&&W_.hasDynamicName(k)&&(f=!0);else if(p&&!(512&sn(g))){var D=si(g,T.escapedName);D?A.flags|=16777216&D.flags:O.suppressExcessPropertyErrors||pi(g,0)||qt(k.name,W_.Diagnostics.Object_literal_may_only_specify_known_properties_and_0_does_not_exist_in_type_1,po(T),fo(g))}A.declarations=T.declarations,A.parent=T.parent,T.valueDeclaration&&(A.valueDeclaration=T.valueDeclaration),A.type=C,A.target=T,T=A}else{if(263===k.kind){if(w<2&&h_(k,2),0<l.length&&(c=Ka(c,N(),r.symbol,u),l=[],s=W_.createSymbolTable(),m=h=!1,_=0),!tu(C=$g(k.expression)))return qt(k,W_.Diagnostics.Spread_types_may_only_be_created_from_object_types),H;c=Ka(c,C,r.symbol,u),v=b+1;continue}W_.Debug.assert(153===k.kind||154===k.kind),Dd(k)}!E&&W_.hasDynamicName(k)?qc(k.name)?m=!0:h=!0:s.set(T.escapedName,T),l.push(T)}if(p)for(var B=0,I=Jr(g);B<I.length;B++)A=I[B],s.get(A.escapedName)||(16777216&A.flags||qt(A.valueDeclaration||A.bindingElement,W_.Diagnostics.Initializer_provides_no_value_for_this_binding_element_and_the_binding_element_has_no_default_value),s.set(A.escapedName,A),l.push(A));return c!==te?(0<l.length&&(c=Ka(c,N(),r.symbol,u)),c):N();function N(){var e=d?Ze:h?Qc(r.properties,v,l,0):void 0,t=m&&!d?Qc(r.properties,v,l,1):void 0,n=Qn(r.symbol,s,W_.emptyArray,W_.emptyArray,e,t),o=O.suppressExcessPropertyErrors?0:1048576;return n.flags|=4194304|o|14680064&_,n.objectFlags|=128,f&&(n.objectFlags|=512),a&&(n.pattern=r),6144&n.flags||(u|=14680064&n.flags),n}}function tu(e){return!!(16777217&e.flags||7392&nl(e)&&tu(ol(e))||32768&e.flags&&!zr(e)||196608&e.flags&&!W_.forEach(e.types,function(e){return!tu(e)}))}function nu(e){return!W_.stringContains(e,"-")}function ou(e){switch(e.kind){case 179:case 99:return!1;case 71:return W_.isIntrinsicJsxName(e.escapedText);default:W_.Debug.fail()}}function ru(e,t,n){for(var o,r=e.attributes,i=W_.createSymbolTable(),a=te,s=[],l=!1,c=!1,u=cu(),g=0,p=r.properties;g<p.length;g++){var d=p[g],_=d.symbol;if(W_.isJsxAttribute(d)){var f=d.initializer?$g(d.initializer,n):Y,h=Zt(33554436|_.flags,_.escapedName);h.declarations=_.declarations,h.parent=_.parent,_.valueDeclaration&&(h.valueDeclaration=_.valueDeclaration),h.type=f,h.target=_,i.set(h.escapedName,h),s.push(h),d.name.escapedText===u&&(c=!0)}else W_.Debug.assert(255===d.kind),0<s.length&&(a=Ka(a,A(r.symbol,i),e.symbol,0),s=[],i=W_.createSymbolTable()),No(f=$g(d.expression))&&(l=!0),tu(f)?a=Ka(a,f,e.symbol,0):o=o?Ia([o,f]):f}if(!l){a!==te&&(0<s.length&&(a=Ka(a,A(r.symbol,i),e.symbol,0)),s=Jr(a)),i=W_.createSymbolTable();for(var m=0,y=s;m<y.length;m++){var v=y[m];t&&!t(v)||i.set(v.escapedName,v)}}var b=249===e.parent.kind?e.parent:void 0;if(b&&b.openingElement===e&&0<b.children.length){for(var k=[],T=0,E=b.children;T<E.length;T++){var S=E[T];10===S.kind?S.containsOnlyWhiteSpaces||k.push(z):k.push($g(S,n))}if(!l&&u&&""!==u){c&&qt(r,W_.Diagnostics._0_are_specified_twice_The_attribute_named_0_will_be_overwritten,W_.unescapeLeadingUnderscores(u));var C=Zt(33554436,u);C.type=1===k.length?k[0]:ma(Aa(k,!1)),i.set(u,C)}}if(l)return F;var x=A(r.symbol,i);return o&&i.size?Ia([o,x]):o||x;function A(e,t){var n=Qn(e,t,W_.emptyArray,W_.emptyArray,void 0,void 0);return n.flags|=37748736,n.objectFlags|=128,n}}function iu(e){var t=Ht.get(e);return void 0===t&&Ht.set(e,t=ga(Gt.JSX,e)||H),t}function au(e){var t=an(e);if(!t.resolvedSymbol){var n=iu(Gt.IntrinsicElements);if(n!==H){if(!W_.isIdentifier(e.tagName))throw W_.Debug.fail();var o=si(n,e.tagName.escapedText);return o?(t.jsxFlags|=1,t.resolvedSymbol=o):di(n,0)?(t.jsxFlags|=2,t.resolvedSymbol=n.symbol):(qt(e,W_.Diagnostics.Property_0_does_not_exist_on_type_1,W_.idText(e.tagName),"JSX."+Gt.IntrinsicElements),t.resolvedSymbol=N)}return y&&qt(e,W_.Diagnostics.JSX_element_implicitly_has_type_any_because_no_interface_JSX_0_exists,W_.unescapeLeadingUnderscores(Gt.IntrinsicElements)),t.resolvedSymbol=N}return t.resolvedSymbol}function su(e){var t=Qi(Gt.JSX,1920,void 0),n=t&&cn(t.exports,e,793064),o=n&&br(n),r=o&&Jr(o);if(r){if(0===r.length)return"";if(1===r.length)return r[0].escapedName;1<r.length&&qt(n.declarations[0],W_.Diagnostics.The_global_type_JSX_0_may_not_have_more_than_one_property,W_.unescapeLeadingUnderscores(e))}}function lu(){return Ft||(Ft=!0,Ct=su(Gt.ElementAttributesPropertyNameContainer)),Ct}function cu(){return Ut||(Ut=!0,xt=su(Gt.ElementChildrenAttributeNameContainer)),xt}function uu(e){if(e){if(131072&e.flags){for(var t=[],n=0,o=e.types;n<o.length;n++){var r=o[n];t.push(oi(r))}return Ia(t)}return oi(e)}}function gu(t,n,e,o){if(void 0===e&&(e=$g(t.tagName)),65536&e.flags)return Aa(e.types.map(function(e){return gu(t,n,e,o)}),!0);if(2&e.flags)return F;if(32&e.flags){var r=iu(Gt.IntrinsicElements);if(r!==H){var i=e.value,a=si(r,W_.escapeLeadingUnderscores(i));if(a)return qo(a);var s=di(r,0);if(s)return s;qt(t,W_.Diagnostics.Property_0_does_not_exist_on_type_1,i,"JSX."+Gt.IntrinsicElements)}return F}var l=function(e,t){if(W_.Debug.assert(!(65536&t.flags)),No(t))return F;var n=ci(t,1);if(0===n.length&&0===(n=ci(t,0)).length)return qt(e.tagName,W_.Diagnostics.JSX_element_type_0_does_not_have_any_construct_or_call_signatures,W_.getTextOfNode(e.tagName)),H;for(var o=[],r=0,i=n;r<i.length;r++){var a=i[r];if(a.typeParameters){var s=W_.isInJavaScriptFile(e),l=bi(void 0,a.typeParameters,0,s);o.push(xi(a,l,s))}else o.push(a)}return Aa(W_.map(o,Si),!0)}(t,e),c=n?function(e,t,n,o){if(W_.Debug.assert(!(65536&t.flags)),!o||!vs(n,o)){var r=hu();if(r){var i=[];og(e,t,i);for(var a=void 0,s=void 0,l=0,c=i;l<c.length;l++){var u=c[l],g=Si(u),p=g&&(0===u.parameters.length?te:qo(u.parameters[0]));if(p=uu(p),g&&vs(g,r)){for(var d=!0,_=0,f=e.attributes.properties;_<f.length;_++){var h=f[_];if(W_.isJsxAttribute(h)&&nu(h.name.escapedText)&&!si(p,h.name.escapedText)){d=!1;break}}d&&(a=Pr(a,p)),s=Pr(s,p)}}a||(a=s);var m=iu(Gt.IntrinsicAttributes);return m!==H&&(a=Pr(m,a)),a}}}(t,e,l,o):function(e,t,n,o){if(W_.Debug.assert(!(65536&t.flags)),!o||!vs(n,o)){var r=hu();if(r){var i=og(e,t,void 0);if(i!==Ye){var a=i&&Si(i),s=a&&(0===i.parameters.length?te:qo(i.parameters[0]));if(s=uu(s),a&&vs(a,r)){var l=iu(Gt.IntrinsicAttributes);return l!==H&&(s=Pr(l,s)),s}}}}}(t,e,l,o);if(c)return c;if(o&&Ns(l,o,Wt,t,W_.Diagnostics.JSX_element_type_0_is_not_a_constructor_function_for_JSX_elements),No(l))return l;var u=lu();if(void 0===u)return F;if(""===u)return l;var g=Io(l,u);if(g){if(No(g)||g===H)return g;var p=g,d=iu(Gt.IntrinsicClassAttributes);if(d!==H){var _=or(d.symbol);_?1===_.length&&(p=Pr(Ui(d,[l]),p)):p=Pr(g,d)}var f=iu(Gt.IntrinsicAttributes);return f!==H&&(p=Pr(f,p)),p}return te}function pu(e){W_.Debug.assert(ou(e.tagName));var t=an(e);if(!t.resolvedJsxElementAttributesType){var n=au(e);return 1&t.jsxFlags?t.resolvedJsxElementAttributesType=qo(n):2&t.jsxFlags?t.resolvedJsxElementAttributesType=Ri(n,0).type:t.resolvedJsxElementAttributesType=H}return t.resolvedJsxElementAttributesType}function du(e,t){var n=an(e),o=t?"resolvedJsxElementAllAttributesType":"resolvedJsxElementAttributesType";if(!n[o]){var r=(Fe||(Fe=ga(Gt.JSX,Gt.ElementClass)),Fe);return n[o]=gu(e,t,void 0,r)}return n[o]}function _u(e){return ou(e.tagName)?pu(e):du(e,!1)}function fu(){return Ue||(Ue=ga(Gt.JSX,Gt.Element)),Ue}function hu(){if(!He){var e=fu();e&&(He=Aa([e,W]))}return He}function mu(e){var t;!function(e){for(var t=W_.createUnderscoreEscapedMap(),n=0,o=e.attributes.properties;n<o.length;n++){var r=o[n];if(255!==r.kind){var i=r,a=i.name;if(t.get(a.escapedText))return H_(a,W_.Diagnostics.JSX_elements_cannot_have_multiple_attributes_with_the_same_name);t.set(a.escapedText,!0);var s=i.initializer;if(s&&256===s.kind&&!s.expression)return H_(i.initializer,W_.Diagnostics.JSX_attributes_must_only_be_assigned_a_non_empty_expression)}}}(e),t=e,0===(O.jsx||0)&&qt(t,W_.Diagnostics.Cannot_use_JSX_unless_the_jsx_flag_is_provided),void 0===fu()&&y&&qt(t,W_.Diagnostics.JSX_element_implicitly_has_type_any_because_the_global_type_JSX_Element_does_not_exist);var n=Tt&&2===O.jsx?W_.Diagnostics.Cannot_find_name_0:void 0,o=Jt(),r=gn(e.tagName,o,107455,n,o,!0);r&&(r.isReferenced=!0,2097152&r.flags&&!$d(Sn(r))&&xn(r)),function(e){var t=ou(e.tagName)?pu(e):du(e,!1),n=ru(e,function(e){return nu(e.escapedName)||!!si(t,e.escapedName)});if(t===te&&(No(n)||0<n.properties.length))qt(e,W_.Diagnostics.JSX_element_class_does_not_support_attributes_because_it_does_not_have_a_0_property,W_.unescapeLeadingUnderscores(lu()));else{var o=Ts(n,t,0<e.attributes.properties.length?e.attributes:e);if(o&&!No(n)&&!No(t))for(var r=0,i=e.attributes.properties;r<i.length;r++){var a=i[r];if(W_.isJsxAttribute(a)&&!yu(t,a.name.escapedText,!0)){qt(a,W_.Diagnostics.Property_0_does_not_exist_on_type_1,W_.idText(a.name),fo(t));break}}}}(e)}function yu(e,t,n){if(32768&e.flags){var o=jr(e);if(o.stringIndexInfo||o.numberIndexInfo&&Zc(t)||Xr(e,t)||n&&!nu(t))return!0}else if(196608&e.flags)for(var r=0,i=e.types;r<i.length;r++)if(yu(i[r],t,n))return!0;return!1}function vu(e){return e.valueDeclaration?W_.getCombinedNodeFlags(e.valueDeclaration):0}function bu(e){return!!(8192&e.flags||4&W_.getCheckFlags(e))}function ku(e,t,n,o){var r=W_.getDeclarationModifierFlagsFromSymbol(o),i=179===e.kind||226===e.kind?e.name:e.right;if(256&W_.getCheckFlags(o))return qt(i,W_.Diagnostics.Property_0_has_conflicting_declarations_and_is_inaccessible_in_type_1,po(o),fo(n)),!1;if(97===t.kind){if(w<2&&Fs(o,function(e){var t,n=(t=e).valueDeclaration?t.valueDeclaration.kind:149;return 151!==n&&150!==n}))return qt(i,W_.Diagnostics.Only_public_and_protected_methods_of_the_base_class_are_accessible_via_the_super_keyword),!1;if(128&r)return qt(i,W_.Diagnostics.Abstract_method_0_in_class_1_cannot_be_accessed_via_super_expression,po(o),fo(Us(o))),!1}if(!(24&r))return!0;if(8&r)return!!Pd(e,dd(Wn(o)))||(qt(i,W_.Diagnostics.Property_0_is_private_and_only_accessible_within_class_1,po(o),fo(Us(o))),!1);if(97===t.kind)return!0;var a=Ld(e,function(e){var t,n=br(Vn(e));return t=n,(Fs(o,function(e){return!!(16&W_.getDeclarationModifierFlagsFromSymbol(e))&&!Qo(t,Us(e))})?void 0:t)?n:void 0});return a?!!(32&r)||(16384&n.flags&&n.isThisType&&(n=qr(n)),!!(3&sn($o(n))&&Qo(n,a))||(qt(i,W_.Diagnostics.Property_0_is_protected_and_only_accessible_through_an_instance_of_class_1,po(o),fo(a)),!1)):(qt(i,W_.Diagnostics.Property_0_is_protected_and_only_accessible_within_class_1_and_its_subclasses,po(o),fo(Us(o)||n)),!1)}function Tu(e){return Eu($g(e),e)}function Eu(e,t){var n=6144&(A?nl(e):e.flags);if(n){qt(t,2048&n?4096&n?W_.Diagnostics.Object_is_possibly_null_or_undefined:W_.Diagnostics.Object_is_possibly_undefined:W_.Diagnostics.Object_is_possibly_null);var o=al(e);return 14336&o.flags?H:o}return e}function Su(e){return xu(e,e.expression,e.name)}function Cu(e){return xu(e,e.left,e.right)}function xu(e,t,n){var o=Tu(t);if(No(o)||o===Q)return o;var r=oi(gl(o));if(r===H||16384&o.flags&&No(r))return r;var i,a,s,l,c,u=si(r,n.escapedText);if(!u){var g=pi(r,0);return g&&g.type?(g.isReadonly&&(W_.isAssignmentTarget(e)||W_.isDeleteTarget(e))&&qt(e,W_.Diagnostics.Index_signature_in_type_0_only_permits_reading,fo(r)),g.type):(n.escapedText&&!fn(e)&&function(e,t){var n;if(65536&t.flags&&!(8190&t.flags))for(var o=0,r=t.types;o<r.length;o++){var i=r[o];if(!si(i,e.escapedText)){n=W_.chainDiagnosticMessages(n,W_.Diagnostics.Property_0_does_not_exist_on_type_1,W_.declarationNameToString(e),fo(i));break}}var a=Du(e,t);n=void 0!==a?W_.chainDiagnosticMessages(n,W_.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2,W_.declarationNameToString(e),fo(t),a):W_.chainDiagnosticMessages(n,W_.Diagnostics.Property_0_does_not_exist_on_type_1,W_.declarationNameToString(e),fo(t)),Tt.add(W_.createDiagnosticForNodeFromMessageChain(e,n))}(n,16384&o.flags&&o.isThisType?r:o),H)}a=e,s=n,(c=(i=u).valueDeclaration)&&(l=a,!W_.findAncestor(l,function(e){switch(e.kind){case 149:return!0;case 261:return!1;default:return!W_.isPartOfExpression(e)&&"quit"}})||un(c,s)||function(e){for(var t=qo(e.parent);;){if(!(t=Au(t)))return!1;var n=Xr(t,e.escapedName);if(n&&n.valueDeclaration)return!0}}(i)?229!==c.kind||159===a.parent.kind||W_.isInAmbientContext(c)||un(c,s)||qt(s,W_.Diagnostics.Class_0_used_before_its_declaration,W_.idText(s)):qt(s,W_.Diagnostics.Block_scoped_variable_0_used_before_its_declaration,W_.idText(s))),Nu(u,e,99===t.kind),ku(e,t,r,an(e).resolvedSymbol=u);var p=bc(u,e),d=W_.getAssignmentTargetKind(e);if(d&&(Bg(e,u)||Ig(e)))return qt(n,W_.Diagnostics.Cannot_assign_to_0_because_it_is_a_constant_or_a_read_only_property,W_.idText(n)),H;if(179!==e.kind||1===d||!(98311&u.flags||8192&u.flags&&65536&p.flags))return p;var _=_c(e,p);return d?$s(_):_}function Au(e){var t=gr(e);if(0!==t.length)return W_.Debug.assert(1===t.length),t[0]}function Du(e,t){var n=Iu(W_.idText(e),Jr(t),107455);return n&&W_.symbolName(n)}function Bu(e,t,n){var o=pn(e,t,n,void 0,t,!1,function(e,t,n){return cn(e,t,n)||Iu(W_.unescapeLeadingUnderscores(t),W_.arrayFrom(e.values()),n)});return o&&W_.symbolName(o)}function Iu(e,t,n){var o=.4*e.length,r=Math.min(3,.34*e.length),i=Number.MAX_VALUE,a=void 0,s=!1;if(!(30<e.length)){e=e.toLowerCase();for(var l=0,c=t;l<c.length;l++){var u=c[l],g=W_.symbolName(u);if(u.flags&n&&g&&Math.abs(g.length-e.length)<r){if((g=g.toLowerCase())===e)return u;if(s)continue;if(g.length<3||e.length<3||"eval"===g||"intl"===g||"undefined"===g||"map"===g||"nan"===g||"set"===g)continue;var p=W_.levenshtein(e,g);if(o<p)continue;p<3?(s=!0,a=u):p<i&&(i=p,a=u)}}return a}}function Nu(e,t,n){if(e&&D&&106500&e.flags&&e.valueDeclaration&&W_.hasModifier(e.valueDeclaration,8)&&(!t||!W_.isWriteOnlyAccess(t))){if(n){var o=W_.findAncestor(t,W_.isFunctionLikeDeclaration);if(o&&o.symbol===e)return}1&W_.getCheckFlags(e)?rn(e).target.isReferenced=!0:e.isReferenced=!0}}function wu(e){var t=e.initializer;if(227===t.kind){var n=t.declarations[0];if(n&&!W_.isBindingPattern(n.name))return Vn(n)}else if(71===t.kind)return Al(t)}function Ou(e){var t=Tu(e.expression),n=e.argumentExpression;if(!n){var o,r=W_.getSourceFileOfNode(e);return 182===e.parent.kind&&e.parent.expression===e?U_(r,o=W_.skipTrivia(r.text,e.expression.end),e.end-o,W_.Diagnostics.new_T_cannot_be_used_to_create_an_array_Use_new_Array_T_instead):U_(r,o=e.end-"]".length,e.end-o,W_.Diagnostics.Expression_expected),H}var i=function(e){var t,n=W_.skipParentheses(e);if(71===n.kind){var o=Al(n);if(3&o.flags)for(var r=e,i=e.parent;i;){if(215===i.kind&&r===i.statement&&wu(i)===o&&di(t=Zg(i.expression),1)&&!di(t,0))return!0;i=(r=i).parent}}return!1}(n)?j:$g(n);return t===H||t===Q?t:Rg(t)&&9!==n.kind?(qt(n,W_.Diagnostics.A_const_enum_member_can_only_be_accessed_using_a_string_literal),H):gp(Fa(t,i,e),e)}function Ru(e,t,n){if(t===H)return!1;if(!W_.isWellKnownSymbolSyntactically(e))return!1;if(0==(512&t.flags))return n&&qt(e,W_.Diagnostics.A_computed_property_name_of_the_form_0_must_be_of_type_symbol,W_.getTextOfNode(e)),!1;var o=e.expression,r=Al(o);if(!r)return!1;var i,a=(i=!0,Ce||(Ce=$i("Symbol",i)));return!(!a||r!==a&&(n&&qt(o,W_.Diagnostics.Symbol_reference_does_not_refer_to_the_global_Symbol_constructor_object),1))}function Lu(e){return W_.isCallOrNewExpression(e)}function Pu(e){return Lu(e)&&W_.forEach(e.typeArguments,Ad),183===e.kind?$g(e.template):147!==e.kind&&W_.forEach(e.arguments,function(e){$g(e)}),je}function Mu(e){return Pu(e),Ye}function Fu(e){for(var t=0;t<e.length;t++){var n=e[t];if(n&&198===n.kind)return t}return-1}function Uu(e,t,n,o){var r,i,a;void 0===o&&(o=!1);var s=-1;if(W_.isJsxOpeningLikeElement(e))return!0;if(183===e.kind){var l=e;if(r=t.length,i=void 0,196===l.template.kind){var c=l.template,u=W_.lastOrUndefined(c.templateSpans);W_.Debug.assert(void 0!==u),a=W_.nodeIsMissing(u.literal)||!!u.literal.isUnterminated}else{var g=l.template;W_.Debug.assert(13===g.kind),a=!!g.isUnterminated}}else if(147===e.kind)r=Yu(e,i=void 0,n);else{var p=e;if(!p.arguments)return W_.Debug.assert(182===p.kind),0===n.minArgumentCount;r=o?t.length+1:t.length,a=p.arguments.end===p.end,i=p.typeArguments,s=Fu(t)}var d=W_.length(n.typeParameters),_=vi(n.typeParameters);if(i&&!(i.length>=_&&i.length<=d))return!1;if(0<=s)return zs(n,s)||s>=n.minArgumentCount;if(!n.hasRestParameter&&r>n.parameters.length)return!1;var f=r>=n.minArgumentCount;return a||f}function Hu(e){if(32768&e.flags){var t=jr(e);if(1===t.callSignatures.length&&0===t.constructSignatures.length&&0===t.properties.length&&!t.stringIndexInfo&&!t.numberIndexInfo)return t.callSignatures[0]}}function Gu(e,t,n,o){var r=fl(e,1,o);return _l(t,e,function(e,t){kl(r.inferences,cs(e,n||E),t)}),n||kl(r.inferences,Si(t),Si(e),8),xi(e,xl(r),W_.isInJavaScriptFile(t.declaration))}function Vu(e,t,n,o,r){for(var i=0,a=r.inferences;i<a.length;i++){var s=a[i];s.isFixed||(s.inferredType=void 0)}if(147!==e.kind){var l=Gc(e);if(l){var c=cs(l,(d=Vc(e))&&d.signature?fl(d.signature,2|d.flags,d.compareTypes,d.inferences):d),u=Hu(c),g=u&&u.typeParameters?Ii(xi(u,u.typeParameters,W_.isInJavaScriptFile(e))):c,p=Si(t);kl(r.inferences,g,p,8)}}var d,_=Ei(t);if(_){var f=zu(e),h=f?$g(f):Z;kl(r.inferences,h,_)}for(var m=Yu(e,n,t),y=0;y<m;y++)if(void 0===(k=Zu(e,n,y))||200!==k.kind){var v=fg(t,y),b=qu(e,y);void 0===b&&(b=Kg(k,v,o&&void 0!==o[y]?E:r)),kl(r.inferences,b,v)}if(o)for(y=0;y<m;y++)if(!1===o[y]){var k=n[y];v=fg(t,y),kl(r.inferences,Kg(k,v,r),v)}return xl(r)}function Wu(e,t,n,o){for(var r,i=W_.isInJavaScriptFile(e.declaration),a=e.typeParameters,s=bi(W_.map(t,$a),a,vi(a),i),l=0;l<t.length;l++){W_.Debug.assert(void 0!==a[l],"Should not call checkTypeArguments with too many type arguments");var c=qr(a[l]);if(c){var u=n&&o&&W_.chainDiagnosticMessages(void 0,W_.Diagnostics.Type_0_does_not_satisfy_the_constraint_1),g=o||W_.Diagnostics.Type_0_does_not_satisfy_the_constraint_1;r||(r=ns(a,s));var p=s[l];if(!Ts(p,Dr(cs(c,r),p),n?t[l]:void 0,g,u))return!1}}return s}function Ku(e,t,n,o,r,i){if(W_.isJsxOpeningLikeElement(e))return function(e,t,n){if(e.attributes.end===e.end)return!0;for(var o=W_.Diagnostics.Argument_of_type_0_is_not_assignable_to_parameter_of_type_1,r=fg(t,0),i=Kg(e.attributes,r,void 0),a=0,s=Jr(i);a<s.length;a++){var l=s[a];if(!si(r,l.escapedName)&&nu(l.escapedName))return!1}return Ns(i,r,n,void 0,o)}(e,n,o);var a,s,l,c=Ei(n);if(c&&c!==Z&&182!==e.kind){var u=zu(e),g=u?$g(u):Z,p=i?u||e:void 0,d=W_.Diagnostics.The_this_context_of_type_0_is_not_assignable_to_method_s_this_of_type_1;if(!Ns(g,Ei(n),o,p,d))return!1}for(var _=W_.Diagnostics.Argument_of_type_0_is_not_assignable_to_parameter_of_type_1,f=Yu(e,t,n),h=0;h<f;h++){var m=Zu(e,t,h);if(void 0===m||200!==m.kind){var y=fg(n,h),v=qu(e,h)||Kg(m,y,r&&r[h]?E:void 0);if(!Ns(r?cl(v):v,y,o,p=i?(s=h,l=m,147===(a=e).kind?a.expression:0===s&&183===a.kind?a.template:l):void 0,_))return!1}}return!0}function zu(e){if(181===e.kind){var t=e.expression;if(179===t.kind)return t.expression;if(180===t.kind)return t.expression}}function ju(e){if(183===e.kind){var t=e.template,n=[void 0];return 196===t.kind&&W_.forEach(t.templateSpans,function(e){n.push(e.expression)}),n}return 147===e.kind?void 0:W_.isJsxOpeningLikeElement(e)?0<e.attributes.properties.length?[e.attributes]:W_.emptyArray:e.arguments||W_.emptyArray}function Yu(e,t,n){if(147!==e.kind)return t.length;switch(e.parent.kind){case 229:case 199:return 1;case 149:return 2;case 151:case 153:case 154:return 0===w?2:3<=n.parameters.length?3:2;case 146:return 3}}function Xu(e){var t,n;return 229===e.kind?qo(Vn(e)):146===e.kind&&152===(e=e.parent).kind?qo(Vn(e)):149===e.kind||151===e.kind||153===e.kind||154===e.kind?(n=Vn((t=e).parent),W_.hasModifier(t,32)?qo(n):br(n)):(W_.Debug.fail("Unsupported decorator target."),H)}function Ju(e,t){return 0===t?Xu(e.parent):1===t?function(e){if(229===e.kind)return W_.Debug.fail("Class decorators should not have a second synthetic argument."),H;if(146===e.kind&&152===(e=e.parent).kind)return F;if(149===e.kind||151===e.kind||153===e.kind||154===e.kind){var t=e;switch(t.name.kind){case 71:return qa(W_.idText(t.name));case 8:case 9:return qa(t.name.text);case 144:var n=$c(t.name);return Og(n,512)?n:z;default:return W_.Debug.fail("Unsupported property name."),H}}return W_.Debug.fail("Unsupported decorator target."),H}(e.parent):2===t?229===(n=e.parent).kind?(W_.Debug.fail("Class decorators should not have a third synthetic argument."),H):146===n.kind?j:149===n.kind?(W_.Debug.fail("Property decorators should not have a third synthetic argument."),H):151===n.kind||153===n.kind||154===n.kind?da(Hd(n)):(W_.Debug.fail("Unsupported decorator target."),H):(W_.Debug.fail("Decorators should not have a fourth synthetic argument."),H);var n}function qu(e,t){return 147===e.kind?Ju(e,t):0===t&&183===e.kind?Me||(Me=ea("TemplateStringsArray",0,!0))||te:void 0}function Zu(e,t,n){if(147!==e.kind&&(0!==n||183!==e.kind))return t[n]}function $u(c,e,t,n){var u,o=183===c.kind,r=147===c.kind,i=W_.isJsxOpeningLikeElement(c);o||r||i||(u=c.typeArguments,97!==c.expression.kind&&W_.forEach(u,Ad));var a=t||[];if(function(e,t){var n,o,r,i,a=0,s=-1;W_.Debug.assert(!t.length);for(var l=0,c=e;l<c.length;l++){var u=c[l],g=u.declaration&&Vn(u.declaration),p=u.declaration&&u.declaration.parent;o&&g!==o?(r=a=t.length,n=p):n&&p===n?r++:(n=p,r=a),o=g,u.hasLiteralTypes?(i=++s,a++):i=r,t.splice(i,0,u)}}(e,a),!a.length)return Tt.add(W_.createDiagnosticForNode(c,W_.Diagnostics.Call_target_does_not_contain_any_signatures)),Mu(c);var g,p,d,s,_=ju(c),f=1===a.length&&!a[0].typeParameters,h=0;if(!r&&!f)for(var l=o?1:0;l<_.length;l++)gs(_[l])&&(g||(g=new Array(_.length)),g[l]=!0,h++);var m=t&&181===c.kind&&c.arguments.hasTrailingComma;if(1<a.length&&(s=L(a,Vt,m)),s||(s=L(a,Wt,m)),s)return s;if(p){if(i)return p;Ku(c,_,p,Wt,void 0,!0)}else if(d)Wu(d,c.typeArguments,!0,n);else if(u&&W_.every(e,function(e){return W_.length(e.typeParameters)!==u.length})){for(var y=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,b=0,k=e;b<k.length;b++){var T=k[b];y=Math.min(y,vi(T.typeParameters)),v=Math.max(v,W_.length(T.typeParameters))}var E=y<v?y+"-"+v:y;Tt.add(W_.createDiagnosticForNode(c,W_.Diagnostics.Expected_0_type_arguments_but_got_1,E,u.length))}else if(_){y=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY;for(var S=0,C=e;S<C.length;S++)T=C[S],y=Math.min(y,T.minArgumentCount),v=Math.max(v,T.parameters.length);var x=W_.some(e,function(e){return e.hasRestParameter}),A=-1<Fu(_),D=(E=x?y:y<v?y+"-"+v:y,_.length-(A?1:0)),B=x&&A?W_.Diagnostics.Expected_at_least_0_arguments_but_got_a_minimum_of_1:x?W_.Diagnostics.Expected_at_least_0_arguments_but_got_1:A?W_.Diagnostics.Expected_0_arguments_but_got_a_minimum_of_1:W_.Diagnostics.Expected_0_arguments_but_got_1;Tt.add(W_.createDiagnosticForNode(c,B,E,D))}else n&&Tt.add(W_.createDiagnosticForNode(c,n));if(!P){W_.Debug.assert(0<a.length);var I=function(e,t){for(var n=-1,o=-1,r=0;r<e.length;r++){var i=e[r];if(i.hasRestParameter||i.parameters.length>=t)return r;i.parameters.length>o&&(o=i.parameters.length,n=r)}return n}(a,void 0===M?_.length:M),N=a[I],w=N.typeParameters;if(w&&Lu(c)&&c.typeArguments){for(var O=c.typeArguments.map(Hd);O.length>w.length;)O.pop();for(;O.length<w.length;)O.push(Cl(W_.isInJavaScriptFile(c)));var R=Ai(N,O);return a[I]=R}return N}return Mu(c);function L(e,t,n){if(void 0===n&&(n=!1),d=p=void 0,f){var o=e[0];if(!Uu(c,_,o,n))return;return Ku(c,_,o,t,g,!1)?o:void(p=o)}for(var r=0;r<e.length;r++){var i=e[r];if(Uu(c,_,i,n)){o=void 0;for(var a=i.typeParameters?fl(i,W_.isInJavaScriptFile(c)?4:0):void 0;;){if((o=i).typeParameters){var s=void 0;if(u){var l=Wu(o,u,!1);if(!l){d=i;break}s=l}else s=Vu(c,o,_,g,a);o=xi(o,s,W_.isInJavaScriptFile(o.declaration))}if(!Ku(c,_,o,t,g,!1)){p=o;break}if(0===h)return e[r]=o;0<--h?g[W_.indexOf(g,!0)]=!1:g=void 0}}}}}function Qu(e,t,n,o){return!!No(e)||!!(No(t)&&16384&e.flags)||!n&&!o&&!(65536&e.flags)&&vs(e,_e)}function eg(e,t){if(e.arguments&&w<1){var n=Fu(e.arguments);0<=n&&qt(e.arguments[n],W_.Diagnostics.Spread_operator_in_new_expressions_is_only_available_when_targeting_ECMAScript_5_and_higher)}var o=Tu(e.expression);if(o===Q)return Je;if((o=oi(o))===H)return Mu(e);if(No(o))return e.typeArguments&&qt(e,W_.Diagnostics.Untyped_function_calls_may_not_accept_type_arguments),Pu(e);var r=ci(o,1);if(r.length){if(!function(e,t){if(!t||!t.declaration)return!0;var n=t.declaration,o=W_.getSelectedModifierFlags(n,24);if(!o)return!0;var r=dd(n.parent.symbol),i=br(n.parent.symbol);if(!Pd(e,r)){var a=W_.getContainingClass(e);if(a)for(var s=Hd(a),l=gr(s);l.length;){var c=l[0];if(16&o&&c.symbol===n.parent.symbol)return!0;l=gr(c)}return 8&o&&qt(e,W_.Diagnostics.Constructor_of_class_0_is_private_and_only_accessible_within_the_class_declaration,fo(i)),16&o&&qt(e,W_.Diagnostics.Constructor_of_class_0_is_protected_and_only_accessible_within_the_class_declaration,fo(i)),!1}return!0}(e,r[0]))return Mu(e);var i=o.symbol&&dd(o.symbol);return i&&W_.hasModifier(i,128)?(qt(e,W_.Diagnostics.Cannot_create_an_instance_of_the_abstract_class_0,W_.declarationNameToString(W_.getNameOfDeclaration(i))),Mu(e)):$u(e,r,t)}var a=ci(o,0);if(a.length){var s=$u(e,a,t);return sg(s.declaration)||Si(s)===Z||qt(e,W_.Diagnostics.Only_a_void_function_can_be_called_with_the_new_keyword),Ei(s)===Z&&qt(e,W_.Diagnostics.A_function_that_is_called_with_the_new_keyword_cannot_have_a_this_type_that_is_void),s}return qt(e,W_.Diagnostics.Cannot_use_new_with_an_expression_whose_type_lacks_a_call_or_construct_signature),Mu(e)}function tg(e){switch(e.parent.kind){case 229:case 199:return W_.Diagnostics.Unable_to_resolve_signature_of_class_decorator_when_called_as_an_expression;case 146:return W_.Diagnostics.Unable_to_resolve_signature_of_parameter_decorator_when_called_as_an_expression;case 149:return W_.Diagnostics.Unable_to_resolve_signature_of_property_decorator_when_called_as_an_expression;case 151:case 153:case 154:return W_.Diagnostics.Unable_to_resolve_signature_of_method_decorator_when_called_as_an_expression}}function ng(e,t){var n=$g(e.expression),o=oi(n);if(o===H)return Mu(e);var r,i,a=ci(o,0),s=ci(o,1);if(Qu(n,o,a.length,s.length))return Pu(e);if(r=e,(i=a).length&&W_.every(i,function(e){return 0===e.minArgumentCount&&!e.hasRestParameter&&e.parameters.length<Yu(r,void 0,e)})){var l=W_.getTextOfNode(e.expression,!1);return qt(e,W_.Diagnostics._0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write_0,l),Mu(e)}var c=tg(e);if(!a.length){var u=void 0;return u=W_.chainDiagnosticMessages(u,W_.Diagnostics.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,fo(o)),u=W_.chainDiagnosticMessages(u,c),Tt.add(W_.createDiagnosticForNodeFromMessageChain(e,u)),Mu(e)}return $u(e,a,t,c)}function og(e,t,n){return W_.Debug.assert(!(65536&t.flags)),rg(e,t,n)}function rg(e,t,n){if(65536&t.flags){for(var o=void 0,r=0,i=t.types;r<i.length;r++){var a=i[r];o=o||rg(e,a,n)}return o}var s=t&&ci(t,0);if(s&&0<s.length)return $u(e,s,n)}function ig(e,t){switch(e.kind){case 181:return function(e,t){if(97===e.expression.kind){var n=Bc(e.expression);if(n!==H){var o=W_.getClassExtendsHeritageClauseElement(W_.getContainingClass(e));if(o)return $u(e,cr(n,o.typeArguments,o),t)}return Pu(e)}var r=Tu(e.expression);if(r===Q)return Je;var i=oi(r);if(i===H)return Mu(e);var a=ci(i,0),s=ci(i,1);return Qu(r,i,a.length,s.length)?(r!==H&&e.typeArguments&&qt(e,W_.Diagnostics.Untyped_function_calls_may_not_accept_type_arguments),Pu(e)):a.length?$u(e,a,t):(s.length?qt(e,W_.Diagnostics.Value_of_type_0_is_not_callable_Did_you_mean_to_include_new,fo(r)):qt(e,W_.Diagnostics.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,fo(i)),Mu(e))}(e,t);case 182:return eg(e,t);case 183:return function(e,t){var n=$g(e.tag),o=oi(n);if(o===H)return Mu(e);var r=ci(o,0),i=ci(o,1);return Qu(n,o,r.length,i.length)?Pu(e):r.length?$u(e,r,t):(qt(e,W_.Diagnostics.Cannot_invoke_an_expression_whose_type_lacks_a_call_signature_Type_0_has_no_compatible_call_signatures,fo(o)),Mu(e))}(e,t);case 147:return ng(e,t);case 251:case 250:return rg(e,$g(e.tagName),t)||Ye}W_.Debug.assertNever(e,"Branch in 'resolveSignature' should be unreachable.")}function ag(e,t){var n=an(e),o=n.resolvedSignature;if(o&&o!==Xe&&!t)return o;n.resolvedSignature=Xe;var r=ig(e,t);return n.resolvedSignature=Qe===et?r:o,r}function sg(e){if(e&&W_.isInJavaScriptFile(e)){if(W_.getJSDocClassTag(e))return!0;var t=W_.isFunctionDeclaration(e)||W_.isFunctionExpression(e)?Vn(e):W_.isVariableDeclaration(e)&&e.initializer&&W_.isFunctionExpression(e.initializer)?Vn(e.initializer):void 0;return t&&void 0!==t.members}return!1}function lg(e){var t=rn(e);return t.inferredClassType||(t.inferredClassType=Qn(e,e.members||m,W_.emptyArray,W_.emptyArray,void 0,void 0)),t.inferredClassType}function cg(e){return e.symbol&&16&sn(e)&&rn(e.symbol).inferredClassType===e}function ug(e){S_(e,e.typeArguments)||C_(e.arguments);var t=ag(e);if(97===e.expression.kind)return Z;if(182===e.kind){var n=t.declaration;if(n&&152!==n.kind&&156!==n.kind&&161!==n.kind&&!W_.isJSDocConstructSignature(n)){var o=$g(e.expression).symbol;o||71!==e.expression.kind||(o=Al(e.expression));var r=o&&function(e){if(W_.isDeclarationOfFunctionOrClassExpression(e)&&(e=Vn(e.valueDeclaration.initializer)),sg(e.valueDeclaration))return lg(e);if(3&e.flags){var t=qo(e);if(t.symbol&&!cg(t)&&sg(t.symbol.valueDeclaration))return lg(t.symbol)}}(o);return r||(y&&qt(e,W_.Diagnostics.new_expression_whose_target_lacks_a_construct_signature_implicitly_has_an_any_type),F)}}return W_.isInJavaScriptFile(e)&&function(e){if(!W_.isRequireCall(e,!0))return!1;if(!W_.isIdentifier(e.expression))throw W_.Debug.fail();var t=gn(e.expression,e.expression.escapedText,107455,void 0,void 0,!0);if(!t)return!0;if(2097152&t.flags)return!1;var n=16&t.flags?228:3&t.flags?226:0;if(0!==n){var o=W_.getDeclarationOfKind(t,n);return W_.isInAmbientContext(o)}return!1}(e)?function(e){var t=In(e,e);if(t){var n=On(t);if(n)return qo(n)}return F}(e.arguments[0]):Si(t)}function gg(e){if(C_(e.arguments)||function(e){if(S===W_.ModuleKind.ES2015)return H_(e,W_.Diagnostics.Dynamic_import_cannot_be_used_when_targeting_ECMAScript_2015_modules);if(e.typeArguments)return H_(e,W_.Diagnostics.Dynamic_import_cannot_have_type_arguments);var t=e.arguments;if(1!==t.length)return H_(e,W_.Diagnostics.Dynamic_import_must_have_one_specifier_as_an_argument);W_.isSpreadElement(t[0])&&H_(t[0],W_.Diagnostics.Specifier_of_dynamic_import_cannot_be_spread_element)}(e),0===e.arguments.length)return vg(e,F);for(var t=e.arguments[0],n=zg(t),o=1;o<e.arguments.length;++o)zg(e.arguments[o]);(2048&n.flags||4096&n.flags||!vs(n,z))&&qt(t,W_.Diagnostics.Dynamic_import_s_specifier_must_be_of_type_string_but_here_has_type_0,fo(n));var r=In(e,t);if(r){var i=Rn(r,t,!0);if(i)return vg(e,function(e,t){if(d&&e&&e!==H){var n=e;if(!n.syntheticType)if(si(e,"default"))n.syntheticType=e;else{var o=W_.createSymbolTable(),r=Zt(2097152,"default");r.target=En(t),o.set("default",r);var i=Zt(2048,"__type"),a=Qn(i,o,W_.emptyArray,W_.emptyArray,void 0,void 0);i.type=a,n.syntheticType=Ia([e,a])}return n.syntheticType}return e}(qo(i),i))}return vg(e,F)}function pg(e,t,n,o){var r=cl($s($g(n,o)));Ad(t);var i=$a(t);return P&&i!==H&&(ks(i,gl(r))||Es(r,i,e,W_.Diagnostics.Type_0_cannot_be_converted_to_type_1)),i}function dg(e){var t;94===(t=e).keywordToken&&"target"!==t.name.escapedText&&H_(t.name,W_.Diagnostics._0_is_not_a_valid_meta_property_for_keyword_1_Did_you_mean_2,t.name.escapedText,W_.tokenToString(t.keywordToken),"target");var n=W_.getNewTargetContainer(e);return n?152===n.kind?qo(Vn(n.parent)):qo(Vn(n)):(qt(e,W_.Diagnostics.Meta_property_0_is_only_allowed_in_the_body_of_a_function_declaration_function_expression_or_constructor,"new.target"),H)}function _g(e){var t=qo(e);if(A){var n=e.valueDeclaration;if(n&&n.initializer)return il(t,2048)}return t}function fg(e,t){return e.hasRestParameter?t<e.parameters.length-1?_g(e.parameters[t]):Ci(e):t<e.parameters.length?_g(e.parameters[t]):F}function hg(e){return 0<e.parameters.length?fg(e,0):$}function mg(e,t){var n=rn(e);if(!n.type){n.type=t;var o=e.valueDeclaration;71!==o.name.kind&&(n.type===te&&(n.type=Go(o.name)),function e(t){for(var n=0,o=t.elements;n<o.length;n++){var r=o[n];W_.isOmittedExpression(r)||(71===r.name.kind?rn(Vn(r)).type=Lo(r):e(r.name))}}(o.name))}}function yg(e){var t=na(!0);return t!==re?Ui(t,[e=vp(e)||te]):te}function vg(e,t){var n=yg(t);return n===te?(qt(e,W_.isImportCall(e)?W_.Diagnostics.A_dynamic_import_call_returns_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option:W_.Diagnostics.An_async_function_or_method_must_return_a_Promise_Make_sure_you_have_a_declaration_for_Promise_or_include_ES2015_in_your_lib_option),H):(oa(!0)||qt(e,W_.isImportCall(e)?W_.Diagnostics.A_dynamic_import_call_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option:W_.Diagnostics.An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option),n)}function bg(e,t){var n=zc(e);if(!e.body)return H;var o,r,i,a,s,l=W_.getFunctionFlags(e);if(207!==e.body.kind)o=zg(e.body,t),2&l&&(o=yp(o,e,W_.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member));else{var c=void 0;if(1&l){if(!(c=W_.concatenate((r=e,i=t,a=[],s=W_.getFunctionFlags(r),W_.forEachYieldExpression(r.body,function(e){var t=e.expression;if(t){var n=zg(t,i);e.asteriskToken&&(n=$p(n,e.expression,!1,0!=(2&s))),2&s&&(n=yp(n,t,e.asteriskToken?W_.Diagnostics.Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member:W_.Diagnostics.Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member)),W_.pushIfUnique(a,n)}}),a),Eg(e,t)))||0===c.length){var u=2&l?_a(F):ha(F);return y&&qt(e.asteriskToken,W_.Diagnostics.Generator_implicitly_has_type_0_because_it_does_not_yield_any_values_Consider_supplying_a_return_type,fo(u)),u}}else{if(!(c=Eg(e,t)))return 2&l?vg(e,$):$;if(0===c.length)return 2&l?vg(e,Z):Z}o=Aa(c,!0),1&l&&(o=2&l?_a(o):ha(o))}n||dl(e,o),!qs(o)||n&&Xg(n===ki(e)?o:Si(n))||(o=Qs(o));var g=gl(o);return 2==(3&l)?vg(e,g):g}function kg(e){if(!e.possiblyExhaustive)return!1;var t=Zg(e.expression);if(!Zs(t))return!1;var n,o,r=ql(e);return!!r.length&&(n=ec(t,Ja),o=r,65536&n.flags?!W_.forEach(n.types,function(e){return!W_.contains(o,e)}):W_.contains(o,n))}function Tg(e){if(!(128&e.flags))return!1;var t=W_.lastOrUndefined(e.body.statements);return!t||221!==t.kind||!kg(t)}function Eg(o,r){var i=W_.getFunctionFlags(o),a=[],s=Tg(o),l=!1;if(W_.forEachReturnStatement(o.body,function(e){var t=e.expression;if(t){var n=zg(t,r);2&i&&(n=yp(n,o,W_.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member)),8192&n.flags&&(l=!0),W_.pushIfUnique(a,n)}else s=!0}),0!==a.length||s||!l&&186!==o.kind&&187!==o.kind)return A&&a.length&&s&&W_.pushIfUnique(a,G),a}function Sg(e,t){if(P&&(!t||!wg(t,1025))&&!W_.nodeIsMissing(e.body)&&207===e.body.kind&&Tg(e)){var n=256&e.flags;if(t&&8192&t.flags)qt(W_.getEffectiveReturnTypeNode(e),W_.Diagnostics.A_function_returning_never_cannot_have_a_reachable_end_point);else if(t&&!n)qt(W_.getEffectiveReturnTypeNode(e),W_.Diagnostics.A_function_whose_declared_type_is_neither_void_nor_any_must_return_a_value);else if(t&&A&&!vs(G,t))qt(W_.getEffectiveReturnTypeNode(e),W_.Diagnostics.Function_lacks_ending_return_statement_and_return_type_does_not_include_undefined);else if(O.noImplicitReturns){if(!t){if(!n)return;if(id(e,Si(ki(e))))return}qt(W_.getEffectiveReturnTypeNode(e)||e,W_.Diagnostics.Not_all_code_paths_return_a_value)}}}function Cg(e,t){if(W_.Debug.assert(151!==e.kind||W_.isObjectLiteralMethod(e)),1===t&&gs(e))return Dd(e),ie;E_(e)||186!==e.kind||B_(e);var n=an(e),o=qo(e.symbol);if(!(1024&n.flags)){var r=Yc(e);if(!(1024&n.flags)){if(n.flags|=1024,r){var i=ci(o,0)[0];if(gs(e)){var a=Vc(e);2===t&&function(e,t,n){for(var o=e.parameters.length-(e.hasRestParameter?1:0),r=0;r<o;r++){var i=e.parameters[r].valueDeclaration;if(i.type){var a=W_.getEffectiveTypeAnnotationNode(i);a&&kl(n.inferences,$a(a),fg(t,r))}}}(i,r,a),function(e,t){e.typeParameters=t.typeParameters,t.thisParameter&&(!(r=e.thisParameter)||r.valueDeclaration&&!r.valueDeclaration.type)&&(r||(e.thisParameter=ll(t.thisParameter,void 0)),mg(e.thisParameter,qo(t.thisParameter)));for(var n=e.parameters.length-(e.hasRestParameter?1:0),o=0;o<n;o++){var r=e.parameters[o];W_.getEffectiveTypeAnnotationNode(r.valueDeclaration)||mg(r,fg(t,o))}e.hasRestParameter&&zs(t,e.parameters.length-1)&&(!$t(r=W_.lastOrUndefined(e.parameters))&&W_.getEffectiveTypeAnnotationNode(r.valueDeclaration)||mg(r,qo(W_.lastOrUndefined(t.parameters))))}(i,a===E?r:is(r,a))}if(!W_.getEffectiveReturnTypeNode(e)&&!i.resolvedReturnType){var s=bg(e,t);i.resolvedReturnType||(i.resolvedReturnType=s)}}np(e),Dd(e)}}return P&&151!==e.kind&&(Hp(e,e.name),Pp(e,e.name),Mp(e,e.name)),o}function xg(e){W_.Debug.assert(151!==e.kind||W_.isObjectLiteralMethod(e));var t=W_.getFunctionFlags(e),n=W_.getEffectiveReturnTypeNode(e),o=n&&(2==(3&t)?bp(e):$a(n));if(0==(1&t)&&Sg(e,o),e.body){if(n||Si(ki(e)),207===e.body.kind)Ad(e.body);else{var r=$g(e.body);o&&Ts(2==(3&t)?yp(r,e.body,W_.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member):r,o,e.body)}Dp(e)}}function Ag(e,t,n){return!!Og(t,84)||(qt(e,n),!1)}function Dg(e){return!!(8&W_.getCheckFlags(e)||4&e.flags&&64&W_.getDeclarationModifierFlagsFromSymbol(e)||3&e.flags&&2&vu(e)||98304&e.flags&&!(65536&e.flags)||8&e.flags)}function Bg(e,t){if(Dg(t)){if(4&t.flags&&(179===e.kind||180===e.kind)&&99===e.expression.kind){var n=W_.getContainingFunction(e);return!n||152!==n.kind||!(n.parent===t.valueDeclaration.parent||n===t.valueDeclaration.parent)}return!0}return!1}function Ig(e){if(179===e.kind||180===e.kind){var t=W_.skipParentheses(e.expression);if(71===t.kind){var n=an(t).resolvedSymbol;if(2097152&n.flags){var o=yn(n);return o&&240===o.kind}}}return!1}function Ng(e,t){var n=W_.skipOuterExpressions(e,3);return 71===n.kind||179===n.kind||180===n.kind||(qt(e,t),!1)}function wg(e,t){if(e.flags&t)return!0;if(196608&e.flags)for(var n=0,o=e.types;n<o.length;n++)if(wg(o[n],t))return!0;return!1}function Og(e,t,n){return!!(e.flags&t)||!(n&&7169&e.flags)&&(84&t&&vs(e,j)||262178&t&&vs(e,z)||136&t&&vs(e,J)||1024&t&&vs(e,Z)||8192&t&&vs(e,$)||4096&t&&vs(e,W)||2048&t&&vs(e,G)||512&t&&vs(e,q)||16777216&t&&vs(e,ee))}function Rg(e){return 16&sn(e)&&e.symbol&&Lg(e.symbol)}function Lg(e){return 0!=(128&e.flags)}function Pg(e,t,n){if(261===t.kind||262===t.kind){var o=t.name;if(144===o.kind&&$c(o),Oo(o))return;var r=W_.getTextOfPropertyName(o);if(s=No(e)?e:Io(e,r)||Zc(r)&&di(e,1)||di(e,0))return 262===t.kind?Fg(t,s):Fg(t.initializer,s);qt(o,W_.Diagnostics.Type_0_has_no_property_1_and_no_string_index_signature,fo(e),W_.declarationNameToString(o))}else{if(263===t.kind){w<5&&h_(t,4);var i=[];if(n)for(var a=0;a<n.length-1;a++)i.push(n[a].name);var s=Ro(e,i,e.symbol);return Fg(t.expression,s)}qt(t,W_.Diagnostics.Property_assignment_expected)}}function Mg(e,t,n,o,r){var i=e.elements,a=i[n];if(200!==a.kind)if(198!==a.kind){var s=""+n,l=No(t)?t:Js(t)?Io(t,s):o;if(l)return Fg(a,l,r);$g(a),el(t)?qt(a,W_.Diagnostics.Tuple_type_0_with_length_1_cannot_be_assigned_to_tuple_with_length_2,fo(t),Gi(t),i.length):qt(a,W_.Diagnostics.Type_0_has_no_property_1,fo(t),s)}else if(n<i.length-1)qt(a,W_.Diagnostics.A_rest_element_must_be_last_in_a_destructuring_pattern);else{var c=a.expression;if(194!==c.kind||58!==c.operatorToken.kind)return Fg(c,ma(o),r);qt(c.operatorToken,W_.Diagnostics.A_rest_element_cannot_have_an_initializer)}}function Fg(e,t,n){var o,r,i,a,s;if(262===e.kind){var l=e;l.objectAssignmentInitializer&&(!A||2048&nl($g(l.objectAssignmentInitializer))||(t=Ml(t,131072)),Vg(l.name,l.equalsToken,l.objectAssignmentInitializer,n)),o=e.name}else o=e;return 194===o.kind&&58===o.operatorToken.kind&&(Gg(o,n),o=o.left),178===o.kind?function(e,t){for(var n=e.properties,o=0,r=n;o<r.length;o++)Pg(t,r[o],n);return t}(o,t):177===o.kind?function(e,t,n){w<2&&O.downlevelIteration&&h_(e,512);for(var o=$p(t,e,!1,!1)||H,r=e.elements,i=0;i<r.length;i++)Mg(e,t,i,o,n);return t}(o,t,n):(i=t,a=$g(r=o,n),s=263===r.parent.kind?W_.Diagnostics.The_target_of_an_object_rest_assignment_must_be_a_variable_or_a_property_access:W_.Diagnostics.The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access,Ng(r,s)&&Ts(i,a,r,void 0),i)}function Ug(e,t){return 0!=(6144&t.flags)||ks(e,t)}function Hg(e,t){var n=vs(e,t),o=vs(t,e);return o&&!n?e:n&&!o?t:Aa([e,t],!0)}function Gg(e,t){return Vg(e.left,e.operatorToken,e.right,t,e)}function Vg(n,e,o,t,r){var i=e.kind;if(58===i&&(178===n.kind||177===n.kind))return Fg(n,$g(o,t),t);var a,s,l,c,u,g,p,d,_,f,h=$g(n,t),m=$g(o,t);switch(i){case 39:case 40:case 61:case 62:case 41:case 63:case 42:case 64:case 38:case 60:case 45:case 65:case 46:case 66:case 47:case 67:case 49:case 69:case 50:case 70:case 48:case 68:if(h===Q||m===Q)return Q;h=Eu(h,n),m=Eu(m,o);var y=void 0;if(136&h.flags&&136&m.flags&&void 0!==(y=function(e){switch(e){case 49:case 69:return 54;case 50:case 70:return 35;case 48:case 68:return 53;default:return}}(e.kind)))qt(r||e,W_.Diagnostics.The_0_operator_is_not_allowed_for_boolean_types_Consider_using_1_instead,W_.tokenToString(e.kind),W_.tokenToString(y));else{var v=Ag(n,h,W_.Diagnostics.The_left_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type),b=Ag(o,m,W_.Diagnostics.The_right_hand_side_of_an_arithmetic_operation_must_be_of_type_any_number_or_an_enum_type);v&&b&&C(j)}return j;case 37:case 59:if(h===Q||m===Q)return Q;Og(h,262178)||Og(m,262178)||(h=Eu(h,n),m=Eu(m,o));var k=void 0;return Og(h,84,!0)&&Og(m,84,!0)?k=j:Og(h,262178,!0)||Og(m,262178,!0)?k=z:(No(h)||No(m))&&(k=h===H||m===H?H:F),k&&!S(i)?k:k?(59===i&&C(k),k):(x(),F);case 27:case 29:case 30:case 31:return S(i)&&(h=$s(Eu(h,n)),m=$s(Eu(m,o)),ks(h,m)||ks(m,h)||x()),J;case 32:case 33:case 34:case 35:var T=Zs(h),E=Zs(m);return T&&E||(h=T?$s(h):h,m=E?$s(m):m),Ug(h,m)||Ug(m,h)||x(),J;case 93:return p=n,d=o,f=m,(_=h)===Q||f===Q?Q:(!No(_)&&Og(_,8190)&&qt(p,W_.Diagnostics.The_left_hand_side_of_an_instanceof_expression_must_be_of_type_any_an_object_type_or_a_type_parameter),No(f)||ci(f,0).length||ci(f,1).length||ys(f,_e)||qt(d,W_.Diagnostics.The_right_hand_side_of_an_instanceof_expression_must_be_of_type_any_or_of_a_type_assignable_to_the_Function_interface_type),J);case 92:return l=n,c=o,g=m,(u=h)===Q||g===Q?Q:(u=Eu(u,l),g=Eu(g,c),ks(u,z)||Og(u,596)||qt(l,W_.Diagnostics.The_left_hand_side_of_an_in_expression_must_be_of_type_any_string_number_or_symbol),Og(g,17317888)||qt(c,W_.Diagnostics.The_right_hand_side_of_an_in_expression_must_be_of_type_any_an_object_type_or_a_type_parameter),J);case 53:return 1048576&Pl(h)?Aa([(s=A?h:$s(m),ec(s,rl)),m]):h;case 54:return 2097152&Pl(h)?Hg(ol(h),m):h;case 58:return C(m),cl(m);case 26:return!O.allowUnreachableCode&&function e(t){switch((t=W_.skipParentheses(t)).kind){case 71:case 9:case 12:case 183:case 196:case 13:case 8:case 101:case 86:case 95:case 139:case 186:case 199:case 187:case 177:case 178:case 189:case 203:case 250:case 249:return!0;case 195:return e(t.whenTrue)&&e(t.whenFalse);case 194:return!W_.isAssignmentOperator(t.operatorToken.kind)&&e(t.left)&&e(t.right);case 192:case 193:switch(t.operator){case 51:case 37:case 38:case 52:return!0}return!1;case 190:case 184:case 202:default:return!1}}(n)&&(71!==(a=o).kind||"eval"!==a.escapedText)&&qt(n,W_.Diagnostics.Left_side_of_comma_operator_is_unused_and_has_no_side_effects),m}function S(e){var t=wg(h,512)?n:wg(m,512)?o:void 0;return!t||(qt(t,W_.Diagnostics.The_0_operator_cannot_be_applied_to_type_symbol,W_.tokenToString(e)),!1)}function C(e){P&&W_.isAssignmentOperator(i)&&Ng(n,W_.Diagnostics.The_left_hand_side_of_an_assignment_expression_must_be_a_variable_or_a_property_access)&&Ts(e,h,n,void 0)}function x(){qt(r||e,W_.Diagnostics.Operator_0_cannot_be_applied_to_types_1_and_2,W_.tokenToString(e.kind),fo(h),fo(m))}}function Wg(e){if(P&&(4096&e.flags&&!function(e){for(var t=e,n=e.parent;n;){if(W_.isFunctionLike(n)&&t===n.body)return!1;if(W_.isClassLike(t))return!0;n=(t=n).parent}return!1}(e)||F_(e,W_.Diagnostics.A_yield_expression_is_only_allowed_in_a_generator_body),Oc(e)&&qt(e,W_.Diagnostics.yield_expressions_cannot_be_used_in_a_parameter_initializer)),e.expression){var t=W_.getContainingFunction(e),n=t&&W_.getFunctionFlags(t);if(e.asteriskToken&&(3==(3&n)&&w<5&&h_(e,26624),1==(3&n)&&w<2&&O.downlevelIteration&&h_(e,256)),1&n){var o=zg(e.expression),r=void 0,i=!!e.asteriskToken;i&&(r=$p(o,e.expression,!1,0!=(2&n)));var a=W_.getEffectiveReturnTypeNode(t);if(a){var s=nd($a(a),0!=(2&n))||F;Ts(i?2&n?vp(r,e.expression,W_.Diagnostics.Type_of_iterated_elements_of_a_yield_Asterisk_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member):r:2&n?vp(o,e.expression,W_.Diagnostics.Type_of_yield_operand_in_an_async_generator_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member):o,s,e.expression,void 0)}}}return F}function Kg(e,t,n){var o=e.contextualType,r=e.contextualMapper;e.contextualType=t,e.contextualMapper=n;var i=$g(e,n===E?1:n?2:0);return e.contextualType=o,e.contextualMapper=r,i}function zg(e,t){var n=an(e);if(!n.resolvedType){var o=Qe;Qe=et,n.resolvedType=$g(e,t),Qe=o}return n.resolvedType}function jg(e){return 184===(e=W_.skipParentheses(e)).kind||202===e.kind}function Yg(e){var t=Zg(e.initializer,!0);return 2&W_.getCombinedNodeFlags(e)||64&W_.getCombinedModifierFlags(e)&&!W_.isParameterPropertyDeclaration(e)||jg(e.initializer)?t:Qs(t)}function Xg(e){if(e){if(540672&e.flags){var t=$r(e)||te;if(30&t.flags)return!0;e=t}return wg(e,262368)}return!1}function Jg(e,t,n){2===arguments.length&&(n=Gc(e));var o=$g(e,t);return jg(e)||Xg(n)?o:Qs(o)}function qg(e,t,n){if(2===n){var o=Hu(t);if(o&&o.typeParameters){var r=Hc(e);if(r){var i=Hu(al(r));if(i&&!i.typeParameters)return Ii(Gu(o,i,Vc(e)))}}}return t}function Zg(e,t){if(181===e.kind&&97!==e.expression.kind&&!W_.isRequireCall(e,!0)){var n=Hu(Tu(e.expression));if(n&&!n.typeParameters)return Si(n)}return t?zg(e):$g(e)}function $g(e,t){var n;return Rg(n=143===e.kind?Cu(e):qg(e,function(e,t){switch(e.kind){case 71:return kc(e);case 99:return Ac(e);case 97:return Bc(e);case 95:return K;case 13:case 9:return Xa(qa(e.text));case 8:return V_(e),Xa(qa(+e.text));case 101:return Y;case 86:return X;case 196:return m=e,W_.forEach(m.templateSpans,function(e){$g(e.expression)}),z;case 12:return be;case 177:return Jc(e,t);case 178:return eu(e,t);case 179:return Su(e);case 180:return Ou(e);case 181:if(91===e.expression.kind)return gg(e);case 182:return ug(e);case 183:return h=e,w<2&&h_(h,65536),Si(ag(h));case 185:return n=e,o=t,(r=W_.isInJavaScriptFile(n)?W_.getJSDocTypeTag(n):void 0)?pg(r,r.typeExpression.type,n.expression,o):$g(n.expression,o);case 199:return gd(f=e),Dd(f),qo(Vn(f));case 186:case 187:return Cg(e,t);case 189:return $g(e.expression),Mt;case 184:case 202:return pg(_=e,_.type,_.expression);case 203:return al($g(e.expression));case 204:return dg(e);case 188:return function(e){$g(e.expression);var t=W_.skipParentheses(e.expression);if(179!==t.kind&&180!==t.kind)return qt(t,W_.Diagnostics.The_operand_of_a_delete_operator_must_be_a_property_reference),J;var n=Kn(an(t).resolvedSymbol);return n&&Dg(n)&&qt(t,W_.Diagnostics.The_operand_of_a_delete_operator_cannot_be_a_read_only_property),J}(e);case 190:return $g(e.expression),V;case 191:return d=e,P&&(16384&d.flags||F_(d,W_.Diagnostics.await_expression_is_only_allowed_within_an_async_function),Oc(d)&&qt(d,W_.Diagnostics.await_expressions_cannot_be_used_in_a_parameter_initializer)),yp($g(d.expression),d,W_.Diagnostics.Type_of_await_operand_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member);case 192:return function(e){var t=$g(e.operand);if(t===Q)return Q;if(8===e.operand.kind){if(38===e.operator)return Xa(qa(-e.operand.text));if(37===e.operator)return Xa(qa(+e.operand.text))}switch(e.operator){case 37:case 38:case 52:return Eu(t,e.operand),wg(t,512)&&qt(e.operand,W_.Diagnostics.The_0_operator_cannot_be_applied_to_type_symbol,W_.tokenToString(e.operator)),j;case 51:var n=3145728&Pl(t);return 1048576===n?X:2097152===n?Y:J;case 43:case 44:return Ag(e.operand,Eu(t,e.operand),W_.Diagnostics.An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type)&&Ng(e.operand,W_.Diagnostics.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access),j}return H}(e);case 193:return(p=$g((g=e).operand))===Q?Q:(Ag(g.operand,Eu(p,g.operand),W_.Diagnostics.An_arithmetic_operand_must_be_of_type_any_number_or_an_enum_type)&&Ng(g.operand,W_.Diagnostics.The_operand_of_an_increment_or_decrement_operator_must_be_a_variable_or_a_property_access),j);case 194:return Gg(e,t);case 195:return u=t,$g((c=e).condition),Hg($g(c.whenTrue,u),$g(c.whenFalse,u));case 198:return s=e,l=t,w<2&&O.downlevelIteration&&h_(s,1536),$p($g(s.expression,l),s.expression,!1,!1);case 200:return V;case 197:return Wg(e);case 256:return function(e,t){if(e.expression){var n=$g(e.expression,t);return e.dotDotDotToken&&n!==F&&!Ys(n)&&qt(e,W_.Diagnostics.JSX_spread_child_must_be_an_array_type),n}return H}(e,t);case 249:return mu((a=e).openingElement),ou(a.closingElement.tagName)?au(a.closingElement):$g(a.closingElement.tagName),fu()||F;case 250:return mu(e),fu()||F;case 254:return i=t,ru(e.parent,void 0,i);case 251:W_.Debug.fail("Shouldn't ever directly check a JsxOpeningElement")}var n,o,r,i,a,s,l,c,u,g,p,d,_,f,h,m;return H}(e,t),t))&&(179===e.parent.kind&&e.parent.expression===e||180===e.parent.kind&&e.parent.expression===e||(71===e.kind||143===e.kind)&&Md(e)||qt(e,W_.Diagnostics.const_enums_can_only_be_used_in_property_or_index_access_expressions_or_the_right_hand_side_of_an_import_declaration_or_export_assignment)),n}function Qg(e){e.expression&&F_(e.expression,W_.Diagnostics.Type_expected),Ad(e.constraint),Ad(e.default);var t=vr(Vn(e));Qr(t)||qt(e.constraint,W_.Diagnostics.Type_parameter_0_has_a_circular_constraint,fo(t)),ti(t)===se&&qt(e.default,W_.Diagnostics.Type_parameter_0_has_a_circular_default,fo(t));var n=qr(t),o=ni(t);n&&o&&Ts(o,Dr(n,o),e.default,W_.Diagnostics.Type_0_does_not_satisfy_the_constraint_1),P&&ld(e.name,W_.Diagnostics.Type_parameter_name_cannot_be_0)}function ep(e){y_(e)||v_(e),zp(e);var t=W_.getContainingFunction(e);W_.hasModifier(e,92)&&(152===t.kind&&W_.nodeIsPresent(t.body)||qt(e,W_.Diagnostics.A_parameter_property_is_only_allowed_in_a_constructor_implementation)),e.questionToken&&W_.isBindingPattern(e.name)&&t.body&&qt(e,W_.Diagnostics.A_binding_pattern_parameter_cannot_be_optional_in_an_implementation_signature),e.name&&W_.isIdentifier(e.name)&&("this"===e.name.escapedText||"new"===e.name.escapedText)&&(0!==W_.indexOf(t.parameters,e)&&qt(e,W_.Diagnostics.A_0_parameter_must_be_the_first_parameter,e.name.escapedText),152!==t.kind&&156!==t.kind&&161!==t.kind||qt(e,W_.Diagnostics.A_constructor_cannot_have_a_this_parameter)),!e.dotDotDotToken||W_.isBindingPattern(e.name)||Ys(qo(e.symbol))||qt(e,W_.Diagnostics.A_rest_parameter_must_be_of_an_array_type)}function tp(e,t,n){for(var o=0,r=e.elements;o<r.length;o++){var i=r[o];if(!W_.isOmittedExpression(i)){var a=i.name;if(71===a.kind&&a.escapedText===n)return qt(t,W_.Diagnostics.A_type_predicate_cannot_reference_element_0_in_a_binding_pattern,n),!0;if((175===a.kind||174===a.kind)&&tp(a,t,n))return!0}}}function np(e){var t,n,o;157===e.kind?y_(o=e)||v_(o)||(n=(t=o).parameters[0],1!==t.parameters.length?H_(n?n.name:t,W_.Diagnostics.An_index_signature_must_have_exactly_one_parameter):n.dotDotDotToken?H_(n.dotDotDotToken,W_.Diagnostics.An_index_signature_cannot_have_a_rest_parameter):W_.hasModifiers(n)?H_(n.name,W_.Diagnostics.An_index_signature_parameter_cannot_have_an_accessibility_modifier):n.questionToken?H_(n.questionToken,W_.Diagnostics.An_index_signature_parameter_cannot_have_a_question_mark):n.initializer?H_(n.name,W_.Diagnostics.An_index_signature_parameter_cannot_have_an_initializer):n.type?136!==n.type.kind&&133!==n.type.kind?H_(n.name,W_.Diagnostics.An_index_signature_parameter_type_must_be_string_or_number):t.type||H_(t,W_.Diagnostics.An_index_signature_must_have_a_type_annotation):H_(n.name,W_.Diagnostics.An_index_signature_parameter_must_have_a_type_annotation)):160!==e.kind&&228!==e.kind&&161!==e.kind&&155!==e.kind&&152!==e.kind&&156!==e.kind||E_(e);var r,i=W_.getFunctionFlags(e);if(4&i||(3==(3&i)&&w<5&&h_(e,6144),2==(3&i)&&w<4&&h_(e,64),0!=(3&i)&&w<2&&h_(e,128)),cd(e.typeParameters),W_.forEach(e.parameters,ep),e.type&&Ad(e.type),P){r=e,!W_.hasRestParameter(r)||W_.isInAmbientContext(r)||W_.nodeIsMissing(r.body)||W_.forEach(r.parameters,function(e){e.name&&!W_.isBindingPattern(e.name)&&e.name.escapedText===B.escapedName&&qt(e,W_.Diagnostics.Duplicate_identifier_arguments_Compiler_uses_arguments_to_initialize_rest_parameters)});var a=W_.getEffectiveReturnTypeNode(e);if(y&&!a)switch(e.kind){case 156:qt(e,W_.Diagnostics.Construct_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type);break;case 155:qt(e,W_.Diagnostics.Call_signature_which_lacks_return_type_annotation_implicitly_has_an_any_return_type)}if(a){var s=W_.getFunctionFlags(e);if(1==(5&s)){var l=$a(a);if(l===Z)qt(a,W_.Diagnostics.A_generator_cannot_have_a_void_type_annotation);else{var c=nd(l,0!=(2&s))||F;Ts(2&s?_a(c):ha(c),l,a)}}else 2==(3&s)&&bp(e)}D&&!e.body&&Op(e)}}function op(e){for(var t=W_.createMap(),n=0,o=e.members;n<o.length;n++){var r=o[n];if(148===r.kind){var i=void 0;switch(r.name.kind){case 9:case 8:i=r.name.text;break;case 71:i=W_.idText(r.name);break;default:continue}t.get(i)?(qt(W_.getNameOfDeclaration(r.symbol.valueDeclaration),W_.Diagnostics.Duplicate_identifier_0,i),qt(r.name,W_.Diagnostics.Duplicate_identifier_0,i)):t.set(i,!0)}}}function rp(e){if(230===e.kind){var t=Vn(e);if(0<t.declarations.length&&t.declarations[0]!==e)return}var n=Ni(Vn(e));if(n)for(var o=!1,r=!1,i=0,a=n.declarations;i<a.length;i++){var s=a[i];if(1===s.parameters.length&&s.parameters[0].type)switch(s.parameters[0].type.kind){case 136:r?qt(s,W_.Diagnostics.Duplicate_string_index_signature):r=!0;break;case 133:o?qt(s,W_.Diagnostics.Duplicate_number_index_signature):o=!0}}}function ip(e){y_(e)||v_(e)||function(e){if(W_.isClassLike(e.parent)){if(O_(e.name,W_.Diagnostics.A_computed_property_name_in_a_class_property_declaration_must_directly_refer_to_a_built_in_symbol))return!0}else if(230===e.parent.kind){if(O_(e.name,W_.Diagnostics.A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol))return!0;if(e.initializer)return H_(e.initializer,W_.Diagnostics.An_interface_property_cannot_have_an_initializer)}else if(163===e.parent.kind){if(O_(e.name,W_.Diagnostics.A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol))return!0;if(e.initializer)return H_(e.initializer,W_.Diagnostics.A_type_literal_property_cannot_have_an_initializer)}if(W_.isInAmbientContext(e)&&e.initializer)return F_(e.initializer,W_.Diagnostics.Initializers_are_not_allowed_in_ambient_contexts)}(e)||D_(e.name),zp(e)}function ap(e){var t;np(e),function(e){if(e.typeParameters)return U_(e,e.typeParameters.pos,e.typeParameters.end-e.typeParameters.pos,W_.Diagnostics.Type_parameters_cannot_appear_on_a_constructor_declaration)}(e)||(t=e).type&&H_(t.type,W_.Diagnostics.Type_annotation_cannot_appear_on_a_constructor_declaration),Ad(e.body),Dp(e);var n=Vn(e);if(e===W_.getDeclarationOfKind(n,e.kind)&&_p(n),!W_.nodeIsMissing(e.body)&&P){var o=e.parent;if(W_.getClassExtendsHeritageClauseElement(o)){Tc(e.parent,o);var r=Cc(o),i=Sc(e);if(i){if(r&&qt(i,W_.Diagnostics.A_constructor_cannot_contain_a_super_call_when_its_class_extends_null),W_.some(e.parent.members,function(e){return 149===e.kind&&!W_.hasModifier(e,32)&&!!e.initializer})||W_.some(e.parameters,function(e){return W_.hasModifier(e,92)})){for(var a=void 0,s=0,l=e.body.statements;s<l.length;s++){var c=l[s];if(210===c.kind&&W_.isSuperCall(c.expression)){a=c;break}if(!W_.isPrologueDirective(c))break}a||qt(e,W_.Diagnostics.A_super_call_must_be_the_first_statement_in_the_constructor_when_a_class_contains_initialized_properties_or_has_parameter_properties)}}else r||qt(e,W_.Diagnostics.Constructors_for_derived_classes_must_contain_a_super_call)}}}function sp(e){if(P){if(E_(e)||function(e){var t,n=e.kind;if(w<1)return H_(e.name,W_.Diagnostics.Accessors_are_only_available_when_targeting_ECMAScript_5_and_higher);if(W_.isInAmbientContext(e))return H_(e.name,W_.Diagnostics.An_accessor_cannot_be_declared_in_an_ambient_context);if(void 0===e.body&&!W_.hasModifier(e,128))return U_(e,e.end-1,";".length,W_.Diagnostics._0_expected,"{");if(e.body&&W_.hasModifier(e,128))return H_(e,W_.Diagnostics.An_abstract_accessor_cannot_have_an_implementation);if(e.typeParameters)return H_(e.name,W_.Diagnostics.An_accessor_cannot_have_type_parameters);if(!w_(t=e)&&t.parameters.length!==(153===t.kind?0:1))return H_(e.name,153===n?W_.Diagnostics.A_get_accessor_cannot_have_parameters:W_.Diagnostics.A_set_accessor_must_have_exactly_one_parameter);if(154===n){if(e.type)return H_(e.name,W_.Diagnostics.A_set_accessor_cannot_have_a_return_type_annotation);var o=e.parameters[0];if(o.dotDotDotToken)return H_(o.dotDotDotToken,W_.Diagnostics.A_set_accessor_cannot_have_rest_parameter);if(o.questionToken)return H_(o.questionToken,W_.Diagnostics.A_set_accessor_cannot_have_an_optional_parameter);if(o.initializer)return H_(e.name,W_.Diagnostics.A_set_accessor_parameter_cannot_have_an_initializer)}}(e)||D_(e.name),Cp(e),np(e),153===e.kind&&!W_.isInAmbientContext(e)&&W_.nodeIsPresent(e.body)&&128&e.flags&&(256&e.flags||qt(e.name,W_.Diagnostics.A_get_accessor_must_return_a_value)),144===e.name.kind&&$c(e.name),!W_.hasDynamicName(e)){var t=153===e.kind?154:153,n=W_.getDeclarationOfKind(e.symbol,t);if(n){var o=W_.getModifierFlags(e),r=W_.getModifierFlags(n);(28&o)!=(28&r)&&qt(e.name,W_.Diagnostics.Getter_and_setter_accessors_do_not_agree_in_visibility),(128&o)!=(128&r)&&qt(e.name,W_.Diagnostics.Accessors_must_both_be_abstract_or_non_abstract),lp(e,n,zo,W_.Diagnostics.get_and_set_accessor_must_have_the_same_type),lp(e,n,jo,W_.Diagnostics.get_and_set_accessor_must_have_the_same_this_type)}}var i=Yo(Vn(e));153===e.kind&&Sg(e,i)}Ad(e.body),Dp(e)}function lp(e,t,n,o){var r=n(e),i=n(t);r&&i&&!fs(r,i)&&qt(e,o)}function cp(e,t){for(var n,o,r=vi(e),i=!0,a=0;a<e.length;a++){var s=qr(e[a]);if(s){n||(o=ns(e,n=bi(W_.map(t,$a),e,r,W_.isInJavaScriptFile(t[a]))));var l=n[a];i=i&&Ts(l,cs(s,o),t[a],W_.Diagnostics.Type_0_does_not_satisfy_the_constraint_1)}}return i}function up(e){S_(e,e.typeArguments),159!==e.kind||void 0===e.typeName.jsdocDotPos||W_.isInJavaScriptFile(e)||W_.isInJSDoc(e)||U_(e,e.typeName.jsdocDotPos,1,W_.Diagnostics.JSDoc_types_can_only_be_used_inside_documentation_comments);var t=Xi(e);if(t!==H){if(e.typeArguments&&(W_.forEach(e.typeArguments,Ad),P)){var n=an(e).resolvedSymbol;if(!n)return void(W_.isJSDocIndexSignature(e)||qt(e,W_.Diagnostics.Type_0_is_not_generic,fo(t)));var o=524288&n.flags&&rn(n).typeParameters;!o&&4&sn(t)&&(o=t.target.localTypeParameters),cp(o,e.typeArguments)}16&t.flags&&8&an(e).resolvedSymbol.flags&&qt(e,W_.Diagnostics.Enum_type_0_has_members_with_initializers_that_are_not_literals,fo(t))}}function gp(e,t){if(!(524288&e.flags))return e;var n=e.objectType,o=e.indexType;return vs(o,wa(n))?180===t.kind&&W_.isAssignmentTarget(t)&&32&sn(n)&&n.declaration.readonlyToken&&qt(t,W_.Diagnostics.Index_signature_in_type_0_only_permits_reading,fo(n)):pi(oi(n),1)&&Og(o,84)||qt(t,W_.Diagnostics.Type_0_cannot_be_used_to_index_type_1,fo(o),fo(n)),e}function pp(e){return W_.hasModifier(e,8)&&W_.isInAmbientContext(e)}function dp(e,t){var n=W_.getCombinedModifierFlags(e);return 230!==e.parent.kind&&229!==e.parent.kind&&199!==e.parent.kind&&W_.isInAmbientContext(e)&&(2&n||(n|=1),n|=2),n&t}function _p(e){if(P){for(var t,n,o,r=0,i=155,a=!1,s=!0,l=!1,c=e.declarations,u=0!=(16384&e.flags),g=!1,p=!1,d=0,_=c;d<_.length;d++){var f=_[d],h=W_.isInAmbientContext(f),m=230===f.parent.kind||163===f.parent.kind||h;if(m&&(o=void 0),228===f.kind||151===f.kind||150===f.kind||152===f.kind){var y=dp(f,155);r|=y,i&=y,a=a||W_.hasQuestionToken(f),s=s&&W_.hasQuestionToken(f),W_.nodeIsPresent(f.body)&&t?u?p=!0:g=!0:o&&o.parent===f.parent&&o.end!==f.pos&&C(o),W_.nodeIsPresent(f.body)?t||(t=f):l=!0,o=f,m||(n=f)}}if(p&&W_.forEach(c,function(e){qt(e,W_.Diagnostics.Multiple_constructor_implementations_are_not_allowed)}),g&&W_.forEach(c,function(e){qt(W_.getNameOfDeclaration(e),W_.Diagnostics.Duplicate_function_implementation)}),!n||n.body||W_.hasModifier(n,128)||n.questionToken||C(n),l&&(function(e,t,n,o,r){if(0!=(o^r)){var i=dp(S(e,t),n);W_.forEach(e,function(e){var t=dp(e,n)^i;1&t?qt(W_.getNameOfDeclaration(e),W_.Diagnostics.Overload_signatures_must_all_be_exported_or_non_exported):2&t?qt(W_.getNameOfDeclaration(e),W_.Diagnostics.Overload_signatures_must_all_be_ambient_or_non_ambient):24&t?qt(W_.getNameOfDeclaration(e)||e,W_.Diagnostics.Overload_signatures_must_all_be_public_private_or_protected):128&t&&qt(W_.getNameOfDeclaration(e),W_.Diagnostics.Overload_signatures_must_all_be_abstract_or_non_abstract)})}}(c,t,155,r,i),function(e,t,n,o){if(n!==o){var r=W_.hasQuestionToken(S(e,t));W_.forEach(e,function(e){W_.hasQuestionToken(e)!==r&&qt(W_.getNameOfDeclaration(e),W_.Diagnostics.Overload_signatures_must_all_be_optional_or_required)})}}(c,t,a,s),t))for(var v=Ti(e),b=ki(t),k=0,T=v;k<T.length;k++){var E=T[k];if(!Cs(b,E)){qt(E.declaration,W_.Diagnostics.Overload_signature_is_not_compatible_with_function_implementation);break}}}function S(e,t){return void 0!==t&&t.parent===e[0].parent?t:e[0]}function C(t){if(!t.name||!W_.nodeIsMissing(t.name)){var n=!1,e=W_.forEachChild(t.parent,function(e){if(n)return e;n=e===t});if(e&&e.pos===t.end&&e.kind===t.kind){var o=e.name||e,r=e.name;if(t.name&&r&&(W_.isComputedPropertyName(t.name)&&W_.isComputedPropertyName(r)||!W_.isComputedPropertyName(t.name)&&!W_.isComputedPropertyName(r)&&W_.getEscapedTextOfIdentifierOrLiteral(t.name)===W_.getEscapedTextOfIdentifierOrLiteral(r)))return void(151!==t.kind&&150!==t.kind||W_.hasModifier(t,32)===W_.hasModifier(e,32)||qt(o,W_.hasModifier(t,32)?W_.Diagnostics.Function_overload_must_be_static:W_.Diagnostics.Function_overload_must_not_be_static));if(W_.nodeIsPresent(e.body))return void qt(o,W_.Diagnostics.Function_implementation_name_must_be_0,W_.declarationNameToString(t.name))}var i=t.name||t;u?qt(i,W_.Diagnostics.Constructor_implementation_is_missing):W_.hasModifier(t,128)?qt(i,W_.Diagnostics.All_declarations_of_an_abstract_method_must_be_consecutive):qt(i,W_.Diagnostics.Function_implementation_is_missing_or_not_immediately_following_the_declaration)}}}function fp(e){if(P){var t=e.localSymbol;if((t||(t=Vn(e)).exportSymbol)&&W_.getDeclarationOfKind(t,e.kind)===e){for(var n=0,o=0,r=0,i=0,a=t.declarations;i<a.length;i++){var s=m(f=a[i]),l=dp(f,513);1&l?512&l?r|=s:n|=s:o|=s}var c,u,g=n&o,p=r&(n|o);if(g||p)for(var d=0,_=t.declarations;d<_.length;d++){s=m(f=_[d]);var f,h=W_.getNameOfDeclaration(f);s&p?qt(h,W_.Diagnostics.Merged_declaration_0_cannot_include_a_default_export_declaration_Consider_adding_a_separate_export_default_0_declaration_instead,W_.declarationNameToString(h)):s&g&&qt(h,W_.Diagnostics.Individual_declarations_in_merged_declaration_0_must_be_all_exported_or_all_local,W_.declarationNameToString(h))}(u=c||(c={}))[u.None=0]="None",u[u.ExportValue=1]="ExportValue",u[u.ExportType=2]="ExportType",u[u.ExportNamespace=4]="ExportNamespace"}}function m(e){switch(e.kind){case 230:case 231:case 283:return 2;case 233:return W_.isAmbientModule(e)||0!==W_.getModuleInstanceState(e)?5:4;case 229:case 232:return 3;case 237:case 240:case 239:var t=0,n=Sn(Vn(e));return W_.forEach(n.declarations,function(e){t|=m(e)}),t;case 226:case 176:case 228:case 242:return 1;default:W_.Debug.fail(W_.SyntaxKind[e.kind])}}}function hp(e,t,n){var o=mp(e,t);return o&&vp(o,t,n)}function mp(e,t){if(!No(e)){var n=e;if(n.promisedTypeOfPromise)return n.promisedTypeOfPromise;if(Zo(e,na(!1)))return n.promisedTypeOfPromise=e.typeArguments[0];var o=Io(e,"then");if(!No(o)){var r=o?ci(o,0):W_.emptyArray;if(0!==r.length){var i=Ml(Aa(W_.map(r,hg)),524288);if(!No(i)){var a=ci(i,0);if(0!==a.length)return n.promisedTypeOfPromise=Aa(W_.map(a,hg),!0);t&&qt(t,W_.Diagnostics.The_first_parameter_of_the_then_method_of_a_promise_must_be_a_callback)}}else t&&qt(t,W_.Diagnostics.A_promise_must_have_a_then_method)}}}function yp(e,t,n){return vp(e,t,n)||H}function vp(e,t,n){var o=e;if(o.awaitedTypeOfType)return o.awaitedTypeOfType;if(No(e))return o.awaitedTypeOfType=e;if(65536&e.flags){for(var r=void 0,i=0,a=e.types;i<a.length;i++){var s=a[i];r=W_.append(r,vp(s,t,n))}if(!r)return;return o.awaitedTypeOfType=Aa(r)}var l=mp(e);if(l){if(e.id===l.id||0<=W_.indexOf(kt,l.id))return void(t&&qt(t,W_.Diagnostics.Type_is_referenced_directly_or_indirectly_in_the_fulfillment_callback_of_its_own_then_method));kt.push(e.id);var c=vp(l,t,n);if(kt.pop(),!c)return;return o.awaitedTypeOfType=c}var u=Io(e,"then");if(!(u&&0<ci(u,0).length))return o.awaitedTypeOfType=e;t&&(W_.Debug.assert(!!n),qt(t,n))}function bp(e){var t,n,o=W_.getEffectiveReturnTypeNode(e),r=$a(o);if(2<=w){if(r===H)return H;var i=na(!0);if(i!==re&&!Zo(r,i))return qt(o,W_.Diagnostics.The_return_type_of_an_async_function_or_method_must_be_the_global_Promise_T_type),H}else{if(Tp((n=o)&&W_.getEntityNameFromTypeNode(n)),r===H)return H;var a=W_.getEntityNameFromTypeNode(o);if(void 0===a)return qt(o,W_.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value,fo(r)),H;var s=Bn(a,107455,!0),l=s?qo(s):H;if(l===H)return 71===a.kind&&"Promise"===a.escapedText&&$o(r)===na(!1)?qt(o,W_.Diagnostics.An_async_function_or_method_in_ES5_SlashES3_requires_the_Promise_constructor_Make_sure_you_have_a_declaration_for_the_Promise_constructor_or_include_ES2015_in_your_lib_option):qt(o,W_.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value,W_.entityNameToString(a)),H;var c=(t=!0,Ie||(Ie=ea("PromiseConstructorLike",0,t))||te);if(c===te)return qt(o,W_.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value,W_.entityNameToString(a)),H;if(!Ts(l,c,o,W_.Diagnostics.Type_0_is_not_a_valid_async_function_return_type_in_ES5_SlashES3_because_it_does_not_refer_to_a_Promise_compatible_constructor_value))return H;var u=a&&vd(a),g=cn(e.locals,u.escapedText,107455);if(g)return qt(g.valueDeclaration,W_.Diagnostics.Duplicate_identifier_0_Compiler_uses_declaration_1_to_support_async_functions,W_.idText(u),W_.entityNameToString(a)),H}return yp(r,e,W_.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member)}function kp(e){var t=Si(ag(e));if(!(1&t.flags)){var n,o,r=tg(e);switch(e.parent.kind){case 229:n=Aa([qo(Vn(e.parent)),Z]);break;case 146:n=Z,o=W_.chainDiagnosticMessages(o,W_.Diagnostics.The_return_type_of_a_parameter_decorator_function_must_be_either_void_or_any);break;case 149:n=Z,o=W_.chainDiagnosticMessages(o,W_.Diagnostics.The_return_type_of_a_property_decorator_function_must_be_either_void_or_any);break;case 151:case 153:case 154:n=Aa([da(Hd(e.parent)),Z])}Ts(t,n,e,r,o)}}function Tp(e){if(e){var t=vd(e),n=2097152|(71===e.kind?793064:1920),o=gn(t,t.escapedText,n,void 0,void 0,!0);o&&2097152&o.flags&&zn(o)&&!$d(Sn(o))&&xn(o)}}function Ep(e){var t=function e(t){if(t)switch(t.kind){case 167:case 166:for(var n=void 0,o=0,r=t.types;o<r.length;o++){var i=r[o],a=e(i);if(!a)return;if(n){if(!W_.isIdentifier(n)||!W_.isIdentifier(a)||n.escapedText!==a.escapedText)return}else n=a}return n;case 168:return e(t.type);case 159:return t.typeName}}(e);t&&W_.isEntityName(t)&&Tp(t)}function Sp(e){var t=W_.getEffectiveTypeAnnotationNode(e);return W_.isRestParameter(e)?W_.getRestParameterElementType(t):t}function Cp(e){if(e.decorators&&W_.nodeCanBeDecorated(e)){O.experimentalDecorators||qt(e,W_.Diagnostics.Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_the_experimentalDecorators_option_to_remove_this_warning);var t=e.decorators[0];if(h_(t,8),146===e.kind&&h_(t,32),O.emitDecoratorMetadata)switch(h_(t,16),e.kind){case 229:var n=W_.getFirstConstructorWithBody(e);if(n)for(var o=0,r=n.parameters;o<r.length;o++)Ep(Sp(r[o]));break;case 151:case 153:case 154:for(var i=0,a=e.parameters;i<a.length;i++)Ep(Sp(a[i]));Ep(W_.getEffectiveReturnTypeNode(e));break;case 149:Ep(W_.getEffectiveTypeAnnotationNode(e));break;case 146:Ep(Sp(e))}W_.forEach(e.decorators,kp)}}function xp(e){switch(e.kind){case 71:return e;case 179:return e.name;default:return}}function Ap(t){Cp(t),np(t);var e=W_.getFunctionFlags(t);if(t.name&&144===t.name.kind&&$c(t.name),!W_.hasDynamicName(t)){var n=Vn(t),o=t.localSymbol||n,r=W_.find(o.declarations,function(e){return e.kind===t.kind&&!(65536&e.flags)});t===r&&_p(o),n.parent&&W_.getDeclarationOfKind(n,t.kind)===t&&_p(n)}Ad(t.body);var i=W_.getEffectiveReturnTypeNode(t);if(0==(1&e)){var a=i&&(2&e?bp(t):$a(i));Sg(t,a)}P&&!i&&(y&&W_.nodeIsMissing(t.body)&&!pp(t)&&pl(t,F),1&e&&W_.nodeIsPresent(t.body)&&Si(ki(t))),Dp(t)}function Dp(e){Ve&&Ve.push(e)}function Bp(e){230!==e.parent.kind&&D&&!W_.isInAmbientContext(e)&&e.locals.forEach(function(t){if(!t.isReferenced)if(t.valueDeclaration&&146===W_.getRootDeclaration(t.valueDeclaration).kind){var e=W_.getRootDeclaration(t.valueDeclaration),n=W_.getNameOfDeclaration(t.valueDeclaration);!O.noUnusedParameters||W_.isParameterPropertyDeclaration(e)||W_.parameterIsThisKeyword(e)||(o=n)&&Np(o)||qt(n,W_.Diagnostics._0_is_declared_but_its_value_is_never_read,W_.symbolName(t))}else O.noUnusedLocals&&W_.forEach(t.declarations,function(e){return Ip(e,W_.symbolName(t))});var o})}function Ip(e,t){var n=W_.getNameOfDeclaration(e)||e;if(Np(n)){var o=W_.getRootDeclaration(n.parent);if(226===o.kind&&W_.isForInOrOfStatement(o.parent.parent)||145===o.kind)return}(function(e){if(W_.isBindingElement(e)&&W_.isObjectBindingPattern(e.parent)){var t=W_.lastOrUndefined(e.parent.elements);return t!==e&&!!t.dotDotDotToken}return!1})(71===n.kind?n.parent:n)||qt(n,W_.Diagnostics._0_is_declared_but_its_value_is_never_read,t)}function Np(e){return 71===e.kind&&95===W_.idText(e).charCodeAt(0)}function wp(e){if(O.noUnusedLocals&&!W_.isInAmbientContext(e)&&e.members)for(var t=0,n=e.members;t<n.length;t++){var o=n[t];if(151===o.kind||149===o.kind)!o.symbol.isReferenced&&W_.hasModifier(o,8)&&qt(o.name,W_.Diagnostics._0_is_declared_but_its_value_is_never_read,W_.symbolName(o.symbol));else if(152===o.kind)for(var r=0,i=o.parameters;r<i.length;r++){var a=i[r];!a.symbol.isReferenced&&W_.hasModifier(a,8)&&qt(a.name,W_.Diagnostics.Property_0_is_declared_but_its_value_is_never_read,W_.symbolName(a.symbol))}}}function Op(e){if(O.noUnusedLocals&&!W_.isInAmbientContext(e)&&e.typeParameters){var t=Vn(e);if((t&&t.declarations&&W_.lastOrUndefined(t.declarations))!==e)return;for(var n=0,o=e.typeParameters;n<o.length;n++){var r=o[n];Gn(r.symbol).isReferenced||Np(r.name)||qt(r.name,W_.Diagnostics._0_is_declared_but_its_value_is_never_read,W_.symbolName(r.symbol))}}}function Rp(e){if(207===e.kind&&G_(e),W_.isFunctionOrModuleBlock(e)){var t=nt;W_.forEach(e.statements,Ad),nt=t}else W_.forEach(e.statements,Ad);e.locals&&Dp(e)}function Lp(e,t,n){if(!t||t.escapedText!==n)return!1;if(149===e.kind||148===e.kind||151===e.kind||150===e.kind||153===e.kind||154===e.kind)return!1;if(W_.isInAmbientContext(e))return!1;var o=W_.getRootDeclaration(e);return 146!==o.kind||!W_.nodeIsMissing(o.parent.body)}function Pp(e,t){Lp(e,t,"_this")&&vt.push(e)}function Mp(e,t){Lp(e,t,"_newTarget")&&bt.push(e)}function Fp(t){W_.findAncestor(t,function(e){if(4&n_(e))return 71!==t.kind?qt(W_.getNameOfDeclaration(t),W_.Diagnostics.Duplicate_identifier_this_Compiler_uses_variable_declaration_this_to_capture_this_reference):qt(t,W_.Diagnostics.Expression_resolves_to_variable_declaration_this_that_compiler_uses_to_capture_this_reference),!0})}function Up(t){W_.findAncestor(t,function(e){if(8&n_(e))return 71!==t.kind?qt(W_.getNameOfDeclaration(t),W_.Diagnostics.Duplicate_identifier_newTarget_Compiler_uses_variable_declaration_newTarget_to_capture_new_target_meta_property_reference):qt(t,W_.Diagnostics.Expression_resolves_to_variable_declaration_newTarget_that_compiler_uses_to_capture_new_target_meta_property_reference),!0})}function Hp(e,t){if(Lp(e,t,"_super")){var n=W_.getContainingClass(e);n&&!W_.isInAmbientContext(n)&&W_.getClassExtendsHeritageClauseElement(n)&&qt(e,71!==e.kind?W_.Diagnostics.Duplicate_identifier_super_Compiler_uses_super_to_capture_base_class_reference:W_.Diagnostics.Expression_resolves_to_super_that_compiler_uses_to_capture_base_class_reference)}}function Gp(e,t){if(!(S>=W_.ModuleKind.ES2015)&&(Lp(e,t,"require")||Lp(e,t,"exports"))&&(233!==e.kind||1===W_.getModuleInstanceState(e))){var n=Bo(e);265===n.kind&&W_.isExternalOrCommonJsModule(n)&&qt(t,W_.Diagnostics.Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module,W_.declarationNameToString(t),W_.declarationNameToString(t))}}function Vp(e,t){if(!(4<=w)&&Lp(e,t,"Promise")&&(233!==e.kind||1===W_.getModuleInstanceState(e))){var n=Bo(e);265===n.kind&&W_.isExternalOrCommonJsModule(n)&&1024&n.flags&&qt(t,W_.Diagnostics.Duplicate_identifier_0_Compiler_reserves_name_1_in_top_level_scope_of_a_module_containing_async_functions,W_.declarationNameToString(t),W_.declarationNameToString(t))}}function Wp(r){if(146===W_.getRootDeclaration(r).kind){var i=W_.getContainingFunction(r);!function e(t){if(!W_.isTypeNode(t)&&!W_.isDeclarationName(t)){if(179===t.kind)return e(t.expression);if(71!==t.kind)return W_.forEachChild(t,e);var n=gn(t,t.escapedText,2204607,void 0,void 0,!1);if(n&&n!==N&&n.valueDeclaration)if(n.valueDeclaration!==r){var o=W_.getEnclosingBlockScopeContainer(n.valueDeclaration);if(o===i){if(146===n.valueDeclaration.kind||176===n.valueDeclaration.kind){if(n.valueDeclaration.pos<r.pos)return;if(W_.findAncestor(t,function(e){return e===r.initializer?"quit":W_.isFunctionLike(e.parent)||149===e.parent.kind&&!W_.hasModifier(e.parent,32)&&W_.isClassLike(e.parent.parent)}))return}qt(t,W_.Diagnostics.Initializer_of_parameter_0_cannot_reference_identifier_1_declared_after_it,W_.declarationNameToString(r.name),W_.declarationNameToString(t))}}else qt(t,W_.Diagnostics.Parameter_0_cannot_be_referenced_in_its_initializer,W_.declarationNameToString(r.name))}}(r.initializer)}}function Kp(e){return e===U?F:e===Ee?Te:e}function zp(e){if(Cp(e),Ad(e.type),e.name){if(144===e.name.kind&&($c(e.name),e.initializer&&zg(e.initializer)),176===e.kind){174===e.parent.kind&&w<5&&h_(e,4),e.propertyName&&144===e.propertyName.kind&&$c(e.propertyName);var t=e.parent.parent,n=wo(t),o=e.propertyName||e.name,r=si(n,W_.getTextOfPropertyName(o));Nu(r,void 0,!1),t.initializer&&r&&ku(t,t.initializer,n,r)}if(W_.isBindingPattern(e.name)&&(175===e.name.kind&&w<2&&O.downlevelIteration&&h_(e,512),W_.forEach(e.name.elements,Ad)),e.initializer&&146===W_.getRootDeclaration(e).kind&&W_.nodeIsMissing(W_.getContainingFunction(e).body))qt(e,W_.Diagnostics.A_parameter_initializer_is_only_allowed_in_a_function_or_constructor_implementation);else if(W_.isBindingPattern(e.name))e.initializer&&215!==e.parent.parent.kind&&(Ts(zg(e.initializer),Vo(e),e,void 0),Wp(e));else{var i=Vn(e),a=Kp(Ko(i));if(e===i.valueDeclaration)e.initializer&&215!==e.parent.parent.kind&&(Ts(zg(e.initializer),a,e,void 0),Wp(e));else{var s=Kp(Vo(e));a===H||s===H||fs(a,s)||qt(e.name,W_.Diagnostics.Subsequent_variable_declarations_must_have_the_same_type_Variable_0_must_be_of_type_1_but_here_has_type_2,W_.declarationNameToString(e.name),fo(a),fo(s)),e.initializer&&Ts(zg(e.initializer),s,e,void 0),l=e,c=i.valueDeclaration,146===l.kind&&226===c.kind||226===l.kind&&146===c.kind||W_.hasQuestionToken(l)===W_.hasQuestionToken(c)&&W_.getSelectedModifierFlags(l,504)===W_.getSelectedModifierFlags(c,504)||(qt(W_.getNameOfDeclaration(i.valueDeclaration),W_.Diagnostics.All_declarations_of_0_must_have_identical_modifiers,W_.declarationNameToString(e.name)),qt(e.name,W_.Diagnostics.All_declarations_of_0_must_have_identical_modifiers,W_.declarationNameToString(e.name)))}149!==e.kind&&148!==e.kind&&(fp(e),226!==e.kind&&176!==e.kind||function(e){if(0==(3&W_.getCombinedNodeFlags(e))&&!W_.isParameterDeclaration(e)&&(226!==e.kind||e.initializer)){var t=Vn(e);if(1&t.flags){if(!W_.isIdentifier(e.name))throw W_.Debug.fail();var n=gn(e,e.name.escapedText,3,void 0,void 0,!1);if(n&&n!==t&&2&n.flags&&3&vu(n)){var o=W_.getAncestor(n.valueDeclaration,227),r=208===o.parent.kind&&o.parent.parent?o.parent.parent:void 0;if(!r||!(207===r.kind&&W_.isFunctionLike(r.parent)||234===r.kind||233===r.kind||265===r.kind)){var i=po(n);qt(e,W_.Diagnostics.Cannot_initialize_outer_scoped_variable_0_in_the_same_scope_as_block_scoped_declaration_1,i,i)}}}}}(e),Hp(e,e.name),Pp(e,e.name),Mp(e,e.name),Gp(e,e.name),Vp(e,e.name))}}var l,c}function jp(e){return function(e){if(215!==e.parent.parent.kind&&216!==e.parent.parent.kind)if(W_.isInAmbientContext(e)){if(e.initializer){if(!W_.isConst(e)||e.type){var t="=".length;return U_(e,e.initializer.pos-t,t,W_.Diagnostics.Initializers_are_not_allowed_in_ambient_contexts)}if(!L_(e.initializer))return H_(e.initializer,W_.Diagnostics.A_const_initializer_in_an_ambient_context_must_be_a_string_or_numeric_literal)}if(e.initializer&&(!W_.isConst(e)||!L_(e.initializer))){var t="=".length;return U_(e,e.initializer.pos-t,t,W_.Diagnostics.Initializers_are_not_allowed_in_ambient_contexts)}}else if(!e.initializer){if(W_.isBindingPattern(e.name)&&!W_.isBindingPattern(e.parent))return H_(e,W_.Diagnostics.A_destructuring_declaration_must_have_an_initializer);if(W_.isConst(e))return H_(e,W_.Diagnostics.const_declarations_must_be_initialized)}O.module===W_.ModuleKind.ES2015||O.module===W_.ModuleKind.ESNext||O.module===W_.ModuleKind.System||O.noEmit||W_.isInAmbientContext(e.parent.parent)||!W_.hasModifier(e.parent.parent,1)||function e(t){if(71===t.kind){if("__esModule"===W_.idText(t))return H_(t,W_.Diagnostics.Identifier_expected_esModule_is_reserved_as_an_exported_marker_when_transforming_ECMAScript_modules)}else for(var n=t.elements,o=0,r=n;o<r.length;o++){var i=r[o];if(!W_.isOmittedExpression(i))return e(i.name)}}(e.name),(W_.isLet(e)||W_.isConst(e))&&function e(t){if(71===t.kind){if(110===t.originalKeywordKind)return H_(t,W_.Diagnostics.let_is_not_allowed_to_be_used_as_a_name_in_let_or_const_declarations)}else for(var n=t.elements,o=0,r=n;o<r.length;o++){var i=r[o];W_.isOmittedExpression(i)||e(i.name)}}(e.name)}(e),zp(e)}function Yp(e){return function(e){if(e.dotDotDotToken){var t=e.parent.elements;if(e!==W_.lastOrUndefined(t))return H_(e,W_.Diagnostics.A_rest_element_must_be_last_in_a_destructuring_pattern);if(175===e.name.kind||174===e.name.kind)return H_(e.name,W_.Diagnostics.A_rest_element_cannot_contain_a_binding_pattern);e.initializer&&U_(e,e.initializer.pos-1,1,W_.Diagnostics.A_rest_element_cannot_have_an_initializer)}}(e),zp(e)}function Xp(e){y_(e)||v_(e)||P_(e.declarationList)||function(e){if(!function e(t){switch(t.kind){case 211:case 212:case 213:case 220:case 214:case 215:case 216:return!1;case 222:return e(t.parent)}return!0}(e.parent)){if(W_.isLet(e.declarationList))return H_(e,W_.Diagnostics.let_declarations_can_only_be_declared_inside_a_block);W_.isConst(e.declarationList)&&H_(e,W_.Diagnostics.const_declarations_can_only_be_declared_inside_a_block)}}(e),W_.forEach(e.declarationList.declarations,Ad)}function Jp(e){N_(e);var t,n=Tu(e.expression);if(227===e.initializer.kind){var o=e.initializer.declarations[0];o&&W_.isBindingPattern(o.name)&&qt(o.name,W_.Diagnostics.The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern),qp(e)}else{var r=e.initializer,i=$g(r);177===r.kind||178===r.kind?qt(r,W_.Diagnostics.The_left_hand_side_of_a_for_in_statement_cannot_be_a_destructuring_pattern):vs((t=wa(n))!==$?t:z,i)?Ng(r,W_.Diagnostics.The_left_hand_side_of_a_for_in_statement_must_be_a_variable_or_a_property_access):qt(r,W_.Diagnostics.The_left_hand_side_of_a_for_in_statement_must_be_of_type_string_or_any)}Og(n,17317888)||qt(e.expression,W_.Diagnostics.The_right_hand_side_of_a_for_in_statement_must_be_of_type_any_an_object_type_or_a_type_parameter),Ad(e.statement),e.locals&&Dp(e)}function qp(e){var t=e.initializer;1<=t.declarations.length&&jp(t.declarations[0])}function Zp(e,t){return $p(Tu(e),e,!0,void 0!==t)}function $p(e,t,n,o){return No(e)?e:Qp(e,t,n,o,!0)||F}function Qp(e,t,n,o,r){var i=2<=w,a=!i&&O.downlevelIteration;if(i||a||o){var s=ed(e,i?t:void 0,o,!0,r);if(s||i)return s}var l=e,c=!1,u=!1;if(n){if(65536&l.flags){var g=e.types,p=W_.filter(g,function(e){return!(262178&e.flags)});p!==g&&(l=Aa(p,!0))}else 262178&l.flags&&(l=$);if((u=l!==e)&&(w<1&&t&&(qt(t,W_.Diagnostics.Using_a_string_in_a_for_of_statement_is_only_supported_in_ECMAScript_5_and_higher),c=!0),8192&l.flags))return z}if(!Xs(l))return t&&!c&&qt(t,!n||u?a?W_.Diagnostics.Type_0_is_not_an_array_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:W_.Diagnostics.Type_0_is_not_an_array_type:a?W_.Diagnostics.Type_0_is_not_an_array_type_or_a_string_type_or_does_not_have_a_Symbol_iterator_method_that_returns_an_iterator:W_.Diagnostics.Type_0_is_not_an_array_type_or_a_string_type,fo(l)),u?z:void 0;var d=di(l,1);return u&&d?262178&d.flags?z:Aa([d,z],!0):d}function ed(e,s,l,c,u){if(!No(e))return ec(e,function(e){var t=e;if(l){if(t.iteratedTypeOfAsyncIterable)return t.iteratedTypeOfAsyncIterable;if(Zo(e,ra(!1))||Zo(e,aa(!1)))return t.iteratedTypeOfAsyncIterable=e.typeArguments[0]}if(c){if(t.iteratedTypeOfIterable)return t.iteratedTypeOfIterable;if(Zo(e,sa(!1))||Zo(e,ca(!1)))return t.iteratedTypeOfIterable=e.typeArguments[0]}var n=l&&Io(e,W_.getPropertyNameForKnownSymbolName("asyncIterator")),o=n||c&&Io(e,W_.getPropertyNameForKnownSymbolName("iterator"));if(!No(o)){var r=o&&ci(o,0);if(W_.some(r)){var i,a=td(Aa(W_.map(r,Si),!0),s,!!n);return u&&s&&a&&Ts(e,n?(i=a,pa(ra(!0),[i])):fa(a),s),n?t.iteratedTypeOfAsyncIterable=a:t.iteratedTypeOfIterable=a}s&&(qt(s,l?W_.Diagnostics.Type_must_have_a_Symbol_asyncIterator_method_that_returns_an_async_iterator:W_.Diagnostics.Type_must_have_a_Symbol_iterator_method_that_returns_an_iterator),s=void 0)}})}function td(e,t,n){if(!No(e)){var o=e;if(n?o.iteratedTypeOfAsyncIterator:o.iteratedTypeOfIterator)return n?o.iteratedTypeOfAsyncIterator:o.iteratedTypeOfIterator;if(Zo(e,(n?ia:la)(!1)))return n?o.iteratedTypeOfAsyncIterator=e.typeArguments[0]:o.iteratedTypeOfIterator=e.typeArguments[0];var r=Io(e,"next");if(!No(r)){var i=r?ci(r,0):W_.emptyArray;if(0!==i.length){var a=Aa(W_.map(i,Si),!0);if(!(No(a)||n&&No(a=hp(a,t,W_.Diagnostics.The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value_property)))){var s=a&&Io(a,"value");if(s)return n?o.iteratedTypeOfAsyncIterator=s:o.iteratedTypeOfIterator=s;t&&qt(t,n?W_.Diagnostics.The_type_returned_by_the_next_method_of_an_async_iterator_must_be_a_promise_for_a_type_with_a_value_property:W_.Diagnostics.The_type_returned_by_the_next_method_of_an_iterator_must_have_a_value_property)}}else t&&qt(t,n?W_.Diagnostics.An_async_iterator_must_have_a_next_method:W_.Diagnostics.An_iterator_must_have_a_next_method)}}}function nd(e,t){if(!No(e))return ed(e,void 0,t,!t,!1)||td(e,void 0,t)}function od(e){G_(e)||function(e){for(var t=e;t;){if(W_.isFunctionLike(t))return H_(e,W_.Diagnostics.Jump_target_cannot_cross_function_boundary);switch(t.kind){case 222:if(e.label&&t.label.escapedText===e.label.escapedText){var n=217===e.kind&&!W_.isIterationStatement(t.statement,!0);return!!n&&H_(e,W_.Diagnostics.A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement)}break;case 221:if(218===e.kind&&!e.label)return;break;default:if(W_.isIterationStatement(t,!1)&&!e.label)return}t=t.parent}if(e.label){var o=218===e.kind?W_.Diagnostics.A_break_statement_can_only_jump_to_a_label_of_an_enclosing_statement:W_.Diagnostics.A_continue_statement_can_only_jump_to_a_label_of_an_enclosing_iteration_statement;return H_(e,o)}var o=218===e.kind?W_.Diagnostics.A_break_statement_can_only_be_used_within_an_enclosing_iteration_or_switch_statement:W_.Diagnostics.A_continue_statement_can_only_be_used_within_an_enclosing_iteration_statement;H_(e,o)}(e)}function rd(e){return 153===e.kind&&void 0!==W_.getEffectiveSetAccessorTypeAnnotationNode(W_.getDeclarationOfKind(e.symbol,154))}function id(e,t){var n=2==(3&W_.getFunctionFlags(e))?mp(t):t;return n&&wg(n,1025)}function ad(e){G_(e)||void 0===e.expression&&function(e,t,n,o,r){var i=W_.getSourceFileOfNode(e);if(!M_(i)){var a=W_.getSpanOfTokenAtPosition(i,e.pos);Tt.add(W_.createFileDiagnostic(i,W_.textSpanEnd(a),0,t,n,o,r))}}(e,W_.Diagnostics.Line_break_not_permitted_here),e.expression&&$g(e.expression)}function sd(n){var e,o=wi(n.symbol,1),r=wi(n.symbol,0),i=di(n,0),a=di(n,1);if((i||a)&&(W_.forEach(Yr(n),function(e){var t=qo(e);u(e,t,n,r,i,0),u(e,t,n,o,a,1)}),1&sn(n)&&W_.isClassLike(n.symbol.valueDeclaration)))for(var t=0,s=n.symbol.valueDeclaration.members;t<s.length;t++){var l=s[t];if(!W_.hasModifier(l,32)&&W_.hasDynamicName(l)){var c=qo(l.symbol);u(l.symbol,c,n,r,i,0),u(l.symbol,c,n,o,a,1)}}function u(t,e,n,o,r,i){if(r){var a,s=t.valueDeclaration;if(1!==i||(s?qc(W_.getNameOfDeclaration(s)):Zc(t.escapedName)))!s||194!==s.kind&&144!==W_.getNameOfDeclaration(s).kind&&t.parent!==n.symbol?o?a=o:2&sn(n)&&(a=W_.forEach(gr(n),function(e){return Xr(e,t.escapedName)&&di(e,i)})?void 0:n.symbol.declarations[0]):a=s,a&&!vs(e,r)&&qt(a,0===i?W_.Diagnostics.Property_0_of_type_1_is_not_assignable_to_string_index_type_2:W_.Diagnostics.Property_0_of_type_1_is_not_assignable_to_numeric_index_type_2,po(t),fo(e),fo(r))}}i&&a&&!(e=o||r)&&2&sn(n)&&(e=W_.forEach(gr(n),function(e){return di(e,0)&&di(e,1)})?void 0:n.symbol.declarations[0]),e&&!vs(a,i)&&qt(e,W_.Diagnostics.Numeric_index_type_0_is_not_assignable_to_string_index_type_1,fo(a),fo(i))}function ld(e,t){switch(e.escapedText){case"any":case"number":case"boolean":case"string":case"symbol":case"void":case"object":qt(e,t,e.escapedText)}}function cd(e){if(e)for(var t=!1,n=0;n<e.length;n++){var o=e[n];if(Qg(o),P){o.default?t=!0:t&&qt(o,W_.Diagnostics.Required_type_parameters_may_not_follow_optional_type_parameters);for(var r=0;r<n;r++)e[r].symbol===o.symbol&&qt(o.name,W_.Diagnostics.Duplicate_identifier_0,W_.declarationNameToString(o.name))}}}function ud(e){if(1!==e.declarations.length){var t,n=rn(e);if(!n.typeParametersChecked){n.typeParametersChecked=!0;var o=(t=e,W_.filter(t.declarations,function(e){return 229===e.kind||230===e.kind}));if(o.length<=1)return;if(!function(e,t){for(var n=W_.length(t),o=vi(t),r=0,i=e;r<i.length;r++){var a=i[r],s=W_.length(a.typeParameters);if(s<o||n<s)return!1;for(var l=0;l<s;l++){var c=a.typeParameters[l],u=t[l];if(c.name.escapedText!==u.symbol.escapedName)return!1;var g=c.constraint&&$a(c.constraint),p=Li(u);if((g||p)&&(!g||!p||!fs(g,p)))return!1;var d=c.default&&$a(c.default),_=ni(u);if(d&&_&&!fs(d,_))return!1}}return!0}(o,br(e).localTypeParameters))for(var r=po(e),i=0,a=o;i<a.length;i++)qt(a[i].name,W_.Diagnostics.All_declarations_of_0_must_have_identical_type_parameters,r)}}}function gd(e){var t,n;t=e,n=W_.getSourceFileOfNode(t),function(e){var t=!1,n=!1;if(!y_(e)&&!v_(e)&&e.heritageClauses)for(var o=0,r=e.heritageClauses;o<r.length;o++){var i=r[o];if(85===i.token){if(t)return F_(i,W_.Diagnostics.extends_clause_already_seen);if(n)return F_(i,W_.Diagnostics.extends_clause_must_precede_implements_clause);if(1<i.types.length)return F_(i.types[1],W_.Diagnostics.Classes_can_only_extend_a_single_class);t=!0}else{if(W_.Debug.assert(108===i.token),n)return F_(i,W_.Diagnostics.implements_clause_already_seen);n=!0}x_(i)}}(t)||T_(t.typeParameters,n),Cp(e),e.name&&(ld(e.name,W_.Diagnostics.Class_name_cannot_be_0),Pp(e,e.name),Mp(e,e.name),Gp(e,e.name),Vp(e,e.name)),cd(e.typeParameters),fp(e);var o=Vn(e),r=br(o),i=Dr(r),a=qo(o);ud(o),function(e){var t,n;(n=t||(t={}))[n.Getter=1]="Getter",n[n.Setter=2]="Setter",n[n.Method=4]="Method",n[n.Property=3]="Property";for(var o=W_.createUnderscoreEscapedMap(),r=W_.createUnderscoreEscapedMap(),i=0,a=e.members;i<a.length;i++){var s=a[i];if(152===s.kind)for(var l=0,c=s.parameters;l<c.length;l++){var u=c[l];W_.isParameterPropertyDeclaration(u)&&!W_.isBindingPattern(u.name)&&d(o,u.name,u.name.escapedText,3)}else{var g=W_.hasModifier(s,32)?r:o,p=s.name&&W_.getPropertyNameForPropertyNameNode(s.name);if(p)switch(s.kind){case 153:d(g,s.name,p,1);break;case 154:d(g,s.name,p,2);break;case 149:d(g,s.name,p,3);break;case 151:d(g,s.name,p,4)}}}function d(e,t,n,o){var r=e.get(n);r?4&r?4!==o&&qt(t,W_.Diagnostics.Duplicate_identifier_0,W_.getTextOfNode(t)):r&o?qt(t,W_.Diagnostics.Duplicate_identifier_0,W_.getTextOfNode(t)):e.set(n,r|o):e.set(n,o)}}(e),W_.isInAmbientContext(e)||function(e){for(var t=0,n=e.members;t<n.length;t++){var o=n[t],r=o.name;if(W_.hasModifier(o,32)&&r){var i=W_.getPropertyNameForPropertyNameNode(r);switch(i){case"name":case"length":case"caller":case"arguments":case"prototype":qt(r,W_.Diagnostics.Static_property_0_conflicts_with_built_in_property_Function_0_of_constructor_function_1,i,To(Vn(e)))}}}}(e);var s=W_.getClassExtendsHeritageClauseElement(e);if(s){w<2&&h_(s.parent,1);var l=gr(r);if(l.length&&P){var c=l[0],u=ur(r),g=oi(u);if(function(e,t){var n=ci(e,1);if(n.length){var o=n[0].declaration;if(o&&W_.hasModifier(o,8)){var r=dd(e.symbol);Pd(t,r)||qt(t,W_.Diagnostics.Cannot_extend_a_class_0_Class_constructor_is_marked_as_private,Dn(e.symbol))}}}(g,s),Ad(s.expression),W_.some(s.typeArguments)){W_.forEach(s.typeArguments,Ad);for(var p=0,d=lr(g,s.typeArguments,s);p<d.length&&cp(d[p].typeParameters,s.typeArguments);p++);}if(Ts(i,Dr(c,r.thisType),e.name||e,W_.Diagnostics.Class_0_incorrectly_extends_base_class_1),Ts(a,_s(g),e.name||e,W_.Diagnostics.Class_static_side_0_incorrectly_extends_base_class_static_side_1),540672&u.flags&&!ir(a)&&qt(e.name||e,W_.Diagnostics.A_mixin_class_must_have_a_constructor_with_a_single_rest_parameter_of_type_any),!(g.symbol&&32&g.symbol.flags||540672&u.flags)){var _=cr(g,s.typeArguments,s);W_.forEach(_,function(e){return Si(e)!==c})&&qt(s.expression,W_.Diagnostics.Base_constructors_must_all_have_the_same_return_type)}!function(e,t){for(var n=Jr(t),o=0,r=n;o<r.length;o++){var i=r[o],a=pd(i);if(!(4194304&a.flags)){var s=pd(Xr(e,a.escapedName)),l=W_.getDeclarationModifierFlagsFromSymbol(a);if(W_.Debug.assert(!!s,"derived should point to something, even if it is the base class' declaration."),s)if(s===a){var c=dd(e.symbol);!(128&l)||c&&W_.hasModifier(c,128)||(199===c.kind?qt(c,W_.Diagnostics.Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1,po(i),fo(t)):qt(c,W_.Diagnostics.Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2,fo(e),po(i),fo(t)))}else{var u=W_.getDeclarationModifierFlagsFromSymbol(s);if(8&l||8&u)continue;if(bu(a)&&bu(s)||98308&a.flags&&98308&s.flags)continue;var g=void 0;g=bu(a)?98304&s.flags?W_.Diagnostics.Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_accessor:W_.Diagnostics.Class_0_defines_instance_member_function_1_but_extended_class_2_defines_it_as_instance_member_property:4&a.flags?W_.Diagnostics.Class_0_defines_instance_member_property_1_but_extended_class_2_defines_it_as_instance_member_function:W_.Diagnostics.Class_0_defines_instance_member_accessor_1_but_extended_class_2_defines_it_as_instance_member_function,qt(W_.getNameOfDeclaration(s.valueDeclaration)||s.valueDeclaration,g,fo(t),po(a),fo(e))}}}}(r,c)}}var f=W_.getClassImplementsHeritageClauseElements(e);if(f)for(var h=0,m=f;h<m.length;h++){var y=m[h];if(W_.isEntityNameExpression(y.expression)||qt(y.expression,W_.Diagnostics.A_class_can_only_implement_an_identifier_Slashqualified_name_with_optional_type_arguments),up(y),P){var v=$a(y);v!==H&&(pr(v)?Ts(i,Dr(v,r.thisType),e.name||e,W_.Diagnostics.Class_0_incorrectly_implements_interface_1):qt(y,W_.Diagnostics.A_class_may_only_implement_another_class_or_interface))}}P&&(sd(r),rp(e))}function pd(e){return 1&W_.getCheckFlags(e)?e.target:e}function dd(e){return W_.forEach(e.declarations,function(e){return W_.isClassLike(e)?e:void 0})}function _d(e){if(y_(e)||v_(e)||function(e){var t=!1;if(e.heritageClauses)for(var n=0,o=e.heritageClauses;n<o.length;n++){var r=o[n];if(85!==r.token)return W_.Debug.assert(108===r.token),F_(r,W_.Diagnostics.Interface_declaration_cannot_have_implements_clause);if(t)return F_(r,W_.Diagnostics.extends_clause_already_seen);t=!0,x_(r)}}(e),cd(e.typeParameters),P){ld(e.name,W_.Diagnostics.Interface_name_cannot_be_0),fp(e);var t=Vn(e);if(ud(t),e===W_.getDeclarationOfKind(t,230)){var n=br(t),o=Dr(n);if(function(t,e){var n=gr(t);if(n.length<2)return!0;var o=W_.createUnderscoreEscapedMap();W_.forEach(Ar(t).declaredProperties,function(e){o.set(e.escapedName,{prop:e,containingType:t})});for(var r=!0,i=0,a=n;i<a.length;i++)for(var s=a[i],l=0,c=Jr(Dr(s,t.thisType));l<c.length;l++){var u=c[l],g=o.get(u.escapedName);if(g){if(g.containingType!==t&&0===Ws(g.prop,u,hs)){r=!1;var p=fo(g.containingType),d=fo(s),_=W_.chainDiagnosticMessages(void 0,W_.Diagnostics.Named_property_0_of_types_1_and_2_are_not_identical,po(u),p,d);_=W_.chainDiagnosticMessages(_,W_.Diagnostics.Interface_0_cannot_simultaneously_extend_types_1_and_2,fo(t),p,d),Tt.add(W_.createDiagnosticForNodeFromMessageChain(e,_))}}else o.set(u.escapedName,{prop:u,containingType:s})}return r}(n,e.name)){for(var r=0,i=gr(n);r<i.length;r++)Ts(o,Dr(i[r],n.thisType),e.name,W_.Diagnostics.Interface_0_incorrectly_extends_interface_1);sd(n)}}op(e)}W_.forEach(W_.getInterfaceBaseTypeNodes(e),function(e){W_.isEntityNameExpression(e.expression)||qt(e.expression,W_.Diagnostics.An_interface_can_only_extend_an_identifier_Slashqualified_name_with_optional_type_arguments),up(e)}),W_.forEach(e.members,Ad),P&&(rp(e),Dp(e))}function fd(e){var t=an(e);if(!(16384&t.flags)){t.flags|=16384;for(var n=0,o=0,r=e.members;o<r.length;o++){var i=r[o],a=hd(i,n);n="number"==typeof(an(i).enumMemberValue=a)?a+1:void 0}}}function hd(e,t){if(Oo(e.name))qt(e.name,W_.Diagnostics.Computed_property_names_are_not_allowed_in_enums);else{var n=W_.getTextOfPropertyName(e.name);Zc(n)&&"Infinity"!==(o=n)&&"-Infinity"!==o&&"NaN"!==o&&qt(e.name,W_.Diagnostics.An_enum_member_cannot_have_a_numeric_name)}var o;return e.initializer?function(c){var e=fr(Vn(c.parent)),t=W_.isConst(c.parent),n=c.initializer,o=1!==e||_r(c)?function e(t){switch(t.kind){case 192:var n=e(t.operand);if("number"==typeof n)switch(t.operator){case 37:return n;case 38:return-n;case 52:return~n}break;case 194:var o=e(t.left),r=e(t.right);if("number"==typeof o&&"number"==typeof r)switch(t.operatorToken.kind){case 49:return o|r;case 48:return o&r;case 46:return o>>r;case 47:return o>>>r;case 45:return o<<r;case 50:return o^r;case 39:return o*r;case 41:return o/r;case 37:return o+r;case 38:return o-r;case 42:return o%r}break;case 9:return t.text;case 8:return V_(t),+t.text;case 185:return e(t.expression);case 71:return W_.nodeIsMissing(t)?0:u(t,Vn(c.parent),t.escapedText);case 180:case 179:var i=t;if(function e(t){return 71===t.kind||179===t.kind&&e(t.expression)||180===t.kind&&e(t.expression)&&9===t.argumentExpression.kind}(i)){var a=Zg(i.expression);if(a.symbol&&384&a.symbol.flags){var s=void 0;if(179===i.kind)s=i.name.escapedText;else{var l=i.argumentExpression;W_.Debug.assert(W_.isLiteralExpression(l)),s=W_.escapeLeadingUnderscores(l.text)}return u(t,a.symbol,s)}}}}(n):void 0;if(void 0!==o)t&&"number"==typeof o&&!isFinite(o)&&qt(n,isNaN(o)?W_.Diagnostics.const_enum_member_initializer_was_evaluated_to_disallowed_value_NaN:W_.Diagnostics.const_enum_member_initializer_was_evaluated_to_a_non_finite_value);else{if(1===e)return qt(n,W_.Diagnostics.Computed_values_are_not_permitted_in_an_enum_with_string_valued_members),0;t?qt(n,W_.Diagnostics.In_const_enum_declarations_member_initializer_must_be_constant_expression):W_.isInAmbientContext(c.parent)?qt(n,W_.Diagnostics.In_ambient_enum_declarations_member_initializer_must_be_constant_expression):Ts($g(n),br(Vn(c.parent)),n,void 0)}return o;function u(e,t,n){var o=t.exports.get(n);if(o){var r=o.valueDeclaration;if(r!==c)return un(r,c)?an(r).enumMemberValue:(qt(e,W_.Diagnostics.A_member_initializer_in_a_enum_declaration_cannot_reference_members_declared_after_it_including_members_defined_in_other_enums),0)}}}(e):!W_.isInAmbientContext(e.parent)||W_.isConst(e.parent)?void 0!==t?t:void qt(e.name,W_.Diagnostics.Enum_member_must_have_initializer):void 0}function md(e){if(P){var t=W_.isGlobalScopeAugmentation(e),n=W_.isInAmbientContext(e);t&&!n&&qt(e.name,W_.Diagnostics.Augmentations_for_the_global_scope_should_have_declare_modifier_unless_they_appear_in_already_ambient_context);var o=W_.isAmbientModule(e);if(Ed(e,o?W_.Diagnostics.An_ambient_module_declaration_is_only_allowed_at_the_top_level_in_a_file:W_.Diagnostics.A_namespace_declaration_is_only_allowed_in_a_namespace_or_module))return;y_(e)||v_(e)||n||9!==e.name.kind||H_(e.name,W_.Diagnostics.Only_ambient_modules_can_use_quoted_names),W_.isIdentifier(e.name)&&(Pp(e,e.name),Gp(e,e.name),Vp(e,e.name)),fp(e);var r=Vn(e);if(512&r.flags&&1<r.declarations.length&&!n&&J_(e,O.preserveConstEnums||O.isolatedModules)){var i=function(e){for(var t=0,n=e.declarations;t<n.length;t++){var o=n[t];if((229===o.kind||228===o.kind&&W_.nodeIsPresent(o.body))&&!W_.isInAmbientContext(o))return o}}(r);i&&(W_.getSourceFileOfNode(e)!==W_.getSourceFileOfNode(i)?qt(e.name,W_.Diagnostics.A_namespace_declaration_cannot_be_in_a_different_file_from_a_class_or_function_with_which_it_is_merged):e.pos<i.pos&&qt(e.name,W_.Diagnostics.A_namespace_declaration_cannot_be_located_prior_to_a_class_or_function_with_which_it_is_merged));var a=W_.getDeclarationOfKind(r,229);a&&(c=e,u=a,g=W_.getEnclosingBlockScopeContainer(c),p=W_.getEnclosingBlockScopeContainer(u),ln(g)?ln(p):!ln(p)&&g===p)&&(an(e).flags|=32768)}if(o)if(W_.isExternalModuleAugmentation(e)){if((t||33554432&Vn(e).flags)&&e.body)for(var s=0,l=e.body.statements;s<l.length;s++)yd(l[s],t)}else ln(e.parent)?t?qt(e.name,W_.Diagnostics.Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_declarations):W_.isExternalModuleNameRelative(W_.getTextOfIdentifierOrLiteral(e.name))&&qt(e.name,W_.Diagnostics.Ambient_module_declaration_cannot_specify_relative_module_name):qt(e.name,t?W_.Diagnostics.Augmentations_for_the_global_scope_can_only_be_directly_nested_in_external_modules_or_ambient_module_declarations:W_.Diagnostics.Ambient_modules_cannot_be_nested_in_other_modules_or_namespaces)}var c,u,g,p;e.body&&(Ad(e.body),W_.isGlobalScopeAugmentation(e)||Dp(e))}function yd(e,t){switch(e.kind){case 208:for(var n=0,o=e.declarationList.declarations;n<o.length;n++)yd(o[n],t);break;case 243:case 244:F_(e,W_.Diagnostics.Exports_and_export_assignments_are_not_permitted_in_module_augmentations);break;case 237:case 238:F_(e,W_.Diagnostics.Imports_are_not_permitted_in_module_augmentations_Consider_moving_them_to_the_enclosing_external_module);break;case 176:case 226:var r=e.name;if(W_.isBindingPattern(r)){for(var i=0,a=r.elements;i<a.length;i++)yd(a[i],t);break}case 229:case 232:case 228:case 230:case 233:case 231:if(t)return;var s=Vn(e);if(s){var l=!(33554432&s.flags);l||(l=W_.isExternalModuleAugmentation(s.parent.declarations[0]))}}}function vd(e){switch(e.kind){case 71:return e;case 143:for(;71!==(e=e.left).kind;);return e;case 179:for(;71!==(e=e.expression).kind;);return e}}function bd(e){var t=W_.getExternalModuleName(e);if(!W_.nodeIsMissing(t)&&9!==t.kind)return qt(t,W_.Diagnostics.String_literal_expected),!1;var n=234===e.parent.kind&&W_.isAmbientModule(e.parent.parent);return 265===e.parent.kind||n?!(n&&W_.isExternalModuleNameRelative(W_.getTextOfIdentifierOrLiteral(t))&&!bo(e)&&(qt(e,W_.Diagnostics.Import_or_export_declaration_in_an_ambient_module_declaration_cannot_reference_module_through_relative_module_name),1)):(qt(t,244===e.kind?W_.Diagnostics.Export_declarations_are_not_permitted_in_a_namespace:W_.Diagnostics.Import_declarations_in_a_namespace_cannot_reference_a_module),!1)}function kd(e){var t=Vn(e),n=Sn(t);if(n!==N){var o=(1156031&t.flags?107455:0)|(793064&t.flags?793064:0)|(1920&t.flags?1920:0);n.flags&o&&qt(e,246===e.kind?W_.Diagnostics.Export_declaration_conflicts_with_exported_declaration_of_0:W_.Diagnostics.Import_declaration_conflicts_with_local_declaration_of_0,po(t)),!O.isolatedModules||246!==e.kind||107455&n.flags||W_.isInAmbientContext(e)||qt(e,W_.Diagnostics.Cannot_re_export_a_type_when_the_isolatedModules_flag_is_provided)}}function Td(e){Pp(e,e.name),Gp(e,e.name),Vp(e,e.name),kd(e)}function Ed(e,t){var n=265===e.parent.kind||234===e.parent.kind||233===e.parent.kind;return n||F_(e,t),!n}function Sd(e){if(kd(e),!e.parent.parent.moduleSpecifier){var t=e.propertyName||e.name,n=gn(t,t.escapedText,2998271,void 0,void 0,!0);n&&(n===v||ln(Bo(n.declarations[0])))?qt(t,W_.Diagnostics.Cannot_export_0_Only_local_declarations_can_be_exported_from_a_module,W_.idText(t)):Cn(e)}}function Cd(e){var t,n=Vn(e),o=rn(n);if(!o.exportsChecked){var r=n.exports.get("export=");if(r&&(t=n,W_.forEachEntry(t.exports,function(e,t){return"export="!==t}))){var i=yn(r)||r.valueDeclaration;bo(i)||qt(i,W_.Diagnostics.An_export_assignment_cannot_be_used_in_a_module_with_other_exported_elements)}var a=Un(n);a&&a.forEach(function(e,t){var n=e.declarations,o=e.flags;if("__export"!==t&&!(1984&o)){var r=W_.countWhere(n,Xt);if(!(524288&o&&r<=2)&&1<r)for(var i=0,a=n;i<a.length;i++){var s=a[i];xd(s)&&Tt.add(W_.createDiagnosticForNode(s,W_.Diagnostics.Cannot_redeclare_exported_variable_0,W_.unescapeLeadingUnderscores(t)))}}}),o.exportsChecked=!0}}function xd(e){return 228!==e.kind&&151!==e.kind||!!e.body}function Ad(e){if(e){if(W_.isInJavaScriptFile(e)&&e.jsDoc)for(var t=0,n=e.jsDoc;t<n.length;t++){var o=n[t].tags;W_.forEach(o,Ad)}var r,i,a,s,l,c,u,g,p,d,_,f,h,m,y,v,b,k=e.kind;if(T)switch(k){case 233:case 229:case 230:case 228:T.throwIfCancellationRequested()}switch(k){case 145:return Qg(e);case 146:return ep(e);case 149:case 148:return ip(e);case 160:case 161:case 155:case 156:case 157:return np(e);case 151:case 150:return R_(b=e)||D_(b.name),Ap(b),void(W_.hasModifier(b,128)&&b.body&&qt(b,W_.Diagnostics.Method_0_cannot_have_an_implementation_because_it_is_marked_abstract,W_.declarationNameToString(b.name)));case 152:return ap(e);case 153:case 154:return sp(e);case 159:return up(e);case 158:return function(e){var t=function(e){switch(e.parent.kind){case 187:case 155:case 228:case 186:case 160:case 151:case 150:var t=e.parent;if(e===t.type)return t}}(e);if(t){var n=ki(t).typePredicate;if(n){Ad(e.type);var o=e.parameterName;if(W_.isThisTypePredicate(n))Za(o);else if(0<=n.parameterIndex)if(t.parameters[n.parameterIndex].dotDotDotToken)qt(o,W_.Diagnostics.A_type_predicate_cannot_reference_a_rest_parameter);else{var r=W_.chainDiagnosticMessages(void 0,W_.Diagnostics.A_type_predicate_s_type_must_be_assignable_to_its_parameter_s_type);Ts(n.type,Hd(t.parameters[n.parameterIndex]),e.type,void 0,r)}else if(o){for(var i=!1,a=0,s=t.parameters;a<s.length;a++){var l=s[a].name;if(W_.isBindingPattern(l)&&tp(l,o,n.parameterName)){i=!0;break}}i||qt(e.parameterName,W_.Diagnostics.Cannot_find_parameter_0,n.parameterName)}}}else qt(e,W_.Diagnostics.A_type_predicate_is_only_allowed_in_return_type_position_for_functions_and_methods)}(e);case 162:return void qi(e);case 163:return v=e,W_.forEach(v.members,Ad),void(P&&(sd(Ga(v)),rp(v),op(v)));case 164:return void Ad(e.elementType);case 165:return k_((y=e).elementTypes)||0!==y.elementTypes.length||H_(y,W_.Diagnostics.A_tuple_type_element_list_cannot_be_empty),void W_.forEach(y.elementTypes,Ad);case 166:case 167:return m=e,void W_.forEach(m.types,Ad);case 168:case 170:return Ad(e.type);case 277:return function(e){var t=W_.getJSDocHost(e);if(W_.isClassDeclaration(t)||W_.isClassExpression(t)){var n=W_.getAllJSDocTagsOfKind(t,277);W_.Debug.assert(0<n.length),1<n.length&&qt(n[1],W_.Diagnostics.Class_declarations_cannot_have_more_than_one_augments_or_extends_tag);var o=xp(e.class.expression),r=W_.getClassExtendsHeritageClauseElement(t);if(r){var i=xp(r.expression);i&&o.escapedText!==i.escapedText&&qt(o,W_.Diagnostics.JSDoc_0_1_does_not_match_the_extends_2_clause,W_.idText(e.tagName),W_.idText(o),W_.idText(i))}}else qt(t,W_.Diagnostics.JSDoc_0_is_not_attached_to_a_class,W_.idText(e.tagName))}(e);case 283:return void((h=e).typeExpression||qt(h.name,W_.Diagnostics.JSDoc_typedef_tag_should_either_have_a_type_annotation_or_be_followed_by_property_or_member_tags));case 279:return Ad((f=e).typeExpression),void(W_.getParameterSymbolFromJSDoc(f)||qt(f.name,W_.Diagnostics.JSDoc_param_tag_has_name_0_but_there_is_no_parameter_with_that_name,W_.idText(143===f.name.kind?f.name.right:f.name)));case 273:np(e);case 274:case 271:case 270:case 268:case 269:return void(W_.isInJavaScriptFile(e)||W_.isInJSDoc(e)||H_(e,W_.Diagnostics.JSDoc_types_can_only_be_used_inside_documentation_comments));case 267:return Ad(e.type);case 171:return Ad((_=e).objectType),Ad(_.indexType),void gp(Ua(_),_);case 172:return Ad((d=e).typeParameter),Ad(d.type),void Ts(Wr(Ha(d)),z,d.typeParameter.constraint);case 228:return p=e,void(P&&(Ap(p),B_(p),Hp(p,p.name),Pp(p,p.name),Mp(p,p.name),Gp(p,p.name),Vp(p,p.name)));case 207:case 234:return Rp(e);case 208:return Xp(e);case 210:return G_(g=e),void $g(g.expression);case 211:return G_(u=e),$g(u.expression),Ad(u.thenStatement),209===u.thenStatement.kind&&qt(u.thenStatement,W_.Diagnostics.The_body_of_an_if_statement_cannot_be_the_empty_statement),void Ad(u.elseStatement);case 212:return G_(c=e),Ad(c.statement),void $g(c.expression);case 213:return G_(l=e),$g(l.expression),void Ad(l.statement);case 214:return G_(s=e)||s.initializer&&227===s.initializer.kind&&P_(s.initializer),s.initializer&&(227===s.initializer.kind?W_.forEach(s.initializer.declarations,jp):$g(s.initializer)),s.condition&&$g(s.condition),s.incrementor&&$g(s.incrementor),Ad(s.statement),void(s.locals&&Dp(s));case 215:return Jp(e);case 216:return function(e){if(N_(e),216===e.kind&&(e.awaitModifier?2==(6&W_.getFunctionFlags(W_.getContainingFunction(e)))&&w<5&&h_(e,16384):O.downlevelIteration&&w<2&&h_(e,256)),227===e.initializer.kind)qp(e);else{var t=e.initializer,n=Zp(e.expression,e.awaitModifier);if(177===t.kind||178===t.kind)Fg(t,n||H);else{var o=$g(t);Ng(t,W_.Diagnostics.The_left_hand_side_of_a_for_of_statement_must_be_a_variable_or_a_property_access),n&&Ts(n,o,t,void 0)}}Ad(e.statement),e.locals&&Dp(e)}(e);case 217:case 218:return od(e);case 219:return function(e){G_(e)||W_.getContainingFunction(e)||F_(e,W_.Diagnostics.A_return_statement_can_only_be_used_within_a_function_body);var t=W_.getContainingFunction(e);if(t){var n=Si(ki(t));if(A||e.expression||8192&n.flags){var o=e.expression?zg(e.expression):G,r=W_.getFunctionFlags(t);if(1&r)return;if(154===t.kind)e.expression&&qt(e,W_.Diagnostics.Setters_cannot_return_a_value);else if(152===t.kind)e.expression&&!Ts(o,n,e)&&qt(e,W_.Diagnostics.Return_type_of_constructor_signature_must_be_assignable_to_the_instance_type_of_the_class);else if(W_.getEffectiveReturnTypeNode(t)||rd(t))if(2&r){var i=mp(n),a=yp(o,e,W_.Diagnostics.The_return_type_of_an_async_function_must_either_be_a_valid_promise_or_must_not_contain_a_callable_then_member);i&&Ts(a,i,e)}else Ts(o,n,e)}else 152!==t.kind&&O.noImplicitReturns&&!id(t,n)&&qt(e,W_.Diagnostics.Not_all_code_paths_return_a_value)}}(e);case 220:return function(e){G_(e)||16384&e.flags&&F_(e,W_.Diagnostics.with_statements_are_not_allowed_in_an_async_function_block),$g(e.expression);var t=W_.getSourceFileOfNode(e);if(!M_(t)){var n=W_.getSpanOfTokenAtPosition(t,e.pos).start;U_(t,n,e.statement.pos-n,W_.Diagnostics.The_with_statement_is_not_supported_All_symbols_in_a_with_block_will_have_type_any)}}(e);case 221:return function(s){var l;G_(s);var c=!1,u=$g(s.expression),g=Zs(u);W_.forEach(s.caseBlock.clauses,function(e){if(258===e.kind&&!c)if(void 0===l)l=e;else{var t=W_.getSourceFileOfNode(s),n=W_.skipTrivia(t.text,e.pos);U_(t,n,(0<e.statements.length?e.statements[0].pos:e.end)-n,W_.Diagnostics.A_default_clause_cannot_appear_more_than_once_in_a_switch_statement),c=!0}if(P&&257===e.kind){var o=e,r=$g(o.expression),i=Zs(r),a=u;i&&g||(r=i?$s(r):r,a=$s(u)),Ug(a,r)||Es(r,a,o.expression,void 0)}W_.forEach(e.statements,Ad)}),s.caseBlock.locals&&Dp(s.caseBlock)}(e);case 222:return G_(a=e)||W_.findAncestor(a.parent,function(e){if(W_.isFunctionLike(e))return"quit";if(222===e.kind&&e.label.escapedText===a.label.escapedText){var t=W_.getSourceFileOfNode(a);return H_(a.label,W_.Diagnostics.Duplicate_label_0,W_.getTextOfNodeFromSourceText(t.text,a.label)),!0}}),void Ad(a.statement);case 223:return ad(e);case 224:return function(e){G_(e),Rp(e.tryBlock);var t=e.catchClause;if(t){if(t.variableDeclaration)if(t.variableDeclaration.type)F_(t.variableDeclaration.type,W_.Diagnostics.Catch_clause_variable_cannot_have_a_type_annotation);else if(t.variableDeclaration.initializer)F_(t.variableDeclaration.initializer,W_.Diagnostics.Catch_clause_variable_cannot_have_an_initializer);else{var n=t.block.locals;n&&W_.forEachKey(t.locals,function(e){var t=n.get(e);t&&0!=(2&t.flags)&&H_(t.valueDeclaration,W_.Diagnostics.Cannot_redeclare_identifier_0_in_catch_clause,e)})}Rp(t.block)}e.finallyBlock&&Rp(e.finallyBlock)}(e);case 226:return jp(e);case 176:return Yp(e);case 229:return(i=e).name||W_.hasModifier(i,512)||F_(i,W_.Diagnostics.A_class_declaration_without_the_default_modifier_must_have_a_name),gd(i),W_.forEach(i.members,Ad),void Dp(i);case 230:return _d(e);case 231:return y_(r=e)||v_(r),ld(r.name,W_.Diagnostics.Type_alias_name_cannot_be_0),cd(r.typeParameters),Ad(r.type),void Dp(r);case 232:return function(e){if(P){y_(e)||v_(e),ld(e.name,W_.Diagnostics.Enum_name_cannot_be_0),Pp(e,e.name),Mp(e,e.name),Gp(e,e.name),Vp(e,e.name),fp(e),fd(e);var t=W_.isConst(e);O.isolatedModules&&t&&W_.isInAmbientContext(e)&&qt(e.name,W_.Diagnostics.Ambient_const_enums_are_not_allowed_when_the_isolatedModules_flag_is_provided);var n=Vn(e);if(e===W_.getDeclarationOfKind(n,e.kind)){1<n.declarations.length&&W_.forEach(n.declarations,function(e){W_.isConstEnumDeclaration(e)!==t&&qt(W_.getNameOfDeclaration(e),W_.Diagnostics.Enum_declarations_must_all_be_const_or_non_const)});var o=!1;W_.forEach(n.declarations,function(e){if(232!==e.kind)return!1;var t=e;if(!t.members.length)return!1;var n=t.members[0];n.initializer||(o?qt(n.name,W_.Diagnostics.In_an_enum_with_multiple_declarations_only_one_declaration_can_omit_an_initializer_for_its_first_enum_element):o=!0)})}}}(e);case 233:return md(e);case 238:return function(e){if(!Ed(e,W_.Diagnostics.An_import_declaration_can_only_be_used_in_a_namespace_or_module)&&(y_(e)||v_(e)||!W_.hasModifiers(e)||F_(e,W_.Diagnostics.An_import_declaration_cannot_have_modifiers),bd(e))){var t=e.importClause;t&&(t.name&&Td(t),t.namedBindings&&(240===t.namedBindings.kind?Td(t.namedBindings):W_.forEach(t.namedBindings.elements,Td)))}}(e);case 237:return function(e){if(!Ed(e,W_.Diagnostics.An_import_declaration_can_only_be_used_in_a_namespace_or_module)&&(y_(e)||v_(e),W_.isInternalModuleImportEqualsDeclaration(e)||bd(e)))if(Td(e),W_.hasModifier(e,1)&&Cn(e),W_.isInternalModuleImportEqualsDeclaration(e)){var t=Sn(Vn(e));if(t!==N){if(107455&t.flags){var n=vd(e.moduleReference);1920&Bn(n,108479).flags||qt(n,W_.Diagnostics.Module_0_is_hidden_by_a_local_declaration_with_the_same_name,W_.declarationNameToString(n))}793064&t.flags&&ld(e.name,W_.Diagnostics.Import_name_cannot_be_0)}}else S>=W_.ModuleKind.ES2015&&!W_.isInAmbientContext(e)&&H_(e,W_.Diagnostics.Import_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_import_Asterisk_as_ns_from_mod_import_a_from_mod_import_d_from_mod_or_another_module_format_instead)}(e);case 244:return function(e){if(!Ed(e,W_.Diagnostics.An_export_declaration_can_only_be_used_in_a_module)&&(y_(e)||v_(e)||!W_.hasModifiers(e)||F_(e,W_.Diagnostics.An_export_declaration_cannot_have_modifiers),!e.moduleSpecifier||bd(e)))if(e.exportClause){W_.forEach(e.exportClause.elements,Sd);var t=234===e.parent.kind&&W_.isAmbientModule(e.parent.parent),n=!t&&234===e.parent.kind&&!e.moduleSpecifier&&W_.isInAmbientContext(e);265===e.parent.kind||t||n||qt(e,W_.Diagnostics.Export_declarations_are_not_permitted_in_a_namespace)}else{var o=In(e,e.moduleSpecifier);o&&Ln(o)&&qt(e.moduleSpecifier,W_.Diagnostics.Module_0_uses_export_and_cannot_be_used_with_export_Asterisk,po(o)),S!==W_.ModuleKind.System&&S!==W_.ModuleKind.ES2015&&S!==W_.ModuleKind.ESNext&&h_(e,32768)}}(e);case 243:return function(e){if(!Ed(e,W_.Diagnostics.An_export_assignment_can_only_be_used_in_a_module)){var t=265===e.parent.kind?e.parent:e.parent.parent;233!==t.kind||W_.isAmbientModule(t)?(y_(e)||v_(e)||!W_.hasModifiers(e)||F_(e,W_.Diagnostics.An_export_assignment_cannot_have_modifiers),71===e.expression.kind?Cn(e):zg(e.expression),Cd(t),W_.isInAmbientContext(e)&&!W_.isEntityNameExpression(e.expression)&&H_(e.expression,W_.Diagnostics.The_expression_of_an_export_assignment_must_be_an_identifier_or_qualified_name_in_an_ambient_context),e.isExportEquals&&!W_.isInAmbientContext(e)&&(S>=W_.ModuleKind.ES2015?H_(e,W_.Diagnostics.Export_assignment_cannot_be_used_when_targeting_ECMAScript_modules_Consider_using_export_default_or_another_module_format_instead):S===W_.ModuleKind.System&&H_(e,W_.Diagnostics.Export_assignment_is_not_supported_when_module_flag_is_system))):e.isExportEquals?qt(e,W_.Diagnostics.An_export_assignment_cannot_be_used_in_a_namespace):qt(e,W_.Diagnostics.A_default_export_can_only_be_used_in_an_ECMAScript_style_module)}}(e);case 209:case 225:return void G_(e);case 247:return void Cp(e)}}}function Dd(e){Ge&&Ge.push(e)}function Bd(e){W_.performance.mark("beforeCheck"),function(e){var t,n=an(e);if(!(1&n.flags)){if(O.skipLibCheck&&e.isDeclarationFile||O.skipDefaultLibCheck&&e.hasNoDefaultLib)return;t=e,W_.isInAmbientContext(t)&&function(e){for(var t=0,n=e.statements;t<n.length;t++){var o=n[t];if((W_.isDeclaration(o)||208===o.kind)&&(230!==(r=o).kind&&231!==r.kind&&238!==r.kind&&237!==r.kind&&244!==r.kind&&243!==r.kind&&236!==r.kind&&!W_.hasModifier(r,515)&&F_(r,W_.Diagnostics.A_declare_modifier_is_required_for_a_top_level_declaration_in_a_d_ts_file)))return}var r}(t),W_.clear(vt),W_.clear(bt),Ve=P&&D?[]:void 0,nt=!(Ge=[]),W_.forEach(e.statements,Ad),function(){for(var e=0,t=Ge;e<t.length;e++){var n=t[e];switch(n.kind){case 186:case 187:case 151:case 150:xg(n);break;case 153:case 154:sp(n);break;case 199:o=n,W_.forEach(o.members,Ad),Dp(o)}}var o}(),W_.isExternalModule(e)&&Dp(e),e.isDeclarationFile||function(){if(Ve)for(var e=0,t=Ve;e<t.length;e++){var n=t[e];switch(n.kind){case 265:case 233:o=n,O.noUnusedLocals&&!W_.isInAmbientContext(o)&&o.locals.forEach(function(e){if(!e.isReferenced&&!e.exportSymbol)for(var t=0,n=e.declarations;t<n.length;t++){var o=n[t];W_.isAmbientModule(o)||Ip(o,W_.symbolName(e))}});break;case 229:case 199:wp(n),Op(n);break;case 230:Op(n);break;case 207:case 235:case 214:case 215:case 216:Bp(n);break;case 152:case 186:case 228:case 187:case 151:case 153:case 154:n.body&&Bp(n),Op(n);break;case 150:case 155:case 156:case 157:case 160:case 161:case 231:Op(n)}}var o}(),Ve=Ge=void 0,W_.isExternalOrCommonJsModule(e)&&Cd(e),vt.length&&(W_.forEach(vt,Fp),W_.clear(vt)),bt.length&&(W_.forEach(bt,Up),W_.clear(bt)),n.flags|=1}}(e),W_.performance.mark("afterCheck"),W_.performance.measure("Check","beforeCheck","afterCheck")}function Id(e,t){try{return T=t,function(e){if(Nd(),e){var t=Tt.getGlobalDiagnostics(),n=t.length;Bd(e);var o=Tt.getDiagnostics(e.fileName),r=Tt.getGlobalDiagnostics();if(r!==t){var i=W_.relativeComplement(t,r,W_.compareDiagnostics);return W_.concatenate(i,o)}return 0===n&&0<r.length?W_.concatenate(r,o):o}return W_.forEach(h.getSourceFiles(),Bd),Tt.getDiagnostics()}(e)}finally{T=void 0}}function Nd(){if(!P)throw new Error("Trying to get diagnostics from a type checker that does not produce them.")}function wd(e){if(e)for(;e.parent;){if(220===e.parent.kind&&e.parent.statement===e)return!0;e=e.parent}return!1}function Od(e){switch(e.kind){case 145:case 229:case 230:case 231:case 232:return!0}}function Rd(e){for(var t=e;t.parent&&143===t.parent.kind;)t=t.parent;return t.parent&&159===t.parent.kind}function Ld(e,t){for(var n;(e=W_.getContainingClass(e))&&!(n=t(e)););return n}function Pd(e,t){return!!Ld(e,function(e){return e===t})}function Md(e){return void 0!==function(e){for(;143===e.parent.kind;)e=e.parent;return 237===e.parent.kind?e.parent.moduleReference===e&&e.parent:243===e.parent.kind?e.parent.expression===e&&e.parent:void 0}(e)}function Fd(e){if(W_.isDeclarationName(e))return Vn(e.parent);if(W_.isInJavaScriptFile(e)&&179===e.parent.kind&&e.parent===e.parent.parent.left){var t=function(e){switch(W_.getSpecialPropertyAssignmentKind(e.parent.parent)){case 1:case 3:return Vn(e.parent);case 4:case 2:case 5:return Vn(e.parent.parent)}}(e);if(t)return t}if(243===e.parent.kind&&W_.isEntityNameExpression(e))return Bn(e,2998271);if(179!==e.kind&&Md(e)){var n=W_.getAncestor(e,237);return W_.Debug.assert(void 0!==n),An(e,!0)}if(W_.isRightSideOfQualifiedNameOrPropertyAccess(e)&&(e=e.parent),function(e){for(var t=e;t.parent&&179===t.parent.kind;)t=t.parent;return t.parent&&201===t.parent.kind}(e)){var o=0;201===e.parent.kind?(o=793064,W_.isExpressionWithTypeArgumentsInClassExtendsClause(e.parent)&&(o|=107455)):o=1920;var r=Bn(e,o|=2097152);if(r)return r}if(279===e.parent.kind)return W_.getParameterSymbolFromJSDoc(e.parent);if(145===e.parent.kind&&282===e.parent.parent.kind){W_.Debug.assert(!W_.isInJavaScriptFile(e));var i=W_.getTypeParameterFromJsDoc(e.parent);return i&&i.symbol}if(W_.isPartOfExpression(e)){if(W_.nodeIsMissing(e))return;if(71===e.kind)return W_.isJSXTagName(e)&&ou(e)?au(e.parent):Bn(e,107455,!1,!0);if(179===e.kind||143===e.kind){var a=an(e);return a.resolvedSymbol||(179===e.kind?Su(e):Cu(e)),a.resolvedSymbol}}else{if(Rd(e))return Bn(e,o=159===e.parent.kind?793064:1920,!1,!0);if(253===e.parent.kind)return si(_u((s=e.parent).parent.parent),s.name.escapedText)||N}var s;return 158===e.parent.kind?Bn(e,1):void 0}function Ud(e){if(265===e.kind)return W_.isExternalModule(e)?Gn(e.symbol):void 0;if(!wd(e)){if(q_(e))return Vn(e.parent);if(W_.isLiteralComputedPropertyDeclarationName(e))return Vn(e.parent.parent);if(71===e.kind){if(Md(e))return Fd(e);if(176===e.parent.kind&&174===e.parent.parent.kind&&e===e.parent.propertyName){var t=Hd(e.parent.parent),n=t&&si(t,e.escapedText);if(n)return n}}switch(e.kind){case 71:case 179:case 143:return Fd(e);case 99:var o=W_.getThisContainer(e,!1);if(W_.isFunctionLike(o)){var r=ki(o);if(r.thisParameter)return r.thisParameter}if(W_.isInExpressionContext(e))return $g(e).symbol;case 169:return Za(e).symbol;case 97:return $g(e).symbol;case 123:var i=e.parent;return i&&152===i.kind?i.parent.symbol:void 0;case 9:if(W_.isExternalModuleImportEqualsDeclaration(e.parent.parent)&&W_.getExternalModuleImportEqualsDeclarationExpression(e.parent.parent)===e||(238===e.parent.kind||244===e.parent.kind)&&e.parent.moduleSpecifier===e||W_.isInJavaScriptFile(e)&&W_.isRequireCall(e.parent,!1)||W_.isImportCall(e.parent))return In(e,e);case 8:var a=W_.isElementAccessExpression(e.parent)?e.parent.argumentExpression===e?Zg(e.parent.expression):void 0:W_.isLiteralTypeNode(e.parent)&&W_.isIndexedAccessTypeNode(e.parent.parent)?$a(e.parent.parent.objectType):void 0;return a&&si(a,W_.escapeLeadingUnderscores(e.text));case 79:return Vn(e.parent);default:return}}}function Hd(e){if(wd(e))return H;if(W_.isPartOfTypeNode(e)){var t=$a(e);return t&&W_.isExpressionWithTypeArgumentsInClassImplementsClause(e)&&(t=Dr(t,(n=Hd(W_.getContainingClass(e))).thisType)),t}if(W_.isPartOfExpression(e))return Gd(e);if(W_.isExpressionWithTypeArgumentsInClassExtendsClause(e)){var n,o=gr(n=br(Vn(W_.getContainingClass(e))))[0];return o&&Dr(o,n.thisType)}var r;if(Od(e))return br(i=Vn(e));if(71===(r=e).kind&&Od(r.parent)&&r.parent.name===r)return(i=Ud(e))&&br(i);if(W_.isDeclaration(e))return qo(i=Vn(e));if(q_(e))return(i=Ud(e))&&qo(i);if(W_.isBindingPattern(e))return Uo(e.parent,!0);if(Md(e)){var i,a=(i=Ud(e))&&br(i);return a!==H?a:qo(i)}return H}function Gd(e){return W_.isRightSideOfQualifiedNameOrPropertyAccess(e)&&(e=e.parent),Ja(Zg(e))}function Vd(e){return!(W_.isGeneratedIdentifier(e)||!(e=W_.getParseTreeNode(e,W_.isIdentifier)))&&(!(179===e.parent.kind&&e.parent.name===e)&&g_(e)===B)}function Wd(e){var t=In(e.parent,e);if(!t||W_.isShorthandAmbientModuleSymbol(t))return!0;var n=Ln(t),o=rn(t=On(t));return void 0===o.exportsSomeValue&&(o.exportsSomeValue=n?!!(107455&t.flags):W_.forEachEntry(Un(t),function(e){return(e=En(e))&&!!(107455&e.flags)})),o.exportsSomeValue}function Kd(e,t){if(e=W_.getParseTreeNode(e,W_.isIdentifier)){var n=g_(e,(s=(a=e).parent)&&W_.isModuleOrEnumDeclaration(s)&&a===s.name);if(n){if(1048576&n.flags){var o=Gn(n.exportSymbol);if(!t&&944&o.flags)return;n=o}var r=Wn(n);if(r){if(512&r.flags&&265===r.valueDeclaration.kind){var i=r.valueDeclaration;return i!==W_.getSourceFileOfNode(e)?void 0:i}return W_.findAncestor(e.parent,function(e){return W_.isModuleOrEnumDeclaration(e)&&Vn(e)===r})}}}var a,s}function zd(e){if(e=W_.getParseTreeNode(e,W_.isIdentifier)){var t=g_(e);if(Tn(t,107455))return yn(t)}}function jd(e){if(418&e.flags){var t=rn(e);if(void 0===t.isDeclarationWithCollidingName){var n=W_.getEnclosingBlockScopeContainer(e.valueDeclaration);if(W_.isStatementWithLocals(n)){var o=an(e.valueDeclaration);if(gn(n.parent,e.escapedName,107455,void 0,void 0,!1))t.isDeclarationWithCollidingName=!0;else if(131072&o.flags){var r=262144&o.flags,i=W_.isIterationStatement(n,!1),a=207===n.kind&&W_.isIterationStatement(n.parent,!1);t.isDeclarationWithCollidingName=!(W_.isBlockScopedContainerTopLevel(n)||r&&(i||a))}else t.isDeclarationWithCollidingName=!1}}return t.isDeclarationWithCollidingName}return!1}function Yd(e){if(!W_.isGeneratedIdentifier(e)&&(e=W_.getParseTreeNode(e,W_.isIdentifier))){var t=g_(e);if(t&&jd(t))return t.valueDeclaration}}function Xd(e){if(e=W_.getParseTreeNode(e,W_.isDeclaration)){var t=Vn(e);if(t)return jd(t)}return!1}function Jd(e){switch(e.kind){case 237:case 239:case 240:case 242:case 246:return Zd(Vn(e)||N);case 244:var t=e.exportClause;return t&&W_.forEach(t.elements,Jd);case 243:return!e.expression||71!==e.expression.kind||Zd(Vn(e)||N)}return!1}function qd(e){return!(void 0===(e=W_.getParseTreeNode(e,W_.isImportEqualsDeclaration))||265!==e.parent.kind||!W_.isInternalModuleImportEqualsDeclaration(e))&&Zd(Vn(e))&&e.moduleReference&&!W_.nodeIsMissing(e.moduleReference)}function Zd(e){var t=Sn(e);return t===N||107455&t.flags&&(O.preserveConstEnums||!$d(t))}function $d(e){return Lg(e)||e.constEnumOnlyModule}function Qd(e){if(W_.nodeIsPresent(e.body)){var t=Ti(Vn(e));return 1<t.length||1===t.length&&t[0].declaration!==e}return!1}function e_(e){return A&&!yi(e)&&e.initializer&&!W_.hasModifier(e,92)}function t_(e){return A&&yi(e)&&!e.initializer&&W_.hasModifier(e,92)}function n_(e){return an(e).flags}function o_(e){return fd(e.parent),an(e).enumMemberValue}function r_(e){switch(e.kind){case 264:case 179:case 180:return!0}return!1}function i_(e){if(264===e.kind)return o_(e);var t=an(e).resolvedSymbol;return t&&8&t.flags&&W_.isConstEnumDeclaration(t.valueDeclaration.parent)?o_(t.valueDeclaration):void 0}function a_(e,t){if(!(e=W_.getParseTreeNode(e,W_.isEntityName)))return W_.TypeReferenceSerializationKind.Unknown;if(t&&!(t=W_.getParseTreeNode(t)))return W_.TypeReferenceSerializationKind.Unknown;var n=Bn(e,107455,!0,!1,t),o=Bn(e,793064,!0,!1,t);if(n&&n===o){var r=oa(!1);if(r&&n===r)return W_.TypeReferenceSerializationKind.Promise;var i=qo(n);if(i&&ar(i))return W_.TypeReferenceSerializationKind.TypeWithConstructSignatureAndValue}if(!o)return W_.TypeReferenceSerializationKind.ObjectType;var a,s=br(o);return s===H?W_.TypeReferenceSerializationKind.Unknown:1&s.flags?W_.TypeReferenceSerializationKind.ObjectType:Og(s,15360)?W_.TypeReferenceSerializationKind.VoidNullableOrNeverType:Og(s,136)?W_.TypeReferenceSerializationKind.BooleanType:Og(s,84)?W_.TypeReferenceSerializationKind.NumberLikeType:Og(s,262178)?W_.TypeReferenceSerializationKind.StringLikeType:el(s)?W_.TypeReferenceSerializationKind.ArrayLikeType:Og(s,512)?W_.TypeReferenceSerializationKind.ESSymbolType:32768&(a=s).flags&&0<ci(a,0).length?W_.TypeReferenceSerializationKind.TypeWithCallSignature:Ys(s)?W_.TypeReferenceSerializationKind.ArrayLikeType:W_.TypeReferenceSerializationKind.ObjectType}function s_(e,t,n,o){var r=Vn(e),i=!r||133120&r.flags?H:Qs(qo(r));8192&n&&(i=il(i,2048)),Eo().buildTypeDisplay(i,o,t,n)}function l_(e,t,n,o){var r=ki(e);Eo().buildTypeDisplay(Si(r),o,t,n)}function c_(e,t,n,o){var r=gl(Gd(e));Eo().buildTypeDisplay(r,o,t,n)}function u_(e){return $e.has(W_.escapeLeadingUnderscores(e))}function g_(e,t){var n=an(e).resolvedSymbol;if(n)return n;var o=e;if(t){var r=e.parent;W_.isDeclaration(r)&&e===r.name&&(o=Bo(r))}return gn(o,e.escapedText,3253183,void 0,void 0,!0)}function p_(e){if(!W_.isGeneratedIdentifier(e)&&(e=W_.getParseTreeNode(e,W_.isIdentifier))){var t=g_(e);if(t)return Kn(t).valueDeclaration}}function d_(e){if(W_.isConst(e)){var t=qo(Vn(e));return!!(96&t.flags&&1048576&t.flags)}return!1}function __(e,t){var n=qo(Vn(e));t.writeStringLiteral(ko(n))}function f_(e){var t=W_.getExternalModuleName(e),n=Nn(t,t,void 0);if(n)return W_.getDeclarationOfKind(n,265)}function h_(e,t){if((c&t)!==t&&O.importHelpers){var n=W_.getSourceFileOfNode(e);if(W_.isEffectiveExternalModule(n,O)&&!W_.isInAmbientContext(e)){var o=(s=n,l=e,u||(u=wn(s,W_.externalHelpersModuleNameText,W_.Diagnostics.This_syntax_requires_an_imported_helper_but_module_0_cannot_be_found,l)||N),u);if(o!==N)for(var r=t&~c,i=1;i<=65536;i<<=1)if(r&i){var a=m_(i);cn(o.exports,W_.escapeLeadingUnderscores(a),107455)||qt(e,W_.Diagnostics.This_syntax_requires_an_imported_helper_named_1_but_module_0_has_no_exported_member_1,W_.externalHelpersModuleNameText,a)}c|=t}}var s,l}function m_(e){switch(e){case 1:return"__extends";case 2:return"__assign";case 4:return"__rest";case 8:return"__decorate";case 16:return"__metadata";case 32:return"__param";case 64:return"__awaiter";case 128:return"__generator";case 256:return"__values";case 512:return"__read";case 1024:return"__spread";case 2048:return"__await";case 4096:return"__asyncGenerator";case 8192:return"__asyncDelegator";case 16384:return"__asyncValues";case 32768:return"__exportStar";case 65536:return"__makeTemplateObject";default:W_.Debug.fail("Unrecognized helper")}}function y_(e){if(!e.decorators)return!1;if(!W_.nodeCanBeDecorated(e))return 151!==e.kind||W_.nodeIsPresent(e.body)?F_(e,W_.Diagnostics.Decorators_are_not_valid_here):F_(e,W_.Diagnostics.A_decorator_can_only_decorate_a_method_implementation_not_an_overload);if(153===e.kind||154===e.kind){var t=W_.getAllAccessorDeclarations(e.parent.members,e);if(t.firstAccessor.decorators&&e===t.secondAccessor)return F_(e,W_.Diagnostics.Decorators_cannot_be_applied_to_multiple_get_Slashset_accessors_of_the_same_name)}return!1}function v_(e){var t,n,o,r,i,a=!!(t=e).modifiers&&(function(e){switch(e.kind){case 153:case 154:case 152:case 149:case 148:case 151:case 150:case 157:case 233:case 238:case 237:case 244:case 243:case 186:case 187:case 146:return!1;default:if(234===e.parent.kind||265===e.parent.kind)return!1;switch(e.kind){case 228:return b_(e,120);case 229:return b_(e,117);case 230:case 208:case 231:return!0;case 232:return b_(e,76);default:return W_.Debug.fail(),!1}}}(t)?F_(t,W_.Diagnostics.Modifiers_cannot_appear_here):void 0);if(void 0!==a)return a;for(var s=0,l=0,c=e.modifiers;l<c.length;l++){var u=c[l];if(131!==u.kind){if(148===e.kind||150===e.kind)return H_(u,W_.Diagnostics._0_modifier_cannot_appear_on_a_type_member,W_.tokenToString(u.kind));if(157===e.kind)return H_(u,W_.Diagnostics._0_modifier_cannot_appear_on_an_index_signature,W_.tokenToString(u.kind))}switch(u.kind){case 76:if(232!==e.kind&&229===e.parent.kind)return H_(e,W_.Diagnostics.A_class_member_cannot_have_the_0_keyword,W_.tokenToString(76));break;case 114:case 113:case 112:var g=yo(W_.modifierToFlag(u.kind));if(28&s)return H_(u,W_.Diagnostics.Accessibility_modifier_already_seen);if(32&s)return H_(u,W_.Diagnostics._0_modifier_must_precede_1_modifier,g,"static");if(64&s)return H_(u,W_.Diagnostics._0_modifier_must_precede_1_modifier,g,"readonly");if(256&s)return H_(u,W_.Diagnostics._0_modifier_must_precede_1_modifier,g,"async");if(234===e.parent.kind||265===e.parent.kind)return H_(u,W_.Diagnostics._0_modifier_cannot_appear_on_a_module_or_namespace_element,g);if(128&s)return 112===u.kind?H_(u,W_.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,g,"abstract"):H_(u,W_.Diagnostics._0_modifier_must_precede_1_modifier,g,"abstract");s|=W_.modifierToFlag(u.kind);break;case 115:if(32&s)return H_(u,W_.Diagnostics._0_modifier_already_seen,"static");if(64&s)return H_(u,W_.Diagnostics._0_modifier_must_precede_1_modifier,"static","readonly");if(256&s)return H_(u,W_.Diagnostics._0_modifier_must_precede_1_modifier,"static","async");if(234===e.parent.kind||265===e.parent.kind)return H_(u,W_.Diagnostics._0_modifier_cannot_appear_on_a_module_or_namespace_element,"static");if(146===e.kind)return H_(u,W_.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"static");if(128&s)return H_(u,W_.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,"static","abstract");s|=32,n=u;break;case 131:if(64&s)return H_(u,W_.Diagnostics._0_modifier_already_seen,"readonly");if(149!==e.kind&&148!==e.kind&&157!==e.kind&&146!==e.kind)return H_(u,W_.Diagnostics.readonly_modifier_can_only_appear_on_a_property_declaration_or_index_signature);s|=64,i=u;break;case 84:if(1&s)return H_(u,W_.Diagnostics._0_modifier_already_seen,"export");if(2&s)return H_(u,W_.Diagnostics._0_modifier_must_precede_1_modifier,"export","declare");if(128&s)return H_(u,W_.Diagnostics._0_modifier_must_precede_1_modifier,"export","abstract");if(256&s)return H_(u,W_.Diagnostics._0_modifier_must_precede_1_modifier,"export","async");if(229===e.parent.kind)return H_(u,W_.Diagnostics._0_modifier_cannot_appear_on_a_class_element,"export");if(146===e.kind)return H_(u,W_.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"export");s|=1;break;case 79:var p=265===e.parent.kind?e.parent:e.parent.parent;if(233===p.kind&&!W_.isAmbientModule(p))return H_(u,W_.Diagnostics.A_default_export_can_only_be_used_in_an_ECMAScript_style_module);s|=512;break;case 124:if(2&s)return H_(u,W_.Diagnostics._0_modifier_already_seen,"declare");if(256&s)return H_(u,W_.Diagnostics._0_modifier_cannot_be_used_in_an_ambient_context,"async");if(229===e.parent.kind)return H_(u,W_.Diagnostics._0_modifier_cannot_appear_on_a_class_element,"declare");if(146===e.kind)return H_(u,W_.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"declare");if(W_.isInAmbientContext(e.parent)&&234===e.parent.kind)return H_(u,W_.Diagnostics.A_declare_modifier_cannot_be_used_in_an_already_ambient_context);s|=2,o=u;break;case 117:if(128&s)return H_(u,W_.Diagnostics._0_modifier_already_seen,"abstract");if(229!==e.kind){if(151!==e.kind&&149!==e.kind&&153!==e.kind&&154!==e.kind)return H_(u,W_.Diagnostics.abstract_modifier_can_only_appear_on_a_class_method_or_property_declaration);if(229!==e.parent.kind||!W_.hasModifier(e.parent,128))return H_(u,W_.Diagnostics.Abstract_methods_can_only_appear_within_an_abstract_class);if(32&s)return H_(u,W_.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,"static","abstract");if(8&s)return H_(u,W_.Diagnostics._0_modifier_cannot_be_used_with_1_modifier,"private","abstract")}s|=128;break;case 120:if(256&s)return H_(u,W_.Diagnostics._0_modifier_already_seen,"async");if(2&s||W_.isInAmbientContext(e.parent))return H_(u,W_.Diagnostics._0_modifier_cannot_be_used_in_an_ambient_context,"async");if(146===e.kind)return H_(u,W_.Diagnostics._0_modifier_cannot_appear_on_a_parameter,"async");s|=256,r=u}}return 152===e.kind?32&s?H_(n,W_.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"static"):128&s?H_(n,W_.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"abstract"):256&s?H_(r,W_.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"async"):64&s?H_(i,W_.Diagnostics._0_modifier_cannot_appear_on_a_constructor_declaration,"readonly"):void 0:(238===e.kind||237===e.kind)&&2&s?H_(o,W_.Diagnostics.A_0_modifier_cannot_be_used_with_an_import_declaration,"declare"):146===e.kind&&92&s&&W_.isBindingPattern(e.name)?H_(e,W_.Diagnostics.A_parameter_property_may_not_be_declared_using_a_binding_pattern):146===e.kind&&92&s&&e.dotDotDotToken?H_(e,W_.Diagnostics.A_parameter_property_cannot_be_declared_using_a_rest_parameter):256&s?function(e,t){switch(e.kind){case 151:case 228:case 186:case 187:return!1}return H_(t,W_.Diagnostics._0_modifier_cannot_be_used_here,"async")}(e,r):void 0}function b_(e,t){return 1<e.modifiers.length||e.modifiers[0].kind!==t}function k_(e){if(e&&e.hasTrailingComma){var t=e.end-",".length,n=e.end;return U_(e[0],t,n-t,W_.Diagnostics.Trailing_comma_not_allowed)}}function T_(e,t){if(k_(e))return!0;if(e&&0===e.length){var n=e.pos-"<".length;return U_(t,n,W_.skipTrivia(t.text,e.end)+">".length-n,W_.Diagnostics.Type_parameter_list_cannot_be_empty)}}function E_(e){var t=W_.getSourceFileOfNode(e);return y_(e)||v_(e)||T_(e.typeParameters,t)||function(e){for(var t=!1,n=e.length,o=0;o<n;o++){var r=e[o];if(r.dotDotDotToken){if(o!==n-1)return H_(r.dotDotDotToken,W_.Diagnostics.A_rest_parameter_must_be_last_in_a_parameter_list);if(W_.isBindingPattern(r.name))return H_(r.name,W_.Diagnostics.A_rest_element_cannot_contain_a_binding_pattern);if(r.questionToken)return H_(r.questionToken,W_.Diagnostics.A_rest_parameter_cannot_be_optional);if(r.initializer)return H_(r.name,W_.Diagnostics.A_rest_parameter_cannot_have_an_initializer)}else if(r.questionToken){if(t=!0,r.initializer)return H_(r.name,W_.Diagnostics.Parameter_cannot_have_question_mark_and_initializer)}else if(t&&!r.initializer)return H_(r.name,W_.Diagnostics.A_required_parameter_cannot_follow_an_optional_parameter)}}(e.parameters)||function(e,t){if(187===e.kind){var n=e,o=W_.getLineAndCharacterOfPosition(t,n.equalsGreaterThanToken.pos).line,r=W_.getLineAndCharacterOfPosition(t,n.equalsGreaterThanToken.end).line;if(o!==r)return H_(n.equalsGreaterThanToken,W_.Diagnostics.Line_terminator_not_permitted_before_arrow)}return!1}(e,t)}function S_(e,t){return k_(t)||function(e,t){if(t&&0===t.length){var n=W_.getSourceFileOfNode(e),o=t.pos-"<".length;return U_(n,o,W_.skipTrivia(n.text,t.end)+">".length-o,W_.Diagnostics.Type_argument_list_cannot_be_empty)}}(e,t)}function C_(e){return function(e){if(e)for(var t=0,n=e;t<n.length;t++){var o=n[t];if(200===o.kind)return U_(o,o.pos,0,W_.Diagnostics.Argument_expression_expected)}}(e)}function x_(e){var t=e.types;if(k_(t))return!0;if(t&&0===t.length){var n=W_.tokenToString(e.token);return U_(e,t.pos,0,W_.Diagnostics._0_list_cannot_be_empty,n)}return W_.forEach(t,A_)}function A_(e){return S_(e,e.typeArguments)}function D_(e){if(144!==e.kind)return!1;var t=e;return 194===t.expression.kind&&26===t.expression.operatorToken.kind?H_(t.expression,W_.Diagnostics.A_comma_expression_is_not_allowed_in_a_computed_property_name):void 0}function B_(e){if(e.asteriskToken){if(W_.Debug.assert(228===e.kind||186===e.kind||151===e.kind),W_.isInAmbientContext(e))return H_(e.asteriskToken,W_.Diagnostics.Generators_are_not_allowed_in_an_ambient_context);if(!e.body)return H_(e.asteriskToken,W_.Diagnostics.An_overload_signature_cannot_be_declared_as_a_generator)}}function I_(e,t){if(e)return H_(e,t)}function N_(e){if(G_(e))return!0;if(216===e.kind&&e.awaitModifier&&0==(16384&e.flags))return H_(e.awaitModifier,W_.Diagnostics.A_for_await_of_statement_is_only_allowed_within_an_async_function_or_async_generator);if(227===e.initializer.kind){var t=e.initializer;if(!P_(t)){var n=t.declarations;if(!n.length)return!1;if(1<n.length){var o=215===e.kind?W_.Diagnostics.Only_a_single_variable_declaration_is_allowed_in_a_for_in_statement:W_.Diagnostics.Only_a_single_variable_declaration_is_allowed_in_a_for_of_statement;return F_(t.declarations[1],o)}var r=n[0];if(r.initializer){var o=215===e.kind?W_.Diagnostics.The_variable_declaration_of_a_for_in_statement_cannot_have_an_initializer:W_.Diagnostics.The_variable_declaration_of_a_for_of_statement_cannot_have_an_initializer;return H_(r.name,o)}if(r.type)return H_(r,o=215===e.kind?W_.Diagnostics.The_left_hand_side_of_a_for_in_statement_cannot_use_a_type_annotation:W_.Diagnostics.The_left_hand_side_of_a_for_of_statement_cannot_use_a_type_annotation)}}return!1}function w_(e){if(e.parameters.length===(153===e.kind?1:2))return W_.getThisParameter(e)}function O_(e,t){if(W_.isDynamicName(e))return H_(e,t)}function R_(e){if(function(e){if(e.modifiers&&178===e.parent.kind){if(!(2&W_.getFunctionFlags(e)))return F_(e,W_.Diagnostics.Modifiers_cannot_appear_here);if(1<e.modifiers.length)return F_(e,W_.Diagnostics.Modifiers_cannot_appear_here)}}(e)||E_(e)||B_(e))return!0;if(178===e.parent.kind){if(I_(e.questionToken,W_.Diagnostics.An_object_member_cannot_be_declared_optional))return!0;if(void 0===e.body)return U_(e,e.end-1,";".length,W_.Diagnostics._0_expected,"{")}if(W_.isClassLike(e.parent)){if(W_.isInAmbientContext(e))return O_(e.name,W_.Diagnostics.A_computed_property_name_in_an_ambient_context_must_directly_refer_to_a_built_in_symbol);if(!e.body)return O_(e.name,W_.Diagnostics.A_computed_property_name_in_a_method_overload_must_directly_refer_to_a_built_in_symbol)}else{if(230===e.parent.kind)return O_(e.name,W_.Diagnostics.A_computed_property_name_in_an_interface_must_directly_refer_to_a_built_in_symbol);if(163===e.parent.kind)return O_(e.name,W_.Diagnostics.A_computed_property_name_in_a_type_literal_must_directly_refer_to_a_built_in_symbol)}}function L_(e){return 9===e.kind||8===e.kind||192===e.kind&&38===e.operator&&8===e.operand.kind}function P_(e){var t=e.declarations;return!!k_(e.declarations)||(e.declarations.length?void 0:U_(e,t.pos,t.end-t.pos,W_.Diagnostics.Variable_declaration_list_cannot_be_empty))}function M_(e){return 0<e.parseDiagnostics.length}function F_(e,t,n,o,r){var i=W_.getSourceFileOfNode(e);if(!M_(i)){var a=W_.getSpanOfTokenAtPosition(i,e.pos);return Tt.add(W_.createFileDiagnostic(i,a.start,a.length,t,n,o,r)),!0}}function U_(e,t,n,o,r,i,a){var s=W_.getSourceFileOfNode(e);if(!M_(s))return Tt.add(W_.createFileDiagnostic(s,t,n,o,r,i,a)),!0}function H_(e,t,n,o,r){if(!M_(W_.getSourceFileOfNode(e)))return Tt.add(W_.createDiagnosticForNode(e,t,n,o,r)),!0}function G_(e){if(W_.isInAmbientContext(e)){if(W_.isAccessor(e.parent))return an(e).hasReportedStatementInAmbientContext=!0;if(!an(e).hasReportedStatementInAmbientContext&&W_.isFunctionLike(e.parent))return an(e).hasReportedStatementInAmbientContext=F_(e,W_.Diagnostics.An_implementation_cannot_be_declared_in_ambient_contexts);if(207===e.parent.kind||234===e.parent.kind||265===e.parent.kind){var t=an(e.parent);if(!t.hasReportedStatementInAmbientContext)return t.hasReportedStatementInAmbientContext=F_(e,W_.Diagnostics.Statements_are_not_allowed_in_ambient_contexts)}}}function V_(e){if(4&e.numericLiteralFlags){var t=void 0;if(1<=w?t=W_.Diagnostics.Octal_literals_are_not_available_when_targeting_ECMAScript_5_and_higher_Use_the_syntax_0:W_.isChildOfNodeWithKind(e,173)?t=W_.Diagnostics.Octal_literal_types_must_use_ES2015_syntax_Use_the_syntax_0:W_.isChildOfNodeWithKind(e,264)&&(t=W_.Diagnostics.Octal_literals_are_not_allowed_in_enums_members_initializer_Use_the_syntax_0),t){var n=W_.isPrefixUnaryExpression(e.parent)&&38===e.parent.operator,o=(n?"-":"")+"0o"+e.text;return H_(n?e.parent:e,t,o)}}}}}(ts||(ts={})),function(g){function u(e){var t=g.createNode(e,-1,-1);return t.flags|=8,t}function p(e,t){return e!==t&&(Lt(e,t),Bt(e,t),t.startsOnNewLine&&(e.startsOnNewLine=!0),g.aggregateTransformFlags(e)),e}function d(e,t){if(e){if(g.isNodeArray(e))return e}else e=[];var n=e;return n.pos=-1,n.end=-1,n.hasTrailingComma=t,n}function n(e){if(void 0!==e){var t=u(e.kind);for(var n in t.flags|=e.flags,Lt(t,e),e)!t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(t[n]=e[n]);return t}}function r(e){return"number"==typeof e?o(e+""):"boolean"==typeof e?e?_():f():g.isString(e)?i(e):(t=e,(n=i(g.getTextOfIdentifierOrLiteral(t))).textSourceNode=t,n);var t,n}function o(e){var t=u(8);return t.text=e,t.numericLiteralFlags=0,t}function i(e){var t=u(9);return t.text=e,t}function a(e,t){var n=u(71);return n.escapedText=g.escapeLeadingUnderscores(e),n.originalKeywordKind=e?g.stringToToken(e):0,n.autoGenerateKind=0,n.autoGenerateId=0,t&&(n.typeArguments=d(t)),n}g.updateNode=p,g.createNodeArray=d,g.getSynthesizedClone=n,g.createLiteral=r,g.createNumericLiteral=o,g.createIdentifier=a,g.updateIdentifier=function(e,t){return e.typeArguments!==t?p(a(g.idText(e),t),e):e};var s,l=0;function c(e){return u(e)}function _(){return u(101)}function f(){return u(86)}function h(e,t){var n=u(143);return n.left=e,n.right=xt(t),n}function m(e){var t=u(144);return t.expression=e,t}function y(e,t,n){var o=u(145);return o.name=xt(e),o.constraint=t,o.default=n,o}function v(e,t,n,o,r,i,a){var s=u(146);return s.decorators=At(e),s.modifiers=At(t),s.dotDotDotToken=n,s.name=xt(o),s.questionToken=r,s.type=i,s.initializer=a?g.parenthesizeExpressionForList(a):void 0,s}function b(e){var t=u(147);return t.expression=g.parenthesizeForAccess(e),t}function k(e,t,n,o,r){var i=u(148);return i.modifiers=At(e),i.name=xt(t),i.questionToken=n,i.type=o,i.initializer=r,i}function T(e,t,n,o,r,i){var a=u(149);return a.decorators=At(e),a.modifiers=At(t),a.name=xt(n),a.questionToken=o,a.type=r,a.initializer=i,a}function E(e,t,n,o,r){var i=B(150,e,t,n);return i.name=xt(o),i.questionToken=r,i}function S(e,t,n,o,r,i,a,s,l){var c=u(151);return c.decorators=At(e),c.modifiers=At(t),c.asteriskToken=n,c.name=xt(o),c.questionToken=r,c.typeParameters=At(i),c.parameters=d(a),c.type=s,c.body=l,c}function C(e,t,n,o){var r=u(152);return r.decorators=At(e),r.modifiers=At(t),r.typeParameters=void 0,r.parameters=d(n),r.type=void 0,r.body=o,r}function x(e,t,n,o,r,i){var a=u(153);return a.decorators=At(e),a.modifiers=At(t),a.name=xt(n),a.typeParameters=void 0,a.parameters=d(o),a.type=r,a.body=i,a}function A(e,t,n,o,r){var i=u(154);return i.decorators=At(e),i.modifiers=At(t),i.name=xt(n),i.typeParameters=void 0,i.parameters=d(o),i.body=r,i}function D(e,t,n,o){var r=u(157);return r.decorators=At(e),r.modifiers=At(t),r.parameters=d(n),r.type=o,r}function B(e,t,n,o){var r=u(e);return r.typeParameters=At(t),r.parameters=At(n),r.type=o,r}function I(e,t,n,o){return e.typeParameters!==t||e.parameters!==n||e.type!==o?p(B(e.kind,t,n,o),e):e}function N(e,t){var n=u(158);return n.parameterName=xt(e),n.type=t,n}function w(e,t){var n=u(159);return n.typeName=xt(e),n.typeArguments=t&&g.parenthesizeTypeParameters(t),n}function O(e){var t=u(162);return t.exprName=e,t}function R(e){var t=u(163);return t.members=d(e),t}function L(e){var t=u(164);return t.elementType=g.parenthesizeArrayTypeMember(e),t}function P(e){var t=u(165);return t.elementTypes=d(e),t}function M(e,t){var n=u(e);return n.types=g.parenthesizeElementTypeMembers(t),n}function F(e,t){return e.types!==t?p(M(e.kind,t),e):e}function U(e){var t=u(168);return t.type=e,t}function H(e){var t=u(170);return t.operator=127,t.type=g.parenthesizeElementTypeMember(e),t}function G(e,t){var n=u(171);return n.objectType=g.parenthesizeElementTypeMember(e),n.indexType=t,n}function V(e,t,n,o){var r=u(172);return r.readonlyToken=e,r.typeParameter=t,r.questionToken=n,r.type=o,r}function W(e){var t=u(173);return t.literal=e,t}function K(e){var t=u(174);return t.elements=d(e),t}function z(e){var t=u(175);return t.elements=d(e),t}function j(e,t,n,o){var r=u(176);return r.dotDotDotToken=e,r.propertyName=xt(t),r.name=xt(n),r.initializer=o,r}function Y(e,t){var n=u(177);return n.elements=g.parenthesizeListElements(d(e)),t&&(n.multiLine=!0),n}function X(e,t){var n=u(178);return n.properties=d(e),t&&(n.multiLine=!0),n}function J(e,t){var n=u(179);return n.expression=g.parenthesizeForAccess(e),n.name=xt(t),It(n,131072),n}function q(e,t){var n,o=u(180);return o.expression=g.parenthesizeForAccess(e),o.argumentExpression=(n=t,g.isString(n)||"number"==typeof n?r(n):n),o}function Z(e,t,n){var o=u(181);return o.expression=g.parenthesizeForAccess(e),o.typeArguments=At(t),o.arguments=g.parenthesizeListElements(d(n)),o}function $(e,t,n){var o=u(182);return o.expression=g.parenthesizeForNew(e),o.typeArguments=At(t),o.arguments=n?g.parenthesizeListElements(d(n)):void 0,o}function Q(e,t){var n=u(183);return n.tag=g.parenthesizeForAccess(e),n.template=t,n}function ee(e,t){var n=u(184);return n.type=e,n.expression=g.parenthesizePrefixOperand(t),n}function te(e){var t=u(185);return t.expression=e,t}function ne(e,t,n,o,r,i,a){var s=u(186);return s.modifiers=At(e),s.asteriskToken=t,s.name=xt(n),s.typeParameters=At(o),s.parameters=d(r),s.type=i,s.body=a,s}function oe(e,t,n,o,r,i){var a=u(187);return a.modifiers=At(e),a.typeParameters=At(t),a.parameters=d(n),a.type=o,a.equalsGreaterThanToken=r||c(36),a.body=g.parenthesizeConciseBody(i),a}function re(e){var t=u(188);return t.expression=g.parenthesizePrefixOperand(e),t}function ie(e){var t=u(189);return t.expression=g.parenthesizePrefixOperand(e),t}function ae(e){var t=u(190);return t.expression=g.parenthesizePrefixOperand(e),t}function se(e){var t=u(191);return t.expression=g.parenthesizePrefixOperand(e),t}function le(e,t){var n=u(192);return n.operator=e,n.operand=g.parenthesizePrefixOperand(t),n}function ce(e,t){var n=u(193);return n.operand=g.parenthesizePostfixOperand(e),n.operator=t,n}function ue(e,t,n){var o,r=u(194),i="number"==typeof(o=t)?c(o):o,a=i.kind;return r.left=g.parenthesizeBinaryOperand(a,e,!0,void 0),r.operatorToken=i,r.right=g.parenthesizeBinaryOperand(a,n,!1,r.left),r}function ge(e,t,n,o,r){var i=u(195);return i.condition=g.parenthesizeForConditionalHead(e),i.questionToken=r?t:c(55),i.whenTrue=g.parenthesizeSubexpressionOfConditionalExpression(r?n:t),i.colonToken=r?o:c(56),i.whenFalse=g.parenthesizeSubexpressionOfConditionalExpression(r||n),i}function pe(e,t){var n=u(196);return n.head=e,n.templateSpans=d(t),n}function de(e,t){var n=u(197);return n.asteriskToken=e&&39===e.kind?e:void 0,n.expression=e&&39!==e.kind?e:t,n}function _e(e){var t=u(198);return t.expression=g.parenthesizeExpressionForList(e),t}function fe(e,t,n,o,r){var i=u(199);return i.decorators=void 0,i.modifiers=At(e),i.name=xt(t),i.typeParameters=At(n),i.heritageClauses=At(o),i.members=d(r),i}function he(e,t){var n=u(201);return n.expression=g.parenthesizeForAccess(t),n.typeArguments=At(e),n}function me(e,t){var n=u(202);return n.expression=e,n.type=t,n}function ye(e){var t=u(203);return t.expression=g.parenthesizeForAccess(e),t}function ve(e,t){var n=u(204);return n.keywordToken=e,n.name=t,n}function be(e,t){var n=u(205);return n.expression=e,n.literal=t,n}function ke(e,t){var n=u(207);return n.statements=d(e),t&&(n.multiLine=t),n}function Te(e,t){var n=u(208);return n.decorators=void 0,n.modifiers=At(e),n.declarationList=g.isArray(t)?Ue(t):t,n}function Ee(e){var t=u(210);return t.expression=g.parenthesizeExpressionForExpressionStatement(e),t}function Se(e,t,n){var o=u(211);return o.expression=e,o.thenStatement=t,o.elseStatement=n,o}function Ce(e,t){var n=u(212);return n.statement=e,n.expression=t,n}function xe(e,t){var n=u(213);return n.expression=e,n.statement=t,n}function Ae(e,t,n,o){var r=u(214);return r.initializer=e,r.condition=t,r.incrementor=n,r.statement=o,r}function De(e,t,n){var o=u(215);return o.initializer=e,o.expression=t,o.statement=n,o}function Be(e,t,n,o){var r=u(216);return r.awaitModifier=e,r.initializer=t,r.expression=n,r.statement=o,r}function Ie(e){var t=u(217);return t.label=xt(e),t}function Ne(e){var t=u(218);return t.label=xt(e),t}function we(e){var t=u(219);return t.expression=e,t}function Oe(e,t){var n=u(220);return n.expression=e,n.statement=t,n}function Re(e,t){var n=u(221);return n.expression=g.parenthesizeExpressionForList(e),n.caseBlock=t,n}function Le(e,t){var n=u(222);return n.label=xt(e),n.statement=t,n}function Pe(e){var t=u(223);return t.expression=e,t}function Me(e,t,n){var o=u(224);return o.tryBlock=e,o.catchClause=t,o.finallyBlock=n,o}function Fe(e,t,n){var o=u(226);return o.name=xt(e),o.type=t,o.initializer=void 0!==n?g.parenthesizeExpressionForList(n):void 0,o}function Ue(e,t){var n=u(227);return n.flags|=3&t,n.declarations=d(e),n}function He(e,t,n,o,r,i,a,s){var l=u(228);return l.decorators=At(e),l.modifiers=At(t),l.asteriskToken=n,l.name=xt(o),l.typeParameters=At(r),l.parameters=d(i),l.type=a,l.body=s,l}function Ge(e,t,n,o,r,i){var a=u(229);return a.decorators=At(e),a.modifiers=At(t),a.name=xt(n),a.typeParameters=At(o),a.heritageClauses=At(r),a.members=d(i),a}function Ve(e,t,n,o,r,i){var a=u(230);return a.decorators=At(e),a.modifiers=At(t),a.name=xt(n),a.typeParameters=At(o),a.heritageClauses=At(r),a.members=d(i),a}function We(e,t,n,o,r){var i=u(231);return i.decorators=At(e),i.modifiers=At(t),i.name=xt(n),i.typeParameters=At(o),i.type=r,i}function Ke(e,t,n,o){var r=u(232);return r.decorators=At(e),r.modifiers=At(t),r.name=xt(n),r.members=d(o),r}function ze(e,t,n,o,r){var i=u(233);return i.flags|=532&r,i.decorators=At(e),i.modifiers=At(t),i.name=n,i.body=o,i}function je(e){var t=u(234);return t.statements=d(e),t}function Ye(e){var t=u(235);return t.clauses=d(e),t}function Xe(e){var t=u(236);return t.name=xt(e),t}function Je(e,t,n,o){var r=u(237);return r.decorators=At(e),r.modifiers=At(t),r.name=xt(n),r.moduleReference=o,r}function qe(e,t,n,o){var r=u(238);return r.decorators=At(e),r.modifiers=At(t),r.importClause=n,r.moduleSpecifier=o,r}function Ze(e,t){var n=u(239);return n.name=e,n.namedBindings=t,n}function $e(e){var t=u(240);return t.name=e,t}function Qe(e){var t=u(241);return t.elements=d(e),t}function et(e,t){var n=u(242);return n.propertyName=e,n.name=t,n}function tt(e,t,n,o){var r=u(243);return r.decorators=At(e),r.modifiers=At(t),r.isExportEquals=n,r.expression=o,r}function nt(e,t,n,o){var r=u(244);return r.decorators=At(e),r.modifiers=At(t),r.exportClause=n,r.moduleSpecifier=o,r}function ot(e){var t=u(245);return t.elements=d(e),t}function rt(e,t){var n=u(246);return n.propertyName=xt(e),n.name=xt(t),n}function it(e){var t=u(248);return t.expression=e,t}function at(e,t,n){var o=u(249);return o.openingElement=e,o.children=d(t),o.closingElement=n,o}function st(e,t){var n=u(250);return n.tagName=e,n.attributes=t,n}function lt(e,t){var n=u(251);return n.tagName=e,n.attributes=t,n}function ct(e){var t=u(252);return t.tagName=e,t}function ut(e,t){var n=u(253);return n.name=e,n.initializer=t,n}function gt(e){var t=u(254);return t.properties=d(e),t}function pt(e){var t=u(255);return t.expression=e,t}function dt(e,t){var n=u(256);return n.dotDotDotToken=e,n.expression=t,n}function _t(e,t){var n=u(257);return n.expression=g.parenthesizeExpressionForList(e),n.statements=d(t),n}function ft(e){var t=u(258);return t.statements=d(e),t}function ht(e,t){var n=u(259);return n.token=e,n.types=d(t),n}function mt(e,t){var n=u(260);return n.variableDeclaration=g.isString(e)?Fe(e):e,n.block=t,n}function yt(e,t){var n=u(261);return n.name=xt(e),n.questionToken=void 0,n.initializer=void 0!==t?g.parenthesizeExpressionForList(t):void 0,n}function vt(e,t){var n=u(262);return n.name=xt(e),n.objectAssignmentInitializer=void 0!==t?g.parenthesizeExpressionForList(t):void 0,n}function bt(e){var t=u(263);return t.expression=void 0!==e?g.parenthesizeExpressionForList(e):void 0,t}function kt(e,t){var n=u(264);return n.name=xt(e),n.initializer=t&&g.parenthesizeExpressionForList(t),n}function Tt(e,t){var n=u(288);return n.expression=e,n.original=t,Bt(n,t),n}function Et(e){if(g.nodeIsSynthesized(e)&&!g.isParseTreeNode(e)&&!e.original&&!e.emitNode&&!e.id){if(289===e.kind)return e.elements;if(g.isBinaryExpression(e)&&26===e.operatorToken.kind)return[e.left,e.right]}return e}function St(e){var t=u(289);return t.elements=d(g.sameFlatMap(e,Et)),t}function Ct(e){var t=g.createNode(266);return t.sourceFiles=e,t}function xt(e){return g.isString(e)?a(e):e}function At(e){return e?d(e):void 0}function Dt(e){if(!e.emitNode){if(g.isParseTreeNode(e)){if(265===e.kind)return e.emitNode={annotatedNodes:[e]};Dt(g.getSourceFileOfNode(e)).annotatedNodes.push(e)}e.emitNode={}}return e.emitNode}function Bt(e,t){return t&&(e.pos=t.pos,e.end=t.end),e}function It(e,t){return Dt(e).flags=t,e}function Nt(e){var t=e.emitNode;return t&&t.leadingComments}function wt(e,t){return Dt(e).leadingComments=t,e}function Ot(e){var t=e.emitNode;return t&&t.trailingComments}function Rt(e,t){return Dt(e).trailingComments=t,e}function Lt(e,t){if(e.original=t){var n=t.emitNode;n&&(e.emitNode=function(e,t){var n=e.flags,o=e.leadingComments,r=e.trailingComments,i=e.commentRange,a=e.sourceMapRange,s=e.tokenSourceMapRanges,l=e.constantValue,c=e.helpers;t||(t={});o&&(t.leadingComments=g.addRange(o.slice(),t.leadingComments));r&&(t.trailingComments=g.addRange(r.slice(),t.trailingComments));n&&(t.flags=n);i&&(t.commentRange=i);a&&(t.sourceMapRange=a);s&&(t.tokenSourceMapRanges=function(e,t){t||(t=[]);for(var n in e)t[n]=e[n];return t}(s,t.tokenSourceMapRanges));void 0!==l&&(t.constantValue=l);c&&(t.helpers=g.addRange(t.helpers,c));return t}(n,e.emitNode))}return e}g.createTempVariable=function(e){var t=a("");return t.autoGenerateKind=1,t.autoGenerateId=l,l++,e&&e(t),t},g.createLoopVariable=function(){var e=a("");return e.autoGenerateKind=2,e.autoGenerateId=l,l++,e},g.createUniqueName=function(e){var t=a(e);return t.autoGenerateKind=3,t.autoGenerateId=l,l++,t},g.getGeneratedNameForNode=function(e){var t=a("");return t.autoGenerateKind=4,t.autoGenerateId=l,t.original=e,l++,t},g.createToken=c,g.createSuper=function(){return u(97)},g.createThis=function(){return u(99)},g.createNull=function(){return u(95)},g.createTrue=_,g.createFalse=f,g.createQualifiedName=h,g.updateQualifiedName=function(e,t,n){return e.left!==t||e.right!==n?p(h(t,n),e):e},g.createComputedPropertyName=m,g.updateComputedPropertyName=function(e,t){return e.expression!==t?p(m(t),e):e},g.createTypeParameterDeclaration=y,g.updateTypeParameterDeclaration=function(e,t,n,o){return e.name!==t||e.constraint!==n||e.default!==o?p(y(t,n,o),e):e},g.createParameter=v,g.updateParameter=function(e,t,n,o,r,i,a,s){return e.decorators!==t||e.modifiers!==n||e.dotDotDotToken!==o||e.name!==r||e.questionToken!==i||e.type!==a||e.initializer!==s?p(v(t,n,o,r,i,a,s),e):e},g.createDecorator=b,g.updateDecorator=function(e,t){return e.expression!==t?p(b(t),e):e},g.createPropertySignature=k,g.updatePropertySignature=function(e,t,n,o,r,i){return e.modifiers!==t||e.name!==n||e.questionToken!==o||e.type!==r||e.initializer!==i?p(k(t,n,o,r,i),e):e},g.createProperty=T,g.updateProperty=function(e,t,n,o,r,i,a){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.questionToken!==r||e.type!==i||e.initializer!==a?p(T(t,n,o,r,i,a),e):e},g.createMethodSignature=E,g.updateMethodSignature=function(e,t,n,o,r,i){return e.typeParameters!==t||e.parameters!==n||e.type!==o||e.name!==r||e.questionToken!==i?p(E(t,n,o,r,i),e):e},g.createMethod=S,g.updateMethod=function(e,t,n,o,r,i,a,s,l,c){return e.decorators!==t||e.modifiers!==n||e.asteriskToken!==o||e.name!==r||e.questionToken!==i||e.typeParameters!==a||e.parameters!==s||e.type!==l||e.body!==c?p(S(t,n,o,r,i,a,s,l,c),e):e},g.createConstructor=C,g.updateConstructor=function(e,t,n,o,r){return e.decorators!==t||e.modifiers!==n||e.parameters!==o||e.body!==r?p(C(t,n,o,r),e):e},g.createGetAccessor=x,g.updateGetAccessor=function(e,t,n,o,r,i,a){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.parameters!==r||e.type!==i||e.body!==a?p(x(t,n,o,r,i,a),e):e},g.createSetAccessor=A,g.updateSetAccessor=function(e,t,n,o,r,i){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.parameters!==r||e.body!==i?p(A(t,n,o,r,i),e):e},g.createCallSignature=function(e,t,n){return B(155,e,t,n)},g.updateCallSignature=function(e,t,n,o){return I(e,t,n,o)},g.createConstructSignature=function(e,t,n){return B(156,e,t,n)},g.updateConstructSignature=function(e,t,n,o){return I(e,t,n,o)},g.createIndexSignature=D,g.updateIndexSignature=function(e,t,n,o,r){return e.parameters!==o||e.type!==r||e.decorators!==t||e.modifiers!==n?p(D(t,n,o,r),e):e},g.createSignatureDeclaration=B,g.createKeywordTypeNode=function(e){return u(e)},g.createTypePredicateNode=N,g.updateTypePredicateNode=function(e,t,n){return e.parameterName!==t||e.type!==n?p(N(t,n),e):e},g.createTypeReferenceNode=w,g.updateTypeReferenceNode=function(e,t,n){return e.typeName!==t||e.typeArguments!==n?p(w(t,n),e):e},g.createFunctionTypeNode=function(e,t,n){return B(160,e,t,n)},g.updateFunctionTypeNode=function(e,t,n,o){return I(e,t,n,o)},g.createConstructorTypeNode=function(e,t,n){return B(161,e,t,n)},g.updateConstructorTypeNode=function(e,t,n,o){return I(e,t,n,o)},g.createTypeQueryNode=O,g.updateTypeQueryNode=function(e,t){return e.exprName!==t?p(O(t),e):e},g.createTypeLiteralNode=R,g.updateTypeLiteralNode=function(e,t){return e.members!==t?p(R(t),e):e},g.createArrayTypeNode=L,g.updateArrayTypeNode=function(e,t){return e.elementType!==t?p(L(t),e):e},g.createTupleTypeNode=P,g.updateTypleTypeNode=function(e,t){return e.elementTypes!==t?p(P(t),e):e},g.createUnionTypeNode=function(e){return M(166,e)},g.updateUnionTypeNode=function(e,t){return F(e,t)},g.createIntersectionTypeNode=function(e){return M(167,e)},g.updateIntersectionTypeNode=function(e,t){return F(e,t)},g.createUnionOrIntersectionTypeNode=M,g.createParenthesizedType=U,g.updateParenthesizedType=function(e,t){return e.type!==t?p(U(t),e):e},g.createThisTypeNode=function(){return u(169)},g.createTypeOperatorNode=H,g.updateTypeOperatorNode=function(e,t){return e.type!==t?p(H(t),e):e},g.createIndexedAccessTypeNode=G,g.updateIndexedAccessTypeNode=function(e,t,n){return e.objectType!==t||e.indexType!==n?p(G(t,n),e):e},g.createMappedTypeNode=V,g.updateMappedTypeNode=function(e,t,n,o,r){return e.readonlyToken!==t||e.typeParameter!==n||e.questionToken!==o||e.type!==r?p(V(t,n,o,r),e):e},g.createLiteralTypeNode=W,g.updateLiteralTypeNode=function(e,t){return e.literal!==t?p(W(t),e):e},g.createObjectBindingPattern=K,g.updateObjectBindingPattern=function(e,t){return e.elements!==t?p(K(t),e):e},g.createArrayBindingPattern=z,g.updateArrayBindingPattern=function(e,t){return e.elements!==t?p(z(t),e):e},g.createBindingElement=j,g.updateBindingElement=function(e,t,n,o,r){return e.propertyName!==n||e.dotDotDotToken!==t||e.name!==o||e.initializer!==r?p(j(t,n,o,r),e):e},g.createArrayLiteral=Y,g.updateArrayLiteral=function(e,t){return e.elements!==t?p(Y(t,e.multiLine),e):e},g.createObjectLiteral=X,g.updateObjectLiteral=function(e,t){return e.properties!==t?p(X(t,e.multiLine),e):e},g.createPropertyAccess=J,g.updatePropertyAccess=function(e,t,n){return e.expression!==t||e.name!==n?p(It(J(t,n),g.getEmitFlags(e)),e):e},g.createElementAccess=q,g.updateElementAccess=function(e,t,n){return e.expression!==t||e.argumentExpression!==n?p(q(t,n),e):e},g.createCall=Z,g.updateCall=function(e,t,n,o){return e.expression!==t||e.typeArguments!==n||e.arguments!==o?p(Z(t,n,o),e):e},g.createNew=$,g.updateNew=function(e,t,n,o){return e.expression!==t||e.typeArguments!==n||e.arguments!==o?p($(t,n,o),e):e},g.createTaggedTemplate=Q,g.updateTaggedTemplate=function(e,t,n){return e.tag!==t||e.template!==n?p(Q(t,n),e):e},g.createTypeAssertion=ee,g.updateTypeAssertion=function(e,t,n){return e.type!==t||e.expression!==n?p(ee(t,n),e):e},g.createParen=te,g.updateParen=function(e,t){return e.expression!==t?p(te(t),e):e},g.createFunctionExpression=ne,g.updateFunctionExpression=function(e,t,n,o,r,i,a,s){return e.name!==o||e.modifiers!==t||e.asteriskToken!==n||e.typeParameters!==r||e.parameters!==i||e.type!==a||e.body!==s?p(ne(t,n,o,r,i,a,s),e):e},g.createArrowFunction=oe,g.updateArrowFunction=function(e,t,n,o,r,i,a){var s,l;return void 0===a?(s=e.equalsGreaterThanToken,l=g.cast(i,g.isConciseBody)):(s=g.cast(i,function(e){return 36===e.kind}),l=a),e.modifiers!==t||e.typeParameters!==n||e.parameters!==o||e.type!==r||e.equalsGreaterThanToken!==s||e.body!==l?p(oe(t,n,o,r,s,l),e):e},g.createDelete=re,g.updateDelete=function(e,t){return e.expression!==t?p(re(t),e):e},g.createTypeOf=ie,g.updateTypeOf=function(e,t){return e.expression!==t?p(ie(t),e):e},g.createVoid=ae,g.updateVoid=function(e,t){return e.expression!==t?p(ae(t),e):e},g.createAwait=se,g.updateAwait=function(e,t){return e.expression!==t?p(se(t),e):e},g.createPrefix=le,g.updatePrefix=function(e,t){return e.operand!==t?p(le(e.operator,t),e):e},g.createPostfix=ce,g.updatePostfix=function(e,t){return e.operand!==t?p(ce(t,e.operator),e):e},g.createBinary=ue,g.updateBinary=function(e,t,n,o){return e.left!==t||e.right!==n?p(ue(t,o||e.operatorToken,n),e):e},g.createConditional=ge,g.updateConditional=function e(t,n){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];if(2===o.length){var i=o[0],a=o[1];return e(t,n,t.questionToken,i,t.colonToken,a)}g.Debug.assert(4===o.length);var s=o[0],l=o[1],c=o[2],u=o[3];return t.condition!==n||t.questionToken!==s||t.whenTrue!==l||t.colonToken!==c||t.whenFalse!==u?p(ge(n,s,l,c,u),t):t},g.createTemplateExpression=pe,g.updateTemplateExpression=function(e,t,n){return e.head!==t||e.templateSpans!==n?p(pe(t,n),e):e},g.createTemplateHead=function(e){var t=u(14);return t.text=e,t},g.createTemplateMiddle=function(e){var t=u(15);return t.text=e,t},g.createTemplateTail=function(e){var t=u(16);return t.text=e,t},g.createNoSubstitutionTemplateLiteral=function(e){var t=u(13);return t.text=e,t},g.createYield=de,g.updateYield=function(e,t,n){return e.expression!==n||e.asteriskToken!==t?p(de(t,n),e):e},g.createSpread=_e,g.updateSpread=function(e,t){return e.expression!==t?p(_e(t),e):e},g.createClassExpression=fe,g.updateClassExpression=function(e,t,n,o,r,i){return e.modifiers!==t||e.name!==n||e.typeParameters!==o||e.heritageClauses!==r||e.members!==i?p(fe(t,n,o,r,i),e):e},g.createOmittedExpression=function(){return u(200)},g.createExpressionWithTypeArguments=he,g.updateExpressionWithTypeArguments=function(e,t,n){return e.typeArguments!==t||e.expression!==n?p(he(t,n),e):e},g.createAsExpression=me,g.updateAsExpression=function(e,t,n){return e.expression!==t||e.type!==n?p(me(t,n),e):e},g.createNonNullExpression=ye,g.updateNonNullExpression=function(e,t){return e.expression!==t?p(ye(t),e):e},g.createMetaProperty=ve,g.updateMetaProperty=function(e,t){return e.name!==t?p(ve(e.keywordToken,t),e):e},g.createTemplateSpan=be,g.updateTemplateSpan=function(e,t,n){return e.expression!==t||e.literal!==n?p(be(t,n),e):e},g.createSemicolonClassElement=function(){return u(206)},g.createBlock=ke,g.updateBlock=function(e,t){return e.statements!==t?p(ke(t,e.multiLine),e):e},g.createVariableStatement=Te,g.updateVariableStatement=function(e,t,n){return e.modifiers!==t||e.declarationList!==n?p(Te(t,n),e):e},g.createEmptyStatement=function(){return u(209)},g.createStatement=Ee,g.updateStatement=function(e,t){return e.expression!==t?p(Ee(t),e):e},g.createIf=Se,g.updateIf=function(e,t,n,o){return e.expression!==t||e.thenStatement!==n||e.elseStatement!==o?p(Se(t,n,o),e):e},g.createDo=Ce,g.updateDo=function(e,t,n){return e.statement!==t||e.expression!==n?p(Ce(t,n),e):e},g.createWhile=xe,g.updateWhile=function(e,t,n){return e.expression!==t||e.statement!==n?p(xe(t,n),e):e},g.createFor=Ae,g.updateFor=function(e,t,n,o,r){return e.initializer!==t||e.condition!==n||e.incrementor!==o||e.statement!==r?p(Ae(t,n,o,r),e):e},g.createForIn=De,g.updateForIn=function(e,t,n,o){return e.initializer!==t||e.expression!==n||e.statement!==o?p(De(t,n,o),e):e},g.createForOf=Be,g.updateForOf=function(e,t,n,o,r){return e.awaitModifier!==t||e.initializer!==n||e.expression!==o||e.statement!==r?p(Be(t,n,o,r),e):e},g.createContinue=Ie,g.updateContinue=function(e,t){return e.label!==t?p(Ie(t),e):e},g.createBreak=Ne,g.updateBreak=function(e,t){return e.label!==t?p(Ne(t),e):e},g.createReturn=we,g.updateReturn=function(e,t){return e.expression!==t?p(we(t),e):e},g.createWith=Oe,g.updateWith=function(e,t,n){return e.expression!==t||e.statement!==n?p(Oe(t,n),e):e},g.createSwitch=Re,g.updateSwitch=function(e,t,n){return e.expression!==t||e.caseBlock!==n?p(Re(t,n),e):e},g.createLabel=Le,g.updateLabel=function(e,t,n){return e.label!==t||e.statement!==n?p(Le(t,n),e):e},g.createThrow=Pe,g.updateThrow=function(e,t){return e.expression!==t?p(Pe(t),e):e},g.createTry=Me,g.updateTry=function(e,t,n,o){return e.tryBlock!==t||e.catchClause!==n||e.finallyBlock!==o?p(Me(t,n,o),e):e},g.createDebuggerStatement=function(){return u(225)},g.createVariableDeclaration=Fe,g.updateVariableDeclaration=function(e,t,n,o){return e.name!==t||e.type!==n||e.initializer!==o?p(Fe(t,n,o),e):e},g.createVariableDeclarationList=Ue,g.updateVariableDeclarationList=function(e,t){return e.declarations!==t?p(Ue(t,e.flags),e):e},g.createFunctionDeclaration=He,g.updateFunctionDeclaration=function(e,t,n,o,r,i,a,s,l){return e.decorators!==t||e.modifiers!==n||e.asteriskToken!==o||e.name!==r||e.typeParameters!==i||e.parameters!==a||e.type!==s||e.body!==l?p(He(t,n,o,r,i,a,s,l),e):e},g.createClassDeclaration=Ge,g.updateClassDeclaration=function(e,t,n,o,r,i,a){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.typeParameters!==r||e.heritageClauses!==i||e.members!==a?p(Ge(t,n,o,r,i,a),e):e},g.createInterfaceDeclaration=Ve,g.updateInterfaceDeclaration=function(e,t,n,o,r,i,a){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.typeParameters!==r||e.heritageClauses!==i||e.members!==a?p(Ve(t,n,o,r,i,a),e):e},g.createTypeAliasDeclaration=We,g.updateTypeAliasDeclaration=function(e,t,n,o,r,i){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.typeParameters!==r||e.type!==i?p(We(t,n,o,r,i),e):e},g.createEnumDeclaration=Ke,g.updateEnumDeclaration=function(e,t,n,o,r){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.members!==r?p(Ke(t,n,o,r),e):e},g.createModuleDeclaration=ze,g.updateModuleDeclaration=function(e,t,n,o,r){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.body!==r?p(ze(t,n,o,r,e.flags),e):e},g.createModuleBlock=je,g.updateModuleBlock=function(e,t){return e.statements!==t?p(je(t),e):e},g.createCaseBlock=Ye,g.updateCaseBlock=function(e,t){return e.clauses!==t?p(Ye(t),e):e},g.createNamespaceExportDeclaration=Xe,g.updateNamespaceExportDeclaration=function(e,t){return e.name!==t?p(Xe(t),e):e},g.createImportEqualsDeclaration=Je,g.updateImportEqualsDeclaration=function(e,t,n,o,r){return e.decorators!==t||e.modifiers!==n||e.name!==o||e.moduleReference!==r?p(Je(t,n,o,r),e):e},g.createImportDeclaration=qe,g.updateImportDeclaration=function(e,t,n,o,r){return e.decorators!==t||e.modifiers!==n||e.importClause!==o||e.moduleSpecifier!==r?p(qe(t,n,o,r),e):e},g.createImportClause=Ze,g.updateImportClause=function(e,t,n){return e.name!==t||e.namedBindings!==n?p(Ze(t,n),e):e},g.createNamespaceImport=$e,g.updateNamespaceImport=function(e,t){return e.name!==t?p($e(t),e):e},g.createNamedImports=Qe,g.updateNamedImports=function(e,t){return e.elements!==t?p(Qe(t),e):e},g.createImportSpecifier=et,g.updateImportSpecifier=function(e,t,n){return e.propertyName!==t||e.name!==n?p(et(t,n),e):e},g.createExportAssignment=tt,g.updateExportAssignment=function(e,t,n,o){return e.decorators!==t||e.modifiers!==n||e.expression!==o?p(tt(t,n,e.isExportEquals,o),e):e},g.createExportDeclaration=nt,g.updateExportDeclaration=function(e,t,n,o,r){return e.decorators!==t||e.modifiers!==n||e.exportClause!==o||e.moduleSpecifier!==r?p(nt(t,n,o,r),e):e},g.createNamedExports=ot,g.updateNamedExports=function(e,t){return e.elements!==t?p(ot(t),e):e},g.createExportSpecifier=rt,g.updateExportSpecifier=function(e,t,n){return e.propertyName!==t||e.name!==n?p(rt(t,n),e):e},g.createExternalModuleReference=it,g.updateExternalModuleReference=function(e,t){return e.expression!==t?p(it(t),e):e},g.createJsxElement=at,g.updateJsxElement=function(e,t,n,o){return e.openingElement!==t||e.children!==n||e.closingElement!==o?p(at(t,n,o),e):e},g.createJsxSelfClosingElement=st,g.updateJsxSelfClosingElement=function(e,t,n){return e.tagName!==t||e.attributes!==n?p(st(t,n),e):e},g.createJsxOpeningElement=lt,g.updateJsxOpeningElement=function(e,t,n){return e.tagName!==t||e.attributes!==n?p(lt(t,n),e):e},g.createJsxClosingElement=ct,g.updateJsxClosingElement=function(e,t){return e.tagName!==t?p(ct(t),e):e},g.createJsxAttribute=ut,g.updateJsxAttribute=function(e,t,n){return e.name!==t||e.initializer!==n?p(ut(t,n),e):e},g.createJsxAttributes=gt,g.updateJsxAttributes=function(e,t){return e.properties!==t?p(gt(t),e):e},g.createJsxSpreadAttribute=pt,g.updateJsxSpreadAttribute=function(e,t){return e.expression!==t?p(pt(t),e):e},g.createJsxExpression=dt,g.updateJsxExpression=function(e,t){return e.expression!==t?p(dt(e.dotDotDotToken,t),e):e},g.createCaseClause=_t,g.updateCaseClause=function(e,t,n){return e.expression!==t||e.statements!==n?p(_t(t,n),e):e},g.createDefaultClause=ft,g.updateDefaultClause=function(e,t){return e.statements!==t?p(ft(t),e):e},g.createHeritageClause=ht,g.updateHeritageClause=function(e,t){return e.types!==t?p(ht(e.token,t),e):e},g.createCatchClause=mt,g.updateCatchClause=function(e,t,n){return e.variableDeclaration!==t||e.block!==n?p(mt(t,n),e):e},g.createPropertyAssignment=yt,g.updatePropertyAssignment=function(e,t,n){return e.name!==t||e.initializer!==n?p(yt(t,n),e):e},g.createShorthandPropertyAssignment=vt,g.updateShorthandPropertyAssignment=function(e,t,n){return e.name!==t||e.objectAssignmentInitializer!==n?p(vt(t,n),e):e},g.createSpreadAssignment=bt,g.updateSpreadAssignment=function(e,t){return e.expression!==t?p(bt(t),e):e},g.createEnumMember=kt,g.updateEnumMember=function(e,t,n){return e.name!==t||e.initializer!==n?p(kt(t,n),e):e},g.updateSourceFileNode=function(e,t){if(e.statements!==t){var n=u(265);return n.flags|=e.flags,n.statements=d(t),n.endOfFileToken=e.endOfFileToken,n.fileName=e.fileName,n.path=e.path,n.text=e.text,void 0!==e.amdDependencies&&(n.amdDependencies=e.amdDependencies),void 0!==e.moduleName&&(n.moduleName=e.moduleName),void 0!==e.referencedFiles&&(n.referencedFiles=e.referencedFiles),void 0!==e.typeReferenceDirectives&&(n.typeReferenceDirectives=e.typeReferenceDirectives),void 0!==e.languageVariant&&(n.languageVariant=e.languageVariant),void 0!==e.isDeclarationFile&&(n.isDeclarationFile=e.isDeclarationFile),void 0!==e.renamedDependencies&&(n.renamedDependencies=e.renamedDependencies),void 0!==e.hasNoDefaultLib&&(n.hasNoDefaultLib=e.hasNoDefaultLib),void 0!==e.languageVersion&&(n.languageVersion=e.languageVersion),void 0!==e.scriptKind&&(n.scriptKind=e.scriptKind),void 0!==e.externalModuleIndicator&&(n.externalModuleIndicator=e.externalModuleIndicator),void 0!==e.commonJsModuleIndicator&&(n.commonJsModuleIndicator=e.commonJsModuleIndicator),void 0!==e.identifiers&&(n.identifiers=e.identifiers),void 0!==e.nodeCount&&(n.nodeCount=e.nodeCount),void 0!==e.identifierCount&&(n.identifierCount=e.identifierCount),void 0!==e.symbolCount&&(n.symbolCount=e.symbolCount),void 0!==e.parseDiagnostics&&(n.parseDiagnostics=e.parseDiagnostics),void 0!==e.bindDiagnostics&&(n.bindDiagnostics=e.bindDiagnostics),void 0!==e.lineMap&&(n.lineMap=e.lineMap),void 0!==e.classifiableNames&&(n.classifiableNames=e.classifiableNames),void 0!==e.resolvedModules&&(n.resolvedModules=e.resolvedModules),void 0!==e.resolvedTypeReferenceDirectiveNames&&(n.resolvedTypeReferenceDirectiveNames=e.resolvedTypeReferenceDirectiveNames),void 0!==e.imports&&(n.imports=e.imports),void 0!==e.moduleAugmentations&&(n.moduleAugmentations=e.moduleAugmentations),p(n,e)}return e},g.getMutableClone=function(e){var t=n(e);return t.pos=e.pos,t.end=e.end,t.parent=e.parent,t},g.createNotEmittedStatement=function(e){var t=u(287);return t.original=e,Bt(t,e),t},g.createEndOfDeclarationMarker=function(e){var t=u(291);return t.emitNode={},t.original=e,t},g.createMergeDeclarationMarker=function(e){var t=u(290);return t.emitNode={},t.original=e,t},g.createPartiallyEmittedExpression=Tt,g.updatePartiallyEmittedExpression=function(e,t){return e.expression!==t?p(Tt(t,e.original),e):e},g.createCommaList=St,g.updateCommaList=function(e,t){return e.elements!==t?p(St(t),e):e},g.createBundle=Ct,g.updateBundle=function(e,t){return e.sourceFiles!==t?Ct(t):e},g.createImmediatelyInvokedFunctionExpression=function(e,t,n){return Z(ne(void 0,void 0,void 0,void 0,t?[t]:[],void 0,ke(e,!0)),void 0,n?[n]:[])},g.createImmediatelyInvokedArrowFunction=function(e,t,n){return Z(oe(void 0,void 0,t?[t]:[],void 0,void 0,ke(e,!0)),void 0,n?[n]:[])},g.createComma=function(e,t){return ue(e,26,t)},g.createLessThan=function(e,t){return ue(e,27,t)},g.createAssignment=function(e,t){return ue(e,58,t)},g.createStrictEquality=function(e,t){return ue(e,34,t)},g.createStrictInequality=function(e,t){return ue(e,35,t)},g.createAdd=function(e,t){return ue(e,37,t)},g.createSubtract=function(e,t){return ue(e,38,t)},g.createPostfixIncrement=function(e){return ce(e,43)},g.createLogicalAnd=function(e,t){return ue(e,53,t)},g.createLogicalOr=function(e,t){return ue(e,54,t)},g.createLogicalNot=function(e){return le(51,e)},g.createVoidZero=function(){return ae(r(0))},g.createExportDefault=function(e){return tt(void 0,void 0,!1,e)},g.createExternalModuleExport=function(e){return nt(void 0,void 0,ot([rt(void 0,e)]))},g.disposeEmitNodes=function(e){var t=(e=g.getSourceFileOfNode(g.getParseTreeNode(e)))&&e.emitNode,n=t&&t.annotatedNodes;if(n)for(var o=0,r=n;o<r.length;o++)r[o].emitNode=void 0},g.getOrCreateEmitNode=Dt,g.setTextRange=Bt,g.setEmitFlags=It,g.addEmitFlags=function(e,t){var n=Dt(e);return n.flags=n.flags|t,e},g.getSourceMapRange=function(e){var t=e.emitNode;return t&&t.sourceMapRange||e},g.setSourceMapRange=function(e,t){return Dt(e).sourceMapRange=t,e},g.createSourceMapSource=function(e,t,n){return new(s||(s=g.objectAllocator.getSourceMapSourceConstructor()))(e,t,n)},g.getTokenSourceMapRange=function(e,t){var n=e.emitNode,o=n&&n.tokenSourceMapRanges;return o&&o[t]},g.setTokenSourceMapRange=function(e,t,n){var o=Dt(e);return(o.tokenSourceMapRanges||(o.tokenSourceMapRanges=[]))[t]=n,e},g.getCommentRange=function(e){var t=e.emitNode;return t&&t.commentRange||e},g.setCommentRange=function(e,t){return Dt(e).commentRange=t,e},g.getSyntheticLeadingComments=Nt,g.setSyntheticLeadingComments=wt,g.addSyntheticLeadingComment=function(e,t,n,o){return wt(e,g.append(Nt(e),{kind:t,pos:-1,end:-1,hasTrailingNewLine:o,text:n}))},g.getSyntheticTrailingComments=Ot,g.setSyntheticTrailingComments=Rt,g.addSyntheticTrailingComment=function(e,t,n,o){return Rt(e,g.append(Ot(e),{kind:t,pos:-1,end:-1,hasTrailingNewLine:o,text:n}))},g.getConstantValue=function(e){var t=e.emitNode;return t&&t.constantValue},g.setConstantValue=function(e,t){return Dt(e).constantValue=t,e},g.addEmitHelper=function(e,t){var n=Dt(e);return n.helpers=g.append(n.helpers,t),e},g.addEmitHelpers=function(e,t){if(g.some(t))for(var n=Dt(e),o=0,r=t;o<r.length;o++){var i=r[o];n.helpers=g.appendIfUnique(n.helpers,i)}return e},g.removeEmitHelper=function(e,t){var n=e.emitNode;if(n){var o=n.helpers;if(o)return g.orderedRemoveItem(o,t)}return!1},g.getEmitHelpers=function(e){var t=e.emitNode;return t&&t.helpers},g.moveEmitHelpers=function(e,t,n){var o=e.emitNode,r=o&&o.helpers;if(g.some(r)){for(var i=Dt(t),a=0,s=0;s<r.length;s++){var l=r[s];n(l)?(a++,i.helpers=g.appendIfUnique(i.helpers,l)):0<a&&(r[s-a]=l)}0<a&&(r.length-=a)}},g.compareEmitHelpers=function(e,t){return e===t?0:e.priority===t.priority?0:void 0===e.priority?1:void 0===t.priority?-1:g.compareValues(e.priority,t.priority)},g.setOriginalNode=Lt}(ts||(ts={})),function(_){function c(e,t,n){if(_.isComputedPropertyName(t))return _.setTextRange(_.createElementAccess(e,t.expression),n);var o=_.setTextRange(_.isIdentifier(t)?_.createPropertyAccess(e,t):_.createElementAccess(e,t),t);return _.getOrCreateEmitNode(o).flags|=64,o}function i(e,t){var n=_.createIdentifier(e||"React");return n.flags&=-9,n.parent=_.getParseTreeNode(t),n}function g(e,t,n){return e?function e(t,n){if(_.isQualifiedName(t)){var o=e(t.left,n),r=_.createIdentifier(_.idText(t.right));return r.escapedText=t.right.escapedText,_.createPropertyAccess(o,r)}return i(_.idText(t),n)}(e,n):_.createPropertyAccess(i(t,n),"createElement")}function r(e){return _.setEmitFlags(_.createIdentifier(e),4098)}_.nullTransformationContext={enableEmitNotification:_.noop,enableSubstitution:_.noop,endLexicalEnvironment:function(){},getCompilerOptions:_.notImplemented,getEmitHost:_.notImplemented,getEmitResolver:_.notImplemented,hoistFunctionDeclaration:_.noop,hoistVariableDeclaration:_.noop,isEmitNotificationEnabled:_.notImplemented,isSubstitutionEnabled:_.notImplemented,onEmitNode:_.noop,onSubstituteNode:_.notImplemented,readEmitHelpers:_.notImplemented,requestEmitHelper:_.noop,resumeLexicalEnvironment:_.noop,startLexicalEnvironment:_.noop,suspendLexicalEnvironment:_.noop},_.createTypeCheck=function(e,t){return"undefined"===t?_.createStrictEquality(e,_.createVoidZero()):_.createStrictEquality(_.createTypeOf(e),_.createLiteral(t))},_.createMemberAccessForPropertyName=c,_.createFunctionCall=function(e,t,n,o){return _.setTextRange(_.createCall(_.createPropertyAccess(e,"call"),void 0,[t].concat(n)),o)},_.createFunctionApply=function(e,t,n,o){return _.setTextRange(_.createCall(_.createPropertyAccess(e,"apply"),void 0,[t,n]),o)},_.createArraySlice=function(e,t){var n=[];return void 0!==t&&n.push("number"==typeof t?_.createLiteral(t):t),_.createCall(_.createPropertyAccess(e,"slice"),void 0,n)},_.createArrayConcat=function(e,t){return _.createCall(_.createPropertyAccess(e,"concat"),void 0,t)},_.createMathPow=function(e,t,n){return _.setTextRange(_.createCall(_.createPropertyAccess(_.createIdentifier("Math"),"pow"),void 0,[e,t]),n)},_.createExpressionForJsxElement=function(e,t,n,o,r,i,a){var s=[n];if(o&&s.push(o),r&&0<r.length)if(o||s.push(_.createNull()),1<r.length)for(var l=0,c=r;l<c.length;l++){var u=c[l];u.startsOnNewLine=!0,s.push(u)}else s.push(r[0]);return _.setTextRange(_.createCall(g(e,t,i),void 0,s),a)},_.getHelperName=r;var o={name:"typescript:values",scoped:!1,text:'\n            var __values = (this && this.__values) || function (o) {\n                var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;\n                if (m) return m.call(o);\n                return {\n                    next: function () {\n                        if (o && i >= o.length) o = void 0;\n                        return { value: o && o[i++], done: !o };\n                    }\n                };\n            };\n        '};var a={name:"typescript:read",scoped:!(_.createValuesHelper=function(e,t,n){return e.requestEmitHelper(o),_.setTextRange(_.createCall(r("__values"),void 0,[t]),n)}),text:'\n            var __read = (this && this.__read) || function (o, n) {\n                var m = typeof Symbol === "function" && o[Symbol.iterator];\n                if (!m) return o;\n                var i = m.call(o), r, ar = [], e;\n                try {\n                    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n                }\n                catch (error) { e = { error: error }; }\n                finally {\n                    try {\n                        if (r && !r.done && (m = i["return"])) m.call(i);\n                    }\n                    finally { if (e) throw e.error; }\n                }\n                return ar;\n            };\n        '};var e,s={name:"typescript:spread",scoped:!(_.createReadHelper=function(e,t,n,o){return e.requestEmitHelper(a),_.setTextRange(_.createCall(r("__read"),void 0,void 0!==n?[t,_.createLiteral(n)]:[t]),o)}),text:"\n            var __spread = (this && this.__spread) || function () {\n                for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n                return ar;\n            };"};function l(e,t){var n=C(e);switch(n.kind){case 71:return t;case 99:case 8:case 9:return!1;case 177:return 0!==n.elements.length;case 178:return 0<n.properties.length;default:return!0}}function f(e){return _.isIdentifier(e)?_.createLiteral(e):_.isComputedPropertyName(e)?_.getMutableClone(e.expression):_.getMutableClone(e)}function u(e,t,n){return p(e,t,n,8192)}function p(e,t,n,o){var r=_.getNameOfDeclaration(e);if(r&&_.isIdentifier(r)&&!_.isGeneratedIdentifier(r)){var i=_.getMutableClone(r);return o|=_.getEmitFlags(r),n||(o|=48),t||(o|=1536),o&&_.setEmitFlags(i,o),i}return _.getGeneratedNameForNode(e)}function d(e,t,n,o){var r,i=_.createPropertyAccess(e,_.nodeIsSynthesized(t)?t:_.getSynthesizedClone(t));return _.setTextRange(i,t),o||(r|=48),n||(r|=1536),r&&_.setEmitFlags(i,r),i}function h(e){return _.isStringLiteral(e.expression)&&"use strict"===e.expression.text}function m(e,t,n){_.Debug.assert(0===e.length,"Prologue directives should be at the first statement in the target statements array");for(var o=!1,r=0,i=t.length;r<i;){var a=t[r];if(!_.isPrologueDirective(a))break;h(a)&&(o=!0),e.push(a),r++}return n&&!o&&e.push(D(_.createStatement(_.createLiteral("use strict")))),r}function y(e,t,n,o){for(var r=t.length;n<r;){var i=t[n];if(!(1048576&_.getEmitFlags(i)))break;e.push(o?_.visitNode(i,o,_.isStatement):i),n++}return n}function v(e){if(e=_.skipPartiallyEmittedExpressions(e),_.isLiteralKind(e.kind))return e.kind;if(194===e.kind&&37===e.operatorToken.kind){if(void 0!==e.cachedLiteralKind)return e.cachedLiteralKind;var t=v(e.left),n=_.isLiteralKind(t)&&t===v(e.right)?t:0;return e.cachedLiteralKind=n}return 0}function b(e){var t=_.skipPartiallyEmittedExpressions(e);return _.isLeftHandSideExpression(t)&&(182!==t.kind||t.arguments)?e:_.setTextRange(_.createParen(e),e)}function k(e){var t=_.skipPartiallyEmittedExpressions(e),n=_.getExpressionPrecedence(t);return _.getOperatorPrecedence(194,26)<n?e:_.setTextRange(_.createParen(e),e)}function t(e){switch(e.kind){case 166:case 167:case 160:case 161:return _.createParenthesizedType(e)}return e}function T(e,t){for(;;){switch(e.kind){case 193:e=e.operand;continue;case 194:e=e.left;continue;case 195:e=e.condition;continue;case 181:if(t)return e;case 180:case 179:case 288:e=e.expression;continue}return e}}function E(e,t){switch(void 0===t&&(t=7),e.kind){case 185:return 0!=(1&t);case 184:case 202:case 203:return 0!=(2&t);case 288:return 0!=(4&t)}return!1}function S(e,t){var n;for(void 0===t&&(t=7);n=e,1&t&&(e=C(e)),2&t&&(e=x(e)),4&t&&(e=_.skipPartiallyEmittedExpressions(e)),n!==e;);return e}function C(e){for(;185===e.kind;)e=e.expression;return e}function x(e){for(;_.isAssertionExpression(e)||203===e.kind;)e=e.expression;return e}function A(e,t,n){return void 0===n&&(n=7),e&&E(e,n)&&(!(185===(o=e).kind&&_.nodeIsSynthesized(o)&&_.nodeIsSynthesized(_.getSourceMapRange(o))&&_.nodeIsSynthesized(_.getCommentRange(o)))||_.some(_.getSyntheticLeadingComments(o))||_.some(_.getSyntheticTrailingComments(o)))?function(e,t){switch(e.kind){case 185:return _.updateParen(e,t);case 184:return _.updateTypeAssertion(e,e.type,t);case 202:return _.updateAsExpression(e,t,e.type);case 203:return _.updateNonNullExpression(e,t);case 288:return _.updatePartiallyEmittedExpression(e,t)}}(e,A(e.expression,t)):t;var o}function D(e){return e.startsOnNewLine=!0,e}function B(e){var t=_.getOriginalNode(e,_.isSourceFile),n=t&&t.emitNode;return n&&n.externalHelpersModuleName}function I(e,t,n){if(e)return e.moduleName?_.createLiteral(e.moduleName):e.isDeclarationFile||!n.out&&!n.outFile?void 0:_.createLiteral(_.getExternalModuleNameFromPath(t,e.fileName))}function N(e){if(_.isDeclarationBindingElement(e))return e.name;if(!_.isObjectLiteralElementLike(e))return _.isAssignmentExpression(e,!0)?N(e.left):_.isSpreadElement(e)?N(e.expression):e;switch(e.kind){case 261:return N(e.initializer);case 262:return e.name;case 263:return N(e.expression)}}function n(e){if(_.isBindingElement(e)){if(e.dotDotDotToken)return _.Debug.assertNode(e.name,_.isIdentifier),_.setOriginalNode(_.setTextRange(_.createSpread(e.name),e),e);var t=P(e.name);return e.initializer?_.setOriginalNode(_.setTextRange(_.createAssignment(t,e.initializer),e),e):t}return _.Debug.assertNode(e,_.isExpression),e}function w(e){if(_.isBindingElement(e)){if(e.dotDotDotToken)return _.Debug.assertNode(e.name,_.isIdentifier),_.setOriginalNode(_.setTextRange(_.createSpreadAssignment(e.name),e),e);if(e.propertyName){var t=P(e.name);return _.setOriginalNode(_.setTextRange(_.createPropertyAssignment(e.propertyName,e.initializer?_.createAssignment(t,e.initializer):t),e),e)}return _.Debug.assertNode(e.name,_.isIdentifier),_.setOriginalNode(_.setTextRange(_.createShorthandPropertyAssignment(e.name,e.initializer),e),e)}return _.Debug.assertNode(e,_.isObjectLiteralElementLike),e}function O(e){switch(e.kind){case 175:case 177:return L(e);case 174:case 178:return R(e)}}function R(e){return _.isObjectBindingPattern(e)?_.setOriginalNode(_.setTextRange(_.createObjectLiteral(_.map(e.elements,w)),e),e):(_.Debug.assertNode(e,_.isObjectLiteralExpression),e)}function L(e){return _.isArrayBindingPattern(e)?_.setOriginalNode(_.setTextRange(_.createArrayLiteral(_.map(e.elements,n)),e),e):(_.Debug.assertNode(e,_.isArrayLiteralExpression),e)}function P(e){return _.isBindingPattern(e)?O(e):(_.Debug.assertNode(e,_.isExpression),e)}_.createSpreadHelper=function(e,t,n){return e.requestEmitHelper(a),e.requestEmitHelper(s),_.setTextRange(_.createCall(r("__spread"),void 0,t),n)},_.createForOfBindingStatement=function(e,t){if(_.isVariableDeclarationList(e)){var n=_.firstOrUndefined(e.declarations),o=_.updateVariableDeclaration(n,n.name,void 0,t);return _.setTextRange(_.createVariableStatement(void 0,_.updateVariableDeclarationList(e,[o])),e)}var r=_.setTextRange(_.createAssignment(e,t),e);return _.setTextRange(_.createStatement(r),e)},_.insertLeadingStatement=function(e,t){return _.isBlock(e)?_.updateBlock(e,_.setTextRange(_.createNodeArray([t].concat(e.statements)),e.statements)):_.createBlock(_.createNodeArray([e,t]),!0)},_.restoreEnclosingLabel=function e(t,n,o){if(!n)return t;var r=_.updateLabel(n,n.label,222===n.statement.kind?e(t,n.statement):t);return o&&o(n),r},_.createCallBinding=function(e,t,n,o){var r,i,a=S(e,7);if(_.isSuperProperty(a))r=_.createThis(),i=a;else if(97===a.kind)r=_.createThis(),i=n<2?_.setTextRange(_.createIdentifier("_super"),a):a;else if(4096&_.getEmitFlags(a))r=_.createVoidZero(),i=b(a);else switch(a.kind){case 179:l(a.expression,o)?(r=_.createTempVariable(t),i=_.createPropertyAccess(_.setTextRange(_.createAssignment(r,a.expression),a.expression),a.name),_.setTextRange(i,a)):(r=a.expression,i=a);break;case 180:l(a.expression,o)?(r=_.createTempVariable(t),i=_.createElementAccess(_.setTextRange(_.createAssignment(r,a.expression),a.expression),a.argumentExpression),_.setTextRange(i,a)):(r=a.expression,i=a);break;default:r=_.createVoidZero(),i=b(e)}return{target:i,thisArg:r}},_.inlineExpressions=function(e){return 10<e.length?_.createCommaList(e):_.reduceLeft(e,_.createComma)},_.createExpressionFromEntityName=function e(t){if(_.isQualifiedName(t)){var n=e(t.left),o=_.getMutableClone(t.right);return _.setTextRange(_.createPropertyAccess(n,o),t)}return _.getMutableClone(t)},_.createExpressionForPropertyName=f,_.createExpressionForObjectLiteralElementLike=function(e,t,n){switch(t.kind){case 153:case 154:return function(e,t,n,o){var r=_.getAllAccessorDeclarations(e,t),i=r.firstAccessor,a=r.getAccessor,s=r.setAccessor;if(t===i){var l=[];if(a){var c=_.createFunctionExpression(a.modifiers,void 0,void 0,void 0,a.parameters,void 0,a.body);_.setTextRange(c,a),_.setOriginalNode(c,a);var u=_.createPropertyAssignment("get",c);l.push(u)}if(s){var g=_.createFunctionExpression(s.modifiers,void 0,void 0,void 0,s.parameters,void 0,s.body);_.setTextRange(g,s),_.setOriginalNode(g,s);var p=_.createPropertyAssignment("set",g);l.push(p)}l.push(_.createPropertyAssignment("enumerable",_.createTrue())),l.push(_.createPropertyAssignment("configurable",_.createTrue()));var d=_.setTextRange(_.createCall(_.createPropertyAccess(_.createIdentifier("Object"),"defineProperty"),void 0,[n,f(t.name),_.createObjectLiteral(l,o)]),i);return _.aggregateTransformFlags(d)}}(e.properties,t,n,e.multiLine);case 261:return s=t,l=n,_.aggregateTransformFlags(_.setOriginalNode(_.setTextRange(_.createAssignment(c(l,s.name,s.name),s.initializer),s),s));case 262:return i=t,a=n,_.aggregateTransformFlags(_.setOriginalNode(_.setTextRange(_.createAssignment(c(a,i.name,i.name),_.getSynthesizedClone(i.name)),i),i));case 151:return o=t,r=n,_.aggregateTransformFlags(_.setOriginalNode(_.setTextRange(_.createAssignment(c(r,o.name,o.name),_.setOriginalNode(_.setTextRange(_.createFunctionExpression(o.modifiers,o.asteriskToken,void 0,void 0,o.parameters,void 0,o.body),o),o)),o),o))}var o,r,i,a,s,l},_.getInternalName=function(e,t,n){return p(e,t,n,49152)},_.isInternalName=function(e){return 0!=(32768&_.getEmitFlags(e))},_.getLocalName=function(e,t,n){return p(e,t,n,16384)},_.isLocalName=function(e){return 0!=(16384&_.getEmitFlags(e))},_.getExportName=u,_.isExportName=function(e){return 0!=(8192&_.getEmitFlags(e))},_.getDeclarationName=function(e,t,n){return p(e,t,n)},_.getExternalModuleOrNamespaceExportName=function(e,t,n,o){return e&&_.hasModifier(t,1)?d(e,p(t),n,o):u(t,n,o)},_.getNamespaceMemberName=d,_.convertToFunctionBody=function(e,t){return _.isBlock(e)?e:_.setTextRange(_.createBlock([_.setTextRange(_.createReturn(e),e)],t),e)},_.convertFunctionDeclarationToExpression=function(e){_.Debug.assert(!!e.body);var t=_.createFunctionExpression(e.modifiers,e.asteriskToken,e.name,e.typeParameters,e.parameters,e.type,e.body);return _.setOriginalNode(t,e),_.setTextRange(t,e),e.startsOnNewLine&&(t.startsOnNewLine=!0),_.aggregateTransformFlags(t),t},_.addPrologue=function(e,t,n,o){return y(e,t,m(e,t,n),o)},_.addStandardPrologue=m,_.addCustomPrologue=y,_.startsWithUseStrict=function(e){var t=_.firstOrUndefined(e);return void 0!==t&&_.isPrologueDirective(t)&&h(t)},_.ensureUseStrict=function(e){for(var t=!1,n=0,o=e;n<o.length;n++){var r=o[n];if(!_.isPrologueDirective(r))break;if(h(r)){t=!0;break}}return t?e:_.setTextRange(_.createNodeArray([D(_.createStatement(_.createLiteral("use strict")))].concat(e)),e)},_.parenthesizeBinaryOperand=function(e,t,n,o){return 185===_.skipPartiallyEmittedExpressions(t).kind?t:function(e,t,n,o){var r,i=_.getOperatorPrecedence(194,e),a=_.getOperatorAssociativity(194,e),s=_.skipPartiallyEmittedExpressions(t),l=_.getExpressionPrecedence(s);switch(_.compareValues(l,i)){case-1:return!(!n&&1===a&&197===t.kind);case 1:return!1;case 0:if(n)return 1===a;if(_.isBinaryExpression(s)&&s.operatorToken.kind===e){if(39===(r=e)||49===r||48===r||50===r)return!1;if(37===e){var c=o?v(o):0;if(_.isLiteralKind(c)&&c===v(s))return!1}}var u=_.getExpressionAssociativity(s);return 0===u}}(e,t,n,o)?_.createParen(t):t},_.parenthesizeForConditionalHead=function(e){var t=_.getOperatorPrecedence(195,55),n=_.skipPartiallyEmittedExpressions(e),o=_.getExpressionPrecedence(n);return-1===_.compareValues(o,t)?_.createParen(e):e},_.parenthesizeSubexpressionOfConditionalExpression=function(e){return 194===e.kind&&26===e.operatorToken.kind?_.createParen(e):e},_.parenthesizeForNew=function(e){var t=T(e,!0);switch(t.kind){case 181:return _.createParen(e);case 182:return t.arguments?e:_.createParen(e)}return b(e)},_.parenthesizeForAccess=b,_.parenthesizePostfixOperand=function(e){return _.isLeftHandSideExpression(e)?e:_.setTextRange(_.createParen(e),e)},_.parenthesizePrefixOperand=function(e){return _.isUnaryExpression(e)?e:_.setTextRange(_.createParen(e),e)},_.parenthesizeListElements=function(e){for(var t,n=0;n<e.length;n++){var o=k(e[n]);void 0===t&&o===e[n]||(void 0===t&&(t=e.slice(0,n)),t.push(o))}return void 0!==t?_.setTextRange(_.createNodeArray(t,e.hasTrailingComma),e):e},_.parenthesizeExpressionForList=k,_.parenthesizeExpressionForExpressionStatement=function(e){var t=_.skipPartiallyEmittedExpressions(e);if(_.isCallExpression(t)){var n=t.expression,o=_.skipPartiallyEmittedExpressions(n).kind;if(186===o||187===o){var r=_.getMutableClone(t);return r.expression=_.setTextRange(_.createParen(n),n),A(e,r,4)}}var i=T(t,!1).kind;return 178===i||186===i?_.setTextRange(_.createParen(e),e):e},_.parenthesizeElementTypeMember=t,_.parenthesizeArrayTypeMember=function(e){switch(e.kind){case 162:case 170:return _.createParenthesizedType(e)}return t(e)},_.parenthesizeElementTypeMembers=function(e){return _.createNodeArray(_.sameMap(e,t))},_.parenthesizeTypeParameters=function(e){if(_.some(e)){for(var t=[],n=0;n<e.length;++n){var o=e[n];t.push(0===n&&_.isFunctionOrConstructorTypeNode(o)&&o.typeParameters?_.createParenthesizedType(o):o)}return _.createNodeArray(t)}},_.parenthesizeConciseBody=function(e){return _.isBlock(e)||178!==T(e,!1).kind?e:_.setTextRange(_.createParen(e),e)},(e=_.OuterExpressionKinds||(_.OuterExpressionKinds={}))[e.Parentheses=1]="Parentheses",e[e.Assertions=2]="Assertions",e[e.PartiallyEmittedExpressions=4]="PartiallyEmittedExpressions",e[e.All=7]="All",_.isOuterExpression=E,_.skipOuterExpressions=S,_.skipParentheses=C,_.skipAssertions=x,_.recreateOuterExpressions=A,_.startOnNewLine=D,_.getExternalHelpersModuleName=B,_.getOrCreateExternalHelpersModuleNameIfNeeded=function(e,t,n){if(t.importHelpers&&_.isEffectiveExternalModule(e,t)){var o=B(e);if(o)return o;var r=_.getEmitModuleKind(t),i=n&&r!==_.ModuleKind.System&&r!==_.ModuleKind.ES2015&&r!==_.ModuleKind.ESNext;if(!i){var a=_.getEmitHelpers(e);if(a)for(var s=0,l=a;s<l.length;s++)if(!l[s].scoped){i=!0;break}}if(i){var c=_.getOriginalNode(e,_.isSourceFile),u=_.getOrCreateEmitNode(c);return u.externalHelpersModuleName||(u.externalHelpersModuleName=_.createUniqueName(_.externalHelpersModuleNameText))}}},_.getLocalNameForExternalImport=function(e,t){var n=_.getNamespaceDeclarationNode(e);if(n&&!_.isDefaultImport(e)){var o=n.name;return _.isGeneratedIdentifier(o)?o:_.createIdentifier(_.getSourceTextOfNodeFromSourceFile(t,n.name))}return 238===e.kind&&e.importClause?_.getGeneratedNameForNode(e):244===e.kind&&e.moduleSpecifier?_.getGeneratedNameForNode(e):void 0},_.getExternalModuleNameLiteral=function(e,t,n,o,r){var i,a,s,l,c,u,g=_.getExternalModuleName(e);if(9===g.kind)return l=e,c=n,u=r,I(o.getExternalModuleFileFromDeclaration(l),c,u)||(i=g,(s=(a=t).renamedDependencies&&a.renamedDependencies.get(i.text))&&_.createLiteral(s))||_.getSynthesizedClone(g)},_.tryGetModuleNameFromFile=I,_.getInitializerOfBindingOrAssignmentElement=function e(t){return _.isDeclarationBindingElement(t)?t.initializer:_.isPropertyAssignment(t)?_.isAssignmentExpression(t.initializer,!0)?t.initializer.right:void 0:_.isShorthandPropertyAssignment(t)?t.objectAssignmentInitializer:_.isAssignmentExpression(t,!0)?t.right:_.isSpreadElement(t)?e(t.expression):void 0},_.getTargetOfBindingOrAssignmentElement=N,_.getRestIndicatorOfBindingOrAssignmentElement=function(e){switch(e.kind){case 146:case 176:return e.dotDotDotToken;case 198:case 263:return e}},_.getPropertyNameOfBindingOrAssignmentElement=function(e){switch(e.kind){case 176:if(e.propertyName){var t=e.propertyName;return _.isComputedPropertyName(t)&&_.isStringOrNumericLiteral(t.expression)?t.expression:t}break;case 261:if(e.name)return t=e.name,_.isComputedPropertyName(t)&&_.isStringOrNumericLiteral(t.expression)?t.expression:t;break;case 263:return e.name}var n=N(e);if(n&&_.isPropertyName(n))return _.isComputedPropertyName(n)&&_.isStringOrNumericLiteral(n.expression)?n.expression:n;_.Debug.fail("Invalid property name for binding element.")},_.getElementsOfBindingOrAssignmentPattern=function(e){switch(e.kind){case 174:case 175:case 177:return e.elements;case 178:return e.properties}},_.convertToArrayAssignmentElement=n,_.convertToObjectAssignmentElement=w,_.convertToAssignmentPattern=O,_.convertToObjectAssignmentPattern=R,_.convertToArrayAssignmentPattern=L,_.convertToAssignmentElementTarget=P}(ts||(ts={})),function(d){function s(e,t,n,o){if(void 0===e||void 0===t)return e;d.aggregateTransformFlags(e);var r,i=t(e);return i===e?e:void 0!==i?(r=d.isArray(i)?(o||function(e){return d.Debug.assert(e.length<=1,"Too many nodes written to output."),d.singleOrUndefined(e)})(i):i,d.Debug.assertNode(r,n),d.aggregateTransformFlags(r),r):void 0}function a(e,t,n,o,r){if(void 0===e||void 0===t)return e;var i,a=e.length;(void 0===o||o<0)&&(o=0),(void 0===r||a-o<r)&&(r=a-o),(0<o||r<a)&&(i=d.createNodeArray([],e.hasTrailingComma&&o+r===a));for(var s=0;s<r;s++){var l=e[s+o];d.aggregateTransformFlags(l);var c=void 0!==l?t(l):void 0;if((void 0!==i||void 0===c||c!==l)&&(void 0===i&&(i=d.createNodeArray(e.slice(0,s),e.hasTrailingComma),d.setTextRange(i,e)),c))if(d.isArray(c))for(var u=0,g=c;u<g.length;u++){var p=g[u];d.Debug.assertNode(p,n),d.aggregateTransformFlags(p),i.push(p)}else d.Debug.assertNode(c,n),d.aggregateTransformFlags(c),i.push(c)}return i||e}function l(e,t,n,o,r){n.startLexicalEnvironment(),e=a(e,t,d.isStatement,o),r&&!d.startsWithUseStrict(e)&&(e=d.setTextRange(d.createNodeArray([d.createStatement(d.createLiteral("use strict"))].concat(e)),e));var i=n.endLexicalEnvironment();return d.setTextRange(d.createNodeArray(d.concatenate(e,i)),e)}function c(e,t,n,o){void 0===o&&(o=a),n.startLexicalEnvironment();var r=o(e,t,d.isParameterDeclaration);return n.suspendLexicalEnvironment(),r}function u(e,t,n){n.resumeLexicalEnvironment();var o=s(e,t,d.isConciseBody),r=n.endLexicalEnvironment();if(d.some(r)){var i=d.convertToFunctionBody(o),a=d.mergeLexicalEnvironment(i.statements,r);return d.updateBlock(i,a)}return o}d.visitNode=s,d.visitNodes=a,d.visitLexicalEnvironment=l,d.visitParameterList=c,d.visitFunctionBody=u,d.visitEachChild=function(e,t,n,o,r){if(void 0===o&&(o=a),void 0!==e){var i=e.kind;if(0<i&&i<=142||169===i)return e;switch(i){case 71:return d.updateIdentifier(e,o(e.typeArguments,t,d.isTypeNode));case 143:return d.updateQualifiedName(e,s(e.left,t,d.isEntityName),s(e.right,t,d.isIdentifier));case 144:return d.updateComputedPropertyName(e,s(e.expression,t,d.isExpression));case 145:return d.updateTypeParameterDeclaration(e,s(e.name,t,d.isIdentifier),s(e.constraint,t,d.isTypeNode),s(e.default,t,d.isTypeNode));case 146:return d.updateParameter(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.dotDotDotToken,r,d.isToken),s(e.name,t,d.isBindingName),s(e.questionToken,r,d.isToken),s(e.type,t,d.isTypeNode),s(e.initializer,t,d.isExpression));case 147:return d.updateDecorator(e,s(e.expression,t,d.isExpression));case 148:return d.updatePropertySignature(e,o(e.modifiers,t,d.isToken),s(e.name,t,d.isPropertyName),s(e.questionToken,r,d.isToken),s(e.type,t,d.isTypeNode),s(e.initializer,t,d.isExpression));case 149:return d.updateProperty(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.name,t,d.isPropertyName),s(e.questionToken,r,d.isToken),s(e.type,t,d.isTypeNode),s(e.initializer,t,d.isExpression));case 150:return d.updateMethodSignature(e,o(e.typeParameters,t,d.isTypeParameterDeclaration),o(e.parameters,t,d.isParameterDeclaration),s(e.type,t,d.isTypeNode),s(e.name,t,d.isPropertyName),s(e.questionToken,r,d.isToken));case 151:return d.updateMethod(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.asteriskToken,r,d.isToken),s(e.name,t,d.isPropertyName),s(e.questionToken,r,d.isToken),o(e.typeParameters,t,d.isTypeParameterDeclaration),c(e.parameters,t,n,o),s(e.type,t,d.isTypeNode),u(e.body,t,n));case 152:return d.updateConstructor(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),c(e.parameters,t,n,o),u(e.body,t,n));case 153:return d.updateGetAccessor(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.name,t,d.isPropertyName),c(e.parameters,t,n,o),s(e.type,t,d.isTypeNode),u(e.body,t,n));case 154:return d.updateSetAccessor(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.name,t,d.isPropertyName),c(e.parameters,t,n,o),u(e.body,t,n));case 155:return d.updateCallSignature(e,o(e.typeParameters,t,d.isTypeParameterDeclaration),o(e.parameters,t,d.isParameterDeclaration),s(e.type,t,d.isTypeNode));case 156:return d.updateConstructSignature(e,o(e.typeParameters,t,d.isTypeParameterDeclaration),o(e.parameters,t,d.isParameterDeclaration),s(e.type,t,d.isTypeNode));case 157:return d.updateIndexSignature(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),o(e.parameters,t,d.isParameterDeclaration),s(e.type,t,d.isTypeNode));case 158:return d.updateTypePredicateNode(e,s(e.parameterName,t),s(e.type,t,d.isTypeNode));case 159:return d.updateTypeReferenceNode(e,s(e.typeName,t,d.isEntityName),o(e.typeArguments,t,d.isTypeNode));case 160:return d.updateFunctionTypeNode(e,o(e.typeParameters,t,d.isTypeParameterDeclaration),o(e.parameters,t,d.isParameterDeclaration),s(e.type,t,d.isTypeNode));case 161:return d.updateConstructorTypeNode(e,o(e.typeParameters,t,d.isTypeParameterDeclaration),o(e.parameters,t,d.isParameterDeclaration),s(e.type,t,d.isTypeNode));case 162:return d.updateTypeQueryNode(e,s(e.exprName,t,d.isEntityName));case 163:return d.updateTypeLiteralNode(e,o(e.members,t,d.isTypeElement));case 164:return d.updateArrayTypeNode(e,s(e.elementType,t,d.isTypeNode));case 165:return d.updateTypleTypeNode(e,o(e.elementTypes,t,d.isTypeNode));case 166:return d.updateUnionTypeNode(e,o(e.types,t,d.isTypeNode));case 167:return d.updateIntersectionTypeNode(e,o(e.types,t,d.isTypeNode));case 168:return d.updateParenthesizedType(e,s(e.type,t,d.isTypeNode));case 170:return d.updateTypeOperatorNode(e,s(e.type,t,d.isTypeNode));case 171:return d.updateIndexedAccessTypeNode(e,s(e.objectType,t,d.isTypeNode),s(e.indexType,t,d.isTypeNode));case 172:return d.updateMappedTypeNode(e,s(e.readonlyToken,r,d.isToken),s(e.typeParameter,t,d.isTypeParameterDeclaration),s(e.questionToken,r,d.isToken),s(e.type,t,d.isTypeNode));case 173:return d.updateLiteralTypeNode(e,s(e.literal,t,d.isExpression));case 174:return d.updateObjectBindingPattern(e,o(e.elements,t,d.isBindingElement));case 175:return d.updateArrayBindingPattern(e,o(e.elements,t,d.isArrayBindingElement));case 176:return d.updateBindingElement(e,s(e.dotDotDotToken,r,d.isToken),s(e.propertyName,t,d.isPropertyName),s(e.name,t,d.isBindingName),s(e.initializer,t,d.isExpression));case 177:return d.updateArrayLiteral(e,o(e.elements,t,d.isExpression));case 178:return d.updateObjectLiteral(e,o(e.properties,t,d.isObjectLiteralElementLike));case 179:return d.updatePropertyAccess(e,s(e.expression,t,d.isExpression),s(e.name,t,d.isIdentifier));case 180:return d.updateElementAccess(e,s(e.expression,t,d.isExpression),s(e.argumentExpression,t,d.isExpression));case 181:return d.updateCall(e,s(e.expression,t,d.isExpression),o(e.typeArguments,t,d.isTypeNode),o(e.arguments,t,d.isExpression));case 182:return d.updateNew(e,s(e.expression,t,d.isExpression),o(e.typeArguments,t,d.isTypeNode),o(e.arguments,t,d.isExpression));case 183:return d.updateTaggedTemplate(e,s(e.tag,t,d.isExpression),s(e.template,t,d.isTemplateLiteral));case 184:return d.updateTypeAssertion(e,s(e.type,t,d.isTypeNode),s(e.expression,t,d.isExpression));case 185:return d.updateParen(e,s(e.expression,t,d.isExpression));case 186:return d.updateFunctionExpression(e,o(e.modifiers,t,d.isModifier),s(e.asteriskToken,r,d.isToken),s(e.name,t,d.isIdentifier),o(e.typeParameters,t,d.isTypeParameterDeclaration),c(e.parameters,t,n,o),s(e.type,t,d.isTypeNode),u(e.body,t,n));case 187:return d.updateArrowFunction(e,o(e.modifiers,t,d.isModifier),o(e.typeParameters,t,d.isTypeParameterDeclaration),c(e.parameters,t,n,o),s(e.type,t,d.isTypeNode),s(e.equalsGreaterThanToken,t,d.isToken),u(e.body,t,n));case 188:return d.updateDelete(e,s(e.expression,t,d.isExpression));case 189:return d.updateTypeOf(e,s(e.expression,t,d.isExpression));case 190:return d.updateVoid(e,s(e.expression,t,d.isExpression));case 191:return d.updateAwait(e,s(e.expression,t,d.isExpression));case 192:return d.updatePrefix(e,s(e.operand,t,d.isExpression));case 193:return d.updatePostfix(e,s(e.operand,t,d.isExpression));case 194:return d.updateBinary(e,s(e.left,t,d.isExpression),s(e.right,t,d.isExpression),s(e.operatorToken,t,d.isToken));case 195:return d.updateConditional(e,s(e.condition,t,d.isExpression),s(e.questionToken,t,d.isToken),s(e.whenTrue,t,d.isExpression),s(e.colonToken,t,d.isToken),s(e.whenFalse,t,d.isExpression));case 196:return d.updateTemplateExpression(e,s(e.head,t,d.isTemplateHead),o(e.templateSpans,t,d.isTemplateSpan));case 197:return d.updateYield(e,s(e.asteriskToken,r,d.isToken),s(e.expression,t,d.isExpression));case 198:return d.updateSpread(e,s(e.expression,t,d.isExpression));case 199:return d.updateClassExpression(e,o(e.modifiers,t,d.isModifier),s(e.name,t,d.isIdentifier),o(e.typeParameters,t,d.isTypeParameterDeclaration),o(e.heritageClauses,t,d.isHeritageClause),o(e.members,t,d.isClassElement));case 201:return d.updateExpressionWithTypeArguments(e,o(e.typeArguments,t,d.isTypeNode),s(e.expression,t,d.isExpression));case 202:return d.updateAsExpression(e,s(e.expression,t,d.isExpression),s(e.type,t,d.isTypeNode));case 203:return d.updateNonNullExpression(e,s(e.expression,t,d.isExpression));case 204:return d.updateMetaProperty(e,s(e.name,t,d.isIdentifier));case 205:return d.updateTemplateSpan(e,s(e.expression,t,d.isExpression),s(e.literal,t,d.isTemplateMiddleOrTemplateTail));case 207:return d.updateBlock(e,o(e.statements,t,d.isStatement));case 208:return d.updateVariableStatement(e,o(e.modifiers,t,d.isModifier),s(e.declarationList,t,d.isVariableDeclarationList));case 210:return d.updateStatement(e,s(e.expression,t,d.isExpression));case 211:return d.updateIf(e,s(e.expression,t,d.isExpression),s(e.thenStatement,t,d.isStatement,d.liftToBlock),s(e.elseStatement,t,d.isStatement,d.liftToBlock));case 212:return d.updateDo(e,s(e.statement,t,d.isStatement,d.liftToBlock),s(e.expression,t,d.isExpression));case 213:return d.updateWhile(e,s(e.expression,t,d.isExpression),s(e.statement,t,d.isStatement,d.liftToBlock));case 214:return d.updateFor(e,s(e.initializer,t,d.isForInitializer),s(e.condition,t,d.isExpression),s(e.incrementor,t,d.isExpression),s(e.statement,t,d.isStatement,d.liftToBlock));case 215:return d.updateForIn(e,s(e.initializer,t,d.isForInitializer),s(e.expression,t,d.isExpression),s(e.statement,t,d.isStatement,d.liftToBlock));case 216:return d.updateForOf(e,e.awaitModifier,s(e.initializer,t,d.isForInitializer),s(e.expression,t,d.isExpression),s(e.statement,t,d.isStatement,d.liftToBlock));case 217:return d.updateContinue(e,s(e.label,t,d.isIdentifier));case 218:return d.updateBreak(e,s(e.label,t,d.isIdentifier));case 219:return d.updateReturn(e,s(e.expression,t,d.isExpression));case 220:return d.updateWith(e,s(e.expression,t,d.isExpression),s(e.statement,t,d.isStatement,d.liftToBlock));case 221:return d.updateSwitch(e,s(e.expression,t,d.isExpression),s(e.caseBlock,t,d.isCaseBlock));case 222:return d.updateLabel(e,s(e.label,t,d.isIdentifier),s(e.statement,t,d.isStatement,d.liftToBlock));case 223:return d.updateThrow(e,s(e.expression,t,d.isExpression));case 224:return d.updateTry(e,s(e.tryBlock,t,d.isBlock),s(e.catchClause,t,d.isCatchClause),s(e.finallyBlock,t,d.isBlock));case 226:return d.updateVariableDeclaration(e,s(e.name,t,d.isBindingName),s(e.type,t,d.isTypeNode),s(e.initializer,t,d.isExpression));case 227:return d.updateVariableDeclarationList(e,o(e.declarations,t,d.isVariableDeclaration));case 228:return d.updateFunctionDeclaration(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.asteriskToken,r,d.isToken),s(e.name,t,d.isIdentifier),o(e.typeParameters,t,d.isTypeParameterDeclaration),c(e.parameters,t,n,o),s(e.type,t,d.isTypeNode),u(e.body,t,n));case 229:return d.updateClassDeclaration(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.name,t,d.isIdentifier),o(e.typeParameters,t,d.isTypeParameterDeclaration),o(e.heritageClauses,t,d.isHeritageClause),o(e.members,t,d.isClassElement));case 230:return d.updateInterfaceDeclaration(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.name,t,d.isIdentifier),o(e.typeParameters,t,d.isTypeParameterDeclaration),o(e.heritageClauses,t,d.isHeritageClause),o(e.members,t,d.isTypeElement));case 231:return d.updateTypeAliasDeclaration(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.name,t,d.isIdentifier),o(e.typeParameters,t,d.isTypeParameterDeclaration),s(e.type,t,d.isTypeNode));case 232:return d.updateEnumDeclaration(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.name,t,d.isIdentifier),o(e.members,t,d.isEnumMember));case 233:return d.updateModuleDeclaration(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.name,t,d.isIdentifier),s(e.body,t,d.isModuleBody));case 234:return d.updateModuleBlock(e,o(e.statements,t,d.isStatement));case 235:return d.updateCaseBlock(e,o(e.clauses,t,d.isCaseOrDefaultClause));case 236:return d.updateNamespaceExportDeclaration(e,s(e.name,t,d.isIdentifier));case 237:return d.updateImportEqualsDeclaration(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.name,t,d.isIdentifier),s(e.moduleReference,t,d.isModuleReference));case 238:return d.updateImportDeclaration(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.importClause,t,d.isImportClause),s(e.moduleSpecifier,t,d.isExpression));case 239:return d.updateImportClause(e,s(e.name,t,d.isIdentifier),s(e.namedBindings,t,d.isNamedImportBindings));case 240:return d.updateNamespaceImport(e,s(e.name,t,d.isIdentifier));case 241:return d.updateNamedImports(e,o(e.elements,t,d.isImportSpecifier));case 242:return d.updateImportSpecifier(e,s(e.propertyName,t,d.isIdentifier),s(e.name,t,d.isIdentifier));case 243:return d.updateExportAssignment(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.expression,t,d.isExpression));case 244:return d.updateExportDeclaration(e,o(e.decorators,t,d.isDecorator),o(e.modifiers,t,d.isModifier),s(e.exportClause,t,d.isNamedExports),s(e.moduleSpecifier,t,d.isExpression));case 245:return d.updateNamedExports(e,o(e.elements,t,d.isExportSpecifier));case 246:return d.updateExportSpecifier(e,s(e.propertyName,t,d.isIdentifier),s(e.name,t,d.isIdentifier));case 248:return d.updateExternalModuleReference(e,s(e.expression,t,d.isExpression));case 249:return d.updateJsxElement(e,s(e.openingElement,t,d.isJsxOpeningElement),o(e.children,t,d.isJsxChild),s(e.closingElement,t,d.isJsxClosingElement));case 250:return d.updateJsxSelfClosingElement(e,s(e.tagName,t,d.isJsxTagNameExpression),s(e.attributes,t,d.isJsxAttributes));case 251:return d.updateJsxOpeningElement(e,s(e.tagName,t,d.isJsxTagNameExpression),s(e.attributes,t,d.isJsxAttributes));case 252:return d.updateJsxClosingElement(e,s(e.tagName,t,d.isJsxTagNameExpression));case 253:return d.updateJsxAttribute(e,s(e.name,t,d.isIdentifier),s(e.initializer,t,d.isStringLiteralOrJsxExpression));case 254:return d.updateJsxAttributes(e,o(e.properties,t,d.isJsxAttributeLike));case 255:return d.updateJsxSpreadAttribute(e,s(e.expression,t,d.isExpression));case 256:return d.updateJsxExpression(e,s(e.expression,t,d.isExpression));case 257:return d.updateCaseClause(e,s(e.expression,t,d.isExpression),o(e.statements,t,d.isStatement));case 258:return d.updateDefaultClause(e,o(e.statements,t,d.isStatement));case 259:return d.updateHeritageClause(e,o(e.types,t,d.isExpressionWithTypeArguments));case 260:return d.updateCatchClause(e,s(e.variableDeclaration,t,d.isVariableDeclaration),s(e.block,t,d.isBlock));case 261:return d.updatePropertyAssignment(e,s(e.name,t,d.isPropertyName),s(e.initializer,t,d.isExpression));case 262:return d.updateShorthandPropertyAssignment(e,s(e.name,t,d.isIdentifier),s(e.objectAssignmentInitializer,t,d.isExpression));case 263:return d.updateSpreadAssignment(e,s(e.expression,t,d.isExpression));case 264:return d.updateEnumMember(e,s(e.name,t,d.isPropertyName),s(e.initializer,t,d.isExpression));case 265:return d.updateSourceFileNode(e,l(e.statements,t,n));case 288:return d.updatePartiallyEmittedExpression(e,s(e.expression,t,d.isExpression));case 289:return d.updateCommaList(e,o(e.elements,t,d.isExpression));default:return e}}}}(ts||(ts={})),function(l){function c(e,t,n){return e?t(n,e):n}function u(e,t,n){return e?t(n,e):n}function n(e,t,n,o){if(void 0===e)return t;var r=o?u:l.reduceLeft,i=o||n,a=e.kind;if(0<a&&a<=142)return t;if(158<=a&&a<=173)return t;var s=t;switch(e.kind){case 206:case 209:case 200:case 225:case 287:break;case 143:s=c(e.left,n,s),s=c(e.right,n,s);break;case 144:s=c(e.expression,n,s);break;case 146:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=c(e.name,n,s),s=c(e.type,n,s),s=c(e.initializer,n,s);break;case 147:s=c(e.expression,n,s);break;case 148:s=r(e.modifiers,i,s),s=c(e.name,n,s),s=c(e.questionToken,n,s),s=c(e.type,n,s),s=c(e.initializer,n,s);break;case 149:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=c(e.name,n,s),s=c(e.type,n,s),s=c(e.initializer,n,s);break;case 151:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=c(e.name,n,s),s=r(e.typeParameters,i,s),s=r(e.parameters,i,s),s=c(e.type,n,s),s=c(e.body,n,s);break;case 152:s=r(e.modifiers,i,s),s=r(e.parameters,i,s),s=c(e.body,n,s);break;case 153:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=c(e.name,n,s),s=r(e.parameters,i,s),s=c(e.type,n,s),s=c(e.body,n,s);break;case 154:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=c(e.name,n,s),s=r(e.parameters,i,s),s=c(e.body,n,s);break;case 174:case 175:s=r(e.elements,i,s);break;case 176:s=c(e.propertyName,n,s),s=c(e.name,n,s),s=c(e.initializer,n,s);break;case 177:s=r(e.elements,i,s);break;case 178:s=r(e.properties,i,s);break;case 179:s=c(e.expression,n,s),s=c(e.name,n,s);break;case 180:s=c(e.expression,n,s),s=c(e.argumentExpression,n,s);break;case 181:case 182:s=c(e.expression,n,s),s=r(e.typeArguments,i,s),s=r(e.arguments,i,s);break;case 183:s=c(e.tag,n,s),s=c(e.template,n,s);break;case 184:s=c(e.type,n,s),s=c(e.expression,n,s);break;case 186:s=r(e.modifiers,i,s),s=c(e.name,n,s),s=r(e.typeParameters,i,s),s=r(e.parameters,i,s),s=c(e.type,n,s),s=c(e.body,n,s);break;case 187:s=r(e.modifiers,i,s),s=r(e.typeParameters,i,s),s=r(e.parameters,i,s),s=c(e.type,n,s),s=c(e.body,n,s);break;case 185:case 188:case 189:case 190:case 191:case 197:case 198:case 203:s=c(e.expression,n,s);break;case 192:case 193:s=c(e.operand,n,s);break;case 194:s=c(e.left,n,s),s=c(e.right,n,s);break;case 195:s=c(e.condition,n,s),s=c(e.whenTrue,n,s),s=c(e.whenFalse,n,s);break;case 196:s=c(e.head,n,s),s=r(e.templateSpans,i,s);break;case 199:s=r(e.modifiers,i,s),s=c(e.name,n,s),s=r(e.typeParameters,i,s),s=r(e.heritageClauses,i,s),s=r(e.members,i,s);break;case 201:s=c(e.expression,n,s),s=r(e.typeArguments,i,s);break;case 202:s=c(e.expression,n,s),s=c(e.type,n,s);break;case 205:s=c(e.expression,n,s),s=c(e.literal,n,s);break;case 207:s=r(e.statements,i,s);break;case 208:s=r(e.modifiers,i,s),s=c(e.declarationList,n,s);break;case 210:s=c(e.expression,n,s);break;case 211:s=c(e.expression,n,s),s=c(e.thenStatement,n,s),s=c(e.elseStatement,n,s);break;case 212:s=c(e.statement,n,s),s=c(e.expression,n,s);break;case 213:case 220:s=c(e.expression,n,s),s=c(e.statement,n,s);break;case 214:s=c(e.initializer,n,s),s=c(e.condition,n,s),s=c(e.incrementor,n,s),s=c(e.statement,n,s);break;case 215:case 216:s=c(e.initializer,n,s),s=c(e.expression,n,s),s=c(e.statement,n,s);break;case 219:case 223:s=c(e.expression,n,s);break;case 221:s=c(e.expression,n,s),s=c(e.caseBlock,n,s);break;case 222:s=c(e.label,n,s),s=c(e.statement,n,s);break;case 224:s=c(e.tryBlock,n,s),s=c(e.catchClause,n,s),s=c(e.finallyBlock,n,s);break;case 226:s=c(e.name,n,s),s=c(e.type,n,s),s=c(e.initializer,n,s);break;case 227:s=r(e.declarations,i,s);break;case 228:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=c(e.name,n,s),s=r(e.typeParameters,i,s),s=r(e.parameters,i,s),s=c(e.type,n,s),s=c(e.body,n,s);break;case 229:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=c(e.name,n,s),s=r(e.typeParameters,i,s),s=r(e.heritageClauses,i,s),s=r(e.members,i,s);break;case 232:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=c(e.name,n,s),s=r(e.members,i,s);break;case 233:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=c(e.name,n,s),s=c(e.body,n,s);break;case 234:s=r(e.statements,i,s);break;case 235:s=r(e.clauses,i,s);break;case 237:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=c(e.name,n,s),s=c(e.moduleReference,n,s);break;case 238:s=r(e.decorators,i,s),s=r(e.modifiers,i,s),s=c(e.importClause,n,s),s=c(e.moduleSpecifier,n,s);break;case 239:s=c(e.name,n,s),s=c(e.namedBindings,n,s);break;case 240:s=c(e.name,n,s);break;case 241:case 245:s=r(e.elements,i,s);break;case 242:case 246:s=c(e.propertyName,n,s),s=c(e.name,n,s);break;case 243:s=l.reduceLeft(e.decorators,n,s),s=l.reduceLeft(e.modifiers,n,s),s=c(e.expression,n,s);break;case 244:s=l.reduceLeft(e.decorators,n,s),s=l.reduceLeft(e.modifiers,n,s),s=c(e.exportClause,n,s),s=c(e.moduleSpecifier,n,s);break;case 248:s=c(e.expression,n,s);break;case 249:s=c(e.openingElement,n,s),s=l.reduceLeft(e.children,n,s),s=c(e.closingElement,n,s);break;case 250:case 251:s=c(e.tagName,n,s),s=c(e.attributes,n,s);break;case 254:s=r(e.properties,i,s);break;case 252:s=c(e.tagName,n,s);break;case 253:s=c(e.name,n,s),s=c(e.initializer,n,s);break;case 255:case 256:s=c(e.expression,n,s);break;case 257:s=c(e.expression,n,s);case 258:s=r(e.statements,i,s);break;case 259:s=r(e.types,i,s);break;case 260:s=c(e.variableDeclaration,n,s),s=c(e.block,n,s);break;case 261:s=c(e.name,n,s),s=c(e.initializer,n,s);break;case 262:s=c(e.name,n,s),s=c(e.objectAssignmentInitializer,n,s);break;case 263:s=c(e.expression,n,s);break;case 264:s=c(e.name,n,s),s=c(e.initializer,n,s);break;case 265:s=r(e.statements,i,s);break;case 288:s=c(e.expression,n,s);break;case 289:s=r(e.elements,i,s)}return s}function a(e){if(void 0===e)return 0;if(536870912&e.transformFlags)return e.transformFlags&~l.getTransformFlagsSubtreeExclusions(e.kind);var t=function(e){if(l.hasModifier(e,2)||l.isTypeNode(e)&&201!==e.kind)return 0;return n(e,0,o,r)}(e);return l.computeTransformFlagsForNode(e,t)}function o(e,t){return e|a(t)}function r(e,t){return e|function(e){if(void 0===e)return 0;for(var t=0,n=0,o=0,r=e;o<r.length;o++){var i=r[o];t|=a(i),n|=-536870913&i.transformFlags}return e.transformFlags=536870912|n,t}(t)}var t,i,s;l.reduceEachChild=n,l.mergeLexicalEnvironment=function(e,t){return l.some(t)?l.isNodeArray(e)?l.setTextRange(l.createNodeArray(l.concatenate(e,t)),e):l.addRange(e,t):e},l.liftToBlock=function(e){return t.assert(l.every(e,l.isStatement),"Cannot lift nodes to a Block."),l.singleOrUndefined(e)||l.createBlock(e)},l.aggregateTransformFlags=function(e){return a(e),e},i=t=l.Debug||(l.Debug={}),s=!1,i.failBadSyntaxKind=i.shouldAssert(1)?function(e,t){return i.fail((t||"Unexpected node.")+"\r\nNode "+l.formatSyntaxKind(e.kind)+" was unexpected.",i.failBadSyntaxKind)}:l.noop,i.assertEachNode=i.shouldAssert(1)?function(e,t,n){return i.assert(void 0===t||l.every(e,t),n||"Unexpected node.",function(){return"Node array did not pass test '"+i.getFunctionName(t)+"'."},i.assertEachNode)}:l.noop,i.assertNode=i.shouldAssert(1)?function(e,t,n){return i.assert(void 0===t||t(e),n||"Unexpected node.",function(){return"Node "+l.formatSyntaxKind(e.kind)+" did not pass test '"+i.getFunctionName(t)+"'."},i.assertNode)}:l.noop,i.assertOptionalNode=i.shouldAssert(1)?function(e,t,n){return i.assert(void 0===t||void 0===e||t(e),n||"Unexpected node.",function(){return"Node "+l.formatSyntaxKind(e.kind)+" did not pass test '"+i.getFunctionName(t)+"'."},i.assertOptionalNode)}:l.noop,i.assertOptionalToken=i.shouldAssert(1)?function(e,t,n){return i.assert(void 0===t||void 0===e||e.kind===t,n||"Unexpected node.",function(){return"Node "+l.formatSyntaxKind(e.kind)+" was not a '"+l.formatSyntaxKind(t)+"' token."},i.assertOptionalToken)}:l.noop,i.assertMissingNode=i.shouldAssert(1)?function(e,t){return i.assert(void 0===e,t||"Unexpected node.",function(){return"Node "+l.formatSyntaxKind(e.kind)+" was unexpected'."},i.assertMissingNode)}:l.noop,i.enableDebugInfo=function(){if(!s){Object.defineProperties(l.objectAllocator.getSymbolConstructor().prototype,{__debugFlags:{get:function(){return l.formatSymbolFlags(this.flags)}}}),Object.defineProperties(l.objectAllocator.getTypeConstructor().prototype,{__debugFlags:{get:function(){return l.formatTypeFlags(this.flags)}},__debugObjectFlags:{get:function(){return 32768&this.flags?l.formatObjectFlags(this.objectFlags):""}},__debugTypeToString:{value:function(){return this.checker.typeToString(this)}}});for(var e=0,t=[l.objectAllocator.getNodeConstructor(),l.objectAllocator.getIdentifierConstructor(),l.objectAllocator.getTokenConstructor(),l.objectAllocator.getSourceFileConstructor()];e<t.length;e++){var n=t[e];n.prototype.hasOwnProperty("__debugKind")||Object.defineProperties(n.prototype,{__debugKind:{get:function(){return l.formatSyntaxKind(this.kind)}},__debugModifierFlags:{get:function(){return l.formatModifierFlags(l.getModifierFlagsNoCache(this))}},__debugTransformFlags:{get:function(){return l.formatTransformFlags(this.transformFlags)}},__debugEmitFlags:{get:function(){return l.formatEmitFlags(l.getEmitFlags(this))}},__debugGetText:{value:function(e){if(l.nodeIsSynthesized(this))return"";var t=l.getParseTreeNode(this),n=t&&l.getSourceFileOfNode(t);return n?l.getSourceTextOfNodeFromSourceFile(n,t,e):""}}})}s=!0}}}(ts||(ts={})),function(E){function S(e){return(e=E.getOriginalNode(e))?E.getNodeId(e):0}function C(e,t,n){if(E.isBindingPattern(e.name))for(var o=0,r=e.name.elements;o<r.length;o++){var i=r[o];E.isOmittedExpression(i)||(n=C(i,t,n))}else if(!E.isGeneratedIdentifier(e.name)){var a=E.idText(e.name);t.get(a)||(t.set(a,!0),n=E.append(n,e.name))}return n}function x(e,t,n){var o=e[t];return o?o.push(n):e[t]=o=[n],o}E.getOriginalNodeId=S,E.collectExternalModuleInfo=function(e,t,n){for(var o,r=[],i=E.createMultiMap(),a=[],s=E.createMap(),l=!1,c=void 0,u=!1,g=0,p=e.statements;g<p.length;g++){var d=p[g];switch(d.kind){case 238:r.push(d);break;case 237:248===d.moduleReference.kind&&r.push(d);break;case 244:if(d.moduleSpecifier)d.exportClause?r.push(d):(r.push(d),u=!0);else for(var _=0,f=d.exportClause.elements;_<f.length;_++){var h=f[_];if(!s.get(E.idText(h.name))){var m=h.propertyName||h.name;i.add(E.idText(m),h),(b=t.getReferencedImportDeclaration(m)||t.getReferencedValueDeclaration(m))&&x(a,S(b),h.name),s.set(E.idText(h.name),!0),o=E.append(o,h.name)}}break;case 243:d.isExportEquals&&!c&&(c=d);break;case 208:if(E.hasModifier(d,1))for(var y=0,v=d.declarationList.declarations;y<v.length;y++){var b;o=C(b=v[y],s,o)}break;case 228:E.hasModifier(d,1)&&(E.hasModifier(d,512)?l||(x(a,S(d),E.getDeclarationName(d)),l=!0):(m=d.name,s.get(E.idText(m))||(x(a,S(d),m),s.set(E.idText(m),!0),o=E.append(o,m))));break;case 229:E.hasModifier(d,1)&&(E.hasModifier(d,512)?l||(x(a,S(d),E.getDeclarationName(d)),l=!0):(m=d.name)&&!s.get(E.idText(m))&&(x(a,S(d),m),s.set(E.idText(m),!0),o=E.append(o,m)))}}var k=E.getOrCreateExternalHelpersModuleNameIfNeeded(e,n,u),T=k&&E.createImportDeclaration(void 0,void 0,E.createImportClause(void 0,E.createNamespaceImport(k)),E.createLiteral(E.externalHelpersModuleNameText));return T&&r.unshift(T),{externalImports:r,exportSpecifiers:i,exportEquals:c,hasExportStarsToExportValues:u,exportedBindings:a,exportedNames:o,externalHelpersImportDeclaration:T}},E.isSimpleCopiableExpression=function(e){return 9===e.kind||8===e.kind||13===e.kind||E.isKeyword(e.kind)||E.isIdentifier(e)}}(ts||(ts={})),function(T){var e;function E(e,t,n,o,r){if(!r){var i=T.visitNode(T.getInitializerOfBindingOrAssignmentElement(t),e.visitor,T.isExpression);i?n=n?(s=i,a=y(e,a=n,!0,o),T.createConditional(T.createTypeCheck(a,"undefined"),s,a)):i:n||(n=T.createVoidZero())}var a,s,l=T.getTargetOfBindingOrAssignmentElement(t);T.isObjectBindingOrAssignmentPattern(l)?function(e,t,n,o,r){var i,a,s=T.getElementsOfBindingOrAssignmentPattern(n),l=s.length;if(1!==l){var c=!T.isDeclarationBindingElement(t)||0!==l;o=y(e,o,c,r)}for(var u=0;u<l;u++){var g=s[u];if(T.getRestIndicatorOfBindingOrAssignmentElement(g)){if(u===l-1){i&&(e.emitBindingOrAssignment(e.createObjectBindingOrAssignmentPattern(i),o,r,n),i=void 0);var p=f(e.context,o,s,a,n);E(e,g,p,g)}}else{var d=T.getPropertyNameOfBindingOrAssignmentElement(g);if(!(1<=e.level)||1572864&g.transformFlags||1572864&T.getTargetOfBindingOrAssignmentElement(g).transformFlags||T.isComputedPropertyName(d)){i&&(e.emitBindingOrAssignment(e.createObjectBindingOrAssignmentPattern(i),o,r,n),i=void 0);var p=_(e,o,d);T.isComputedPropertyName(d)&&(a=T.append(a,p.argumentExpression)),E(e,g,p,g)}else i=T.append(i,g)}}i&&e.emitBindingOrAssignment(e.createObjectBindingOrAssignmentPattern(i),o,r,n)}(e,t,l,n,o):T.isArrayBindingOrAssignmentPattern(l)?function(e,t,n,o,r){var i,a,s=T.getElementsOfBindingOrAssignmentPattern(n),l=s.length;if(e.level<1&&e.downlevelIteration)o=y(e,T.createReadHelper(e.context,o,0<l&&T.getRestIndicatorOfBindingOrAssignmentElement(s[l-1])?void 0:l,r),!1,r);else if(1!==l&&(e.level<1||0===l)||T.every(s,T.isOmittedExpression)){var c=!T.isDeclarationBindingElement(t)||0!==l;o=y(e,o,c,r)}for(var u=0;u<l;u++){var g=s[u];if(1<=e.level)if(1048576&g.transformFlags){var p=T.createTempVariable(void 0);e.hoistTempVariables&&e.context.hoistVariableDeclaration(p),a=T.append(a,[p,g]),i=T.append(i,e.createArrayBindingOrAssignmentElement(p))}else i=T.append(i,g);else{if(T.isOmittedExpression(g))continue;if(T.getRestIndicatorOfBindingOrAssignmentElement(g)){if(u===l-1){var d=T.createArraySlice(o,u);E(e,g,d,g)}}else{var d=T.createElementAccess(o,u);E(e,g,d,g)}}}i&&e.emitBindingOrAssignment(e.createArrayBindingOrAssignmentPattern(i),o,r,n);if(a)for(var _=0,f=a;_<f.length;_++){var h=f[_],m=h[0],g=h[1];E(e,g,m,g)}}(e,t,l,n,o):e.emitBindingOrAssignment(l,n,o,t)}function _(e,t,n){if(T.isComputedPropertyName(n)){var o=y(e,T.visitNode(n.expression,e.visitor),!1,n);return T.createElementAccess(t,o)}if(T.isStringOrNumericLiteral(n))return(o=T.getSynthesizedClone(n)).text=o.text,T.createElementAccess(t,o);var r=T.createIdentifier(T.idText(n));return T.createPropertyAccess(t,r)}function y(e,t,n,o){if(T.isIdentifier(t)&&n)return t;var r=T.createTempVariable(void 0);return e.hoistTempVariables?(e.context.hoistVariableDeclaration(r),e.emitExpression(T.setTextRange(T.createAssignment(r,t),o))):e.emitBindingOrAssignment(r,t,o,void 0),r}function S(e){return T.Debug.assertEachNode(e,T.isArrayBindingElement),T.createArrayBindingPattern(e)}function g(e){return T.createArrayLiteral(T.map(e,T.convertToArrayAssignmentElement))}function C(e){return T.Debug.assertEachNode(e,T.isBindingElement),T.createObjectBindingPattern(e)}function p(e){return T.createObjectLiteral(T.map(e,T.convertToObjectAssignmentElement))}function x(e){return T.createBindingElement(void 0,void 0,e)}function d(e){return e}(e=T.FlattenLevel||(T.FlattenLevel={}))[e.All=0]="All",e[e.ObjectRest=1]="ObjectRest",T.flattenDestructuringAssignment=function(e,i,t,n,o,a){var r,s,l=e;if(T.isDestructuringAssignment(e))for(r=e.right;T.isEmptyArrayLiteral(e.left)||T.isEmptyObjectLiteral(e.left);){if(!T.isDestructuringAssignment(r))return r;l=e=r,r=e.right}var c={context:t,level:n,downlevelIteration:t.getCompilerOptions().downlevelIteration,hoistTempVariables:!0,emitExpression:u,emitBindingOrAssignment:function(e,t,n,o){T.Debug.assertNode(e,a?T.isIdentifier:T.isExpression);var r=a?a(e,t,n):T.setTextRange(T.createAssignment(T.visitNode(e,i,T.isExpression),t),n);r.original=o,u(r)},createArrayBindingOrAssignmentPattern:g,createObjectBindingOrAssignmentPattern:p,createArrayBindingOrAssignmentElement:d,visitor:i};if(r&&(r=T.visitNode(r,i,T.isExpression),o?r=y(c,r,!0,l):T.nodeIsSynthesized(e)&&(l=r)),E(c,e,r,l,T.isDestructuringAssignment(e)),r&&o){if(!T.some(s))return r;s.push(r)}return T.aggregateTransformFlags(T.inlineExpressions(s))||T.createOmittedExpression();function u(e){T.setEmitFlags(e,64),T.aggregateTransformFlags(e),s=T.append(s,e)}};var u={name:"typescript:rest",scoped:!(T.flattenDestructuringBinding=function(e,t,n,o,r,i,a){var s,l=[],c=[];if(E({context:n,level:o,downlevelIteration:n.getCompilerOptions().downlevelIteration,hoistTempVariables:i,emitExpression:function(e){s=T.append(s,e)},emitBindingOrAssignment:k,createArrayBindingOrAssignmentPattern:S,createObjectBindingOrAssignmentPattern:C,createArrayBindingOrAssignmentElement:x,visitor:t},e,r,e,a),s){var u=T.createTempVariable(void 0);if(i)k(u,m=T.inlineExpressions(s),s=void 0,void 0);else{n.hoistVariableDeclaration(u);var g=T.lastOrUndefined(l);g.pendingExpressions=T.append(g.pendingExpressions,T.createAssignment(u,g.value)),T.addRange(g.pendingExpressions,s),g.value=u}}for(var p=0,d=l;p<d.length;p++){var _=d[p],f=_.pendingExpressions,h=_.name,m=_.value,y=_.location,v=_.original,b=T.createVariableDeclaration(h,void 0,f?T.inlineExpressions(T.append(f,m)):m);b.original=v,T.setTextRange(b,y),T.isIdentifier(h)&&T.setEmitFlags(b,64),T.aggregateTransformFlags(b),c.push(b)}return c;function k(e,t,n,o){T.Debug.assertNode(e,T.isBindingName),s&&(t=T.inlineExpressions(T.append(s,t)),s=void 0),l.push({pendingExpressions:s,name:e,value:t,location:n,original:o})}}),text:'\n            var __rest = (this && this.__rest) || function (s, e) {\n                var t = {};\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n                    t[p] = s[p];\n                if (s != null && typeof Object.getOwnPropertySymbols === "function")\n                    for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n                        t[p[i]] = s[p[i]];\n                return t;\n            };'};function f(e,t,n,o,r){e.requestEmitHelper(u);for(var i=[],a=0,s=0;s<n.length-1;s++){var l=T.getPropertyNameOfBindingOrAssignmentElement(n[s]);if(l)if(T.isComputedPropertyName(l)){var c=o[a];a++,i.push(T.createConditional(T.createTypeCheck(c,"symbol"),c,T.createAdd(c,T.createLiteral(""))))}else i.push(T.createLiteral(l))}return T.createCall(T.getHelperName("__rest"),void 0,[t,T.setTextRange(T.createArrayLiteral(i),r)])}}(ts||(ts={})),function(Me){var e,t,n,o,Fe=!1;function Ue(e,t,n,o,r,i){var a=[];return a.push(Me.createArrayLiteral(t,!0)),a.push(n),o&&(a.push(o),r&&a.push(r)),e.requestEmitHelper(s),Me.setTextRange(Me.createCall(Me.getHelperName("__decorate"),void 0,a),i)}(t=e||(e={}))[t.ClassAliases=1]="ClassAliases",t[t.NamespaceExports=2]="NamespaceExports",t[t.NonQualifiedEnumMembers=8]="NonQualifiedEnumMembers",(o=n||(n={}))[o.None=0]="None",o[o.HasStaticInitializedProperties=1]="HasStaticInitializedProperties",o[o.HasConstructorDecorators=2]="HasConstructorDecorators",o[o.HasMemberDecorators=4]="HasMemberDecorators",o[o.IsExportOfNamespace=8]="IsExportOfNamespace",o[o.IsNamedExternalExport=16]="IsNamedExternalExport",o[o.IsDefaultExternalExport=32]="IsDefaultExternalExport",o[o.IsDerivedClass=64]="IsDerivedClass",o[o.UseImmediatelyInvokedFunctionExpression=128]="UseImmediatelyInvokedFunctionExpression",o[o.HasAnyDecorators=6]="HasAnyDecorators",o[o.NeedsName=5]="NeedsName",o[o.MayNeedImmediatelyInvokedFunctionExpression=7]="MayNeedImmediatelyInvokedFunctionExpression",o[o.IsExported=56]="IsExported";var s={name:"typescript:decorate",scoped:!(Me.transformTypeScript=function(k){var T,p,d,g,_,u,E,s,f=k.startLexicalEnvironment,l=k.resumeLexicalEnvironment,h=k.endLexicalEnvironment,S=k.hoistVariableDeclaration,C=k.getEmitResolver(),m=k.getCompilerOptions(),a=void 0===m.strictNullChecks?m.strict:m.strictNullChecks,x=Me.getEmitScriptTarget(m),y=Me.getEmitModuleKind(m),c=k.onEmitNode,n=k.onSubstituteNode;return k.onEmitNode=function(e,t,n){var o,r,i=s,a=T;Me.isSourceFile(t)&&(T=t),2&u&&(o=t,233===Me.getOriginalNode(o).kind)&&(s|=2),8&u&&(r=t,232===Me.getOriginalNode(r).kind)&&(s|=8),c(e,t,n),s=i,T=a},k.onSubstituteNode=function(e,t){return t=n(e,t),1===e?function(e){switch(e.kind){case 71:return function(e){if(1&u&&16777216&C.getNodeCheckFlags(e)){var t=C.getReferencedValueDeclaration(e);if(t){var n=E[t.id];if(n){var o=Me.getSynthesizedClone(n);return Me.setSourceMapRange(o,e),Me.setCommentRange(o,e),o}}}}(t=e)||Le(t)||t;case 179:case 180:return Pe(e)}var t;return e}(t):Me.isShorthandPropertyAssignment(t)?function(e){if(2&u){var t=e.name,n=Le(t);if(n){if(e.objectAssignmentInitializer){var o=Me.createAssignment(n,e.objectAssignmentInitializer);return Me.setTextRange(Me.createPropertyAssignment(t,o),e)}return Me.setTextRange(Me.createPropertyAssignment(t,n),e)}}return e}(t):t},k.enableSubstitution(179),k.enableSubstitution(180),function(e){if(e.isDeclarationFile)return e;var t=v(T=e,w);return Me.addEmitHelpers(t,k.readEmitHelpers()),T=void 0,t};function v(e,t){var n=g,o=_;!function(e){switch(e.kind){case 265:case 235:case 234:case 207:g=e,_=void 0;break;case 229:case 228:if(Me.hasModifier(e,2))break;e.name?fe(e):Me.Debug.assert(229===e.kind||Me.hasModifier(e,512))}}(e);var r=t(e);return g!==n&&(_=o),g=n,r}function A(e){return v(e,t)}function t(e){return 1&e.transformFlags?N(e):2&e.transformFlags?Me.visitEachChild(e,A,k):e}function o(e){return v(e,r)}function r(e){switch(e.kind){case 238:case 237:case 243:case 244:return function(e){if(Me.getParseTreeNode(e)!==e)return e;switch(e.kind){case 238:return function(e){if(!e.importClause)return e;var t=Me.visitNode(e.importClause,ve,Me.isImportClause);return t?Me.updateImportDeclaration(e,void 0,void 0,t,e.moduleSpecifier):void 0}(e);case 237:return Se(e);case 243:return t=e,C.isValueAliasDeclaration(t)?Me.visitEachChild(t,A,k):void 0;case 244:return function(e){if(!e.exportClause)return m.isolatedModules||C.moduleExportsSomeValue(e.moduleSpecifier)?e:void 0;if(C.isValueAliasDeclaration(e)){var t=Me.visitNode(e.exportClause,Te,Me.isNamedExports);return t?Me.updateExportDeclaration(e,void 0,void 0,t,e.moduleSpecifier):void 0}}(e);default:Me.Debug.fail("Unhandled ellided statement")}var t}(e);default:return t(e)}}function b(e){return v(e,i)}function i(e){if(244!==e.kind&&238!==e.kind&&239!==e.kind&&(237!==e.kind||248!==e.moduleReference.kind))return 1&e.transformFlags||Me.hasModifier(e,1)?N(e):2&e.transformFlags?Me.visitEachChild(e,A,k):e}function D(e){return v(e,B)}function B(e){switch(e.kind){case 152:return;case 149:case 157:case 153:case 154:case 151:return t(e);case 206:return e;default:return void Me.Debug.failBadSyntaxKind(e)}}function I(e){if(!(2270&Me.modifierToFlag(e.kind)||p&&84===e.kind))return e}function N(e){if(Me.hasModifier(e,2)&&Me.isStatement(e))return Me.createNotEmittedStatement(e);switch(e.kind){case 84:case 79:return p?void 0:e;case 114:case 112:case 113:case 117:case 76:case 124:case 131:case 164:case 165:case 163:case 158:case 145:case 119:case 122:case 136:case 133:case 130:case 105:case 137:case 161:case 160:case 162:case 159:case 166:case 167:case 168:case 169:case 170:case 171:case 172:case 173:case 157:case 147:case 231:case 149:case 236:return;case 152:return function(e){if(ue(e))return Me.updateConstructor(e,Me.visitNodes(e.decorators,A,Me.isDecorator),Me.visitNodes(e.modifiers,A,Me.isModifier),Me.visitParameterList(e.parameters,A,k),Me.visitFunctionBody(e.body,A,k))}(e);case 230:return Me.createNotEmittedStatement(e);case 229:return function(e){var t=M(e,!0),n=function(e,t){var n=0;Me.some(t)&&(n|=1);var o,r=Me.getClassExtendsHeritageClauseElement(e);return r&&95!==Me.skipOuterExpressions(r.expression).kind&&(n|=64),function(e){if(e.decorators&&0<e.decorators.length)return!0;var t=Me.getFirstConstructorWithBody(e);return!!t&&Me.forEach(t.parameters,O)}(e)&&(n|=2),Me.childIsDecorated(e)&&(n|=4),Ce(e)?n|=8:xe(o=e)&&Me.hasModifier(o,512)?n|=32:Ae(e)&&(n|=16),x<=1&&7&n&&(n|=128),n}(e,t);128&n&&k.startLexicalEnvironment();var o,r,i,a,s,l,c,u,g,p=e.name||(5&n?Me.getGeneratedNameForNode(e):void 0),d=2&n?function(e,t,n){var o=Me.moveRangePastDecorators(e),r=function(e){if(8388608&C.getNodeCheckFlags(e)){Re();var t=Me.createUniqueName(e.name&&!Me.isGeneratedIdentifier(e.name)?Me.idText(e.name):"default");return E[Me.getOriginalNodeId(e)]=t,S(t),t}}(e),i=Me.getLocalName(e,!1,!0),a=Me.visitNodes(e.heritageClauses,A,Me.isHeritageClause),s=R(e,0!=(64&n)),l=Me.createClassExpression(void 0,t,void 0,a,s);Me.setOriginalNode(l,e),Me.setTextRange(l,o);var c=Me.createVariableStatement(void 0,Me.createVariableDeclarationList([Me.createVariableDeclaration(i,void 0,r?Me.createAssignment(r,l):l)],1));return Me.setOriginalNode(c,e),Me.setTextRange(c,o),Me.setCommentRange(c,e),c}(e,p,n):(o=e,r=p,a=128&(i=n)?void 0:Me.visitNodes(o.modifiers,I,Me.isModifier),s=Me.createClassDeclaration(void 0,a,r,void 0,Me.visitNodes(o.heritageClauses,A,Me.isHeritageClause),R(o,0!=(64&i))),l=Me.getEmitFlags(o),1&i&&(l|=32),Me.setTextRange(s,o),Me.setOriginalNode(s,o),Me.setEmitFlags(s,l),s),_=[d];if(1&n&&G(_,t,128&n?Me.getInternalName(e):Me.getLocalName(e)),J(_,e,!1),J(_,e,!0),c=_,(g=function(e){var t=function(e){var t=e.decorators,n=j(Me.getFirstConstructorWithBody(e));if(t||n)return{decorators:t,parameters:n}}(e),n=X(e,e,t);if(n){var o=E&&E[Me.getOriginalNodeId(e)],r=Me.getLocalName(e,!1,!0),i=Ue(k,n,r),a=Me.createAssignment(r,o?Me.createAssignment(o,i):i);return Me.setEmitFlags(a,1536),Me.setSourceMapRange(a,Me.moveRangePastDecorators(e)),a}}(u=e))&&c.push(Me.setOriginalNode(Me.createStatement(g),u)),128&n){var f=Me.createTokenRange(Me.skipTrivia(T.text,e.members.end),18),h=Me.getInternalName(e),m=Me.createPartiallyEmittedExpression(h);m.end=f.end,Me.setEmitFlags(m,1536);var y=Me.createReturn(m);y.pos=f.pos,Me.setEmitFlags(y,1920),_.push(y),Me.addRange(_,k.endLexicalEnvironment());var v=Me.createImmediatelyInvokedArrowFunction(_);Me.setEmitFlags(v,33554432);var b=Me.createVariableStatement(void 0,Me.createVariableDeclarationList([Me.createVariableDeclaration(Me.getLocalName(e,!1,!1),void 0,v)]));Me.setOriginalNode(b,e),Me.setCommentRange(b,e),Me.setSourceMapRange(b,Me.moveRangePastDecorators(e)),Me.startOnNewLine(b),_=[b]}return 8&n?Be(_,e):(128&n||2&n)&&(32&n?_.push(Me.createExportDefault(Me.getLocalName(e,!1,!0))):16&n&&_.push(Me.createExternalModuleExport(Me.getLocalName(e,!1,!0)))),1<_.length&&(_.push(Me.createEndOfDeclarationMarker(e)),Me.setEmitFlags(d,4194304|Me.getEmitFlags(d))),Me.singleOrMany(_)}(e);case 199:return function(e){var t=M(e,!0),n=Me.visitNodes(e.heritageClauses,A,Me.isHeritageClause),o=R(e,Me.some(n,function(e){return 85===e.token})),r=Me.createClassExpression(void 0,e.name,void 0,n,o);if(Me.setOriginalNode(r,e),Me.setTextRange(r,e),0<t.length){var i=[],a=Me.createTempVariable(S);return 8388608&C.getNodeCheckFlags(e)&&(Re(),E[Me.getOriginalNodeId(e)]=Me.getSynthesizedClone(a)),Me.setEmitFlags(r,65536|Me.getEmitFlags(r)),i.push(Me.startOnNewLine(Me.createAssignment(a,r))),Me.addRange(i,function(e,t){for(var n=[],o=0,r=e;o<r.length;o++){var i=r[o],a=V(i,t);a.startsOnNewLine=!0,Me.setSourceMapRange(a,Me.moveRangePastModifiers(i)),Me.setCommentRange(a,i),n.push(a)}return n}(t,a)),i.push(Me.startOnNewLine(a)),Me.inlineExpressions(i)}return r}(e);case 259:return function(e){if(85===e.token){var t=Me.visitNodes(e.types,A,Me.isExpressionWithTypeArguments,0,1);return Me.setTextRange(Me.createHeritageClause(85,t),e)}}(e);case 201:return u=e,Me.updateExpressionWithTypeArguments(u,void 0,Me.visitNode(u.expression,A,Me.isLeftHandSideExpression));case 151:return function(e){if(ue(e)){var t=Me.updateMethod(e,void 0,Me.visitNodes(e.modifiers,I,Me.isModifier),e.asteriskToken,ce(e),void 0,void 0,Me.visitParameterList(e.parameters,A,k),void 0,Me.visitFunctionBody(e.body,A,k));return t!==e&&(Me.setCommentRange(t,e),Me.setSourceMapRange(t,Me.moveRangePastDecorators(e))),t}}(e);case 153:return function(e){if(ge(e)){var t=Me.updateGetAccessor(e,void 0,Me.visitNodes(e.modifiers,I,Me.isModifier),ce(e),Me.visitParameterList(e.parameters,A,k),void 0,Me.visitFunctionBody(e.body,A,k)||Me.createBlock([]));return t!==e&&(Me.setCommentRange(t,e),Me.setSourceMapRange(t,Me.moveRangePastDecorators(e))),t}}(e);case 154:return function(e){if(ge(e)){var t=Me.updateSetAccessor(e,void 0,Me.visitNodes(e.modifiers,I,Me.isModifier),ce(e),Me.visitParameterList(e.parameters,A,k),Me.visitFunctionBody(e.body,A,k)||Me.createBlock([]));return t!==e&&(Me.setCommentRange(t,e),Me.setSourceMapRange(t,Me.moveRangePastDecorators(e))),t}}(e);case 228:return function(e){if(!ue(e))return Me.createNotEmittedStatement(e);var t=Me.updateFunctionDeclaration(e,void 0,Me.visitNodes(e.modifiers,I,Me.isModifier),e.asteriskToken,e.name,void 0,Me.visitParameterList(e.parameters,A,k),void 0,Me.visitFunctionBody(e.body,A,k)||Me.createBlock([]));if(Ce(e)){var n=[t];return Be(n,e),n}return t}(e);case 186:return ue(t=e)?Me.updateFunctionExpression(t,Me.visitNodes(t.modifiers,I,Me.isModifier),t.asteriskToken,t.name,void 0,Me.visitParameterList(t.parameters,A,k),void 0,Me.visitFunctionBody(t.body,A,k)||Me.createBlock([])):Me.createOmittedExpression();case 187:return c=e,Me.updateArrowFunction(c,Me.visitNodes(c.modifiers,I,Me.isModifier),void 0,Me.visitParameterList(c.parameters,A,k),void 0,c.equalsGreaterThanToken,Me.visitFunctionBody(c.body,A,k));case 146:return function(e){if(!Me.parameterIsThisKeyword(e)){var t=Me.createParameter(void 0,void 0,e.dotDotDotToken,Me.visitNode(e.name,A,Me.isBindingName),void 0,void 0,Me.visitNode(e.initializer,A,Me.isExpression));return Me.setOriginalNode(t,e),Me.setTextRange(t,Me.moveRangePastModifiers(e)),Me.setCommentRange(t,e),Me.setSourceMapRange(t,Me.moveRangePastModifiers(e)),Me.setEmitFlags(t.name,32),t}}(e);case 185:return function(e){var t=Me.skipOuterExpressions(e.expression,-3);if(Me.isAssertionExpression(t)){var n=Me.visitNode(e.expression,A,Me.isExpression);return Me.createPartiallyEmittedExpression(n,e)}return Me.visitEachChild(e,A,k)}(e);case 184:case 202:return s=e,l=Me.visitNode(s.expression,A,Me.isExpression),Me.createPartiallyEmittedExpression(l,s);case 181:return a=e,Me.updateCall(a,Me.visitNode(a.expression,A,Me.isExpression),void 0,Me.visitNodes(a.arguments,A,Me.isExpression));case 182:return i=e,Me.updateNew(i,Me.visitNode(i.expression,A,Me.isExpression),void 0,Me.visitNodes(i.arguments,A,Me.isExpression));case 203:return o=e,r=Me.visitNode(o.expression,A,Me.isLeftHandSideExpression),Me.createPartiallyEmittedExpression(r,o);case 232:return function(e){if(t=e,!Me.isConst(t)||m.preserveConstEnums||m.isolatedModules){var t,n=[],o=2;me(n,e)&&(y===Me.ModuleKind.System&&g===T||(o|=512));var r=we(e),i=Oe(e),a=Me.hasModifier(e,1)?Me.getExternalModuleOrNamespaceExportName(d,e,!1,!0):Me.getLocalName(e,!1,!0),s=Me.createLogicalOr(a,Me.createAssignment(a,Me.createObjectLiteral()));if(_e(e)){var l=Me.getLocalName(e,!1,!0);s=Me.createAssignment(l,s)}var c=Me.createStatement(Me.createCall(Me.createFunctionExpression(void 0,void 0,void 0,void 0,[Me.createParameter(void 0,void 0,void 0,r)],void 0,function(e,t){var n=d;d=t;var o=[];return f(),Me.addRange(o,Me.map(e.members,de)),Me.addRange(o,h()),d=n,Me.createBlock(Me.setTextRange(Me.createNodeArray(o),e.members),!0)}(e,i)),void 0,[s]));return Me.setOriginalNode(c,e),Me.setTextRange(c,e),Me.setEmitFlags(c,o),n.push(c),n.push(Me.createEndOfDeclarationMarker(e)),n}}(e);case 208:return function(e){if(Ce(e)){var t=Me.getInitializedVariables(e.declarationList);if(0===t.length)return;return Me.setTextRange(Me.createStatement(Me.inlineExpressions(Me.map(t,pe))),e)}return Me.visitEachChild(e,A,k)}(e);case 226:return n=e,Me.updateVariableDeclaration(n,Me.visitNode(n.name,A,Me.isBindingName),void 0,Me.visitNode(n.initializer,A,Me.isExpression));case 233:return ye(e);case 237:return Se(e);default:return Me.Debug.failBadSyntaxKind(e),Me.visitEachChild(e,A,k)}var t,n,o,r,i,a,s,l,c,u}function w(e){var t=(void 0===m.alwaysStrict?m.strict:m.alwaysStrict)&&!(Me.isExternalModule(e)&&y>=Me.ModuleKind.ES2015);return Me.updateSourceFileNode(e,Me.visitLexicalEnvironment(e.statements,o,k,0,t))}function O(e){return void 0!==e.decorators&&0<e.decorators.length}function R(e,t){var n=[],o=function(e,t){var n=Me.forEach(e.members,U),o=262144&e.transformFlags,r=Me.getFirstConstructorWithBody(e);if(!n&&!o)return Me.visitEachChild(r,A,k);var i,a=(i=r,Me.visitParameterList(i&&i.parameters,A,k)||[]),s=function(e,t,n){var o,r=[],i=0;if(l(),t){i=function(e,t){if(e.body){var n=e.body.statements,o=Me.addPrologue(t,n,!1,A);if(o===n.length)return o;var r=n[o];return 210===r.kind&&Me.isSuperCall(r.expression)?(t.push(Me.visitNode(r,A,Me.isStatement)),o+1):o}return 0}(t,r);var a=(o=t,Me.filter(o.parameters,L));Me.addRange(r,Me.map(a,P))}else n&&r.push(Me.createStatement(Me.createCall(Me.createSuper(),void 0,[Me.createSpread(Me.createIdentifier("arguments"))])));var s=M(e,!1);return G(r,s,Me.createThis()),t&&Me.addRange(r,Me.visitNodes(t.body.statements,A,Me.isStatement,i)),r=Me.mergeLexicalEnvironment(r,h()),Me.setTextRange(Me.createBlock(Me.setTextRange(Me.createNodeArray(r),t?t.body.statements:e.members),!0),t?t.body:void 0)}(e,r,t);return Me.startOnNewLine(Me.setOriginalNode(Me.setTextRange(Me.createConstructor(void 0,void 0,a,s),r||e),r))}(e,t);return o&&n.push(o),Me.addRange(n,Me.visitNodes(e.members,D,Me.isClassElement)),Me.setTextRange(Me.createNodeArray(n),e.members)}function L(e){return Me.hasModifier(e,92)&&Me.isIdentifier(e.name)}function P(e){Me.Debug.assert(Me.isIdentifier(e.name));var t=e.name,n=Me.getMutableClone(t);Me.setEmitFlags(n,1584);var o=Me.getMutableClone(t);return Me.setEmitFlags(o,1536),Me.startOnNewLine(Me.setTextRange(Me.createStatement(Me.createAssignment(Me.setTextRange(Me.createPropertyAccess(Me.createThis(),n),e.name),o)),Me.moveRangePos(e,-1)))}function M(e,t){return Me.filter(e.members,t?F:U)}function F(e){return H(e,!0)}function U(e){return H(e,!1)}function H(e,t){return 149===e.kind&&t===Me.hasModifier(e,32)&&void 0!==e.initializer}function G(e,t,n){for(var o=0,r=t;o<r.length;o++){var i=r[o],a=Me.createStatement(V(i,n));Me.setSourceMapRange(a,Me.moveRangePastModifiers(i)),Me.setCommentRange(a,i),e.push(a)}}function V(e,t){var n=ce(e),o=Me.visitNode(e.initializer,A,Me.isExpression),r=Me.createMemberAccessForPropertyName(t,n,n);return Me.createAssignment(r,o)}function W(e){return z(e,!0)}function K(e){return z(e,!1)}function z(e,t){return Me.nodeOrChildIsDecorated(e)&&t===Me.hasModifier(e,32)}function j(e){var t;if(e)for(var n=e.parameters,o=0;o<n.length;o++){var r=n[o];(t||r.decorators)&&(t||(t=new Array(n.length)),t[o]=r.decorators)}return t}function Y(e,t){switch(t.kind){case 153:case 154:return function(e,t){if(t.body){var n=Me.getAllAccessorDeclarations(e.members,t),o=n.firstAccessor,r=n.secondAccessor,i=n.setAccessor,a=o.decorators?o:r&&r.decorators?r:void 0;if(a&&t===a){var s=a.decorators,l=j(i);if(s||l)return{decorators:s,parameters:l}}}}(e,t);case 151:return function(e){if(e.body){var t=e.decorators,n=j(e);if(t||n)return{decorators:t,parameters:n}}}(t);case 149:return function(e){var t=e.decorators;if(t)return{decorators:t}}(t);default:return}}function X(e,t,n){if(n){var o,r,i,a,s,l,c=[];return Me.addRange(c,Me.map(n.decorators,Z)),Me.addRange(c,Me.flatMap(n.parameters,$)),o=e,r=t,i=c,Fe?function(e,t,n){if(m.emitDecoratorMetadata){var o=void 0;Q(e)&&(o||(o=[])).push(Me.createPropertyAssignment("type",Me.createArrowFunction(void 0,void 0,[],void 0,Me.createToken(36),ne(e)))),te(e)&&(o||(o=[])).push(Me.createPropertyAssignment("paramTypes",Me.createArrowFunction(void 0,void 0,[],void 0,Me.createToken(36),oe(e,t)))),ee(e)&&(o||(o=[])).push(Me.createPropertyAssignment("returnType",Me.createArrowFunction(void 0,void 0,[],void 0,Me.createToken(36),re(e)))),o&&n.push(He(k,"design:typeinfo",Me.createObjectLiteral(o,!0)))}}(o,r,i):(a=o,s=r,l=i,m.emitDecoratorMetadata&&(Q(a)&&l.push(He(k,"design:type",ne(a))),te(a)&&l.push(He(k,"design:paramtypes",oe(a,s))),ee(a)&&l.push(He(k,"design:returntype",re(a))))),c}}function J(e,t,n){Me.addRange(e,Me.map(function(e,t){for(var n,o=(l=e,c=t,Me.filter(l.members,c?W:K)),r=0,i=o;r<i.length;r++){var a=i[r],s=q(e,a);s&&(n?n.push(s):n=[s])}var l,c;return n}(t,n),De))}function q(e,t){var n=X(t,e,Y(e,t));if(n){var o,r,i,a=(o=e,r=t,Me.hasModifier(r,32)?Me.getDeclarationName(o):(i=o,Me.createPropertyAccess(Me.getDeclarationName(i),"prototype"))),s=le(t,!0),l=0<x?149===t.kind?Me.createVoidZero():Me.createNull():void 0,c=Ue(k,n,a,s,l,Me.moveRangePastDecorators(t));return Me.setEmitFlags(c,1536),c}}function Z(e){return Me.visitNode(e.expression,A,Me.isExpression)}function $(e,t){var n;if(e){n=[];for(var o=0,r=e;o<r.length;o++){var i=r[o],a=Ge(k,Z(i),t,i.expression);Me.setEmitFlags(a,1536),n.push(a)}}return n}function Q(e){var t=e.kind;return 151===t||153===t||154===t||149===t}function ee(e){return 151===e.kind}function te(e){switch(e.kind){case 229:case 199:return void 0!==Me.getFirstConstructorWithBody(e);case 151:case 153:case 154:return!0}return!1}function ne(e){switch(e.kind){case 149:case 146:case 153:return ie(e.type);case 154:return ie(Me.getSetAccessorTypeAnnotationNode(e));case 229:case 199:case 151:return Me.createIdentifier("Function");default:return Me.createVoidZero()}}function oe(e,t){var n=Me.isClassLike(e)?Me.getFirstConstructorWithBody(e):Me.isFunctionLike(e)&&Me.nodeIsPresent(e.body)?e:void 0,o=[];if(n)for(var r=function(e,t){if(t&&153===e.kind){var n=Me.getAllAccessorDeclarations(t.members,e).setAccessor;if(n)return n.parameters}return e.parameters}(n,t),i=r.length,a=0;a<i;a++){var s=r[a];0===a&&Me.isIdentifier(s.name)&&"this"===s.name.escapedText||(s.dotDotDotToken?o.push(ie(Me.getRestParameterElementType(s.type))):o.push(ne(s)))}return Me.createArrayLiteral(o)}function re(e){return Me.isFunctionLike(e)&&e.type?ie(e.type):Me.isAsyncFunction(e)?Me.createIdentifier("Promise"):Me.createVoidZero()}function ie(e){if(void 0===e)return Me.createIdentifier("Object");switch(e.kind){case 105:case 139:case 95:case 130:return Me.createVoidZero();case 168:return ie(e.type);case 160:case 161:return Me.createIdentifier("Function");case 164:case 165:return Me.createIdentifier("Array");case 158:case 122:return Me.createIdentifier("Boolean");case 136:return Me.createIdentifier("String");case 134:return Me.createIdentifier("Object");case 173:switch(e.literal.kind){case 9:return Me.createIdentifier("String");case 8:return Me.createIdentifier("Number");case 101:case 86:return Me.createIdentifier("Boolean");default:Me.Debug.failBadSyntaxKind(e.literal)}break;case 133:return Me.createIdentifier("Number");case 137:return x<2?se():Me.createIdentifier("Symbol");case 159:return function(e){switch(C.getTypeReferenceSerializationKind(e.typeName,g)){case Me.TypeReferenceSerializationKind.Unknown:var t=ae(e.typeName,!0),n=Me.createTempVariable(S);return Me.createLogicalOr(Me.createLogicalAnd(Me.createTypeCheck(Me.createAssignment(n,t),"function"),n),Me.createIdentifier("Object"));case Me.TypeReferenceSerializationKind.TypeWithConstructSignatureAndValue:return ae(e.typeName,!1);case Me.TypeReferenceSerializationKind.VoidNullableOrNeverType:return Me.createVoidZero();case Me.TypeReferenceSerializationKind.BooleanType:return Me.createIdentifier("Boolean");case Me.TypeReferenceSerializationKind.NumberLikeType:return Me.createIdentifier("Number");case Me.TypeReferenceSerializationKind.StringLikeType:return Me.createIdentifier("String");case Me.TypeReferenceSerializationKind.ArrayLikeType:return Me.createIdentifier("Array");case Me.TypeReferenceSerializationKind.ESSymbolType:return x<2?se():Me.createIdentifier("Symbol");case Me.TypeReferenceSerializationKind.TypeWithCallSignature:return Me.createIdentifier("Function");case Me.TypeReferenceSerializationKind.Promise:return Me.createIdentifier("Promise");case Me.TypeReferenceSerializationKind.ObjectType:default:return Me.createIdentifier("Object")}}(e);case 167:case 166:return function(e){for(var t,n=0,o=e.types;n<o.length;n++){for(var r=o[n];168===r.kind;)r=r.type;if(130!==r.kind&&(a||95!==r.kind&&139!==r.kind)){var i=ie(r);if(Me.isIdentifier(i)&&"Object"===i.escapedText)return i;if(t){if(!Me.isIdentifier(t)||!Me.isIdentifier(i)||t.escapedText!==i.escapedText)return Me.createIdentifier("Object")}else t=i}}return t||Me.createVoidZero()}(e);case 162:case 170:case 171:case 172:case 163:case 119:case 169:break;default:Me.Debug.failBadSyntaxKind(e)}return Me.createIdentifier("Object")}function ae(e,t){switch(e.kind){case 71:var n=Me.getMutableClone(e);return n.flags&=-9,n.original=void 0,n.parent=Me.getParseTreeNode(g),t?Me.createLogicalAnd(Me.createStrictInequality(Me.createTypeOf(n),Me.createLiteral("undefined")),n):n;case 143:return function(e,t){var n;if(71===e.left.kind)n=ae(e.left,t);else if(t){var o=Me.createTempVariable(S);n=Me.createLogicalAnd(Me.createAssignment(o,ae(e.left,!0)),o)}else n=ae(e.left,!1);return Me.createPropertyAccess(n,e.right)}(e,t)}}function se(){return Me.createConditional(Me.createTypeCheck(Me.createIdentifier("Symbol"),"function"),Me.createIdentifier("Symbol"),Me.createIdentifier("Object"))}function le(e,t){var n=e.name;return Me.isComputedPropertyName(n)?t?Me.getGeneratedNameForNode(n):n.expression:Me.isIdentifier(n)?Me.createLiteral(Me.idText(n)):Me.getSynthesizedClone(n)}function ce(e){var t=e.name;if(Me.isComputedPropertyName(t)){var n=Me.visitNode(t.expression,A,Me.isExpression);if(e.decorators){var o=Me.getGeneratedNameForNode(t);S(o),n=Me.createAssignment(o,n)}return Me.updateComputedPropertyName(t,n)}return t}function ue(e){return!Me.nodeIsMissing(e.body)}function ge(e){return!(Me.nodeIsMissing(e.body)&&Me.hasModifier(e,128))}function pe(e){var t=e.name;return Me.isBindingPattern(t)?Me.flattenDestructuringAssignment(e,A,k,0,!1,Ie):Me.setTextRange(Me.createAssignment(Ne(t),Me.visitNode(e.initializer,A,Me.isExpression)),e)}function de(e){var t,n,o=le(e,!1),r=(t=e,void 0!==(n=C.getConstantValue(t))?Me.createLiteral(n):(0==(8&u)&&(u|=8,k.enableSubstitution(71)),t.initializer?Me.visitNode(t.initializer,A,Me.isExpression):Me.createVoidZero())),i=Me.createAssignment(Me.createElementAccess(d,o),r),a=9===r.kind?i:Me.createAssignment(Me.createElementAccess(d,i),o);return Me.setTextRange(Me.createStatement(Me.setTextRange(a,e)),e)}function _e(e){return Ce(e)||xe(e)&&y!==Me.ModuleKind.ES2015&&y!==Me.ModuleKind.ESNext&&y!==Me.ModuleKind.System}function fe(e){_||(_=Me.createUnderscoreEscapedMap());var t=he(e);_.has(t)||_.set(t,e)}function he(e){return Me.Debug.assertNode(e.name,Me.isIdentifier),e.name.escapedText}function me(e,t){var n=Me.createVariableStatement(Me.visitNodes(t.modifiers,I,Me.isModifier),Me.createVariableDeclarationList([Me.createVariableDeclaration(Me.getLocalName(t,!1,!0))],265===g.kind?0:1));if(Me.setOriginalNode(n,t),fe(t),function(e){if(_){var t=he(e);return _.get(t)===e}return!0}(t))return 232===t.kind?Me.setSourceMapRange(n.declarationList,t):Me.setSourceMapRange(n,t),Me.setCommentRange(n,t),Me.setEmitFlags(n,4195328),e.push(n),!0;var o=Me.createMergeDeclarationMarker(n);return Me.setEmitFlags(o,4195840),e.push(o),!1}function ye(e){if(t=e,!Me.isInstantiatedModule(t,m.preserveConstEnums||m.isolatedModules))return Me.createNotEmittedStatement(e);var t;Me.Debug.assertNode(e.name,Me.isIdentifier,"A TypeScript namespace should have an Identifier name."),0==(2&u)&&(u|=2,k.enableSubstitution(71),k.enableSubstitution(262),k.enableEmitNotification(233));var n=[],o=2;me(n,e)&&(y===Me.ModuleKind.System&&g===T||(o|=512));var r=we(e),i=Oe(e),a=Me.hasModifier(e,1)?Me.getExternalModuleOrNamespaceExportName(d,e,!1,!0):Me.getLocalName(e,!1,!0),s=Me.createLogicalOr(a,Me.createAssignment(a,Me.createObjectLiteral()));if(_e(e)){var l=Me.getLocalName(e,!1,!0);s=Me.createAssignment(l,s)}var c=Me.createStatement(Me.createCall(Me.createFunctionExpression(void 0,void 0,void 0,void 0,[Me.createParameter(void 0,void 0,void 0,r)],void 0,function(e,t){var n=d,o=p,r=_;d=t,p=e,_=void 0;var i,a,s=[];f();var l=e.body;if(234===l.kind)v(l,function(e){return Me.addRange(s,Me.visitNodes(e.statements,b,Me.isStatement))}),i=l.statements,a=l;else{var c=ye(l);c&&(Me.isArray(c)?Me.addRange(s,c):s.push(c));var u=function e(t){if(233===t.body.kind){var n=e(t.body);return n||t.body}}(e).body;i=Me.moveRangePos(u.statements,-1)}Me.addRange(s,h()),d=n,p=o,_=r;var g=Me.createBlock(Me.setTextRange(Me.createNodeArray(s),i),!0);return Me.setTextRange(g,a),234!==l.kind&&Me.setEmitFlags(g,1536|Me.getEmitFlags(g)),g}(e,i)),void 0,[s]));return Me.setOriginalNode(c,e),Me.setTextRange(c,e),Me.setEmitFlags(c,o),n.push(c),n.push(Me.createEndOfDeclarationMarker(e)),n}function ve(e){var t=C.isReferencedAliasDeclaration(e)?e.name:void 0,n=Me.visitNode(e.namedBindings,be,Me.isNamedImportBindings);return t||n?Me.updateImportClause(e,t,n):void 0}function be(e){if(240===e.kind)return C.isReferencedAliasDeclaration(e)?e:void 0;var t=Me.visitNodes(e.elements,ke,Me.isImportSpecifier);return Me.some(t)?Me.updateNamedImports(e,t):void 0}function ke(e){return C.isReferencedAliasDeclaration(e)?e:void 0}function Te(e){var t=Me.visitNodes(e.elements,Ee,Me.isExportSpecifier);return Me.some(t)?Me.updateNamedExports(e,t):void 0}function Ee(e){return C.isValueAliasDeclaration(e)?e:void 0}function Se(e){if(Me.isExternalModuleImportEqualsDeclaration(e))return C.isReferencedAliasDeclaration(e)?Me.visitEachChild(e,A,k):void 0;if(t=e,C.isReferencedAliasDeclaration(t)||!Me.isExternalModule(T)&&C.isTopLevelValueImportEqualsWithEntityName(t)){var t,n,o,r,i=Me.createExpressionFromEntityName(e.moduleReference);return Me.setEmitFlags(i,3584),Ae(e)||!Ce(e)?Me.setOriginalNode(Me.setTextRange(Me.createVariableStatement(Me.visitNodes(e.modifiers,I,Me.isModifier),Me.createVariableDeclarationList([Me.setOriginalNode(Me.createVariableDeclaration(e.name,void 0,i),e)])),e),e):Me.setOriginalNode((n=e.name,o=i,r=e,Me.setTextRange(Me.createStatement(Me.createAssignment(Me.getNamespaceMemberName(d,n,!1,!0),o)),r)),e)}}function Ce(e){return void 0!==p&&Me.hasModifier(e,1)}function xe(e){return void 0===p&&Me.hasModifier(e,1)}function Ae(e){return xe(e)&&!Me.hasModifier(e,512)}function De(e){return Me.createStatement(e)}function Be(e,t){var n=Me.createAssignment(Me.getExternalModuleOrNamespaceExportName(d,t,!1,!0),Me.getLocalName(t));Me.setSourceMapRange(n,Me.createRange(t.name?t.name.pos:t.pos,t.end));var o=Me.createStatement(n);Me.setSourceMapRange(o,Me.createRange(-1,t.end)),e.push(o)}function Ie(e,t,n){return Me.setTextRange(Me.createAssignment(Ne(e),t),n)}function Ne(e){return Me.getNamespaceMemberName(d,e,!1,!0)}function we(e){var t=Me.getGeneratedNameForNode(e);return Me.setSourceMapRange(t,e.name),t}function Oe(e){return Me.getGeneratedNameForNode(e)}function Re(){0==(1&u)&&(u|=1,k.enableSubstitution(71),E=[])}function Le(e){if(u&s&&!Me.isGeneratedIdentifier(e)&&!Me.isLocalName(e)){var t=C.getReferencedExportContainer(e,!1);if(t&&265!==t.kind&&(2&s&&233===t.kind||8&s&&232===t.kind))return Me.setTextRange(Me.createPropertyAccess(Me.getGeneratedNameForNode(t),e),e)}}function Pe(e){var t=function(e){if(!m.isolatedModules)return Me.isPropertyAccessExpression(e)||Me.isElementAccessExpression(e)?C.getConstantValue(e):void 0}(e);if(void 0!==t){Me.setConstantValue(e,t);var n=Me.createLiteral(t);if(!m.removeComments){var o=Me.isPropertyAccessExpression(e)?Me.declarationNameToString(e.name):Me.getTextOfNode(e.argumentExpression);Me.addSyntheticTrailingComment(n,3," "+o+" ")}return n}return e}}),priority:2,text:'\n            var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n                var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n                if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);\n                else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n                return c > 3 && r && Object.defineProperty(target, key, r), r;\n            };'};function He(e,t,n){return e.requestEmitHelper(r),Me.createCall(Me.getHelperName("__metadata"),void 0,[Me.createLiteral(t),n])}var r={name:"typescript:metadata",scoped:!1,priority:3,text:'\n            var __metadata = (this && this.__metadata) || function (k, v) {\n                if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);\n            };'};function Ge(e,t,n,o){return e.requestEmitHelper(i),Me.setTextRange(Me.createCall(Me.getHelperName("__param"),void 0,[Me.createLiteral(n),t]),o)}var i={name:"typescript:param",scoped:!1,priority:4,text:"\n            var __param = (this && this.__param) || function (paramIndex, decorator) {\n                return function (target, key) { decorator(target, key, paramIndex); }\n            };"}}(ts||(ts={})),function(y){var e,t;(t=e||(e={}))[t.AsyncMethodsWithSuper=1]="AsyncMethodsWithSuper";var i={name:"typescript:awaiter",scoped:!(y.transformES2017=function(u){var a,r=u.startLexicalEnvironment,g=u.resumeLexicalEnvironment,p=u.endLexicalEnvironment,d=u.getEmitResolver(),e=u.getCompilerOptions(),_=y.getEmitScriptTarget(e),s=0,l=u.onEmitNode,n=u.onSubstituteNode;return u.onEmitNode=function(e,t,n){if(1&a&&(229===(i=t.kind)||152===i||151===i||153===i||154===i)){var o=6144&d.getNodeCheckFlags(t);if(o!==s){var r=s;return s=o,l(e,t,n),void(s=r)}}var i;l(e,t,n)},u.onSubstituteNode=function(e,t){return t=n(e,t),1===e&&s?function(e){switch(e.kind){case 179:return o(e);case 180:return i(e);case 181:return function(e){var t=e.expression;if(y.isSuperProperty(t)){var n=y.isPropertyAccessExpression(t)?o(t):i(t);return y.createCall(y.createPropertyAccess(n,"call"),void 0,[y.createThis()].concat(e.arguments))}return e}(e)}return e}(t):t},function(e){if(e.isDeclarationFile)return e;var t=y.visitEachChild(e,f,u);return y.addEmitHelpers(t,u.readEmitHelpers()),t};function f(e){if(0==(16&e.transformFlags))return e;switch(e.kind){case 120:return;case 191:return i=e,y.setOriginalNode(y.setTextRange(y.createYield(void 0,y.visitNode(i.expression,f,y.isExpression)),i),i);case 151:return r=e,y.updateMethod(r,void 0,y.visitNodes(r.modifiers,f,y.isModifier),r.asteriskToken,r.name,void 0,void 0,y.visitParameterList(r.parameters,f,u),void 0,2&y.getFunctionFlags(r)?c(r):y.visitFunctionBody(r.body,f,u));case 228:return o=e,y.updateFunctionDeclaration(o,void 0,y.visitNodes(o.modifiers,f,y.isModifier),o.asteriskToken,o.name,void 0,y.visitParameterList(o.parameters,f,u),void 0,2&y.getFunctionFlags(o)?c(o):y.visitFunctionBody(o.body,f,u));case 186:return n=e,y.updateFunctionExpression(n,y.visitNodes(n.modifiers,f,y.isModifier),n.asteriskToken,n.name,void 0,y.visitParameterList(n.parameters,f,u),void 0,2&y.getFunctionFlags(n)?c(n):y.visitFunctionBody(n.body,f,u));case 187:return t=e,y.updateArrowFunction(t,y.visitNodes(t.modifiers,f,y.isModifier),void 0,y.visitParameterList(t.parameters,f,u),void 0,t.equalsGreaterThanToken,2&y.getFunctionFlags(t)?c(t):y.visitFunctionBody(t.body,f,u));default:return y.visitEachChild(e,f,u)}var t,n,o,r,i}function c(e){g();var t=y.getOriginalNode(e,y.isFunctionLike).type,n=_<2?function(e){var t=e&&y.getEntityNameFromTypeNode(e);if(t&&y.isEntityName(t)){var n=d.getTypeReferenceSerializationKind(t);if(n===y.TypeReferenceSerializationKind.TypeWithConstructSignatureAndValue||n===y.TypeReferenceSerializationKind.Unknown)return t}}(t):void 0,o=187===e.kind,r=0!=(8192&d.getNodeCheckFlags(e));if(o){var i=v(u,r,n,h(e.body)),a=p();return y.some(a)?(c=y.convertToFunctionBody(i),y.updateBlock(c,y.setTextRange(y.createNodeArray(y.concatenate(c.statements,a)),c.statements))):i}var s=[],l=y.addPrologue(s,e.body.statements,!1,f);s.push(y.createReturn(v(u,r,n,h(e.body,l)))),y.addRange(s,p());var c=y.createBlock(s,!0);return y.setTextRange(c,e.body),2<=_&&(4096&d.getNodeCheckFlags(e)?(m(),y.addEmitHelper(c,y.advancedAsyncSuperHelper)):2048&d.getNodeCheckFlags(e)&&(m(),y.addEmitHelper(c,y.asyncSuperHelper))),c}function h(e,t){if(y.isBlock(e))return y.updateBlock(e,y.visitLexicalEnvironment(e.statements,f,u,t));r();var n=y.convertToFunctionBody(y.visitNode(e,f,y.isConciseBody)),o=p();return y.updateBlock(n,y.setTextRange(y.createNodeArray(y.concatenate(n.statements,o)),n.statements))}function m(){0==(1&a)&&(a|=1,u.enableSubstitution(181),u.enableSubstitution(179),u.enableSubstitution(180),u.enableEmitNotification(229),u.enableEmitNotification(151),u.enableEmitNotification(153),u.enableEmitNotification(154),u.enableEmitNotification(152))}function o(e){return 97===e.expression.kind?t(y.createLiteral(y.idText(e.name)),e):e}function i(e){return 97===e.expression.kind?t(e.argumentExpression,e):e}function t(e,t){return 4096&s?y.setTextRange(y.createPropertyAccess(y.createCall(y.createIdentifier("_super"),void 0,[e]),"value"),t):y.setTextRange(y.createCall(y.createIdentifier("_super"),void 0,[e]),t)}}),priority:5,text:'\n            var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n                return new (P || (P = Promise))(function (resolve, reject) {\n                    function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n                    function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n                    function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n                    step((generator = generator.apply(thisArg, _arguments || [])).next());\n                });\n            };'};function v(e,t,n,o){e.requestEmitHelper(i);var r=y.createFunctionExpression(void 0,y.createToken(39),void 0,void 0,[],void 0,o);return(r.emitNode||(r.emitNode={})).flags|=786432,y.createCall(y.getHelperName("__awaiter"),void 0,[y.createThis(),t?y.createIdentifier("arguments"):y.createVoidZero(),n?y.createExpressionFromEntityName(n):y.createVoidZero(),r])}y.asyncSuperHelper={name:"typescript:async-super",scoped:!0,text:"\n            const _super = name => super[name];\n        "},y.advancedAsyncSuperHelper={name:"typescript:advanced-async-super",scoped:!0,text:"\n            const _super = (function (geti, seti) {\n                const cache = Object.create(null);\n                return name => cache[name] || (cache[name] = { get value() { return geti(name); }, set value(v) { seti(name, v); } });\n            })(name => super[name], (name, value) => super[name] = value);\n        "}}(ts||(ts={})),function(C){var e,t;(t=e||(e={}))[t.AsyncMethodsWithSuper=1]="AsyncMethodsWithSuper";var n={name:"typescript:assign",scoped:!(C.transformESNext=function(k){var a=k.resumeLexicalEnvironment,s=k.endLexicalEnvironment,T=k.hoistVariableDeclaration,l=k.getEmitResolver(),e=k.getCompilerOptions(),c=C.getEmitScriptTarget(e),u=k.onEmitNode;k.onEmitNode=function(e,t,n){if(1&g&&(229===(i=t.kind)||152===i||151===i||153===i||154===i)){var o=6144&l.getNodeCheckFlags(t);if(o!==p){var r=p;return p=o,u(e,t,n),void(p=r)}}var i;u(e,t,n)};var g,d,n=k.onSubstituteNode;k.onSubstituteNode=function(e,t){return t=n(e,t),1===e&&p?function(e){switch(e.kind){case 179:return o(e);case 180:return r(e);case 181:return function(e){var t=e.expression;if(C.isSuperProperty(t)){var n=C.isPropertyAccessExpression(t)?o(t):r(t);return C.createCall(C.createPropertyAccess(n,"call"),void 0,[C.createThis()].concat(e.arguments))}return e}(e)}return e}(t):t};var p=0;return function(e){if(e.isDeclarationFile)return e;var t=C.visitEachChild(e,E,k);return C.addEmitHelpers(t,k.readEmitHelpers()),t};function E(e){return t(e,!1)}function _(e){return t(e,!0)}function f(e){if(120!==e.kind)return e}function t(e,t){if(0==(8&e.transformFlags))return e;switch(e.kind){case 191:return s=e,2&d&&1&d?C.setOriginalNode(C.setTextRange(C.createYield(D(k,C.visitNode(s.expression,E,C.isExpression))),s),s):C.visitEachChild(s,E,k);case 197:return function(e){if(2&d&&1&d&&e.asteriskToken){var t=C.visitNode(e.expression,E,C.isExpression);return C.setOriginalNode(C.setTextRange(C.createYield(D(k,C.updateYield(e,e.asteriskToken,(o=N(n=k,t,t),r=t,n.requestEmitHelper(A),n.requestEmitHelper(I),C.setTextRange(C.createCall(C.getHelperName("__asyncDelegator"),void 0,[o]),r))))),e),e)}var n,o,r;return C.visitEachChild(e,E,k)}(e);case 222:return function(e){if(2&d&&1&d){var t=C.unwrapInnermostStatementOfLabel(e);return 216===t.kind&&t.awaitModifier?h(t,e):C.restoreEnclosingLabel(C.visitEachChild(e,E,k),e)}return C.visitEachChild(e,E,k)}(e);case 178:return function(e){if(1048576&e.transformFlags){var t=function(e){for(var t,n=[],o=0,r=e;o<r.length;o++){var i=r[o];if(263===i.kind){t&&(n.push(C.createObjectLiteral(t)),t=void 0);var a=i.expression;n.push(C.visitNode(a,E,C.isExpression))}else if(t||(t=[]),261===i.kind){var s=i;t.push(C.createPropertyAssignment(s.name,C.visitNode(s.initializer,E,C.isExpression)))}else t.push(C.visitNode(i,E,C.isObjectLiteralElementLike))}return t&&n.push(C.createObjectLiteral(t)),n}(e.properties);return t.length&&178!==t[0].kind&&t.unshift(C.createObjectLiteral()),x(k,t)}return C.visitEachChild(e,E,k)}(e);case 194:return i=e,a=t,C.isDestructuringAssignment(i)&&1048576&i.left.transformFlags?C.flattenDestructuringAssignment(i,E,k,1,!a):26===i.operatorToken.kind?C.updateBinary(i,C.visitNode(i.left,_,C.isExpression),C.visitNode(i.right,a?_:E,C.isExpression)):C.visitEachChild(i,E,k);case 226:return r=e,C.isBindingPattern(r.name)&&1048576&r.name.transformFlags?C.flattenDestructuringBinding(r,E,k,1):C.visitEachChild(r,E,k);case 216:return h(e,void 0);case 214:return p=e,C.updateFor(p,C.visitNode(p.initializer,_,C.isForInitializer),C.visitNode(p.condition,E,C.isExpression),C.visitNode(p.incrementor,E,C.isExpression),C.visitNode(p.statement,E,C.isStatement));case 190:return g=e,C.visitEachChild(g,_,k);case 152:return function(e){var t=d;d=0;var n=C.updateConstructor(e,void 0,e.modifiers,C.visitParameterList(e.parameters,E,k),y(e));return d=t,n}(e);case 151:return function(e){var t=d;d=C.getFunctionFlags(e);var n=C.updateMethod(e,void 0,1&d?C.visitNodes(e.modifiers,f,C.isModifier):e.modifiers,2&d?void 0:e.asteriskToken,C.visitNode(e.name,E,C.isPropertyName),C.visitNode(void 0,E,C.isToken),void 0,C.visitParameterList(e.parameters,E,k),void 0,2&d&&1&d?m(e):y(e));return d=t,n}(e);case 153:return function(e){var t=d;d=0;var n=C.updateGetAccessor(e,void 0,e.modifiers,C.visitNode(e.name,E,C.isPropertyName),C.visitParameterList(e.parameters,E,k),void 0,y(e));return d=t,n}(e);case 154:return function(e){var t=d;d=0;var n=C.updateSetAccessor(e,void 0,e.modifiers,C.visitNode(e.name,E,C.isPropertyName),C.visitParameterList(e.parameters,E,k),y(e));return d=t,n}(e);case 228:return function(e){var t=d;d=C.getFunctionFlags(e);var n=C.updateFunctionDeclaration(e,void 0,1&d?C.visitNodes(e.modifiers,f,C.isModifier):e.modifiers,2&d?void 0:e.asteriskToken,e.name,void 0,C.visitParameterList(e.parameters,E,k),void 0,2&d&&1&d?m(e):y(e));return d=t,n}(e);case 186:return function(e){var t=d;d=C.getFunctionFlags(e);var n=C.updateFunctionExpression(e,1&d?C.visitNodes(e.modifiers,f,C.isModifier):e.modifiers,2&d?void 0:e.asteriskToken,e.name,void 0,C.visitParameterList(e.parameters,E,k),void 0,2&d&&1&d?m(e):y(e));return d=t,n}(e);case 187:return function(e){var t=d;d=C.getFunctionFlags(e);var n=C.updateArrowFunction(e,e.modifiers,void 0,C.visitParameterList(e.parameters,E,k),void 0,e.equalsGreaterThanToken,y(e));return d=t,n}(e);case 146:return 1048576&(o=e).transformFlags?C.updateParameter(o,void 0,void 0,o.dotDotDotToken,C.getGeneratedNameForNode(o),void 0,void 0,C.visitNode(o.initializer,E,C.isExpression)):C.visitEachChild(o,E,k);case 210:return u=e,C.visitEachChild(u,_,k);case 185:return l=e,c=t,C.visitEachChild(l,c?_:E,k);case 260:return(n=e).variableDeclaration?C.visitEachChild(n,E,k):C.updateCatchClause(n,C.createVariableDeclaration(C.createTempVariable(void 0)),C.visitNode(n.block,E,C.isBlock));default:return C.visitEachChild(e,E,k)}var n,o,r,i,a,s,l,c,u,g,p}function h(e,t){return 1048576&e.initializer.transformFlags&&(e=function(e){var t=C.skipParentheses(e.initializer);if(C.isVariableDeclarationList(t)||C.isAssignmentPattern(t)){var n=void 0,o=void 0,r=C.createTempVariable(void 0),i=[C.createForOfBindingStatement(t,r)];return C.isBlock(e.statement)&&(C.addRange(i,e.statement.statements),n=e.statement,o=e.statement.statements),C.updateForOf(e,e.awaitModifier,C.setTextRange(C.createVariableDeclarationList([C.setTextRange(C.createVariableDeclaration(r),e.initializer)],1),e.initializer),e.expression,C.setTextRange(C.createBlock(C.setTextRange(C.createNodeArray(i),o),!0),n))}return e}(e)),e.awaitModifier?function(e,t){var n=C.visitNode(e.expression,E,C.isExpression),o=C.isIdentifier(n)?C.getGeneratedNameForNode(n):C.createTempVariable(void 0),r=C.isIdentifier(n)?C.getGeneratedNameForNode(o):C.createTempVariable(void 0),i=C.createUniqueName("e"),a=C.getGeneratedNameForNode(i),s=C.createTempVariable(void 0),l=N(k,n,e.expression),c=C.createCall(C.createPropertyAccess(o,"next"),void 0,[]),u=C.createPropertyAccess(r,"done"),g=C.createPropertyAccess(r,"value"),p=C.createFunctionCall(s,o,[]);T(i),T(s);var d,_,f,h,m,y,v,b=C.setEmitFlags(C.setTextRange(C.createFor(C.setEmitFlags(C.setTextRange(C.createVariableDeclarationList([C.setTextRange(C.createVariableDeclaration(o,void 0,l),e.expression),C.createVariableDeclaration(r)]),e.expression),2097152),C.createComma(C.createAssignment(r,S(c)),C.createLogicalNot(u)),void 0,(d=e,_=S(g),m=C.createForOfBindingStatement(d.initializer,_),y=[C.visitNode(m,E,C.isStatement)],v=C.visitNode(d.statement,E,C.isStatement),C.isBlock(v)?(C.addRange(y,v.statements),h=(f=v).statements):y.push(v),C.setEmitFlags(C.setTextRange(C.createBlock(C.setTextRange(C.createNodeArray(y),h),!0),f),432))),e),256);return C.createTry(C.createBlock([C.restoreEnclosingLabel(b,t)]),C.createCatchClause(C.createVariableDeclaration(a),C.setEmitFlags(C.createBlock([C.createStatement(C.createAssignment(i,C.createObjectLiteral([C.createPropertyAssignment("error",a)])))]),1)),C.createBlock([C.createTry(C.createBlock([C.setEmitFlags(C.createIf(C.createLogicalAnd(C.createLogicalAnd(r,C.createLogicalNot(u)),C.createAssignment(s,C.createPropertyAccess(o,"return"))),C.createStatement(S(p))),1)]),void 0,C.setEmitFlags(C.createBlock([C.setEmitFlags(C.createIf(i,C.createThrow(C.createPropertyAccess(i,"error"))),1)]),1))]))}(e,t):C.restoreEnclosingLabel(C.visitEachChild(e,E,k),t)}function S(e){return 1&d?C.createYield(void 0,D(k,e)):C.createAwait(e)}function m(e){a();var t,n,o=[],r=C.addPrologue(o,e.body.statements,!1,E);v(o,e),o.push(C.createReturn((t=k,n=C.createFunctionExpression(void 0,C.createToken(39),e.name&&C.getGeneratedNameForNode(e.name),void 0,[],void 0,C.updateBlock(e.body,C.visitLexicalEnvironment(e.body.statements,E,k,r))),t.requestEmitHelper(A),t.requestEmitHelper(B),(n.emitNode||(n.emitNode={})).flags|=262144,C.createCall(C.getHelperName("__asyncGenerator"),void 0,[C.createThis(),C.createIdentifier("arguments"),n])))),C.addRange(o,s());var i=C.updateBlock(e.body,o);return 2<=c&&(4096&l.getNodeCheckFlags(e)?(b(),C.addEmitHelper(i,C.advancedAsyncSuperHelper)):2048&l.getNodeCheckFlags(e)&&(b(),C.addEmitHelper(i,C.asyncSuperHelper))),i}function y(e){a();var t=0,n=[],o=C.visitNode(e.body,E,C.isConciseBody);C.isBlock(o)&&(t=C.addPrologue(n,o.statements,!1,E)),C.addRange(n,v(void 0,e));var r=s();if(0<t||C.some(n)||C.some(r)){var i=C.convertToFunctionBody(o,!0);return C.addRange(n,i.statements.slice(t)),C.addRange(n,r),C.updateBlock(i,C.setTextRange(C.createNodeArray(n),i.statements))}return o}function v(e,t){for(var n=0,o=t.parameters;n<o.length;n++){var r=o[n];if(1048576&r.transformFlags){var i=C.getGeneratedNameForNode(r),a=C.flattenDestructuringBinding(r,E,k,1,i,!1,!0);if(C.some(a)){var s=C.createVariableStatement(void 0,C.createVariableDeclarationList(a));C.setEmitFlags(s,1048576),e=C.append(e,s)}}}return e}function b(){0==(1&g)&&(g|=1,k.enableSubstitution(181),k.enableSubstitution(179),k.enableSubstitution(180),k.enableEmitNotification(229),k.enableEmitNotification(151),k.enableEmitNotification(153),k.enableEmitNotification(154),k.enableEmitNotification(152))}function o(e){return 97===e.expression.kind?i(C.createLiteral(C.idText(e.name)),e):e}function r(e){return 97===e.expression.kind?i(e.argumentExpression,e):e}function i(e,t){return 4096&p?C.setTextRange(C.createPropertyAccess(C.createCall(C.createIdentifier("_super"),void 0,[e]),"value"),t):C.setTextRange(C.createCall(C.createIdentifier("_super"),void 0,[e]),t)}}),priority:1,text:"\n            var __assign = (this && this.__assign) || Object.assign || function(t) {\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\n                    s = arguments[i];\n                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                        t[p] = s[p];\n                }\n                return t;\n            };"};function x(e,t){return 2<=e.getCompilerOptions().target?C.createCall(C.createPropertyAccess(C.createIdentifier("Object"),"assign"),void 0,t):(e.requestEmitHelper(n),C.createCall(C.getHelperName("__assign"),void 0,t))}C.createAssignHelper=x;var A={name:"typescript:await",scoped:!1,text:"\n            var __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\n        "};function D(e,t){return e.requestEmitHelper(A),C.createCall(C.getHelperName("__await"),void 0,[t])}var B={name:"typescript:asyncGenerator",scoped:!1,text:'\n            var __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n                if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");\n                var g = generator.apply(thisArg, _arguments || []), i, q = [];\n                return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;\n                function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n                function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n                function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\n                function fulfill(value) { resume("next", value); }\n                function reject(value) { resume("throw", value); }\n                function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n            };\n        '};var I={name:"typescript:asyncDelegator",scoped:!1,text:'\n            var __asyncDelegator = (this && this.__asyncDelegator) || function (o) {\n                var i, p;\n                return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;\n                function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; }; }\n            };\n        '};var o={name:"typescript:asyncValues",scoped:!1,text:'\n            var __asyncValues = (this && this.__asyncIterator) || function (o) {\n                if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");\n                var m = o[Symbol.asyncIterator];\n                return m ? m.call(o) : typeof __values === "function" ? __values(o) : o[Symbol.iterator]();\n            };\n        '};function N(e,t,n){return e.requestEmitHelper(o),C.setTextRange(C.createCall(C.getHelperName("__asyncValues"),void 0,[t]),n)}}(ts||(ts={})),function(_){_.transformJsx=function(c){var u=c.getCompilerOptions();return function(e){if(e.isDeclarationFile)return e;var t=_.visitEachChild(e,n,c);return _.addEmitHelpers(t,c.readEmitHelpers()),t};function n(e){return 4&e.transformFlags?function(e){switch(e.kind){case 249:return o(e,!1);case 250:return r(e,!1);case 256:return l(e);default:return _.visitEachChild(e,n,c)}}(e):e}function g(e){switch(e.kind){case 10:return t=e,void 0===(n=function(e){for(var t,n=0,o=-1,r=0;r<e.length;r++){var i=e.charCodeAt(r);_.isLineBreak(i)?(-1!==n&&-1!==o&&(t=a(t,e.substr(n,o-n+1))),n=-1):_.isWhiteSpaceSingleLine(i)||(o=r,-1===n&&(n=r))}return-1!==n?a(t,e.substr(n)):t}(_.getTextOfNode(t,!0)))?void 0:_.createLiteral(n);case 256:return l(e);case 249:return o(e,!0);case 250:return r(e,!0);default:return void _.Debug.failBadSyntaxKind(e)}var t,n}function o(e,t){return i(e.openingElement,e.children,t,e)}function r(e,t){return i(e,void 0,t,e)}function i(e,t,n,o){var r,i=function e(t){if(249===t.kind)return e(t.openingElement);var n=t.tagName;return _.isIdentifier(n)&&_.isIntrinsicJsxName(n.escapedText)?_.createLiteral(_.idText(n)):_.createExpressionFromEntityName(n)}(e),a=e.attributes.properties;if(0===a.length)r=_.createNull();else{var s=_.flatten(_.spanMap(a,_.isJsxSpreadAttribute,function(e,t){return t?_.map(e,p):_.createObjectLiteral(_.map(e,d))}));_.isJsxSpreadAttribute(a[0])&&s.unshift(_.createObjectLiteral()),(r=_.singleOrUndefined(s))||(r=_.createAssignHelper(c,s))}var l=_.createExpressionForJsxElement(c.getEmitResolver().getJsxFactoryEntity(),u.reactNamespace,i,r,_.mapDefined(t,g),e,o);return n&&_.startOnNewLine(l),l}function p(e){return _.visitNode(e.expression,n,_.isExpression)}function d(e){var t,n,o=(t=e.name,n=_.idText(t),/^[A-Za-z_]\w*$/.test(n)?t:_.createLiteral(n)),r=function(e){if(void 0===e)return _.createTrue();if(9===e.kind){var t=(n=e.text,(o=s(n))===n?void 0:o);return t?_.setTextRange(_.createLiteral(t),e):e}if(256===e.kind)return void 0===e.expression?_.createTrue():l(e);var n,o;_.Debug.failBadSyntaxKind(e)}(e.initializer);return _.createPropertyAssignment(o,r)}function a(e,t){var n=s(t);return void 0===e?n:e+" "+n}function s(e){return e.replace(/&((#((\d+)|x([\da-fA-F]+)))|(\w+));/g,function(e,t,n,o,r,i,a){if(r)return String.fromCharCode(parseInt(r,10));if(i)return String.fromCharCode(parseInt(i,16));var s=f.get(a);return s?String.fromCharCode(s):e})}function l(e){return _.visitNode(e.expression,n,_.isExpression)}};var f=_.createMapFromTemplate({quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830})}(ts||(ts={})),function(c){c.transformES2016=function(r){var s=r.hoistVariableDeclaration;return function(e){return e.isDeclarationFile?e:c.visitEachChild(e,l,r)};function l(e){if(0==(32&e.transformFlags))return e;switch(e.kind){case 194:return function(e){switch(e.operatorToken.kind){case 62:return function(e){var t,n,o=c.visitNode(e.left,l,c.isExpression),r=c.visitNode(e.right,l,c.isExpression);if(c.isElementAccessExpression(o)){var i=c.createTempVariable(s),a=c.createTempVariable(s);t=c.setTextRange(c.createElementAccess(c.setTextRange(c.createAssignment(i,o.expression),o.expression),c.setTextRange(c.createAssignment(a,o.argumentExpression),o.argumentExpression)),o),n=c.setTextRange(c.createElementAccess(i,a),o)}else if(c.isPropertyAccessExpression(o)){var i=c.createTempVariable(s);t=c.setTextRange(c.createPropertyAccess(c.setTextRange(c.createAssignment(i,o.expression),o.expression),o.name),o),n=c.setTextRange(c.createPropertyAccess(i,o.name),o)}else n=t=o;return c.setTextRange(c.createAssignment(t,c.createMathPow(n,r,e)),e)}(e);case 40:return t=e,n=c.visitNode(t.left,l,c.isExpression),o=c.visitNode(t.right,l,c.isExpression),c.createMathPow(n,o,t);default:return c.visitEachChild(e,l,r)}var t,n,o}(e);default:return c.visitEachChild(e,l,r)}}}}(ts||(ts={})),function(he){var e,t,n,o,r,i,a,s,l,c;(t=e||(e={}))[t.CapturedThis=1]="CapturedThis",t[t.BlockScopedBindings=2]="BlockScopedBindings",(o=n||(n={}))[o.ToOriginal=0]="ToOriginal",o[o.ToOutParameter=1]="ToOutParameter",(i=r||(r={}))[i.Break=2]="Break",i[i.Continue=4]="Continue",i[i.Return=8]="Return",(s=a||(a={}))[s.NoReplacement=0]="NoReplacement",s[s.ReplaceSuperCapture=1]="ReplaceSuperCapture",s[s.ReplaceWithReturn=2]="ReplaceWithReturn",(c=l||(l={}))[c.None=0]="None",c[c.Function=1]="Function",c[c.ArrowFunction=2]="ArrowFunction",c[c.AsyncFunctionBody=4]="AsyncFunctionBody",c[c.NonStaticClassElement=8]="NonStaticClassElement",c[c.CapturesThis=16]="CapturesThis",c[c.ExportedVariableStatement=32]="ExportedVariableStatement",c[c.TopLevel=64]="TopLevel",c[c.Block=128]="Block",c[c.IterationStatement=256]="IterationStatement",c[c.IterationStatementBlock=512]="IterationStatementBlock",c[c.ForStatement=1024]="ForStatement",c[c.ForInOrForOfStatement=2048]="ForInOrForOfStatement",c[c.ConstructorWithCapturedSuper=4096]="ConstructorWithCapturedSuper",c[c.ComputedPropertyName=8192]="ComputedPropertyName",c[c.AncestorFactsMask=16383]="AncestorFactsMask",c[c.BlockScopeIncludes=0]="BlockScopeIncludes",c[c.BlockScopeExcludes=4032]="BlockScopeExcludes",c[c.SourceFileIncludes=64]="SourceFileIncludes",c[c.SourceFileExcludes=3968]="SourceFileExcludes",c[c.FunctionIncludes=65]="FunctionIncludes",c[c.FunctionExcludes=16286]="FunctionExcludes",c[c.AsyncFunctionBodyIncludes=69]="AsyncFunctionBodyIncludes",c[c.AsyncFunctionBodyExcludes=16278]="AsyncFunctionBodyExcludes",c[c.ArrowFunctionIncludes=66]="ArrowFunctionIncludes",c[c.ArrowFunctionExcludes=16256]="ArrowFunctionExcludes",c[c.ConstructorIncludes=73]="ConstructorIncludes",c[c.ConstructorExcludes=16278]="ConstructorExcludes",c[c.DoOrWhileStatementIncludes=256]="DoOrWhileStatementIncludes",c[c.DoOrWhileStatementExcludes=0]="DoOrWhileStatementExcludes",c[c.ForStatementIncludes=1280]="ForStatementIncludes",c[c.ForStatementExcludes=3008]="ForStatementExcludes",c[c.ForInOrForOfStatementIncludes=2304]="ForInOrForOfStatementIncludes",c[c.ForInOrForOfStatementExcludes=1984]="ForInOrForOfStatementExcludes",c[c.BlockIncludes=128]="BlockIncludes",c[c.BlockExcludes=3904]="BlockExcludes",c[c.IterationStatementBlockIncludes=512]="IterationStatementBlockIncludes",c[c.IterationStatementBlockExcludes=4032]="IterationStatementBlockExcludes",c[c.ComputedPropertyNameIncludes=8192]="ComputedPropertyNameIncludes",c[c.ComputedPropertyNameExcludes=0]="ComputedPropertyNameExcludes",c[c.NewTarget=16384]="NewTarget",c[c.NewTargetInComputedPropertyName=32768]="NewTargetInComputedPropertyName",c[c.SubtreeFactsMask=-16384]="SubtreeFactsMask",c[c.PropagateNewTargetMask=49152]="PropagateNewTargetMask";var me={name:"typescript:extends",scoped:!(he.transformES2015=function(w){var b,d,O,k,R,r,L=w.startLexicalEnvironment,_=w.resumeLexicalEnvironment,P=w.endLexicalEnvironment,T=w.hoistVariableDeclaration,l=w.getCompilerOptions(),E=w.getEmitResolver(),n=w.onSubstituteNode,i=w.onEmitNode;return w.onEmitNode=function(e,t,n){if(1&r&&he.isFunctionLike(t)){var o=S(16286,8&he.getEmitFlags(t)?81:65);return i(e,t,n),void C(o,0,0)}i(e,t,n)},w.onSubstituteNode=function(e,t){return t=n(e,t),1===e?function(e){switch(e.kind){case 71:return function(e){if(2&r&&!he.isInternalName(e)){var t=E.getReferencedDeclarationWithCollidingName(e);if(t&&(!he.isClassLike(t)||!function(e,t){var n=he.getParseTreeNode(t);if(!n||n===e||n.end<=e.pos||n.pos>=e.end)return!1;for(var o=he.getEnclosingBlockScopeContainer(e);n;){if(n===o||n===e)return!1;if(he.isClassElement(n)&&n.parent===e)return!0;n=n.parent}return!1}(t,e)))return he.setTextRange(he.getGeneratedNameForNode(he.getNameOfDeclaration(t)),e)}return e}(e);case 99:return t=e,1&r&&16&O?he.setTextRange(he.createIdentifier("_this"),t):t}var t;return e}(t):he.isIdentifier(t)?function(e){if(2&r&&!he.isInternalName(e)){var t=he.getParseTreeNode(e,he.isIdentifier);if(t&&function(e){var t=e.parent;switch(t.kind){case 176:case 229:case 232:case 226:return t.name===e&&E.isDeclarationWithCollidingName(t)}return!1}(t))return he.setTextRange(he.getGeneratedNameForNode(t),e)}return e}(t):t},function(e){if(e.isDeclarationFile)return e;d=(b=e).text;var t=function(e){var t=S(3968,64),n=[];L();var o=he.addStandardPrologue(n,e.statements,!1);return v(n,e),o=he.addCustomPrologue(n,e.statements,o,M),he.addRange(n,he.visitNodes(e.statements,M,he.isStatement,o)),k&&n.push(he.createVariableStatement(void 0,he.createVariableDeclarationList(k))),he.addRange(n,P()),C(t,0,0),he.updateSourceFileNode(e,he.setTextRange(he.createNodeArray(n),e.statements))}(e);return he.addEmitHelpers(t,w.readEmitHelpers()),k=d=b=void 0,O=0,t};function S(e,t){var n=O;return O=16383&(O&~e|t),n}function C(e,t,n){O=-16384&(O&~t|n)|e}function x(e){return 4096&O&&219===e.kind&&!e.expression}function t(e){return 0!=(128&e.transformFlags)||void 0!==R||4096&O&&(he.isStatement(e)||207===e.kind)||he.isIterationStatement(e,!1)&&te(e)||0!=(33554432&he.getEmitFlags(e))}function M(e){return t(e)?function(e){switch(e.kind){case 115:return;case 229:return function(e){var t=he.createVariableDeclaration(he.getLocalName(e,!0),void 0,B(e));he.setOriginalNode(t,e);var n=[],o=he.createVariableStatement(void 0,he.createVariableDeclarationList([t]));if(he.setOriginalNode(o,e),he.setTextRange(o,e),he.startOnNewLine(o),n.push(o),he.hasModifier(e,1)){var r=he.hasModifier(e,512)?he.createExportDefault(he.getLocalName(e)):he.createExternalModuleExport(he.getLocalName(e));he.setOriginalNode(r,o),n.push(r)}var i=he.getEmitFlags(e);return 0==(4194304&i)&&(n.push(he.createEndOfDeclarationMarker(e)),he.setEmitFlags(o,4194304|i)),he.singleOrMany(n)}(e);case 199:return B(e);case 146:return(v=e).dotDotDotToken?void 0:he.isBindingPattern(v.name)?he.setOriginalNode(he.setTextRange(he.createParameter(void 0,void 0,void 0,he.getGeneratedNameForNode(v),void 0,void 0,void 0),v),v):v.initializer?he.setOriginalNode(he.setTextRange(he.createParameter(void 0,void 0,void 0,v.name,void 0,void 0,void 0),v),v):v;case 228:return function(e){var t=R;R=void 0;var n=S(16286,65),o=he.visitParameterList(e.parameters,M,w),r=64&e.transformFlags?G(e):V(e),i=16384&O?he.getLocalName(e):e.name;return C(n,49152,0),R=t,he.updateFunctionDeclaration(e,void 0,he.visitNodes(e.modifiers,M,he.isModifier),e.asteriskToken,i,void 0,o,void 0,r)}(e);case 187:return function(e){16384&e.transformFlags&&_e();var t=R;R=void 0;var n=S(16256,66),o=he.createFunctionExpression(void 0,void 0,void 0,void 0,he.visitParameterList(e.parameters,M,w),void 0,G(e));return he.setTextRange(o,e),he.setOriginalNode(o,e),he.setEmitFlags(o,8),C(n,0,0),R=t,o}(e);case 186:return function(e){var t=262144&he.getEmitFlags(e)?S(16278,69):S(16286,65),n=R;R=void 0;var o=he.visitParameterList(e.parameters,M,w),r=64&e.transformFlags?G(e):V(e),i=16384&O?he.getLocalName(e):e.name;return C(t,49152,0),R=n,he.updateFunctionExpression(e,void 0,e.asteriskToken,i,void 0,o,void 0,r)}(e);case 226:return Y(e);case 71:return l=e,R?he.isGeneratedIdentifier(l)?l:"arguments"===l.escapedText&&E.isArgumentsLocalBinding(l)?R.argumentsName||(R.argumentsName=he.createUniqueName("arguments")):l:l;case 227:return function(e){if(64&e.transformFlags){3&e.flags&&de();var t=he.flatMap(e.declarations,1&e.flags?j:Y),n=he.createVariableDeclarationList(t);if(he.setOriginalNode(n,e),he.setTextRange(n,e),he.setCommentRange(n,e),8388608&e.transformFlags&&(he.isBindingPattern(e.declarations[0].name)||he.isBindingPattern(he.lastOrUndefined(e.declarations).name))){var o=he.firstOrUndefined(t);if(o){var r=he.lastOrUndefined(t);he.setSourceMapRange(n,he.createRange(o.pos,r.end))}}return n}return he.visitEachChild(e,M,w)}(e);case 221:return function(e){if(void 0!==R){var t=R.allowedNonLabeledJumps;R.allowedNonLabeledJumps|=2;var n=he.visitEachChild(e,M,w);return R.allowedNonLabeledJumps=t,n}return he.visitEachChild(e,M,w)}(e);case 235:return h=e,m=S(4032,0),y=he.visitEachChild(h,M,w),C(m,0,0),y;case 207:return W(e,!1);case 218:case 217:return function(e){if(R){var t=218===e.kind?2:4,n=e.label&&R.labels&&R.labels.get(he.idText(e.label))||!e.label&&R.allowedNonLabeledJumps&t;if(!n){var o=void 0;e.label?218===e.kind?(o="break-"+e.label.escapedText,re(R,!0,he.idText(e.label),o)):(o="continue-"+e.label.escapedText,re(R,!1,he.idText(e.label),o)):218===e.kind?(R.nonLocalJumps|=2,o="break"):(R.nonLocalJumps|=4,o="continue");var r=he.createLiteral(o);if(R.loopOutParameters.length){for(var i=R.loopOutParameters,a=void 0,s=0;s<i.length;s++){var l=ne(i[s],1);a=0===s?l:he.createBinary(a,26,l)}r=he.createBinary(a,26,r)}return he.createReturn(r)}}return he.visitEachChild(e,M,w)}(e);case 222:return function(e){R&&!R.labels&&(R.labels=he.createMap());var t=he.unwrapInnermostStatementOfLabel(e,R&&X);return he.isIterationStatement(t,!1)?function(e,t){switch(e.kind){case 212:case 213:return q(e,t);case 214:return Z(e,t);case 215:return $(e,t);case 216:return Q(e,t)}}(t,e):he.restoreEnclosingLabel(he.visitNode(t,M,he.isStatement),e,R&&J)}(e);case 212:case 213:return q(e,void 0);case 214:return Z(e,void 0);case 215:return $(e,void 0);case 216:return Q(e,void 0);case 210:return function(e){switch(e.expression.kind){case 185:return he.updateStatement(e,K(e.expression,!1));case 194:return he.updateStatement(e,z(e.expression,!1))}return he.visitEachChild(e,M,w)}(e);case 178:return function(e){for(var t=e.properties,n=t.length,o=n,r=n,i=0;i<n;i++){var a=t[i];if(16777216&a.transformFlags&&4&O&&i<r&&(r=i),144===a.name.kind){o=i;break}}if(o!==n){r<o&&(o=r);var s=he.createTempVariable(T),l=[],c=he.createAssignment(s,he.setEmitFlags(he.createObjectLiteral(he.visitNodes(t,M,he.isObjectLiteralElementLike,0,o),e.multiLine),65536));return e.multiLine&&(c.startsOnNewLine=!0),l.push(c),function(e,t,n,o){for(var r=t.properties,i=r.length,a=o;a<i;a++){var s=r[a];switch(s.kind){case 153:case 154:var l=he.getAllAccessorDeclarations(t.properties,s);s===l.firstAccessor&&e.push(U(n,l,t,t.multiLine));break;case 151:e.push((m=s,y=n,b=(v=t).multiLine,T=void 0,k=S(0,0),T=he.createAssignment(he.createMemberAccessForPropertyName(y,he.visitNode(m.name,M,he.isPropertyName)),H(m,m,void 0,v)),he.setTextRange(T,m),b&&(T.startsOnNewLine=!0),C(k,49152,49152&O?16384:0),T));break;case 261:e.push((d=s,_=n,f=t.multiLine,h=void 0,h=he.createAssignment(he.createMemberAccessForPropertyName(_,he.visitNode(d.name,M,he.isPropertyName)),he.visitNode(d.initializer,M,he.isExpression)),he.setTextRange(h,d),f&&(h.startsOnNewLine=!0),h));break;case 262:e.push((c=s,u=n,g=t.multiLine,p=void 0,p=he.createAssignment(he.createMemberAccessForPropertyName(u,he.visitNode(c.name,M,he.isPropertyName)),he.getSynthesizedClone(c.name)),he.setTextRange(p,c),g&&(p.startsOnNewLine=!0),p));break;default:he.Debug.failBadSyntaxKind(t)}}var c,u,g,p,d,_,f,h,m,y,v,b,k,T}(l,e,s,o),l.push(e.multiLine?he.startOnNewLine(he.getMutableClone(s)):s),he.inlineExpressions(l)}return he.visitEachChild(e,M,w)}(e);case 260:return function(e){var t,n,o,r,i=S(4032,0);if(he.Debug.assert(!!e.variableDeclaration,"Catch clause variable should always be present when downleveling ES2015."),he.isBindingPattern(e.variableDeclaration.name)){var a=he.createTempVariable(void 0),s=he.createVariableDeclaration(a);he.setTextRange(s,e.variableDeclaration);var l=he.flattenDestructuringBinding(e.variableDeclaration,M,w,0,a),c=he.createVariableDeclarationList(l);he.setTextRange(c,e.variableDeclaration);var u=he.createVariableStatement(void 0,c);t=he.updateCatchClause(e,s,(n=e.block,o=u,r=he.visitNodes(n.statements,M,he.isStatement),he.updateBlock(n,[o].concat(r))))}else t=he.visitEachChild(e,M,w);return C(i,0,0),t}(e);case 262:return f=e,he.setTextRange(he.createPropertyAssignment(f.name,he.getSynthesizedClone(f.name)),f);case 144:return p=e,d=S(0,8192),_=he.visitEachChild(p,M,w),C(d,49152,49152&O?32768:0),_;case 177:return 64&(s=e).transformFlags?le(s.elements,!0,s.multiLine,s.elements.hasTrailingComma):he.visitEachChild(s,M,w);case 181:return a=e,33554432&he.getEmitFlags(a)?function(e){var t=he.cast(he.cast(he.skipOuterExpressions(e.expression),he.isArrowFunction).body,he.isBlock),n=he.visitNodes(t.statements,M,he.isStatement,0,1),o=he.visitNodes(t.statements,M,he.isStatement,1,t.statements.length-1),r=he.cast(he.firstOrUndefined(n),he.isVariableStatement).declarationList.declarations[0],i=he.skipOuterExpressions(r.initializer),a=he.tryCast(i,he.isAssignmentExpression),s=he.cast(a?he.skipOuterExpressions(a.right):i,he.isCallExpression),l=he.cast(he.skipOuterExpressions(s.expression),he.isFunctionExpression),c=l.body.statements,u=0,g=-1,p=[];if(a){var d=he.tryCast(c[u],he.isExpressionStatement);d&&(p.push(d),u++),p.push(c[u]),u++,p.push(he.createStatement(he.createAssignment(a.left,he.cast(r.name,he.isIdentifier))))}for(;!he.isReturnStatement(he.elementAt(c,g));)g--;return he.addRange(p,c,u,g),g<-1&&he.addRange(p,c,g+1),he.addRange(p,o),he.addRange(p,n,1),he.recreateOuterExpressions(e.expression,he.recreateOuterExpressions(r.initializer,he.recreateOuterExpressions(a&&a.right,he.updateCall(s,he.recreateOuterExpressions(s.expression,he.updateFunctionExpression(l,void 0,void 0,void 0,void 0,l.parameters,void 0,he.updateBlock(l.body,p))),void 0,s.arguments))))}(a):64&a.transformFlags?se(a,!0):he.updateCall(a,he.visitNode(a.expression,A,he.isExpression),void 0,he.visitNodes(a.arguments,M,he.isExpression));case 182:return function(e){if(524288&e.transformFlags){var t=he.createCallBinding(he.createPropertyAccess(e.expression,"bind"),T),n=t.target,o=t.thisArg;return he.createNew(he.createFunctionApply(he.visitNode(n,M,he.isExpression),o,le(he.createNodeArray([he.createVoidZero()].concat(e.arguments)),!1,!1,!1)),void 0,[])}return he.visitEachChild(e,M,w)}(e);case 185:return K(e,!0);case 194:return z(e,!0);case 13:case 14:case 15:case 16:return g=e,he.setTextRange(he.createLiteral(g.text),g);case 9:return(i=e).hasExtendedUnicodeEscape?he.setTextRange(he.createLiteral(i.text),i):i;case 8:return 48&(r=e).numericLiteralFlags?he.setTextRange(he.createNumericLiteral(r.text),r):r;case 183:return function(e){var t=he.visitNode(e.tag,M,he.isExpression),n=[void 0],o=[],r=[],i=e.template;if(he.isNoSubstitutionTemplateLiteral(i))o.push(he.createLiteral(i.text)),r.push(ge(i));else{o.push(he.createLiteral(i.head.text)),r.push(ge(i.head));for(var a=0,s=i.templateSpans;a<s.length;a++){var l=s[a];o.push(he.createLiteral(l.literal.text)),r.push(ge(l.literal)),n.push(he.visitNode(l.expression,M,he.isExpression))}}var c,u,g,p,d=(c=w,u=he.createArrayLiteral(o),g=he.createArrayLiteral(r),c.requestEmitHelper(ye),he.createCall(he.getHelperName("__makeTemplateObject"),void 0,[u,g]));if(he.isExternalModule(b)){var _=he.createUniqueName("templateObject");p=_,k=he.append(k,he.createVariableDeclaration(p)),n[0]=he.createLogicalOr(_,he.createAssignment(_,d))}else n[0]=d;return he.createCall(t,void 0,n)}(e);case 196:return function(e){var t,n,o,r=[];t=r,o=n=e,he.Debug.assert(0!==o.templateSpans.length),(0!==o.head.text.length||0===o.templateSpans[0].literal.text.length)&&t.push(he.createLiteral(n.head.text)),function(e,t){for(var n=0,o=t.templateSpans;n<o.length;n++){var r=o[n];e.push(he.visitNode(r.expression,M,he.isExpression)),0!==r.literal.text.length&&e.push(he.createLiteral(r.literal.text))}}(r,e);var i=he.reduceLeft(r,he.createAdd);return he.nodeIsSynthesized(i)&&(i.pos=e.pos,i.end=e.end),i}(e);case 197:return u=e,he.visitEachChild(u,M,w);case 198:return c=e,he.visitNode(c.expression,M,he.isExpression);case 97:return pe(!1);case 99:return o=e,R?2&O?(R.containsLexicalThis=!0,o):R.thisName||(R.thisName=he.createUniqueName("this")):o;case 204:return 94===(n=e).keywordToken&&"target"===n.name.escapedText?(O|=8192&O?32768:16384,he.createIdentifier("_newTarget")):n;case 151:return function(e){he.Debug.assert(!he.isComputedPropertyName(e.name));var t=H(e,he.moveRangePos(e,-1),void 0,void 0);return he.setEmitFlags(t,512|he.getEmitFlags(t)),he.setTextRange(he.createPropertyAssignment(e.name,t),e)}(e);case 153:case 154:return function(e){he.Debug.assert(!he.isComputedPropertyName(e.name));var t=R;R=void 0;var n,o=S(16286,65);if(32768&e.transformFlags){var r=he.visitParameterList(e.parameters,M,w),i=G(e);n=153===e.kind?he.updateGetAccessor(e,e.decorators,e.modifiers,e.name,r,e.type,i):he.updateSetAccessor(e,e.decorators,e.modifiers,e.name,r,i)}else n=he.visitEachChild(e,M,w);return C(o,49152,0),R=t,n}(e);case 208:return function(e){var t,i,n,o=S(0,he.hasModifier(e,1)?32:0);if(R&&0==(3&e.declarationList.flags)){for(var r=void 0,a=0,s=e.declarationList.declarations;a<s.length;a++){var l=s[a];if(n=l,(i=R).hoistedLocalVariables||(i.hoistedLocalVariables=[]),function e(t){if(71===t.kind)i.hoistedLocalVariables.push(t);else for(var n=0,o=t.elements;n<o.length;n++){var r=o[n];he.isOmittedExpression(r)||e(r.name)}}(n.name),l.initializer){var c=void 0;he.isBindingPattern(l.name)?c=he.flattenDestructuringAssignment(l,M,w,0):(c=he.createBinary(l.name,58,he.visitNode(l.initializer,M,he.isExpression)),he.setTextRange(c,l)),r=he.append(r,c)}}t=r?he.setTextRange(he.createStatement(he.inlineExpressions(r)),e):void 0}else t=he.visitEachChild(e,M,w);return C(o,0,0),t}(e);case 219:return t=e,R?(R.nonLocalJumps|=8,x(t)&&(t=D(t)),he.createReturn(he.createObjectLiteral([he.createPropertyAssignment(he.createIdentifier("value"),t.expression?he.visitNode(t.expression,M,he.isExpression):he.createVoidZero())]))):x(t)?D(t):he.visitEachChild(t,M,w);default:return he.visitEachChild(e,M,w)}var t,n,o,r,i,a,s,l,c,u,g,p,d,_,f,h,m,y,v}(e):e}function o(e){return t(e)?W(e,!0):e}function A(e){return 97===e.kind?pe(!0):M(e)}function D(e){return he.setOriginalNode(he.createReturn(he.createIdentifier("_this")),e)}function B(e){e.name&&de();var t=he.getClassExtendsHeritageClauseElement(e),n=he.createFunctionExpression(void 0,void 0,void 0,void 0,t?[he.createParameter(void 0,void 0,void 0,"_super")]:[],void 0,function(e,t){var n,o,r,i,a,s=[];L(),n=s,o=e,(r=t)&&n.push(he.setTextRange(he.createStatement((i=w,a=he.getLocalName(o),i.requestEmitHelper(me),he.createCall(he.getHelperName("__extends"),void 0,[a,he.createIdentifier("_super")]))),r)),function(e,t,n){var o=R;R=void 0;var r,i,a=S(16278,73),s=he.getFirstConstructorWithBody(t),l=function(e,t){if(!e||!t)return!1;if(he.some(e.parameters))return!1;var n=he.firstOrUndefined(e.body.statements);if(!n||!he.nodeIsSynthesized(n)||210!==n.kind)return!1;var o=n.expression;if(!he.nodeIsSynthesized(o)||181!==o.kind)return!1;var r=o.expression;if(!he.nodeIsSynthesized(r)||97!==r.kind)return!1;var i=he.singleOrUndefined(o.arguments);if(!i||!he.nodeIsSynthesized(i)||198!==i.kind)return!1;var a=i.expression;return he.isIdentifier(a)&&"arguments"===a.escapedText}(s,void 0!==n),c=he.createFunctionDeclaration(void 0,void 0,void 0,he.getInternalName(t),void 0,(r=s,i=l,he.visitParameterList(r&&!i&&r.parameters,M,w)||[]),void 0,function(e,t,n,o){var r=[];_();var i=-1;o?i=0:e&&(i=he.addStandardPrologue(r,e.body.statements,!1)),e&&(m(r,e),y(r,e,o),o||(i=he.addCustomPrologue(r,e.body.statements,i,M)),he.Debug.assert(0<=i,"statementOffset not initialized correctly!"));var a=n&&95!==he.skipOuterExpressions(n.expression).kind,s=function(e,t,n,o,r){if(!n)return t&&v(e,t),0;if(!t)return e.push(he.createReturn(h())),2;if(o)return I(e,t,h()),_e(),1;var i,a,s,l=t.body.statements;if(r<l.length&&210===(i=l[r]).kind&&he.isSuperCall(i.expression)&&(s=i.expression,a=se(s,!1)),a&&r===l.length-1&&!(49152&t.transformFlags)){var c=he.createReturn(a);return 194===a.kind&&181===a.left.kind||he.Debug.fail("Assumed generated super call would have form 'super.call(...) || this'."),he.setCommentRange(c,he.getCommentRange(he.setEmitFlags(a.left,1536))),e.push(c),2}return I(e,t,a||f(),i),a?1:0}(r,e,a,o,i);1!==s&&2!==s||i++,e&&(1===s&&(O|=4096),he.addRange(r,he.visitNodes(e.body.statements,M,he.isStatement,i))),!a||2===s||e&&function e(t){if(219===t.kind)return!0;if(211===t.kind){var n=t;if(n.elseStatement)return e(n.thenStatement)&&e(n.elseStatement)}else if(207===t.kind){var o=he.lastOrUndefined(t.statements);if(o&&e(o))return!0}return!1}(e.body)||r.push(he.createReturn(he.createIdentifier("_this"))),he.addRange(r,P()),e&&N(r,e,!1);var l=he.createBlock(he.setTextRange(he.createNodeArray(r),e?e.body.statements:t.members),!0);return he.setTextRange(l,e?e.body:t),e||he.setEmitFlags(l,1536),l}(s,t,n,l));he.setTextRange(c,s||t),n&&he.setEmitFlags(c,8),e.push(c),C(a,49152,0),R=o}(s,e,t),function(e,t){for(var n=0,o=t.members;n<o.length;n++){var r=o[n];switch(r.kind){case 206:e.push((u=r,he.setTextRange(he.createEmptyStatement(),u)));break;case 151:e.push(F(fe(t,r),r,t));break;case 153:case 154:var i=he.getAllAccessorDeclarations(t.members,r);r===i.firstAccessor&&e.push((a=fe(t,r),s=i,l=t,void 0,c=he.createStatement(U(a,s,l,!1)),he.setEmitFlags(c,1536),he.setSourceMapRange(c,he.getSourceMapRange(s.firstAccessor)),c));break;case 152:break;default:he.Debug.failBadSyntaxKind(t)}}var a,s,l,c,u}(s,e);var l=he.createTokenRange(he.skipTrivia(d,e.members.end),18),c=he.getInternalName(e),u=he.createPartiallyEmittedExpression(c);u.end=l.end,he.setEmitFlags(u,1536);var g=he.createReturn(u);g.pos=l.pos,he.setEmitFlags(g,1920),s.push(g),he.addRange(s,P());var p=he.createBlock(he.setTextRange(he.createNodeArray(s),e.members),!0);return he.setEmitFlags(p,1536),p}(e,t));65536&he.getEmitFlags(e)&&he.setEmitFlags(n,65536);var o=he.createPartiallyEmittedExpression(n);o.end=e.end,he.setEmitFlags(o,1536);var r=he.createPartiallyEmittedExpression(o);r.end=he.skipTrivia(d,e.pos),he.setEmitFlags(r,1536);var i=he.createParen(he.createCall(r,void 0,t?[he.visitNode(t.expression,M,he.isExpression)]:[]));return he.addSyntheticLeadingComment(i,3,"* @class "),i}function f(){return he.setEmitFlags(he.createThis(),4)}function h(){return he.createLogicalOr(he.createLogicalAnd(he.createStrictInequality(he.createIdentifier("_super"),he.createNull()),he.createFunctionApply(he.createIdentifier("_super"),f(),he.createIdentifier("arguments"))),f())}function m(e,t){if(0!=(131072&t.transformFlags))for(var n=0,o=t.parameters;n<o.length;n++){var r=o[n],i=r.name,a=r.initializer;r.dotDotDotToken||(he.isBindingPattern(i)?(s=e,l=r,c=i,u=a,void 0,g=he.getGeneratedNameForNode(l),0<c.elements.length?s.push(he.setEmitFlags(he.createVariableStatement(void 0,he.createVariableDeclarationList(he.flattenDestructuringBinding(l,M,w,0,g))),1048576)):u&&s.push(he.setEmitFlags(he.createStatement(he.createAssignment(g,he.visitNode(u,M,he.isExpression))),1048576))):a&&p(e,r,i,a))}var s,l,c,u,g}function p(e,t,n,o){o=he.visitNode(o,M,he.isExpression);var r=he.createIf(he.createTypeCheck(he.getSynthesizedClone(n),"undefined"),he.setEmitFlags(he.setTextRange(he.createBlock([he.createStatement(he.setTextRange(he.createAssignment(he.setEmitFlags(he.getMutableClone(n),48),he.setEmitFlags(o,48|he.getEmitFlags(o))),t))]),t),417));r.startsOnNewLine=!0,he.setTextRange(r,t),he.setEmitFlags(r,1048992),e.push(r)}function y(e,t,n){var o=he.lastOrUndefined(t.parameters);if(i=n,(r=o)&&r.dotDotDotToken&&71===r.name.kind&&!i){var r,i,a=he.getMutableClone(o.name);he.setEmitFlags(a,48);var s=he.getSynthesizedClone(o.name),l=t.parameters.length-1,c=he.createLoopVariable();e.push(he.setEmitFlags(he.setTextRange(he.createVariableStatement(void 0,he.createVariableDeclarationList([he.createVariableDeclaration(a,void 0,he.createArrayLiteral([]))])),o),1048576));var u=he.createFor(he.setTextRange(he.createVariableDeclarationList([he.createVariableDeclaration(c,void 0,he.createLiteral(l))]),o),he.setTextRange(he.createLessThan(c,he.createPropertyAccess(he.createIdentifier("arguments"),"length")),o),he.setTextRange(he.createPostfixIncrement(c),o),he.createBlock([he.startOnNewLine(he.setTextRange(he.createStatement(he.createAssignment(he.createElementAccess(s,0===l?c:he.createSubtract(c,he.createLiteral(l))),he.createElementAccess(he.createIdentifier("arguments"),c))),o))]));he.setEmitFlags(u,1048576),he.startOnNewLine(u),e.push(u)}}function v(e,t){32768&t.transformFlags&&187!==t.kind&&I(e,t,he.createThis())}function I(e,t,n,o){_e();var r=he.createVariableStatement(void 0,he.createVariableDeclarationList([he.createVariableDeclaration("_this",void 0,n)]));he.setEmitFlags(r,1050112),he.setTextRange(r,o),he.setSourceMapRange(r,t),e.push(r)}function N(e,t,n){if(16384&O){var o=void 0;switch(t.kind){case 187:return e;case 151:case 153:case 154:o=he.createVoidZero();break;case 152:o=he.createPropertyAccess(he.setEmitFlags(he.createThis(),4),"constructor");break;case 228:case 186:o=he.createConditional(he.createLogicalAnd(he.setEmitFlags(he.createThis(),4),he.createBinary(he.setEmitFlags(he.createThis(),4),93,he.getLocalName(t))),he.createPropertyAccess(he.setEmitFlags(he.createThis(),4),"constructor"),he.createVoidZero());break;default:he.Debug.failBadSyntaxKind(t)}var r=he.createVariableStatement(void 0,he.createVariableDeclarationList([he.createVariableDeclaration("_newTarget",void 0,o)]));if(n)return[r].concat(e);e.unshift(r)}return e}function F(e,t,n){var o=S(0,0),r=he.getCommentRange(t),i=he.getSourceMapRange(t),a=he.createMemberAccessForPropertyName(e,he.visitNode(t.name,M,he.isPropertyName),t.name),s=H(t,t,void 0,n);he.setEmitFlags(s,1536),he.setSourceMapRange(s,i);var l=he.setTextRange(he.createStatement(he.createAssignment(a,s)),t);return he.setOriginalNode(l,t),he.setCommentRange(l,r),he.setEmitFlags(l,48),C(o,49152,49152&O?16384:0),l}function U(e,t,n,o){var r=t.firstAccessor,i=t.getAccessor,a=t.setAccessor,s=S(0,0),l=he.getMutableClone(e);he.setEmitFlags(l,1568),he.setSourceMapRange(l,r.name);var c=he.createExpressionForPropertyName(he.visitNode(r.name,M,he.isPropertyName));he.setEmitFlags(c,1552),he.setSourceMapRange(c,r.name);var u=[];if(i){var g=H(i,void 0,void 0,n);he.setSourceMapRange(g,he.getSourceMapRange(i)),he.setEmitFlags(g,512);var p=he.createPropertyAssignment("get",g);he.setCommentRange(p,he.getCommentRange(i)),u.push(p)}if(a){var d=H(a,void 0,void 0,n);he.setSourceMapRange(d,he.getSourceMapRange(a)),he.setEmitFlags(d,512);var _=he.createPropertyAssignment("set",d);he.setCommentRange(_,he.getCommentRange(a)),u.push(_)}u.push(he.createPropertyAssignment("enumerable",he.createTrue()),he.createPropertyAssignment("configurable",he.createTrue()));var f=he.createCall(he.createPropertyAccess(he.createIdentifier("Object"),"defineProperty"),void 0,[l,c,he.createObjectLiteral(u,!0)]);return o&&(f.startsOnNewLine=!0),C(s,49152,49152&O?16384:0),f}function H(e,t,n,o){var r=R;R=void 0;var i=o&&he.isClassLike(o)&&!he.hasModifier(e,32)?S(16286,73):S(16286,65),a=he.visitParameterList(e.parameters,M,w),s=G(e);return 16384&O&&!n&&(228===e.kind||186===e.kind)&&(n=he.getGeneratedNameForNode(e)),C(i,49152,0),R=r,he.setOriginalNode(he.setTextRange(he.createFunctionExpression(void 0,e.asteriskToken,n,void 0,a,void 0,s),t),e)}function G(e){var t,n,o,r=!1,i=!1,a=[],s=e.body;if(_(),he.isBlock(s)&&(o=he.addStandardPrologue(a,s.statements,!1)),v(a,e),m(a,e),y(a,e,!1),!r&&0<a.length&&(r=!0),he.isBlock(s))o=he.addCustomPrologue(a,s.statements,o,M),t=s.statements,he.addRange(a,he.visitNodes(s.statements,M,he.isStatement,o)),!r&&s.multiLine&&(r=!0);else{he.Debug.assert(187===e.kind),t=he.moveRangeEnd(s,-1);var l=e.equalsGreaterThanToken;he.nodeIsSynthesized(l)||he.nodeIsSynthesized(s)||(he.rangeEndIsOnSameLineAsRangeStart(l,s,b)?i=!0:r=!0);var c=he.visitNode(s,M,he.isExpression),u=he.createReturn(c);he.setTextRange(u,s),he.setEmitFlags(u,1440),a.push(u),n=s}var g=w.endLexicalEnvironment();he.addRange(a,g),N(a,e,!1),!r&&g&&g.length&&(r=!0);var p=he.createBlock(he.setTextRange(he.createNodeArray(a),t),r);return he.setTextRange(p,e.body),!r&&i&&he.setEmitFlags(p,1),n&&he.setTokenSourceMapRange(p,18,n),he.setOriginalNode(p,e.body),p}function V(e){var t=he.visitFunctionBody(e.body,o,w);return he.updateBlock(t,he.setTextRange(he.createNodeArray(N(t.statements,e,!0)),t.statements))}function W(e,t){if(t)return he.visitEachChild(e,M,w);var n=256&O?S(4032,512):S(3904,128),o=he.visitEachChild(e,M,w);return C(n,0,0),o}function K(e,t){if(!t)switch(e.expression.kind){case 185:return he.updateParen(e,K(e.expression,!1));case 194:return he.updateParen(e,z(e.expression,!1))}return he.visitEachChild(e,M,w)}function z(e,t){return he.isDestructuringAssignment(e)?he.flattenDestructuringAssignment(e,M,w,0,t):he.visitEachChild(e,M,w)}function j(e){var t,n,o,r,i=e.name;if(he.isBindingPattern(i))return Y(e);if(!e.initializer&&(t=e,n=E.getNodeCheckFlags(t),o=131072&n,r=262144&n,!(0!=(64&O)||o&&r&&0!=(512&O))&&0==(2048&O)&&(!E.isDeclarationWithCollidingName(t)||r&&!o&&0==(3072&O)))){var a=he.getMutableClone(e);return a.initializer=he.createVoidZero(),a}return he.visitEachChild(e,M,w)}function Y(e){var t,n=S(32,0);return t=he.isBindingPattern(e.name)?he.flattenDestructuringBinding(e,M,w,0,void 0,0!=(32&n)):he.visitEachChild(e,M,w),C(n,0,0),t}function X(e){R.labels.set(he.idText(e.label),!0)}function J(e){R.labels.set(he.idText(e.label),!1)}function a(e,t,n,o,r){var i=S(e,t),a=function(e,t,n){if(!te(e)){var o=void 0;R&&(o=R.allowedNonLabeledJumps,R.allowedNonLabeledJumps=6);var r=n?n(e,t,void 0):he.restoreEnclosingLabel(he.visitEachChild(e,M,w),t,R&&J);return R&&(R.allowedNonLabeledJumps=o),r}var i,a=he.createUniqueName("_loop");switch(e.kind){case 214:case 215:case 216:var s=e.initializer;s&&227===s.kind&&(i=s)}var l=[],c=[];if(i&&3&he.getCombinedNodeFlags(i))for(var u=0,g=i.declarations;u<g.length;u++){var p=g[u];ae(p,l,c)}var d=R;R={loopOutParameters:c},d&&(d.argumentsName&&(R.argumentsName=d.argumentsName),d.thisName&&(R.thisName=d.thisName),d.hoistedLocalVariables&&(R.hoistedLocalVariables=d.hoistedLocalVariables)),L();var _=he.visitNode(e.statement,M,he.isStatement,he.liftToBlock),f=P(),h=R;if(R=d,c.length||f){var m=he.isBlock(_)?_.statements.slice():[_];c.length&&oe(c,1,m),he.addRange(m,f),_=he.createBlock(m,!0)}he.isBlock(_)?_.multiLine=!0:_=he.createBlock([_],!0);var y=0!=(16777216&e.statement.transformFlags),v=y&&0!=(4&O),b=0;h.containsLexicalThis&&(b|=8),v&&(b|=262144);var k,T=[he.createVariableStatement(void 0,he.setEmitFlags(he.createVariableDeclarationList([he.createVariableDeclaration(a,void 0,he.setEmitFlags(he.createFunctionExpression(void 0,y?he.createToken(39):void 0,void 0,void 0,l,void 0,_),b))]),2097152))];if(h.argumentsName&&(d?d.argumentsName=h.argumentsName:(k||(k=[])).push(he.createVariableDeclaration(h.argumentsName,void 0,he.createIdentifier("arguments")))),h.thisName&&(d?d.thisName=h.thisName:(k||(k=[])).push(he.createVariableDeclaration(h.thisName,void 0,he.createIdentifier("this")))),h.hoistedLocalVariables)if(d)d.hoistedLocalVariables=h.hoistedLocalVariables;else{k||(k=[]);for(var E=0,S=h.hoistedLocalVariables;E<S.length;E++){var C=S[E];k.push(he.createVariableDeclaration(C))}}if(c.length){k||(k=[]);for(var x=0,A=c;x<A.length;x++){var D=A[x];k.push(he.createVariableDeclaration(D.outParamName))}}k&&T.push(he.createVariableStatement(void 0,he.createVariableDeclarationList(k)));var B,I=function(e,t,n,o){var r=R,i=[],a=!(-5&n.nonLocalJumps||n.labeledNonLocalBreaks||n.labeledNonLocalContinues),s=he.createCall(e,void 0,he.map(t,function(e){return e.name})),l=o?he.createYield(he.createToken(39),he.setEmitFlags(s,8388608)):s;if(a)i.push(he.createStatement(l)),oe(n.loopOutParameters,0,i);else{var c=he.createUniqueName("state"),u=he.createVariableStatement(void 0,he.createVariableDeclarationList([he.createVariableDeclaration(c,void 0,l)]));if(i.push(u),oe(n.loopOutParameters,0,i),8&n.nonLocalJumps){var g=void 0;r?(r.nonLocalJumps|=8,g=he.createReturn(c)):g=he.createReturn(he.createPropertyAccess(c,"value")),i.push(he.createIf(he.createBinary(he.createTypeOf(c),34,he.createLiteral("object")),g))}if(2&n.nonLocalJumps&&i.push(he.createIf(he.createBinary(c,34,he.createLiteral("break")),he.createBreak())),n.labeledNonLocalBreaks||n.labeledNonLocalContinues){var p=[];ie(n.labeledNonLocalBreaks,!0,c,r,p),ie(n.labeledNonLocalContinues,!1,c,r,p),i.push(he.createSwitch(c,he.createCaseBlock(p)))}}return i}(a,l,h,y);if(n)B=n(e,t,I);else{var N=he.getMutableClone(e);N.statement=void 0,(N=he.visitEachChild(N,M,w)).statement=he.createBlock(I,!0),N.transformFlags=0,he.aggregateTransformFlags(N),B=he.restoreEnclosingLabel(N,t,R&&J)}return T.push(B),T}(n,o,r);return C(i,0,0),a}function q(e,t){return a(0,256,e,t)}function Z(e,t){return a(3008,1280,e,t)}function $(e,t){return a(1984,2304,e,t)}function Q(e,t){return a(1984,2304,e,t,l.downlevelIteration?c:s)}function ee(e,t,n){var o,r,i=[];if(he.isVariableDeclarationList(e.initializer)){3&e.initializer.flags&&de();var a=he.firstOrUndefined(e.initializer.declarations);if(a&&he.isBindingPattern(a.name)){var s=he.flattenDestructuringBinding(a,M,w,0,t),l=he.setTextRange(he.createVariableDeclarationList(s),e.initializer);he.setOriginalNode(l,e.initializer);var c=s[0],u=he.lastOrUndefined(s);he.setSourceMapRange(l,he.createRange(c.pos,u.end)),i.push(he.createVariableStatement(void 0,l))}else i.push(he.setTextRange(he.createVariableStatement(void 0,he.setOriginalNode(he.setTextRange(he.createVariableDeclarationList([he.createVariableDeclaration(a?a.name:he.createTempVariable(void 0),void 0,t)]),he.moveRangePos(e.initializer,-1)),e.initializer)),he.moveRangeEnd(e.initializer,-1)))}else{var g=he.createAssignment(e.initializer,t);he.isDestructuringAssignment(g)?(he.aggregateTransformFlags(g),i.push(he.createStatement(z(g,!1)))):(g.end=e.initializer.end,i.push(he.setTextRange(he.createStatement(he.visitNode(g,M,he.isExpression)),he.moveRangeEnd(e.initializer,-1))))}if(n)he.addRange(i,n);else{var p=he.visitNode(e.statement,M,he.isStatement,he.liftToBlock);he.isBlock(p)?(he.addRange(i,p.statements),r=(o=p).statements):i.push(p)}return he.setEmitFlags(he.setTextRange(he.createBlock(he.setTextRange(he.createNodeArray(i),r),!0),o),432)}function s(e,t,n){var o=he.visitNode(e.expression,M,he.isExpression),r=he.createLoopVariable(),i=he.isIdentifier(o)?he.getGeneratedNameForNode(o):he.createTempVariable(void 0);he.setEmitFlags(o,48|he.getEmitFlags(o));var a=he.setTextRange(he.createFor(he.setEmitFlags(he.setTextRange(he.createVariableDeclarationList([he.setTextRange(he.createVariableDeclaration(r,void 0,he.createLiteral(0)),he.moveRangePos(e.expression,-1)),he.setTextRange(he.createVariableDeclaration(i,void 0,o),e.expression)]),e.expression),2097152),he.setTextRange(he.createLessThan(r,he.createPropertyAccess(i,"length")),e.expression),he.setTextRange(he.createPostfixIncrement(r),e.expression),ee(e,he.createElementAccess(i,r),n)),e);return he.setEmitFlags(a,256),he.setTextRange(a,e),he.restoreEnclosingLabel(a,t,R&&J)}function c(e,t,n){var o=he.visitNode(e.expression,M,he.isExpression),r=he.isIdentifier(o)?he.getGeneratedNameForNode(o):he.createTempVariable(void 0),i=he.isIdentifier(o)?he.getGeneratedNameForNode(r):he.createTempVariable(void 0),a=he.createUniqueName("e"),s=he.getGeneratedNameForNode(a),l=he.createTempVariable(void 0),c=he.createValuesHelper(w,o,e.expression),u=he.createCall(he.createPropertyAccess(r,"next"),void 0,[]);T(a),T(l);var g=he.setEmitFlags(he.setTextRange(he.createFor(he.setEmitFlags(he.setTextRange(he.createVariableDeclarationList([he.setTextRange(he.createVariableDeclaration(r,void 0,c),e.expression),he.createVariableDeclaration(i,void 0,u)]),e.expression),2097152),he.createLogicalNot(he.createPropertyAccess(i,"done")),he.createAssignment(i,u),ee(e,he.createPropertyAccess(i,"value"),n)),e),256);return he.createTry(he.createBlock([he.restoreEnclosingLabel(g,t,R&&J)]),he.createCatchClause(he.createVariableDeclaration(s),he.setEmitFlags(he.createBlock([he.createStatement(he.createAssignment(a,he.createObjectLiteral([he.createPropertyAssignment("error",s)])))]),1)),he.createBlock([he.createTry(he.createBlock([he.setEmitFlags(he.createIf(he.createLogicalAnd(he.createLogicalAnd(i,he.createLogicalNot(he.createPropertyAccess(i,"done"))),he.createAssignment(l,he.createPropertyAccess(r,"return"))),he.createStatement(he.createFunctionCall(l,r,[]))),1)]),void 0,he.setEmitFlags(he.createBlock([he.setEmitFlags(he.createIf(a,he.createThrow(he.createPropertyAccess(a,"error"))),1)]),1))]))}function te(e){return 0!=(65536&E.getNodeCheckFlags(e))}function ne(e,t){var n=0===t?e.outParamName:e.originalName,o=0===t?e.originalName:e.outParamName;return he.createBinary(o,58,n)}function oe(e,t,n){for(var o=0,r=e;o<r.length;o++){var i=r[o];n.push(he.createStatement(ne(i,t)))}}function re(e,t,n,o){t?(e.labeledNonLocalBreaks||(e.labeledNonLocalBreaks=he.createMap()),e.labeledNonLocalBreaks.set(n,o)):(e.labeledNonLocalContinues||(e.labeledNonLocalContinues=he.createMap()),e.labeledNonLocalContinues.set(n,o))}function ie(e,r,i,a,s){e&&e.forEach(function(e,t){var n=[];if(!a||a.labels&&a.labels.get(t)){var o=he.createIdentifier(t);n.push(r?he.createBreak(o):he.createContinue(o))}else re(a,r,t,e),n.push(he.createReturn(i));s.push(he.createCaseClause(he.createLiteral(e),n))})}function ae(e,t,n){var o=e.name;if(he.isBindingPattern(o))for(var r=0,i=o.elements;r<i.length;r++){var a=i[r];he.isOmittedExpression(a)||ae(a,t,n)}else if(t.push(he.createParameter(void 0,void 0,void 0,o)),2097152&E.getNodeCheckFlags(e)){var s=he.createUniqueName("out_"+he.idText(o));n.push({originalName:o,outParamName:s})}}function se(e,t){var n,o=he.createCallBinding(e.expression,T),r=o.target,i=o.thisArg;if(97===e.expression.kind&&he.setEmitFlags(i,4),n=524288&e.transformFlags?he.createFunctionApply(he.visitNode(r,A,he.isExpression),he.visitNode(i,M,he.isExpression),le(e.arguments,!1,!1,!1)):he.createFunctionCall(he.visitNode(r,A,he.isExpression),he.visitNode(i,M,he.isExpression),he.visitNodes(e.arguments,M,he.isExpression),e),97===e.expression.kind){var a=he.createThis();he.setEmitFlags(a,4);var s=he.createLogicalOr(n,a);n=t?he.createAssignment(he.createIdentifier("_this"),s):s}return he.setOriginalNode(n,e)}function le(e,t,r,i){var a=e.length,n=he.flatten(he.spanMap(e,u,function(e,t,n,o){return t(e,r,i&&o===a)}));if(l.downlevelIteration){if(1===n.length){var o=n[0];if(he.isCallExpression(o)&&he.isIdentifier(o.expression)&&4096&he.getEmitFlags(o.expression)&&"___spread"===o.expression.escapedText)return n[0]}return he.createSpreadHelper(w,n)}if(1===n.length){var s=e[0];return t&&he.isSpreadElement(s)&&177!==s.expression.kind?he.createArraySlice(n[0]):n[0]}return he.createArrayConcat(n.shift(),n)}function u(e){return he.isSpreadElement(e)?g:ce}function g(e){return he.map(e,ue)}function ce(e,t,n){return he.createArrayLiteral(he.visitNodes(he.createNodeArray(e,n),M,he.isExpression),t)}function ue(e){return he.visitNode(e.expression,M,he.isExpression)}function ge(e){var t=he.getSourceTextOfNodeFromSourceFile(b,e),n=13===e.kind||16===e.kind;return t=(t=t.substring(1,t.length-(n?1:2))).replace(/\r\n?/g,"\n"),he.setTextRange(he.createLiteral(t),e)}function pe(e){return 8&O&&!e?he.createPropertyAccess(he.createIdentifier("_super"),"prototype"):he.createIdentifier("_super")}function de(){0==(2&r)&&(r|=2,w.enableSubstitution(71))}function _e(){0==(1&r)&&(r|=1,w.enableSubstitution(99),w.enableEmitNotification(152),w.enableEmitNotification(151),w.enableEmitNotification(153),w.enableEmitNotification(154),w.enableEmitNotification(187),w.enableEmitNotification(186),w.enableEmitNotification(228))}function fe(e,t){return he.hasModifier(t,32)?he.getInternalName(e):he.createPropertyAccess(he.getInternalName(e),"prototype")}}),priority:0,text:"\n            var __extends = (this && this.__extends) || (function () {\n                var extendStatics = Object.setPrototypeOf ||\n                    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n                    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n                return function (d, b) {\n                    extendStatics(d, b);\n                    function __() { this.constructor = d; }\n                    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n                };\n            })();"},ye={name:"typescript:makeTemplateObject",scoped:!1,priority:0,text:'\n            var __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n                if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }\n                return cooked;\n            };'}}(ts||(ts={})),function(c){c.transformES5=function(e){var r,a,t=e.getCompilerOptions();1!==t.jsx&&3!==t.jsx||(r=e.onEmitNode,e.onEmitNode=function(e,t,n){switch(t.kind){case 251:case 252:case 250:var o=t.tagName;a[c.getOriginalNodeId(o)]=!0}r(e,t,n)},e.enableEmitNotification(251),e.enableEmitNotification(252),e.enableEmitNotification(250),a=[]);var s=e.onSubstituteNode;return e.onSubstituteNode=function(e,t){return t.id&&a&&a[t.id]?s(e,t):(t=s(e,t),c.isPropertyAccessExpression(t)?(i=l((r=t).name))?c.setTextRange(c.createElementAccess(r.expression,i),r):r:c.isPropertyAssignment(t)?(n=t,(o=c.isIdentifier(n.name)&&l(n.name))?c.updatePropertyAssignment(n,o,n.initializer):n):t);var n,o,r,i},e.enableSubstitution(179),e.enableSubstitution(261),function(e){return e};function l(e){var t=e.originalKeywordKind||(c.nodeIsSynthesized(e)?c.stringToToken(c.idText(e)):void 0);if(72<=t&&t<=107)return c.setTextRange(c.createLiteral(e),e)}}}(ts||(ts={})),function(Be){var e,t,n,o,r,i,a,s,l,c;(t=e||(e={}))[t.Nop=0]="Nop",t[t.Statement=1]="Statement",t[t.Assign=2]="Assign",t[t.Break=3]="Break",t[t.BreakWhenTrue=4]="BreakWhenTrue",t[t.BreakWhenFalse=5]="BreakWhenFalse",t[t.Yield=6]="Yield",t[t.YieldStar=7]="YieldStar",t[t.Return=8]="Return",t[t.Throw=9]="Throw",t[t.Endfinally=10]="Endfinally",(o=n||(n={}))[o.Open=0]="Open",o[o.Close=1]="Close",(i=r||(r={}))[i.Exception=0]="Exception",i[i.With=1]="With",i[i.Switch=2]="Switch",i[i.Loop=3]="Loop",i[i.Labeled=4]="Labeled",(s=a||(a={}))[s.Try=0]="Try",s[s.Catch=1]="Catch",s[s.Finally=2]="Finally",s[s.Done=3]="Done",(c=l||(l={}))[c.Next=0]="Next",c[c.Throw=1]="Throw",c[c.Return=2]="Return",c[c.Break=3]="Break",c[c.Yield=4]="Yield",c[c.YieldStar=5]="YieldStar",c[c.Catch=6]="Catch",c[c.Endfinally=7]="Endfinally";var Ie={name:"typescript:generator",scoped:!(Be.transformGenerators=function(v){var b,k,m,y,T,E,S,C,x,A,D=v.resumeLexicalEnvironment,B=v.endLexicalEnvironment,o=v.hoistFunctionDeclaration,I=v.hoistVariableDeclaration,e=v.getCompilerOptions(),s=Be.getEmitScriptTarget(e),i=v.getEmitResolver(),r=v.onSubstituteNode;v.onSubstituteNode=function(e,t){return t=r(e,t),1===e?(n=t,Be.isIdentifier(n)?function(e){if(!Be.isGeneratedIdentifier(e)&&b&&b.has(Be.idText(e))){var t=Be.getOriginalNode(e);if(Be.isIdentifier(t)&&t.parent){var n=i.getReferencedValueDeclaration(t);if(n){var o=k[Be.getOriginalNodeId(n)];if(o){var r=Be.getMutableClone(o);return Be.setSourceMapRange(r,e),Be.setCommentRange(r,e),r}}}}return e}(n):n):t;var n};var N,w,O,R,L,P,M,F,U,H,G,V,W=1,K=0,z=0;return function(e){if(e.isDeclarationFile||0==(512&e.transformFlags))return e;var t=Be.visitEachChild(e,j,v);return Be.addEmitHelpers(t,v.readEmitHelpers()),t};function j(e){var t=e.transformFlags;return y?function(e){switch(e.kind){case 212:return r=e,y?(f(),r=Be.visitEachChild(r,j,v),ae(),r):Be.visitEachChild(r,j,v);case 213:return o=e,y?(f(),o=Be.visitEachChild(o,j,v),ae(),o):Be.visitEachChild(o,j,v);case 221:return n=e,y&&te({kind:2,isScript:!0,breakLabel:-1}),n=Be.visitEachChild(n,j,v),y&&se(),n;case 222:return t=e,y&&te({kind:4,isScript:!0,labelText:Be.idText(t.label),breakLabel:-1}),t=Be.visitEachChild(t,j,v),y&&le(),t;default:return a(e)}var t,n,o,r}(e):m?a(e):256&t?function(e){switch(e.kind){case 228:return l(e);case 186:return c(e);default:return Be.Debug.failBadSyntaxKind(e),Be.visitEachChild(e,j,v)}}(e):512&t?Be.visitEachChild(e,j,v):e}function a(e){switch(e.kind){case 228:return l(e);case 186:return c(e);case 153:case 154:return r=e,i=m,a=y,y=m=!1,r=Be.visitEachChild(r,j,v),m=i,y=a,r;case 208:return function(e){if(16777216&e.transformFlags)J(e.declarationList);else{if(1048576&Be.getEmitFlags(e))return e;for(var t=0,n=e.declarationList.declarations;t<n.length;t++){var o=n[t];I(o.name)}var r=Be.getInitializedVariables(e.declarationList);if(0!==r.length)return Be.setSourceMapRange(Be.createStatement(Be.inlineExpressions(Be.map(r,d))),e)}}(e);case 214:return function(e){y&&f();var t=e.initializer;if(t&&Be.isVariableDeclarationList(t)){for(var n=0,o=t.declarations;n<o.length;n++){var r=o[n];I(r.name)}var i=Be.getInitializedVariables(t);e=Be.updateFor(e,0<i.length?Be.inlineExpressions(Be.map(i,d)):void 0,Be.visitNode(e.condition,j,Be.isExpression),Be.visitNode(e.incrementor,j,Be.isExpression),Be.visitNode(e.statement,j,Be.isStatement,Be.liftToBlock))}else e=Be.visitEachChild(e,j,v);return y&&ae(),e}(e);case 215:return function(e){y&&f();var t=e.initializer;if(Be.isVariableDeclarationList(t)){for(var n=0,o=t.declarations;n<o.length;n++){var r=o[n];I(r.name)}e=Be.updateForIn(e,t.declarations[0].name,Be.visitNode(e.expression,j,Be.isExpression),Be.visitNode(e.statement,j,Be.isStatement,Be.liftToBlock))}else e=Be.visitEachChild(e,j,v);return y&&ae(),e}(e);case 218:return function(e){if(y){var t=pe(e.label&&Be.idText(e.label));if(0<t)return he(t,e)}return Be.visitEachChild(e,j,v)}(e);case 217:return function(e){if(y){var t=de(e.label&&Be.idText(e.label));if(0<t)return he(t,e)}return Be.visitEachChild(e,j,v)}(e);case 219:return t=e,n=Be.visitNode(t.expression,j,Be.isExpression),o=t,Be.setTextRange(Be.createReturn(Be.createArrayLiteral(n?[fe(2),n]:[fe(2)])),o);default:return 16777216&e.transformFlags?function(e){switch(e.kind){case 194:return function(e){switch(Be.getExpressionAssociativity(e)){case 0:return function(e){if(q(e.right)){if(Be.isLogicalOperator(e.operatorToken.kind))return n=e,o=Q(),ve(r=$(),Be.visitNode(n.left,j,Be.isExpression),n.left),53===n.operatorToken.kind?Te(o,r,n.left):ke(o,r,n.left),ve(r,Be.visitNode(n.right,j,Be.isExpression),n.right),ee(o),r;if(26===e.operatorToken.kind)return function(e){var t=[];return n(e.left),n(e.right),Be.inlineExpressions(t);function n(e){Be.isBinaryExpression(e)&&26===e.operatorToken.kind?(n(e.left),n(e.right)):(q(e)&&0<t.length&&(Ee(1,[Be.createStatement(Be.inlineExpressions(t))]),t=[]),t.push(Be.visitNode(e,j,Be.isExpression)))}}(e);var t=Be.getMutableClone(e);return t.left=Z(Be.visitNode(e.left,j,Be.isExpression)),t.right=Be.visitNode(e.right,j,Be.isExpression),t}var n,o,r;return Be.visitEachChild(e,j,v)}(e);case 1:return function(e){var t,n=e.left,o=e.right;if(q(o)){var r=void 0;switch(n.kind){case 179:r=Be.updatePropertyAccess(n,Z(Be.visitNode(n.expression,j,Be.isLeftHandSideExpression)),n.name);break;case 180:r=Be.updateElementAccess(n,Z(Be.visitNode(n.expression,j,Be.isLeftHandSideExpression)),Z(Be.visitNode(n.argumentExpression,j,Be.isExpression)));break;default:r=Be.visitNode(n,j,Be.isExpression)}var i=e.operatorToken.kind;return 59<=(t=i)&&t<=70?Be.setTextRange(Be.createAssignment(r,Be.setTextRange(Be.createBinary(Z(r),function(e){switch(e){case 59:return 37;case 60:return 38;case 61:return 39;case 62:return 40;case 63:return 41;case 64:return 42;case 65:return 45;case 66:return 46;case 67:return 47;case 68:return 48;case 69:return 49;case 70:return 50}}(i),Be.visitNode(o,j,Be.isExpression)),e)),e):Be.updateBinary(e,r,Be.visitNode(o,j,Be.isExpression))}return Be.visitEachChild(e,j,v)}(e);default:Be.Debug.fail("Unknown associativity.")}}(e);case 195:return function(e){if(q(e.whenTrue)||q(e.whenFalse)){var t=Q(),n=Q(),o=$();return Te(t,Be.visitNode(e.condition,j,Be.isExpression),e.condition),ve(o,Be.visitNode(e.whenTrue,j,Be.isExpression),e.whenTrue),be(n),ee(t),ve(o,Be.visitNode(e.whenFalse,j,Be.isExpression),e.whenFalse),ee(n),o}return Be.visitEachChild(e,j,v)}(e);case 197:return function(e){var t,n=Q(),o=Be.visitNode(e.expression,j,Be.isExpression);if(e.asteriskToken){var r=0==(8388608&Be.getEmitFlags(e.expression))?Be.createValuesHelper(v,o,e):o;Ee(7,[r],e)}else Ee(6,[o],e);return ee(n),t=e,Be.setTextRange(Be.createCall(Be.createPropertyAccess(R,"sent"),void 0,[]),t)}(e);case 177:return g((t=e).elements,void 0,void 0,t.multiLine);case 178:return function(r){var e=r.properties,i=r.multiLine,t=_(e),a=$();ve(a,Be.createObjectLiteral(Be.visitNodes(e,j,Be.isObjectLiteralElementLike,0,t),i));var n=Be.reduceLeft(e,function(e,t){q(t)&&0<e.length&&(ye(Be.createStatement(Be.inlineExpressions(e))),e=[]);var n=Be.createExpressionForObjectLiteralElementLike(r,t,a),o=Be.visitNode(n,j,Be.isExpression);return o&&(i&&(o.startsOnNewLine=!0),e.push(o)),e},[],t);return n.push(i?Be.startOnNewLine(Be.getMutableClone(a)):a),Be.inlineExpressions(n)}(e);case 180:return function(e){if(q(e.argumentExpression)){var t=Be.getMutableClone(e);return t.expression=Z(Be.visitNode(e.expression,j,Be.isLeftHandSideExpression)),t.argumentExpression=Be.visitNode(e.argumentExpression,j,Be.isExpression),t}return Be.visitEachChild(e,j,v)}(e);case 181:return function(e){if(!Be.isImportCall(e)&&Be.forEach(e.arguments,q)){var t=Be.createCallBinding(e.expression,I,s,!0),n=t.target,o=t.thisArg;return Be.setOriginalNode(Be.createFunctionApply(Z(Be.visitNode(n,j,Be.isLeftHandSideExpression)),o,g(e.arguments),e),e)}return Be.visitEachChild(e,j,v)}(e);case 182:return function(e){if(Be.forEach(e.arguments,q)){var t=Be.createCallBinding(Be.createPropertyAccess(e.expression,"bind"),I),n=t.target,o=t.thisArg;return Be.setOriginalNode(Be.setTextRange(Be.createNew(Be.createFunctionApply(Z(Be.visitNode(n,j,Be.isExpression)),o,g(e.arguments,Be.createVoidZero())),void 0,[]),e),e)}return Be.visitEachChild(e,j,v)}(e);default:return Be.visitEachChild(e,j,v)}var t}(e):33554944&e.transformFlags?Be.visitEachChild(e,j,v):e}var t,n,o,r,i,a}function l(e){if(e.asteriskToken)e=Be.setOriginalNode(Be.setTextRange(Be.createFunctionDeclaration(void 0,e.modifiers,void 0,e.name,void 0,Be.visitParameterList(e.parameters,j,v),void 0,u(e.body)),e),e);else{var t=m,n=y;y=m=!1,e=Be.visitEachChild(e,j,v),m=t,y=n}return m?void o(e):e}function c(e){if(e.asteriskToken)e=Be.setOriginalNode(Be.setTextRange(Be.createFunctionExpression(void 0,void 0,e.name,void 0,Be.visitParameterList(e.parameters,j,v),void 0,u(e.body)),e),e);else{var t=m,n=y;y=m=!1,e=Be.visitEachChild(e,j,v),m=t,y=n}return e}function u(e){var t=[],n=m,o=y,r=T,i=E,a=S,s=C,l=x,c=A,u=W,g=N,p=w,d=O,_=R;y=!(m=!0),W=1,O=w=N=A=x=C=S=E=T=void 0,R=Be.createTempVariable(void 0),D();var f=Be.addPrologue(t,e.statements,!1,j);Y(e.statements,f);var h=function(){z=K=0,M=P=!1,V=G=H=U=F=L=void 0;var e,t,n=function(){if(N){for(var e=0;e<N.length;e++)xe(e);Se(N.length)}else Se(0);if(F){var t=Be.createPropertyAccess(R,"label"),n=Be.createSwitch(t,Be.createCaseBlock(F));return n.startsOnNewLine=!0,[n]}return U||[]}();return e=v,t=Be.setEmitFlags(Be.createFunctionExpression(void 0,void 0,void 0,void 0,[Be.createParameter(void 0,void 0,void 0,R)],void 0,Be.createBlock(n,0<n.length)),524288),e.requestEmitHelper(Ie),Be.createCall(Be.getHelperName("__generator"),void 0,[Be.createThis(),t])}();return Be.addRange(t,B()),t.push(Be.createReturn(h)),m=n,y=o,T=r,E=i,S=a,C=s,x=l,A=c,W=u,N=g,w=p,O=d,R=_,Be.setTextRange(Be.createBlock(t,e.multiLine),e)}function g(e,o,t,r){var i,n=_(e);if(0<n){i=$();var a=Be.visitNodes(e,j,Be.isExpression,0,n);ve(i,Be.createArrayLiteral(o?[o].concat(a):a)),o=void 0}var s=Be.reduceLeft(e,function(e,t){if(q(t)&&0<e.length){var n=void 0!==i;i||(i=$()),ve(i,n?Be.createArrayConcat(i,[Be.createArrayLiteral(e,r)]):Be.createArrayLiteral(o?[o].concat(e):e,r)),o=void 0,e=[]}return e.push(Be.visitNode(t,j,Be.isExpression)),e},[],n);return i?Be.createArrayConcat(i,[Be.createArrayLiteral(s,r)]):Be.setTextRange(Be.createArrayLiteral(o?[o].concat(s):s,r),t)}function Y(e,t){void 0===t&&(t=0);for(var n=e.length,o=t;o<n;o++)p(e[o])}function X(e){Be.isBlock(e)?Y(e.statements):p(e)}function p(e){var t=y;y||(y=q(e)),function(e){switch(e.kind){case 207:return q(y=e)?Y(y.statements):ye(Be.visitNode(y,j,Be.isStatement));case 210:return m=e,ye(Be.visitNode(m,j,Be.isStatement));case 211:return function(e){if(q(e))if(q(e.thenStatement)||q(e.elseStatement)){var t=Q(),n=e.elseStatement?Q():void 0;Te(e.elseStatement?n:t,Be.visitNode(e.expression,j,Be.isExpression),e.expression),X(e.thenStatement),e.elseStatement&&(be(t),ee(n),X(e.elseStatement)),ee(t)}else ye(Be.visitNode(e,j,Be.isStatement));else ye(Be.visitNode(e,j,Be.isStatement))}(e);case 212:return function(e){if(q(e)){var t=Q(),n=Q();ie(t),ee(n),X(e.statement),ee(t),ke(n,Be.visitNode(e.expression,j,Be.isExpression)),ae()}else ye(Be.visitNode(e,j,Be.isStatement))}(e);case 213:return function(e){if(q(e)){var t=Q(),n=ie(t);ee(t),Te(n,Be.visitNode(e.expression,j,Be.isExpression)),X(e.statement),be(t),ae()}else ye(Be.visitNode(e,j,Be.isStatement))}(e);case 214:return function(e){if(q(e)){var t=Q(),n=Q(),o=ie(n);if(e.initializer){var r=e.initializer;Be.isVariableDeclarationList(r)?J(r):ye(Be.setTextRange(Be.createStatement(Be.visitNode(r,j,Be.isExpression)),r))}ee(t),e.condition&&Te(o,Be.visitNode(e.condition,j,Be.isExpression)),X(e.statement),ee(n),e.incrementor&&ye(Be.setTextRange(Be.createStatement(Be.visitNode(e.incrementor,j,Be.isExpression)),e.incrementor)),be(t),ae()}else ye(Be.visitNode(e,j,Be.isStatement))}(e);case 215:return function(e){if(q(e)){var t=$(),n=$(),o=Be.createLoopVariable(),r=e.initializer;I(o),ve(t,Be.createArrayLiteral()),ye(Be.createForIn(n,Be.visitNode(e.expression,j,Be.isExpression),Be.createStatement(Be.createCall(Be.createPropertyAccess(t,"push"),void 0,[n])))),ve(o,Be.createLiteral(0));var i=Q(),a=Q(),s=ie(a);ee(i),Te(s,Be.createLessThan(o,Be.createPropertyAccess(t,"length")));var l=void 0;if(Be.isVariableDeclarationList(r)){for(var c=0,u=r.declarations;c<u.length;c++){var g=u[c];I(g.name)}l=Be.getSynthesizedClone(r.declarations[0].name)}else l=Be.visitNode(r,j,Be.isExpression),Be.Debug.assert(Be.isLeftHandSideExpression(l));ve(l,Be.createElementAccess(t,o)),X(e.statement),ee(a),ye(Be.createStatement(Be.createPostfixIncrement(o))),be(i),ae()}else ye(Be.visitNode(e,j,Be.isStatement))}(e);case 217:return 0<(h=de((f=e).label?Be.idText(f.label):void 0))?be(h,f):ye(f);case 218:return 0<(_=pe((d=e).label?Be.idText(d.label):void 0))?be(_,d):ye(d);case 219:return p=e,Ee(8,[Be.visitNode(p.expression,j,Be.isExpression)],p);case 220:return q(l=e)?(c=Z(Be.visitNode(l.expression,j,Be.isExpression)),u=Q(),g=Q(),ee(u),te({kind:1,expression:c,startLabel:u,endLabel:g}),X(l.statement),Be.Debug.assert(1===re()),ee(ne().endLabel)):ye(Be.visitNode(l,j,Be.isStatement));case 221:return function(e){if(q(e.caseBlock)){for(var t=e.caseBlock,n=t.clauses.length,o=(te({kind:2,isScript:!1,breakLabel:d=Q()}),d),r=Z(Be.visitNode(e.expression,j,Be.isExpression)),i=[],a=-1,s=0;s<n;s++){var l=t.clauses[s];i.push(Q()),258===l.kind&&-1===a&&(a=s)}for(var c=0,u=[];c<n;){for(var g=0,s=c;s<n;s++){var l=t.clauses[s];if(257===l.kind){var p=l;if(q(p.expression)&&0<u.length)break;u.push(Be.createCaseClause(Be.visitNode(p.expression,j,Be.isExpression),[he(i[s],p.expression)]))}else g++}u.length&&(ye(Be.createSwitch(r,Be.createCaseBlock(u))),c+=u.length,u=[]),0<g&&(c+=g,g=0)}be(0<=a?i[a]:o);for(var s=0;s<n;s++)ee(i[s]),Y(t.clauses[s].statements);se()}else ye(Be.visitNode(e,j,Be.isStatement));var d}(e);case 222:return q(i=e)?(a=Be.idText(i.label),s=Q(),te({kind:4,isScript:!1,labelText:a,breakLabel:s}),X(i.statement),le()):ye(Be.visitNode(i,j,Be.isStatement));case 223:return r=e,Ee(9,[Be.visitNode(r.expression,j,Be.isExpression)],r);case 224:return q(t=e)?(n=Q(),o=Q(),ee(n),te({kind:0,state:0,startLabel:n,endLabel:o}),me(),X(t.tryBlock),t.catchClause&&(function(e){var t;if(Be.Debug.assert(0===re()),Be.isGeneratedIdentifier(e.name))t=e.name,I(e.name);else{var n=Be.idText(e.name);t=$(n),b||(b=Be.createMap(),k=[],v.enableSubstitution(71)),b.set(n,!0),k[Be.getOriginalNodeId(e)]=t}var o=oe();Be.Debug.assert(o.state<1),be(o.endLabel);var r=Q();ee(r),o.state=1,o.catchVariable=t,o.catchLabel=r,ve(t,Be.createCall(Be.createPropertyAccess(R,"sent"),void 0,[])),me()}(t.catchClause.variableDeclaration),X(t.catchClause.block)),t.finallyBlock&&(function(){Be.Debug.assert(0===re());var e=oe();Be.Debug.assert(e.state<2),be(e.endLabel);var t=Q();ee(t),e.state=2,e.finallyLabel=t}(),X(t.finallyBlock)),function(){Be.Debug.assert(0===re());var e=ne();e.state<2?be(e.endLabel):Ee(10),ee(e.endLabel),me(),e.state=3}()):ye(Be.visitEachChild(t,j,v));default:return ye(Be.visitNode(e,j,Be.isStatement))}var t,n,o,r,i,a,s,l,c,u,g,p,d,_,f,h,m,y}(e),y=t}function J(e){for(var t=0,n=e.declarations;t<n.length;t++){var o=n[t],r=Be.getSynthesizedClone(o.name);Be.setCommentRange(r,o.name),I(r)}for(var i=Be.getInitializedVariables(e),a=i.length,s=0,l=[];s<a;){for(var c=s;c<a&&!(q((o=i[c]).initializer)&&0<l.length);c++)l.push(d(o));l.length&&(ye(Be.createStatement(Be.inlineExpressions(l))),s+=l.length,l=[])}}function d(e){return Be.setSourceMapRange(Be.createAssignment(Be.setSourceMapRange(Be.getSynthesizedClone(e.name),e.name),Be.visitNode(e.initializer,j,Be.isExpression)),e)}function q(e){return e&&0!=(16777216&e.transformFlags)}function _(e){for(var t=e.length,n=0;n<t;n++)if(q(e[n]))return n;return-1}function Z(e){var t;return Be.isGeneratedIdentifier(e)||4096&Be.getEmitFlags(e)?e:(ve(t=Be.createTempVariable(I),e,e),t)}function $(e){var t=e?Be.createUniqueName(e):Be.createTempVariable(void 0);return I(t),t}function Q(){x||(x=[]);var e=W;return W++,x[e]=-1,e}function ee(e){Be.Debug.assert(void 0!==x,"No labels were defined."),x[e]=N?N.length:0}function te(e){T||(T=[],S=[],E=[],C=[]);var t=S.length;return S[t]=0,E[t]=N?N.length:0,T[t]=e,C.push(e),t}function ne(){var e=oe();Be.Debug.assert(void 0!==e,"beginBlock was never called.");var t=S.length;return S[t]=1,E[t]=N?N.length:0,T[t]=e,C.pop(),e}function oe(){return Be.lastOrUndefined(C)}function re(){var e=oe();return e&&e.kind}function f(){te({kind:3,isScript:!0,breakLabel:-1,continueLabel:-1})}function ie(e){var t=Q();return te({kind:3,isScript:!1,breakLabel:t,continueLabel:e}),t}function ae(){Be.Debug.assert(3===re());var e=ne(),t=e.breakLabel;e.isScript||ee(t)}function se(){Be.Debug.assert(2===re());var e=ne(),t=e.breakLabel;e.isScript||ee(t)}function le(){Be.Debug.assert(4===re());var e=ne();e.isScript||ee(e.breakLabel)}function h(e){return 2===e.kind||3===e.kind}function ce(e){return 4===e.kind}function ue(e){return 3===e.kind}function ge(e,t){for(var n=t;0<=n;n--){var o=C[n];if(!ce(o))break;if(o.labelText===e)return!0}return!1}function pe(e){if(C)if(e)for(var t=C.length-1;0<=t;t--){if(ce(n=C[t])&&n.labelText===e)return n.breakLabel;if(h(n)&&ge(e,t-1))return n.breakLabel}else for(t=C.length-1;0<=t;t--){var n;if(h(n=C[t]))return n.breakLabel}return 0}function de(e){if(C)if(e){for(var t=C.length-1;0<=t;t--)if(ue(n=C[t])&&ge(e,t-1))return n.continueLabel}else for(t=C.length-1;0<=t;t--){var n;if(ue(n=C[t]))return n.continueLabel}return 0}function _e(e){if(0<e){void 0===A&&(A=[]);var t=Be.createLiteral(-1);return void 0===A[e]?A[e]=[t]:A[e].push(t),t}return Be.createOmittedExpression()}function fe(e){var t=Be.createLiteral(e);return Be.addSyntheticTrailingComment(t,3,function(e){switch(e){case 2:return"return";case 3:return"break";case 4:return"yield";case 5:return"yield*";case 7:return"endfinally"}}(e)),t}function he(e,t){return Be.Debug.assertLessThan(0,e,"Invalid label"),Be.setTextRange(Be.createReturn(Be.createArrayLiteral([fe(3),_e(e)])),t)}function me(){Ee(0)}function ye(e){e?Ee(1,[e]):me()}function ve(e,t,n){Ee(2,[e,t],n)}function be(e,t){Ee(3,[e],t)}function ke(e,t,n){Ee(4,[e,t],n)}function Te(e,t,n){Ee(5,[e,t],n)}function Ee(e,t,n){void 0===N&&(N=[],w=[],O=[]),void 0===x&&ee(Q());var o=N.length;N[o]=e,w[o]=t,O[o]=n}function Se(e){(function(e){if(!M)return!0;if(!x||!A)return!1;for(var t=0;t<x.length;t++)if(x[t]===e&&A[t])return!0;return!1})(e)&&(Ce(e),De(V=void 0,void 0)),U&&F&&n(!1),function(){if(void 0!==A&&void 0!==L)for(var e=0;e<L.length;e++){var t=L[e];if(void 0!==t)for(var n=0,o=t;n<o.length;n++){var r=o[n],i=A[r];if(void 0!==i)for(var a=0,s=i;a<s.length;a++){var l=s[a];l.text=String(e)}}}}()}function n(e){if(F||(F=[]),U){if(V)for(var t=V.length-1;0<=t;t--){var n=V[t];U=[Be.createWith(n.expression,Be.createBlock(U))]}if(G){var o=G.startLabel,r=G.catchLabel,i=G.finallyLabel,a=G.endLabel;U.unshift(Be.createStatement(Be.createCall(Be.createPropertyAccess(Be.createPropertyAccess(R,"trys"),"push"),void 0,[Be.createArrayLiteral([_e(o),_e(r),_e(i),_e(a)])]))),G=void 0}e&&U.push(Be.createStatement(Be.createAssignment(Be.createPropertyAccess(R,"label"),Be.createLiteral(z+1))))}F.push(Be.createCaseClause(Be.createLiteral(z),U||[])),U=void 0}function Ce(e){if(x)for(var t=0;t<x.length;t++)x[t]===e&&(U&&(n(!P),M=P=!1,z++),void 0===L&&(L=[]),void 0===L[z]?L[z]=[t]:L[z].push(t))}function xe(e){if(Ce(e),function(e){if(T)for(;K<S.length&&E[K]<=e;K++){var t=T[K],n=S[K];switch(t.kind){case 0:0===n?(H||(H=[]),U||(U=[]),H.push(G),G=t):1===n&&(G=H.pop());break;case 1:0===n?(V||(V=[]),V.push(t)):1===n&&V.pop()}}}(e),!P){M=P=!1;var t=N[e];if(0!==t){if(10===t)return P=!0,void Ae(Be.createReturn(Be.createArrayLiteral([fe(7)])));var n=w[e];if(1===t)return Ae(n[0]);var o,r,i,a,s,l,c,u,g,p,d,_,f,h,m,y,v,b=O[e];switch(t){case 2:return m=n[0],y=n[1],v=b,void Ae(Be.setTextRange(Be.createStatement(Be.createAssignment(m,y)),v));case 3:return f=n[0],h=b,P=!0,void Ae(Be.setEmitFlags(Be.setTextRange(Be.createReturn(Be.createArrayLiteral([fe(3),_e(f)])),h),384));case 4:return p=n[0],d=n[1],_=b,void Ae(Be.setEmitFlags(Be.createIf(d,Be.setEmitFlags(Be.setTextRange(Be.createReturn(Be.createArrayLiteral([fe(3),_e(p)])),_),384)),1));case 5:return c=n[0],u=n[1],g=b,void Ae(Be.setEmitFlags(Be.createIf(Be.createLogicalNot(u),Be.setEmitFlags(Be.setTextRange(Be.createReturn(Be.createArrayLiteral([fe(3),_e(c)])),g),384)),1));case 6:return s=n[0],l=b,P=!0,void Ae(Be.setEmitFlags(Be.setTextRange(Be.createReturn(Be.createArrayLiteral(s?[fe(4),s]:[fe(4)])),l),384));case 7:return i=n[0],a=b,P=!0,void Ae(Be.setEmitFlags(Be.setTextRange(Be.createReturn(Be.createArrayLiteral([fe(5),i])),a),384));case 8:return De(n[0],b);case 9:return o=n[0],r=b,M=P=!0,void Ae(Be.setTextRange(Be.createThrow(o),r))}}}}function Ae(e){e&&(U?U.push(e):U=[e])}function De(e,t){M=P=!0,Ae(Be.setEmitFlags(Be.setTextRange(Be.createReturn(Be.createArrayLiteral(e?[fe(2),e]:[fe(2)])),t),384))}}),priority:6,text:'\n            var __generator = (this && this.__generator) || function (thisArg, body) {\n                var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n                return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n                function verb(n) { return function (v) { return step([n, v]); }; }\n                function step(op) {\n                    if (f) throw new TypeError("Generator is already executing.");\n                    while (_) try {\n                        if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;\n                        if (y = 0, t) op = [0, t.value];\n                        switch (op[0]) {\n                            case 0: case 1: t = op; break;\n                            case 4: _.label++; return { value: op[1], done: false };\n                            case 5: _.label++; y = op[1]; op = [0]; continue;\n                            case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                            default:\n                                if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                                if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                                if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                                if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                                if (t[2]) _.ops.pop();\n                                _.trys.pop(); continue;\n                        }\n                        op = body.call(thisArg, _);\n                    } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n                    if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n                }\n            };'}}(ts||(ts={})),function(K){K.transformModule=function(u){var i=u.startLexicalEnvironment,a=u.endLexicalEnvironment,r=u.hoistVariableDeclaration,d=u.getCompilerOptions(),_=u.getEmitResolver(),f=u.getEmitHost(),s=K.getEmitScriptTarget(d),c=K.getEmitModuleKind(d),n=u.onSubstituteNode,o=u.onEmitNode;u.onSubstituteNode=function(e,t){return(t=n(e,t)).id&&l[t.id]?t:1===e?function(e){switch(e.kind){case 71:return V(e);case 194:return function(e){if(K.isAssignmentOperator(e.operatorToken.kind)&&K.isIdentifier(e.left)&&!K.isGeneratedIdentifier(e.left)&&!K.isLocalName(e.left)&&!K.isDeclarationNameOfEnumOrNamespace(e.left)){var t=W(e.left);if(t){for(var n=e,o=0,r=t;o<r.length;o++){var i=r[o];l[K.getNodeId(n)]=!0,n=H(i,n,e)}return n}}return e}(e);case 193:case 192:return function(e){if((43===e.operator||44===e.operator)&&K.isIdentifier(e.operand)&&!K.isGeneratedIdentifier(e.operand)&&!K.isLocalName(e.operand)&&!K.isDeclarationNameOfEnumOrNamespace(e.operand)){var t=W(e.operand);if(t){for(var n=193===e.kind?K.setTextRange(K.createBinary(e.operand,K.createToken(43===e.operator?59:60),K.createLiteral(1)),e):e,o=0,r=t;o<r.length;o++){var i=r[o];l[K.getNodeId(n)]=!0,n=H(i,n)}return n}}return e}(e)}return e}(t):K.isShorthandPropertyAssignment(t)?function(e){var t=e.name,n=V(t);if(n!==t){if(e.objectAssignmentInitializer){var o=K.createAssignment(n,e.objectAssignmentInitializer);return K.setTextRange(K.createPropertyAssignment(t,o),e)}return K.setTextRange(K.createPropertyAssignment(t,n),e)}return e}(t):t},u.onEmitNode=function(e,t,n){265===t.kind?(h=t,m=p[K.getOriginalNodeId(h)],l=[],o(e,t,n),l=m=h=void 0):o(e,t,n)},u.enableSubstitution(71),u.enableSubstitution(194),u.enableSubstitution(192),u.enableSubstitution(193),u.enableSubstitution(262),u.enableEmitNotification(265);var h,m,l,g,p=[],y=[];return function(e){if(e.isDeclarationFile||!(K.isExternalModule(e)||d.isolatedModules||67108864&e.transformFlags))return e;h=e,m=K.collectExternalModuleInfo(e,_,d),p[K.getOriginalNodeId(e)]=m;var t=function(e){switch(e){case K.ModuleKind.AMD:return k;case K.ModuleKind.UMD:return T;default:return b}}(c)(e);return m=h=void 0,g=!1,K.aggregateTransformFlags(t)};function v(){return!(m.exportEquals||!K.isExternalModule(h))}function b(e){i();var t=[],n=d.alwaysStrict||!d.noImplicitUseStrict&&K.isExternalModule(h),o=K.addPrologue(t,e.statements,n,x);v()&&K.append(t,U()),K.append(t,K.visitNode(m.externalHelpersImportDeclaration,x,K.isStatement)),K.addRange(t,K.visitNodes(e.statements,x,K.isStatement,o)),C(t,!1),K.addRange(t,a());var r=K.updateSourceFileNode(e,K.setTextRange(K.createNodeArray(t),e.statements));return m.hasExportStarsToExportValues&&!d.importHelpers&&K.addEmitHelper(r,z),K.addEmitHelpers(r,u.readEmitHelpers()),r}function k(e){var t=K.createIdentifier("define"),n=K.tryGetModuleNameFromFile(e,f,d),o=E(e,!0),r=o.aliasedModuleNames,i=o.unaliasedModuleNames,a=o.importAliasNames;return K.updateSourceFileNode(e,K.setTextRange(K.createNodeArray([K.createStatement(K.createCall(t,void 0,(n?[n]:[]).concat([K.createArrayLiteral([K.createLiteral("require"),K.createLiteral("exports")].concat(r,i)),K.createFunctionExpression(void 0,void 0,void 0,void 0,[K.createParameter(void 0,void 0,void 0,"require"),K.createParameter(void 0,void 0,void 0,"exports")].concat(a),void 0,S(e))])))]),e.statements))}function T(e){var t=E(e,!1),n=t.aliasedModuleNames,o=t.unaliasedModuleNames,r=t.importAliasNames,i=K.tryGetModuleNameFromFile(e,f,d),a=K.createFunctionExpression(void 0,void 0,void 0,void 0,[K.createParameter(void 0,void 0,void 0,"factory")],void 0,K.setTextRange(K.createBlock([K.createIf(K.createLogicalAnd(K.createTypeCheck(K.createIdentifier("module"),"object"),K.createTypeCheck(K.createPropertyAccess(K.createIdentifier("module"),"exports"),"object")),K.createBlock([K.createVariableStatement(void 0,[K.createVariableDeclaration("v",void 0,K.createCall(K.createIdentifier("factory"),void 0,[K.createIdentifier("require"),K.createIdentifier("exports")]))]),K.setEmitFlags(K.createIf(K.createStrictInequality(K.createIdentifier("v"),K.createIdentifier("undefined")),K.createStatement(K.createAssignment(K.createPropertyAccess(K.createIdentifier("module"),"exports"),K.createIdentifier("v")))),1)]),K.createIf(K.createLogicalAnd(K.createTypeCheck(K.createIdentifier("define"),"function"),K.createPropertyAccess(K.createIdentifier("define"),"amd")),K.createBlock([K.createStatement(K.createCall(K.createIdentifier("define"),void 0,(i?[i]:[]).concat([K.createArrayLiteral([K.createLiteral("require"),K.createLiteral("exports")].concat(n,o)),K.createIdentifier("factory")])))])))],!0),void 0));return K.updateSourceFileNode(e,K.setTextRange(K.createNodeArray([K.createStatement(K.createCall(a,void 0,[K.createFunctionExpression(void 0,void 0,void 0,void 0,[K.createParameter(void 0,void 0,void 0,"require"),K.createParameter(void 0,void 0,void 0,"exports")].concat(r),void 0,S(e))]))]),e.statements))}function E(e,t){for(var n=[],o=[],r=[],i=0,a=e.amdDependencies;i<a.length;i++){var s=a[i];s.name?(n.push(K.createLiteral(s.path)),r.push(K.createParameter(void 0,void 0,void 0,s.name))):o.push(K.createLiteral(s.path))}for(var l=0,c=m.externalImports;l<c.length;l++){var u=c[l],g=K.getExternalModuleNameLiteral(u,h,f,_,d),p=K.getLocalNameForExternalImport(u,h);g&&(t&&p?(K.setEmitFlags(p,4),n.push(g),r.push(K.createParameter(void 0,void 0,void 0,p))):o.push(g))}return{aliasedModuleNames:n,unaliasedModuleNames:o,importAliasNames:r}}function S(e){i();var t=[],n=K.addPrologue(t,e.statements,!d.noImplicitUseStrict,x);v()&&K.append(t,U()),K.append(t,K.visitNode(m.externalHelpersImportDeclaration,x,K.isStatement)),K.addRange(t,K.visitNodes(e.statements,x,K.isStatement,n)),C(t,!0),K.addRange(t,a());var o=K.createBlock(t,!0);return m.hasExportStarsToExportValues&&!d.importHelpers&&K.addEmitHelper(o,z),g&&K.addEmitHelper(o,j),o}function C(e,t){if(m.exportEquals){var n=K.visitNode(m.exportEquals.expression,A);if(n)if(t){var o=K.createReturn(n);K.setTextRange(o,m.exportEquals),K.setEmitFlags(o,1920),e.push(o)}else o=K.createStatement(K.createAssignment(K.createPropertyAccess(K.createIdentifier("module"),"exports"),n)),K.setTextRange(o,m.exportEquals),K.setEmitFlags(o,1536),e.push(o)}}function x(e){switch(e.kind){case 238:return function(e){var t,n=K.getNamespaceDeclarationNode(e);if(c!==K.ModuleKind.AMD){if(!e.importClause)return K.setTextRange(K.createStatement(I(e)),e);var o=[];n&&!K.isDefaultImport(e)?o.push(K.createVariableDeclaration(K.getSynthesizedClone(n.name),void 0,I(e))):(o.push(K.createVariableDeclaration(K.getGeneratedNameForNode(e),void 0,I(e))),n&&K.isDefaultImport(e)&&o.push(K.createVariableDeclaration(K.getSynthesizedClone(n.name),void 0,K.getGeneratedNameForNode(e)))),t=K.append(t,K.setTextRange(K.createVariableStatement(void 0,K.createVariableDeclarationList(o,2<=s?2:0)),e))}else n&&K.isDefaultImport(e)&&(t=K.append(t,K.createVariableStatement(void 0,K.createVariableDeclarationList([K.setTextRange(K.createVariableDeclaration(K.getSynthesizedClone(n.name),void 0,K.getGeneratedNameForNode(e)),e)],2<=s?2:0))));if(N(e)){var r=K.getOriginalNodeId(e);y[r]=w(y[r],e)}else t=w(t,e);return K.singleOrMany(t)}(e);case 237:return function(e){var t;if(K.Debug.assert(K.isExternalModuleImportEqualsDeclaration(e),"import= for internal module references should be handled in an earlier transformer."),c!==K.ModuleKind.AMD?t=K.hasModifier(e,1)?K.append(t,K.setTextRange(K.createStatement(H(e.name,I(e))),e)):K.append(t,K.setTextRange(K.createVariableStatement(void 0,K.createVariableDeclarationList([K.createVariableDeclaration(K.getSynthesizedClone(e.name),void 0,I(e))],2<=s?2:0)),e)):K.hasModifier(e,1)&&(t=K.append(t,K.setTextRange(K.createStatement(H(K.getExportName(e),K.getLocalName(e))),e))),N(e)){var n=K.getOriginalNodeId(e);y[n]=O(y[n],e)}else t=O(t,e);return K.singleOrMany(t)}(e);case 244:return function(e){if(e.moduleSpecifier){var t,n,o=K.getGeneratedNameForNode(e);if(e.exportClause){var r=[];c!==K.ModuleKind.AMD&&r.push(K.setTextRange(K.createVariableStatement(void 0,K.createVariableDeclarationList([K.createVariableDeclaration(o,void 0,I(e))])),e));for(var i=0,a=e.exportClause.elements;i<a.length;i++){var s=a[i],l=K.createPropertyAccess(o,s.propertyName||s.name);r.push(K.setTextRange(K.createStatement(H(K.getExportName(s),l)),s))}return K.singleOrMany(r)}return K.setTextRange(K.createStatement((t=u,n=c!==K.ModuleKind.AMD?I(e):o,t.getCompilerOptions().importHelpers?K.createCall(K.getHelperName("__exportStar"),void 0,[n,K.createIdentifier("exports")]):K.createCall(K.createIdentifier("__export"),void 0,[n]))),e)}}(e);case 243:return function(e){if(!e.isExportEquals){var t,n=e.original;if(n&&N(n)){var o=K.getOriginalNodeId(e);y[o]=F(y[o],K.createIdentifier("default"),K.visitNode(e.expression,A),e,!0)}else t=F(t,K.createIdentifier("default"),K.visitNode(e.expression,A),e,!0);return K.singleOrMany(t)}}(e);case 208:return function(e){var t,n,o,r;if(K.hasModifier(e,1)){for(var i=void 0,a=0,s=e.declarationList.declarations;a<s.length;a++){var l=s[a];K.isIdentifier(l.name)&&K.isLocalName(l.name)?(i||(i=K.visitNodes(e.modifiers,G,K.isModifier)),n=K.append(n,l)):l.initializer&&(o=K.append(o,(r=l,K.isBindingPattern(r.name)?K.flattenDestructuringAssignment(K.visitNode(r,A),void 0,u,0,!1,H):K.createAssignment(K.setTextRange(K.createPropertyAccess(K.createIdentifier("exports"),r.name),r.name),K.visitNode(r.initializer,A)))))}n&&(t=K.append(t,K.updateVariableStatement(e,i,K.updateVariableDeclarationList(e.declarationList,n)))),o&&(t=K.append(t,K.setTextRange(K.createStatement(K.inlineExpressions(o)),e)))}else t=K.append(t,K.visitEachChild(e,A,u));if(N(e)){var c=K.getOriginalNodeId(e);y[c]=R(y[c],e)}else t=R(t,e);return K.singleOrMany(t)}(e);case 228:return function(e){var t;if(t=K.hasModifier(e,1)?K.append(t,K.setOriginalNode(K.setTextRange(K.createFunctionDeclaration(void 0,K.visitNodes(e.modifiers,G,K.isModifier),e.asteriskToken,K.getDeclarationName(e,!0,!0),void 0,K.visitNodes(e.parameters,A),void 0,K.visitEachChild(e.body,A,u)),e),e)):K.append(t,K.visitEachChild(e,A,u)),N(e)){var n=K.getOriginalNodeId(e);y[n]=P(y[n],e)}else t=P(t,e);return K.singleOrMany(t)}(e);case 229:return function(e){var t;if(t=K.hasModifier(e,1)?K.append(t,K.setOriginalNode(K.setTextRange(K.createClassDeclaration(void 0,K.visitNodes(e.modifiers,G,K.isModifier),K.getDeclarationName(e,!0,!0),void 0,K.visitNodes(e.heritageClauses,A),K.visitNodes(e.members,A)),e),e)):K.append(t,K.visitEachChild(e,A,u)),N(e)){var n=K.getOriginalNodeId(e);y[n]=P(y[n],e)}else t=P(t,e);return K.singleOrMany(t)}(e);case 290:return function(e){if(N(e)&&208===e.original.kind){var t=K.getOriginalNodeId(e);y[t]=R(y[t],e.original)}return e}(e);case 291:return t=e,n=K.getOriginalNodeId(t),(o=y[n])?(delete y[n],K.append(o,t)):t;default:return K.visitEachChild(e,A,u)}var t,n,o}function A(e){return 67108864&e.transformFlags?K.isImportCall(e)?function(e){var t=K.visitNode(K.firstOrUndefined(e.arguments),A),n=!!(16384&e.transformFlags);switch(d.module){case K.ModuleKind.AMD:return D(t,n);case K.ModuleKind.UMD:return function(e,t){if(g=!0,K.isSimpleCopiableExpression(e)){var n=K.isGeneratedIdentifier(e)?e:K.isStringLiteral(e)?K.createLiteral(e):K.setEmitFlags(K.setTextRange(K.getSynthesizedClone(e),e),1536);return K.createConditional(K.createIdentifier("__syncRequire"),B(e,t),D(n,t))}var o=K.createTempVariable(r);return K.createComma(K.createAssignment(o,e),K.createConditional(K.createIdentifier("__syncRequire"),B(o,t),D(o,t)))}(t,n);case K.ModuleKind.CommonJS:default:return B(t,n)}}(e):K.visitEachChild(e,A,u):e}function D(e,t){var n,o=K.createUniqueName("resolve"),r=K.createUniqueName("reject"),i=[K.createParameter(void 0,void 0,void 0,o),K.createParameter(void 0,void 0,void 0,r)],a=K.createBlock([K.createStatement(K.createCall(K.createIdentifier("require"),void 0,[K.createArrayLiteral([e||K.createOmittedExpression()]),o,r]))]);return 2<=s?n=K.createArrowFunction(void 0,void 0,i,void 0,void 0,a):(n=K.createFunctionExpression(void 0,void 0,void 0,void 0,i,void 0,a),t&&K.setEmitFlags(n,8)),K.createNew(K.createIdentifier("Promise"),void 0,[n])}function B(e,t){var n,o=K.createCall(K.createPropertyAccess(K.createIdentifier("Promise"),"resolve"),void 0,[]),r=K.createCall(K.createIdentifier("require"),void 0,e?[e]:[]);return 2<=s?n=K.createArrowFunction(void 0,void 0,[],void 0,void 0,r):(n=K.createFunctionExpression(void 0,void 0,void 0,void 0,[],void 0,K.createBlock([K.createReturn(r)])),t&&K.setEmitFlags(n,8)),K.createCall(K.createPropertyAccess(o,"then"),void 0,[n])}function I(e){var t=K.getExternalModuleNameLiteral(e,h,f,_,d),n=[];return t&&n.push(t),K.createCall(K.createIdentifier("require"),void 0,n)}function N(e){return 0!=(4194304&K.getEmitFlags(e))}function w(e,t){if(m.exportEquals)return e;var n=t.importClause;if(!n)return e;n.name&&(e=M(e,n));var o=n.namedBindings;if(o)switch(o.kind){case 240:e=M(e,o);break;case 241:for(var r=0,i=o.elements;r<i.length;r++)e=M(e,i[r])}return e}function O(e,t){return m.exportEquals?e:M(e,t)}function R(e,t){if(m.exportEquals)return e;for(var n=0,o=t.declarationList.declarations;n<o.length;n++)e=L(e,o[n]);return e}function L(e,t){if(m.exportEquals)return e;if(K.isBindingPattern(t.name))for(var n=0,o=t.name.elements;n<o.length;n++){var r=o[n];K.isOmittedExpression(r)||(e=L(e,r))}else K.isGeneratedIdentifier(t.name)||(e=M(e,t));return e}function P(e,t){return m.exportEquals||(K.hasModifier(t,1)&&(e=F(e,K.hasModifier(t,512)?K.createIdentifier("default"):K.getDeclarationName(t),K.getLocalName(t),t)),t.name&&(e=M(e,t))),e}function M(e,t){var n=K.getDeclarationName(t),o=m.exportSpecifiers.get(K.idText(n));if(o)for(var r=0,i=o;r<i.length;r++){var a=i[r];e=F(e,a.name,n,a.name)}return e}function F(e,t,n,o,r){return e=K.append(e,(i=t,a=n,s=o,l=r,c=K.setTextRange(K.createStatement(H(i,a)),s),K.startOnNewLine(c),l||K.setEmitFlags(c,1536),c));var i,a,s,l,c}function U(){var e;return e=0===s?K.createStatement(H(K.createIdentifier("__esModule"),K.createLiteral(!0))):K.createStatement(K.createCall(K.createPropertyAccess(K.createIdentifier("Object"),"defineProperty"),void 0,[K.createIdentifier("exports"),K.createLiteral("__esModule"),K.createObjectLiteral([K.createPropertyAssignment("value",K.createLiteral(!0))])])),K.setEmitFlags(e,1048576),e}function H(e,t,n){return K.setTextRange(K.createAssignment(K.createPropertyAccess(K.createIdentifier("exports"),K.getSynthesizedClone(e)),t),n)}function G(e){switch(e.kind){case 84:case 79:return}return e}function V(e){if(4096&K.getEmitFlags(e)){var t=K.getExternalHelpersModuleName(h);return t?K.createPropertyAccess(t,e):e}if(!K.isGeneratedIdentifier(e)&&!K.isLocalName(e)){var n=_.getReferencedExportContainer(e,K.isExportName(e));if(n&&265===n.kind)return K.setTextRange(K.createPropertyAccess(K.createIdentifier("exports"),K.getSynthesizedClone(e)),e);var o=_.getReferencedImportDeclaration(e);if(o){if(K.isImportClause(o))return K.setTextRange(K.createPropertyAccess(K.getGeneratedNameForNode(o.parent),K.createIdentifier("default")),e);if(K.isImportSpecifier(o)){var r=o.propertyName||o.name;return K.setTextRange(K.createPropertyAccess(K.getGeneratedNameForNode(o.parent.parent.parent),K.getSynthesizedClone(r)),e)}}}return e}function W(e){if(!K.isGeneratedIdentifier(e)){var t=_.getReferencedImportDeclaration(e)||_.getReferencedValueDeclaration(e);if(t)return m&&m.exportedBindings[K.getOriginalNodeId(t)]}}};var z={name:"typescript:export-star",scoped:!0,text:"\n            function __export(m) {\n                for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n            }\n        "};var j={name:"typescript:dynamicimport-sync-require",scoped:!0,text:'\n            var __syncRequire = typeof module === "object" && typeof module.exports === "object";'}}(ts||(ts={})),function(X){X.transformSystemModule=function(S){var l=S.startLexicalEnvironment,c=S.endLexicalEnvironment,C=S.hoistVariableDeclaration,u=S.getCompilerOptions(),g=S.getEmitResolver(),p=S.getEmitHost(),o=S.onSubstituteNode,r=S.onEmitNode;S.onSubstituteNode=function(e,t){return n=t=o(e,t),_&&n.id&&_[n.id]?t:1===e?function(e){switch(e.kind){case 71:return function(e){if(4096&X.getEmitFlags(e)){var t=X.getExternalHelpersModuleName(m);return t?X.createPropertyAccess(t,e):e}if(!X.isGeneratedIdentifier(e)&&!X.isLocalName(e)){var n=g.getReferencedImportDeclaration(e);if(n){if(X.isImportClause(n))return X.setTextRange(X.createPropertyAccess(X.getGeneratedNameForNode(n.parent),X.createIdentifier("default")),e);if(X.isImportSpecifier(n))return X.setTextRange(X.createPropertyAccess(X.getGeneratedNameForNode(n.parent.parent.parent),X.getSynthesizedClone(n.propertyName||n.name)),e)}}return e}(e);case 194:return function(e){if(X.isAssignmentOperator(e.operatorToken.kind)&&X.isIdentifier(e.left)&&!X.isGeneratedIdentifier(e.left)&&!X.isLocalName(e.left)&&!X.isDeclarationNameOfEnumOrNamespace(e.left)){var t=j(e.left);if(t){for(var n=e,o=0,r=t;o<r.length;o++){var i=r[o];n=H(i,Y(n))}return n}}return e}(e);case 192:case 193:return function(e){if((43===e.operator||44===e.operator)&&X.isIdentifier(e.operand)&&!X.isGeneratedIdentifier(e.operand)&&!X.isLocalName(e.operand)&&!X.isDeclarationNameOfEnumOrNamespace(e.operand)){var t=j(e.operand);if(t){for(var n=193===e.kind?X.setTextRange(X.createPrefix(e.operator,e.operand),e):e,o=0,r=t;o<r.length;o++){var i=r[o];n=H(i,Y(n))}return 193===e.kind&&(n=43===e.operator?X.createSubtract(Y(n),X.createLiteral(1)):X.createAdd(Y(n),X.createLiteral(1))),n}}return e}(e)}return e}(t):t;var n},S.onEmitNode=function(e,t,n){if(265===t.kind){var o=X.getOriginalNodeId(t);m=t,y=f[o],v=h[o],(_=b[o])&&delete b[o],r(e,t,n),_=v=y=m=void 0}else r(e,t,n)},S.enableSubstitution(71),S.enableSubstitution(194),S.enableSubstitution(192),S.enableSubstitution(193),S.enableEmitNotification(265);var m,y,v,d,x,A,_,f=[],D=[],h=[],b=[];return function(e){if(e.isDeclarationFile||!(X.isEffectiveExternalModule(e,u)||67108864&e.transformFlags))return e;var t=X.getOriginalNodeId(e);A=m=e,y=f[t]=X.collectExternalModuleInfo(e,g,u),v=X.createUniqueName("exports"),h[t]=v,d=X.createUniqueName("context");var n=function(e){for(var t=X.createMap(),n=[],o=0;o<e.length;o++){var r=e[o],i=X.getExternalModuleNameLiteral(r,m,p,g,u);if(i){var a=i.text,s=t.get(a);void 0!==s?n[s].externalImports.push(r):(t.set(a,n.length),n.push({name:i,externalImports:[r]}))}}return n}(y.externalImports),o=function(e,t){var n=[];l();var o=u.alwaysStrict||!u.noImplicitUseStrict&&X.isExternalModule(m),r=X.addPrologue(n,e.statements,o,T);n.push(X.createVariableStatement(void 0,X.createVariableDeclarationList([X.createVariableDeclaration("__moduleName",void 0,X.createLogicalAnd(d,X.createPropertyAccess(d,"id")))]))),X.visitNode(y.externalHelpersImportDeclaration,T,X.isStatement);var i=X.visitNodes(e.statements,T,X.isStatement,r);X.addRange(n,x),X.addRange(n,c());var a=function(e){if(y.hasExportStarsToExportValues){if(!y.exportedNames&&0===y.exportSpecifiers.size){for(var t=!1,n=0,o=y.externalImports;n<o.length;n++){var r=o[n];if(244===r.kind&&r.exportClause){t=!0;break}}if(!t){var i=k(void 0);return e.push(i),i.name}}var a=[];if(y.exportedNames)for(var s=0,l=y.exportedNames;s<l.length;s++){var c=l[s];"default"!==c.escapedText&&a.push(X.createPropertyAssignment(X.createLiteral(c),X.createTrue()))}for(var u=0,g=y.externalImports;u<g.length;u++){var r=g[u];if(244===r.kind){var p=r;if(p.exportClause)for(var d=0,_=p.exportClause.elements;d<_.length;d++){var f=_[d];a.push(X.createPropertyAssignment(X.createLiteral(X.idText(f.name||f.propertyName)),X.createTrue()))}}}var h=X.createUniqueName("exportedNames");e.push(X.createVariableStatement(void 0,X.createVariableDeclarationList([X.createVariableDeclaration(h,void 0,X.createObjectLiteral(a,!0))])));var m=k(h);return e.push(m),m.name}}(n),s=X.createObjectLiteral([X.createPropertyAssignment("setters",function(e,t){for(var n=[],o=0,r=t;o<r.length;o++){for(var i=r[o],a=X.forEach(i.externalImports,function(e){return X.getLocalNameForExternalImport(e,m)}),s=a?X.getGeneratedNameForNode(a):X.createUniqueName(""),l=[],c=0,u=i.externalImports;c<u.length;c++){var g=u[c],p=X.getLocalNameForExternalImport(g,m);switch(g.kind){case 238:if(!g.importClause)break;case 237:X.Debug.assert(void 0!==p),l.push(X.createStatement(X.createAssignment(p,s)));break;case 244:if(X.Debug.assert(void 0!==p),g.exportClause){for(var d=[],_=0,f=g.exportClause.elements;_<f.length;_++){var h=f[_];d.push(X.createPropertyAssignment(X.createLiteral(X.idText(h.name)),X.createElementAccess(s,X.createLiteral(X.idText(h.propertyName||h.name)))))}l.push(X.createStatement(X.createCall(v,void 0,[X.createObjectLiteral(d,!0)])))}else l.push(X.createStatement(X.createCall(e,void 0,[s])))}}n.push(X.createFunctionExpression(void 0,void 0,void 0,void 0,[X.createParameter(void 0,void 0,void 0,s)],void 0,X.createBlock(l,!0)))}return X.createArrayLiteral(n,!0)}(a,t)),X.createPropertyAssignment("execute",X.createFunctionExpression(void 0,void 0,void 0,void 0,[],void 0,X.createBlock(i,!0)))]);return s.multiLine=!0,n.push(X.createReturn(s)),X.createBlock(n,!0)}(e,n),r=X.createFunctionExpression(void 0,void 0,void 0,void 0,[X.createParameter(void 0,void 0,void 0,v),X.createParameter(void 0,void 0,void 0,d)],void 0,o),i=X.tryGetModuleNameFromFile(e,p,u),a=X.createArrayLiteral(X.map(n,function(e){return e.name})),s=X.setEmitFlags(X.updateSourceFileNode(e,X.setTextRange(X.createNodeArray([X.createStatement(X.createCall(X.createPropertyAccess(X.createIdentifier("System"),"register"),void 0,i?[i,a,r]:[a,r]))]),e.statements)),1024);return u.outFile||u.out||X.moveEmitHelpers(s,o,function(e){return!e.scoped}),_&&(b[t]=_,_=void 0),A=x=d=v=y=m=void 0,X.aggregateTransformFlags(s)};function k(e){var t=X.createUniqueName("exportStar"),n=X.createIdentifier("m"),o=X.createIdentifier("n"),r=X.createIdentifier("exports"),i=X.createStrictInequality(o,X.createLiteral("default"));return e&&(i=X.createLogicalAnd(i,X.createLogicalNot(X.createCall(X.createPropertyAccess(e,"hasOwnProperty"),void 0,[o])))),X.createFunctionDeclaration(void 0,void 0,void 0,t,void 0,[X.createParameter(void 0,void 0,void 0,n)],void 0,X.createBlock([X.createVariableStatement(void 0,X.createVariableDeclarationList([X.createVariableDeclaration(r,void 0,X.createObjectLiteral([]))])),X.createForIn(X.createVariableDeclarationList([X.createVariableDeclaration(o,void 0)]),n,X.createBlock([X.setEmitFlags(X.createIf(i,X.createStatement(X.createAssignment(X.createElementAccess(r,o),X.createElementAccess(n,o)))),1)])),X.createStatement(X.createCall(v,void 0,[r]))],!0))}function T(e){switch(e.kind){case 238:return function(e){var t;if(e.importClause&&C(X.getLocalNameForExternalImport(e,m)),w(e)){var n=X.getOriginalNodeId(e);D[n]=E(D[n],e)}else t=E(t,e);return X.singleOrMany(t)}(e);case 237:return function(e){var t;if(X.Debug.assert(X.isExternalModuleImportEqualsDeclaration(e),"import= for internal module references should be handled in an earlier transformer."),C(X.getLocalNameForExternalImport(e,m)),w(e)){var n=X.getOriginalNodeId(e);D[n]=O(D[n],e)}else t=O(t,e);return X.singleOrMany(t)}(e);case 244:return;case 243:return function(e){if(!e.isExportEquals){var t=X.visitNode(e.expression,W,X.isExpression),n=e.original;if(!n||!w(n))return U(X.createIdentifier("default"),t,!0);var o=X.getOriginalNodeId(e);D[o]=F(D[o],X.createIdentifier("default"),t,!0)}}(e);default:return G(e)}}function B(e){if(X.isBindingPattern(e.name))for(var t=0,n=e.name.elements;t<n.length;t++){var o=n[t];X.isOmittedExpression(o)||B(o)}else C(X.getSynthesizedClone(e.name))}function I(e){return 0==(2097152&X.getEmitFlags(e))&&(265===A.kind||0==(3&X.getOriginalNode(e).flags))}function N(e,t){var n=t?i:a;return X.isBindingPattern(e.name)?X.flattenDestructuringAssignment(e,W,S,0,!1,n):e.initializer?n(e.name,X.visitNode(e.initializer,W,X.isExpression)):e.name}function i(e,t,n){return s(e,t,n,!0)}function a(e,t,n){return s(e,t,n,!1)}function s(e,t,n,o){return C(X.getSynthesizedClone(e)),o?H(e,Y(X.setTextRange(X.createAssignment(e,t),n))):Y(X.setTextRange(X.createAssignment(e,t),n))}function w(e){return 0!=(4194304&X.getEmitFlags(e))}function E(e,t){if(y.exportEquals)return e;var n=t.importClause;if(!n)return e;n.name&&(e=M(e,n));var o=n.namedBindings;if(o)switch(o.kind){case 240:e=M(e,o);break;case 241:for(var r=0,i=o.elements;r<i.length;r++)e=M(e,i[r])}return e}function O(e,t){return y.exportEquals?e:M(e,t)}function R(e,t,n){if(y.exportEquals)return e;for(var o=0,r=t.declarationList.declarations;o<r.length;o++){var i=r[o];(i.initializer||n)&&(e=L(e,i,n))}return e}function L(e,t,n){if(y.exportEquals)return e;if(X.isBindingPattern(t.name))for(var o=0,r=t.name.elements;o<r.length;o++){var i=r[o];X.isOmittedExpression(i)||(e=L(e,i,n))}else if(!X.isGeneratedIdentifier(t.name)){var a=void 0;n&&(e=F(e,t.name,X.getLocalName(t)),a=X.idText(t.name)),e=M(e,t,a)}return e}function P(e,t){if(y.exportEquals)return e;var n;if(X.hasModifier(t,1)){var o=X.hasModifier(t,512)?X.createLiteral("default"):t.name;e=F(e,o,X.getLocalName(t)),n=X.getTextOfIdentifierOrLiteral(o)}return t.name&&(e=M(e,t,n)),e}function M(e,t,n){if(y.exportEquals)return e;var o=X.getDeclarationName(t),r=y.exportSpecifiers.get(X.idText(o));if(r)for(var i=0,a=r;i<a.length;i++){var s=a[i];s.name.escapedText!==n&&(e=F(e,s.name,o))}return e}function F(e,t,n,o){return e=X.append(e,U(t,n,o))}function U(e,t,n){var o=X.createStatement(H(e,t));return X.startOnNewLine(o),n||X.setEmitFlags(o,1536),o}function H(e,t){var n=X.isIdentifier(e)?X.createLiteral(e):e;return X.setEmitFlags(t,1536|X.getEmitFlags(t)),X.setCommentRange(X.createCall(v,void 0,[n,t]),t)}function G(e){switch(e.kind){case 208:return function(e){if(!I(e.declarationList))return X.visitNode(e,W,X.isStatement);for(var t,n,o=X.hasModifier(e,1),r=w(e),i=0,a=e.declarationList.declarations;i<a.length;i++){var s=a[i];s.initializer?t=X.append(t,N(s,o&&!r)):B(s)}if(t&&(n=X.append(n,X.setTextRange(X.createStatement(X.inlineExpressions(t)),e))),r){var l=X.getOriginalNodeId(e);D[l]=R(D[l],e,o)}else n=R(n,e,!1);return X.singleOrMany(n)}(e);case 228:return function(e){if(x=X.hasModifier(e,1)?X.append(x,X.updateFunctionDeclaration(e,e.decorators,X.visitNodes(e.modifiers,z,X.isModifier),e.asteriskToken,X.getDeclarationName(e,!0,!0),void 0,X.visitNodes(e.parameters,W,X.isParameterDeclaration),void 0,X.visitNode(e.body,W,X.isBlock))):X.append(x,X.visitEachChild(e,W,S)),w(e)){var t=X.getOriginalNodeId(e);D[t]=P(D[t],e)}else x=P(x,e)}(e);case 229:return function(e){var t,n=X.getLocalName(e);if(C(n),t=X.append(t,X.setTextRange(X.createStatement(X.createAssignment(n,X.setTextRange(X.createClassExpression(void 0,e.name,void 0,X.visitNodes(e.heritageClauses,W,X.isHeritageClause),X.visitNodes(e.members,W,X.isClassElement)),e))),e)),w(e)){var o=X.getOriginalNodeId(e);D[o]=P(D[o],e)}else t=P(t,e);return X.singleOrMany(t)}(e);case 214:return E=A,A=T=e,T=X.updateFor(T,V(T.initializer),X.visitNode(T.condition,W,X.isExpression),X.visitNode(T.incrementor,W,X.isExpression),X.visitNode(T.statement,G,X.isStatement)),A=E,T;case 215:return k=A,A=b=e,b=X.updateForIn(b,V(b.initializer),X.visitNode(b.expression,W,X.isExpression),X.visitNode(b.statement,G,X.isStatement,X.liftToBlock)),A=k,b;case 216:return v=A,A=y=e,y=X.updateForOf(y,y.awaitModifier,V(y.initializer),X.visitNode(y.expression,W,X.isExpression),X.visitNode(y.statement,G,X.isStatement,X.liftToBlock)),A=v,y;case 212:return m=e,X.updateDo(m,X.visitNode(m.statement,G,X.isStatement,X.liftToBlock),X.visitNode(m.expression,W,X.isExpression));case 213:return h=e,X.updateWhile(h,X.visitNode(h.expression,W,X.isExpression),X.visitNode(h.statement,G,X.isStatement,X.liftToBlock));case 222:return f=e,X.updateLabel(f,f.label,X.visitNode(f.statement,G,X.isStatement,X.liftToBlock));case 220:return _=e,X.updateWith(_,X.visitNode(_.expression,W,X.isExpression),X.visitNode(_.statement,G,X.isStatement,X.liftToBlock));case 221:return d=e,X.updateSwitch(d,X.visitNode(d.expression,W,X.isExpression),X.visitNode(d.caseBlock,G,X.isCaseBlock));case 235:return p=A,A=g=e,g=X.updateCaseBlock(g,X.visitNodes(g.clauses,G,X.isCaseOrDefaultClause)),A=p,g;case 257:return u=e,X.updateCaseClause(u,X.visitNode(u.expression,W,X.isExpression),X.visitNodes(u.statements,G,X.isStatement));case 258:return c=e,X.visitEachChild(c,G,S);case 224:return l=e,X.visitEachChild(l,G,S);case 260:return s=A,A=a=e,a=X.updateCatchClause(a,a.variableDeclaration,X.visitNode(a.block,G,X.isBlock)),A=s,a;case 207:return i=A,A=r=e,r=X.visitEachChild(r,G,S),A=i,r;case 290:return function(e){if(w(e)&&208===e.original.kind){var t=X.getOriginalNodeId(e),n=X.hasModifier(e.original,1);D[t]=R(D[t],e.original,n)}return e}(e);case 291:return t=e,n=X.getOriginalNodeId(t),(o=D[n])?(delete D[n],X.append(o,t)):t;default:return W(e)}var t,n,o,r,i,a,s,l,c,u,g,p,d,_,f,h,m,y,v,b,k,T,E}function V(e){if(!e)return e;if(i=e,X.isVariableDeclarationList(i)&&I(i)){for(var t=void 0,n=0,o=e.declarations;n<o.length;n++){var r=o[n];t=X.append(t,N(r,!1)),r.initializer||B(r)}return t?X.inlineExpressions(t):X.createOmittedExpression()}return X.visitEachChild(e,G,S);var i}function W(e){return 1024&e.transformFlags&&194===e.kind?K((t=e).left)?X.flattenDestructuringAssignment(t,W,S,0,!0):X.visitEachChild(t,W,S):X.isImportCall(e)?(n=e,X.createCall(X.createPropertyAccess(d,X.createIdentifier("import")),void 0,X.some(n.arguments)?[X.visitNode(n.arguments[0],W)]:[])):2048&e.transformFlags||67108864&e.transformFlags?X.visitEachChild(e,W,S):e;var t,n}function K(e){if(X.isAssignmentExpression(e,!0))return K(e.left);if(X.isSpreadElement(e))return K(e.expression);if(X.isObjectLiteralExpression(e))return X.some(e.properties,K);if(X.isArrayLiteralExpression(e))return X.some(e.elements,K);if(X.isShorthandPropertyAssignment(e))return K(e.name);if(X.isPropertyAssignment(e))return K(e.initializer);if(X.isIdentifier(e)){var t=g.getReferencedExportContainer(e);return void 0!==t&&265===t.kind}return!1}function z(e){switch(e.kind){case 84:case 79:return}return e}function j(e){var t;if(!X.isGeneratedIdentifier(e)){var n=g.getReferencedImportDeclaration(e)||g.getReferencedValueDeclaration(e);if(n){var o=g.getReferencedExportContainer(e,!1);o&&265===o.kind&&(t=X.append(t,X.getDeclarationName(n))),t=X.addRange(t,y&&y.exportedBindings[X.getOriginalNodeId(n)])}}return t}function Y(e){return void 0===_&&(_=[]),_[X.getNodeId(e)]=!0,e}}}(ts||(ts={})),function(l){l.transformES2015Module=function(r){var o,i=r.getCompilerOptions(),a=r.onEmitNode,n=r.onSubstituteNode;return r.onEmitNode=function(e,t,n){l.isSourceFile(t)?(a(e,o=t,n),o=void 0):a(e,t,n)},r.onSubstituteNode=function(e,t){return t=n(e,t),l.isIdentifier(t)&&1===e?function(e){if(4096&l.getEmitFlags(e)){var t=l.getExternalHelpersModuleName(o);if(t)return l.createPropertyAccess(t,e)}return e}(t):t},r.enableEmitNotification(265),r.enableSubstitution(71),function(e){if(e.isDeclarationFile)return e;if(l.isExternalModule(e)||i.isolatedModules){var t=l.getOrCreateExternalHelpersModuleNameIfNeeded(e,i);if(t){var n=[],o=l.addPrologue(n,e.statements);return l.append(n,l.createImportDeclaration(void 0,void 0,l.createImportClause(void 0,l.createNamespaceImport(t)),l.createLiteral(l.externalHelpersModuleNameText))),l.addRange(n,l.visitNodes(e.statements,s,l.isStatement,o)),l.updateSourceFileNode(e,l.setTextRange(l.createNodeArray(n),e.statements))}return l.visitEachChild(e,s,r)}return e};function s(e){switch(e.kind){case 237:return;case 243:return(t=e).isExportEquals?void 0:t}var t;return e}}}(ts||(ts={})),function(C){var e,t,n,o;(t=e||(e={}))[t.Uninitialized=0]="Uninitialized",t[t.Initialized=1]="Initialized",t[t.Completed=2]="Completed",t[t.Disposed=3]="Disposed",(o=n||(n={}))[o.Substitution=1]="Substitution",o[o.EmitNotifications=2]="EmitNotifications",C.getTransformers=function(e,t){var n=e.jsx,o=C.getEmitScriptTarget(e),r=C.getEmitModuleKind(e),i=[];return C.addRange(i,t&&t.before),i.push(C.transformTypeScript),2===n&&i.push(C.transformJsx),o<5&&i.push(C.transformESNext),o<4&&i.push(C.transformES2017),o<3&&i.push(C.transformES2016),o<2&&(i.push(C.transformES2015),i.push(C.transformGenerators)),i.push(function(e){switch(e){case C.ModuleKind.ESNext:case C.ModuleKind.ES2015:return C.transformES2015Module;case C.ModuleKind.System:return C.transformSystemModule;default:return C.transformModule}}(r)),o<1&&i.push(C.transformES5),C.addRange(i,t&&t.after),i},C.transformNodes=function(e,t,n,o,r,i){for(var a,s,l,c=new Array(292),u=[],g=[],p=0,d=!1,_=function(e,t){return t},f=function(e,t,n){return n(e,t)},h=0,m={getCompilerOptions:function(){return n},getEmitResolver:function(){return e},getEmitHost:function(){return t},startLexicalEnvironment:function(){C.Debug.assert(0<h,"Cannot modify the lexical environment during initialization."),C.Debug.assert(h<2,"Cannot modify the lexical environment after transformation has completed."),C.Debug.assert(!d,"Lexical environment is suspended."),u[p]=a,g[p]=s,p++,s=a=void 0},suspendLexicalEnvironment:function(){C.Debug.assert(0<h,"Cannot modify the lexical environment during initialization."),C.Debug.assert(h<2,"Cannot modify the lexical environment after transformation has completed."),C.Debug.assert(!d,"Lexical environment is already suspended."),d=!0},resumeLexicalEnvironment:function(){C.Debug.assert(0<h,"Cannot modify the lexical environment during initialization."),C.Debug.assert(h<2,"Cannot modify the lexical environment after transformation has completed."),C.Debug.assert(d,"Lexical environment is not suspended."),d=!1},endLexicalEnvironment:function(){var e;if(C.Debug.assert(0<h,"Cannot modify the lexical environment during initialization."),C.Debug.assert(h<2,"Cannot modify the lexical environment after transformation has completed."),C.Debug.assert(!d,"Lexical environment is suspended."),(a||s)&&(s&&(e=s.slice()),a)){var t=C.createVariableStatement(void 0,C.createVariableDeclarationList(a));e?e.push(t):e=[t]}return a=u[--p],s=g[p],0===p&&(u=[],g=[]),e},hoistVariableDeclaration:function(e){C.Debug.assert(0<h,"Cannot modify the lexical environment during initialization."),C.Debug.assert(h<2,"Cannot modify the lexical environment after transformation has completed.");var t=C.setEmitFlags(C.createVariableDeclaration(e),64);a?a.push(t):a=[t]},hoistFunctionDeclaration:function(e){C.Debug.assert(0<h,"Cannot modify the lexical environment during initialization."),C.Debug.assert(h<2,"Cannot modify the lexical environment after transformation has completed."),s?s.push(e):s=[e]},requestEmitHelper:function(e){C.Debug.assert(0<h,"Cannot modify the transformation context during initialization."),C.Debug.assert(h<2,"Cannot modify the transformation context after transformation has completed."),C.Debug.assert(!e.scoped,"Cannot request a scoped emit helper."),l=C.append(l,e)},readEmitHelpers:function(){C.Debug.assert(0<h,"Cannot modify the transformation context during initialization."),C.Debug.assert(h<2,"Cannot modify the transformation context after transformation has completed.");var e=l;return l=void 0,e},enableSubstitution:function(e){C.Debug.assert(h<2,"Cannot modify the transformation context after transformation has completed."),c[e]|=1},enableEmitNotification:function(e){C.Debug.assert(h<2,"Cannot modify the transformation context after transformation has completed."),c[e]|=2},isSubstitutionEnabled:E,isEmitNotificationEnabled:S,get onSubstituteNode(){return _},set onSubstituteNode(e){C.Debug.assert(h<1,"Cannot modify transformation hooks after initialization has completed."),C.Debug.assert(void 0!==e,"Value must not be 'undefined'"),_=e},get onEmitNode(){return f},set onEmitNode(e){C.Debug.assert(h<1,"Cannot modify transformation hooks after initialization has completed."),C.Debug.assert(void 0!==e,"Value must not be 'undefined'"),f=e}},y=0,v=o;y<v.length;y++){var b=v[y];C.disposeEmitNodes(C.getSourceFileOfNode(C.getParseTreeNode(b)))}C.performance.mark("beforeTransform");var k=C.chain.apply(void 0,r)(m);h=1;var T=C.map(o,i?k:function(e){return!e||C.isSourceFile(e)&&e.isDeclarationFile?e:k(e)});return h=2,C.performance.mark("afterTransform"),C.performance.measure("transformTime","beforeTransform","afterTransform"),{transformed:T,substituteNode:function(e,t){return C.Debug.assert(h<3,"Cannot substitute a node after the result is disposed."),t&&E(t)&&_(e,t)||t},emitNodeWithNotification:function(e,t,n){C.Debug.assert(h<3,"Cannot invoke TransformationResult callbacks after the result is disposed."),t&&(S(t)?f(e,t,n):n(e,t))},dispose:function(){if(h<3){for(var e=0,t=o;e<t.length;e++){var n=t[e];C.disposeEmitNodes(C.getSourceFileOfNode(C.getParseTreeNode(n)))}l=f=_=g=s=u=a=void 0,h=3}}};function E(e){return 0!=(1&c[e.kind])&&0==(4&C.getEmitFlags(e))}function S(e){return 0!=(2&c[e.kind])||0!=(2&C.getEmitFlags(e))}}}(ts||(ts={})),function(k){var T={emittedLine:1,emittedColumn:1,sourceLine:1,sourceColumn:1,sourceIndex:0};k.createSourceMapWriter=function(o,r){var g,i,a,s,l,c,u,p,d=o.getCompilerOptions(),_=d.extendedDiagnostics,f=!(d.sourceMap||d.inlineSourceMap);return{initialize:function(e,t,n){f||(p&&m(),s=-1,l=i=g=void 0,c=T,u=0,(p={sourceMapFilePath:t,jsSourceMappingURL:d.inlineSourceMap?void 0:k.getBaseFileName(k.normalizeSlashes(t)),sourceMapFile:k.getBaseFileName(k.normalizeSlashes(e)),sourceMapSourceRoot:d.sourceRoot||"",sourceMapSources:[],inputSourceFileNames:[],sourceMapNames:[],sourceMapMappings:"",sourceMapSourcesContent:d.inlineSources?[]:void 0,sourceMapDecodedMappings:[]}).sourceMapSourceRoot=k.normalizeSlashes(p.sourceMapSourceRoot),p.sourceMapSourceRoot.length&&47!==p.sourceMapSourceRoot.charCodeAt(p.sourceMapSourceRoot.length-1)&&(p.sourceMapSourceRoot+=k.directorySeparator),d.mapRoot?(a=k.normalizeSlashes(d.mapRoot),265===n.kind&&(a=k.getDirectoryPath(k.getSourceFilePathInNewDir(n,o,a))),k.isRootedDiskPath(a)||k.isUrl(a)?p.jsSourceMappingURL=k.combinePaths(a,p.jsSourceMappingURL):(a=k.combinePaths(o.getCommonSourceDirectory(),a),p.jsSourceMappingURL=k.getRelativePathToDirectoryOrUrl(k.getDirectoryPath(k.normalizePath(e)),k.combinePaths(a,p.jsSourceMappingURL),o.getCurrentDirectory(),o.getCanonicalFileName,!0))):a=k.getDirectoryPath(k.normalizePath(e)))},reset:m,getSourceMapData:function(){return p},setSourceFile:b,emitPos:v,emitNodeWithSourceMap:function(e,t,n){if(f)return n(e,t);if(t){var o=t.emitNode,r=o&&o.flags,i=o&&o.sourceMapRange,a=i||t,s=a.pos,l=a.end,c=i&&i.source,u=g;c===u&&(c=void 0),c&&b(c),287!==t.kind&&0==(16&r)&&0<=s&&v(h(s)),c&&b(u),64&r?(f=!0,n(e,t),f=!1):n(e,t),c&&b(c),287!==t.kind&&0==(32&r)&&0<=l&&v(l),c&&b(u)}},emitTokenWithSourceMap:function(e,t,n,o){if(f)return o(t,n);var r=e&&e.emitNode,i=r&&r.flags,a=r&&r.tokenSourceMapRanges&&r.tokenSourceMapRanges[t];return n=h(a?a.pos:n),0==(128&i)&&0<=n&&v(n),n=o(t,n),a&&(n=a.end),0==(256&i)&&0<=n&&v(n),n},getText:t,getSourceMappingURL:function(){if(!f){if(d.inlineSourceMap){var e=k.convertToBase64(t());return p.jsSourceMappingURL="data:application/json;base64,"+e}return p.jsSourceMappingURL}}};function h(e){return g.skipTrivia?g.skipTrivia(e):k.skipTrivia(i,e)}function m(){f||(p=u=c=l=s=a=g=void 0)}function y(){if(l&&l!==c){var e=c.emittedColumn;if(c.emittedLine===l.emittedLine)p.sourceMapMappings&&(p.sourceMapMappings+=",");else{for(var t=c.emittedLine;t<l.emittedLine;t++)p.sourceMapMappings+=";";e=1}p.sourceMapMappings+=n(l.emittedColumn-e),p.sourceMapMappings+=n(l.sourceIndex-c.sourceIndex),p.sourceMapMappings+=n(l.sourceLine-c.sourceLine),p.sourceMapMappings+=n(l.sourceColumn-c.sourceColumn),0<=l.nameIndex&&(k.Debug.assert(!1,"We do not support name index right now, Make sure to update updateLastEncodedAndRecordedSpans when we start using this"),p.sourceMapMappings+=n(l.nameIndex-u),u=l.nameIndex),c=l,p.sourceMapDecodedMappings.push(c)}}function v(e){if(!f&&!k.positionIsSynthesized(e)){_&&k.performance.mark("beforeSourcemap");var t=k.getLineAndCharacterOfPosition(g,e);t.line++,t.character++;var n=r.getLine(),o=r.getColumn();!l||l.emittedLine!==n||l.emittedColumn!==o||l.sourceIndex===s&&(l.sourceLine>t.line||l.sourceLine===t.line&&l.sourceColumn>t.character)?(y(),l={emittedLine:n,emittedColumn:o,sourceLine:t.line,sourceColumn:t.character,sourceIndex:s}):(l.sourceLine=t.line,l.sourceColumn=t.character,l.sourceIndex=s),_&&(k.performance.mark("afterSourcemap"),k.performance.measure("Source Map","beforeSourcemap","afterSourcemap"))}}function b(e){if(!f){i=(g=e).text;var t=d.sourceRoot?o.getCommonSourceDirectory():a,n=k.getRelativePathToDirectoryOrUrl(t,g.fileName,o.getCurrentDirectory(),o.getCanonicalFileName,!0);-1===(s=k.indexOf(p.sourceMapSources,n))&&(s=p.sourceMapSources.length,p.sourceMapSources.push(n),p.inputSourceFileNames.push(g.fileName),d.inlineSources&&p.sourceMapSourcesContent.push(g.text))}}function t(){if(!f)return y(),JSON.stringify({version:3,file:p.sourceMapFile,sourceRoot:p.sourceMapSourceRoot,sources:p.sourceMapSources,names:p.sourceMapNames,mappings:p.sourceMapMappings,sourcesContent:p.sourceMapSourcesContent})}};var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function o(e){if(e<64)return t.charAt(e);throw TypeError(e+": not a 64 based value")}function n(e){e<0?e=1+(-e<<1):e<<=1;var t="";do{var n=31&e;0<(e>>=5)&&(n|=32),t+=o(n)}while(0<e);return t}}(ts||(ts={})),function(A){A.createCommentWriter=function(e,a){var c,t,u,g,p,_=e.extendedDiagnostics,d=A.getNewLineCharacter(e),f=-1,h=-1,m=-1,y=!1,v=e.removeComments;return{reset:function(){p=g=u=t=void 0},setWriter:function(e){c=e},setSourceFile:function(e){u=(t=e).text,g=A.getLineStarts(t),p=void 0},emitNodeWithComments:function(e,t,n){if(v)n(e,t);else if(t){y=!1;var o=t.emitNode,r=o&&o.flags,i=o&&o.commentRange||t,a=i.pos,s=i.end;if(a<0&&s<0||a===s)b(e,t,o,r,n);else{_&&A.performance.mark("preEmitNodeWithComment");var l=287!==t.kind,c=a<0||0!=(512&r)||10===t.kind,u=s<0||0!=(1024&r)||10===t.kind;c||E(a,l);var g=f,p=h,d=m;c||(f=a),u||(h=s,227===t.kind&&(m=s)),_&&A.performance.measure("commentTime","preEmitNodeWithComment"),b(e,t,o,r,n),_&&A.performance.mark("postEmitNodeWithComment"),f=g,h=p,m=d,!u&&l&&C(s,S),_&&A.performance.measure("commentTime","postEmitNodeWithComment")}}},emitBodyWithDetachedComments:function(e,t,n){_&&A.performance.mark("preEmitBodyWithDetachedComments");var o,r,i=t.pos,a=t.end,s=A.getEmitFlags(e),l=v||a<0||0!=(1024&s);i<0||0!=(512&s)||(o=t,(r=A.emitDetachedComments(u,g,c,x,o,d,v))&&(p?p.push(r):p=[r])),_&&A.performance.measure("commentTime","preEmitBodyWithDetachedComments"),2048&s&&!v?(v=!0,n(e),v=!1):n(e),_&&A.performance.mark("beginEmitBodyWithDetachedCommetns"),l||(E(t.end,!0),y&&!c.isAtStartOfLine()&&c.writeLine()),_&&A.performance.measure("commentTime","beginEmitBodyWithDetachedCommetns")},emitTrailingCommentsOfPosition:function(e,t){v||(_&&A.performance.mark("beforeEmitTrailingCommentsOfPosition"),C(e,t?S:r),_&&A.performance.measure("commentTime","beforeEmitTrailingCommentsOfPosition"))},emitLeadingCommentsOfPosition:function(e){v||-1===e||E(e,!0)}};function b(e,t,n,o,r){var i,a,s,l=n&&n.leadingComments;A.some(l)&&(_&&A.performance.mark("preEmitNodeWithSynthesizedComments"),A.forEach(l,k),_&&A.performance.measure("commentTime","preEmitNodeWithSynthesizedComments")),i=e,a=t,s=r,2048&o?(v=!0,s(i,a),v=!1):s(i,a);var c=n&&n.trailingComments;A.some(c)&&(_&&A.performance.mark("postEmitNodeWithSynthesizedComments"),A.forEach(c,T),_&&A.performance.measure("commentTime","postEmitNodeWithSynthesizedComments"))}function k(e){2===e.kind&&c.writeLine(),n(e),e.hasTrailingNewLine||2===e.kind?c.writeLine():c.write(" ")}function T(e){c.isAtStartOfLine()||c.write(" "),n(e),e.hasTrailingNewLine&&c.writeLine()}function n(e){var t,n=3===(t=e).kind?"/*"+t.text+"*/":"//"+t.text,o=3===e.kind?A.computeLineStarts(n):void 0;A.writeCommentRange(n,o,c,0,n.length,d)}function E(e,t){y=!1,t?i(e,s):0===e&&i(e,o)}function o(e,t,n,o,r){var i,a;i=e,a=t,A.isRecognizedTripleSlashComment(u,i,a)&&s(e,t,0,o,r)}function s(e,t,n,o,r){y||(A.emitNewLineBeforeLeadingCommentOfPosition(g,c,r,e),y=!0),a&&a(e),A.writeCommentRange(u,g,c,e,t,d),a&&a(t),o?c.writeLine():c.write(" ")}function S(e,t,n,o){c.isAtStartOfLine()||c.write(" "),a&&a(e),A.writeCommentRange(u,g,c,e,t,d),a&&a(t),o&&c.writeLine()}function r(e,t,n,o){a&&a(e),A.writeCommentRange(u,g,c,e,t,d),a&&a(t),o?c.writeLine():c.write(" ")}function i(e,t){var n,o,r;-1!==f&&e===f||(n=e,void 0!==p&&A.lastOrUndefined(p).nodePos===n?(o=t,r=A.lastOrUndefined(p).detachedCommentEndPos,p.length-1?p.pop():p=void 0,A.forEachLeadingCommentRange(u,r,o,r)):A.forEachLeadingCommentRange(u,e,t,e))}function C(e,t){(-1===h||e!==h&&e!==m)&&A.forEachTrailingCommentRange(u,e,t)}function x(e,t,n,o,r,i){a&&a(o),A.writeCommentRange(e,t,n,o,r,i),a&&a(r)}}}(ts||(ts={})),function(me){function u(s,g,n,l,e,o){var p,d,_,f,h,c,m,r,y,i,a,u,t=266===e.kind?e.sourceFiles:[e],v=266===e.kind,b=s.getNewLine(),k=s.getCompilerOptions();L();var T,E,S,C=!1,x=k.removeComments?me.noop:function(e){if(e){var t=me.getJSDocCommentRanges(e,y);me.emitNewLineBeforeLeadingComments(i,c,e,t),me.emitComments(y,i,c,t,!1,!0,b,me.writeCommentRange)}},A=k.stripInternal?function(e){if(e){var t=me.getLeadingCommentRanges(y,e.pos);if(me.forEach(t,R))return;he(e)}}:he,D=!0,B=[],I="",N=[],w=!1,O=[];return me.forEach(t,function(n){if(!me.isSourceFileJavaScript(n)){if(k.noResolve||me.forEach(n.referencedFiles,function(e){var t=me.tryResolveScriptReference(s,n,e);t&&!me.contains(N,t)&&(function(o,r,e){var i,a=!1;o.isDeclarationFile?i=o.fileName:me.forEachEmittedFile(s,function(e,t){var n=266===t.kind;if(n&&!r)return;me.Debug.assert(!!e.declarationFilePath||me.isSourceFileJavaScript(o),"Declaration file is not present only for javascript files"),i=e.declarationFilePath||e.jsFilePath,a=n},o,e);i&&(i=me.getRelativePathToDirectoryOrUrl(me.getDirectoryPath(me.normalizeSlashes(l)),i,s.getCurrentDirectory(),s.getCanonicalFileName,!1),I+='/// <reference path="'+i+'" />'+b);return a}(t,!v&&!w,o)&&(w=!0),N.push(t))}),r=!1,v&&me.isExternalModule(n)?me.isExternalModule(n)&&(D=!1,p('declare module "'+me.getResolvedExternalModuleName(s,n)+'" {'),d(),_(),J(n),f(),p("}"),d()):(D=!0,J(n)),B.length){var e=c;me.forEach(B,function(e){if(e.isVisible&&!e.asynchronousOutput){me.Debug.assert(238===e.node.kind),L(),me.Debug.assert(0===e.indent||1===e.indent&&v);for(var t=0;t<e.indent;t++)_();ne(e.node),e.asynchronousOutput=c.getText();for(t=0;t<e.indent;t++)f()}}),P(e),O=O.concat(B),B=[]}!v&&me.isExternalModule(n)&&n.moduleAugmentations.length&&!r&&(p("export {};"),d())}}),S&&me.forEachKey(S,function(e){I+='/// <reference types="'+e+'" />'+b}),{reportedDeclarationError:C,moduleElementDeclarationEmitInfo:O,synchronousDeclarationOutput:c.getText(),referencesOutput:I};function R(e){var t=y.substring(e.pos,e.end);return me.stringContains(t,"@internal")}function L(){var e=me.createTextWriter(b);e.trackSymbol=H,e.reportInaccessibleThisError=V,e.reportPrivateInBaseOfClassExpression=G,e.writeKeyword=e.write,e.writeOperator=e.write,e.writePunctuation=e.write,e.writeSpace=e.write,e.writeStringLiteral=e.writeLiteral,e.writeParameter=e.write,e.writeProperty=e.write,e.writeSymbol=e.write,P(e)}function P(e){p=(c=e).write,h=e.writeTextOfNode,d=e.writeLine,_=e.increaseIndent,f=e.decreaseIndent}function M(e){var t=c;me.forEach(e,function(e){var t;226===e.kind?t=e.parent.parent:241===e.kind||242===e.kind||239===e.kind?me.Debug.fail("We should be getting ImportDeclaration instead to write"):t=e;var n=me.forEach(B,function(e){return e.node===t?e:void 0});if(!n&&E&&(n=me.forEach(E,function(e){return e.node===t?e:void 0})),n)if(238===n.node.kind)n.isVisible=!0;else{L();for(var o=n.indent;o;o--)_();233===t.kind&&(me.Debug.assert(void 0===E),E=[]),$(t),233===t.kind&&(n.subModuleElementDeclarationEmitInfo=E,E=void 0),n.asynchronousOutput=c.getText()}}),P(t)}function F(e){if(e){S||(S=me.createMap());for(var t=0,n=e;t<n.length;t++){var o=n[t];S.has(o)||S.set(o,o)}}}function U(e){if(0===e.accessibility)e&&e.aliasesToMakeVisible&&M(e.aliasesToMakeVisible);else{C=!0;var t=c.getSymbolAccessibilityDiagnostic(e);t&&(t.typeName?n.add(me.createDiagnosticForNode(e.errorNode||t.errorNode,t.diagnosticMessage,me.getTextOfNodeFromSourceText(y,t.typeName),e.errorSymbolName,e.errorModuleName)):n.add(me.createDiagnosticForNode(e.errorNode||t.errorNode,t.diagnosticMessage,e.errorSymbolName,e.errorModuleName)))}}function H(e,t,n){U(g.isSymbolAccessible(e,t,n,!0)),F(g.getTypeReferenceDirectivesForSymbol(e,n))}function G(e){T&&(C=!0,n.add(me.createDiagnosticForNode(T,me.Diagnostics.Property_0_of_exported_class_expression_may_not_be_private_or_protected,e)))}function V(){T&&(C=!0,n.add(me.createDiagnosticForNode(T,me.Diagnostics.The_inferred_type_of_0_references_an_inaccessible_this_type_A_type_annotation_is_necessary,me.declarationNameToString(T))))}function W(e,t,n){c.getSymbolAccessibilityDiagnostic=n,p(": ");var o=146===e.kind&&(g.isRequiredInitializedParameter(e)||g.isOptionalUninitializedParameterProperty(e));if(t&&!o)X(t);else{T=e.name;var r=16388|(o?8192:0);g.writeTypeOfDeclaration(e,m,r,c),T=void 0}}function K(e){for(var t=0,n=e;t<n.length;t++){var o=n[t];A(o)}}function z(e,t,n,o){for(var r=c.getTextPos(),i=0,a=e;i<a.length;i++){var s=a[i];o&&!o(s)||(r!==c.getTextPos()&&p(t),r=c.getTextPos(),n(s))}}function j(e,t,n){z(e,", ",t,n)}function Y(e,t){c.getSymbolAccessibilityDiagnostic=t,X(e)}function X(e){switch(e.kind){case 119:case 136:case 133:case 122:case 134:case 137:case 105:case 139:case 95:case 130:case 169:case 173:return h(y,e);case 201:return l=e,void(me.isEntityNameExpression(l.expression)&&(me.Debug.assert(71===l.expression.kind||179===l.expression.kind),u(l.expression),l.typeArguments&&(p("<"),j(l.typeArguments,X),p(">"))));case 159:return u((s=e).typeName),void(s.typeArguments&&(p("<"),j(s.typeArguments,X),p(">")));case 162:return a=e,p("typeof "),void u(a.exprName);case 164:return X(e.elementType),void p("[]");case 165:return i=e,p("["),j(i.elementTypes,X),void p("]");case 166:return void z(e.types," | ",X);case 167:return void z(e.types," & ",X);case 168:return r=e,p("("),X(r.type),void p(")");case 170:return o=e,p(me.tokenToString(o.operator)),p(" "),void X(o.type);case 171:return X((n=e).objectType),p("["),X(n.indexType),void p("]");case 172:return function(e){var t=m;m=e,p("{"),d(),_(),e.readonlyToken&&p("readonly ");p("["),c(e.typeParameter.name),p(" in "),X(e.typeParameter.constraint),p("]"),e.questionToken&&p("?");p(": "),X(e.type),p(";"),d(),f(),p("}"),m=t}(e);case 160:case 161:return de(e);case 163:return function(e){p("{"),e.members.length&&(d(),_(),K(e.members),f());p("}")}(e);case 71:case 143:return u(e);case 158:return h(y,(t=e).parameterName),p(" is "),void X(t.type)}var t,n,o,r,i,a,s,l;function c(e){if(71===e.kind)h(y,e);else{var t=143===e.kind?e.left:e.expression,n=143===e.kind?e.right:e.name;c(t),p("."),h(y,n)}}function u(e){U(g.isEntityNameVisible(e,237===e.parent.kind?e.parent:m)),F(g.getTypeReferenceDirectivesForEntityName(e)),c(e)}}function J(e){y=e.text,i=me.getLineStarts(e),a=e.identifiers,u=me.isExternalModule(e),m=e,me.emitDetachedComments(y,i,c,me.writeCommentRange,e,b,!0),K(e.statements)}function q(e,t,n,o){var r=function(e){if(!a.has(e))return e;for(var t=0;;){var n=e+"_"+ ++t;if(!a.has(n))return n}}(t);return o&&p("declare "),p("const "),p(r),p(": "),c.getSymbolAccessibilityDiagnostic=function(){return n},g.writeTypeOfExpression(e,m,16388,c),p(";"),d(),r}function Z(e,t){if(t)$(e);else if(237===e.kind||265===e.parent.kind&&u){var n=void 0;if(E&&265!==e.parent.kind)E.push({node:e,outputPos:c.getTextPos(),indent:c.getIndent(),isVisible:n});else{if(238===e.kind){var o=e;o.importClause&&(n=o.importClause.name&&g.isDeclarationVisible(o.importClause)||te(o.importClause.namedBindings))}B.push({node:e,outputPos:c.getTextPos(),indent:c.getIndent(),isVisible:n})}}}function $(e){switch(e.kind){case 228:return pe(e);case 208:return function(e){if(me.every(e.declarationList&&e.declarationList.declarations,function(e){return e.name&&me.isEmptyBindingPattern(e.name)}))return;x(e),Q(e),me.isLet(e.declarationList)?p("let "):me.isConst(e.declarationList)?p("const "):p("var ");j(e.declarationList.declarations,ue,g.isDeclarationVisible),p(";"),d()}(e);case 230:return function(e){x(e),Q(e),p("interface "),h(y,e.name);var t=m;se((m=e).typeParameters);var n=me.filter(me.getInterfaceBaseTypeNodes(e),function(e){return me.isEntityNameExpression(e.expression)});n&&n.length&&le(n,!1);p(" {"),d(),_(),K(e.members),f(),p("}"),d(),m=t}(e);case 229:return function(e){var t=m;m=e;var n,o=me.getClassExtendsHeritageClauseElement(e);o&&!me.isEntityNameExpression(o.expression)&&(n=95===o.expression.kind?"null":q(o.expression,e.name.escapedText+"_base",{diagnosticMessage:me.Diagnostics.extends_clause_of_exported_class_0_has_or_is_using_private_name_1,errorNode:o,typeName:e.name},!me.findAncestor(e,function(e){return 233===e.kind})));x(e),Q(e),me.hasModifier(e,128)&&p("abstract ");p("class "),h(y,e.name),se(e.typeParameters),o&&(me.isEntityNameExpression(o.expression)?le([o],!1):(p(" extends "),p(n),o.typeArguments&&(p("<"),j(o.typeArguments,X),p(">"))));le(me.getClassImplementsHeritageClauseElements(e),!0),p(" {"),d(),_(),r=me.getFirstConstructorWithBody(e),r&&me.forEach(r.parameters,function(e){me.hasModifier(e,92)&&ce(e)}),K(e.members),f(),p("}"),d(),m=t;var r}(e);case 231:return n=m,x(m=t=e),Q(t),p("type "),h(y,t.name),se(t.typeParameters),p(" = "),Y(t.type,function(){return{diagnosticMessage:me.Diagnostics.Exported_type_alias_0_has_or_is_using_private_name_1,errorNode:t.type,typeName:t.name}}),p(";"),d(),void(m=n);case 232:return function(e){x(e),Q(e),me.isConst(e)&&p("const ");p("enum "),h(y,e.name),p(" {"),d(),_(),K(e.members),f(),p("}"),d()}(e);case 233:return function(e){x(e),Q(e),me.isGlobalScopeAugmentation(e)?p("global "):(16&e.flags?p("namespace "):p("module "),me.isExternalModuleAugmentation(e)?oe(e):h(y,e.name));for(;e.body&&234!==e.body.kind;)e=e.body,p("."),h(y,e.name);var t=m;e.body?(m=e,p(" {"),d(),_(),K(e.body.statements),f(),p("}"),d(),m=t):p(";")}(e);case 237:return function(e){x(e),me.hasModifier(e,1)&&p("export ");p("import "),h(y,e.name),p(" = "),me.isInternalModuleImportEqualsDeclaration(e)?(Y(e.moduleReference,function(){return{diagnosticMessage:me.Diagnostics.Import_declaration_0_is_using_private_name_1,errorNode:e,typeName:e.name}}),p(";")):(p("require("),oe(e),p(");"));c.writeLine()}(e);case 238:return ne(e);default:me.Debug.fail("Unknown symbol kind")}var t,n}function Q(e){if(265===e.parent.kind){var t=me.getModifierFlags(e);1&t&&p("export "),512&t?p("default "):230!==e.kind&&D&&p("declare ")}}function ee(e){8&e?p("private "):16&e&&p("protected "),32&e&&p("static "),64&e&&p("readonly "),128&e&&p("abstract ")}function te(e){if(e)return 240===e.kind?g.isDeclarationVisible(e):me.forEach(e.elements,function(e){return g.isDeclarationVisible(e)})}function ne(e){if(x(e),me.hasModifier(e,1)&&p("export "),p("import "),e.importClause){var t=c.getTextPos();e.importClause.name&&g.isDeclarationVisible(e.importClause)&&h(y,e.importClause.name),e.importClause.namedBindings&&te(e.importClause.namedBindings)&&(t!==c.getTextPos()&&p(", "),240===e.importClause.namedBindings.kind?(p("* as "),h(y,e.importClause.namedBindings.name)):(p("{ "),j(e.importClause.namedBindings.elements,re,g.isDeclarationVisible),p(" }"))),p(" from ")}oe(e),p(";"),c.writeLine()}function oe(e){var t;if(r=r||233!==e.kind,237===e.kind){var n=e;t=me.getExternalModuleImportEqualsDeclarationExpression(n)}else if(233===e.kind)t=e.name;else{t=(n=e).moduleSpecifier}if(9===t.kind&&v&&(k.out||k.outFile)){var o=me.getExternalModuleNameFromDeclaration(s,g,e);if(o)return p('"'),p(o),void p('"')}h(y,t)}function re(e){e.propertyName&&(h(y,e.propertyName),p(" as ")),h(y,e.name)}function ie(e){re(e),M(g.collectLinkedAliases(e.propertyName||e.name))}function ae(e){return 151===e.parent.kind&&me.hasModifier(e.parent,8)}function se(e){e&&(p("<"),j(e,function(t){function e(){var e;switch(t.parent.kind){case 229:e=me.Diagnostics.Type_parameter_0_of_exported_class_has_or_is_using_private_name_1;break;case 230:e=me.Diagnostics.Type_parameter_0_of_exported_interface_has_or_is_using_private_name_1;break;case 156:e=me.Diagnostics.Type_parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1;break;case 155:e=me.Diagnostics.Type_parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1;break;case 151:case 150:e=me.hasModifier(t.parent,32)?me.Diagnostics.Type_parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:229===t.parent.parent.kind?me.Diagnostics.Type_parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:me.Diagnostics.Type_parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1;break;case 228:e=me.Diagnostics.Type_parameter_0_of_exported_function_has_or_is_using_private_name_1;break;case 231:e=me.Diagnostics.Type_parameter_0_of_exported_type_alias_has_or_is_using_private_name_1;break;default:me.Debug.fail("This is unknown parent for type parameter: "+t.parent.kind)}return{diagnosticMessage:e,errorNode:t,typeName:t.name}}_(),x(t),f(),h(y,t.name),t.constraint&&!ae(t)&&(p(" extends "),160===t.parent.kind||161===t.parent.kind||t.parent.parent&&163===t.parent.parent.kind?(me.Debug.assert(151===t.parent.kind||150===t.parent.kind||160===t.parent.kind||161===t.parent.kind||155===t.parent.kind||156===t.parent.kind),X(t.constraint)):Y(t.constraint,e)),t.default&&!ae(t)&&(p(" = "),160===t.parent.kind||161===t.parent.kind||t.parent.parent&&163===t.parent.parent.kind?(me.Debug.assert(151===t.parent.kind||150===t.parent.kind||160===t.parent.kind||161===t.parent.kind||155===t.parent.kind||156===t.parent.kind),X(t.default)):Y(t.default,e))}),p(">"))}function le(e,n){e&&(p(n?" implements ":" extends "),j(e,function(t){me.isEntityNameExpression(t.expression)?Y(t,function(){var e;e=229===t.parent.parent.kind?n?me.Diagnostics.Implements_clause_of_exported_class_0_has_or_is_using_private_name_1:me.Diagnostics.extends_clause_of_exported_class_0_has_or_is_using_private_name_1:me.Diagnostics.extends_clause_of_exported_interface_0_has_or_is_using_private_name_1;return{diagnosticMessage:e,errorNode:t,typeName:me.getNameOfDeclaration(t.parent.parent)}}):n||95!==t.expression.kind||p("null")}))}function ce(e){me.hasDynamicName(e)||(x(e),ee(me.getModifierFlags(e)),ue(e),p(";"),d())}function ue(n){function o(e){return 226===n.kind?e.errorModuleName?2===e.accessibility?me.Diagnostics.Exported_variable_0_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:me.Diagnostics.Exported_variable_0_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Exported_variable_0_has_or_is_using_private_name_1:149===n.kind||148===n.kind||146===n.kind&&me.hasModifier(n.parent,8)?me.hasModifier(n,32)?e.errorModuleName?2===e.accessibility?me.Diagnostics.Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:me.Diagnostics.Public_static_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Public_static_property_0_of_exported_class_has_or_is_using_private_name_1:229===n.parent.kind||146===n.kind?e.errorModuleName?2===e.accessibility?me.Diagnostics.Public_property_0_of_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:me.Diagnostics.Public_property_0_of_exported_class_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Public_property_0_of_exported_class_has_or_is_using_private_name_1:e.errorModuleName?me.Diagnostics.Property_0_of_exported_interface_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Property_0_of_exported_interface_has_or_is_using_private_name_1:void 0}function e(e){for(var t=[],n=0,o=e.elements;n<o.length;n++){var r=o[n];200!==r.kind&&t.push(r)}j(t,i)}function i(n){n.name&&(me.isBindingPattern(n.name)?e(n.name):(h(y,n.name),W(n,void 0,function(e){var t=o(e);return void 0!==t?{diagnosticMessage:t,errorNode:n,typeName:n.name}:void 0})))}(226!==n.kind||g.isDeclarationVisible(n))&&(me.isBindingPattern(n.name)?e(n.name):(h(y,n.name),(149===n.kind||148===n.kind||146===n.kind&&!me.isParameterPropertyDeclaration(n))&&me.hasQuestionToken(n)&&p("?"),149!==n.kind&&148!==n.kind||163!==n.parent.kind?g.isLiteralConstDeclaration(n)?(p(" = "),g.writeLiteralConstValue(n,c)):me.hasModifier(n,8)||W(n,n.type,function(e){var t=o(e);return void 0!==t?{diagnosticMessage:t,errorNode:n,typeName:n.name}:void 0}):ge(n)))}function ge(e){e.type&&(p(": "),X(e.type))}function pe(e){me.hasDynamicName(e)||g.isImplementationOfOverload(e)||(x(e),228===e.kind?Q(e):151!==e.kind&&152!==e.kind||ee(me.getModifierFlags(e)),228===e.kind?(p("function "),h(y,e.name)):152===e.kind?p("constructor"):(h(y,e.name),me.hasQuestionToken(e)&&p("?")),_e(e))}function de(e){x(e),_e(e)}function _e(n){var e=m,t=!1;if(157===(m=n).kind)ee(me.getModifierFlags(n)),p("[");else{if(152===n.kind&&me.hasModifier(n,8))return p("();"),void d();if(156===n.kind||161===n.kind)p("new ");else if(160===n.kind){var o=c.getText();n.typeParameters&&"<"===o.charAt(o.length-1)&&(t=!0,p("("))}se(n.typeParameters),p("(")}j(n.parameters,fe),157===n.kind?p("]"):p(")");var r,i,a=160===n.kind||161===n.kind;a||163===n.parent.kind?n.type&&(p(a?" => ":": "),X(n.type)):152===n.kind||me.hasModifier(n,8)||(r=n,i=function(e){var t;switch(n.kind){case 156:t=e.errorModuleName?me.Diagnostics.Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:me.Diagnostics.Return_type_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_0;break;case 155:t=e.errorModuleName?me.Diagnostics.Return_type_of_call_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:me.Diagnostics.Return_type_of_call_signature_from_exported_interface_has_or_is_using_private_name_0;break;case 157:t=e.errorModuleName?me.Diagnostics.Return_type_of_index_signature_from_exported_interface_has_or_is_using_name_0_from_private_module_1:me.Diagnostics.Return_type_of_index_signature_from_exported_interface_has_or_is_using_private_name_0;break;case 151:case 150:t=me.hasModifier(n,32)?e.errorModuleName?2===e.accessibility?me.Diagnostics.Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:me.Diagnostics.Return_type_of_public_static_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:me.Diagnostics.Return_type_of_public_static_method_from_exported_class_has_or_is_using_private_name_0:229===n.parent.kind?e.errorModuleName?2===e.accessibility?me.Diagnostics.Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:me.Diagnostics.Return_type_of_public_method_from_exported_class_has_or_is_using_name_0_from_private_module_1:me.Diagnostics.Return_type_of_public_method_from_exported_class_has_or_is_using_private_name_0:e.errorModuleName?me.Diagnostics.Return_type_of_method_from_exported_interface_has_or_is_using_name_0_from_private_module_1:me.Diagnostics.Return_type_of_method_from_exported_interface_has_or_is_using_private_name_0;break;case 228:t=e.errorModuleName?2===e.accessibility?me.Diagnostics.Return_type_of_exported_function_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:me.Diagnostics.Return_type_of_exported_function_has_or_is_using_name_0_from_private_module_1:me.Diagnostics.Return_type_of_exported_function_has_or_is_using_private_name_0;break;default:me.Debug.fail("This is unknown kind for signature: "+n.kind)}return{diagnosticMessage:t,errorNode:n.name||n}},c.getSymbolAccessibilityDiagnostic=i,p(": "),r.type?X(r.type):(T=r.name,g.writeReturnTypeOfSignatureDeclaration(r,m,16388,c),T=void 0)),m=e,a?t&&p(")"):(p(";"),d())}function fe(n){function t(e){if(174===e.kind)p("{"),j(e.elements,o),p("}");else if(175===e.kind){p("[");var t=e.elements;j(t,o),t&&t.hasTrailingComma&&p(", "),p("]")}}function o(e){200===e.kind?p(" "):176===e.kind&&(e.propertyName&&(h(y,e.propertyName),p(": ")),e.name&&(me.isBindingPattern(e.name)?t(e.name):(me.Debug.assert(71===e.name.kind),e.dotDotDotToken&&p("..."),h(y,e.name))))}_(),x(n),n.dotDotDotToken&&p("..."),me.isBindingPattern(n.name)?t(n.name):h(y,n.name),g.isOptionalParameter(n)&&p("?"),f(),160===n.parent.kind||161===n.parent.kind||163===n.parent.parent.kind?ge(n):me.hasModifier(n.parent,8)||W(n,n.type,function(e){var t=function(e){switch(n.parent.kind){case 152:return e.errorModuleName?2===e.accessibility?me.Diagnostics.Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:me.Diagnostics.Parameter_0_of_constructor_from_exported_class_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Parameter_0_of_constructor_from_exported_class_has_or_is_using_private_name_1;case 156:return e.errorModuleName?me.Diagnostics.Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Parameter_0_of_constructor_signature_from_exported_interface_has_or_is_using_private_name_1;case 155:return e.errorModuleName?me.Diagnostics.Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Parameter_0_of_call_signature_from_exported_interface_has_or_is_using_private_name_1;case 157:return e.errorModuleName?me.Diagnostics.Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Parameter_0_of_index_signature_from_exported_interface_has_or_is_using_private_name_1;case 151:case 150:return me.hasModifier(n.parent,32)?e.errorModuleName?2===e.accessibility?me.Diagnostics.Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:me.Diagnostics.Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Parameter_0_of_public_static_method_from_exported_class_has_or_is_using_private_name_1:229===n.parent.parent.kind?e.errorModuleName?2===e.accessibility?me.Diagnostics.Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:me.Diagnostics.Parameter_0_of_public_method_from_exported_class_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Parameter_0_of_public_method_from_exported_class_has_or_is_using_private_name_1:e.errorModuleName?me.Diagnostics.Parameter_0_of_method_from_exported_interface_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Parameter_0_of_method_from_exported_interface_has_or_is_using_private_name_1;case 228:return e.errorModuleName?2===e.accessibility?me.Diagnostics.Parameter_0_of_exported_function_has_or_is_using_name_1_from_external_module_2_but_cannot_be_named:me.Diagnostics.Parameter_0_of_exported_function_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Parameter_0_of_exported_function_has_or_is_using_private_name_1;default:me.Debug.fail("This is unknown parent for parameter: "+n.parent.kind)}}(e);return void 0!==t?{diagnosticMessage:t,errorNode:n,typeName:n.name}:void 0})}function he(e){switch(e.kind){case 228:case 233:case 237:case 230:case 229:case 231:case 232:return Z(e,(o=e,g.isDeclarationVisible(o)));case 208:return Z(e,(n=e,me.forEach(n.declarationList.declarations,function(e){return g.isDeclarationVisible(e)})));case 238:return Z(e,!e.importClause);case 244:return x(t=e),p("export "),t.exportClause?(p("{ "),j(t.exportClause.elements,ie),p(" }")):p("*"),t.moduleSpecifier&&(p(" from "),oe(t)),p(";"),void c.writeLine();case 152:case 151:case 150:return pe(e);case 156:case 155:case 157:return de(e);case 153:case 154:return function(e){if(!me.hasDynamicName(e)){var t,n=me.getAllAccessorDeclarations(e.parent.members,e);if(e===n.firstAccessor){if(x(n.getAccessor),x(n.setAccessor),ee(me.getModifierFlags(e)|(n.setAccessor?0:64)),h(y,e.name),!me.hasModifier(e,8)){var o=i(t=e);if(!o){var r=153===e.kind?n.setAccessor:n.getAccessor;(o=i(r))&&(t=r)}W(e,o,function(e){return 154===t.kind?{diagnosticMessage:me.hasModifier(t.parent,32)?e.errorModuleName?me.Diagnostics.Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Parameter_0_of_public_static_property_setter_from_exported_class_has_or_is_using_private_name_1:e.errorModuleName?me.Diagnostics.Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_name_1_from_private_module_2:me.Diagnostics.Parameter_0_of_public_property_setter_from_exported_class_has_or_is_using_private_name_1,errorNode:t.parameters[0],typeName:t.name}:{diagnosticMessage:me.hasModifier(t,32)?e.errorModuleName?2===e.accessibility?me.Diagnostics.Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:me.Diagnostics.Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:me.Diagnostics.Return_type_of_public_static_property_getter_from_exported_class_has_or_is_using_private_name_0:e.errorModuleName?2===e.accessibility?me.Diagnostics.Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_external_module_1_but_cannot_be_named:me.Diagnostics.Return_type_of_public_property_getter_from_exported_class_has_or_is_using_name_0_from_private_module_1:me.Diagnostics.Return_type_of_public_property_getter_from_exported_class_has_or_is_using_private_name_0,errorNode:t.name,typeName:void 0}})}p(";"),d()}}function i(e){if(e)return 153===e.kind?e.type:0<e.parameters.length?e.parameters[0].type:void 0}}(e);case 149:case 148:return ce(e);case 264:return function(e){x(e),h(y,e.name);var t=g.getConstantValue(e);void 0!==t&&(p(" = "),p(me.getTextOfConstantValue(t))),p(","),d()}(e);case 243:return function(e){if(71===e.expression.kind)p(e.isExportEquals?"export = ":"export default "),h(y,e.expression);else{var t=q(e.expression,"_default",{diagnosticMessage:me.Diagnostics.Default_export_of_the_module_has_or_is_using_private_name_0,errorNode:e},D);p(e.isExportEquals?"export = ":"export default "),p(t)}p(";"),d(),71===e.expression.kind&&M(g.collectLinkedAliases(e.expression))}(e);case 265:return J(e)}var t,n,o}}me.getDeclarationDiagnostics=function(o,r,e){var i=me.createDiagnosticCollection();return me.forEachEmittedFile(o,function(e,t){var n=e.declarationFilePath;u(o,r,i,n,t,!1)},e),i.getDiagnostics(e?e.fileName:void 0)},me.writeDeclarationFile=function(e,t,n,o,r,i){var a=u(n,o,r,e,t,i),s=a.reportedDeclarationError||n.isEmitBlocked(e)||n.getCompilerOptions().noEmit;if(!s){var l=266===t.kind?t.sourceFiles:[t],c=a.referencesOutput+function t(n,e){var o=0,r="";return me.forEach(e,function(e){e.asynchronousOutput&&(r+=n.substring(o,e.outputPos),r+=t(e.asynchronousOutput,e.subModuleElementDeclarationEmitInfo),o=e.outputPos)}),r+=n.substring(o)}(a.synchronousDeclarationOutput,a.moduleElementDeclarationEmitInfo);me.writeFile(n,r,e,c,n.getCompilerOptions().emitBOM,l)}return s}}(ts||(ts={})),function(St){var e,t,n,o,r,i,pe=((e=[])[0]="",e[16]=",",e[4]=" |",e[8]=" &",e),de=((t=[])[512]=["{","}"],t[1024]=["(",")"],t[2048]=["<",">"],t[4096]=["[","]"],t);function k(e,t,n,o){var r=St.isArray(n)?n:St.getSourceFilesToEmit(e,n),i=e.getCompilerOptions();if(i.outFile||i.out)r.length&&t({jsFilePath:l=i.outFile||i.out,sourceMapFilePath:u(l,i),declarationFilePath:i.declaration?St.removeFileExtension(l)+".d.ts":""},St.createBundle(r),o);else for(var a=0,s=r;a<s.length;a++){var l,c=s[a];t({jsFilePath:l=St.getOwnEmitOutputFilePath(c,e,g(c,i)),sourceMapFilePath:u(l,i),declarationFilePath:St.isSourceFileJavaScript(c)||!o&&!i.declaration?void 0:St.getDeclarationEmitOutputFilePath(c,e)},c,o)}}function u(e,t){return t.sourceMap?e+".map":void 0}function g(e,t){if(1===t.jsx)if(St.isSourceFileJavaScript(e)){if(St.fileExtensionIs(e.fileName,".jsx"))return".jsx"}else if(1===e.languageVariant)return".jsx";return".js"}function T(w,e){void 0===w&&(w={}),void 0===e&&(e={});var Oe,n,o,r,t,i,Re,a,s=e.hasGlobalName,l=e.onEmitSourceMapOfNode,c=e.onEmitSourceMapOfToken,u=e.onEmitSourceMapOfPosition,g=e.onEmitNode,p=e.onEmitHelpers,d=e.onSetSourceFile,_=e.substituteNode,m=e.onBeforeEmitNodeArray,y=e.onAfterEmitNodeArray,f=e.onBeforeEmitToken,h=e.onAfterEmitToken,v=St.getNewLineCharacter(w),b=St.createCommentWriter(w,u),k=b.emitNodeWithComments,T=b.emitBodyWithDetachedComments,Le=b.emitTrailingCommentsOfPosition,Pe=b.emitLeadingCommentsOfPosition;return R(),{printNode:function(e,t,n){switch(e){case 0:St.Debug.assert(St.isSourceFile(t),"Expected a SourceFile node.");break;case 2:St.Debug.assert(St.isIdentifier(t),"Expected an Identifier node.");break;case 1:St.Debug.assert(St.isExpression(t),"Expected an Expression node.")}switch(t.kind){case 265:return S(t);case 266:return E(t)}return C(e,t,n,D()),B()},printFile:S,printBundle:E,writeNode:C,writeFile:A,writeBundle:x};function E(e){return x(e,D()),B()}function S(e){return A(e,D()),B()}function C(e,t,n,o){var r=Re;O(o),I(e,t,n),R(),Re=r}function x(e,t){var n=Re;O(t),X(e),Y(e),U(e);for(var o=0,r=e.sourceFiles;o<r.length;o++){var i=r[o];I(0,i,i)}R(),Re=n}function A(e,t){var n=Re;O(t),X(e),Y(e),I(0,e,e),R(),Re=n}function D(){return a||(a=St.createTextWriter(v))}function B(){var e=a.getText();return a.reset(),e}function I(e,t,n){n&&N(n),He(e,t)}function N(e){Oe=e,b.setSourceFile(e),d&&d(e)}function O(e){Re=e,b.setWriter(e)}function R(){n=[],o=[],r=St.createMap(),t=[],i=0,b.reset(),O(void 0)}function Me(e){e&&Fe(e)}function Fe(e){He(4,e)}function L(e){He(2,e)}function Ue(e){He(1,e)}function He(e,t){g?g(e,t,P):P(e,t)}function P(e,t){t=Ve(e,t),k&&0!==e?k(e,t,M):M(e,t)}function M(e,t){l&&0!==e&&2!==e?l(e,t,F):F(e,t)}function F(e,t){switch(e){case 0:return r=t,St.Debug.assertNode(r,St.isSourceFile),void function(e){dt();var t=e.statements;if(T){var n=0===t.length||!St.isPrologueDirective(t[0])||St.nodeIsSynthesized(t[0]);if(n)return T(e,t,z)}z(e)}(r);case 2:return o=t,St.Debug.assertNode(o,St.isIdentifier),void Ke(o);case 1:return Ge(t);case 3:return Fe((n=St.cast(t,St.isTypeParameterDeclaration)).name),pt(" in "),void Fe(n.constraint);case 4:return function(e){var t=e.kind;if(St.isKeyword(t))return void mt(e);switch(t){case 14:case 15:case 16:return We(e);case 71:return Ke(e);case 143:return 71===(we=(Ne=e).left).kind?Ue(we):Fe(we),pt("."),void Fe(Ne.right);case 144:return Ie=e,pt("["),Ue(Ie.expression),void pt("]");case 145:return Fe((Be=e).name),nt(" extends ",Be.constraint),void nt(" = ",Be.default);case 146:return function(e){at(e,e.decorators),tt(e,e.modifiers),Me(e.dotDotDotToken),e.name&&Fe(e.name);Me(e.questionToken),e.parent&&273===e.parent.kind&&!e.name?Fe(e.type):nt(": ",e.type);ot(" = ",e.initializer)}(e);case 147:return De=e,pt("@"),void Ue(De.expression);case 148:return at(Ae=e,Ae.decorators),tt(Ae,Ae.modifiers),Fe(Ae.name),Me(Ae.questionToken),nt(": ",Ae.type),void pt(";");case 149:return at(xe=e,xe.decorators),tt(xe,xe.modifiers),Fe(xe.name),Me(xe.questionToken),nt(": ",xe.type),ot(" = ",xe.initializer),void pt(";");case 150:return at(Ce=e,Ce.decorators),tt(Ce,Ce.modifiers),Fe(Ce.name),Me(Ce.questionToken),lt(Ce,Ce.typeParameters),ct(Ce,Ce.parameters),nt(": ",Ce.type),void pt(";");case 151:return at(Se=e,Se.decorators),tt(Se,Se.modifiers),Me(Se.asteriskToken),Fe(Se.name),Me(Se.questionToken),void Xe(Se,Je);case 152:return tt(Ee=e,Ee.modifiers),pt("constructor"),void Xe(Ee,Je);case 153:case 154:return at(Te=e,Te.decorators),tt(Te,Te.modifiers),pt(153===Te.kind?"get ":"set "),Fe(Te.name),void Xe(Te,Je);case 155:return at(ke=e,ke.decorators),tt(ke,ke.modifiers),lt(ke,ke.typeParameters),ct(ke,ke.parameters),nt(": ",ke.type),void pt(";");case 156:return at(be=e,be.decorators),tt(be,be.modifiers),pt("new "),lt(be,be.typeParameters),ct(be,be.parameters),nt(": ",be.type),void pt(";");case 157:return at(me=e,me.decorators),tt(me,me.modifiers),ve=(ye=me).parameters,gt(ye,ve,4432),nt(": ",me.type),void pt(";");case 158:return Fe((he=e).parameterName),pt(" is "),void Fe(he.type);case 159:return Fe((fe=e).typeName),void st(fe,fe.typeArguments);case 160:return lt(_e=e,_e.typeParameters),ut(_e,_e.parameters),pt(" => "),void Fe(_e.type);case 273:return de=e,pt("function"),ct(de,de.parameters),pt(":"),void Fe(de.type);case 161:return pe=e,pt("new "),lt(pe,pe.typeParameters),ct(pe,pe.parameters),pt(" => "),void Fe(pe.type);case 162:return ge=e,pt("typeof "),void Fe(ge.exprName);case 163:return function(e){pt("{");var t=1&St.getEmitFlags(e)?448:65;gt(e,e.members,262144|t),pt("}")}(e);case 164:return Fe(e.elementType),void pt("[]");case 165:return ue=e,pt("["),gt(ue,ue.elementTypes,336),void pt("]");case 166:return void gt(ce=e,ce.types,260);case 167:return void gt(le=e,le.types,264);case 168:return se=e,pt("("),Fe(se.type),void pt(")");case 201:return Ue((ae=e).expression),void st(ae,ae.typeArguments);case 169:return void pt("this");case 170:return yt((ie=e).operator),pt(" "),void Fe(ie.type);case 171:return Fe((re=e).objectType),pt("["),Fe(re.indexType),void pt("]");case 172:return function(e){var t=St.getEmitFlags(e);pt("{"),1&t?pt(" "):(dt(),_t());e.readonlyToken&&(Fe(e.readonlyToken),pt(" "));pt("["),He(3,e.typeParameter),pt("]"),Me(e.questionToken),pt(": "),Fe(e.type),pt(";"),1&t?pt(" "):(dt(),ft());pt("}")}(e);case 173:return void Ue(e.literal);case 268:return void pt("*");case 269:return void pt("?");case 270:return oe=e,pt("?"),void Fe(oe.type);case 271:return ne=e,pt("!"),void Fe(ne.type);case 272:return Fe(e.type),void pt("=");case 274:return te=e,pt("..."),void Fe(te.type);case 174:return void(0===(ee=(Q=e).elements).length?pt("{}"):(pt("{"),gt(Q,ee,432),pt("}")));case 175:return void(0===($=e).elements.length?pt("[]"):(pt("["),gt($,$.elements,304),pt("]")));case 176:return rt((Z=e).propertyName,": "),Me(Z.dotDotDotToken),Fe(Z.name),void ot(" = ",Z.initializer);case 205:return Ue((q=e).expression),void Fe(q.literal);case 206:return void pt(";");case 207:return ht(17,(J=e).pos,J),ze(J,!J.multiLine&&bt(J)),_t(),Pe(J.statements.end),ft(),void ht(18,J.statements.end,J);case 208:return tt(X=e,X.modifiers),Fe(X.declarationList),void pt(";");case 209:return void pt(";");case 210:return Ue(e.expression),void pt(";");case 211:return Y=ht(90,(j=e).pos,j),pt(" "),ht(19,Y,j),Ue(j.expression),ht(20,j.expression.end,j),it(j,j.thenStatement),void(j.elseStatement&&(vt(j),ht(82,j.thenStatement.end,j),211===j.elseStatement.kind?(pt(" "),Fe(j.elseStatement)):it(j,j.elseStatement)));case 212:return function(e){pt("do"),it(e,e.statement),St.isBlock(e.statement)?pt(" "):vt(e);pt("while ("),Ue(e.expression),pt(");")}(e);case 213:return z=e,pt("while ("),Ue(z.expression),pt(")"),void it(z,z.statement);case 214:return K=ht(88,(W=e).pos),pt(" "),ht(19,K,W),je(W.initializer),pt(";"),ot(" ",W.condition),pt(";"),ot(" ",W.incrementor),pt(")"),void it(W,W.statement);case 215:return V=ht(88,(G=e).pos),pt(" "),ht(19,V),je(G.initializer),pt(" in "),Ue(G.expression),ht(20,G.expression.end),void it(G,G.statement);case 216:return H=ht(88,(U=e).pos),pt(" "),rt(U.awaitModifier," "),ht(19,H),je(U.initializer),pt(" of "),Ue(U.expression),ht(20,U.expression.end),void it(U,U.statement);case 217:return ht(77,(F=e).pos),nt(" ",F.label),void pt(";");case 218:return ht(72,(M=e).pos),nt(" ",M.label),void pt(";");case 219:return w=96,O=(P=e).pos,(L=(R=P)&&St.getParseTreeNode(R))&&L.kind===R.kind&&(O=St.skipTrivia(Oe.text,O)),O=ht(w,O,R),L&&L.kind===R.kind&&Le(O,!0),ot(" ",P.expression),void pt(";");case 220:return N=e,pt("with ("),Ue(N.expression),pt(")"),void it(N,N.statement);case 221:return I=ht(98,(B=e).pos),pt(" "),ht(19,I),Ue(B.expression),ht(20,B.expression.end),pt(" "),void Fe(B.caseBlock);case 222:return Fe((D=e).label),pt(": "),void Fe(D.statement);case 223:return A=e,pt("throw"),ot(" ",A.expression),void pt(";");case 224:return function(e){pt("try "),Fe(e.tryBlock),e.catchClause&&(vt(e),Fe(e.catchClause));e.finallyBlock&&(vt(e),pt("finally "),Fe(e.finallyBlock))}(e);case 225:return ht(78,e.pos),void pt(";");case 226:return Fe((x=e).name),nt(": ",x.type),void ot(" = ",x.initializer);case 227:return C=e,pt(St.isLet(C)?"let ":St.isConst(C)?"const ":"var "),void gt(C,C.declarations,272);case 228:return void Ye(e);case 229:return void qe(e);case 230:return at(S=e,S.decorators),tt(S,S.modifiers),pt("interface "),Fe(S.name),lt(S,S.typeParameters),gt(S,S.heritageClauses,256),pt(" {"),gt(S,S.members,65),void pt("}");case 231:return at(E=e,E.decorators),tt(E,E.modifiers),pt("type "),Fe(E.name),lt(E,E.typeParameters),pt(" = "),Fe(E.type),void pt(";");case 232:return tt(T=e,T.modifiers),pt("enum "),Fe(T.name),Tt(),pt(" {"),gt(T,T.members,81),pt("}"),void Et();case 233:return function(e){tt(e,e.modifiers),512&~e.flags&&pt(16&e.flags?"namespace ":"module ");Fe(e.name);var t=e.body;for(;233===t.kind;)pt("."),Fe(t.name),t=t.body;pt(" "),Fe(t)}(e);case 234:return k=e,Tt(),pt("{"),ze(k,bt(k)),pt("}"),void Et();case 235:return ht(17,(b=e).pos),gt(b,b.clauses,65),void ht(18,b.clauses.end);case 236:return v=e,pt("export as namespace "),Fe(v.name),void pt(";");case 237:return tt(m=e,m.modifiers),pt("import "),Fe(m.name),pt(" = "),71===(y=m.moduleReference).kind?Ue(y):Fe(y),void pt(";");case 238:return function(e){tt(e,e.modifiers),pt("import "),e.importClause&&(Fe(e.importClause),pt(" from "));Ue(e.moduleSpecifier),pt(";")}(e);case 239:return function(e){Fe(e.name),e.name&&e.namedBindings&&pt(", ");Fe(e.namedBindings)}(e);case 240:return h=e,pt("* as "),void Fe(h.name);case 241:return void Ze(e);case 242:return void $e(e);case 243:return pt((f=e).isExportEquals?"export = ":"export default "),Ue(f.expression),void pt(";");case 244:return function(e){pt("export "),e.exportClause?Fe(e.exportClause):pt("*");e.moduleSpecifier&&(pt(" from "),Ue(e.moduleSpecifier));pt(";")}(e);case 245:return void Ze(e);case 246:return void $e(e);case 247:return;case 248:return _=e,pt("require("),Ue(_.expression),void pt(")");case 10:return d=e,void Re.writeLiteral(kt(d,!0));case 251:return function(e){pt("<"),Qe(e.tagName),t=e.attributes.properties,n=" ",St.some(t)&&pt(n),e.attributes.properties&&0<e.attributes.properties.length&&Fe(e.attributes);var t,n;pt(">")}(e);case 252:return p=e,pt("</"),Qe(p.tagName),void pt(">");case 253:return Fe((g=e).name),void nt("=",g.initializer);case 254:return void gt(u=e,u.properties,131328);case 255:return c=e,pt("{..."),Ue(c.expression),void pt("}");case 256:return void((l=e).expression&&(pt("{"),Me(l.dotDotDotToken),Ue(l.expression),pt("}")));case 257:return s=e,pt("case "),Ue(s.expression),pt(":"),void et(s,s.statements);case 258:return a=e,pt("default:"),void et(a,a.statements);case 259:return i=e,pt(" "),yt(i.token),pt(" "),void gt(i,i.types,272);case 260:return function(e){var t=ht(74,e.pos);pt(" "),e.variableDeclaration&&(ht(19,t),Fe(e.variableDeclaration),ht(20,e.variableDeclaration.end),pt(" "));Fe(e.block)}(e);case 261:return function(e){Fe(e.name),pt(": ");var t=e.initializer;if(Le&&0==(512&St.getEmitFlags(t))){var n=St.getCommentRange(t);Le(n.pos)}Ue(t)}(e);case 262:return Fe((r=e).name),void(r.objectAssignmentInitializer&&(pt(" = "),Ue(r.objectAssignmentInitializer)));case 263:return void((o=e).expression&&(pt("..."),Ue(o.expression)));case 264:return Fe((n=e).name),void ot(" = ",n.initializer)}var n;var o;var r;var i;var a;var s;var l;var c;var u;var g;var p;var d;var _;var f;var h;var m,y;var v;var b;var k;var T;var E;var S;var C;var x;var A;var D;var B,I;var N;var w,O,R,L;var P;var M;var F;var U,H;var G,V;var W,K;var z;var j,Y;var X;var J;var q;var Z;var $;var Q,ee;var te;var ne;var oe;var re;var ie;var ae;var se;var le;var ce;var ue;var ge;var pe;var de;var _e;var fe;var he;var me,ye,ve;var be;var ke;var Te;var Ee;var Se;var Ce;var xe;var Ae;var De;var Be;var Ie;var Ne,we;if(St.isExpression(e))return Ge(Ve(1,e));if(St.isToken(e))return void mt(e)}(t)}var n,o,r}function Ge(e){var t,n,o,r,i,a,s,l,c,u,g,p,d,_,f,h,m,y,v,b,k,T,E,S,C,x,A,D,B,I,N;switch(e.kind){case 8:return void We(e);case 9:case 12:case 13:return We(e);case 71:return Ke(e);case 86:case 95:case 97:case 101:case 99:case 91:return void mt(e);case 177:return I=(B=e).elements,N=B.multiLine?32768:0,void q(B,I,4466|N);case 178:return function(e){var t=65536&St.getEmitFlags(e);t&&_t();var n=e.multiLine?32768:0,o=1<=Oe.languageVersion?32:0;gt(e,e.properties,263122|o|n),t&&ft()}(e);case 179:return function(e){var t=!1,n=!1;if(!(131072&St.getEmitFlags(e))){var o=e.expression.end,r=St.skipTrivia(Oe.text,e.expression.end)+1,i=St.createToken(23);i.pos=o,i.end=r,t=ie(e,e.expression,i),n=ie(e,i,e.name)}Ue(e.expression),Q(t),pt(!t&&function(e){{if(e=St.skipPartiallyEmittedExpressions(e),St.isNumericLiteral(e)){var t=se(e);return!e.numericLiteralFlags&&!St.stringContains(t,St.tokenToString(23))}if(St.isPropertyAccessExpression(e)||St.isElementAccessExpression(e)){var n=St.getConstantValue(e);return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n&&w.removeComments}}}(e.expression)?"..":"."),Q(n),Fe(e.name),ee(t,n)}(e);case 180:return Ue((D=e).expression),pt("["),Ue(D.argumentExpression),void pt("]");case 181:return Ue((A=e).expression),st(A,A.typeArguments),void q(A,A.arguments,1296);case 182:return x=e,pt("new "),Ue(x.expression),st(x,x.typeArguments),void q(x,x.arguments,9488);case 183:return Ue((C=e).tag),pt(" "),void Ue(C.template);case 184:return S=e,pt("<"),Fe(S.type),pt(">"),void Ue(S.expression);case 185:return E=e,pt("("),Ue(E.expression),void pt(")");case 186:return void Ye(e);case 187:return at(T=e,T.decorators),tt(T,T.modifiers),void Xe(T,H);case 188:return k=e,pt("delete "),void Ue(k.expression);case 189:return b=e,pt("typeof "),void Ue(b.expression);case 190:return v=e,pt("void "),void Ue(v.expression);case 191:return y=e,pt("await "),void Ue(y.expression);case 192:return function(e){yt(e.operator),t=e,n=t.operand,192!==n.kind||(37!==t.operator||37!==n.operator&&43!==n.operator)&&(38!==t.operator||38!==n.operator&&44!==n.operator)||pt(" ");var t,n;Ue(e.operand)}(e);case 193:return Ue((m=e).operand),void yt(m.operator);case 194:return _=26!==(d=e).operatorToken.kind,f=ie(d,d.left,d.operatorToken),h=ie(d,d.operatorToken,d.right),Ue(d.left),Q(f,_?" ":void 0),Pe(d.operatorToken.pos),mt(d.operatorToken),Le(d.operatorToken.end,!0),Q(h," "),Ue(d.right),void ee(f,h);case 195:return c=ie(l=e,l.condition,l.questionToken),u=ie(l,l.questionToken,l.whenTrue),g=ie(l,l.whenTrue,l.colonToken),p=ie(l,l.colonToken,l.whenFalse),Ue(l.condition),Q(c," "),Fe(l.questionToken),Q(u," "),Ue(l.whenTrue),ee(c,u),Q(g," "),Fe(l.colonToken),Q(p," "),Ue(l.whenFalse),void ee(g,p);case 196:return Fe((s=e).head),void gt(s,s.templateSpans,131072);case 197:return a=e,pt("yield"),Fe(a.asteriskToken),void ot(" ",a.expression);case 198:return i=e,pt("..."),void Ue(i.expression);case 199:return void qe(e);case 200:return;case 202:return Ue((r=e).expression),void(r.type&&(pt(" as "),Fe(r.type)));case 203:return Ue(e.expression),void pt("!");case 204:return ht((o=e).keywordToken,o.pos),pt("."),void Fe(o.name);case 249:return Fe((n=e).openingElement),gt(n,n.children,131072),void Fe(n.closingElement);case 250:return function(e){pt("<"),Qe(e.tagName),pt(" "),e.attributes.properties&&0<e.attributes.properties.length&&Fe(e.attributes);pt("/>")}(e);case 288:return void Ue(e.expression);case 289:return void q(t=e,t.elements,272)}}function Ve(e,t){return t&&_&&_(e,t)||t}function U(e){p&&p(e,$)}function We(e){var t=se(e);!w.sourceMap&&!w.inlineSourceMap||9!==e.kind&&!St.isTemplateLiteralKind(e.kind)?pt(t):Re.writeLiteral(t)}function Ke(e){pt(kt(e,!1)),st(e,e.typeArguments)}function H(e){lt(e,e.typeParameters),ut(e,e.parameters),nt(": ",e.type),pt(" "),Fe(e.equalsGreaterThanToken)}function ze(e,t){var n=t||1&St.getEmitFlags(e)?384:65;gt(e,e.statements,n)}function je(e){void 0!==e&&(227===e.kind?Fe(e):Ue(e))}function Ye(e){at(e,e.decorators),tt(e,e.modifiers),pt("function"),Me(e.asteriskToken),pt(" "),L(e.name),Xe(e,Je)}function G(e,t){V(t)}function Xe(e,t){var n=e.body;if(n)if(St.isBlock(n)){var o=65536&St.getEmitFlags(e);o&&_t(),524288&St.getEmitFlags(e)?(t(e),g?g(4,n,G):V(n)):(Tt(),t(e),g?g(4,n,G):V(n),Et()),o&&ft()}else t(e),pt(" "),Ue(n);else t(e),pt(";")}function Je(e){lt(e,e.typeParameters),ct(e,e.parameters),nt(": ",e.type)}function V(e){pt(" {"),_t();var t=function(e){if(1&St.getEmitFlags(e))return!0;if(e.multiLine)return!1;if(!St.nodeIsSynthesized(e)&&!St.rangeIsOnSingleLine(e,Oe))return!1;if(te(e,e.statements,2)||oe(e,e.statements,2))return!1;for(var t,n=0,o=e.statements;n<o.length;n++){var r=o[n];if(ne(t,r,2))return!1;t=r}return!0}(e)?W:K;T?T(e,e.statements,t):t(e),ft(),ht(18,e.statements.end,e)}function W(e){K(e,!0)}function K(e,t){var n=j(e.statements,!0),o=Re.getTextPos();U(e),0===n&&o===Re.getTextPos()&&t?(ft(),gt(e,e.statements,384),_t()):gt(e,e.statements,1,n)}function qe(e){at(e,e.decorators),tt(e,e.modifiers),pt("class"),J(" ",e.name,L);var t=65536&St.getEmitFlags(e);t&&_t(),lt(e,e.typeParameters),gt(e,e.heritageClauses,256),Tt(),pt(" {"),gt(e,e.members,65),pt("}"),Et(),t&&ft()}function Ze(e){pt("{"),gt(e,e.elements,432),pt("}")}function $e(e){e.propertyName&&(Fe(e.propertyName),pt(" as ")),Fe(e.name)}function Qe(e){71===e.kind?Ue(e):Fe(e)}function et(e,t){var n=1===t.length&&(St.nodeIsSynthesized(e)||St.nodeIsSynthesized(t[0])||St.rangeStartPositionsAreOnSameLine(e,t[0],Oe));0<t.length&&Le(t.pos);var o=81985;n&&(pt(" "),o&=-66),gt(e,t,o)}function z(e){var t=e.statements;Tt(),U(e);var n=St.findIndex(t,function(e){return!St.isPrologueDirective(e)});gt(e,t,1,-1===n?t.length:n),Et()}function j(e,t,n){for(var o=0;o<e.length;o++){var r=e[o];if(!St.isPrologueDirective(r))return o;(!n||!n.has(r.expression.text))&&((t||0<o)&&dt(),Fe(r),n&&n.set(r.expression.text,!0))}return e.length}function Y(e){if(St.isSourceFile(e))N(e),j(e.statements);else for(var t=St.createMap(),n=0,o=e.sourceFiles;n<o.length;n++){var r=o[n];N(r),j(r.statements,!0,t)}}function X(e){if(St.isSourceFile(e)){var t=St.getShebang(e.text);if(t)return pt(t),dt(),!0}else for(var n=0,o=e.sourceFiles;n<o.length;n++){if(X(o[n]))break}}function tt(e,t){t&&t.length&&(gt(e,t,131328),pt(" "))}function nt(e,t){J(e,t,Fe)}function ot(e,t){J(e,t,Ue)}function J(e,t,n){t&&(pt(e),n(t))}function rt(e,t){e&&(Fe(e),pt(t))}function it(e,t){St.isBlock(t)||1&St.getEmitFlags(e)?(pt(" "),Fe(t)):(dt(),_t(),Fe(t),ft())}function at(e,t){gt(e,t,24577)}function st(e,t){gt(e,t,26960)}function lt(e,t){gt(e,t,26960)}function ct(e,t){gt(e,t,1360)}function ut(e,t){var n,o,r;n=e,o=t,!(r=St.singleOrUndefined(o))||r.pos!==n.pos||St.isArrowFunction(n)&&n.type||St.some(n.decorators)||St.some(n.modifiers)||St.some(n.typeParameters)||St.some(r.decorators)||St.some(r.modifiers)||r.dotDotDotToken||r.questionToken||r.type||r.initializer||!St.isIdentifier(r.name)?ct(e,t):gt(e,t,336)}function gt(e,t,n,o,r){Z(Fe,e,t,n,o,r)}function q(e,t,n,o,r){Z(Ue,e,t,n,o,r)}function Z(e,t,n,o,r,i){void 0===r&&(r=0),void 0===i&&(i=n?n.length-r:0);var a=void 0===n;if(!(a&&8192&o)){var s=a||r>=n.length||0===i;if(s&&16384&o)return m&&m(n),void(y&&y(n));if(7680&o&&pt(de[7680&o][0]),m&&m(n),s)1&o?dt():128&o&&!(262144&o)&&pt(" ");else{var l=0==(131072&o),c=l;te(t,n,o)?(dt(),c=!1):128&o&&pt(" "),64&o&&_t();for(var u=void 0,g=void 0,p=pe[28&o],d=0;d<i;d++){var _=n[r+d];if(u&&(p&&u.end!==t.end&&Pe(u.end),pt(p),ne(u,_,o)?(0==(67&o)&&(_t(),g=!0),dt(),c=!1):u&&256&o&&pt(" ")),c){if(Le){var f=St.getCommentRange(_);Le(f.pos)}}else c=l;e(_),g&&(ft(),g=!1),u=_}var h=32&o&&n.hasTrailingComma;16&o&&h&&pt(","),!u||!p||u.end===t.end||1024&St.getEmitFlags(u)||Pe(u.end),64&o&&ft(),oe(t,n,o)?dt():128&o&&pt(" ")}y&&y(n),7680&o&&pt(de[7680&o][1])}}function pt(e){Re.write(e)}function dt(){Re.writeLine()}function _t(){Re.increaseIndent()}function ft(){Re.decreaseIndent()}function ht(e,t,n){return c?c(n,e,t,yt):yt(e,t)}function mt(e){f&&f(e),pt(St.tokenToString(e.kind)),h&&h(e)}function yt(e,t){var n=St.tokenToString(e);return pt(n),t<0?t:t+n.length}function vt(e){1&St.getEmitFlags(e)?pt(" "):dt()}function $(e){for(var t=e.split(/\r\n?|\n/g),n=function(e){for(var t,n=0,o=e;n<o.length;n++)for(var r=o[n],i=0;i<r.length&&(void 0===t||i<t);i++)if(!St.isWhiteSpaceLike(r.charCodeAt(i))&&(void 0===t||i<t)){t=i;break}return t}(t),o=0;o<t.length;o++){var r=n?t[o].slice(n):t[o];r.length&&(dt(),pt(r),dt())}}function Q(e,t){e?(_t(),dt()):t&&pt(t)}function ee(e,t){e&&ft(),t&&ft()}function te(e,t,n){if(1&n)return!0;if(2&n){if(32768&n)return!0;var o=t[0];return void 0===o?!St.rangeIsOnSingleLine(e,Oe):St.positionIsSynthesized(e.pos)||St.nodeIsSynthesized(o)?re(o,n):!St.rangeStartPositionsAreOnSameLine(e,o,Oe)}return!1}function ne(e,t,n){return!!(1&n)||(2&n?void 0!==e&&void 0!==t&&(St.nodeIsSynthesized(e)||St.nodeIsSynthesized(t)?re(e,n)||re(t,n):!St.rangeEndIsOnSameLineAsRangeStart(e,t,Oe)):t.startsOnNewLine)}function oe(e,t,n){if(1&n)return 0==(65536&n);if(2&n){if(32768&n)return!0;var o=St.lastOrUndefined(t);return void 0===o?!St.rangeIsOnSingleLine(e,Oe):St.positionIsSynthesized(e.pos)||St.nodeIsSynthesized(o)?re(o,n):!St.rangeEndPositionsAreOnSameLine(e,o,Oe)}return!1}function re(e,t){if(St.nodeIsSynthesized(e)){var n=e.startsOnNewLine;return void 0===n?0!=(32768&t):n}return 0!=(32768&t)}function ie(e,t,n){return e=ae(e),t=ae(t),!!(n=ae(n)).startsOnNewLine||!(St.nodeIsSynthesized(e)||St.nodeIsSynthesized(t)||St.nodeIsSynthesized(n)||St.rangeEndIsOnSameLineAsRangeStart(t,n,Oe))}function bt(e){return 0===e.statements.length&&St.rangeEndIsOnSameLineAsRangeStart(e,e,Oe)}function ae(e){for(;185===e.kind&&St.nodeIsSynthesized(e);)e=e.expression;return e}function kt(e,t){return St.isGeneratedIdentifier(e)?function(e){{if(4===e.autoGenerateKind){var t=function(e){var t=e.autoGenerateId,n=e,o=n.original;for(;o&&(n=o,!St.isIdentifier(n)||4!==n.autoGenerateKind||n.autoGenerateId===t);)o=n.original;return n}(e);return le(t)}var n=e.autoGenerateId;return o[n]||(o[n]=function(e){switch(e.autoGenerateKind){case 1:return ue(0);case 2:return ue(268435456);case 3:return ge(St.idText(e))}St.Debug.fail("Unsupported GeneratedIdentifierKind.")}(e))}}(e):!St.isIdentifier(e)||!St.nodeIsSynthesized(e)&&e.parent?9===e.kind&&e.textSourceNode?kt(e.textSourceNode,t):!St.isLiteralExpression(e)||!St.nodeIsSynthesized(e)&&e.parent?St.getSourceTextOfNodeFromSourceFile(Oe,e,t):e.text:St.idText(e)}function se(e){if(9===e.kind&&e.textSourceNode){var t=e.textSourceNode;return St.isIdentifier(t)?16777216&St.getEmitFlags(e)?'"'+St.escapeString(kt(t))+'"':'"'+St.escapeNonAsciiString(kt(t))+'"':se(t)}return St.getLiteralText(e,Oe)}function Tt(){t.push(i),i=0}function Et(){i=t.pop()}function le(e){var t=St.getNodeId(e);return n[t]||(n[t]=function(e){switch(e.kind){case 71:return ge(kt(e));case 233:case 232:return function(e,t){for(var n=t;St.isNodeDescendantOf(n,t);n=n.nextContainer)if(n.locals){var o=n.locals.get(St.escapeLeadingUnderscores(e));if(o&&3253183&o.flags)return!1}return!0}(r=kt((o=e).name),o)?r:ge(r);case 238:case 244:return t=e,n=St.getExternalModuleName(t),ge(St.isStringLiteral(n)?St.makeIdentifierFromModuleName(n.text):"module");case 228:case 229:case 243:return ge("default");case 199:return ge("class");case 151:case 153:case 154:return function(e){if(St.isIdentifier(e.name))return le(e.name);return ue(0)}(e);default:return ue(0)}var t,n;var o,r}(e))}function ce(e){return!(s&&s(e)||Oe.identifiers.has(e)||r.has(e))}function ue(e){if(e&&!(i&e)&&ce(t=268435456===e?"_i":"_n"))return i|=e,t;for(;;){var t,n=268435455&i;if(i++,8!==n&&13!==n)if(ce(t=n<26?"_"+String.fromCharCode(97+n):"_"+(n-26)))return t}}function ge(e){95!==e.charCodeAt(e.length-1)&&(e+="_");for(var t=1;;){var n=e+t;if(ce(n))return r.set(n,!0),n;t++}}}St.forEachEmittedFile=k,St.emitFiles=function(a,s,e,l,t){var _,f,h,m=s.getCompilerOptions(),y=St.getEmitModuleKind(m),c=m.sourceMap||m.inlineSourceMap?[]:void 0,u=m.listEmittedFiles?[]:void 0,g=St.createDiagnosticCollection(),n=s.getNewLine(),p=St.createTextWriter(n),d=St.createSourceMapWriter(s,p),v=!1,o=St.getSourceFilesToEmit(s,e),r=St.transformNodes(a,s,m,o,t,!1),b=T(m,{hasGlobalName:a.hasGlobalName,onEmitNode:r.emitNodeWithNotification,substituteNode:r.substituteNode,onEmitSourceMapOfNode:d.emitNodeWithSourceMap,onEmitSourceMapOfToken:d.emitTokenWithSourceMap,onEmitSourceMapOfPosition:d.emitPos,onEmitHelpers:function(e,t){var n=!1,o=266===e.kind?e:void 0;if(!o||y!==St.ModuleKind.None){for(var r=o?o.sourceFiles.length:1,i=0;i<r;i++){var a=o?o.sourceFiles[i]:e,s=St.isSourceFile(a)?a:_,l=m.noEmitHelpers||void 0!==St.getExternalHelpersModuleName(s),c=St.isSourceFile(a)&&!h,u=St.getEmitHelpers(a);if(u)for(var g=0,p=St.stableSort(u,St.compareEmitHelpers);g<p.length;g++){var d=p[g];if(d.scoped){if(o)continue}else{if(l)continue;if(c){if(f.get(d.name))continue;f.set(d.name,!0)}}t(d.text),n=!0}}return n}},onSetSourceFile:function(e){_=e,d.setSourceFile(e)}});return St.performance.mark("beforePrint"),k(s,function(e,t){var n,o=e.jsFilePath,r=e.sourceMapFilePath,i=e.declarationFilePath;s.isEmitBlocked(o)||m.noEmit?v=!0:l||function(e,t,n){var o=266===n.kind?n:void 0,r=265===n.kind?n:void 0,i=o?o.sourceFiles:[r];d.initialize(e,t,n),o?(f=St.createMap(),h=!1,b.writeBundle(o,p)):(h=!0,b.writeFile(r,p)),p.writeLine();var a=d.getSourceMappingURL();a&&p.write("//# sourceMappingURL="+a),m.sourceMap&&!m.inlineSourceMap&&St.writeFile(s,g,t,d.getText(),!1,i),c&&c.push(d.getSourceMapData()),St.writeFile(s,g,e,p.getText(),m.emitBOM,i),d.reset(),p.reset(),f=_=void 0,h=!1}(o,r,t),i&&(v=St.writeDeclarationFile(i,266===(n=t).kind?St.updateBundle(n,St.sameMap(n.sourceFiles,St.getOriginalSourceFile)):St.getOriginalSourceFile(n),s,a,g,l)||v),!v&&u&&(l||u.push(o),r&&u.push(r),i&&u.push(i))},r.transformed,l),St.performance.measure("printTime","beforePrint"),r.dispose(),{emitSkipped:v,diagnostics:g.getDiagnostics(),emittedFiles:u,sourceMaps:c}},St.createPrinter=T,(o=n||(n={}))[o.Auto=0]="Auto",o[o.CountMask=268435455]="CountMask",o[o._i=268435456]="_i",(i=r||(r={}))[i.None=0]="None",i[i.SingleLine=0]="SingleLine",i[i.MultiLine=1]="MultiLine",i[i.PreserveLines=2]="PreserveLines",i[i.LinesMask=3]="LinesMask",i[i.NotDelimited=0]="NotDelimited",i[i.BarDelimited=4]="BarDelimited",i[i.AmpersandDelimited=8]="AmpersandDelimited",i[i.CommaDelimited=16]="CommaDelimited",i[i.DelimitersMask=28]="DelimitersMask",i[i.AllowTrailingComma=32]="AllowTrailingComma",i[i.Indented=64]="Indented",i[i.SpaceBetweenBraces=128]="SpaceBetweenBraces",i[i.SpaceBetweenSiblings=256]="SpaceBetweenSiblings",i[i.Braces=512]="Braces",i[i.Parenthesis=1024]="Parenthesis",i[i.AngleBrackets=2048]="AngleBrackets",i[i.SquareBrackets=4096]="SquareBrackets",i[i.BracketsMask=7680]="BracketsMask",i[i.OptionalIfUndefined=8192]="OptionalIfUndefined",i[i.OptionalIfEmpty=16384]="OptionalIfEmpty",i[i.Optional=24576]="Optional",i[i.PreferNewLine=32768]="PreferNewLine",i[i.NoTrailingNewLine=65536]="NoTrailingNewLine",i[i.NoInterveningComments=131072]="NoInterveningComments",i[i.NoSpaceIfEmpty=262144]="NoSpaceIfEmpty",i[i.SingleElement=524288]="SingleElement",i[i.Modifiers=131328]="Modifiers",i[i.HeritageClauses=256]="HeritageClauses",i[i.SingleLineTypeLiteralMembers=448]="SingleLineTypeLiteralMembers",i[i.MultiLineTypeLiteralMembers=65]="MultiLineTypeLiteralMembers",i[i.TupleTypeElements=336]="TupleTypeElements",i[i.UnionTypeConstituents=260]="UnionTypeConstituents",i[i.IntersectionTypeConstituents=264]="IntersectionTypeConstituents",i[i.ObjectBindingPatternElements=432]="ObjectBindingPatternElements",i[i.ArrayBindingPatternElements=304]="ArrayBindingPatternElements",i[i.ObjectLiteralExpressionProperties=263122]="ObjectLiteralExpressionProperties",i[i.ArrayLiteralExpressionElements=4466]="ArrayLiteralExpressionElements",i[i.CommaListElements=272]="CommaListElements",i[i.CallExpressionArguments=1296]="CallExpressionArguments",i[i.NewExpressionArguments=9488]="NewExpressionArguments",i[i.TemplateExpressionSpans=131072]="TemplateExpressionSpans",i[i.SingleLineBlockStatements=384]="SingleLineBlockStatements",i[i.MultiLineBlockStatements=65]="MultiLineBlockStatements",i[i.VariableDeclarationList=272]="VariableDeclarationList",i[i.SingleLineFunctionBodyStatements=384]="SingleLineFunctionBodyStatements",i[i.MultiLineFunctionBodyStatements=1]="MultiLineFunctionBodyStatements",i[i.ClassHeritageClauses=256]="ClassHeritageClauses",i[i.ClassMembers=65]="ClassMembers",i[i.InterfaceMembers=65]="InterfaceMembers",i[i.EnumMembers=81]="EnumMembers",i[i.CaseBlockClauses=65]="CaseBlockClauses",i[i.NamedImportsOrExportsElements=432]="NamedImportsOrExportsElements",i[i.JsxElementChildren=131072]="JsxElementChildren",i[i.JsxElementAttributes=131328]="JsxElementAttributes",i[i.CaseOrDefaultClauseStatements=81985]="CaseOrDefaultClauseStatements",i[i.HeritageClauseTypes=272]="HeritageClauseTypes",i[i.SourceFileStatements=65537]="SourceFileStatements",i[i.Decorators=24577]="Decorators",i[i.TypeArguments=26960]="TypeArguments",i[i.TypeParameters=26960]="TypeParameters",i[i.Parameters=1360]="Parameters",i[i.IndexSignatureParameters=4432]="IndexSignatureParameters"}(ts||(ts={})),function(b){function k(e,t,n,o,r){var i=[],a=e.emit(t,function(e,t,n){i.push({name:e,writeByteOrderMark:n,text:t})},o,n,r);return{outputFiles:i,emitSkipped:a.emitSkipped}}b.getFileEmitOutput=k,b.createBuilder=function(_){var t,s,a,c=b.createMap(),l=b.createMap(),u=b.createMap(),g=b.createMap();return{updateProgram:function(e){a&&n(e)},getFilesAffectedBy:f,emitChangedFiles:function(n,o){d(n);var e=n.getCompilerOptions();if(!u.size)return b.emptyArray;if(e.outFile||e.out)return b.Debug.assert(0===l.size),u.clear(),[n.emit(void 0,o)];var r,i=b.createMap();return u.forEach(function(e,t){f(n,t).forEach(function(e){l.delete(e.path),i.has(e.path)||(i.set(e.path,!0),(r||(r=[])).push(n.emit(e,o)))})}),u.clear(),r||b.emptyArray},getSemanticDiagnostics:function(e,t){d(e),b.Debug.assert(0===u.size);var n,o=e.getCompilerOptions();if(o.outFile||o.out)return b.Debug.assert(0===l.size),e.getSemanticDiagnostics(void 0,t);for(var r=0,i=e.getSourceFiles();r<i.length;r++){var a=i[r];n=b.addRange(n,h(e,a,t))}return n||b.emptyArray},clear:function(){a=t=void 0,c.clear(),l.clear(),u.clear(),g.clear()}};function n(i){var e=i.getCompilerOptions().module!==b.ModuleKind.None;t!==e&&(a=(t=e)?function(){var r=b.createMap();return{onAddSourceFile:function(e,t){var n=y(e,t);n&&r.set(t.path,n)},onRemoveSourceFile:function(o){r.forEach(function(e,t){if(e.has(o)){var n=c.get(t);n&&p(t)}}),r.delete(o)},onUpdateSourceFile:function(e,t){var n=y(e,t);n?r.set(t.path,n):r.delete(t.path)},onUpdateSourceFileWithSameVersion:function(e,t){var n=y(e,t);if(!n)return r.delete(t.path);var o=r.get(t.path);return r.set(t.path,n),!o||o.size!==n.size||(b.forEachEntry(n,function(e,t){return!o.delete(t)})||!!o.size)},getFilesAffectedByUpdatedShape:function(e,t){if(!b.isExternalModule(t)&&!function(e){for(var t=0,n=e.statements;t<n.length;t++){var o=n[t];if(!b.isModuleWithStringLiteralName(o))return!1}return!0}(t))return v(e,t);var n=e.getCompilerOptions();if(n&&(n.isolatedModules||n.out||n.outFile))return[t];var o=b.createMap(),r=t.path;o.set(r,t);for(var i=l(r);0<i.length;){var a=i.pop();if(!o.has(a)){var s=e.getSourceFileByPath(a);o.set(a,s),s&&m(e,s)&&i.push.apply(i,l(a))}}return b.flatMapIter(o.values(),function(e){return e})}};function l(o){return b.mapDefinedIter(r.entries(),function(e){var t=e[0],n=e[1];return n.has(o)?t:void 0})}}():{onAddSourceFile:b.noop,onRemoveSourceFile:b.noop,onUpdateSourceFile:b.noop,onUpdateSourceFileWithSameVersion:b.returnFalse,getFilesAffectedByUpdatedShape:function(e,t){var n=e.getCompilerOptions();return n&&(n.out||n.outFile)?[t]:v(e,t)}},c.clear(),l.clear()),g.clear(),s=void 0,b.mutateMap(c,b.arrayToMap(i.getSourceFiles(),function(e){return e.path}),{createNewValue:function(e,t){return n=i,p((o=t).path),a.onAddSourceFile(n,o),{version:o.version,signature:void 0};var n,o},onDeleteValue:o,onExistingValue:function(e,t){return n=i,r=t,void((o=e).version!==r.version?(p(r.path),o.version=r.version,a.onUpdateSourceFile(n,r)):a.onUpdateSourceFileWithSameVersion(n,r)&&p(r.path));var n,o,r}})}function p(e){u.set(e,!0),l.delete(e)}function o(e,t){u.delete(t),l.delete(t),a.onRemoveSourceFile(t)}function d(e){a||n(e)}function f(e,t){d(e);var n=e.getSourceFileByPath(t);return n?m(e,n)?a.getFilesAffectedByUpdatedShape(e,n):[n]:b.emptyArray}function h(e,t,n){var o=t.path,r=l.get(o);if(r)return r;var i=e.getSemanticDiagnostics(t,n);return l.set(o,i),i}function m(e,t){if(b.Debug.assert(!!t),g.has(t.path))return!1;g.set(t.path,!0);var n=c.get(t.path);b.Debug.assert(!!n);var o,r=n.signature;if(t.isDeclarationFile)o=t.version,n.signature=o;else{var i=k(e,t,!0);i.outputFiles&&0<i.outputFiles.length?(o=_.computeHash(i.outputFiles[0].text),n.signature=o):o=r}return!r||o!==r}function y(e,t){var n;if(t.imports&&0<t.imports.length)for(var o=e.getTypeChecker(),r=0,i=t.imports;r<i.length;r++){var a=i[r],s=o.getSymbolAtLocation(a);if(s&&s.declarations&&s.declarations[0]){var l=b.getSourceFileOfNode(s.declarations[0]);l&&d(l.path)}}var c=b.getDirectoryPath(t.path);if(t.referencedFiles&&0<t.referencedFiles.length)for(var u=0,g=t.referencedFiles;u<g.length;u++){var p=g[u];d(b.toPath(p.fileName,c,_.getCanonicalFileName))}return t.resolvedTypeReferenceDirectiveNames&&t.resolvedTypeReferenceDirectiveNames.forEach(function(e){if(e){var t=e.resolvedFileName;d(b.toPath(t,c,_.getCanonicalFileName))}}),n;function d(e){n||(n=b.createMap()),n.set(e,!0)}}function v(t,e){if(s)return s;var n;a(e);for(var o=0,r=t.getSourceFiles();o<r.length;o++){var i=r[o];i!==e&&a(i)}return s=n||b.emptyArray;function a(e){t.isSourceFileDefaultLibrary(e)||(n||(n=[])).push(e)}}}}(ts||(ts={})),function(Ge){var Ve=/(^\s*$)|(^\s*\/\/\/?\s*(@ts-ignore)?)/;function We(e,t){var n=Ge.getDirectoryPath(t),o=Ge.isRootedDiskPath(e)?e:Ge.combinePaths(n,e);return Ge.normalizePath(o)}function Ke(e,r,i){var a;return Ge.forEach(e,function(e){var t=Ge.getNormalizedPathComponents(e,r);if(t.pop(),a){for(var n=Math.min(a.length,t.length),o=0;o<n;o++)if(i(a[o])!==i(t[o])){if(0===o)return!0;a.length=o;break}t.length<a.length&&(a.length=t.length)}else a=t})?"":a?Ge.getNormalizedPathFromPathComponents(a):r}function ze(r,i){var s,n=Ge.createMap();function a(e){var t;e.length>Ge.getRootLength(e)&&(t=e,!(n.has(t)||Ge.sys.directoryExists(t)&&(n.set(t,!0),1)))&&(a(Ge.getDirectoryPath(e)),Ge.sys.createDirectory(e))}function t(){return Ge.getDirectoryPath(Ge.normalizePath(Ge.sys.getExecutingFilePath()))}var o=Ge.getNewLineCharacter(r),e=Ge.sys.realpath&&function(e){return Ge.sys.realpath(e)};return{getSourceFile:function(e,t,n){var o;try{Ge.performance.mark("beforeIORead"),o=Ge.sys.readFile(e,r.charset),Ge.performance.mark("afterIORead"),Ge.performance.measure("I/O Read","beforeIORead","afterIORead")}catch(e){n&&n(e.message),o=""}return void 0!==o?Ge.createSourceFile(e,o,t,i):void 0},getDefaultLibLocation:t,getDefaultLibFileName:function(e){return Ge.combinePaths(t(),Ge.getDefaultLibFileName(e))},writeFile:function(e,t,n,o){try{Ge.performance.mark("beforeIOWrite"),a(Ge.getDirectoryPath(Ge.normalizePath(e))),Ge.isWatchSet(r)&&Ge.sys.createHash&&Ge.sys.getModifiedTime?function(e,t,n){s||(s=Ge.createMap());var o=Ge.sys.createHash(t),r=Ge.sys.getModifiedTime(e);if(r){var i=s.get(e);if(i&&i.byteOrderMark===n&&i.hash===o&&i.mtime.getTime()===r.getTime())return}Ge.sys.writeFile(e,t,n);var a=Ge.sys.getModifiedTime(e);s.set(e,{hash:o,byteOrderMark:n,mtime:a})}(e,t,n):Ge.sys.writeFile(e,t,n),Ge.performance.mark("afterIOWrite"),Ge.performance.measure("I/O Write","beforeIOWrite","afterIOWrite")}catch(e){o&&o(e.message)}},getCurrentDirectory:Ge.memoize(function(){return Ge.sys.getCurrentDirectory()}),useCaseSensitiveFileNames:function(){return Ge.sys.useCaseSensitiveFileNames},getCanonicalFileName:function(e){return Ge.sys.useCaseSensitiveFileNames?e:e.toLowerCase()},getNewLine:function(){return o},fileExists:function(e){return Ge.sys.fileExists(e)},readFile:function(e){return Ge.sys.readFile(e)},trace:function(e){return Ge.sys.write(e+o)},directoryExists:function(e){return Ge.sys.directoryExists(e)},getEnvironmentVariable:function(e){return Ge.sys.getEnvironmentVariable?Ge.sys.getEnvironmentVariable(e):""},getDirectories:function(e){return Ge.sys.getDirectories(e)},realpath:e}}function i(e,t){var n=Ge.DiagnosticCategory[e.category].toLowerCase()+" TS"+e.code+": "+R(e.messageText,t.getNewLine())+t.getNewLine();if(e.file){var o=Ge.getLineAndCharacterOfPosition(e.file,e.start),r=o.line,i=o.character,a=e.file.fileName;return Ge.convertToRelativePath(a,t.getCurrentDirectory(),function(e){return t.getCanonicalFileName(e)})+"("+(r+1)+","+(i+1)+"): "+n}return n}Ge.findConfigFile=function(e,t,n){for(void 0===n&&(n="tsconfig.json");;){var o=Ge.combinePaths(e,n);if(t(o))return o;var r=Ge.getDirectoryPath(e);if(r===e)break;e=r}},Ge.resolveTripleslashReference=We,Ge.computeCommonSourceDirectoryOfFilenames=Ke,Ge.createCompilerHost=ze,Ge.getPreEmitDiagnostics=function(e,t,n){var o=e.getOptionsDiagnostics(n).concat(e.getSyntacticDiagnostics(t,n),e.getGlobalDiagnostics(n),e.getSemanticDiagnostics(t,n));return e.getCompilerOptions().declaration&&Ge.addRange(o,e.getDeclarationDiagnostics(t,n)),Ge.sortAndDeduplicateDiagnostics(o)},Ge.formatDiagnostics=function(e,t){for(var n="",o=0,r=e;o<r.length;o++)n+=i(r[o],t);return n},Ge.formatDiagnostic=i;var x="[91m",t="[93m",n="[93m",A="[30;47m",D=" ",B="[0m",I="...";function N(e){switch(e){case Ge.DiagnosticCategory.Warning:return t;case Ge.DiagnosticCategory.Error:return x;case Ge.DiagnosticCategory.Message:return n}}function w(e,t){return t+e+B}function O(e,t){for(;e.length<t;)e=" "+e;return e}function R(e,t){if(Ge.isString(e))return e;for(var n=e,o="",r=0;n;){if(r){o+=t;for(var i=0;i<r;i++)o+="  "}o+=n.messageText,r++,n=n.next}return o}function je(e,t,n){if(0===e.length)return[];for(var o=[],r=Ge.createMap(),i=0,a=e;i<a.length;i++){var s=a[i],l=void 0;r.has(s)?l=r.get(s):r.set(s,l=n(s,t)),o.push(l)}return o}function Ye(e,t){switch(t.extension){case".ts":case".d.ts":return;case".tsx":return n();case".jsx":return n()||o();case".js":return o()}function n(){return e.jsx?void 0:Ge.Diagnostics.Module_0_was_resolved_to_1_but_jsx_is_not_set}function o(){return e.allowJs||!e.noImplicitAny?void 0:Ge.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type}}function Xe(e){return Ge.Debug.assert(e.every(function(e){return void 0!==e}),"A name is undefined.",function(){return JSON.stringify(e)}),e}function Je(e){for(var t=e.imports,n=e.moduleAugmentations,o=t.map(function(e){return e.text}),r=0,i=n;r<i.length;r++){var a=i[r];9===a.kind&&o.push(a.text)}return o}Ge.formatDiagnosticsWithColorAndContext=function(e,t){for(var n="",o=0,r=e;o<r.length;o++){var i=r[o],a="";if(i.file){var s=i.start,l=i.length,c=i.file,u=Ge.getLineAndCharacterOfPosition(c,s),g=u.line,p=u.character,d=Ge.getLineAndCharacterOfPosition(c,s+l),_=d.line,f=d.character,h=Ge.getLineAndCharacterOfPosition(c,c.text.length).line,m=t?Ge.convertToRelativePath(c.fileName,t.getCurrentDirectory(),function(e){return t.getCanonicalFileName(e)}):c.fileName,y=4<=_-g,v=(_+1+"").length;y&&(v=Math.max(I.length,v)),a+=t.getNewLine();for(var b=g;b<=_;b++){y&&g+1<b&&b<_-1&&(a+=w(O(I,v),A)+D+t.getNewLine(),b=_-1);var k=Ge.getPositionOfLineAndCharacter(c,b,0),T=b<h?Ge.getPositionOfLineAndCharacter(c,b+1,0):c.text.length,E=c.text.slice(k,T);if(E=(E=E.replace(/\s+$/g,"")).replace("\t"," "),a+=w(O(b+1+"",v),A)+D,a+=E+t.getNewLine(),a+=w(O("",v),A)+D,a+=x,b===g){var S=b===_?f:void 0;a+=E.slice(0,p).replace(/\S/g," "),a+=E.slice(p,S).replace(/./g,"~")}else a+=b===_?E.slice(0,f).replace(/./g,"~"):E.replace(/./g,"~");a+=B}n+=t.getNewLine(),n+=m+"("+(g+1)+","+(p+1)+"): "}var C=N(i.category);n+=w(Ge.DiagnosticCategory[i.category].toLowerCase(),C)+" TS"+i.code+": "+R(i.messageText,t.getNewLine()),i.file&&(n+=t.getNewLine(),n+=a),n+=t.getNewLine()}return n},Ge.flattenDiagnosticMessageText=R,Ge.isProgramUptoDate=function(e,t,n,o,r,i,a){if(!e||a)return!1;if(e.getRootFileNames().length!==t.length)return!1;if(e.getSourceFiles().some(function(e){return e.version!==o(e.path)||i(e.path)}))return!1;if(e.getMissingFilePaths().some(r))return!1;var s=e.getCompilerOptions();return!(!Ge.compareDataObjects(s,n)||s.configFile&&n.configFile&&s.configFile.text!==n.configFile.text)},Ge.createProgram=function(I,N,w,O){var i,t,n,o,r,R,L=[],a={},s={},P=Ge.createMap(),M=Ge.createDiagnosticCollection(),v="number"==typeof N.maxNodeModuleJsDepth?N.maxNodeModuleJsDepth:0,b=0,k=Ge.createMap(),F=Ge.createMap();Ge.performance.mark("beforeProgram"),w=w||ze(N);var l,c,U,H,T=N.noLib,e=Ge.memoize(function(){return w.getDefaultLibFileName(N)}),u=w.getDefaultLibLocation?w.getDefaultLibLocation():Ge.getDirectoryPath(e()),h=Ge.createDiagnosticCollection(),G=w.getCurrentDirectory(),g=Ge.getSupportedExtensions(N),p=Ge.createMap(),V=w.hasInvalidatedResolution||Ge.returnFalse;if(w.resolveModuleNames)U=function(e,t,n){return w.resolveModuleNames(Xe(e),t,n).map(function(e){if(!e||void 0!==e.extension)return e;var t=Ge.clone(e);return t.extension=Ge.extensionFromPath(e.resolvedFileName),t})};else{c=Ge.createModuleResolutionCache(G,function(e){return w.getCanonicalFileName(e)});var d=function(e,t){return Ge.resolveModuleName(e,t,N,w,c).resolvedModule};U=function(e,t){return je(Xe(e),t,d)}}if(w.resolveTypeReferenceDirectives)H=function(e,t){return w.resolveTypeReferenceDirectives(Xe(e),t)};else{var _=function(e,t){return Ge.resolveTypeReferenceDirective(e,t,N,w).resolvedTypeReferenceDirective};H=function(e,t){return je(Xe(e),t,_)}}var W,f,m,y,E=Ge.createMap(),K=Ge.createMap(),z=Ge.createMap(),j=Ge.createMap(),S=w.useCaseSensitiveFileNames()?Ge.createMap():void 0,Y=(m=N,(y=(f=O)&&f.getCompilerOptions())&&(y.target!==m.target||y.module!==m.module||y.moduleResolution!==m.moduleResolution||y.noResolve!==m.noResolve||y.jsx!==m.jsx||y.allowJs!==m.allowJs||y.disableSizeLimit!==m.disableSizeLimit||y.baseUrl!==m.baseUrl||!Ge.equalOwnProperties(y.paths,m.paths))),C=function(){if(!O)return 0;var e=O.getCompilerOptions();if(Ge.changesAffectModuleResolution(e,N))return O.structureIsReused=0;Ge.Debug.assert(!(3&O.structureIsReused));var t=O.getRootFileNames();if(!Ge.arrayIsEqualTo(t,I))return O.structureIsReused=0;if(!Ge.arrayIsEqualTo(N.types,e.types))return O.structureIsReused=0;var n=[],o=[],r=[];if(O.structureIsReused=2,O.getMissingFilePaths().some(function(e){return w.fileExists(e)}))return O.structureIsReused=0;var i,a,s=O.getSourceFiles();(a=i||(i={}))[a.Exists=0]="Exists",a[a.Modified=1]="Modified";for(var l=Ge.createMap(),c=0,u=s;c<u.length;c++){var g=u[c],p=w.getSourceFileByPath?w.getSourceFileByPath(g.fileName,g.path,N.target,void 0,Y):w.getSourceFile(g.fileName,N.target,void 0,Y);if(!p)return O.structureIsReused=0;Ge.Debug.assert(!p.redirectInfo,"Host should not return a redirect source file from `getSourceFile`");var d=void 0;if(g.redirectInfo){if(p!==g.redirectInfo.unredirected)return O.structureIsReused=0;d=!1,p=g}else if(O.redirectTargetsSet.has(g.path)){if(p!==g)return O.structureIsReused=0;d=!1}else d=p!==g;p.path=g.path,o.push(p.path);var _=O.sourceFileToPackageName.get(g.path);if(void 0!==_){var f=l.get(_),h=d?1:0;if(void 0!==f&&1===h||1===f)return O.structureIsReused=0;l.set(_,h)}d?(g.hasNoDefaultLib!==p.hasNoDefaultLib&&(O.structureIsReused=1),Ge.arrayIsEqualTo(g.referencedFiles,p.referencedFiles,ve)||(O.structureIsReused=1),ke(p),Ge.arrayIsEqualTo(g.imports,p.imports,be)||(O.structureIsReused=1),Ge.arrayIsEqualTo(g.moduleAugmentations,p.moduleAugmentations,be)||(O.structureIsReused=1),(524288&g.flags)!=(524288&p.flags)&&(O.structureIsReused=1),Ge.arrayIsEqualTo(g.typeReferenceDirectives,p.typeReferenceDirectives,ve)||(O.structureIsReused=1),r.push({oldFile:g,newFile:p})):V(g.path)&&(O.structureIsReused=1,r.push({oldFile:g,newFile:p})),n.push(p)}if(2!==O.structureIsReused)return O.structureIsReused;R=r.map(function(e){return e.newFile.path});for(var m=0,y=r;m<y.length;m++){var v=y[m],g=v.oldFile,p=v.newFile,b=Ge.getNormalizedAbsolutePath(p.fileName,G);if(U){var k=Je(p),T={program:O,file:g,modifiedFilePaths:R},E=ee(k,b,p,T),S=Ge.hasChangesInResolutions(k,E,g.resolvedModules,Ge.moduleResolutionIsEqualTo);S?(O.structureIsReused=1,p.resolvedModules=Ge.zipToMap(k,E)):p.resolvedModules=g.resolvedModules}if(H){var C=Ge.map(p.typeReferenceDirectives,function(e){return e.fileName}),E=H(C,b),S=Ge.hasChangesInResolutions(C,E,g.resolvedTypeReferenceDirectiveNames,Ge.typeDirectiveIsEqualTo);S?(O.structureIsReused=1,p.resolvedTypeReferenceDirectiveNames=Ge.zipToMap(C,E)):p.resolvedTypeReferenceDirectiveNames=g.resolvedTypeReferenceDirectiveNames}}if(2!==O.structureIsReused)return O.structureIsReused;if(w.hasChangedAutomaticTypeDirectiveNames)return O.structureIsReused=1;W=O.getMissingFilePaths();for(var x=0;x<n.length;x++)j.set(o[x],n[x]),O.isSourceFileFromExternalLibrary(O.getSourceFileByPath(o[x]))&&F.set(o[x],!0);L=n,M=O.getFileProcessingDiagnostics();for(var A=0,D=r;A<D.length;A++){var B=D[A];M.reattachFileDiagnostics(B.newFile)}return P=O.getResolvedTypeReferenceDirectives(),K=O.sourceFileToPackageName,z=O.redirectTargetsSet,O.structureIsReused=2}();if(2!==C){Ge.forEach(I,function(e){return ye(e,!1)});var x=Ge.getAutomaticTypeDirectiveNames(N,w);if(x.length)for(var A=N.configFilePath?Ge.getDirectoryPath(N.configFilePath):w.getCurrentDirectory(),D=Ge.combinePaths(A,"__inferred type names__.ts"),B=H(x,D),X=0;X<x.length;X++)De(x[X],B[X]);T||(N.lib?Ge.forEach(N.lib,function(e){ye(Ge.combinePaths(u,e),!0)}):ye(e(),!0)),W=Ge.arrayFrom(j.keys(),function(e){return e}).filter(function(e){return!j.get(e)})}if(Ge.Debug.assert(!!W),c=void 0,O&&w.onReleaseOldSourceFile)for(var J=0,q=O.getSourceFiles();J<q.length;J++){var Z=q[J];ae(Z.path)&&!Y||w.onReleaseOldSourceFile(Z,O.getCompilerOptions())}return O=void 0,i={getRootFileNames:function(){return I},getSourceFile:ae,getSourceFileByPath:se,getSourceFiles:function(){return L},getMissingFilePaths:function(){return W},getCompilerOptions:function(){return N},getSyntacticDiagnostics:function(e,t){return le(e,ce,t)},getOptionsDiagnostics:function(){return Ge.sortAndDeduplicateDiagnostics(Ge.concatenate(M.getGlobalDiagnostics(),Ge.concatenate(h.getGlobalDiagnostics(),N.configFile?h.getDiagnostics(N.configFile.fileName):[])))},getGlobalDiagnostics:function(){return Ge.sortAndDeduplicateDiagnostics(oe().getGlobalDiagnostics().slice())},getSemanticDiagnostics:function(e,t){return le(e,ge,t)},getDeclarationDiagnostics:function(e,t){var n=i.getCompilerOptions();return!e||n.out||n.outFile?_e(e,t):le(e,me,t)},getTypeChecker:re,getClassifiableNames:function(){if(!r){re(),r=Ge.createUnderscoreEscapedMap();for(var e=0,t=L;e<t.length;e++){var n=t[e];Ge.copyEntries(n.classifiableNames,r)}}return r},getDiagnosticsProducingTypeChecker:oe,getCommonSourceDirectory:Q,emit:function(e,t,n,o,r){return ue(function(){return function(e,t,n,o,r,i){var a=[];if(N.noEmit)return{diagnostics:a,sourceMaps:void 0,emittedFiles:void 0,emitSkipped:!0};if(N.noEmitOnError){var s=e.getOptionsDiagnostics(o).concat(e.getSyntacticDiagnostics(t,o),e.getGlobalDiagnostics(o),e.getSemanticDiagnostics(t,o));if(0===s.length&&e.getCompilerOptions().declaration&&(a=e.getDeclarationDiagnostics(void 0,o)),0<s.length||0<a.length)return{diagnostics:Ge.concatenate(s,a),sourceMaps:void 0,emittedFiles:void 0,emitSkipped:!0}}var l=oe().getEmitResolver(N.outFile||N.out?void 0:t);Ge.performance.mark("beforeEmit");var c=r?[]:Ge.getTransformers(N,i),u=Ge.emitFiles(l,te(n),t,r,c);return Ge.performance.mark("afterEmit"),Ge.performance.measure("Emit","beforeEmit","afterEmit"),u}(i,e,t,n,o,r)})},getCurrentDirectory:function(){return G},getNodeCount:function(){return oe().getNodeCount()},getIdentifierCount:function(){return oe().getIdentifierCount()},getSymbolCount:function(){return oe().getSymbolCount()},getTypeCount:function(){return oe().getTypeCount()},getFileProcessingDiagnostics:function(){return M},getResolvedTypeReferenceDirectives:function(){return P},isSourceFileFromExternalLibrary:ne,isSourceFileDefaultLibrary:function(t){return!!t.hasNoDefaultLib||!!N.noLib&&(N.lib?Ge.forEach(N.lib,function(e){return 0===Ge.compareStrings(t.fileName,Ge.combinePaths(u,e),!w.useCaseSensitiveFileNames())}):0===Ge.compareStrings(t.fileName,e(),!w.useCaseSensitiveFileNames()))},dropDiagnosticsProducingTypeChecker:function(){n=void 0},getSourceFileFromReference:function(e,t){return Te(We(t.fileName,e.fileName),function(e){return j.get($(e))})},sourceFileToPackageName:K,redirectTargetsSet:z},function(){if(N.isolatedModules&&(N.declaration&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_with_option_1,"declaration","isolatedModules"),N.noEmitOnError&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_with_option_1,"noEmitOnError","isolatedModules"),N.out&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_with_option_1,"out","isolatedModules"),N.outFile&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_with_option_1,"outFile","isolatedModules")),N.inlineSourceMap&&(N.sourceMap&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_with_option_1,"sourceMap","inlineSourceMap"),N.mapRoot&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_with_option_1,"mapRoot","inlineSourceMap")),N.paths&&void 0===N.baseUrl&&Le(Ge.Diagnostics.Option_paths_cannot_be_used_without_specifying_baseUrl_option,"paths"),N.paths)for(var e in N.paths)if(Ge.hasProperty(N.paths,e))if(Ge.hasZeroOrOneAsteriskCharacter(e)||Oe(!0,e,Ge.Diagnostics.Pattern_0_can_have_at_most_one_Asterisk_character,e),Ge.isArray(N.paths[e])){var t=N.paths[e].length;0===t&&Oe(!1,e,Ge.Diagnostics.Substitutions_for_pattern_0_shouldn_t_be_an_empty_array,e);for(var n=0;n<t;n++){var o=N.paths[e][n],r=typeof o;"string"===r?Ge.hasZeroOrOneAsteriskCharacter(o)||we(e,n,Ge.Diagnostics.Substitution_0_in_pattern_1_in_can_have_at_most_one_Asterisk_character,o,e):we(e,n,Ge.Diagnostics.Substitution_0_for_pattern_1_has_incorrect_type_expected_string_got_2,o,e,r)}}else Oe(!1,e,Ge.Diagnostics.Substitutions_for_pattern_0_should_be_an_array,e);N.sourceMap||N.inlineSourceMap||(N.inlineSources&&Le(Ge.Diagnostics.Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided,"inlineSources"),N.sourceRoot&&Le(Ge.Diagnostics.Option_0_can_only_be_used_when_either_option_inlineSourceMap_or_option_sourceMap_is_provided,"sourceRoot")),N.out&&N.outFile&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_with_option_1,"out","outFile"),N.mapRoot&&!N.sourceMap&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"mapRoot","sourceMap"),N.declarationDir&&(N.declaration||Le(Ge.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"declarationDir","declaration"),(N.out||N.outFile)&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_with_option_1,"declarationDir",N.out?"out":"outFile")),N.lib&&N.noLib&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_with_option_1,"lib","noLib"),N.noImplicitUseStrict&&(void 0===N.alwaysStrict?N.strict:N.alwaysStrict)&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_with_option_1,"noImplicitUseStrict","alwaysStrict");var i=N.target||0,a=N.outFile||N.out,s=Ge.forEach(L,function(e){return Ge.isExternalModule(e)&&!e.isDeclarationFile?e:void 0});if(N.isolatedModules){N.module===Ge.ModuleKind.None&&i<2&&Le(Ge.Diagnostics.Option_isolatedModules_can_only_be_used_when_either_option_module_is_provided_or_option_target_is_ES2015_or_higher,"isolatedModules","target");var l=Ge.forEach(L,function(e){return Ge.isExternalModule(e)||e.isDeclarationFile?void 0:e});if(l){var c=Ge.getErrorSpanForNode(l,l);h.add(Ge.createFileDiagnostic(l,c.start,c.length,Ge.Diagnostics.Cannot_compile_namespaces_when_the_isolatedModules_flag_is_provided))}}else if(s&&i<2&&N.module===Ge.ModuleKind.None){var u=Ge.getErrorSpanForNode(s,s.externalModuleIndicator);h.add(Ge.createFileDiagnostic(s,u.start,u.length,Ge.Diagnostics.Cannot_use_imports_exports_or_module_augmentations_when_module_is_none))}if(a)if(N.module&&N.module!==Ge.ModuleKind.AMD&&N.module!==Ge.ModuleKind.System)Le(Ge.Diagnostics.Only_amd_and_system_modules_are_supported_alongside_0,N.out?"out":"outFile","module");else if(void 0===N.module&&s){var g=Ge.getErrorSpanForNode(s,s.externalModuleIndicator);h.add(Ge.createFileDiagnostic(s,g.start,g.length,Ge.Diagnostics.Cannot_compile_modules_using_option_0_unless_the_module_flag_is_amd_or_system,N.out?"out":"outFile"))}if(N.outDir||N.sourceRoot||N.mapRoot){var p=Q();N.outDir&&""===p&&Ge.forEach(L,function(e){return 1<Ge.getRootLength(e.fileName)})&&Le(Ge.Diagnostics.Cannot_find_the_common_subdirectory_path_for_the_input_files,"outDir")}if(!N.noEmit&&N.allowJs&&N.declaration&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_with_option_1,"allowJs","declaration"),N.checkJs&&!N.allowJs&&h.add(Ge.createCompilerDiagnostic(Ge.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"checkJs","allowJs")),N.emitDecoratorMetadata&&!N.experimentalDecorators&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_without_specifying_option_1,"emitDecoratorMetadata","experimentalDecorators"),N.jsxFactory?(N.reactNamespace&&Le(Ge.Diagnostics.Option_0_cannot_be_specified_with_option_1,"reactNamespace","jsxFactory"),Ge.parseIsolatedEntityName(N.jsxFactory,i)||Pe("jsxFactory",Ge.Diagnostics.Invalid_value_for_jsxFactory_0_is_not_a_valid_identifier_or_qualified_name,N.jsxFactory)):N.reactNamespace&&!Ge.isIdentifierText(N.reactNamespace,i)&&Pe("reactNamespace",Ge.Diagnostics.Invalid_value_for_reactNamespace_0_is_not_a_valid_identifier,N.reactNamespace),!N.noEmit&&!N.suppressOutputPathCheck){var d=te(),_=Ge.createMap();Ge.forEachEmittedFile(d,function(e){f(e.jsFilePath,_),f(e.declarationFilePath,_)})}function f(e,t){if(e){var n,o=$(e);j.has(o)&&(N.configFilePath||(n=Ge.chainDiagnosticMessages(void 0,Ge.Diagnostics.Adding_a_tsconfig_json_file_will_help_organize_projects_that_contain_both_TypeScript_and_JavaScript_files_Learn_more_at_https_Colon_Slash_Slashaka_ms_Slashtsconfig)),n=Ge.chainDiagnosticMessages(n,Ge.Diagnostics.Cannot_write_file_0_because_it_would_overwrite_input_file,e),He(e,Ge.createCompilerDiagnosticFromMessageChain(n)));var r=w.useCaseSensitiveFileNames()?o:o.toLocaleLowerCase();t.has(r)?He(e,Ge.createCompilerDiagnostic(Ge.Diagnostics.Cannot_write_file_0_because_it_would_be_overwritten_by_multiple_input_files,e)):t.set(r,!0)}}}(),Ge.performance.mark("afterProgram"),Ge.performance.measure("Program","beforeProgram","afterProgram"),i;function $(e){return Ge.toPath(e,G,Ie)}function Q(){if(void 0===t){var e=Ge.filter(L,function(e){return Ge.sourceFileMayBeEmitted(e,N,ne)});(t=N.rootDir&&function(e,t){var n=!0;if(e)for(var o=w.getCanonicalFileName(Ge.getNormalizedAbsolutePath(t,G)),r=0,i=e;r<i.length;r++){var a=i[r];if(!a.isDeclarationFile){var s=w.getCanonicalFileName(Ge.getNormalizedAbsolutePath(a.fileName,G));0!==s.indexOf(o)&&(h.add(Ge.createCompilerDiagnostic(Ge.Diagnostics.File_0_is_not_under_rootDir_1_rootDir_is_expected_to_contain_all_source_files,a.fileName,N.rootDir)),n=!1)}}return n}(e,N.rootDir)?Ge.getNormalizedAbsolutePath(N.rootDir,G):function(e){for(var t=[],n=0,o=e;n<o.length;n++){var r=o[n];r.isDeclarationFile||t.push(r.fileName)}return Ke(t,G,Ie)}(e))&&t[t.length-1]!==Ge.directorySeparator&&(t+=Ge.directorySeparator)}return t}function ee(e,t,n,o){if(0===C&&!n.ambientModuleNames.length)return U(e,t);var r,i,a,s=o.program&&o.program.getSourceFile(t);if(s!==n&&n.resolvedModules){for(var l=[],c=0,u=e;c<u.length;c++){var g=u[c],p=n.resolvedModules.get(g);l.push(p)}return l}for(var d={},_=0;_<e.length;_++){if(g=e[_],n===s&&!V(s.path)){var f=s&&s.resolvedModules.get(g);if(f){Ge.isTraceEnabled(N,w)&&Ge.trace(w,Ge.Diagnostics.Reusing_resolution_of_module_0_to_file_1_from_old_program,g,t),(i||(i=new Array(e.length)))[_]=f,(a||(a=[])).push(g);continue}}var h=!1;Ge.contains(n.ambientModuleNames,g)?(h=!0,Ge.isTraceEnabled(N,w)&&Ge.trace(w,Ge.Diagnostics.Module_0_was_resolved_as_locally_declared_ambient_module_in_file_1,g,t)):h=v(g,o),h?(i||(i=new Array(e.length)))[_]=d:(r||(r=[])).push(g)}var m=r&&r.length?U(r,t,a):Ge.emptyArray;if(!i)return Ge.Debug.assert(m.length===e.length),m;var y=0;for(_=0;_<i.length;_++)i[_]?i[_]===d&&(i[_]=void 0):(i[_]=m[y],y++);return Ge.Debug.assert(y===m.length),i;function v(e,n){if(Ge.getResolvedModule(n.file,e))return!1;var t=n.program&&n.program.getTypeChecker().tryFindAmbientModuleWithoutAugmentations(e);if(!t||!t.declarations)return!1;var o=Ge.forEach(t.declarations,function(e){var t=Ge.getSourceFileOfNode(e);return!Ge.contains(n.modifiedFilePaths,t.path)&&t});return!!o&&(Ge.isTraceEnabled(N,w)&&Ge.trace(w,Ge.Diagnostics.Module_0_was_resolved_as_ambient_module_declared_in_1_since_this_file_was_not_modified,e,o.fileName),!0)}}function te(e){return{getCanonicalFileName:Ie,getCommonSourceDirectory:i.getCommonSourceDirectory,getCompilerOptions:i.getCompilerOptions,getCurrentDirectory:function(){return G},getNewLine:function(){return w.getNewLine()},getSourceFile:i.getSourceFile,getSourceFileByPath:i.getSourceFileByPath,getSourceFiles:i.getSourceFiles,isSourceFileFromExternalLibrary:ne,writeFile:e||function(e,t,n,o,r){return w.writeFile(e,t,n,o,r)},isEmitBlocked:ie}}function ne(e){return F.get(e.path)}function oe(){return n||(n=Ge.createTypeChecker(i,!0))}function re(){return o||(o=Ge.createTypeChecker(i,!1))}function ie(e){return p.has($(e))}function ae(e){return se($(e))}function se(e){return j.get(e)}function le(e,t,n){return e?t(e,n):Ge.sortAndDeduplicateDiagnostics(Ge.flatMap(i.getSourceFiles(),function(e){return n&&n.throwIfCancellationRequested(),t(e,n)}))}function ce(e){return Ge.isSourceFileJavaScript(e)?(e.additionalSyntacticDiagnostics||(e.additionalSyntacticDiagnostics=(a=e,ue(function(){var s=[],l=a;return c(a),s;function c(e){switch(l.kind){case 146:case 149:if(l.questionToken===e)return void s.push(g(e,Ge.Diagnostics._0_can_only_be_used_in_a_ts_file,"?"));case 151:case 150:case 152:case 153:case 154:case 186:case 228:case 187:case 226:if(l.type===e)return void s.push(g(e,Ge.Diagnostics.types_can_only_be_used_in_a_ts_file))}switch(e.kind){case 237:return void s.push(g(e,Ge.Diagnostics.import_can_only_be_used_in_a_ts_file));case 243:if(e.isExportEquals)return void s.push(g(e,Ge.Diagnostics.export_can_only_be_used_in_a_ts_file));break;case 259:var t=e;if(108===t.token)return void s.push(g(e,Ge.Diagnostics.implements_clauses_can_only_be_used_in_a_ts_file));break;case 230:return void s.push(g(e,Ge.Diagnostics.interface_declarations_can_only_be_used_in_a_ts_file));case 233:return void s.push(g(e,Ge.Diagnostics.module_declarations_can_only_be_used_in_a_ts_file));case 231:return void s.push(g(e,Ge.Diagnostics.type_aliases_can_only_be_used_in_a_ts_file));case 232:return void s.push(g(e,Ge.Diagnostics.enum_declarations_can_only_be_used_in_a_ts_file));case 203:return void s.push(g(e,Ge.Diagnostics.non_null_assertions_can_only_be_used_in_a_ts_file));case 202:return void s.push(g(e.type,Ge.Diagnostics.type_assertion_expressions_can_only_be_used_in_a_ts_file));case 184:Ge.Debug.fail()}var n=l;l=e,Ge.forEachChild(e,c,o),l=n}function o(e){switch(l.decorators!==e||N.experimentalDecorators||s.push(g(l,Ge.Diagnostics.Experimental_support_for_decorators_is_a_feature_that_is_subject_to_change_in_a_future_release_Set_the_experimentalDecorators_option_to_remove_this_warning)),l.kind){case 229:case 151:case 150:case 152:case 153:case 154:case 186:case 228:case 187:if(e===l.typeParameters)return void s.push(u(e,Ge.Diagnostics.type_parameter_declarations_can_only_be_used_in_a_ts_file));case 208:if(e===l.modifiers)return function(e,t){for(var n=0,o=e;n<o.length;n++){var r=o[n];switch(r.kind){case 76:if(t)continue;case 114:case 112:case 113:case 131:case 124:case 117:s.push(g(r,Ge.Diagnostics._0_can_only_be_used_in_a_ts_file,Ge.tokenToString(r.kind)))}}}(e,208===l.kind);break;case 149:if(e===l.modifiers){for(var t=0,n=e;t<n.length;t++){var o=n[t];115!==o.kind&&s.push(g(o,Ge.Diagnostics._0_can_only_be_used_in_a_ts_file,Ge.tokenToString(o.kind)))}return}break;case 146:if(e===l.modifiers)return void s.push(u(e,Ge.Diagnostics.parameter_modifiers_can_only_be_used_in_a_ts_file));break;case 181:case 182:case 201:if(e===l.typeArguments)return void s.push(u(e,Ge.Diagnostics.type_arguments_can_only_be_used_in_a_ts_file))}for(var r=0,i=e;r<i.length;r++){var a=i[r];c(a)}}function u(e,t,n,o,r){var i=e.pos;return Ge.createFileDiagnostic(a,i,e.end-i,t,n,o,r)}function g(e,t,n,o,r){return Ge.createDiagnosticForNodeInSourceFile(a,e,t,n,o,r)}})),Ge.isCheckJsEnabledForFile(e,N)&&(e.additionalSyntacticDiagnostics=Ge.concatenate(e.additionalSyntacticDiagnostics,e.jsDocDiagnostics))),Ge.concatenate(e.additionalSyntacticDiagnostics,e.parseDiagnostics)):e.parseDiagnostics;var a}function ue(e){try{return e()}catch(e){throw e instanceof Ge.OperationCanceledException&&(n=o=void 0),e}}function ge(e,t){return he(e,t,a,pe)}function pe(s,l){return ue(function(){if(N.skipLibCheck&&s.isDeclarationFile||N.skipDefaultLibCheck&&s.hasNoDefaultLib)return Ge.emptyArray;var e=oe();Ge.Debug.assert(!!s.bindDiagnostics);var t=3===s.scriptKind||4===s.scriptKind||5===s.scriptKind||Ge.isCheckJsEnabledForFile(s,N),n=t?s.bindDiagnostics:Ge.emptyArray,o=t?e.getDiagnostics(s,l):Ge.emptyArray,r=M.getDiagnostics(s.fileName),i=h.getDiagnostics(s.fileName),a=n.concat(o,r,i);return Ge.filter(a,de)})}function de(e){var t=e.file,n=e.start;if(t)for(var o=Ge.getLineStarts(t),r=Ge.computeLineAndCharacterOfPosition(o,n).line;0<r;){var i=t.text.slice(o[r-1],o[r]),a=Ve.exec(i);if(!a)return!0;if(a[3])return!1;r--}return!0}function _e(e,t){return he(e,t,s,fe)}function fe(t,n){return ue(function(){var e=oe().getEmitResolver(t,n);return Ge.getDeclarationDiagnostics(te(Ge.noop),e,t)})}function he(e,t,n,o){var r=e?n.perFile&&n.perFile.get(e.path):n.allDiagnostics;if(r)return r;var i=o(e,t)||Ge.emptyArray;return e?(n.perFile||(n.perFile=Ge.createMap()),n.perFile.set(e.path,i)):n.allDiagnostics=i,i}function me(e,t){return e.isDeclarationFile?[]:_e(e,t)}function ye(e,t){Ee(Ge.normalizePath(e),t,void 0)}function ve(e,t){return e.fileName===t.fileName}function be(e,t){return 9===e.kind?9===t.kind&&e.text===t.text:71===t.kind&&e.escapedText===t.escapedText}function ke(l){if(!l.imports){var c,u,g,e=Ge.isSourceFileJavaScript(l),p=Ge.isExternalModule(l);if(N.importHelpers&&(N.isolatedModules||p)&&!l.isDeclarationFile){var t=Ge.createLiteral(Ge.externalHelpersModuleNameText),n=Ge.createImportDeclaration(void 0,void 0,void 0);(t.parent=n).parent=l,c=[t]}for(var o=0,r=l.statements;o<r.length;o++){var i=r[o];d(i,!1),(524288&l.flags||e)&&a(i)}return l.imports=c||Ge.emptyArray,l.moduleAugmentations=u||Ge.emptyArray,void(l.ambientModuleNames=g||Ge.emptyArray)}function d(e,t){switch(e.kind){case 238:case 237:case 244:var n=Ge.getExternalModuleName(e);if(!n||!Ge.isStringLiteral(n))break;if(!n.text)break;t&&Ge.isExternalModuleNameRelative(n.text)||(c||(c=[])).push(n);break;case 233:if(Ge.isAmbientModule(e)&&(t||Ge.hasModifier(e,2)||l.isDeclarationFile)){var o=e.name,r=Ge.getTextOfIdentifierOrLiteral(o);if(p||t&&!Ge.isExternalModuleNameRelative(r))(u||(u=[])).push(o);else if(!t){l.isDeclarationFile&&(g||(g=[])).push(r);var i=e.body;if(i)for(var a=0,s=i.statements;a<s.length;a++)d(s[a],!0)}}}}function a(e){Ge.isRequireCall(e,!0)?(c||(c=[])).push(e.arguments[0]):Ge.isImportCall(e)&&1===e.arguments.length&&9===e.arguments[0].kind?(c||(c=[])).push(e.arguments[0]):Ge.forEachChild(e,a)}}function Te(t,n,e,o){if(Ge.hasExtension(t)){if(!N.allowNonTsExtensions&&!Ge.forEach(g,function(e){return Ge.fileExtensionIs(w.getCanonicalFileName(t),e)}))return void(e&&e(Ge.Diagnostics.File_0_has_unsupported_extension_The_only_supported_extensions_are_1,t,"'"+g.join("', '")+"'"));var r=n(t);return e&&(r?o&&w.getCanonicalFileName(t)===w.getCanonicalFileName(o.fileName)&&e(Ge.Diagnostics.A_file_cannot_have_a_reference_to_itself):e(Ge.Diagnostics.File_0_not_found,t)),r}var i=N.allowNonTsExtensions&&n(t);if(i)return i;if(!e||!N.allowNonTsExtensions){var a=Ge.forEach(g,function(e){return n(t+e)});return e&&!a&&e(Ge.Diagnostics.File_0_not_found,t+".ts"),a}e(Ge.Diagnostics.File_0_not_found,t)}function Ee(e,t,n,o,r,i){Te(e,function(e){return Ce(e,$(e),t,o,r,i,n)},function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];M.add(void 0!==o&&void 0!==i&&void 0!==r?Ge.createFileDiagnostic.apply(void 0,[o,r,i-r,e].concat(t)):Ge.createCompilerDiagnostic.apply(void 0,[e].concat(t)))},o)}function Se(e,t,n,o,r){void 0!==n&&void 0!==o&&void 0!==r?M.add(Ge.createFileDiagnostic(n,o,r-o,Ge.Diagnostics.File_name_0_differs_from_already_included_file_name_1_only_in_casing,e,t)):M.add(Ge.createCompilerDiagnostic(Ge.Diagnostics.File_name_0_differs_from_already_included_file_name_1_only_in_casing,e,t))}function Ce(t,e,n,o,r,i,a){if(j.has(e)){var s=j.get(e);return s&&N.forceConsistentCasingInFileNames&&Ge.getNormalizedAbsolutePath(s.fileName,G)!==Ge.getNormalizedAbsolutePath(t,G)&&Se(t,s.fileName,o,r,i),s&&F.get(s.path)&&0===b?(F.set(s.path,!1),N.noResolve||(xe(s,n),Ae(s)),k.set(s.path,!1),Ne(s)):s&&k.get(s.path)&&b<v&&(k.set(s.path,!1),Ne(s)),s}var l,c,u,g,p,d=w.getSourceFile(t,N.target,function(e){void 0!==o&&void 0!==r&&void 0!==i?M.add(Ge.createFileDiagnostic(o,r,i-r,Ge.Diagnostics.Cannot_read_file_0_Colon_1,t,e)):M.add(Ge.createCompilerDiagnostic(Ge.Diagnostics.Cannot_read_file_0_Colon_1,t,e))},Y);if(a){var _=a.name+"/"+a.subModuleName+"@"+a.version,f=E.get(_);if(f){var h=(l=f,c=d,u=t,g=e,(p=Object.create(l)).fileName=u,p.path=g,p.redirectInfo={redirectTarget:l,unredirected:c},Object.defineProperties(p,{id:{get:function(){return this.redirectInfo.redirectTarget.id},set:function(e){this.redirectInfo.redirectTarget.id=e}},symbol:{get:function(){return this.redirectInfo.redirectTarget.symbol},set:function(e){this.redirectInfo.redirectTarget.symbol=e}}}),p);return z.set(f.path,!0),j.set(e,h),K.set(e,a.name),L.push(h),h}d&&(E.set(_,d),K.set(e,a.name))}if(j.set(e,d),d){if(F.set(e,0<b),d.path=e,w.useCaseSensitiveFileNames()){var m=e.toLowerCase(),y=S.get(m);y?Se(t,y.fileName,o,r,i):S.set(m,d)}T=T||d.hasNoDefaultLib,N.noResolve||(xe(d,n),Ae(d)),Ne(d),n?L.unshift(d):L.push(d)}return d}function xe(t,n){Ge.forEach(t.referencedFiles,function(e){Ee(We(e.fileName,t.fileName),n,void 0,t,e.pos,e.end)})}function Ae(e){for(var t=Ge.map(e.typeReferenceDirectives,function(e){return e.fileName.toLocaleLowerCase()}),n=H(t,e.fileName),o=0;o<t.length;o++){var r=e.typeReferenceDirectives[o],i=n[o],a=r.fileName.toLocaleLowerCase();Ge.setResolvedTypeReferenceDirective(e,a,i),De(a,i,e,r.pos,r.end)}}function De(e,t,n,o,r){var i=P.get(e);if(!i||!i.primary){var a=!0;t?t.primary?Ee(t.resolvedFileName,!1,t.packageId,n,o,r):i?(t.resolvedFileName!==i.resolvedFileName&&w.readFile(t.resolvedFileName)!==ae(i.resolvedFileName).text&&M.add(Be(n,o,r,Ge.Diagnostics.Conflicting_definitions_for_0_found_at_1_and_2_Consider_installing_a_specific_version_of_this_library_to_resolve_the_conflict,e,t.resolvedFileName,i.resolvedFileName)),a=!1):Ee(t.resolvedFileName,!1,t.packageId,n,o,r):M.add(Be(n,o,r,Ge.Diagnostics.Cannot_find_type_definition_file_for_0,e)),a&&P.set(e,t)}}function Be(e,t,n,o){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];return void 0===e||void 0===t||void 0===n?Ge.createCompilerDiagnostic.apply(void 0,[o].concat(r)):Ge.createFileDiagnostic.apply(void 0,[e,t,n-t,o].concat(r))}function Ie(e){return w.getCanonicalFileName(e)}function Ne(e){if(ke(e),e.imports.length||e.moduleAugmentations.length){var t=Je(e),n={program:O,file:e,modifiedFilePaths:R},o=ee(t,Ge.getNormalizedAbsolutePath(e.fileName,G),e,n);Ge.Debug.assert(o.length===t.length);for(var r=0;r<t.length;r++){var i=o[r];if(Ge.setResolvedModule(e,t[r],i),i){var a=i.isExternalLibraryImport,s=!Ge.extensionIsTypeScript(i.extension),l=a&&s,c=i.resolvedFileName;a&&b++;var u=l&&v<b,g=c&&!Ye(N,i)&&!N.noResolve&&r<e.imports.length&&!u&&!(s&&!N.allowJs);u?k.set(e.path,!0):g&&Ce(c,$(c),!1,e,Ge.skipTrivia(e.text,e.imports[r].pos),e.imports[r].end,i.packageId),a&&b--}}}else e.resolvedModules=void 0}function we(e,t,n,o,r,i){for(var a=!0,s=0,l=Re();s<l.length;s++){var c=l[s];if(Ge.isObjectLiteralExpression(c.initializer))for(var u=0,g=Ge.getPropertyAssignment(c.initializer,e);u<g.length;u++){var p=g[u];Ge.isArrayLiteralExpression(p.initializer)&&p.initializer.elements.length>t&&(h.add(Ge.createDiagnosticForNodeInSourceFile(N.configFile,p.initializer.elements[t],n,o,r,i)),a=!1)}}a&&h.add(Ge.createCompilerDiagnostic(n,o,r,i))}function Oe(e,t,n,o){for(var r=!0,i=0,a=Re();i<a.length;i++){var s=a[i];Ge.isObjectLiteralExpression(s.initializer)&&Ue(s.initializer,e,t,void 0,n,o)&&(r=!1)}r&&h.add(Ge.createCompilerDiagnostic(n,o))}function Re(){var e=Fe();return e?Ge.getPropertyAssignment(e,"paths"):Ge.emptyArray}function Le(e,t,n){Me(!0,t,n,e,t,n)}function Pe(e,t,n){Me(!1,e,void 0,t,n)}function Me(e,t,n,o,r,i){var a=Fe();(!a||!Ue(a,e,t,n,o,r,i))&&h.add(Ge.createCompilerDiagnostic(o,r,i))}function Fe(){if(void 0===l&&(l=null,N.configFile&&N.configFile.jsonObject))for(var e=0,t=Ge.getPropertyAssignment(N.configFile.jsonObject,"compilerOptions");e<t.length;e++){var n=t[e];if(Ge.isObjectLiteralExpression(n.initializer)){l=n.initializer;break}}return l}function Ue(e,t,n,o,r,i,a){for(var s=Ge.getPropertyAssignment(e,n,o),l=0,c=s;l<c.length;l++){var u=c[l];h.add(Ge.createDiagnosticForNodeInSourceFile(N.configFile,t?u.name:u.initializer,r,i,a))}return!!s.length}function He(e,t){p.set($(e),!0),h.add(t)}},Ge.getResolutionDiagnostic=Ye}(ts||(ts={})),function(T){var e,_;function a(e){return e&&void 0!==e.enableAutoDiscovery&&void 0===e.enable?{enable:e.enableAutoDiscovery,include:e.include||[],exclude:e.exclude||[]}:e}function l(){if(e)return e;var t=T.createMap(),n=T.createMap();return T.forEach(T.optionDeclarations,function(e){t.set(e.name.toLowerCase(),e),e.shortName&&n.set(e.shortName,e.name)}),e={optionNameMap:t,shortOptionNames:n}}function i(e){return u(e,T.createCompilerDiagnostic)}function u(e,t){var n=T.arrayFrom(e.type.keys()).map(function(e){return"'"+e+"'"}).join(", ");return t(T.Diagnostics.Argument_for_0_option_must_be_Colon_1,"--"+e.name,n)}function g(e,t,n){return L(e,P(t||""),n)}function p(t,e,n){if(void 0===e&&(e=""),e=P(e),!T.startsWith(e,"-")){if(""===e)return[];var o=e.split(",");switch(t.element.type){case"number":return T.map(o,parseInt);case"string":return T.map(o,function(e){return e||""});default:return T.filter(T.map(o,function(e){return g(t.element,e,n)}),function(e){return!!e})}}}function d(e,t){void 0===t&&(t=!1),e=e.toLowerCase();var n=l(),o=n.optionNameMap,r=n.shortOptionNames;if(t){var i=r.get(e);void 0!==i&&(e=i)}return o.get(e)}function o(e,t){var n=T.parseJsonText(e,t);return{config:m(n,n.parseDiagnostics),error:n.parseDiagnostics.length?n.parseDiagnostics[0]:void 0}}function f(e,t){var n=r(e,t);return T.isString(n)?T.parseJsonText(e,n):{parseDiagnostics:[n]}}function r(t,e){var n;try{n=e(t)}catch(e){return T.createCompilerDiagnostic(T.Diagnostics.Cannot_read_file_0_Colon_1,t,e.message)}return void 0===n?T.createCompilerDiagnostic(T.Diagnostics.The_specified_path_does_not_exist_Colon_0,t):n}function h(e){return T.arrayToMap(e,function(e){return e.name})}function m(e,t){return y(e,t,void 0,void 0)}function y(p,d,_,f){return p.jsonObject?c(p.jsonObject,_,void 0,void 0):{};function c(e,t,n,o){for(var r={},i=0,a=e.properties;i<a.length;i++){var s=a[i];if(261===s.kind){s.questionToken&&d.push(T.createDiagnosticForNodeInSourceFile(p,s.questionToken,T.Diagnostics._0_can_only_be_used_in_a_ts_file,"?")),m(s.name)||d.push(T.createDiagnosticForNodeInSourceFile(p,s.name,T.Diagnostics.String_literal_with_double_quotes_expected));var l=T.unescapeLeadingUnderscores(T.getTextOfPropertyName(s.name)),c=t?t.get(l):void 0;n&&!c&&d.push(T.createDiagnosticForNodeInSourceFile(p,s.name,n,l));var u=h(s.initializer,c);if(void 0!==l&&(r[l]=u,f&&(o||t===_))){var g=b(c,u);o?g&&f.onSetValidOptionKeyValueInParent(o,c,u):t===_&&(g?f.onSetValidOptionKeyValueInRoot(l,s.name,u,s.initializer):c||f.onSetUnknownOptionKeyValueInRoot(l,s.name,u,s.initializer))}}else d.push(T.createDiagnosticForNodeInSourceFile(p,s,T.Diagnostics.Property_assignment_expected))}return r}function h(o,t){switch(o.kind){case 101:return l(t&&"boolean"!==t.type),!0;case 86:return l(t&&"boolean"!==t.type),!1;case 95:return l(t&&"extends"===t.name),null;case 9:m(o)||d.push(T.createDiagnosticForNodeInSourceFile(p,o,T.Diagnostics.String_literal_with_double_quotes_expected)),l(t&&T.isString(t.type)&&"string"!==t.type);var e=o.text;if(t&&!T.isString(t.type)){var n=t;n.type.has(e.toLowerCase())||d.push(u(n,function(e,t,n){return T.createDiagnosticForNodeInSourceFile(p,o,e,t,n)}))}return e;case 8:return l(t&&"number"!==t.type),Number(o.text);case 178:l(t&&"object"!==t.type);var r=o;if(t){var i=t;return c(r,i.elementOptions,i.extraKeyDiagnosticMessage,i.name)}return c(r,void 0,void 0,void 0);case 177:return l(t&&"list"!==t.type),a=o.elements,s=t&&t.element,a.map(function(e){return h(e,s)})}var a,s;return void(t?l(!0):d.push(T.createDiagnosticForNodeInSourceFile(p,o,T.Diagnostics.Property_value_can_only_be_string_literal_numeric_literal_true_false_null_object_literal_or_array_literal)));function l(e){e&&d.push(T.createDiagnosticForNodeInSourceFile(p,o,T.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,t.name,v(t)))}}function m(e){return T.isStringLiteral(e)&&T.isStringDoubleQuoted(e,p)}}function v(e){return"list"===e.type?"Array":T.isString(e.type)?e.type:"string"}function b(e,t){if(e)return!!E(t)||("list"===e.type?T.isArray(t):typeof t===(T.isString(e.type)?e.type:"string"))}function k(e,t){t&&Object.defineProperty(e,"configFile",{enumerable:!1,writable:!1,value:t})}function E(e){return null==e}function S(e,t){return T.getDirectoryPath(T.toPath(e,t,T.identity))}function s(e,i,a,s,t,l,c,u){void 0===t&&(t={}),void 0===c&&(c=[]),void 0===u&&(u=[]),T.Debug.assert(void 0===e&&void 0!==i||void 0!==e&&void 0===i);var g=[],n=T.createGetCanonicalFileName(a.useCaseSensitiveFileNames),o=A(e,i,a,s,l,n,c,g),p=o.raw,d=T.extend(t,o.options||{});d.configFilePath=l,k(d,i);var r=function(){var e,t,n;T.hasProperty(p,"files")&&!E(p.files)&&(T.isArray(p.files)?0===(e=p.files).length&&m(T.Diagnostics.The_files_list_in_config_file_0_is_empty,l||"tsconfig.json"):m(T.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"files","Array"));T.hasProperty(p,"include")&&!E(p.include)&&(T.isArray(p.include)?t=p.include:m(T.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"include","Array"));if(T.hasProperty(p,"exclude")&&!E(p.exclude))T.isArray(p.exclude)?n=p.exclude:m(T.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"exclude","Array");else{var o=p.compilerOptions&&p.compilerOptions.outDir;o&&(n=[o])}void 0===e&&void 0===t&&(t=["**/*"]);var r=function(e,t,n,o,r,i,a,s,l){var c,u;o=T.normalizePath(o),t&&(c=W(t,a,!1,l,"include"));n&&(u=W(n,a,!0,l,"exclude"));var g=function(e,t,n,o){var r=T.getRegularExpressionForWildcard(t,n,"exclude"),i=r&&new RegExp(r,o?"":"i"),a={};if(void 0!==e){for(var s=[],l=0,c=e;l<c.length;l++){var u=c[l],g=T.normalizePath(T.combinePaths(n,u));if(!i||!i.test(g)){var p=K(g,o);if(p){var d=p.key,_=p.flags,f=a[d];(void 0===f||f<_)&&1===(a[d]=_)&&s.push(d)}}}for(var d in a)if(T.hasProperty(a,d))for(var h=0,m=s;h<m.length;h++){var y=m[h];d!==y&&T.containsPath(y,d,n,!o)&&delete a[d]}}return a}(c,u,o,i.useCaseSensitiveFileNames);return V({filesSpecs:e,includeSpecs:t,excludeSpecs:n,validatedIncludeSpecs:c,validatedExcludeSpecs:u,wildcardDirectories:g},o,r,i,s)}(e,t,n,l?S(l,s):s,d,a,g,u,i);0!==r.fileNames.length||T.hasProperty(p,"files")||0!==c.length||g.push(C(r.spec,l));return r}(),_=r.fileNames,f=r.wildcardDirectories,h=r.spec;return{options:d,fileNames:_,typeAcquisition:o.typeAcquisition||N(),raw:p,errors:g,wildcardDirectories:f,compileOnSave:!!p.compileOnSave,configFileSpecs:h};function m(e,t,n){i||g.push(T.createCompilerDiagnostic(e,t,n))}}function C(e,t){var n=e.includeSpecs,o=e.excludeSpecs;return T.createCompilerDiagnostic(T.Diagnostics.No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2,t||"tsconfig.json",JSON.stringify(n||[]),JSON.stringify(o||[]))}function x(e){return!!e.options}function A(e,t,n,o,r,i,a,s){o=T.normalizeSlashes(o);var l=T.toPath(r||"",o,i);if(0<=a.indexOf(l))return s.push(T.createCompilerDiagnostic(T.Diagnostics.Circularity_detected_while_resolving_configuration_Colon_0,a.concat([l]).join(" -> "))),{raw:e||m(t,s)};var c=e?function(e,t,n,o,r,i){T.hasProperty(e,"excludes")&&i.push(T.createCompilerDiagnostic(T.Diagnostics.Unknown_option_excludes_Did_you_mean_exclude));var a,s=I(e.compilerOptions,n,i,r),l=w(e.typeAcquisition||e.typingOptions,n,i,r);if(e.compileOnSave=function(e,t,n){if(T.hasProperty(e,T.compileOnSaveCommandLineOption.name)){var o=O(T.compileOnSaveCommandLineOption,e.compileOnSave,t,n);return!("boolean"!=typeof o||!o)&&o}}(e,n,i),e.extends)if(T.isString(e.extends)){var c=r?S(r,n):n;a=D(e.extends,t,c,o,i,T.createCompilerDiagnostic)}else i.push(T.createCompilerDiagnostic(T.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,"extends","string"));return{raw:e,options:s,typeAcquisition:l,extendedConfigPath:a}}(e,n,o,i,r,s):function(i,a,s,l,c,u){var r,g,p,d=B(c),e={onSetValidOptionKeyValueInParent:function(e,t,n){T.Debug.assert("compilerOptions"===e||"typeAcquisition"===e||"typingOptions"===e);var o="compilerOptions"===e?d:"typeAcquisition"===e?r||(r=N(c)):g||(g=N(c));o[t.name]=function t(e,n,o){if(E(o))return;{if("list"===e.type){var r=e;return r.element.isFilePath||!T.isString(r.element.type)?T.filter(T.map(o,function(e){return t(r.element,n,e)}),function(e){return!!e}):o}if(!T.isString(e.type))return e.type.get(T.isString(o)?o.toLowerCase():o)}return R(e,n,o)}(t,s,n)},onSetValidOptionKeyValueInRoot:function(e,t,n,o){switch(e){case"extends":var r=c?S(c,s):s;return void(p=D(n,a,r,l,u,function(e,t){return T.createDiagnosticForNodeInSourceFile(i,o,e,t)}));case"files":return void(0===n.length&&u.push(T.createDiagnosticForNodeInSourceFile(i,o,T.Diagnostics.The_files_list_in_config_file_0_is_empty,c||"tsconfig.json")))}},onSetUnknownOptionKeyValueInRoot:function(e,t,n,o){"excludes"===e&&u.push(T.createDiagnosticForNodeInSourceFile(i,t,T.Diagnostics.Unknown_option_excludes_Did_you_mean_exclude))}},t=y(i,u,(void 0===_&&(_=h([{name:"compilerOptions",type:"object",elementOptions:h(T.optionDeclarations),extraKeyDiagnosticMessage:T.Diagnostics.Unknown_compiler_option_0},{name:"typingOptions",type:"object",elementOptions:h(T.typeAcquisitionDeclarations),extraKeyDiagnosticMessage:T.Diagnostics.Unknown_type_acquisition_option_0},{name:"typeAcquisition",type:"object",elementOptions:h(T.typeAcquisitionDeclarations),extraKeyDiagnosticMessage:T.Diagnostics.Unknown_type_acquisition_option_0},{name:"extends",type:"string"},{name:"files",type:"list",element:{name:"files",type:"string"}},{name:"include",type:"list",element:{name:"include",type:"string"}},{name:"exclude",type:"list",element:{name:"exclude",type:"string"}},T.compileOnSaveCommandLineOption])),_),e);r||(r=g?void 0!==g.enableAutoDiscovery?{enable:g.enableAutoDiscovery,include:g.include,exclude:g.exclude}:g:N(c));return{raw:t,options:d,typeAcquisition:r,extendedConfigPath:p}}(t,n,o,i,r,s);if(c.extendedConfigPath){a=a.concat([l]);var u=function(e,t,n,o,r,i,a){var s=f(t,function(e){return n.readFile(e)});e&&(e.extendedSourceFiles||(e.extendedSourceFiles=[])).push(s.fileName);if(s.parseDiagnostics.length)return void a.push.apply(a,s.parseDiagnostics);var l,c=T.getDirectoryPath(t),u=A(void 0,s,n,c,T.getBaseFileName(t),r,i,a);e&&(l=e.extendedSourceFiles).push.apply(l,s.extendedSourceFiles);if(x(u)){var g=T.convertToRelativePath(c,o,r),p=function(e){return T.isRootedDiskPath(e)?e:T.combinePaths(g,e)},d=function(e){_[e]&&(_[e]=T.map(_[e],p))},_=u.raw;d("include"),d("exclude"),d("files")}return u}(t,c.extendedConfigPath,n,o,i,a,s);if(u&&x(u)){var g=u.raw,p=c.raw,d=function(e){var t=p[e]||g[e];t&&(p[e]=t)};d("include"),d("exclude"),d("files"),void 0===p.compileOnSave&&(p.compileOnSave=g.compileOnSave),c.options=T.assign({},u.options,c.options)}}return c}function D(e,t,n,o,r,i){if(e=T.normalizeSlashes(e),T.isRootedDiskPath(e)||T.startsWith(e,"./")||T.startsWith(e,"../")){var a=T.toPath(e,n,o);if(t.fileExists(a)||T.endsWith(a,".json")||(a+=".json",t.fileExists(a)))return a;r.push(i(T.Diagnostics.File_0_does_not_exist,e))}else r.push(i(T.Diagnostics.A_path_in_an_extends_option_must_be_relative_or_rooted_but_0_is_not,e))}function B(e){return"jsconfig.json"===T.getBaseFileName(e)?{allowJs:!0,maxNodeModuleJsDepth:2,allowSyntheticDefaultImports:!0,skipLibCheck:!0}:{}}function I(e,t,n,o){var r=B(o);return c(T.optionDeclarations,e,t,r,T.Diagnostics.Unknown_compiler_option_0,n),r}function N(e){return{enable:"jsconfig.json"===T.getBaseFileName(e),include:[],exclude:[]}}function w(e,t,n,o){var r=N(o),i=a(e);return c(T.typeAcquisitionDeclarations,i,t,r,T.Diagnostics.Unknown_type_acquisition_option_0,n),r}function c(e,t,n,o,r,i){if(t){var a=h(e);for(var s in t){var l=a.get(s);l?o[l.name]=O(l,t[s],n,i):i.push(T.createCompilerDiagnostic(r,s))}}}function O(e,t,n,o){if(b(e,t)){var r=e.type;return"list"===r&&T.isArray(t)?(i=e,a=t,s=n,l=o,T.filter(T.map(a,function(e){return O(i.element,e,s,l)}),function(e){return!!e})):T.isString(r)?R(e,n,t):L(e,t,o)}var i,a,s,l;o.push(T.createCompilerDiagnostic(T.Diagnostics.Compiler_option_0_requires_a_value_of_type_1,e.name,v(e)))}function R(e,t,n){return e.isFilePath&&""===(n=T.normalizePath(T.combinePaths(t,n)))&&(n="."),n}function L(e,t,n){if(!E(t)){var o=t.toLowerCase(),r=e.type.get(o);if(void 0!==r)return r;n.push(i(e))}}function P(e){return"function"==typeof e.trim?e.trim():e.replace(/^[\s]+|[\s]+$/g,"")}T.compileOnSaveCommandLineOption={name:"compileOnSave",type:"boolean"},T.optionDeclarations=[{name:"help",shortName:"h",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Command_line_Options,description:T.Diagnostics.Print_this_message},{name:"help",shortName:"?",type:"boolean"},{name:"all",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Command_line_Options,description:T.Diagnostics.Show_all_compiler_options},{name:"version",shortName:"v",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Command_line_Options,description:T.Diagnostics.Print_the_compiler_s_version},{name:"init",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Command_line_Options,description:T.Diagnostics.Initializes_a_TypeScript_project_and_creates_a_tsconfig_json_file},{name:"project",shortName:"p",type:"string",isFilePath:!0,showInSimplifiedHelpView:!0,category:T.Diagnostics.Command_line_Options,paramType:T.Diagnostics.FILE_OR_DIRECTORY,description:T.Diagnostics.Compile_the_project_given_the_path_to_its_configuration_file_or_to_a_folder_with_a_tsconfig_json},{name:"pretty",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Command_line_Options,description:T.Diagnostics.Stylize_errors_and_messages_using_color_and_context_experimental},{name:"watch",shortName:"w",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Command_line_Options,description:T.Diagnostics.Watch_input_files},{name:"target",shortName:"t",type:T.createMapFromTemplate({es3:0,es5:1,es6:2,es2015:2,es2016:3,es2017:4,esnext:5}),paramType:T.Diagnostics.VERSION,showInSimplifiedHelpView:!0,category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Specify_ECMAScript_target_version_Colon_ES3_default_ES5_ES2015_ES2016_ES2017_or_ESNEXT},{name:"module",shortName:"m",type:T.createMapFromTemplate({none:T.ModuleKind.None,commonjs:T.ModuleKind.CommonJS,amd:T.ModuleKind.AMD,system:T.ModuleKind.System,umd:T.ModuleKind.UMD,es6:T.ModuleKind.ES2015,es2015:T.ModuleKind.ES2015,esnext:T.ModuleKind.ESNext}),paramType:T.Diagnostics.KIND,showInSimplifiedHelpView:!0,category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Specify_module_code_generation_Colon_none_commonjs_amd_system_umd_es2015_or_ESNext},{name:"lib",type:"list",element:{name:"lib",type:T.createMapFromTemplate({es5:"lib.es5.d.ts",es6:"lib.es2015.d.ts",es2015:"lib.es2015.d.ts",es7:"lib.es2016.d.ts",es2016:"lib.es2016.d.ts",es2017:"lib.es2017.d.ts",esnext:"lib.esnext.d.ts",dom:"lib.dom.d.ts","dom.iterable":"lib.dom.iterable.d.ts",webworker:"lib.webworker.d.ts",scripthost:"lib.scripthost.d.ts","es2015.core":"lib.es2015.core.d.ts","es2015.collection":"lib.es2015.collection.d.ts","es2015.generator":"lib.es2015.generator.d.ts","es2015.iterable":"lib.es2015.iterable.d.ts","es2015.promise":"lib.es2015.promise.d.ts","es2015.proxy":"lib.es2015.proxy.d.ts","es2015.reflect":"lib.es2015.reflect.d.ts","es2015.symbol":"lib.es2015.symbol.d.ts","es2015.symbol.wellknown":"lib.es2015.symbol.wellknown.d.ts","es2016.array.include":"lib.es2016.array.include.d.ts","es2017.object":"lib.es2017.object.d.ts","es2017.sharedmemory":"lib.es2017.sharedmemory.d.ts","es2017.string":"lib.es2017.string.d.ts","es2017.intl":"lib.es2017.intl.d.ts","esnext.asynciterable":"lib.esnext.asynciterable.d.ts"})},showInSimplifiedHelpView:!0,category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Specify_library_files_to_be_included_in_the_compilation_Colon},{name:"allowJs",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Allow_javascript_files_to_be_compiled},{name:"checkJs",type:"boolean",category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Report_errors_in_js_files},{name:"jsx",type:T.createMapFromTemplate({preserve:1,"react-native":3,react:2}),paramType:T.Diagnostics.KIND,showInSimplifiedHelpView:!0,category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Specify_JSX_code_generation_Colon_preserve_react_native_or_react},{name:"declaration",shortName:"d",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Generates_corresponding_d_ts_file},{name:"sourceMap",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Generates_corresponding_map_file},{name:"outFile",type:"string",isFilePath:!0,paramType:T.Diagnostics.FILE,showInSimplifiedHelpView:!0,category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Concatenate_and_emit_output_to_single_file},{name:"outDir",type:"string",isFilePath:!0,paramType:T.Diagnostics.DIRECTORY,showInSimplifiedHelpView:!0,category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Redirect_output_structure_to_the_directory},{name:"rootDir",type:"string",isFilePath:!0,paramType:T.Diagnostics.LOCATION,category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Specify_the_root_directory_of_input_files_Use_to_control_the_output_directory_structure_with_outDir},{name:"removeComments",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Do_not_emit_comments_to_output},{name:"noEmit",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Do_not_emit_outputs},{name:"importHelpers",type:"boolean",category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Import_emit_helpers_from_tslib},{name:"downlevelIteration",type:"boolean",category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Provide_full_support_for_iterables_in_for_of_spread_and_destructuring_when_targeting_ES5_or_ES3},{name:"isolatedModules",type:"boolean",category:T.Diagnostics.Basic_Options,description:T.Diagnostics.Transpile_each_file_as_a_separate_module_similar_to_ts_transpileModule},{name:"strict",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Strict_Type_Checking_Options,description:T.Diagnostics.Enable_all_strict_type_checking_options},{name:"noImplicitAny",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Strict_Type_Checking_Options,description:T.Diagnostics.Raise_error_on_expressions_and_declarations_with_an_implied_any_type},{name:"strictNullChecks",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Strict_Type_Checking_Options,description:T.Diagnostics.Enable_strict_null_checks},{name:"strictFunctionTypes",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Strict_Type_Checking_Options,description:T.Diagnostics.Enable_strict_checking_of_function_types},{name:"noImplicitThis",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Strict_Type_Checking_Options,description:T.Diagnostics.Raise_error_on_this_expressions_with_an_implied_any_type},{name:"alwaysStrict",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Strict_Type_Checking_Options,description:T.Diagnostics.Parse_in_strict_mode_and_emit_use_strict_for_each_source_file},{name:"noUnusedLocals",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Additional_Checks,description:T.Diagnostics.Report_errors_on_unused_locals},{name:"noUnusedParameters",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Additional_Checks,description:T.Diagnostics.Report_errors_on_unused_parameters},{name:"noImplicitReturns",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Additional_Checks,description:T.Diagnostics.Report_error_when_not_all_code_paths_in_function_return_a_value},{name:"noFallthroughCasesInSwitch",type:"boolean",showInSimplifiedHelpView:!0,category:T.Diagnostics.Additional_Checks,description:T.Diagnostics.Report_errors_for_fallthrough_cases_in_switch_statement},{name:"moduleResolution",type:T.createMapFromTemplate({node:T.ModuleResolutionKind.NodeJs,classic:T.ModuleResolutionKind.Classic}),paramType:T.Diagnostics.STRATEGY,category:T.Diagnostics.Module_Resolution_Options,description:T.Diagnostics.Specify_module_resolution_strategy_Colon_node_Node_js_or_classic_TypeScript_pre_1_6},{name:"baseUrl",type:"string",isFilePath:!0,category:T.Diagnostics.Module_Resolution_Options,description:T.Diagnostics.Base_directory_to_resolve_non_absolute_module_names},{name:"paths",type:"object",isTSConfigOnly:!0,category:T.Diagnostics.Module_Resolution_Options,description:T.Diagnostics.A_series_of_entries_which_re_map_imports_to_lookup_locations_relative_to_the_baseUrl},{name:"rootDirs",type:"list",isTSConfigOnly:!0,element:{name:"rootDirs",type:"string",isFilePath:!0},category:T.Diagnostics.Module_Resolution_Options,description:T.Diagnostics.List_of_root_folders_whose_combined_content_represents_the_structure_of_the_project_at_runtime},{name:"typeRoots",type:"list",element:{name:"typeRoots",type:"string",isFilePath:!0},category:T.Diagnostics.Module_Resolution_Options,description:T.Diagnostics.List_of_folders_to_include_type_definitions_from},{name:"types",type:"list",element:{name:"types",type:"string"},showInSimplifiedHelpView:!0,category:T.Diagnostics.Module_Resolution_Options,description:T.Diagnostics.Type_declaration_files_to_be_included_in_compilation},{name:"allowSyntheticDefaultImports",type:"boolean",category:T.Diagnostics.Module_Resolution_Options,description:T.Diagnostics.Allow_default_imports_from_modules_with_no_default_export_This_does_not_affect_code_emit_just_typechecking},{name:"preserveSymlinks",type:"boolean",category:T.Diagnostics.Module_Resolution_Options,description:T.Diagnostics.Do_not_resolve_the_real_path_of_symlinks},{name:"sourceRoot",type:"string",isFilePath:!0,paramType:T.Diagnostics.LOCATION,category:T.Diagnostics.Source_Map_Options,description:T.Diagnostics.Specify_the_location_where_debugger_should_locate_TypeScript_files_instead_of_source_locations},{name:"mapRoot",type:"string",isFilePath:!0,paramType:T.Diagnostics.LOCATION,category:T.Diagnostics.Source_Map_Options,description:T.Diagnostics.Specify_the_location_where_debugger_should_locate_map_files_instead_of_generated_locations},{name:"inlineSourceMap",type:"boolean",category:T.Diagnostics.Source_Map_Options,description:T.Diagnostics.Emit_a_single_file_with_source_maps_instead_of_having_a_separate_file},{name:"inlineSources",type:"boolean",category:T.Diagnostics.Source_Map_Options,description:T.Diagnostics.Emit_the_source_alongside_the_sourcemaps_within_a_single_file_requires_inlineSourceMap_or_sourceMap_to_be_set},{name:"experimentalDecorators",type:"boolean",category:T.Diagnostics.Experimental_Options,description:T.Diagnostics.Enables_experimental_support_for_ES7_decorators},{name:"emitDecoratorMetadata",type:"boolean",category:T.Diagnostics.Experimental_Options,description:T.Diagnostics.Enables_experimental_support_for_emitting_type_metadata_for_decorators},{name:"jsxFactory",type:"string",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Specify_the_JSX_factory_function_to_use_when_targeting_react_JSX_emit_e_g_React_createElement_or_h},{name:"diagnostics",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Show_diagnostic_information},{name:"extendedDiagnostics",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Show_verbose_diagnostic_information},{name:"traceResolution",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Enable_tracing_of_the_name_resolution_process},{name:"listFiles",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Print_names_of_files_part_of_the_compilation},{name:"listEmittedFiles",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Print_names_of_generated_files_part_of_the_compilation},{name:"out",type:"string",isFilePath:!1,category:T.Diagnostics.Advanced_Options,paramType:T.Diagnostics.FILE,description:T.Diagnostics.Deprecated_Use_outFile_instead_Concatenate_and_emit_output_to_single_file},{name:"reactNamespace",type:"string",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Deprecated_Use_jsxFactory_instead_Specify_the_object_invoked_for_createElement_when_targeting_react_JSX_emit},{name:"skipDefaultLibCheck",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Deprecated_Use_skipLibCheck_instead_Skip_type_checking_of_default_library_declaration_files},{name:"charset",type:"string",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.The_character_set_of_the_input_files},{name:"emitBOM",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Emit_a_UTF_8_Byte_Order_Mark_BOM_in_the_beginning_of_output_files},{name:"locale",type:"string",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.The_locale_used_when_displaying_messages_to_the_user_e_g_en_us},{name:"newLine",type:T.createMapFromTemplate({crlf:0,lf:1}),paramType:T.Diagnostics.NEWLINE,category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Specify_the_end_of_line_sequence_to_be_used_when_emitting_files_Colon_CRLF_dos_or_LF_unix},{name:"noErrorTruncation",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Do_not_truncate_error_messages},{name:"noLib",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Do_not_include_the_default_library_file_lib_d_ts},{name:"noResolve",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Do_not_add_triple_slash_references_or_imported_modules_to_the_list_of_compiled_files},{name:"stripInternal",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Do_not_emit_declarations_for_code_that_has_an_internal_annotation},{name:"disableSizeLimit",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Disable_size_limitations_on_JavaScript_projects},{name:"noImplicitUseStrict",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Do_not_emit_use_strict_directives_in_module_output},{name:"noEmitHelpers",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Do_not_generate_custom_helper_functions_like_extends_in_compiled_output},{name:"noEmitOnError",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Do_not_emit_outputs_if_any_errors_were_reported},{name:"preserveConstEnums",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Do_not_erase_const_enum_declarations_in_generated_code},{name:"declarationDir",type:"string",isFilePath:!0,paramType:T.Diagnostics.DIRECTORY,category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Output_directory_for_generated_declaration_files},{name:"skipLibCheck",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Skip_type_checking_of_declaration_files},{name:"allowUnusedLabels",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Do_not_report_errors_on_unused_labels},{name:"allowUnreachableCode",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Do_not_report_errors_on_unreachable_code},{name:"suppressExcessPropertyErrors",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Suppress_excess_property_checks_for_object_literals},{name:"suppressImplicitAnyIndexErrors",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Suppress_noImplicitAny_errors_for_indexing_objects_lacking_index_signatures},{name:"forceConsistentCasingInFileNames",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Disallow_inconsistently_cased_references_to_the_same_file},{name:"maxNodeModuleJsDepth",type:"number",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.The_maximum_dependency_depth_to_search_under_node_modules_and_load_JavaScript_files},{name:"noStrictGenericChecks",type:"boolean",category:T.Diagnostics.Advanced_Options,description:T.Diagnostics.Disable_strict_checking_of_generic_signatures_in_function_types},{name:"plugins",type:"list",isTSConfigOnly:!0,element:{name:"plugin",type:"object"},description:T.Diagnostics.List_of_language_service_plugins}],T.typeAcquisitionDeclarations=[{name:"enableAutoDiscovery",type:"boolean"},{name:"enable",type:"boolean"},{name:"include",type:"list",element:{name:"include",type:"string"}},{name:"exclude",type:"list",element:{name:"exclude",type:"string"}}],T.defaultInitCompilerOptions={module:T.ModuleKind.CommonJS,target:1,strict:!0},T.convertEnableAutoDiscoveryToEnable=a,T.createCompilerDiagnosticForInvalidCustomType=i,T.parseCustomTypeOption=g,T.parseListTypeOption=p,T.parseCommandLine=function(e,i){var a={},s=[],l=[];return c(e),{options:a,fileNames:s,errors:l};function c(e){for(var t=0;t<e.length;){var n=e[t];if(t++,64===n.charCodeAt(0))u(n.slice(1));else if(45===n.charCodeAt(0)){var o=d(n.slice(45===n.charCodeAt(1)?2:1),!0);if(o)if(o.isTSConfigOnly)l.push(T.createCompilerDiagnostic(T.Diagnostics.Option_0_can_only_be_specified_in_tsconfig_json_file,o.name));else switch(e[t]||"boolean"===o.type||l.push(T.createCompilerDiagnostic(T.Diagnostics.Compiler_option_0_expects_an_argument,o.name)),o.type){case"number":a[o.name]=parseInt(e[t]),t++;break;case"boolean":var r=e[t];a[o.name]="false"!==r,"false"!==r&&"true"!==r||t++;break;case"string":a[o.name]=e[t]||"",t++;break;case"list":var i=p(o,e[t],l);a[o.name]=i||[],i&&t++;break;default:a[o.name]=g(o,e[t],l),t++}else l.push(T.createCompilerDiagnostic(T.Diagnostics.Unknown_compiler_option_0,n))}else s.push(n)}}function u(e){var t=i?i(e):T.sys.readFile(e);if(t){for(var n=[],o=0;;){for(;o<t.length&&t.charCodeAt(o)<=32;)o++;if(o>=t.length)break;var r=o;if(34===t.charCodeAt(r)){for(o++;o<t.length&&34!==t.charCodeAt(o);)o++;o<t.length?(n.push(t.substring(r+1,o)),o++):l.push(T.createCompilerDiagnostic(T.Diagnostics.Unterminated_quoted_string_in_response_file_0,e))}else{for(;32<t.charCodeAt(o);)o++;n.push(t.substring(r,o))}}c(n)}else l.push(T.createCompilerDiagnostic(T.Diagnostics.File_0_not_found,e))}},T.readConfigFile=function(e,t){var n=r(e,t);return T.isString(n)?o(e,n):{config:{},error:n}},T.parseConfigFileTextToJson=o,T.readJsonConfigFile=f,T.convertToObject=m,T.generateTSConfig=function(e,_,f){var h=function(r){var i=T.createMap(),a=l().optionNameMap,e=function(e){if(T.hasProperty(r,e)){if(a.has(e)&&a.get(e).category===T.Diagnostics.Command_line_Options)return"continue";var t=r[e],n=a.get(e.toLowerCase());if(n){var o=function e(t){return"string"===t.type||"number"===t.type||"boolean"===t.type?void 0:"list"===t.type?e(t.element):t.type}(n);o?"list"===n.type?i.set(e,t.map(function(e){return s(e,o)})):i.set(e,s(t,o)):i.set(e,t)}}};for(var t in r)e(t);return i}(T.extend(e,T.defaultInitCompilerOptions));return function(){for(var e=T.createMultiMap(),t=0,n=T.optionDeclarations;t<n.length;t++){var o=n[t],r=o.category;void 0!==r&&r!==T.Diagnostics.Command_line_Options&&r!==T.Diagnostics.Advanced_Options&&e.add(T.getLocaleSpecificMessage(r),o)}var a=0,s=0,l=[],c=[];e.forEach(function(e,t){0!==l.length&&(l.push(""),c.push("")),l.push("/* "+t+" */"),c.push("");for(var n=0,o=e;n<o.length;n++){var r=o[n],i=void 0;i=h.has(r.name)?'"'+r.name+'": '+JSON.stringify(h.get(r.name))+((s+=1)===h.size?"":","):'// "'+r.name+'": '+JSON.stringify(m(r))+",",l.push(i),c.push("/* "+(r.description&&T.getLocaleSpecificMessage(r.description)||r.name)+" */"),a=Math.max(i.length,a)}});var i=y(2),u=[];u.push("{"),u.push(i+'"compilerOptions": {');for(var g=0;g<l.length;g++){var p=l[g],d=c[g];u.push(p&&""+i+i+p+(d&&y(a-p.length+2)+d))}if(_.length){u.push(i+"},"),u.push(i+'"files": [');for(var g=0;g<_.length;g++)u.push(""+i+i+JSON.stringify(_[g])+(g===_.length-1?"":","));u.push(i+"]")}else u.push(i+"}");return u.push("}"),u.join(f)}();function s(n,e){return T.forEachEntry(e,function(e,t){if(e===n)return t})}function m(e){switch(e.type){case"number":return 1;case"boolean":return!0;case"string":return e.isFilePath?"./":"";case"list":return[];case"object":return{};default:return e.type.keys().next().value}}function y(e){return Array(e+1).join(" ")}},T.parseJsonConfigFileContent=function(e,t,n,o,r,i,a){return s(e,void 0,t,n,o,r,i,a)},T.parseJsonSourceFileConfigFileContent=function(e,t,n,o,r,i,a){return s(void 0,e,t,n,o,r,i,a)},T.setConfigFileInOptions=k,T.isErrorNoInputFiles=function(e){return e.code===T.Diagnostics.No_inputs_were_found_in_config_file_0_Specified_include_paths_were_1_and_exclude_paths_were_2.code},T.getErrorForNoInputFiles=C,T.convertCompilerOptionsFromJson=function(e,t,n){var o=[];return{options:I(e,t,o,n),errors:o}},T.convertTypeAcquisitionFromJson=function(e,t,n){var o=[];return{options:w(e,t,o,n),errors:o}};var M=/(^|\/)\*\*\/?$/,F=/(^|\/)\*\*\/(.*\/)?\*\*($|\/)/,U=/(^|\/)\*\*\/(.*\/)?\.\.($|\/)/,H=/\/[^/]*?[*?][^/]*\//,G=/^[^*?]*(?=\/[^/]*[*?])/;function V(e,t,n,o,r){void 0===r&&(r=[]),t=T.normalizePath(t);var i=o.useCaseSensitiveFileNames?Y:X,a=T.createMap(),s=T.createMap(),l=e.filesSpecs,c=e.validatedIncludeSpecs,u=e.validatedExcludeSpecs,g=e.wildcardDirectories,p=T.getSupportedExtensions(n,r);if(l)for(var d=0,_=l;d<_.length;d++){var f=_[d],h=T.getNormalizedAbsolutePath(f,t);a.set(i(h),h)}if(c&&0<c.length)for(var m=0,y=o.readDirectory(t,p,u,c,void 0);m<y.length;m++){if(!z(h=y[m],a,s,p,i)){j(h,s,p,i);var v=i(h);a.has(v)||s.has(v)||s.set(v,h)}}var b=T.arrayFrom(a.values()),k=T.arrayFrom(s.values());return{fileNames:b.concat(k),wildcardDirectories:g,spec:e}}function W(e,n,o,l,c){return e.filter(function(e){var t=function(e,t){{if(!t&&M.test(e))return T.Diagnostics.File_specification_cannot_end_in_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0;if(F.test(e))return T.Diagnostics.File_specification_cannot_contain_multiple_recursive_directory_wildcards_Asterisk_Asterisk_Colon_0;if(U.test(e))return T.Diagnostics.File_specification_cannot_contain_a_parent_directory_that_appears_after_a_recursive_directory_wildcard_Asterisk_Asterisk_Colon_0}}(e,o);return void 0!==t&&n.push(function(e,t){if(l&&l.jsonObject)for(var n=0,o=T.getPropertyAssignment(l.jsonObject,c);n<o.length;n++){var r=o[n];if(T.isArrayLiteralExpression(r.initializer))for(var i=0,a=r.initializer.elements;i<a.length;i++){var s=a[i];if(T.isStringLiteral(s)&&s.text===t)return T.createDiagnosticForNodeInSourceFile(l,s,e,t)}}return T.createCompilerDiagnostic(e,t)}(t,e)),void 0===t})}function K(e,t){var n=G.exec(e);return n?{key:t?n[0]:n[0].toLowerCase(),flags:H.test(e)?1:0}:T.isImplicitGlob(e)?{key:e,flags:1}:void 0}function z(e,t,n,o,r){for(var i=T.getExtensionPriority(e,o),a=T.adjustExtensionPriority(i,o),s=0;s<a;s++){var l=o[s],c=r(T.changeExtension(e,l));if(t.has(c)||n.has(c))return!0}return!1}function j(e,t,n,o){for(var r=T.getExtensionPriority(e,n),i=T.getNextLowestExtensionPriority(r,n);i<n.length;i++){var a=n[i],s=o(T.changeExtension(e,a));t.delete(s)}}function Y(e){return e}function X(e){return e.toLowerCase()}function J(n,e){switch(e.type){case"object":case"string":return"";case"number":return"number"==typeof n?n:"";case"boolean":return"boolean"==typeof n?n:"";case"list":var t=e.element;return T.isArray(n)?n.map(function(e){return J(e,t)}):"";default:return T.forEachEntry(e.type,function(e,t){if(e===n)return t})}}T.getFileNamesFromConfigSpecs=V,T.convertCompilerOptionsForTelemetry=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var o=d(n);void 0!==o&&(t[n]=J(e[n],o))}return t}}(ts||(ts={})),function(e){var t,n;t=e.ScriptSnapshot||(e.ScriptSnapshot={}),n=function(){function e(e){this.text=e}return e.prototype.getText=function(e,t){return 0===e&&t===this.text.length?this.text:this.text.substring(e,t)},e.prototype.getLength=function(){return this.text.length},e.prototype.getChangeRange=function(){},e}(),t.fromString=function(e){return new n(e)};var o,r,i,a,s,l,c,u,g,p,d=function(){};e.TextChange=d,(o=e.HighlightSpanKind||(e.HighlightSpanKind={})).none="none",o.definition="definition",o.reference="reference",o.writtenReference="writtenReference",(r=e.IndentStyle||(e.IndentStyle={}))[r.None=0]="None",r[r.Block=1]="Block",r[r.Smart=2]="Smart",(i=e.SymbolDisplayPartKind||(e.SymbolDisplayPartKind={}))[i.aliasName=0]="aliasName",i[i.className=1]="className",i[i.enumName=2]="enumName",i[i.fieldName=3]="fieldName",i[i.interfaceName=4]="interfaceName",i[i.keyword=5]="keyword",i[i.lineBreak=6]="lineBreak",i[i.numericLiteral=7]="numericLiteral",i[i.stringLiteral=8]="stringLiteral",i[i.localName=9]="localName",i[i.methodName=10]="methodName",i[i.moduleName=11]="moduleName",i[i.operator=12]="operator",i[i.parameterName=13]="parameterName",i[i.propertyName=14]="propertyName",i[i.punctuation=15]="punctuation",i[i.space=16]="space",i[i.text=17]="text",i[i.typeParameterName=18]="typeParameterName",i[i.enumMemberName=19]="enumMemberName",i[i.functionName=20]="functionName",i[i.regularExpressionLiteral=21]="regularExpressionLiteral",(a=e.OutputFileType||(e.OutputFileType={}))[a.JavaScript=0]="JavaScript",a[a.SourceMap=1]="SourceMap",a[a.Declaration=2]="Declaration",(s=e.EndOfLineState||(e.EndOfLineState={}))[s.None=0]="None",s[s.InMultiLineCommentTrivia=1]="InMultiLineCommentTrivia",s[s.InSingleQuoteStringLiteral=2]="InSingleQuoteStringLiteral",s[s.InDoubleQuoteStringLiteral=3]="InDoubleQuoteStringLiteral",s[s.InTemplateHeadOrNoSubstitutionTemplate=4]="InTemplateHeadOrNoSubstitutionTemplate",s[s.InTemplateMiddleOrTail=5]="InTemplateMiddleOrTail",s[s.InTemplateSubstitutionPosition=6]="InTemplateSubstitutionPosition",(l=e.TokenClass||(e.TokenClass={}))[l.Punctuation=0]="Punctuation",l[l.Keyword=1]="Keyword",l[l.Operator=2]="Operator",l[l.Comment=3]="Comment",l[l.Whitespace=4]="Whitespace",l[l.Identifier=5]="Identifier",l[l.NumberLiteral=6]="NumberLiteral",l[l.StringLiteral=7]="StringLiteral",l[l.RegExpLiteral=8]="RegExpLiteral",(c=e.ScriptElementKind||(e.ScriptElementKind={})).unknown="",c.warning="warning",c.keyword="keyword",c.scriptElement="script",c.moduleElement="module",c.classElement="class",c.localClassElement="local class",c.interfaceElement="interface",c.typeElement="type",c.enumElement="enum",c.enumMemberElement="enum member",c.variableElement="var",c.localVariableElement="local var",c.functionElement="function",c.localFunctionElement="local function",c.memberFunctionElement="method",c.memberGetAccessorElement="getter",c.memberSetAccessorElement="setter",c.memberVariableElement="property",c.constructorImplementationElement="constructor",c.callSignatureElement="call",c.indexSignatureElement="index",c.constructSignatureElement="construct",c.parameterElement="parameter",c.typeParameterElement="type parameter",c.primitiveType="primitive type",c.label="label",c.alias="alias",c.constElement="const",c.letElement="let",c.directory="directory",c.externalModuleName="external module name",c.jsxAttribute="JSX attribute",(u=e.ScriptElementKindModifier||(e.ScriptElementKindModifier={})).none="",u.publicMemberModifier="public",u.privateMemberModifier="private",u.protectedMemberModifier="protected",u.exportedModifier="export",u.ambientModifier="declare",u.staticModifier="static",u.abstractModifier="abstract",(g=e.ClassificationTypeNames||(e.ClassificationTypeNames={})).comment="comment",g.identifier="identifier",g.keyword="keyword",g.numericLiteral="number",g.operator="operator",g.stringLiteral="string",g.whiteSpace="whitespace",g.text="text",g.punctuation="punctuation",g.className="class name",g.enumName="enum name",g.interfaceName="interface name",g.moduleName="module name",g.typeParameterName="type parameter name",g.typeAliasName="type alias name",g.parameterName="parameter name",g.docCommentTagName="doc comment tag name",g.jsxOpenTagName="jsx open tag name",g.jsxCloseTagName="jsx close tag name",g.jsxSelfClosingTagName="jsx self closing tag name",g.jsxAttribute="jsx attribute",g.jsxText="jsx text",g.jsxAttributeStringLiteralValue="jsx attribute string literal value",(p=e.ClassificationType||(e.ClassificationType={}))[p.comment=1]="comment",p[p.identifier=2]="identifier",p[p.keyword=3]="keyword",p[p.numericLiteral=4]="numericLiteral",p[p.operator=5]="operator",p[p.stringLiteral=6]="stringLiteral",p[p.regularExpressionLiteral=7]="regularExpressionLiteral",p[p.whiteSpace=8]="whiteSpace",p[p.text=9]="text",p[p.punctuation=10]="punctuation",p[p.className=11]="className",p[p.enumName=12]="enumName",p[p.interfaceName=13]="interfaceName",p[p.moduleName=14]="moduleName",p[p.typeParameterName=15]="typeParameterName",p[p.typeAliasName=16]="typeAliasName",p[p.parameterName=17]="parameterName",p[p.docCommentTagName=18]="docCommentTagName",p[p.jsxOpenTagName=19]="jsxOpenTagName",p[p.jsxCloseTagName=20]="jsxCloseTagName",p[p.jsxSelfClosingTagName=21]="jsxSelfClosingTagName",p[p.jsxAttribute=22]="jsxAttribute",p[p.jsxText=23]="jsxText",p[p.jsxAttributeStringLiteralValue=24]="jsxAttributeStringLiteralValue"}(ts||(ts={})),function(_){var e;function o(e){switch(e.kind){case 146:case 226:case 176:case 149:case 148:case 261:case 262:case 151:case 150:case 152:case 153:case 154:case 228:case 186:case 187:case 260:case 253:return 1;case 145:case 230:case 231:case 163:return 2;case 283:return void 0===e.name?3:2;case 264:case 229:return 3;case 233:return _.isAmbientModule(e)?5:1===_.getModuleInstanceState(e)?5:4;case 232:case 241:case 242:case 237:case 238:case 243:case 244:return 7;case 265:return 5}return 7}function r(e){for(;143===e.parent.kind;)e=e.parent;return _.isInternalModuleImportEqualsDeclaration(e.parent)&&e.parent.moduleReference===e}function t(e,t){var n=i(e);return n&&n.parent&&n.parent.kind===t&&n.parent.expression===n}function i(e){return a(e)?e.parent:e}function n(e){return 71===e.kind&&(218===e.parent.kind||217===e.parent.kind)&&e.parent.label===e}function a(e){return e&&e.parent&&179===e.parent.kind&&e.parent.name===e}_.scanner=_.createScanner(5,!0),(e=_.SemanticMeaning||(_.SemanticMeaning={}))[e.None=0]="None",e[e.Value=1]="Value",e[e.Type=2]="Type",e[e.Namespace=4]="Namespace",e[e.All=7]="All",_.getMeaningFromDeclaration=o,_.getMeaningFromLocation=function(e){return 265===e.kind?1:243===e.parent.kind?7:r(e)?(t=e,_.Debug.assert(71===t.kind),143===t.parent.kind&&t.parent.right===t&&237===t.parent.parent.kind?7:4):_.isDeclarationName(e)?o(e.parent):function(e){switch(_.isRightSideOfQualifiedNameOrPropertyAccess(e)&&(e=e.parent),e.kind){case 99:return!_.isPartOfExpression(e);case 169:return!0}switch(e.parent.kind){case 159:return!0;case 201:return!_.isExpressionWithTypeArgumentsInClassExtendsClause(e.parent)}return!1}(e)?2:function(e){var t=e,n=!0;if(143===t.parent.kind){for(;t.parent&&143===t.parent.kind;)t=t.parent;n=t.right===e}return 159===t.parent.kind&&!n}(n=e)||function(e){var t=e,n=!0;if(179===t.parent.kind){for(;t.parent&&179===t.parent.kind;)t=t.parent;n=t.name===e}if(!n&&201===t.parent.kind&&259===t.parent.parent.kind){var o=t.parent.parent.parent;return 229===o.kind&&108===t.parent.parent.token||230===o.kind&&85===t.parent.parent.token}return!1}(n)?4:_.isTypeParameterDeclaration(e.parent)?(_.Debug.assert(_.isJSDocTemplateTag(e.parent.parent)),2):1;var t;var n},_.isInRightSideOfInternalImportEqualsDeclaration=r,_.isCallExpressionTarget=function(e){return t(e,181)},_.isNewExpressionTarget=function(e){return t(e,182)},_.climbPastPropertyAccess=i,_.getTargetLabel=function(e,t){for(;e;){if(222===e.kind&&e.label.escapedText===t)return e.label;e=e.parent}},_.isJumpStatementTarget=n,_.isLabelName=function(e){return 71===(t=e).kind&&222===t.parent.kind&&t.parent.label===t||n(e);var t},_.isRightSideOfQualifiedName=function(e){return 143===e.parent.kind&&e.parent.right===e},_.isRightSideOfPropertyAccess=a,_.isNameOfModuleDeclaration=function(e){return 233===e.parent.kind&&e.parent.name===e},_.isNameOfFunctionDeclaration=function(e){return 71===e.kind&&_.isFunctionLike(e.parent)&&e.parent.name===e},_.isLiteralNameOfPropertyDeclarationOrIndexAccess=function(e){switch(e.parent.kind){case 149:case 148:case 261:case 264:case 151:case 150:case 153:case 154:case 233:return _.getNameOfDeclaration(e.parent)===e;case 180:return e.parent.argumentExpression===e;case 144:return!0;case 173:return 171===e.parent.parent.kind}},_.isExpressionOfExternalModuleImportEqualsDeclaration=function(e){return _.isExternalModuleImportEqualsDeclaration(e.parent.parent)&&_.getExternalModuleImportEqualsDeclarationExpression(e.parent.parent)===e},_.getContainerNode=function(e){for(283===e.kind&&(e=e.parent.parent);;){if(!(e=e.parent))return;switch(e.kind){case 265:case 151:case 150:case 228:case 186:case 153:case 154:case 229:case 230:case 232:case 233:return e}}},_.getNodeKind=function e(t){switch(t.kind){case 265:return _.isExternalModule(t)?"module":"script";case 233:return"module";case 229:case 199:return"class";case 230:return"interface";case 231:return"type";case 232:return"enum";case 226:return i(t);case 176:return i(_.getRootDeclaration(t));case 187:case 228:case 186:return"function";case 153:return"getter";case 154:return"setter";case 151:case 150:return"method";case 149:case 148:return"property";case 157:return"index";case 156:return"construct";case 155:return"call";case 152:return"constructor";case 145:return"type parameter";case 264:return"enum member";case 146:return _.hasModifier(t,92)?"property":"parameter";case 237:case 242:case 239:case 246:case 240:return"alias";case 283:return"type";case 194:var n=_.getSpecialPropertyAssignmentKind(t),o=t.right;switch(n){case 0:return"";case 1:case 2:var r=e(o);return""===r?"const":r;case 3:return"method";case 4:return"property";case 5:return _.isFunctionExpression(o)?"method":"property";default:return _.assertTypeIsNever(n),""}default:return""}function i(e){return _.isConst(e)?"const":_.isLet(e)?"let":"var"}},_.isThis=function(e){switch(e.kind){case 99:return!0;case 71:return _.identifierIsThisKeyword(e)&&146===e.parent.kind;default:return!1}};var s=/^\/\/\/\s*</;function l(e,t,n){return e<=n.pos&&t>=n.end}function c(e,t,n,o){return Math.max(e,n)<Math.min(t,o)}function u(e,t){if(_.nodeIsMissing(e))return!1;switch(e.kind){case 229:case 230:case 232:case 178:case 174:case 163:case 207:case 234:case 235:case 241:case 245:return g(e,18,t);case 260:return u(e.block,t);case 182:if(!e.arguments)return!0;case 181:case 185:case 168:return g(e,20,t);case 160:case 161:return u(e.type,t);case 152:case 153:case 154:case 228:case 186:case 151:case 150:case 156:case 155:case 187:return e.body?u(e.body,t):e.type?u(e.type,t):p(e,20,t);case 233:return e.body&&u(e.body,t);case 211:return e.elseStatement?u(e.elseStatement,t):u(e.thenStatement,t);case 210:return u(e.expression,t)||p(e,25);case 177:case 175:case 180:case 144:case 165:return g(e,22,t);case 157:return e.type?u(e.type,t):p(e,22,t);case 257:case 258:return!1;case 214:case 215:case 216:case 213:return u(e.statement,t);case 212:return d(e,106,t)?g(e,20,t):u(e.statement,t);case 162:return u(e.exprName,t);case 189:case 188:case 190:case 197:case 198:return u(e.expression,t);case 183:return u(e.template,t);case 196:return u(_.lastOrUndefined(e.templateSpans),t);case 205:return _.nodeIsPresent(e.literal);case 244:case 238:return _.nodeIsPresent(e.moduleSpecifier);case 192:return u(e.operand,t);case 194:return u(e.right,t);case 195:return u(e.whenFalse,t);default:return!0}}function g(e,t,n){var o=e.getChildren(n);if(o.length){var r=_.lastOrUndefined(o);if(r.kind===t)return!0;if(25===r.kind&&1!==o.length)return o[o.length-2].kind===t}return!1}function p(e,t,n){return!!d(e,t,n)}function d(e,t,n){return _.forEach(e.getChildren(n),function(e){return e.kind===t&&e})}function f(t){var e=_.forEach(t.parent.getChildren(),function(e){if(_.isSyntaxList(e)&&e.pos<=t.pos&&e.end>=t.end)return e});return _.Debug.assert(!e||_.contains(e.getChildren(),t)),e}function h(e,t,n,o){return y(e,t,!1,o,!1,n)}function m(e,t,n,o){return y(e,t,!0,void 0,o,n)}function y(e,t,n,o,r,i){var a=e;e:for(;;){if(_.isToken(a))return a;for(var s=0,l=a.getChildren();s<l.length;s++){var c=l[s];if(i||!_.isJSDocNode(c)){if(t<(n?c.getFullStart():c.getStart(e,i)))break;var u=c.getEnd();if(t<u||t===u&&(1===c.kind||r)){a=c;continue e}if(o&&u===t){var g=v(t,e,c);if(g&&o(g))return g}}}return a}}function v(l,c,u,g){var e=function e(t){if(_.isToken(t))return t;var n=t.getChildren();for(var o=0;o<n.length;o++){var r=n[o];if(l<r.end){var i=r.getStart(c,g),a=l<=i||!T(r)||b(r);if(a){var s=d(n,o);return s&&p(s)}return e(r)}}_.Debug.assert(void 0!==u||265===t.kind||_.isJSDocCommentContainingNode(t));if(n.length){var s=d(n,n.length);return s&&p(s)}}(u||c);return _.Debug.assert(!(e&&b(e))),e;function p(e){if(_.isToken(e))return e;var t=e.getChildren(),n=d(t,t.length);return n&&p(n)}function d(e,t){for(var n=t-1;0<=n;n--){if(b(e[n]))_.Debug.assert(0<n,"`JsxText` tokens should not be the first child of `JsxElement | JsxSelfClosingElement`");else if(T(e[n]))return e[n]}}}function b(e){return _.isJsxText(e)&&e.containsOnlyWhiteSpaces}function k(e,t,n,o){return!!_.formatting.getRangeOfEnclosingComment(e,t,!1,void 0,n,o)}function T(e){return 0!==e.getWidth()}function E(e){return 71===e||_.isKeyword(e)}_.getLineStartPositionForPosition=function(e,t){return _.getLineStarts(t)[t.getLineAndCharacterOfPosition(e).line]},_.rangeContainsRange=function(e,t){return l(e.pos,e.end,t)},_.startEndContainsRange=l,_.rangeContainsStartEnd=function(e,t,n){return e.pos<=t&&e.end>=n},_.rangeOverlapsWithStartEnd=function(e,t,n){return c(e.pos,e.end,t,n)},_.startEndOverlapsWithStartEnd=c,_.positionBelongsToNode=function(e,t,n){return t<e.end||!u(e,n)},_.isCompletedNode=u,_.findListItemInfo=function(e){var t=f(e);if(t){var n=t.getChildren();return{listItemIndex:_.indexOfNode(n,e),list:t}}},_.hasChildOfKind=p,_.findChildOfKind=d,_.findContainingList=f,_.getTouchingWord=function(e,t,n){return h(e,t,n,function(e){return E(e.kind)})},_.getTouchingPropertyName=function(e,t,n){return h(e,t,n,function(e){return 9===(t=e.kind)||8===t||E(t);var t})},_.getTouchingToken=h,_.getTokenAtPosition=m,_.findTokenOnLeftOfPosition=function(e,t){var n=m(e,t,!1);return _.isToken(n)&&t>n.getStart(e)&&t<n.getEnd()?n:v(t,e)},_.findNextToken=function(s,e){return function e(t){if(_.isToken(t)&&t.pos===s.end)return t;for(var n=t.getChildren(),o=0,r=n;o<r.length;o++){var i=r[o],a=i.pos<=s.pos&&i.end>s.end||i.pos===s.end;if(a&&T(i))return e(i)}}(e)},_.findPrecedingToken=v,_.isInString=function(e,t){var n=v(t,e);if(n&&_.isStringTextContainingNode(n)){var o=n.getStart(),r=n.getEnd();if(o<t&&t<r)return!0;if(t===r)return!!n.isUnterminated}return!1},_.isInsideJsxElementOrAttribute=function(e,t){var n=m(e,t,!1);return!!n&&(10===n.kind||27===n.kind&&10===n.parent.kind||27===n.kind&&256===n.parent.kind||!(!n||18!==n.kind||256!==n.parent.kind)||27===n.kind&&252===n.parent.kind)},_.isWhiteSpaceOnlyJsxText=b,_.isInTemplateString=function(e,t){var n=m(e,t,!1);return _.isTemplateLiteralKind(n.kind)&&t>n.getStart(e)},_.isInComment=k,_.hasDocComment=function(n,e){var t=m(n,e,!1),o=_.getLeadingCommentRanges(n.text,t.pos);return _.forEach(o,function(e){var t=n.text;return t.length>=e.pos+3&&"/"===t[e.pos]&&"*"===t[e.pos+1]&&"*"===t[e.pos+2]})},_.getNodeModifiers=function(e){var t=_.getCombinedModifierFlags(e),n=[];return 8&t&&n.push("private"),16&t&&n.push("protected"),4&t&&n.push("public"),32&t&&n.push("static"),128&t&&n.push("abstract"),1&t&&n.push("export"),_.isInAmbientContext(e)&&n.push("declare"),0<n.length?n.join(","):""},_.getTypeArgumentOrTypeParameterList=function(e){return 159===e.kind||181===e.kind?e.typeArguments:_.isFunctionLike(e)||229===e.kind||230===e.kind?e.typeParameters:void 0},_.isWord=E,_.isComment=function(e){return 2===e||3===e},_.isStringOrRegularExpressionOrTemplateLiteral=function(e){return!(9!==e&&12!==e&&!_.isTemplateLiteralKind(e))},_.isPunctuation=function(e){return 17<=e&&e<=70},_.isInsideTemplateLiteral=function(e,t){return _.isTemplateLiteralKind(e.kind)&&e.getStart()<t&&t<e.getEnd()||!!e.isUnterminated&&t===e.getEnd()},_.isAccessibilityModifier=function(e){switch(e){case 114:case 112:case 113:return!0}return!1},_.cloneCompilerOptions=function(e){var t=_.clone(e);return _.setConfigFileInOptions(t,e&&e.configFile),t},_.isArrayLiteralOrObjectLiteralDestructuringPattern=function e(t){if(177===t.kind||178===t.kind){if(194===t.parent.kind&&t.parent.left===t&&58===t.parent.operatorToken.kind)return!0;if(216===t.parent.kind&&t.parent.initializer===t)return!0;if(e(261===t.parent.kind?t.parent.parent:t.parent))return!0}return!1},_.hasTrailingDirectorySeparator=function(e){var t=e.charAt(e.length-1);return"/"===t||"\\"===t},_.isInReferenceComment=function(n,e){return k(n,e,void 0,function(e){var t=n.text.substring(e.pos,e.end);return s.test(t)})},_.isInNonReferenceComment=function(n,e){return k(n,e,void 0,function(e){var t=n.text.substring(e.pos,e.end);return!s.test(t)})},_.createTextSpanFromNode=function(e,t){return _.createTextSpanFromBounds(e.getStart(t),e.getEnd())},_.createTextSpanFromRange=function(e){return _.createTextSpanFromBounds(e.pos,e.end)},_.isTypeKeyword=function(e){switch(e){case 119:case 122:case 130:case 133:case 134:case 136:case 137:case 105:return!0;default:return!1}},_.isExternalModuleSymbol=function(e){return _.Debug.assert(!!(1536&e.flags)),34===e.name.charCodeAt(0)},_.nodeSeenTracker=function(){var n=[];return function(e){var t=_.getNodeId(e);return!n[t]&&(n[t]=!0)}}}(ts||(ts={})),function(s){function n(e){return e.declarations&&0<e.declarations.length&&146===e.declarations[0].kind}s.isFirstDeclarationOfSymbolParameter=n;var t=function(){var n,t,o;return e(),{displayParts:function(){return n},writeKeyword:function(e){return i(e,s.SymbolDisplayPartKind.keyword)},writeOperator:function(e){return i(e,s.SymbolDisplayPartKind.operator)},writePunctuation:function(e){return i(e,s.SymbolDisplayPartKind.punctuation)},writeSpace:function(e){return i(e,s.SymbolDisplayPartKind.space)},writeStringLiteral:function(e){return i(e,s.SymbolDisplayPartKind.stringLiteral)},writeParameter:function(e){return i(e,s.SymbolDisplayPartKind.parameterName)},writeProperty:function(e){return i(e,s.SymbolDisplayPartKind.propertyName)},writeSymbol:function(e,t){r(),n.push(a(e,t))},writeLine:function(){n.push(c()),t=!0},increaseIndent:function(){o++},decreaseIndent:function(){o--},clear:e,trackSymbol:s.noop,reportInaccessibleThisError:s.noop,reportPrivateInBaseOfClassExpression:s.noop};function r(){if(t){var e=s.getIndentString(o);e&&n.push(l(e,s.SymbolDisplayPartKind.space)),t=!1}}function i(e,t){r(),n.push(l(e,t))}function e(){n=[],t=!0,o=0}}();function a(e,t){return l(e,function(e){var t=e.flags;{if(3&t)return n(e)?s.SymbolDisplayPartKind.parameterName:s.SymbolDisplayPartKind.localName;if(4&t)return s.SymbolDisplayPartKind.propertyName;if(32768&t)return s.SymbolDisplayPartKind.propertyName;if(65536&t)return s.SymbolDisplayPartKind.propertyName;if(8&t)return s.SymbolDisplayPartKind.enumMemberName;if(16&t)return s.SymbolDisplayPartKind.functionName;if(32&t)return s.SymbolDisplayPartKind.className;if(64&t)return s.SymbolDisplayPartKind.interfaceName;if(384&t)return s.SymbolDisplayPartKind.enumName;if(1536&t)return s.SymbolDisplayPartKind.moduleName;if(8192&t)return s.SymbolDisplayPartKind.methodName;if(262144&t)return s.SymbolDisplayPartKind.typeParameterName;if(524288&t)return s.SymbolDisplayPartKind.aliasName;if(2097152&t)return s.SymbolDisplayPartKind.aliasName}return s.SymbolDisplayPartKind.text}(t))}function l(e,t){return{text:e,kind:s.SymbolDisplayPartKind[t]}}function o(e){return l(s.tokenToString(e),s.SymbolDisplayPartKind.keyword)}function r(e){return l(e,s.SymbolDisplayPartKind.text)}s.symbolPart=a,s.displayPart=l,s.spacePart=function(){return l(" ",s.SymbolDisplayPartKind.space)},s.keywordPart=o,s.punctuationPart=function(e){return l(s.tokenToString(e),s.SymbolDisplayPartKind.punctuation)},s.operatorPart=function(e){return l(s.tokenToString(e),s.SymbolDisplayPartKind.operator)},s.textOrKeywordPart=function(e){var t=s.stringToToken(e);return void 0===t?r(e):o(t)},s.textPart=r;var i="\r\n";function c(){return l("\n",s.SymbolDisplayPartKind.lineBreak)}function e(e){try{return e(t),t.displayParts()}finally{t.clear()}}function u(e){return e.parent&&(242===e.parent.kind||246===e.parent.kind)&&e.parent.propertyName===e}function g(e,t){return s.ensureScriptKind(e,t&&t.getScriptKind&&t.getScriptKind(e))}s.getNewLineOrDefaultFromHost=function(e){return e.getNewLine?e.getNewLine():i},s.lineBreakPart=c,s.mapToDisplayParts=e,s.typeToDisplayParts=function(t,n,o,r){return e(function(e){t.getSymbolDisplayBuilder().buildTypeDisplay(n,e,o,r)})},s.symbolToDisplayParts=function(t,n,o,r,i){return e(function(e){t.getSymbolDisplayBuilder().buildSymbolDisplay(n,e,o,r,i)})},s.signatureToDisplayParts=function(t,n,o,r){return r|=65536,e(function(e){t.getSymbolDisplayBuilder().buildSignatureDisplay(n,e,o,r)})},s.getDeclaredName=function(e,t,n){if(u(n)||s.isStringOrNumericLiteral(n)&&144===n.parent.kind)return s.getTextOfIdentifierOrLiteral(n);var o=s.getLocalSymbolForExportDefault(t);return e.symbolToString(o||t)},s.isImportOrExportSpecifierName=u,s.stripQuotes=function(e){var t=e.length;return 2<=t&&e.charCodeAt(0)===e.charCodeAt(t-1)&&s.isSingleOrDoubleQuote(e.charCodeAt(0))?e.substring(1,t-1):e},s.scriptKindIs=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=g(e,t);return s.forEach(n,function(e){return e===r})},s.getScriptKind=g,s.getUniqueSymbolId=function(e,t){return s.getSymbolId(s.skipAlias(e,t))},s.getFirstNonSpaceCharacterPosition=function(e,t){for(;s.isWhiteSpaceLike(e.charCodeAt(t));)t+=1;return t},s.getOpenBrace=function(e,t){return e.body.getFirstToken(t)},s.getOpenBraceOfClassLike=function(e,t){return s.getTokenAtPosition(t,e.members.pos-1,!1)},s.getSourceFileImportLocation=function(e){var t=e.text,n=s.getLeadingCommentRanges(t,0);if(!n)return 0;var o=0;n.length&&3===n[0].kind&&s.isPinnedComment(t,n[0])&&(o=n[0].end+1,n=n.slice(1));for(var r=0,i=n;r<i.length;r++){var a=i[r];if(2!==a.kind||!s.isRecognizedTripleSlashComment(e.text,a.pos,a.end))break;o=a.end+1}return o},s.getSynthesizedDeepClone=function e(t){if(void 0!==t){var n=s.visitEachChild(t,e,s.nullTransformationContext);if(n===t){var o=s.getSynthesizedClone(t);return s.isStringLiteral(o)?o.textSourceNode=t:s.isNumericLiteral(o)&&(o.numericLiteralFlags=t.numericLiteralFlags),o.pos=t.pos,o.end=t.end,o}return n.parent=void 0,n}},s.suppressLeadingAndTrailingTrivia=function(e){s.Debug.assert(void 0!==e),function e(t){s.addEmitFlags(t,512);var n=s.forEachChild(t,function(e){return e});n&&e(n)}(e),function e(t){s.addEmitFlags(t,1024);var n=void 0;s.forEachChild(t,function(e){n=e},function(e){e.length&&(n=s.last(e))}),n&&e(n)}(e)}}(ts||(ts={})),function(v){function b(e,t){switch(t){case 233:case 229:case 230:case 228:e.throwIfCancellationRequested()}}function i(c,u,e,g,p){var d=[];return function e(t){if(t&&v.textSpanIntersectsWith(p,t.getFullStart(),t.getFullWidth())){var n=t.kind;if(b(u,n),71===n&&!v.nodeIsMissing(t)){var o=t;if(g.has(o.escapedText)){var r=c.getSymbolAtLocation(t);if(r){var i=function(e,t){var n=e.getFlags();if(0==(788448&n))return;{if(32&n)return 11;if(384&n)return 12;if(524288&n)return 16;if(2&t){if(64&n)return 13;if(262144&n)return 15}else if(1536&n&&(4&t||1&t&&(o=e,v.forEach(o.declarations,function(e){return 233===e.kind&&1===v.getModuleInstanceState(e)}))))return 14}var o;return}(r,v.getMeaningFromLocation(t));i&&(a=t.getStart(),s=t.getWidth(),l=i,d.push(a),d.push(s),d.push(l))}}}v.forEachChild(t,e)}var a,s,l}(e),{spans:d,endOfLineState:0}}function r(e){switch(e){case 1:return"comment";case 2:return"identifier";case 3:return"keyword";case 4:return"number";case 5:return"operator";case 6:return"string";case 8:return"whitespace";case 9:return"text";case 10:return"punctuation";case 11:return"class name";case 12:return"enum name";case 13:return"interface name";case 14:return"module name";case 15:return"type parameter name";case 16:return"type alias name";case 17:return"parameter name";case 18:return"doc comment tag name";case 19:return"jsx open tag name";case 20:return"jsx close tag name";case 21:return"jsx self closing tag name";case 22:return"jsx attribute";case 23:return"jsx text";case 24:return"jsx attribute string literal value"}}function a(e){v.Debug.assert(e.spans.length%3==0);for(var t=e.spans,n=[],o=0;o<t.length;o+=3)n.push({textSpan:v.createTextSpan(t[o],t[o+1]),classificationType:r(t[o+2])});return n}function o(r,s,e){var i=e.start,a=e.length,l=v.createScanner(5,!1,s.languageVariant,s.text),c=v.createScanner(5,!1,s.languageVariant,s.text),o=[];return y(s),{spans:o,endOfLineState:0};function u(e,t,n){o.push(e),o.push(t),o.push(n)}function g(e,t,n,o){if(3===t){var r=v.parseIsolatedJSDocComment(s.text,n,o);if(r&&r.jsDoc)return r.jsDoc.parent=e,void function(e){var t=e.pos;if(e.tags)for(var n=0,o=e.tags;n<o.length;n++){var r=o[n];switch(r.pos!==t&&p(t,r.pos-t),u(r.atToken.pos,r.atToken.end-r.atToken.pos,10),u(r.tagName.pos,r.tagName.end-r.tagName.pos,18),t=r.tagName.end,r.kind){case 279:i(r);break;case 282:d(r);break;case 281:case 280:y(r.typeExpression)}t=r.end}t!==e.end&&p(t,e.end-t);return;function i(e){e.isNameFirst&&(p(t,e.name.pos-t),u(e.name.pos,e.name.end-e.name.pos,17),t=e.name.end),e.typeExpression&&(p(t,e.typeExpression.pos-t),y(e.typeExpression),t=e.typeExpression.end),e.isNameFirst||(p(t,e.name.pos-t),u(e.name.pos,e.name.end-e.name.pos,17),t=e.name.end)}}(r.jsDoc)}p(n,o)}function p(e,t){u(e,t,1)}function d(e){for(var t=0,n=e.getChildren();t<n.length;t++){y(n[t])}}function _(e,t,n){var o;for(o=t;o<n&&!v.isLineBreak(e.charCodeAt(o));o++);for(u(t,o-t,1),c.setTextPos(o);c.getTextPos()<n;)f()}function f(){var e=c.getTextPos(),t=c.scan(),n=c.getTextPos(),o=m(t);o&&u(e,n-e,o)}function h(e){if(v.isJSDoc(e))return!0;if(v.nodeIsMissing(e))return!0;var t=function(e){switch(e.parent&&e.parent.kind){case 251:if(e.parent.tagName===e)return 19;break;case 252:if(e.parent.tagName===e)return 20;break;case 250:if(e.parent.tagName===e)return 21;break;case 253:if(e.parent.name===e)return 22}return}(e);if(!v.isToken(e)&&10!==e.kind&&void 0===t)return!1;var n=10===e.kind?e.pos:function(e){for(l.setTextPos(e.pos);;){var t=l.getTextPos();if(!v.couldStartTrivia(s.text,t))return t;var n=l.scan(),o=l.getTextPos(),r=o-t;if(!v.isTrivia(n))return t;if(4!==n&&5!==n)if(v.isComment(n))g(e,n,t,r),l.setTextPos(o);else if(7===n){var i=s.text,a=i.charCodeAt(t);if(60===a||62===a){u(t,r,1);continue}v.Debug.assert(124===a||61===a),_(i,t,o)}}}(e),o=e.end-n;if(v.Debug.assert(0<=o),0<o){var r=t||m(e.kind,e);r&&u(n,o,r)}return!0}function m(e,t){if(v.isKeyword(e))return 3;if((27===e||29===e)&&t&&v.getTypeArgumentOrTypeParameterList(t.parent))return 10;if(v.isPunctuation(e)){if(t){if(58===e&&(226===t.parent.kind||149===t.parent.kind||146===t.parent.kind||253===t.parent.kind))return 5;if(194===t.parent.kind||192===t.parent.kind||193===t.parent.kind||195===t.parent.kind)return 5}return 10}if(8===e)return 4;if(9===e)return 253===t.parent.kind?24:6;if(12===e)return 6;if(v.isTemplateLiteralKind(e))return 6;if(10===e)return 23;if(71===e){if(t)switch(t.parent.kind){case 229:return t.parent.name===t?11:void 0;case 145:return t.parent.name===t?15:void 0;case 230:return t.parent.name===t?13:void 0;case 232:return t.parent.name===t?12:void 0;case 233:return t.parent.name===t?14:void 0;case 146:return t.parent.name===t?v.isThisIdentifier(t)?3:17:void 0}return 2}}function y(e){if(e&&v.decodedTextSpanIntersectsWith(i,a,e.pos,e.getFullWidth())){b(r,e.kind);for(var t=0,n=e.getChildren(s);t<n.length;t++){var o=n[t];h(o)||y(o)}}}}v.createClassifier=function(){var p=v.createScanner(5,!1),d=[];d[71]=!0,d[9]=!0,d[8]=!0,d[12]=!0,d[99]=!0,d[43]=!0,d[44]=!0,d[20]=!0,d[22]=!0,d[18]=!0,d[101]=!0,d[86]=!0;var _=[];function g(e){switch(e){case 1:return v.TokenClass.Comment;case 3:return v.TokenClass.Keyword;case 4:return v.TokenClass.NumberLiteral;case 5:return v.TokenClass.Operator;case 6:return v.TokenClass.StringLiteral;case 8:return v.TokenClass.Whitespace;case 10:return v.TokenClass.Punctuation;case 2:case 11:case 12:case 13:case 14:case 15:case 16:case 9:case 17:default:return v.TokenClass.Identifier}}function o(a,e,t){for(var s=0,l=0,n=0;0<_.length;)_.pop();switch(e){case 3:a='"\\\n'+a,s=3;break;case 2:a="'\\\n"+a,s=3;break;case 1:a="/*\n"+a,s=3;break;case 4:a="`\n"+a,s=2;break;case 5:a="}\n"+a,s=2;case 6:_.push(14)}p.setText(a);var o,r,c={endOfLineState:0,spans:[]},i=0;do{if(l=p.scan(),!v.isTrivia(l)){if(41!==l&&63!==l||d[n]){if(23===n&&f(l))l=71;else if(f(n)&&f(l)&&(o=n,r=l,v.isAccessibilityModifier(o)&&125!==r&&135!==r&&123!==r&&115!==r))l=71;else if(71===n&&27===l)i++;else if(29===l&&0<i)i--;else if(119===l||136===l||133===l||122===l||137===l)0<i&&!t&&(l=71);else if(14===l)_.push(l);else if(17===l)0<_.length&&_.push(l);else if(18===l&&0<_.length){var u=v.lastOrUndefined(_);14===u?16===(l=p.reScanTemplateToken())?_.pop():v.Debug.assertEqual(l,15,"Should have been a template middle."):(v.Debug.assertEqual(u,17,"Should have been an open brace"),_.pop())}}else 12===p.reScanSlashToken()&&(l=12);n=l}g()}while(1!==l);return c;function g(){var e=p.getTokenPos(),t=p.getTextPos();if(function(e,t,n){if(8!==n){0===e&&0<s&&(e+=s);var o=(t-=s)-(e-=s);0<o&&(c.spans.push(e),c.spans.push(o),c.spans.push(n))}}(e,t,function(e){if(f(e))return 3;if(function(e){switch(e){case 39:case 41:case 42:case 37:case 38:case 45:case 46:case 47:case 27:case 29:case 30:case 31:case 93:case 92:case 118:case 32:case 33:case 34:case 35:case 48:case 50:case 49:case 53:case 54:case 69:case 68:case 70:case 65:case 66:case 67:case 59:case 60:case 61:case 63:case 64:case 58:case 26:return!0;default:return!1}}(e)||function(e){switch(e){case 37:case 38:case 52:case 51:case 43:case 44:return!0;default:return!1}}(e))return 5;if(17<=e&&e<=70)return 10;switch(e){case 8:return 4;case 9:return 6;case 12:return 7;case 7:case 3:case 2:return 1;case 5:case 4:return 8;case 71:default:return v.isTemplateLiteralKind(e)?6:2}}(l)),t>=a.length)if(9===l){var n=p.getTokenText();if(p.isUnterminated()){for(var o=n.length-1,r=0;92===n.charCodeAt(o-r);)r++;if(1&r){var i=n.charCodeAt(0);c.endOfLineState=34===i?3:2}}}else 3===l?p.isUnterminated()&&(c.endOfLineState=1):v.isTemplateLiteralKind(l)?p.isUnterminated()&&(16===l?c.endOfLineState=5:13===l?c.endOfLineState=4:v.Debug.fail("Only 'NoSubstitutionTemplateLiteral's and 'TemplateTail's can be unterminated; got SyntaxKind #"+l)):0<_.length&&14===v.lastOrUndefined(_)&&(c.endOfLineState=6)}}function f(e){return 72<=e&&e<=142}return{getClassificationsForLine:function(e,t,n){return function(e,t){for(var n=[],o=e.spans,r=0,i=0;i<o.length;i+=3){var a=o[i],s=o[i+1],l=o[i+2];if(0<=r){var c=a-r;0<c&&n.push({length:c,classification:v.TokenClass.Whitespace})}n.push({length:s,classification:g(l)}),r=a+s}var u=t.length-r;return 0<u&&n.push({length:u,classification:v.TokenClass.Whitespace}),{entries:n,finalLexState:e.endOfLineState}}(o(e,t,n),e)},getEncodedLexicalClassifications:o}},v.getSemanticClassifications=function(e,t,n,o,r){return a(i(e,t,n,o,r))},v.getEncodedSemanticClassifications=i,v.getSyntacticClassifications=function(e,t,n){return a(o(e,t,n))},v.getEncodedSyntacticClassifications=o}(ts||(ts={})),function(O){var e;(function(e){function E(e,t,n,o,r,i,a,s){void 0===s&&(s=[]),void 0===e&&(e=""),e=O.normalizeSlashes(e),""===(e=O.getDirectoryPath(e))&&(e="."+O.directorySeparator),e=O.ensureTrailingDirectorySeparator(e);var l=T(O.isRootedDiskPath(e)?e:O.combinePaths(t,e)),c=O.getDirectoryPath(l),u=!(i.useCaseSensitiveFileNames&&i.useCaseSensitiveFileNames());if(N(i,c)){var g=I(i,c,n,void 0,["./*"]);if(g){for(var p=O.createMap(),d=0,_=g;d<_.length;d++){var f=_[d];if(f=O.normalizePath(f),!a||0!==O.comparePaths(f,a,t,u)){var h=o?O.getBaseFileName(f):O.removeFileExtension(O.getBaseFileName(f));p.get(h)||p.set(h,!0)}}O.forEachKey(p,function(e){s.push(A(e,"script",r))})}var m=B(i,c);if(m)for(var y=0,v=m;y<v.length;y++){var b=v[y],k=O.getBaseFileName(O.normalizePath(b));s.push(A(k,"directory",r))}}return s}function S(e,t,n,o,r){if(r.readDirectory){var i=O.hasZeroOrOneAsteriskCharacter(n)?O.tryParsePattern(n):void 0;if(i){var a=T(i.prefix),s=O.getDirectoryPath(a),l=O.getBaseFileName(a),c=O.stringContains(e,O.directorySeparator),u=c?O.combinePaths(s,l+O.getDirectoryPath(e)):s,g=O.normalizePath(i.suffix),p=O.combinePaths(t,u),d=c?p:O.ensureTrailingDirectorySeparator(p)+l,_=I(r,p,o,void 0,[g?"**/*":"./*"]);if(_){for(var f=[],h=0,m=_;h<m.length;h++){var y=m[h],v=O.normalizePath(y);if(O.endsWith(v,g)&&O.startsWith(v,d)){var b=d.length,k=v.length-b-g.length;f.push(O.removeFileExtension(v.substr(b,k)))}}return f}}}}function C(e,t,n,o,r){if(void 0===r&&(r=[]),t.types)for(var i=0,a=t.types;i<a.length;i++){var s=a[i];r.push(A(s,"external module name",o))}else if(e.getDirectories){var l=void 0;try{l=O.getEffectiveTypeRoots(t,e)}catch(e){}if(l)for(var c=0,u=l;c<u.length;c++)_(e,u[c],o,r)}if(e.getDirectories)for(var g=0,p=x(n,e);g<p.length;g++){var d=p[g];_(e,O.combinePaths(O.getDirectoryPath(d),"node_modules/@types"),o,r)}return r}function _(e,t,n,o){if(e.getDirectories&&N(e,t)){var r=B(e,t);if(r)for(var i=0,a=r;i<a.length;i++){var s=a[i];s=O.normalizePath(s),o.push(A(O.getBaseFileName(s),"external module name",n))}}}function x(e,o){for(var t,n=[];t=O.findConfigFile(e,function(e){return n=e,w(t=o,t.fileExists,n);var t,n},"package.json");){n.push(t),e=O.getDirectoryPath(t);var r=O.getDirectoryPath(e);if(e===r)break;e=r}return n}function A(e,t,n){return{name:e,kind:t,kindModifiers:"",sortText:e,replacementSpan:n}}function h(e,t){var n=e.lastIndexOf(O.directorySeparator),o=-1!==n?n+1:0;return{start:t+o,length:e.length-o}}function T(e){return O.hasTrailingDirectorySeparator(e)?O.ensureTrailingDirectorySeparator(O.normalizePath(e)):O.normalizePath(e)}e.getStringLiteralCompletionEntriesFromModuleNames=function(e,t,n,o){var r,i=O.normalizeSlashes(e.text),a=e.getSourceFile().path,s=O.getDirectoryPath(a),l=h(e.text,e.getStart()+1);if(function(e){if(e&&2<=e.length&&46===e.charCodeAt(0)){var t=3<=e.length&&46===e.charCodeAt(1)?2:1,n=e.charCodeAt(t);return 47===n||92===n}return!1}(i)||O.isRootedDiskPath(i)){var c=O.getSupportedExtensions(t);r=t.rootDirs?function(e,t,n,o,r,i,a,s,l){for(var c=a.project||s.getCurrentDirectory(),u=!(s.useCaseSensitiveFileNames&&s.useCaseSensitiveFileNames()),g=function(e,t,n,o){e=O.map(e,function(e){return O.normalizePath(O.isRootedDiskPath(e)?e:O.combinePaths(t,e))});var r=O.forEach(e,function(e){return O.containsPath(e,n,t,o)?n.substr(e.length):void 0});return O.deduplicate(O.map(e,function(e){return O.combinePaths(e,r)}))}(e,c,n,u),p=[],d=0,_=g;d<_.length;d++){var f=_[d];E(t,f,o,r,i,s,l,p)}return p}(t.rootDirs,i,s,c,!1,l,t,n,a):E(i,s,c,!1,l,n,a)}else r=function(e,t,n,o,r,i){var a,s=o.baseUrl,l=o.paths;if(s){var c=O.getSupportedExtensions(o),u=o.project||r.getCurrentDirectory(),g=O.isRootedDiskPath(s)?s:O.combinePaths(u,s);if(a=E(e,O.normalizePath(g),c,!1,n,r),l)for(var p in l)if(l.hasOwnProperty(p))if("*"===p){if(l[p])for(var d=0,_=l[p];d<_.length;d++)for(var f=_[d],h=0,m=S(e,s,f,c,r);h<m.length;h++){var y=m[h];a.push(A(y,"external module name",n))}}else if(O.startsWith(p,e)){var v=l[p]&&1===l[p].length&&l[p][0];v&&a.push(A(p,"external module name",n))}}else a=[];C(r,o,t,n,a);for(var b=0,k=function(t,e,n,o,r){var i=O.stringContains(t,O.directorySeparator),a=i?t.substr(0,t.lastIndexOf(O.directorySeparator)):void 0,s=O.map(o.getAmbientModules(),function(e){return O.stripQuotes(e.name)}),l=O.filter(s,function(e){return O.startsWith(e,t)});if(i){var c=O.ensureTrailingDirectorySeparator(a);l=O.map(l,function(e){return O.removePrefix(e,c)})}if(!n.moduleResolution||n.moduleResolution===O.ModuleResolutionKind.NodeJs)for(var u=0,g=function(r,e){var t=[];if(r.readFile&&r.fileExists)for(var n=0,o=x(e,r);n<o.length;n++){var i=o[n],a=h(i);if(!a)return;for(var s=O.combinePaths(O.getDirectoryPath(i),"node_modules"),l=[],c=0,u=D;c<u.length;c++){var g=u[c];m(a[g],l)}for(var p=0,d=l;p<d.length;p++){var _=d[p],f=O.combinePaths(s,_);t.push({moduleName:_,moduleDir:f})}}return t;function h(e){try{var t=(o=e,w(n=r,n.readFile,o));return t?JSON.parse(t):void 0}catch(e){return}var n,o}function m(e,t){if(e)for(var n in e)e.hasOwnProperty(n)&&!O.startsWith(n,"@types/")&&t.push(n)}}(r,e);u<g.length;u++){var p=g[u];if(i){if(O.startsWith(p.moduleName,a)){var d=I(r,p.moduleDir,O.supportedTypeScriptExtensions,void 0,["./*"]);if(d)for(var _=0,f=d;_<f.length;_++){var h=f[_];h=O.normalizePath(h);var m=O.removeFileExtension(O.getBaseFileName(h));l.push(m)}}}else l.push(p.moduleName)}return O.deduplicate(l)}(e,t,o,i,r);b<k.length;b++){var T=k[b];a.push(A(T,"external module name",n))}return a}(i,s,l,t,n,o);return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!0,entries:r}},e.getTripleSlashReferenceCompletion=function(e,t,n,o){var r=O.getTokenAtPosition(e,t,!1);if(r){var i=O.getLeadingCommentRanges(e.text,r.pos);if(i&&i.length){var a=O.forEach(i,function(e){return t>=e.pos&&t<=e.end&&e});if(a){var s={isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!0,entries:[]},l=e.text.substr(a.pos,t-a.pos),c=m.exec(l);if(c){var u=c[1],g=c[2],p=c[3],d=O.getDirectoryPath(e.path);if("path"===g){var _=h(p,a.pos+u.length);s.entries=E(p,d,O.getSupportedExtensions(n),!0,_,o,e.path)}else{var f={start:a.pos+u.length,length:c[0].length-u.length};s.entries=C(o,n,d,f)}}return s}}}};var m=/^(\/\/\/\s*<reference\s+(path|types)\s*=\s*(?:'|"))([^\3"]*)$/,D=["dependencies","devDependencies","peerDependencies","optionalDependencies"];function B(e,t){return w(e,e.getDirectories,t)}function I(e,t,n,o,r){return w(e,e.readDirectory,t,n,o,r)}function N(e,t){try{return O.directoryProbablyExists(t,e)}catch(e){}}function w(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];try{return t&&t.apply(e,n)}catch(e){}}})((e=O.Completions||(O.Completions={})).PathCompletions||(e.PathCompletions={}))}(ts||(ts={})),function(X){!function(S){var e,t;function m(e,t,n,o,r,i,a){var s=h(e,r,n,i);if(s)return{name:s,kind:X.SymbolDisplay.getSymbolKind(o,e,t),kindModifiers:X.SymbolDisplay.getSymbolModifiers(e),sortText:"0",source:f(a),hasAction:void 0!==a||void 0}}function f(e){return e&&X.stripQuotes(e.moduleSymbol.name)}function C(e,t,n,o,r,i,a,s,l){var c=X.timestamp(),u=X.createMap();if(e)for(var g=0,p=e;g<p.length;g++){var d=p[g],_=l?l[X.getSymbolId(d)]:void 0,f=m(d,n,o,r,i,s,_);if(f){var h=f.name;u.has(h)||(_||void 0===d.parent&&!X.some(d.declarations,function(e){return e.getSourceFile()===n.getSourceFile()})||u.set(h,!0),t.push(f))}}return a("getCompletionsAtPosition: getCompletionEntriesFromSymbols: "+(X.timestamp()-c)),u}function x(e,t){if(e){var n=[];if(A(e,n,t),n.length)return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!1,entries:n}}}function A(e,t,n,o){if(void 0===o&&(o=X.createMap()),e&&16384&e.flags&&(e=n.getBaseConstraintOfType(e)),e)if(65536&e.flags)for(var r=0,i=e.types;r<i.length;r++){A(i[r],t,n,o)}else if(32&e.flags&&!(256&e.flags)){var a=e.value;o.has(a)||(o.set(a,!0),t.push({name:a,kindModifiers:"",kind:"var",sortText:"0"}))}}function k(e,t,n,o,r,i,a){var s=i.name,l=i.source,c=D(e,t,o,r,a);if(c){var u=c.symbols,g=c.location,p=c.allowStringLiteral,d=c.symbolToOriginInfoMap,_=X.find(u,function(e){return h(e,n.target,!1,p)===s&&f(d[X.getSymbolId(e)])===l});return _&&{symbol:_,location:g,symbolToOriginInfoMap:d}}}function D(g,e,p,d,_){var t,a=X.isSourceFileJavaScript(p),n=X.timestamp(),o=X.getTokenAtPosition(p,d,!1);e("getCompletionData: Get current token: "+(X.timestamp()-n)),n=X.timestamp();var r=X.isInComment(p,d,o);e("getCompletionData: Is inside comment: "+(X.timestamp()-n));var f=!1;if(r){if(X.hasDocComment(p,d))if(64===p.text.charCodeAt(d-1))t={kind:"JsDocTagName"};else{var i=X.getLineStartPositionForPosition(d,p);p.text.substring(i,d).match(/[^\*|\s|(/\*\*)]/)||(t={kind:"JsDocTag"})}var s=function(e,t){var n=function(e){if(!X.isToken(e))return e;switch(e.kind){case 104:case 110:case 76:return e.parent.parent;default:return e.parent}}(e).jsDoc;if(!n)return;for(var o=0,r=n;o<r.length;o++){var i=r[o],a=i.pos,s=i.end,l=i.tags;if(!(!l||t<a||s<t))for(var c=l.length-1;0<=c;c--){var u=l[c];if(t>=u.pos)return u}}}(o,d);if(s&&(s.tagName.pos<=d&&d<=s.tagName.end&&(t={kind:"JsDocTagName"}),function(e){switch(e.kind){case 279:case 284:case 280:case 281:case 283:return!0}}(s)&&s.typeExpression&&267===s.typeExpression.kind&&((o=X.getTokenAtPosition(p,d,!0))&&(X.isDeclarationName(o)||284===o.parent.kind&&o.parent.name===o)||(f=W(s.typeExpression))),X.isJSDocParameterTag(s)&&(X.nodeIsMissing(s.name)||s.name.pos<=d&&d<=s.name.end)&&(t={kind:"JsDocParameterName",tag:s})),t)return{symbols:void 0,isGlobalCompletion:!1,isMemberCompletion:!1,allowStringLiteral:!1,isNewIdentifierLocation:!1,location:void 0,isRightOfDot:!1,request:t,keywordFilters:0,symbolToOriginInfoMap:void 0};if(!f)return void e("Returning an empty list because completion was inside a regular comment or plain text part of a JsDoc comment.")}n=X.timestamp();var h=X.findPrecedingToken(d,p,void 0,f);e("getCompletionData: Get previous token 1: "+(X.timestamp()-n));var m=h;if(m&&d<=m.end&&X.isWord(m.kind)){var l=X.timestamp();m=X.findPrecedingToken(m.getFullStart(),p,void 0,f),e("getCompletionData: Get previous token 2: "+(X.timestamp()-l))}var c,u,y,v=o,b=!1,k=!1,T=!1,E=X.getTouchingPropertyName(p,d,f);if(m){if(c=m,u=X.timestamp(),y=function(e){if(9===e.kind||12===e.kind||X.isTemplateLiteralKind(e.kind)){var t=e.getStart(),n=e.getEnd();if(t<d&&d<n)return!0;if(d===n)return!!e.isUnterminated||12===e.kind}return!1}(c)||function(e){var t=e.parent.kind;switch(e.kind){case 26:return 226===t||227===t||208===t||232===t||V(t)||230===t||175===t||231===t||X.isClassLike(e.parent)&&e.parent.typeParameters&&e.parent.typeParameters.end>=e.pos;case 23:return 175===t;case 56:return 176===t;case 21:return 175===t;case 19:return 260===t||V(t);case 17:return 232===t||230===t||163===t;case 25:return 148===t&&e.parent&&e.parent.parent&&(230===e.parent.parent.kind||163===e.parent.parent.kind);case 27:return 229===t||199===t||230===t||231===t||X.isFunctionLikeKind(t);case 115:return 149===t&&!X.isClassLike(e.parent.parent);case 24:return 146===t||e.parent&&e.parent.parent&&175===e.parent.parent.kind;case 114:case 112:case 113:return 146===t&&!X.isConstructorDeclaration(e.parent.parent);case 118:return 242===t||246===t||240===t;case 125:case 135:if(H(e))return!1;case 75:case 83:case 109:case 89:case 104:case 91:case 110:case 76:case 116:case 138:return!0}if(z(e.getText())&&H(e))return!1;if(G(e)&&(!X.isIdentifier(e)||Y(e.getText())||W(e)))return!1;switch(e.getText()){case"abstract":case"async":case"class":case"const":case"declare":case"enum":case"function":case"interface":case"let":case"private":case"protected":case"public":case"static":case"var":case"yield":return!0}return X.isDeclarationName(e)&&!X.isJsxAttribute(e.parent)}(c)||function(e){if(8===e.kind){var t=e.getFullText();return"."===t.charAt(t.length-1)}return!1}(c)||function(e){if(10===e.kind)return!0;if(29===e.kind&&e.parent){if(251===e.parent.kind)return!0;if(252===e.parent.kind||250===e.parent.kind)return e.parent.parent&&249===e.parent.parent.kind}return!1}(c),e("getCompletionsAtPosition: isCompletionListBlocker: "+(X.timestamp()-u)),y)return void e("Returning an empty list because completion was requested in an invalid position.");var S=m.parent;if(23===m.kind)if(179===S.kind)v=m.parent.expression,b=!0;else{if(143!==S.kind)return;v=m.parent.left,b=!0}else if(1===p.languageVariant)switch(S&&179===S.kind&&(S=(m=S).parent),S.kind){case 252:41===m.kind&&(T=!0,E=m);break;case 194:if(!(32768&S.left.flags))break;case 250:case 249:case 251:27===m.kind&&(k=!0,E=m)}}var C,x,A=X.timestamp(),D=!1,B=!1,I=0,N=[],w=[];if(b)!function(){C=!0,x=D=!1;var e=f||X.isPartOfTypeNode(v.parent),t=X.isInRightSideOfInternalImportEqualsDeclaration(v);if(X.isEntityName(v)){var n=g.getSymbolAtLocation(v);if(n&&1920&(n=X.skipAlias(n,g)).flags){for(var o=g.getExportsOfModule(n),r=function(e){return g.isValidPropertyAccess(v.parent,e.name)},i=function(e){return F(e)},a=t?function(e){return i(e)||r(e)}:e?i:r,s=0,l=o;s<l.length;s++){var c=l[s];a(c)&&N.push(c)}return!e&&n.declarations.some(function(e){return 265!==e.kind&&233!==e.kind&&232!==e.kind})&&P(g.getTypeOfSymbolAtLocation(n,v))}}e||P(g.getTypeAtLocation(v))}();else if(k){var O=g.getJsxIntrinsicTagNames();N=M()?O.concat(N.filter(function(e){return!!(2204607&e.flags)})):O,x=!(C=!0)}else if(T){var R=m.parent.parent.openingElement.tagName,L=g.getSymbolAtLocation(R);g.isUnknownSymbol(L)||(N=[L]),x=!(C=!0)}else if(!M())return;return e("getCompletionData: Semantic work: "+(X.timestamp()-A)),{symbols:N,isGlobalCompletion:D,isMemberCompletion:C,allowStringLiteral:B,isNewIdentifierLocation:x,location:E,isRightOfDot:b||k,request:t,keywordFilters:I,symbolToOriginInfoMap:w};function P(e){for(var t=0,n=e.getApparentProperties();t<n.length;t++){var o=n[t];g.isValidPropertyAccess(v.parent,o.name)&&N.push(o)}if(a&&65536&e.flags)for(var r=0,i=e.types;r<i.length;r++){P(i[r])}}function M(){var e,t,n,o;if(e=function(e){if(e)switch(e.kind){case 17:case 26:var t=e.parent;if(X.isObjectLiteralExpression(t)||X.isObjectBindingPattern(t))return t}return}(m))return function(e){var t,n;if(B=C=!0,178===e.kind){x=!0;var o=g.getContextualType(e);if(!o)return!1;t=function(e,t){if(!(65536&e.flags))return t.getPropertiesOfType(e);var n=e.types.filter(function(e){return!(8190&e.flags||t.isArrayLikeType(e))});return t.getAllPossiblePropertiesOfTypes(n)}(o,g),n=e.properties}else{X.Debug.assert(174===e.kind),x=!1;var r=X.getRootDeclaration(e.parent);if(!X.isVariableLike(r))throw X.Debug.fail("Root declaration is not variable-like.");var i=r.initializer||r.type||216===r.parent.parent.kind;if(i||146!==r.kind||(X.isExpression(r.parent)?i=!!g.getContextualType(r.parent):151!==r.parent.kind&&154!==r.parent.kind||(i=X.isExpression(r.parent.parent)&&!!g.getContextualType(r.parent.parent))),i){var o=g.getTypeAtLocation(e);if(!o)return!1;t=g.getPropertiesOfType(o).filter(function(e){return!(24&X.getDeclarationModifierFlagsFromSymbol(e))}),n=e.elements}}t&&0<t.length&&(N=function(e,t){if(!t||0===t.length)return e;for(var n=X.createUnderscoreEscapedMap(),o=0,r=t;o<r.length;o++){var i=r[o];if((261===i.kind||262===i.kind||176===i.kind||151===i.kind||153===i.kind||154===i.kind)&&!W(i)){var a=void 0;if(176===i.kind&&i.propertyName)71===i.propertyName.kind&&(a=i.propertyName.escapedText);else{var s=X.getNameOfDeclaration(i);a=X.getEscapedTextOfIdentifierOrLiteral(s)}n.set(a,!0)}}return X.filter(e,function(e){return!n.get(e.escapedName)})}(t,n));return!0}(e);if(t=function(e){if(e)switch(e.kind){case 17:case 26:switch(e.parent.kind){case 241:case 245:return e.parent}}return}(m))return function(e){var t=241===e.kind?238:244,n=X.getAncestor(e,t).moduleSpecifier;if(!n)return!1;C=!0,x=!1;var o=g.getSymbolAtLocation(n);if(!o)return N=X.emptyArray,!0;var r=g.getExportsAndPropertiesOfModule(o);return N=function(e,t){for(var n=X.createUnderscoreEscapedMap(),o=0,r=t;o<r.length;o++){var i=r[o];if(!W(i)){var a=i.propertyName||i.name;n.set(a.escapedText,!0)}}return 0===n.size?X.filter(e,function(e){return"default"!==e.escapedName}):X.filter(e,function(e){return"default"!==e.escapedName&&!n.get(e.escapedName)})}(r,e.elements),!0}(t);if(function(e){if(e)switch(e.kind){case 19:case 26:return X.isConstructorDeclaration(e.parent)&&e.parent;default:if(G(e))return e.parent.parent}return}(m))return x=!(C=!(I=2));if(n=function(e){if(e)switch(e.kind){case 17:case 26:if(X.isClassLike(e.parent))return e.parent;break;case 25:case 18:if(X.isClassLike(E))return E;if(H(E)&&E.parent.name===E)return E.parent.parent;break;default:if(H(e)&&(K(e.kind)||z(e.getText())))return e.parent.parent}if(E&&286===E.kind&&X.isClassLike(E.parent))return E.parent;return}(m))return function(e){x=C=!0,I=1;var t=X.getClassExtendsHeritageClauseElement(e),n=X.getClassImplementsHeritageClauseElements(e);if(t||n){var o=m.parent,r=X.isClassElement(o)&&X.getModifierFlags(o);if(71===m.kind&&!W(m))switch(m.getText()){case"private":r|=8;break;case"static":r|=32}if(!(8&r)){var i=void 0;t&&(i=g.getTypeAtLocation(t),32&r&&(i=g.getTypeOfSymbolAtLocation(i.symbol,e)));var a=32&r?X.emptyArray:X.flatMap(n||X.emptyArray,function(e){return g.getPropertiesOfType(g.getTypeAtLocation(e))});N=function(e,t,n,o){for(var s=X.createUnderscoreEscapedMap(),r=0,i=n;r<i.length;r++){var a=i[r];if((149===a.kind||151===a.kind||153===a.kind||154===a.kind)&&(!W(a)&&!X.hasModifier(a,8))){var l=X.hasModifier(a,32),c=!!(32&o);if(!(l&&!c||!l&&c)){var u=X.getPropertyNameForPropertyNameNode(a.name);u&&s.set(u,!0)}}}var g=[];return p(e,8),p(t,24),g;function p(e,t){for(var n=0,o=e;n<o.length;n++){var r=o[n];i=r,a=t,s.get(i.escapedName)||!i.getDeclarations()||X.getDeclarationModifierFlagsFromSymbol(i)&a||g.push(r)}var i,a}}(i?g.getPropertiesOfType(i):X.emptyArray,a,e.members,r)}}}(n),!0;if(o=function(e){if(e){var t=e.parent;switch(e.kind){case 28:case 41:case 71:case 179:case 254:case 253:case 255:if(t&&(250===t.kind||251===t.kind))return t;if(253===t.kind)return t.parent.parent;break;case 9:if(t&&(253===t.kind||255===t.kind))return t.parent.parent;break;case 18:if(t&&256===t.kind&&t.parent&&253===t.parent.kind)return t.parent.parent.parent;if(t&&255===t.kind)return t.parent.parent}}return}(m)){var r=void 0;if((250===o.kind||251===o.kind)&&(r=g.getAllAttributesTypeFromJsxOpeningLikeElement(o)))return N=function(e,t){for(var n=X.createUnderscoreEscapedMap(),o=0,r=t;o<r.length;o++){var i=r[o];W(i)||253===i.kind&&n.set(i.name.escapedText,!0)}return X.filter(e,function(e){return!n.get(e.escapedName)})}(g.getPropertiesOfType(r),o.attributes.properties),!(x=!(C=!0))}C=!1,x=function(e){if(e){var t=e.parent.kind;switch(e.kind){case 26:return 181===t||152===t||182===t||177===t||194===t||160===t;case 19:return 181===t||152===t||182===t||185===t||168===t;case 21:return 177===t||157===t||144===t;case 128:case 129:return!0;case 23:return 233===t;case 17:return 229===t;case 58:return 226===t||194===t;case 14:return 196===t;case 15:return 205===t;case 114:case 112:case 113:return 149===t}switch(e.getText()){case"public":case"protected":case"private":return!0}}return!1}(m),h!==m&&X.Debug.assert(!!h,"Expected 'contextToken' to be defined when different from 'previousToken'.");var i=h!==m?h.getStart():d,a=function(e,t,n){var o=e;for(;o&&!X.positionBelongsToNode(o,t,n);)o=o.parent;return o}(m,i,p)||p;a&&(D=265===a.kind||196===a.kind||256===a.kind||X.isStatement(a));var s,l,c,u;return N=g.getSymbolsInScope(a,2998271),s=N,l=h&&X.isIdentifier(h)?h.text:"",c=l.toLowerCase(),X.codefix.forEachExternalModule(g,_,function(e){if(e!==p.symbol)for(var t=0,n=g.getExportsOfModule(e);t<n.length;t++){var o=n[t],r=o.name,i="default"===r;if(i){var a=X.getLocalSymbolForExportDefault(o);a&&(r=(o=a).name)}o.declarations&&o.declarations.some(function(e){return X.isExportSpecifier(e)&&!!e.parent.parent.moduleSpecifier})||U(r.toLowerCase(),c)&&(s.push(o),w[X.getSymbolId(o)]={moduleSymbol:e,isDefaultExport:i})}}),u=N,X.filterMutate(u,function(e){if(!X.isSourceFile(E)){if(X.isExportAssignment(E.parent))return!0;if(e&&2097152&e.flags&&(e=g.getAliasedSymbol(e)),X.isInRightSideOfInternalImportEqualsDeclaration(E))return!!(1920&e.flags);if(f||(!(t=m)||103!==t.kind||162!==t.parent.kind)&&(X.isPartOfTypeNode(E)||function(e){if(e){var t=e.parent.kind;switch(e.kind){case 56:return 149===t||148===t||146===t||226===t||X.isFunctionLikeKind(t);case 58:return 231===t;case 118:return 202===t}}}(m)))return F(e)}var t;return!!(107455&X.getCombinedLocalAndExportSymbolFlags(e))}),!0}function F(e){if(e=e.exportSymbol||e,793064&(e=X.skipAlias(e,g)).flags)return!0;if(1536&e.flags){var t=g.getExportsOfModule(e);return X.forEach(t,F)}}function U(e,t){if(0===t.length)return!0;for(var n=0,o=0;o<e.length;o++)if(e.charCodeAt(o)===t.charCodeAt(n)&&++n===t.length)return!0;return!1}function H(e){return X.isClassElement(e.parent)&&X.isClassLike(e.parent.parent)}function G(e){return e.parent&&(t=e.parent,X.isParameter(t)&&X.isConstructorDeclaration(t.parent))&&(j(e.kind)||X.isDeclarationName(e));var t}function V(e){return X.isFunctionLikeKind(e)&&152!==e}function W(e){return e.getStart()<=d&&d<=e.getEnd()}}function h(e,t,n,o){var r=e.name;if(r){if(1920&e.flags){var i=r.charCodeAt(0);if(X.isSingleOrDoubleQuote(i))return}return B(r,t,n,o)}}function B(e,t,n,o){return n&&!X.isIdentifierText(e,t)?o?JSON.stringify(e):void 0:e}(t=e||(e={}))[t.None=0]="None",t[t.ClassElementKeywords=1]="ClassElementKeywords",t[t.ConstructorParameterKeywords=2]="ConstructorParameterKeywords",S.getCompletionsAtPosition=function(e,t,n,o,r,i,a){if(X.isInReferenceComment(r,i))return S.PathCompletions.getTripleSlashReferenceCompletion(r,i,o,e);if(X.isInString(r,i))return function(e,t,n,o,r,i){var a=X.findPrecedingToken(t,e);if(a&&9===a.kind){if(261===a.parent.kind&&178===a.parent.parent.kind&&a.parent.name===a)return function(e,t,n,o){var r=t.getContextualType(e.parent),i=[];if(r&&(C(r.getApparentProperties(),i,e,!1,t,n,o,!0),i.length))return{isGlobalCompletion:!1,isMemberCompletion:!0,isNewIdentifierLocation:!0,entries:i}}(a.parent,n,o.target,i);if(X.isElementAccessExpression(a.parent)&&a.parent.argumentExpression===a)return function(e,t,n,o){var r=t.getTypeAtLocation(e.expression),i=[];if(r&&(C(r.getApparentProperties(),i,e,!1,t,n,o,!0),i.length))return{isGlobalCompletion:!1,isMemberCompletion:!0,isNewIdentifierLocation:!0,entries:i}}(a.parent,n,o.target,i);if(238===a.parent.kind||X.isExpressionOfExternalModuleImportEqualsDeclaration(a)||X.isRequireCall(a.parent,!1))return S.PathCompletions.getStringLiteralCompletionEntriesFromModuleNames(a,o,r,n);if(s=a.parent,X.isBinaryExpression(s)&&(32===(l=s.operatorToken.kind)||33===l||34===l||35===l))return x(n.getTypeAtLocation(a.parent.left===a?a.parent.right:a.parent.left),n);if(X.isCaseOrDefaultClause(a.parent))return x(n.getTypeAtLocation(a.parent.parent.parent.expression),n);var s,l,c=X.SignatureHelp.getImmediatelyContainingArgumentInfo(a,t,e);return c?function(e,t){var n=[],o=[],r=X.createMap();t.getResolvedSignature(e.invocation,n,e.argumentCount);for(var i=0,a=n;i<a.length;i++){var s=a[i];A(t.getParameterType(s,e.argumentIndex),o,t,r)}if(o.length)return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!0,entries:o}}(c,n):x(n.getContextualType(a),n)}}(r,i,t,o,e,n);var s=D(t,n,r,i,a);if(s){var l=s.symbols,c=s.isGlobalCompletion,u=s.isMemberCompletion,g=s.allowStringLiteral,p=s.isNewIdentifierLocation,d=s.location,_=s.request,f=s.keywordFilters,h=s.symbolToOriginInfoMap;if(1===r.languageVariant&&d&&d.parent&&252===d.parent.kind)return{isGlobalCompletion:!1,isMemberCompletion:!0,isNewIdentifierLocation:!1,entries:[{name:d.parent.parent.openingElement.tagName.getFullText(),kind:"class",kindModifiers:void 0,sortText:"0"}]};if(_)return{isGlobalCompletion:!1,isMemberCompletion:!1,isNewIdentifierLocation:!1,entries:"JsDocTagName"===_.kind?X.JsDoc.getJSDocTagNameCompletions():"JsDocTag"===_.kind?X.JsDoc.getJSDocTagCompletions():X.JsDoc.getJSDocParameterNameCompletions(_.tag)};var m,y,v,b,k,T=[];if(X.isSourceFileJavaScript(r)){var E=C(l,T,d,!0,t,o.target,n,g,h);m=r,y=d.pos,v=E,b=o.target,k=T,X.getNameTable(m).forEach(function(e,t){if(e!==y){var n=X.unescapeLeadingUnderscores(t);if(!v.has(n)){v.set(n,!0);var o=B(n,b,!0,!1);o&&k.push({name:o,kind:"warning",kindModifiers:"",sortText:"1"})}}})}else{if((!l||0===l.length)&&0===f)return;C(l,T,d,!0,t,o.target,n,g,h)}return 0===f&&u||X.addRange(T,I(f)),{isGlobalCompletion:c,isMemberCompletion:u,isNewIdentifierLocation:p,entries:T}}},S.getCompletionEntryDetails=function(e,t,n,o,r,i,a,s,l){var c=i.name,u=i.source,g=k(e,t,n,o,r,i,a);if(g){var p=g.symbol,d=g.location,_=function(e,t,n,o,r,i,a){var s=e[X.getSymbolId(t)];if(s){var l=s.moduleSymbol,c=s.isDefaultExport;return X.codefix.getCodeActionForImport(l,{host:o,checker:n,newLineCharacter:o.getNewLine(),compilerOptions:r,sourceFile:i,rulesProvider:a,symbolName:t.name,getCanonicalFileName:X.createGetCanonicalFileName(!!o.useCaseSensitiveFileNames&&o.useCaseSensitiveFileNames()),symbolToken:void 0,kind:c?1:0})}}(g.symbolToOriginInfoMap,p,e,s,n,o,l),f=X.SymbolDisplay.getSymbolModifiers(p),h=X.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(e,p,o,d,d,7),m=h.displayParts,y=h.documentation,v=h.symbolKind,b=h.tags;return{name:c,kindModifiers:f,kind:v,displayParts:m,documentation:y,tags:b,codeActions:_,source:void 0===u?void 0:[X.textPart(u)]}}if(void 0===u&&X.some(I(0),function(e){return e.name===c}))return{name:c,kind:"keyword",kindModifiers:"",displayParts:[X.displayPart(c,X.SymbolDisplayPartKind.keyword)],documentation:void 0,tags:void 0,codeActions:void 0,source:void 0}},S.getCompletionEntrySymbol=function(e,t,n,o,r,i,a){var s=k(e,t,n,o,r,i,a);return s&&s.symbol};var o=[];function I(e){var t=o[e];return t||(o[e]=function(e){switch(e){case 0:return function(){for(var e=[],t=72;t<=142;t++)e.push({name:X.tokenToString(t),kind:"keyword",kindModifiers:"",sortText:"0"});return e}();case 1:return n(z);case 2:return n(Y)}}(e));function n(t){return X.filter(I(0),function(e){return t(e.name)})}}function K(e){switch(e){case 114:case 113:case 112:case 117:case 115:case 123:case 131:case 125:case 135:case 120:return!0}}function z(e){return K(X.stringToToken(e))}function j(e){switch(e){case 114:case 112:case 113:case 131:return!0}}function Y(e){return j(X.stringToToken(e))}}(X.Completions||(X.Completions={}))}(ts||(ts={})),function(k){!function(e){function d(e,t){return{fileName:t.fileName,textSpan:k.createTextSpanFromNode(e,t),kind:"none"}}function _(e,t){return void 0!==e&&e.kind===t}function f(e){return e&&e.parent}function h(e){var o=[];return function e(t){if(223===t.kind)o.push(t);else if(224===t.kind){var n=t;n.catchClause?e(n.catchClause):e(n.tryBlock),n.finallyBlock&&e(n.finallyBlock)}else k.isFunctionLike(t)||k.forEachChild(t,e)}(e),o}function i(e){var n=[];return function e(t){218===t.kind||217===t.kind?n.push(t):k.isFunctionLike(t)||k.forEachChild(t,e)}(e),n}function a(e,t){var n=m(t);return n&&n===e}function m(e){for(var t=e.parent;t;t=t.parent)switch(t.kind){case 221:if(217===e.kind)continue;case 214:case 215:case 216:case 213:case 212:if(!e.label||n(t,e.label.text))return t;break;default:if(k.isFunctionLike(t))return}}function y(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return!(!t||!k.contains(n,t.kind))&&(e.push(t),!0)}function v(t){var n=[];if(y(n,t.getFirstToken(),88,106,81)&&212===t.kind)for(var e=t.getChildren(),o=e.length-1;0<=o&&!y(n,e[o],106);o--);var r=i(t.statement);return k.forEach(r,function(e){a(t,e)&&y(n,e.getFirstToken(),72,77)}),n}function b(n){var o=[];return y(o,n.getFirstToken(),98),k.forEach(n.caseBlock.clauses,function(e){y(o,e.getFirstToken(),73,79);var t=i(e);k.forEach(t,function(e){a(n,e)&&y(o,e.getFirstToken(),72)})}),o}function n(e,t){for(var n=e.parent;222===n.kind;n=n.parent)if(n.label.escapedText===t)return!0;return!1}(k.DocumentHighlights||(k.DocumentHighlights={})).getDocumentHighlights=function(e,t,n,o,r){var i=k.getTouchingWord(n,o,!0);if(i!==n){if(k.Debug.assert(void 0!==i.parent),k.isJsxOpeningElement(i.parent)&&i.parent.tagName===i||k.isJsxClosingElement(i.parent)){var a=i.parent.parent,s=[a.openingElement,a.closingElement].map(function(e){return d(e.tagName,n)});return[{fileName:n.fileName,highlightSpans:s}]}return l=i,c=e,u=t,g=r,(p=k.FindAllReferences.getReferenceEntriesForNode(l,c,g,u))&&function(e){for(var t=k.createMap(),n=0,o=e;n<o.length;n++){var r=o[n],i=k.FindAllReferences.toHighlightSpan(r),a=i.fileName,s=i.span,l=t.get(a);l||t.set(a,l=[]),l.push(s)}return k.arrayFrom(t.entries(),function(e){var t=e[0],n=e[1];return{fileName:t,highlightSpans:n}})}(p)||function(e,t){var n=function(e,t){var n,o,r;if(e)switch(e.kind){case 90:case 82:if(_(e.parent,211))return function(e,t){for(var n=[];_(e.parent,211)&&e.parent.elseStatement===e;)e=e.parent;for(;e;){var o=e.getChildren();y(n,o[0],90);for(var r=o.length-1;0<=r&&!y(n,o[r],82);r--);if(!_(e.elseStatement,211))break;e=e.elseStatement}for(var i=[],r=0;r<n.length;r++){if(82===n[r].kind&&r<n.length-1){for(var a=n[r],s=n[r+1],l=!0,c=s.getStart()-1;c>=a.end;c--)if(!k.isWhiteSpaceSingleLine(t.text.charCodeAt(c))){l=!1;break}if(l){i.push({fileName:t.fileName,textSpan:k.createTextSpanFromBounds(a.getStart(),s.end),kind:"reference"}),r++;continue}}i.push(d(n[r],t))}return i}(e.parent,t);break;case 96:if(_(e.parent,219))return a(function(e){var t=k.getContainingFunction(e);if(t&&_(t.body,207)){var n=[];return k.forEachReturnStatement(t.body,function(e){y(n,e.getFirstToken(),96)}),k.forEach(h(t.body),function(e){y(n,e.getFirstToken(),100)}),n}}(e.parent));break;case 100:if(_(e.parent,223))return a(function(e){var t=function(e){for(var t=e;t.parent;){var n=t.parent;if(k.isFunctionBlock(n)||265===n.kind)return n;if(224===n.kind){var o=n;if(o.tryBlock===t&&o.catchClause)return t}t=n}}(e);if(t){var n=[];return k.forEach(h(t),function(e){y(n,e.getFirstToken(),100)}),k.isFunctionBlock(t)&&k.forEachReturnStatement(t,function(e){y(n,e.getFirstToken(),96)}),n}}(e.parent));break;case 102:case 74:case 87:var i=74===e.kind?f(f(e)):f(e);if(_(i,224))return a(function(e,t){var n=[];if(y(n,e.getFirstToken(),102),e.catchClause&&y(n,e.catchClause.getFirstToken(),74),e.finallyBlock){var o=k.findChildOfKind(e,87,t);y(n,o,87)}return n}(i,t));break;case 98:if(_(e.parent,221))return a(b(e.parent));break;case 73:case 79:if(_(f(f(f(e))),221))return a(b(e.parent.parent.parent));break;case 72:case 77:if(_(e.parent,218)||_(e.parent,217))return a(function(e){var t=m(e);if(t)switch(t.kind){case 214:case 215:case 216:case 212:case 213:return v(t);case 221:return b(t)}}(e.parent));break;case 88:if(_(e.parent,214)||_(e.parent,215)||_(e.parent,216))return a(v(e.parent));break;case 106:case 81:if(_(e.parent,213)||_(e.parent,212))return a(v(e.parent));break;case 123:if(_(e.parent,152))return a((n=e.parent,o=n.symbol.getDeclarations(),r=[],k.forEach(o,function(e){k.forEach(e.getChildren(),function(e){return y(r,e,123)})}),r));break;case 125:case 135:if(_(e.parent,153)||_(e.parent,154))return a(function(e){var o=[];return t(e.symbol,153),t(e.symbol,154),o;function t(e,t){var n=k.getDeclarationOfKind(e,t);n&&k.forEach(n.getChildren(),function(e){return y(o,e,125,135)})}}(e.parent));break;default:if(k.isModifierKind(e.kind)&&e.parent&&(k.isDeclaration(e.parent)||208===e.parent.kind))return a(function(n,e){if(function(e,t){var n=t.parent;switch(e){case 112:case 113:case 114:switch(n.kind){case 229:case 199:return!0;case 152:return 146===t.kind;default:return!1}case 115:return 229===n.kind||199===n.kind;case 84:case 124:return 234===n.kind||265===n.kind;case 117:return 229===n.kind||229===t.kind;default:return!1}}(n,e)){var o=k.modifierToFlag(n);return k.mapDefined(function(e,t){var n=e.parent;switch(n.kind){case 234:case 265:case 207:case 257:case 258:return 128&t?e.members.concat([e]):n.statements;case 152:return n.parameters.concat(n.parent.members);case 229:case 199:var o=n.members;if(28&t){var r=k.find(n.members,k.isConstructorDeclaration);if(r)return o.concat(r.parameters)}else if(128&t)return o.concat([n]);return o;default:k.Debug.fail("Invalid container kind.")}}(e,o),function(e){if(k.getModifierFlags(e)&o){var t=k.find(e.modifiers,function(e){return e.kind===n});return k.Debug.assert(!!t),t}})}}(e.kind,e.parent))}function a(e){return e&&e.map(function(e){return d(e,t)})}}(e,t);if(n&&0!==n.length)return[{fileName:t.fileName,highlightSpans:n}]}(i,n);var l,c,u,g,p}}}()}(ts||(ts={})),function(p){p.createDocumentRegistry=function(e,i){void 0===i&&(i="");var o=p.createMap(),a=p.createGetCanonicalFileName(!!e);function s(e){return"_"+e.target+"|"+e.module+"|"+e.noResolve+"|"+e.jsx+"|"+e.allowJs+"|"+e.baseUrl+"|"+JSON.stringify(e.typeRoots)+"|"+JSON.stringify(e.rootDirs)+"|"+JSON.stringify(e.paths)}function u(e,t){var n=o.get(e);return!n&&t&&o.set(e,n=p.createMap()),n}function l(e,t,n,o,r,i,a){return g(e,t,n,o,r,i,!0,a)}function c(e,t,n,o,r,i,a){return g(e,t,n,o,r,i,!1,a)}function g(e,t,n,o,r,i,a,s){var l=u(o,!0),c=l.get(t);return c?(c.sourceFile.version!==i&&(c.sourceFile=p.updateLanguageServiceSourceFile(c.sourceFile,r,i,r.getChangeRange(c.sourceFile.scriptSnapshot))),a&&c.languageServiceRefCount++):(c={sourceFile:p.createLanguageServiceSourceFile(e,r,n.target,i,!1,s),languageServiceRefCount:1,owners:[]},l.set(t,c)),c.sourceFile}function n(e,t){var n=u(t,!1);p.Debug.assert(void 0!==n);var o=n.get(e);o.languageServiceRefCount--,p.Debug.assert(0<=o.languageServiceRefCount),0===o.languageServiceRefCount&&n.delete(e)}return{acquireDocument:function(e,t,n,o,r){return l(e,p.toPath(e,i,a),t,s(t),n,o,r)},acquireDocumentWithKey:l,updateDocument:function(e,t,n,o,r){return c(e,p.toPath(e,i,a),t,s(t),n,o,r)},updateDocumentWithKey:c,releaseDocument:function(e,t){return n(p.toPath(e,i,a),s(t))},releaseDocumentWithKey:n,reportStats:function(){var e=p.arrayFrom(o.keys()).filter(function(e){return e&&"_"===e.charAt(0)}).map(function(e){var t=o.get(e),n=[];return t.forEach(function(e,t){n.push({name:t,refCount:e.languageServiceRefCount,references:e.owners.slice(0)})}),n.sort(function(e,t){return t.refCount-e.refCount}),{bucket:e,sourceFiles:n}});return JSON.stringify(e,void 0,2)},getKeyForCompilationSettings:s}}}(ts||(ts={})),function(k){!function(e){var t,n;function v(e,t){return k.forEach(265===e.kind?e.statements:e.body.statements,function(e){return t(e)||r(e)&&k.forEach(e.body&&e.body.statements,t)})}function f(e,o){if(e.externalModuleIndicator||void 0!==e.imports)for(var t=0,n=e.imports;t<n.length;t++){var r=n[t];o(i(r),r)}else v(e,function(e){switch(e.kind){case 244:case 238:(t=e).moduleSpecifier&&9===t.moduleSpecifier.kind&&o(t,t.moduleSpecifier);break;case 237:var t,n=(t=e).moduleReference;248===n.kind&&9===n.expression.kind&&o(t,n.expression)}})}function i(e){var t=e.parent;switch(t.kind){case 181:case 238:case 244:return t;case 248:return t.parent;default:k.Debug.fail("Unexpected module specifier parent: "+t.kind)}}function o(e,t,n){var o=n.getMergedSymbol(e.parent);return k.isExternalModuleSymbol(o)?{exportingModuleSymbol:o,exportKind:t}:void 0}function h(e){return"default"!==e.escapedName?e.escapedName:k.forEach(e.declarations,function(e){var t=k.getNameOfDeclaration(e);return t&&71===t.kind&&t.escapedText})}function b(e){if(181===e.kind)return e.getSourceFile();var t=e.parent;return 265===t.kind?t:(k.Debug.assert(234===t.kind&&r(t.parent)),t.parent)}function r(e){return 233===e.kind&&9===e.name.kind}function m(e){var t=e.moduleReference;return 248===t.kind&&9===t.expression.kind}e.createImportTracker=function(a,s,l){var c=function(e,i,t){for(var a=k.createMap(),n=0,o=e;n<o.length;n++){var r=o[n];t.throwIfCancellationRequested(),f(r,function(e,t){var n=i.getSymbolAtLocation(t);if(n){var o=k.getSymbolId(n).toString(),r=a.get(o);r||a.set(o,r=[]),r.push(e)}})}return a}(a,s,l);return function(e,t,n){var o=function(o,t,e,u,g){var r=e.exportingModuleSymbol,p=e.exportKind,d=k.nodeSeenTracker(),n=k.nodeSeenTracker(),_=[],f=!!r.globalExports,i=f?void 0:[];return function e(t){var n,o=y(t);if(o)for(var r=0,i=o;r<i.length;r++){var a=i[r];if(d(a))switch(g.throwIfCancellationRequested(),a.kind){case 181:if(!f){var s=a.parent;if(2===p&&226===s.kind){var l=s.name;if(71===l.kind){_.push(l);break}}m(a.getSourceFile())}break;case 237:h(a,a.name,k.hasModifier(a,1));break;case 238:var c=a.importClause&&a.importClause.namedBindings;c&&240===c.kind?h(a,c.name):_.push(a);break;case 244:a.exportClause?_.push(a):e((n=a,u.getMergedSymbol(b(n).symbol)))}}}(r),{directImports:_,indirectUsers:function(){if(f)return o;for(var e=0,t=r.declarations;e<t.length;e++){var n=t[e];k.isExternalModuleAugmentation(n)&&m(n)}return i.map(k.getSourceFileOfNode)}()};function h(e,t,n){if(2===p)_.push(e);else if(!f){var o=b(e);k.Debug.assert(265===o.kind||233===o.kind),n||(r=o,i=t,l=(s=u).getSymbolAtLocation(i),v(r,function(e){if(244===e.kind){var t=e,n=t.exportClause,o=t.moduleSpecifier;if(!o&&n)for(var r=0,i=n.elements;r<i.length;r++){var a=i[r];if(s.getExportSpecifierLocalTargetSymbol(a)===l)return!0}}}))?function e(t){if(m(t)){var n=u.getMergedSymbol(t.symbol);k.Debug.assert(!!(1536&n.flags));var o=y(n);if(o)for(var r=0,i=o;r<i.length;r++){var a=i[r];e(b(a))}}}(o):m(o)}var r,i,s,l}function m(e){k.Debug.assert(!f);var t=n(e);return t&&i.push(e),t}function y(e){return t.get(k.getSymbolId(e).toString())}}(a,c,t,s,l),r=o.directImports,i=o.indirectUsers;return __assign({indirectUsers:i},function(e,i,a,s,l){var n=[],c=[];function u(e,t){n.push([e,t])}if(e)for(var t=0,o=e;t<o.length;t++){var r=o[t];g(r)}return{importSearches:n,singleReferences:c};function g(e){if(237!==e.kind)if(71!==e.kind){if(9===e.moduleSpecifier.kind)if(244!==e.kind){var t=e.importClause;if(t){var n=t.namedBindings;if(n&&240===n.kind)p(n.name);else if(0===a)d(n);else{var o=t.name;if(o&&(!l||o.escapedText===h(i))){var r=s.getSymbolAtLocation(o);u(o,r)}l||1!==a||d(n)}}}else d(e.exportClause)}else p(e);else m(e)&&p(e.name)}function p(e){2!==a||l&&!_(e.escapedText)||u(e,s.getSymbolAtLocation(e))}function d(e){if(e)for(var t=0,n=e.elements;t<n.length;t++){var o=n[t],r=o.name,i=o.propertyName;if(_((i||r).escapedText))if(i)c.push(i),l||u(r,s.getSymbolAtLocation(r));else{var a=246===o.kind&&o.propertyName?s.getExportSpecifierLocalTargetSymbol(o):s.getSymbolAtLocation(r);u(r,a)}}}function _(e){return e===i.escapedName||0!==a&&"default"===e}}(r,e,t.exportKind,s,n))}},(t=e.ExportKind||(e.ExportKind={}))[t.Named=0]="Named",t[t.Default=1]="Default",t[t.ExportEquals=2]="ExportEquals",(n=e.ImportExport||(e.ImportExport={}))[n.Import=0]="Import",n[n.Export=1]="Export",e.findModuleReferences=function(e,t,n){for(var o=[],r=e.getTypeChecker(),i=0,a=t;i<a.length;i++){var s=a[i],l=n.valueDeclaration;if(265===l.kind){for(var c=0,u=s.referencedFiles;c<u.length;c++){var g=u[c];e.getSourceFileFromReference(s,g)===l&&o.push({kind:"reference",referencingFile:s,ref:g})}for(var p=0,d=s.typeReferenceDirectives;p<d.length;p++){g=d[p];var _=e.getResolvedTypeReferenceDirectives().get(g.fileName);void 0!==_&&_.resolvedFileName===l.fileName&&o.push({kind:"reference",referencingFile:s,ref:g})}}f(s,function(e,t){r.getSymbolAtLocation(t)===n&&o.push({kind:"import",literal:t})})}return o},e.getImportOrExportSymbol=function(r,i,a,s){return s?e():e()||function(){var e=function(e){var t=e.parent;switch(t.kind){case 237:return t.name===e&&m(t)?{isNamedImport:!1}:void 0;case 242:return t.propertyName?void 0:{isNamedImport:!0};case 239:case 240:return k.Debug.assert(t.name===e),{isNamedImport:!1};default:return}}(r);if(e){var t=a.getImmediateAliasedSymbol(i);if(t){"export="===(t=function(e,t){if(e.declarations)for(var n=0,o=e.declarations;n<o.length;n++){var r=o[n];if(k.isExportSpecifier(r)&&!r.propertyName&&!r.parent.parent.moduleSpecifier)return t.getExportSpecifierLocalTargetSymbol(r)}return e}(t,a)).escapedName&&(t=function(e,t){if(2097152&e.flags)return t.getImmediateAliasedSymbol(e);var n=e.valueDeclaration;return k.isExportAssignment(n)?n.expression.symbol:k.isBinaryExpression(n)?n.right.symbol:void k.Debug.fail()}(t,a));var n=h(t);return void 0===n||"default"===n||n===i.escapedName?__assign({kind:0,symbol:t},e):void 0}}}();function e(){var t=r.parent;if(i.exportSymbol)return 179===t.kind?i.declarations.some(function(e){return e===t})&&k.isBinaryExpression(t.parent)?o(t.parent,!1):void 0:l(i.exportSymbol,c(t));var e=function(e,t){if(226===e.kind){var n=e;return n.name!==t?void 0:260===n.parent.kind?void 0:208===n.parent.parent.kind?n.parent.parent:void 0}return e}(t,r);if(e&&k.hasModifier(e,1)){if(k.isImportEqualsDeclaration(e)&&e.moduleReference===r){if(s)return;return{kind:0,symbol:a.getSymbolAtLocation(e.name),isNamedImport:!1}}return l(i,c(e))}if(k.isExportAssignment(t))return n(t);if(k.isExportAssignment(t.parent))return n(t.parent);if(k.isBinaryExpression(t))return o(t,!0);if(k.isBinaryExpression(t.parent))return o(t.parent,!0);function n(e){var t=e.symbol.parent;k.Debug.assert(!!t);var n=e.isExportEquals?2:1;return{kind:1,symbol:i,exportInfo:{exportingModuleSymbol:t,exportKind:n}}}function o(e,t){var n;switch(k.getSpecialPropertyAssignmentKind(e)){case 1:n=0;break;case 2:n=2;break;default:return}var o=t?a.getSymbolAtLocation(e.left.name):i;return o&&l(o,n)}}function l(e,t){var n=o(e,t,a);return n&&{kind:1,symbol:e,exportInfo:n}}function c(e){return k.hasModifier(e,512)?1:0}},e.getExportInfo=o}(k.FindAllReferences||(k.FindAllReferences={}))}(ts||(ts={})),function(h){!function(s){function l(e,t){return{type:"node",node:e,isInString:t}}function c(e,t,n,o,r){return void 0===r&&(r={}),u(s.Core.getReferencedSymbolsForNode(e,t,n,o,r))}function d(e,t,n,o,r,i){var a=h.getTouchingPropertyName(o,r,!0);return s.Core.getReferencedSymbolsForNode(a,e,n,t,i)}function u(e){return e&&h.flatMap(e,function(e){return e.references})}function _(u,g){var e=function(){switch(u.type){case"symbol":var e=u.symbol,t=u.node,n=p(e,t,g),o=n.displayParts,r=n.kind;return{node:t,name:o.map(function(e){return e.text}).join(""),kind:r,displayParts:o};case"label":var i=u.node;return{node:i,name:i.text,kind:"label",displayParts:[h.displayPart(i.text,h.SymbolDisplayPartKind.text)]};case"keyword":var a=u.node,s=h.tokenToString(a.kind);return{node:a,name:s,kind:"keyword",displayParts:[{text:s,kind:"keyword"}]};case"this":var l=u.node;return{node:l,name:"this",kind:"var",displayParts:(e=g.getSymbolAtLocation(l))&&h.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(g,e,l.getSourceFile(),h.getContainerNode(l),l).displayParts};case"string":var c=u.node;return{node:c,name:c.text,kind:"var",displayParts:[h.displayPart(h.getTextOfNode(c),h.SymbolDisplayPartKind.stringLiteral)]}}}();if(e){var t=e.node,n=e.name,o=e.kind,r=e.displayParts,i=t.getSourceFile();return{containerKind:"",containerName:"",fileName:i.fileName,kind:o,name:n,textSpan:h.createTextSpanFromNode(t,i),displayParts:r}}}function p(e,t,n){var o=h.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(n,e,t.getSourceFile(),h.getContainerNode(t),t);return{displayParts:o.displayParts,kind:o.symbolKind}}function f(e){if("span"===e.type)return{textSpan:e.textSpan,fileName:e.fileName,isWriteAccess:!1,isDefinition:!1};var t=e.node,n=e.isInString;return{fileName:t.getSourceFile().fileName,textSpan:g(t),isWriteAccess:i(t),isDefinition:79===t.kind||h.isAnyDeclarationName(t)||h.isLiteralComputedPropertyDeclarationName(t),isInString:n}}function g(e){var t=e.getStart(),n=e.getEnd();return 9===e.kind&&(t+=1,n-=1),h.createTextSpanFromBounds(t,n)}function i(e){return 79===e.kind||h.isAnyDeclarationName(e)||h.isWriteAccess(e)}s.nodeEntry=l,s.findReferencedSymbols=function(e,t,n,o,r){var i=d(e,t,n,o,r);if(i&&i.length){for(var a=[],s=e.getTypeChecker(),l=0,c=i;l<c.length;l++){var u=c[l],g=u.definition,p=u.references;g&&a.push({definition:_(g,s),references:p.map(f)})}return a}},s.getImplementationsAtPosition=function(e,t,n,o,r){var i=function(e,t,n,o){if(265!==o.kind){var r=e.getTypeChecker();if(262===o.parent.kind){var i=[];return s.Core.getReferenceEntriesForShorthandPropertyAssignment(o,r,function(e){return i.push(l(e))}),i}if(97===o.kind||h.isSuperProperty(o.parent)){var a=r.getSymbolAtLocation(o);return a.valueDeclaration&&[l(a.valueDeclaration)]}return c(o,e,n,t,{implementations:!0})}}(e,t,n,h.getTouchingPropertyName(o,r,!1)),a=e.getTypeChecker();return h.map(i,function(e){return function(e,t){if("node"===e.type){var n=e.node;return __assign({textSpan:g(n),fileName:n.getSourceFile().fileName},(o=n,(i=(r=t).getSymbolAtLocation(h.isDeclaration(o)&&o.name?o.name:o))?p(i,o,r):178===o.kind?{kind:"interface",displayParts:[h.punctuationPart(19),h.textPart("object literal"),h.punctuationPart(20)]}:199===o.kind?{kind:"local class",displayParts:[h.punctuationPart(19),h.textPart("anonymous local class"),h.punctuationPart(20)]}:{kind:h.getNodeKind(o),displayParts:[]}))}var o,r,i,a=e.textSpan,s=e.fileName;return{textSpan:a,fileName:s,kind:"",displayParts:[]}}(e,a)})},s.findReferencedEntries=function(e,t,n,o,r,i){var a=u(d(e,t,n,o,r,i));return h.map(a,f)},s.getReferenceEntriesForNode=c,s.toHighlightSpan=function(e){if("span"===e.type)return{fileName:e.fileName,span:{textSpan:e.textSpan,kind:"reference"}};var t=e.node,n=e.isInString,o=e.node.getSourceFile().fileName,r=i(t);return{fileName:o,span:{textSpan:g(t),kind:r?"writtenReference":"reference",isInString:n}}}}(h.FindAllReferences||(h.FindAllReferences={}))}(ts||(ts={})),function(I){var m;(function(e){e.getReferencedSymbolsForNode=function(e,t,n,o,r){if(void 0===r&&(r={}),265!==e.kind){if(!r.implementations){var i=function(e,t,n){if(I.isTypeKeyword(e.kind))return function(e,t,n){for(var o=[],r=0,i=e;r<i.length;r++){var a=i[r];n.throwIfCancellationRequested(),c(a,t,I.tokenToString(t),o)}return o.length?[{definition:{type:"keyword",node:o[0].node},references:o}]:void 0}(t,e.kind,n);if(I.isLabelName(e)){if(I.isJumpStatementTarget(e)){var o=I.getTargetLabel(e.parent,e.text);return o&&l(o.parent,o)}return l(e.parent,e)}return I.isThis(e)?function(e,t,n){var o=I.getThisContainer(e,!1),a=32;switch(o.kind){case 151:case 150:if(I.isObjectLiteralMethod(o))break;case 149:case 148:case 152:case 153:case 154:a&=I.getModifierFlags(o),o=o.parent;break;case 265:if(I.isExternalModule(o))return;case 228:case 186:break;default:return}var r,i=[];if(265===o.kind)I.forEach(t,function(e){n.throwIfCancellationRequested(),r=g(e,"this"),l(e,e,r,i)});else{var s=o.getSourceFile();r=g(s,"this",o),l(s,o,r,i)}return[{definition:{type:"this",node:e},references:i}];function l(o,r,e,i){I.forEach(e,function(e){var t=I.getTouchingWord(o,e,!1);if(t&&I.isThis(t)){var n=I.getThisContainer(t,!1);switch(r.kind){case 186:case 228:r.symbol===n.symbol&&i.push(m.nodeEntry(t));break;case 151:case 150:I.isObjectLiteralMethod(r)&&r.symbol===n.symbol&&i.push(m.nodeEntry(t));break;case 199:case 229:n.parent&&r.symbol===n.parent.symbol&&(32&I.getModifierFlags(n))===a&&i.push(m.nodeEntry(t));break;case 265:265!==n.kind||I.isExternalModule(n)||i.push(m.nodeEntry(t))}}})}}(e,t,n):97===e.kind?function(e){var t=I.getSuperContainer(e,!1);if(t){var n=32;switch(t.kind){case 149:case 148:case 151:case 150:case 152:case 153:case 154:n&=I.getModifierFlags(t),t=t.parent;break;default:return}for(var o=[],r=t.getSourceFile(),i=g(r,"super",t),a=0,s=i;a<s.length;a++){var l=s[a],c=I.getTouchingWord(r,l,!1);if(c&&97===c.kind){var u=I.getSuperContainer(c,!1);u&&(32&I.getModifierFlags(u))===n&&u.parent.symbol===t.symbol&&o.push(m.nodeEntry(c))}}return[{definition:{type:"symbol",symbol:t.symbol,node:e},references:o}]}}(e):void 0}(e,n,o);if(i)return i}var a=t.getTypeChecker(),s=a.getSymbolAtLocation(e);return s?1536&s.flags&&function(e){if(9!==e.kind)return!1;switch(e.parent.kind){case 233:case 248:case 238:case 244:return!0;case 181:return I.isRequireCall(e.parent,!1)||I.isImportCall(e.parent);default:return!1}}(e)?function(e,t,n){I.Debug.assert(!!t.valueDeclaration);for(var o=m.findModuleReferences(e,n,t).map(function(e){return"import"===e.kind?{type:"node",node:e.literal}:{type:"span",fileName:e.referencingFile.fileName,textSpan:I.createTextSpanFromRange(e.ref)}}),r=0,i=t.declarations;r<i.length;r++){var a=i[r];switch(a.kind){case 265:break;case 233:o.push({type:"node",node:a.name});break;default:I.Debug.fail("Expected a module symbol to be declared by a SourceFile or ModuleDeclaration.")}}return[{definition:{type:"symbol",symbol:t,node:t.valueDeclaration},references:o}]}(t,s,n):function(e,t,n,o,r,i){var a,s,l,c;a=e,l=o,c=(s=t).parent,e=I.isExportSpecifier(c)?x(s,a,c,l):I.isImportSpecifier(c)&&c.propertyName===s?l.getImmediateAliasedSymbol(a):a;var u=function(e,t){if(t){var n=void 0;do{n=e;for(var o=0,r=t;o<r.length;o++){var i=r[o],a=I.getMeaningFromDeclaration(i);a&e&&(e|=a)}}while(e!==n)}return e}(I.getMeaningFromLocation(t),e.declarations),g=[],p=new y(n,123===t.kind,o,r,u,i,g);if(79===t.kind)A(t,e,t,p),v(t,e,{exportingModuleSymbol:e.parent,exportKind:1},p);else{var d=p.createSearch(t,e,void 0,{allSearchSymbols:function(e,t,r,i){var a=[e],n=I.getContainingObjectLiteralElement(t);if(n){if(262!==n.kind){var o=k(t,r);o&&a.push(o)}I.forEach(B(n,r),function(e){I.addRange(a,r.getRootSymbols(e))});var s=r.getShorthandAssignmentValueSymbol(t.parent);s&&a.push(s)}e.valueDeclaration&&146===e.valueDeclaration.kind&&I.isParameterPropertyDeclaration(e.valueDeclaration)&&I.addRange(a,r.getSymbolsOfParameterPropertyDeclaration(e.valueDeclaration,e.name));var l=E(e,r);return l&&(a.push(l),c(l)),c(e),a;function c(e){for(var t=0,n=r.getRootSymbols(e);t<n.length;t++){var o=n[t];o!==e&&a.push(o),!i&&o.parent&&96&o.parent.flags&&D(o.parent,o.name,a,I.createSymbolTable(),r)}}}(e,t,o,i.implementations)}),_=function(e){var t=e.declarations,n=e.flags,o=e.parent,r=e.valueDeclaration;if(r&&(186===r.kind||199===r.kind))return r;if(t){if(8196&n){var i=I.find(t,function(e){return I.hasModifier(e,8)});return i?I.getAncestor(i,229):void 0}if(!T(e)){var a,s=o&&!(262144&e.flags);if(!s||1536&o.flags&&I.isExternalModuleSymbol(o)&&!o.globalExports){for(var l=0,c=t;l<c.length;l++){var u=c[l],g=I.getContainerNode(u);if(a&&a!==g)return;if(!g||265===g.kind&&!I.isExternalOrCommonJsModule(g))return;a=g}return s?a.getSourceFile():a}}}}(e);if(_)C(_,_.getSourceFile(),d,p);else for(var f=0,h=p.sourceFiles;f<h.length;f++){var m=h[f];p.cancellationToken.throwIfCancellationRequested(),b(m,d,p)}}return g}(s,e,n,a,o,r):r.implementations||9!==e.kind?void 0:function(e,t,n){for(var o=[],r=0,i=t;r<i.length;r++){var a=i[r];n.throwIfCancellationRequested();var s=g(a,e.text);l(a,e.text,s,o)}return[{definition:{type:"string",node:e},references:o}];function l(e,t,n,o){for(var r=0,i=n;r<i.length;r++){var a=i[r],s=I.getTouchingWord(e,a,!1);s&&9===s.kind&&s.text===t&&o.push(m.nodeEntry(s,!0))}}}(e,n,o)}};var y=function(){function e(e,t,n,o,r,i,a){this.sourceFiles=e,this.isForConstructor=t,this.checker=n,this.cancellationToken=o,this.searchMeaning=r,this.options=i,this.result=a,this.inheritsFromCache=I.createMap(),this.markSeenContainingTypeReference=I.nodeSeenTracker(),this.markSeenReExportRHS=I.nodeSeenTracker(),this.symbolIdToReferences=[],this.sourceFileToSeenSymbols=[]}return e.prototype.getImportSearches=function(e,t){return this.importTracker||(this.importTracker=m.createImportTracker(this.sourceFiles,this.checker,this.cancellationToken)),this.importTracker(e,t,this.options.isForRename)},e.prototype.createSearch=function(e,t,n,o){void 0===o&&(o={});var r=o.text,i=void 0===r?I.stripQuotes(I.unescapeLeadingUnderscores((I.getLocalSymbolForExportDefault(t)||t).escapedName)):r,a=o.allSearchSymbols,s=void 0===a?void 0:a,l=I.escapeLeadingUnderscores(i),c=this.options.implementations&&function(e,t,n){var o,r=(o=e,I.isRightSideOfPropertyAccess(o)&&o.parent);if(r){var i=n.getTypeAtLocation(r.expression);if(i)return i.symbol&&96&i.symbol.flags&&i.symbol!==t.parent?[i.symbol]:196608&i.flags?function e(t,n){void 0===n&&(n=[]);for(var o=0,r=t.types;o<r.length;o++){var i=r[o];i.symbol&&96&i.symbol.getFlags()&&n.push(i.symbol),196608&i.getFlags()&&e(i,n)}return n}(i):void 0}}(e,t,this.checker);return{location:e,symbol:t,comingFrom:n,text:i,escapedText:l,parents:c,includes:function(e){return s?I.contains(s,e):e===t}}},e.prototype.referenceAdder=function(e,t){var n=I.getSymbolId(e),o=this.symbolIdToReferences[n];return o||(o=this.symbolIdToReferences[n]=[],this.result.push({definition:{type:"symbol",symbol:e,node:t},references:o})),function(e){return o.push(m.nodeEntry(e))}},e.prototype.addStringOrCommentReference=function(e,t){this.result.push({definition:void 0,references:[{type:"span",fileName:e,textSpan:t}]})},e.prototype.markSearchedSymbol=function(e,t){var n=I.getNodeId(e),o=I.getSymbolId(t),r=this.sourceFileToSeenSymbols[n]||(this.sourceFileToSeenSymbols[n]=[]);return!r[o]&&(r[o]=!0)},e}();function v(e,t,n,o){var r=o.getImportSearches(t,n),i=r.importSearches,a=r.singleReferences,s=r.indirectUsers;if(a.length)for(var l=o.referenceAdder(t,e),c=0,u=a;c<u.length;c++)l(u[c]);for(var g=0,p=i;g<p.length;g++){var d=p[g],_=d[0],f=d[1];S(_.getSourceFile(),o.createSearch(_,f,1),o)}if(s.length){var h=void 0;switch(n.exportKind){case 0:h=o.createSearch(e,t,1);break;case 1:h=o.options.isForRename?void 0:o.createSearch(e,t,1,{text:"default"})}if(h)for(var m=0,y=s;m<y.length;m++)b(y[m],h,o)}}function _(e,t){for(var n=0,o=e.declarations;n<o.length;n++){var r=o[n];S(r.getSourceFile(),t.createSearch(r,e,0),t)}}function b(e,t,n){void 0!==I.getNameTable(e).get(t.escapedText)&&S(e,t,n)}function k(e,t){return I.isArrayLiteralOrObjectLiteralDestructuringPattern(e.parent.parent)&&t.getPropertySymbolOfDestructuringAssignment(e)}function T(e){var t=I.getDeclarationOfKind(e,176);if(t&&174===t.parent.kind&&!t.propertyName)return t}function E(e,t){var n=T(e);if(n){var o=t.getTypeAtLocation(n.parent),r=o&&t.getPropertyOfType(o,n.name.text);return r&&98304&r.flags?(I.Debug.assert(!!(33554432&r.flags)),r.target):r}}function g(e,t,n){void 0===n&&(n=e);var o=[];if(!t||!t.length)return o;for(var r=e.text,i=r.length,a=t.length,s=r.indexOf(t,n.pos);0<=s&&!(s>n.end);){var l=s+a;0!==s&&I.isIdentifierPart(r.charCodeAt(s-1),5)||l!==i&&I.isIdentifierPart(r.charCodeAt(l),5)||o.push(s),s=r.indexOf(t,s+a+1)}return o}function l(e,t){for(var n=[],o=e.getSourceFile(),r=t.text,i=0,a=g(o,r,e);i<a.length;i++){var s=a[i],l=I.getTouchingWord(o,s,!1);l&&(l===t||I.isJumpStatementTarget(l)&&I.getTargetLabel(l,r)===t)&&n.push(m.nodeEntry(l))}return[{definition:{type:"label",node:t},references:n}]}function f(e,t){switch(e.kind){case 71:return e.text.length===t.length;case 9:return(I.isLiteralNameOfPropertyDeclarationOrIndexAccess(e)||9===(n=e).kind&&(I.isNameOfModuleDeclaration(n)||I.isExpressionOfExternalModuleImportEqualsDeclaration(n)))&&e.text.length===t.length;case 8:return I.isLiteralNameOfPropertyDeclarationOrIndexAccess(e)&&e.text.length===t.length;case 79:return"default".length===t.length;default:return!1}var n}function c(e,t,n,o){for(var r=0,i=g(e,n,e);r<i.length;r++){var a=i[r],s=I.getTouchingPropertyName(e,a,!0);s.kind===t&&o.push(m.nodeEntry(s))}}function S(e,t,n){return n.cancellationToken.throwIfCancellationRequested(),C(e,e,t,n)}function C(e,t,n,o){if(o.markSearchedSymbol(t,n.symbol))for(var r=0,i=g(t,n.text,e);r<i.length;r++)a(t,i[r],n,o)}function a(e,t,n,o){var r=I.getTouchingPropertyName(e,t,!0);if(f(r,n.text)){if(I.getMeaningFromLocation(r)&o.searchMeaning){var i=o.checker.getSymbolAtLocation(r);if(i){var a=r.parent;if(!I.isImportSpecifier(a)||a.propertyName!==r){if(I.isExportSpecifier(a))return I.Debug.assert(71===r.kind),void function(e,t,n,o,r){var i=n.parent,a=n.propertyName,s=n.name,l=i.parent,c=x(e,t,n,r.checker);if(o.includes(c)){if(a?e===a?(l.moduleSpecifier||p(),!r.options.isForRename&&r.markSeenReExportRHS(s)&&A(s,t,s,r)):r.markSeenReExportRHS(e)&&p():p(),e!==a||!r.options.isForRename){var u=79===e.originalKeywordKind?1:0,g=m.getExportInfo(t,u,r.checker);I.Debug.assert(!!g),v(e,t,g,r)}1!==o.comingFrom&&l.moduleSpecifier&&!a&&_(r.checker.getExportSpecifierLocalTargetSymbol(n),r)}function p(){A(e,c,o.location,r)}}(r,i,a,n,o);var s,l,c,u,g,p,d=function(n,e,t,o){if(n.includes(e))return e;var r=I.getContainingObjectLiteralElement(t);if(r){var i=I.forEach(B(r,o.checker),function(e){return I.find(o.checker.getRootSymbols(e),n.includes)});if(i)return i;var a=k(t,o.checker);if(a&&n.includes(a))return a}var s=E(e,o.checker);if(s){var l=c(s);if(l)return l}return c(e);function c(e){return I.forEach(o.checker.getRootSymbols(e),function(t){if(n.includes(t))return t;if(t.parent&&96&t.parent.flags){if(n.parents&&!I.some(n.parents,function(e){return function(e,r,i,n){var a=64&r.getFlags();return o(e);function o(e){if(e===r)return!0;var t=I.getSymbolId(e)+","+I.getSymbolId(r),n=i.get(t);if(void 0!==n)return n;i.set(t,!1);var o=I.forEach(e.getDeclarations(),function(e){if(I.isClassLike(e)){if(a){var t=I.getClassImplementsHeritageClauseElements(e);if(t)for(var n=0,o=t;n<o.length;n++){var r=o[n];if(s(r))return!0}}return s(I.getClassExtendsHeritageClauseElement(e))}return!(230!==e.kind||!a)&&I.forEach(I.getInterfaceBaseTypeNodes(e),s)});return i.set(t,o),o}function s(e){if(e){var t=n.getTypeAtLocation(e);if(t&&t.symbol)return o(t.symbol)}return!1}}(t.parent,e,o.inheritsFromCache,o.checker)}))return;var e=[];return D(t.parent,t.name,e,I.createSymbolTable(),o.checker),I.find(e,n.includes)}})}}(n,i,r,o);if(!d)return l=n,c=o,u=(s=i).flags,g=s.valueDeclaration,p=c.checker.getShorthandAssignmentValueSymbol(g),void(33554432&u||!l.includes(p)||A(I.getNameOfDeclaration(g),p,l.location,c));o.isForConstructor?function(e,t,n,o){I.isNewExpressionTarget(e)&&A(e,n.symbol,n.location,o);var r,i=o.referenceAdder(n.symbol,n.location);if(I.isClassLike(e.parent))I.Debug.assert(e.parent.name===e),function(e,t,o){for(var n=0,r=e.members.get("__constructor").declarations;n<r.length;n++){var i=r[n],a=I.findChildOfKind(i,123,t);I.Debug.assert(152===i.kind&&!!a),o(a)}e.exports.forEach(function(e){var t=e.valueDeclaration;if(t&&151===t.kind){var n=t.body;n&&h(n,99,function(e){I.isNewExpressionTarget(e)&&o(e)})}})}(n.symbol,t,i);else{var a=(r=e,I.tryGetClassExtendingExpressionWithTypeArguments(I.climbPastPropertyAccess(r).parent));a&&I.isClassLike(a)&&function(e,t){var n=e.symbol.members.get("__constructor");if(n)for(var o=0,r=n.declarations;o<r.length;o++){var i=r[o];I.Debug.assert(152===i.kind);var a=i.body;a&&h(a,97,function(e){I.isCallExpressionTarget(e)&&t(e)})}}(a,i)}}(r,e,n,o):A(r,d,n.location,o),function(e,t,n,o){var r=m.getImportOrExportSymbol(e,t,o.checker,1===n.comingFrom);if(r){var i=r.symbol;0===r.kind?o.options.isForRename&&!r.isNamedImport||_(i,o):v(e,i,r.exportInfo,o)}}(r,i,n,o)}}}}else!o.options.implementations&&(o.options.findInStrings&&I.isInString(e,t)||o.options.findInComments&&I.isInNonReferenceComment(e,t))&&o.addStringOrCommentReference(e.fileName,I.createTextSpan(t,n.text.length))}function x(e,t,n,o){return r=e,a=(i=n).parent,s=i.propertyName,l=i.name,I.Debug.assert(s===r||l===r),(s?s!==r:a.parent.moduleSpecifier)?t:o.getExportSpecifierLocalTargetSymbol(n);var r,i,a,s,l}function A(e,t,n,o){var r=o.referenceAdder(t,n);o.options.implementations?function(e,t,n){if(I.isDeclarationName(e)&&function(e){if(!e)return!1;if(I.isVariableLike(e)){if(e.initializer)return!0;if(226===e.kind){var t=function(e){if(e.parent&&e.parent.parent&&208===e.parent.parent.kind)return I.Debug.assert(227===e.parent.kind),e.parent.parent}(e);return t&&I.hasModifier(t,2)}}else{if(I.isFunctionLike(e))return!!e.body||I.hasModifier(e,2);switch(e.kind){case 229:case 199:case 232:case 233:return!0}}return!1}(e.parent))return t(e.parent);if(71===e.kind){262===e.parent.kind&&u(e,n.checker,t);var o=function e(t){if(t&&t.parent){if(201===t.kind&&259===t.parent.kind&&I.isClassLike(t.parent.parent))return t.parent.parent;if(71===t.kind||179===t.kind)return e(t.parent)}}(e);if(o)return t(o);var r=function(e){for(var t=void 0;e;)I.isTypeNode(e)&&(t=e),e=e.parent;return t}(e);if(r&&n.markSeenContainingTypeReference(r)){var i=r.parent;if(I.isVariableLike(i)&&i.type===r&&i.initializer&&s(i.initializer))t(i.initializer);else if(I.isFunctionLike(i)&&i.type===r&&i.body){var a=i.body;207===a.kind?I.forEachReturnStatement(a,function(e){e.expression&&s(e.expression)&&t(e.expression)}):s(a)&&t(a)}else I.isAssertionExpression(i)&&s(i.expression)&&t(i.expression)}}}(e,r,o):r(e)}function s(e){switch(e.kind){case 185:return s(e.expression);case 187:case 186:case 178:case 199:case 177:return!0;default:return!1}}function D(o,r,i,a,s){function t(e){if(e){var t=s.getTypeAtLocation(e);if(t){var n=s.getPropertyOfType(t,r);n&&i.push.apply(i,s.getRootSymbols(n)),a.set(o.escapedName,o),D(t.symbol,r,i,a,s)}}}!o||a.has(o.escapedName)||96&o.flags&&I.forEach(o.getDeclarations(),function(e){I.isClassLike(e)?(t(I.getClassExtendsHeritageClauseElement(e)),I.forEach(I.getClassImplementsHeritageClauseElements(e),t)):230===e.kind&&I.forEach(I.getInterfaceBaseTypeNodes(e),t)})}function B(e,t){var n=e.parent,o=t.getContextualType(n),r=function(e){if(144===e.name.kind){var t=e.name.expression;return I.isStringOrNumericLiteral(t)?t.text:void 0}return I.getTextOfIdentifierOrLiteral(e.name)}(e);if(r&&o){var i=[],a=o.getProperty(r);return a&&i.push(a),65536&o.flags&&I.forEach(o.types,function(e){var t=e.getProperty(r);t&&i.push(t)}),i}}function u(e,t,n){var o=t.getSymbolAtLocation(e),r=t.getShorthandAssignmentValueSymbol(o.valueDeclaration);if(r)for(var i=0,a=r.getDeclarations();i<a.length;i++){var s=a[i];1&I.getMeaningFromDeclaration(s)&&n(s)}}function h(e,t,n){I.forEachChild(e,function(e){e.kind===t&&n(e),h(e,t,n)})}e.getReferenceEntriesForShorthandPropertyAssignment=u})((m=I.FindAllReferences||(I.FindAllReferences={})).Core||(m.Core={}))}(ts||(ts={})),function(R){!function(e){function A(e,t,n){var o=[],r=t.getDeclarations(),i=N(e,t,n),a=i.symbolName,s=i.symbolKind,l=i.containerName;return function(e,t,n,o,r,i){if((R.isNewExpressionTarget(t)||123===t.kind)&&32&e.flags){for(var a=0,s=e.getDeclarations();a<s.length;a++){var l=s[a];if(R.isClassLike(l))return c(l.members,!0,n,o,r,i)}R.Debug.fail("Expected declaration to have at least one class-like declaration")}return!1}(t,n,s,a,l,o)||function(e,t,n,o,r,i){if(R.isCallExpressionTarget(t)||R.isNewExpressionTarget(t)||R.isNameOfFunctionDeclaration(t))return c(e.declarations,!1,n,o,r,i);return!1}(t,n,s,a,l,o)||R.forEach(r,function(e){o.push(B(e,s,a,l))}),o;function c(e,t,n,o,r,i){if(!e)return!1;for(var a,s=[],l=0,c=e;l<c.length;l++){var u=c[l];(t?152===u.kind:D(u))&&(s.push(u),u.body&&(a=u))}return!!s.length&&(i.push(B(a||R.lastOrUndefined(s),n,o,r)),!0)}}function D(e){switch(e.kind){case 152:case 228:case 151:case 150:return!0;default:return!1}}function B(e,t,n,o){return I(R.getNameOfDeclaration(e)||e,t,n,o)}function I(e,t,n,o){var r=e.getSourceFile();return{fileName:r.fileName,textSpan:R.createTextSpanFromNode(e,r),kind:t,name:n,containerKind:void 0,containerName:o}}function N(e,t,n){return{symbolName:e.symbolToString(t),symbolKind:R.SymbolDisplay.getSymbolKind(e,t,n),containerName:t.parent?e.symbolToString(t.parent,n):""}}function w(e,t){for(var n=0,o=e;n<o.length;n++){var r=o[n];if(r.pos<=t&&t<=r.end)return r}}function O(e,t){return{fileName:t,textSpan:R.createTextSpanFromBounds(0,0),kind:"script",name:e,containerName:void 0,containerKind:void 0}}e.getDefinitionAtPosition=function(e,t,n){var o=w(t.referencedFiles,n);if(o&&(r=R.tryResolveScriptReference(e,t,o)))return[O(o.fileName,r.fileName)];var r,i=w(t.typeReferenceDirectives,n);if(i)return(r=e.getResolvedTypeReferenceDirectives().get(i.fileName))&&r.resolvedFileName&&[O(i.fileName,r.resolvedFileName)];var a=R.getTouchingPropertyName(t,n,!0);if(a!==t){if(R.isJumpStatementTarget(a)){var s=a.text,l=R.getTargetLabel(a.parent,s);return l?[I(l,"label",s,void 0)]:void 0}var c,u,g,p,d,_,f=e.getTypeChecker(),h=function(e,t){var n,o,r=(n=function e(t){return R.isRightSideOfPropertyAccess(t)?e(t.parent):t}(t),(o=n.parent)&&R.isCallLikeExpression(o)&&R.getInvokedExpression(o)===n&&o),i=r&&e.getResolvedSignature(r);if(i){var a=i.declaration;if(a&&D(a))return a}}(f,a);if(h)return[(c=f,u=h,g=N(c,u.symbol,u),p=g.symbolName,d=g.symbolKind,_=g.containerName,B(u,d,p,_))];var m=f.getSymbolAtLocation(a);if(m){if(2097152&m.flags&&function(e,t){if(71!==e.kind)return!1;if(e.parent===t)return!0;switch(t.kind){case 239:case 237:return!0;case 242:return 241===t.parent.kind;default:return!1}}(a,m.declarations[0])){var y=f.getAliasedSymbol(m);y.declarations&&(m=y)}if(262===a.parent.kind){var v=f.getShorthandAssignmentValueSymbol(m.valueDeclaration);if(!v)return[];var b=v.getDeclarations(),k=R.SymbolDisplay.getSymbolKind(f,v,a),T=f.symbolToString(v),E=f.symbolToString(m.parent,a);return R.map(b,function(e){return B(e,k,T,E)})}if(R.isPropertyName(a)&&R.isBindingElement(a.parent)&&R.isObjectBindingPattern(a.parent.parent)&&a===(a.parent.propertyName||a.parent.name)){var S=f.getTypeAtLocation(a.parent.parent);if(S){var C=R.getPropertySymbolsFromType(S,a);if(C)return R.flatMap(C,function(e){return A(f,e,a)})}}var x=R.getContainingObjectLiteralElement(a);return x&&f.getContextualType(x.parent)?R.flatMap(R.getPropertySymbolsFromContextualType(f,x),function(e){return A(f,e,a)}):A(f,m,a)}}},e.getTypeDefinitionAtPosition=function(t,e,n){var o=R.getTouchingPropertyName(e,n,!0);if(o!==e){var r=t.getSymbolAtLocation(o);if(r){var i=t.getTypeOfSymbolAtLocation(r,o);if(i){if(65536&i.flags&&!(16&i.flags)){var a=[];return R.forEach(i.types,function(e){e.symbol&&R.addRange(a,A(t,e.symbol,o))}),a}if(i.symbol)return A(t,i.symbol,o)}}}}}(R.GoToDefinition||(R.GoToDefinition={}))}(ts||(ts={})),function(y){!function(e){var t,n,o=["augments","author","argument","borrows","class","constant","constructor","constructs","default","deprecated","description","event","example","extends","field","fileOverview","function","ignore","inner","lends","link","memberOf","method","name","namespace","param","private","prop","property","public","requires","returns","see","since","static","throws","type","typedef","version"];function i(e,t){if(e)for(var n=0;n<e.length;n++)if(y.indexOf(e,e[n])===n){var o=t(e[n],n);if(o)return o}}function m(e){for(;185===e.kind;)e=e.expression;switch(e.kind){case 186:case 187:return e.parameters;case 199:for(var t=0,n=e.members;t<n.length;t++){var o=n[t];if(152===o.kind)return o.parameters}}return y.emptyArray}e.getJsDocCommentsFromDeclarations=function(e){var t=[];return i(e,function(e){y.forEach(y.getAllJSDocs(e),function(e){e.comment&&(t.length&&t.push(y.lineBreakPart()),t.push(y.textPart(e.comment)))})}),t},e.getJsDocTagsFromDeclarations=function(e){var r=[];return i(e,function(e){for(var t=0,n=y.getJSDocTags(e);t<n.length;t++){var o=n[t];276===o.kind&&r.push({name:o.tagName.text,text:o.comment})}}),r},e.getJSDocTagNameCompletions=function(){return t||(t=y.map(o,function(e){return{name:e,kind:"keyword",kindModifiers:"",sortText:"0"}}))},e.getJSDocTagCompletions=function(){return n||(n=y.map(o,function(e){return{name:"@"+e,kind:"keyword",kindModifiers:"",sortText:"0"}}))},e.getJSDocParameterNameCompletions=function(n){if(!y.isIdentifier(n.name))return y.emptyArray;var o=n.name.text,r=n.parent,e=r.parent;return y.isFunctionLike(e)?y.mapDefined(e.parameters,function(e){if(y.isIdentifier(e.name)){var t=e.name.text;if(!r.tags.some(function(e){return e!==n&&y.isJSDocParameterTag(e)&&y.isIdentifier(e.name)&&e.name.escapedText===t})&&(void 0===o||y.startsWith(t,o)))return{name:t,kind:"parameter",kindModifiers:"",sortText:"0"}}}):[]},e.getDocCommentTemplateAtPosition=function(e,t,n){if(!(y.isInString(t,n)||y.isInComment(t,n)||y.hasDocComment(t,n))){var o=y.getTokenAtPosition(t,n,!1),r=o.getStart();if(o&&!(r<n)){var i=function(e){for(var t=e;t;t=t.parent)switch(t.kind){case 228:case 151:case 152:var n=t.parameters;return{commentOwner:t,parameters:n};case 229:return{commentOwner:t};case 208:var o=t,r=o.declarationList.declarations,i=1===r.length&&r[0].initializer?m(r[0].initializer):void 0;return{commentOwner:t,parameters:i};case 265:return;case 233:return 233===t.parent.kind?void 0:{commentOwner:t};case 194:var a=t;if(0===y.getSpecialPropertyAssignmentKind(a))return;var s=y.isFunctionLike(a.right)?a.right.parameters:y.emptyArray;return{commentOwner:t,parameters:s}}}(o);if(i){var a=i.commentOwner,s=i.parameters;if(!(a.getStart()<n)){var l=t.getLineAndCharacterOfPosition(n),c=t.getLineStarts()[l.line],u=t.text.substr(c,l.character).replace(/\S/i,function(){return" "}),g=y.hasJavaScriptFileExtension(t.fileName),p="";if(s)for(var d=0;d<s.length;d++){var _=s[d].name,f=71===_.kind?_.escapedText:"param"+d;p+=g?u+" * @param {any} "+f+e:u+" * @param "+f+e}var h="/**"+e+u+" * ";return{newText:h+e+p+u+" */"+(r===n?e+u:""),caretOffset:h.length}}}}}}}(y.JsDoc||(y.JsDoc={}))}(ts||(ts={})),function(C){!function(e){e.nodeCoreModuleList=["buffer","querystring","events","http","cluster","zlib","os","https","punycode","repl","readline","vm","child_process","url","dns","net","dgram","fs","path","string_decoder","tls","crypto","stream","util","assert","tty","domain","constants","process","v8","timers","console"];var t,S=C.arrayToSet(e.nodeCoreModuleList);e.loadSafeList=function(t,e){var n=C.readConfigFile(e,function(e){return t.readFile(e)});return C.createMapFromTemplate(n.config)},e.loadTypesMap=function(t,e){var n=C.readConfigFile(e,function(e){return t.readFile(e)});if(n.config)return C.createMapFromTemplate(n.config.simpleMap)},e.discoverTypings=function(p,d,e,t,o,n,r,i){if(!r||!r.enable)return{cachedTypingPaths:[],newTypingNames:[],filesToWatch:[]};var _=C.createMap();e=C.mapDefined(e,function(e){var t=C.normalizePath(e);if(C.hasJavaScriptFileExtension(t))return t});var a=[];r.include&&k(r.include,"Explicitly included types");var s=r.exclude||[],l=C.arrayToSet(e,C.getDirectoryPath);l.set(t,!0),l.forEach(function(e,t){T(C.combinePaths(t,"package.json"),a),T(C.combinePaths(t,"bower.json"),a),E(C.combinePaths(t,"bower_components"),a),E(C.combinePaths(t,"node_modules"),a)}),c=e,u=C.mapDefined(c,function(e){if(C.hasJavaScriptFileExtension(e)){var t=C.removeFileExtension(C.getBaseFileName(e.toLowerCase())),n=t.replace(/((?:\.|-)min(?=\.|$))|((?:-|\.)\d+)/g,"");return o.get(n)}}),u.length&&k(u,"Inferred typings from file names"),C.some(c,function(e){return C.fileExtensionIs(e,".jsx")})&&(d&&d("Inferred 'react' typings due to presence of '.jsx' extension"),b("react")),i&&k(C.deduplicate(i.map(function(e){return S.has(e)?"node":e})),"Inferred typings from unresolved imports"),n.forEach(function(e,t){_.has(t)&&void 0===_.get(t)&&_.set(t,e)});var c,u;for(var g=0,f=s;g<f.length;g++){var h=f[g];_.delete(h)&&d&&d("Typing for "+h+" is in exclude list, will be ignored.")}var m=[],y=[];_.forEach(function(e,t){void 0!==e?y.push(e):m.push(t)});var v={cachedTypingPaths:y,newTypingNames:m,filesToWatch:a};return d&&d("Result: "+JSON.stringify(v)),v;function b(e){_.has(e)||_.set(e,void 0)}function k(e,t){d&&d(t+": "+JSON.stringify(e)),C.forEach(e,b)}function T(e,t){if(p.fileExists(e)){t.push(e);var n=C.readConfigFile(e,function(e){return p.readFile(e)}).config;k(C.flatMap([n.dependencies,n.devDependencies,n.optionalDependencies,n.peerDependencies],C.getOwnKeys),"Typing names in '"+e+"' dependencies")}}function E(e,t){if(t.push(e),p.directoryExists(e)){var n=p.readDirectory(e,[".json"],void 0,void 0,2);d&&d("Searching for typing names in "+e+"; all files: "+JSON.stringify(n));for(var o=[],r=0,i=n;r<i.length;r++){var a=i[r],s=C.normalizePath(a),l=C.getBaseFileName(s);if("package.json"===l||"bower.json"===l){var c=C.readConfigFile(s,function(e){return p.readFile(e)}).config;if(("package.json"!==l||!c._requiredBy||0!==C.filter(c._requiredBy,function(e){return"#"===e[0]||"/"===e}).length)&&c.name){var u=c.types||c.typings;if(u){var g=C.getNormalizedAbsolutePath(u,C.getDirectoryPath(s));d&&d("    Package '"+c.name+"' provides its own types."),_.set(c.name,g)}else o.push(c.name)}}}k(o,"    Found package names")}}},(t=e.PackageNameValidationResult||(e.PackageNameValidationResult={}))[t.Ok=0]="Ok",t[t.ScopedPackagesNotSupported=1]="ScopedPackagesNotSupported",t[t.EmptyName=2]="EmptyName",t[t.NameTooLong=3]="NameTooLong",t[t.NameStartsWithDot=4]="NameStartsWithDot",t[t.NameStartsWithUnderscore=5]="NameStartsWithUnderscore",t[t.NameContainsNonURISafeCharacters=6]="NameContainsNonURISafeCharacters";var n=214;e.validatePackageName=function(e){return e?e.length>n?3:46===e.charCodeAt(0)?4:95===e.charCodeAt(0)?5:/^@[^/]+\/[^/]+$/.test(e)?1:encodeURIComponent(e)!==e?6:0:2},e.renderPackageNameValidationFailure=function(e,t){switch(e){case 2:return"Package name '"+t+"' cannot be empty";case 3:return"Package name '"+t+"' should be less than "+n+" characters";case 4:return"Package name '"+t+"' cannot start with '.'";case 5:return"Package name '"+t+"' cannot start with '_'";case 1:return"Package '"+t+"' is scoped and currently is not supported";case 6:return"Package name '"+t+"' contains non URI safe characters";case 0:throw C.Debug.fail();default:C.Debug.assertNever(e)}}}(C.JsTyping||(C.JsTyping={}))}(ts||(ts={})),function(m){!function(e){function d(e,t){switch(e.kind){case 239:case 242:case 237:var n=t.getSymbolAtLocation(e.name),o=t.getAliasedSymbol(n);return n.escapedName!==o.escapedName;default:return!0}}function _(e){m.Debug.assert(0<e.length);for(var t=0,n=e;t<n.length;t++){if(!n[t].isCaseSensitive)return!1}return!0}function o(e,t){if(e){var n=m.getNameOfDeclaration(e);if(n){var o=m.getTextOfIdentifierOrLiteral(n);if(void 0===o)return 144===n.kind&&i(n.expression,t,!0);t.unshift(o)}}return!0}function i(e,t,n){var o=m.getTextOfIdentifierOrLiteral(e);if(void 0!==o)return n&&t.unshift(o),!0;if(179===e.kind){var r=e;return n&&t.unshift(r.name.text),i(r.expression,t,!0)}return!1}function f(e){var t=[],n=m.getNameOfDeclaration(e);if(144!==n.kind||i(n.expression,t,!1)){for(e=m.getContainerNode(e);e;){if(!o(e,t))return;e=m.getContainerNode(e)}return t}}function h(e){m.Debug.assert(0<e.length);for(var t=m.PatternMatchKind.camelCase,n=0,o=e;n<o.length;n++){var r=o[n].kind;r<t&&(t=r)}return t}function g(e,t){return e.matchKind-t.matchKind||m.compareStringsCaseInsensitive(e.name,t.name)||m.compareStrings(e.name,t.name)}function p(e){var t=e.declaration,n=m.getContainerNode(t),o=n&&m.getNameOfDeclaration(n);return{name:e.name,kind:m.getNodeKind(t),kindModifiers:m.getNodeModifiers(t),matchKind:m.PatternMatchKind[e.matchKind],isCaseSensitive:e.isCaseSensitive,fileName:e.fileName,textSpan:m.createTextSpanFromNode(t),containerName:o?o.text:"",containerKind:o?m.getNodeKind(n):""}}(m.NavigateTo||(m.NavigateTo={})).getNavigateToItems=function(e,o,t,n,r,i){for(var a=m.createPatternMatcher(n),s=[],l=function(n){if(t.throwIfCancellationRequested(),i&&m.fileExtensionIs(n.fileName,".d.ts"))return"continue";m.forEachEntry(n.getNamedDeclarations(),function(e,t){!function(e,t,n,o,r,i){var a=e.getMatchesForLastSegmentOfPattern(t);if(a)for(var s=0,l=n;s<l.length;s++){var c=l[s];if(d(c,o)){var u=a;if(!e.patternContainsDots||(u=e.getMatches(f(c),t))){var g=h(u),p=_(u);i.push({name:t,fileName:r,matchKind:g,isCaseSensitive:p,declaration:c})}}}}(a,t,e,o,n.fileName,s)})},c=0,u=e;c<u.length;c++)l(u[c]);return s.sort(g),void 0!==r&&(s=s.slice(0,r)),s.map(p)}}()}(ts||(ts={})),function(N){!function(e){var y,o,r,t=/\s+/g,i=[],n=[];function a(){i=[],r=y=o=void 0,n=[]}function g(e){return e.getText(o)}function s(e){return e.node.kind}function l(e,t){e.children?e.children.push(t):e.children=[t]}function c(e){N.Debug.assert(!i.length);var t={node:e,additionalNodes:void 0,parent:void 0,children:void 0,indent:0};r=t;for(var n=0,o=e.statements;n<o.length;n++){E(o[n])}return k(),N.Debug.assert(!r&&!i.length),t}function v(e){l(r,u(e))}function u(e){return{node:e,additionalNodes:void 0,parent:r,children:void 0,indent:r.indent+1}}function b(e){var t=u(e);l(r,t),i.push(r),r=t}function k(){var e,l;r.children&&(e=r.children,l=N.createMap(),N.filterMutate(e,function(e){var t=N.getNameOfDeclaration(e.node),n=t&&g(t);if(!n)return!0;var o=l.get(n);if(!o)return l.set(n,e),!0;if(o instanceof Array){for(var r=0,i=o;r<i.length;r++){var a=i[r];if(s(a,e))return!1}return o.push(e),!0}var a=o;return!s(a,e)&&(l.set(n,[a,e]),!0);function s(e,t){return i=e.node,a=t.node,!(i.kind!==a.kind||233===i.kind&&!function e(t,n){return t.body.kind===n.body.kind&&(233!==t.body.kind||e(t.body,n.body))}(i,a)||(o=t,(n=e).additionalNodes=n.additionalNodes||[],n.additionalNodes.push(o.node),o.additionalNodes&&(r=n.additionalNodes).push.apply(r,o.additionalNodes),n.children=N.concatenate(n.children,o.children),n.children&&(p(n.children),d(n.children)),0));var n,o,r,i,a}}),d(r.children)),r=i.pop()}function T(e,t){b(e),E(t),k()}function E(e){var t;if(y.throwIfCancellationRequested(),e&&!N.isToken(e))switch(e.kind){case 152:var n=e;T(n,n.body);for(var o=0,r=n.parameters;o<r.length;o++){var i=r[o];N.isParameterPropertyDeclaration(i)&&v(i)}break;case 151:case 153:case 154:case 150:N.hasDynamicName(e)||T(e,e.body);break;case 149:case 148:N.hasDynamicName(e)||v(e);break;case 239:var a=e;a.name&&v(a);var s=a.namedBindings;if(s)if(240===s.kind)v(s);else for(var l=0,c=s.elements;l<c.length;l++){v(c[l])}break;case 176:case 226:var u=e,g=u.name,p=u.initializer;N.isBindingPattern(g)?E(g):p&&function(e){switch(e.kind){case 187:case 186:case 199:return!0;default:return!1}}(p)?p.name?E(p):(b(e),N.forEachChild(p,E),k()):T(e,p);break;case 187:case 228:case 186:T(e,e.body);break;case 232:b(e);for(var d=0,_=e.members;d<_.length;d++){var f=_[d];(t=f).name&&144!==t.name.kind&&v(f)}k();break;case 229:case 199:case 230:b(e);for(var h=0,m=e.members;h<m.length;h++){E(f=m[h])}k();break;case 233:T(e,function e(t){return 233===t.body.kind?e(t.body):t}(e).body);break;case 246:case 237:case 157:case 155:case 156:case 231:v(e);break;default:N.hasJSDocNodes(e)&&N.forEach(e.jsDoc,function(e){N.forEach(e.tags,function(e){283===e.kind&&v(e)})}),N.forEachChild(e,E)}}function p(e){var l=N.createMap();N.filterMutate(e,function(e){var t=N.getNameOfDeclaration(e.node);var n=t&&g(t);if(!n){return true}var o=l.get(n);if(!o){l.set(n,e);return true}if(o instanceof Array){for(var r=0,i=o;r<i.length;r++){var a=i[r];if(s(a,e)){return false}}o.push(e);return true}else{var a=o;if(s(a,e)){return false}l.set(n,[a,e]);return true}function s(e,t){if(c(e.node,t.node)){u(e,t);return true}return false}});function c(e,t){return e.kind===t.kind&&(e.kind!==233||n(e,t));function n(e,t){if(e.body.kind!==t.body.kind){return false}if(e.body.kind!==233){return true}return n(e.body,t.body)}}function u(e,t){if(e.additionalNodes=e.additionalNodes||[],e.additionalNodes.push(t.node),t.additionalNodes){(n=e.additionalNodes).push.apply(n,t.additionalNodes)}if(e.children=N.concatenate(e.children,t.children),e.children){p(e.children);d(e.children)}var n}}function d(e){e.sort(_)}function _(e,t){var n=f(e.node),o=f(t.node);if(n&&o){var r=N.compareStringsCaseInsensitive(n,o);return 0!==r?r:s(e)-s(t)}return n?1:o?-1:s(e)-s(t)}function f(e){if(233===e.kind)return A(e);var t=N.getNameOfDeclaration(e);if(t)return N.unescapeLeadingUnderscores(N.getPropertyNameForPropertyNameNode(t));switch(e.kind){case 186:case 187:case 199:return I(e);case 283:return m(e);default:return}}function h(e){if(233===e.kind)return A(e);var t=N.getNameOfDeclaration(e);if(t){var n=g(t);if(0<n.length)return n}switch(e.kind){case 265:var o=e;return N.isExternalModule(o)?'"'+N.escapeString(N.getBaseFileName(N.removeFileExtension(N.normalizePath(o.fileName))))+'"':"<global>";case 187:case 228:case 186:case 229:case 199:return 512&N.getModifierFlags(e)?"default":I(e);case 152:return"constructor";case 156:return"new()";case 155:return"()";case 157:return"[]";case 283:return m(e);default:return"<unknown>"}}function m(e){if(e.name)return e.name.text;var t=e.parent&&e.parent.parent;if(t&&208===t.kind&&0<t.declarationList.declarations.length){var n=t.declarationList.declarations[0].name;if(71===n.kind)return n.text}return"<typedef>"}function S(e){return{text:h(e.node),kind:N.getNodeKind(e.node),kindModifiers:B(e.node),spans:x(e),childItems:N.map(e.children,S)}}function C(e){return{text:h(e.node),kind:N.getNodeKind(e.node),kindModifiers:B(e.node),spans:x(e),childItems:N.map(e.children,function(e){return{text:h(e.node),kind:N.getNodeKind(e.node),kindModifiers:N.getNodeModifiers(e.node),spans:x(e),childItems:n,indent:0,bolded:!1,grayed:!1}})||n,indent:e.indent,bolded:!1,grayed:!1}}function x(e){var t=[D(e.node)];if(e.additionalNodes)for(var n=0,o=e.additionalNodes;n<o.length;n++){var r=o[n];t.push(D(r))}return t}function A(e){if(N.isAmbientModule(e))return N.getTextOfNode(e.name);var t=[];for(t.push(N.getTextOfIdentifierOrLiteral(e.name));e.body&&233===e.body.kind;)e=e.body,t.push(N.getTextOfIdentifierOrLiteral(e.name));return t.join(".")}function D(e){return 265===e.kind?N.createTextSpanFromBounds(e.getFullStart(),e.getEnd()):N.createTextSpanFromNode(e,o)}function B(e){return e.parent&&226===e.parent.kind&&(e=e.parent),N.getNodeModifiers(e)}function I(e){return e.name&&0<N.getFullWidth(e.name)?N.declarationNameToString(e.name):226===e.parent.kind?N.declarationNameToString(e.parent.name):194===e.parent.kind&&58===e.parent.operatorToken.kind?g(e.parent.left).replace(t,""):261===e.parent.kind&&e.parent.name?g(e.parent.name):512&N.getModifierFlags(e)?"default":N.isClassLike(e)?"<class>":"<function>"}e.getNavigationBarItems=function(e,t){y=t,o=e;try{return N.map((n=c(e),i=[],function e(t){if(function(e){switch(s(e)){case 229:case 199:case 232:case 230:case 233:case 265:case 231:case 283:return!0;case 152:case 151:case 153:case 154:case 226:return t(e);case 187:case 228:case 186:return function(e){if(!e.node.body)return!1;switch(s(e.parent)){case 234:case 265:case 151:case 152:return!0;default:return t(e)}}(e);default:return!1}function t(e){return N.forEach(e.children,function(e){var t=s(e);return 226!==t&&176!==t})}}(t)&&(i.push(t),t.children))for(var n=0,o=t.children;n<o.length;n++){var r=o[n];e(r)}}(n),i),C)}finally{a()}var n,i},e.getNavigationTree=function(e,t){y=t,o=e;try{return S(c(e))}finally{a()}}}(N.NavigationBar||(N.NavigationBar={}))}(ts||(ts={})),function(S){var e,C,x,u,g;e=S.OutliningElementsCollector||(S.OutliningElementsCollector={}),C="...",x=40,u="#region",g=new RegExp("^\\s*//\\s*#(end)?region(?:\\s+(.*))?$"),e.collectElements=function(h,m){var y=[],v=0,c=[];return function e(t){if(m.throwIfCancellationRequested(),!(x<v)){switch(S.isDeclaration(t)&&function(e){var t=S.getLeadingCommentRangesOfNode(e,h);if(t){for(var n=-1,o=-1,r=!0,i=0,a=0,s=t;a<s.length;a++){var l=s[a];m.throwIfCancellationRequested(),2===l.kind?(r&&(n=l.pos),r=!1,o=l.end,i++):3===l.kind&&(T(i,n,o),k(l,!1),o=-1,r=!(i=0))}T(i,n,o)}}(t),t.kind){case 207:if(!S.isFunctionBlock(t)){var n=t.parent,o=S.findChildOfKind(t,17,h),r=S.findChildOfKind(t,18,h);if(212===n.kind||215===n.kind||216===n.kind||214===n.kind||211===n.kind||213===n.kind||220===n.kind||260===n.kind){b(n,o,r,E(t),!0);break}if(224===n.kind){var i=n;if(i.tryBlock===t){b(n,o,r,E(t),!0);break}if(i.finallyBlock===t){var a=S.findChildOfKind(i,87,h);if(a){b(a,o,r,E(t),!0);break}}}var s=S.createTextSpanFromNode(t);y.push({textSpan:s,hintSpan:s,bannerText:C,autoCollapse:E(t)});break}case 234:var l=S.findChildOfKind(t,17,h),c=S.findChildOfKind(t,18,h);b(t.parent,l,c,E(t),!0);break;case 229:case 230:case 232:case 235:var u=S.findChildOfKind(t,17,h),g=S.findChildOfKind(t,18,h);b(t,u,g,E(t),!0);break;case 178:var p=S.findChildOfKind(t,17,h),d=S.findChildOfKind(t,18,h);b(t,p,d,E(t),!S.isArrayLiteralExpression(t.parent));break;case 177:var _=S.findChildOfKind(t,21,h),f=S.findChildOfKind(t,22,h);b(t,_,f,E(t),!S.isArrayLiteralExpression(t.parent))}v++,S.forEachChild(t,e),v--}}(h),function(){for(var e=h.getLineStarts(),t=0;t<e.length;t++){var n=e[t],o=e[t+1]-1||h.getEnd(),r=h.text.substring(n,o),i=r.match(g);if(i&&!S.isInComment(h,n))if(i[1]){var a=c.pop();a&&(a.textSpan.length=o-a.textSpan.start,a.hintSpan.length=o-a.textSpan.start,y.push(a))}else{var s=h.getFullText().indexOf("//",n),l=S.createTextSpanFromBounds(s,o),a={textSpan:l,hintSpan:l,bannerText:i[2]||u,autoCollapse:!1};c.push(a)}}}(),y.sort(function(e,t){return e.textSpan.start-t.textSpan.start});function b(e,t,n,o,r){if(e&&t&&n){var i={textSpan:S.createTextSpanFromBounds(r?t.getFullStart():t.getStart(),n.getEnd()),hintSpan:S.createTextSpanFromNode(e,h),bannerText:C,autoCollapse:o};y.push(i)}}function k(e,t){if(e){var n={textSpan:S.createTextSpanFromBounds(e.pos,e.end),hintSpan:S.createTextSpanFromBounds(e.pos,e.end),bannerText:C,autoCollapse:t};y.push(n)}}function T(e,t,n){1<e&&k({kind:2,pos:t,end:n},!1)}function E(e){return S.isFunctionBlock(e)&&187!==e.parent.kind}}}(ts||(ts={})),function(f){var h,e;function m(e,t,n,o){return{kind:e,punctuationStripped:t,isCaseSensitive:n,camelCaseWeight:o}}function o(e){return 0===e.subWordTextChunks.length}function y(e){if(65<=e&&e<=90)return!0;if(e<127||!f.isUnicodeIdentifierStart(e,5))return!1;var t=String.fromCharCode(e);return t===t.toUpperCase()}function l(e){if(97<=e&&e<=122)return!0;if(e<127||!f.isUnicodeIdentifierStart(e,5))return!1;var t=String.fromCharCode(e);return t===t.toLowerCase()}function v(e,t,n){for(var o=0;o<t.length;o++){if(b(e.charCodeAt(o+n))!==t.charCodeAt(o))return!1}return!0}function b(e){return 65<=e&&e<=90?e-65+97:e<127?e:String.fromCharCode(e).toLowerCase().charCodeAt(0)}function k(e){return 48<=e&&e<=57}function T(e){var t=e.toLowerCase();return{text:e,textLowerCase:t,isLowerCase:e===t,characterSpans:n(e)}}function n(e){return t(e,!1)}function r(e){return t(e,!0)}function t(e,t){for(var n,o,r,i,a,s=[],l=0,c=1;c<e.length;c++){var u=k(e.charCodeAt(c-1)),g=k(e.charCodeAt(c)),p=(o=t,r=c,void 0,i=y((n=e).charCodeAt(r-1)),a=y(n.charCodeAt(r)),o?a&&!i:a),d=S(e,t,c,l);(_(e.charCodeAt(c-1))||_(e.charCodeAt(c))||u!==g||p||d)&&(E(e,l,c)||s.push(f.createTextSpan(l,c-l)),l=c)}return E(e,l,e.length)||s.push(f.createTextSpan(l,e.length-l)),s}function _(e){switch(e){case 33:case 34:case 35:case 37:case 38:case 39:case 40:case 41:case 42:case 44:case 45:case 46:case 47:case 58:case 59:case 63:case 64:case 91:case 92:case 93:case 95:case 123:case 125:return!0}return!1}function E(e,t,n){for(var o=t;o<n;o++){var r=e.charCodeAt(o);if(!_(r)||95===r||36===r)return!1}return!0}function S(e,t,n,o){if(t&&n!==o&&n+1<e.length){var r=y(e.charCodeAt(n)),i=l(e.charCodeAt(n+1));if(r&&i){for(var a=o;a<n;a++)if(!y(e.charCodeAt(a)))return!1;return!0}}return!1}(e=h=f.PatternMatchKind||(f.PatternMatchKind={}))[e.exact=0]="exact",e[e.prefix=1]="prefix",e[e.substring=2]="substring",e[e.camelCase=3]="camelCase",f.createPatternMatcher=function(e){var n=f.createMap(),c=(e=e.trim()).split(".").map(function(e){return{totalTextChunk:T(t=e.trim()),subWordTextChunks:function(e){for(var t=[],n=0,o=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);y(a=i)||l(a)||k(a)||95===a||36===a?(0===o&&(n=r),o++):0<o&&(t.push(T(e.substr(n,o))),o=0)}var a;return 0<o&&t.push(T(e.substr(n,o))),t}(t)};var t}),t=0===c.length||f.forEach(c,o);return{getMatches:function(e,t){if(!u(t)){var n=p(t,f.lastOrUndefined(c));if(n&&(e=e||[],!(c.length-1>e.length))){for(var o=n,r=c.length-2,i=e.length-1;0<=r;r-=1,i-=1){var a=c[r],s=e[i],l=p(s,a);if(!l)return;f.addRange(o,l)}return o}}},getMatchesForLastSegmentOfPattern:function(e){if(!u(e))return p(e,f.lastOrUndefined(c))},patternContainsDots:1<c.length};function u(e){return t||!e}function g(e){var t=n.get(e);return t||n.set(e,t=r(e)),t}function s(e,t,n){var o=function(e,t){for(var n=e.length-t.length,o=0;o<=n;o++)if(v(e,t,o))return o;return-1}(e,t.textLowerCase);if(0===o)return t.text.length===e.length?m(h.exact,n,e===t.text):m(h.prefix,n,f.startsWith(e,t.text));var r=t.isLowerCase;if(r){if(0<o)for(var i=0,a=g(e);i<a.length;i++){var s=a[i];if(d(e,s,t.text,!0))return m(h.substring,n,d(e,s,t.text,!1))}}else if(0<e.indexOf(t.text))return m(h.substring,n,!0);if(!r&&0<t.characterSpans.length){var l=g(e),c=_(e,l,t,!1);if(void 0!==c)return m(h.camelCase,n,!0,c);if(void 0!==(c=_(e,l,t,!0)))return m(h.camelCase,n,!1,c)}return r&&t.text.length<e.length&&0<o&&y(e.charCodeAt(o))?m(h.substring,n,!1):void 0}function p(e,t){if(!function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(32===n||42===n)return!0}return!1}(t.totalTextChunk.text)){var n=s(e,t.totalTextChunk,!1);if(n)return[n]}for(var o=void 0,r=0,i=t.subWordTextChunks;r<i.length;r++){var a=s(e,i[r],!0);if(!a)return;(o=o||[]).push(a)}return o}function d(e,t,n,o,r){var i=r?r.start:0,a=r?r.length:n.length;if(a>t.length)return!1;if(o)for(var s=0;s<a;s++){var l=n.charCodeAt(i+s),c=e.charCodeAt(t.start+s);if(b(l)!==b(c))return!1}else for(s=0;s<a;s++)if((l=n.charCodeAt(i+s))!==(c=e.charCodeAt(t.start+s)))return!1;return!0}function _(e,t,n,o){for(var r=n.characterSpans,i=0,a=0,s=void 0,l=void 0;;){if(a===r.length){var c=0;return l&&(c+=1),0===s&&(c+=2),c}if(i===t.length)return;for(var u=t[i],g=!1;a<r.length;a++){var p=r[a];if(g&&(!y(n.text.charCodeAt(r[a-1].start))||!y(n.text.charCodeAt(r[a].start))))break;if(!d(e,u,n.text,o,p))break;g=!0,s=void 0===s?i:s,l=void 0===l||l,u=f.createTextSpan(u.start+p.length,u.length-p.length)}g||void 0===l||(l=!1),i++}}},f.breakIntoCharacterSpans=n,f.breakIntoWordSpans=r}(ts||(ts={})),function(x){x.preProcessFile=function(r,e,t){void 0===e&&(e=!0),void 0===t&&(t=!1);var n,o,i=[],a=[],s=[],l=!1,c=0,u=!1;function g(){var e=x.scanner.scan();return 17===e?c++:18===e&&c--,e}function p(){var e=x.scanner.getTokenValue(),t=x.scanner.getTokenPos();return{fileName:e,pos:t,end:t+e.length}}function d(){s.push(p()),_()}function _(){0===c&&(u=!0)}function f(){var e=x.scanner.getToken();return 124===e&&(128===(e=g())&&9===(e=g())&&(n||(n=[]),n.push({ref:p(),depth:c})),!0)}function h(){var e=x.scanner.getToken();if(91===e){if(19===(e=g())){if(9===(e=g()))return d(),!0}else{if(9===e)return d(),!0;if(71===e||x.isKeyword(e))if(140===(e=g())){if(9===(e=g()))return d(),!0}else if(58===e){if(y(!0))return!0}else{if(26!==e)return!0;e=g()}if(17===e){for(e=g();18!==e&&1!==e;)e=g();18===e&&140===(e=g())&&9===(e=g())&&d()}else 39===e&&118===(e=g())&&(71===(e=g())||x.isKeyword(e))&&140===(e=g())&&9===(e=g())&&d()}return!0}return!1}function m(){var e=x.scanner.getToken();if(84===e){if(_(),17===(e=g())){for(e=g();18!==e&&1!==e;)e=g();18===e&&140===(e=g())&&9===(e=g())&&d()}else if(39===e)140===(e=g())&&9===(e=g())&&d();else if(91===e&&(71===(e=g())||x.isKeyword(e))&&58===(e=g())&&y(!0))return!0;return!0}return!1}function y(e){var t=e?g():x.scanner.getToken();return 132===t&&(19===(t=g())&&9===(t=g())&&d(),!0)}function v(){var e=x.scanner.getToken();if(71===e&&"define"===x.scanner.getTokenValue()){if(19!==(e=g()))return!0;if(9===(e=g())){if(26!==(e=g()))return!0;e=g()}if(21!==e)return!0;for(e=g();22!==e&&1!==e;)9===e&&d(),e=g();return!0}return!1}if(e&&function(){for(x.scanner.setText(r),g();1!==x.scanner.getToken();)f()||h()||m()||t&&(y(!1)||v())||g();x.scanner.setText(void 0)}(),o=x.getLeadingCommentRanges(r,0),x.forEach(o,function(e){var t=r.substring(e.pos,e.end),n=x.getFileReferenceFromReferencePath(t,e);if(n){l=n.isNoDefaultLib;var o=n.fileReference;o&&(n.isTypeReferenceDirective?a:i).push(o)}}),u){if(n)for(var b=0,k=n;b<k.length;b++){var T=k[b];s.push(T.ref)}return{referencedFiles:i,typeReferenceDirectives:a,importedFiles:s,isLibFile:l,ambientExternalModules:void 0}}var E=void 0;if(n)for(var S=0,C=n;S<C.length;S++)0===(T=C[S]).depth?(E||(E=[]),E.push(T.ref.fileName)):s.push(T.ref);return{referencedFiles:i,typeReferenceDirectives:a,importedFiles:s,isLibFile:l,ambientExternalModules:E}}}(ts||(ts={})),function(u){!function(e){function l(e,t,n,o,r,i){return{canRename:!0,kind:n,displayName:e,localizedErrorMessage:void 0,fullDisplayName:t,kindModifiers:o,triggerSpan:function(e,t){var n=e.getStart(t),o=e.getWidth(t);9===e.kind&&(n+=1,o-=2);return u.createTextSpan(n,o)}(r,i)}}function c(e){return{canRename:!1,localizedErrorMessage:u.getLocaleSpecificMessage(e),displayName:void 0,fullDisplayName:void 0,kind:void 0,kindModifiers:void 0,triggerSpan:void 0}}(u.Rename||(u.Rename={})).getRenameInfo=function(e,n,o,t,r){var i=u.memoize(function(){return o(u.normalizePath(n))}),a=u.getTouchingWord(t,r,!0);return(a&&function(e){switch(e.kind){case 71:case 9:case 99:return!0;case 8:return u.isLiteralNameOfPropertyDeclarationOrIndexAccess(e);default:return!1}}(a)?function(e,t,n,o){var r=t.getSymbolAtLocation(e);if(r){var i=r.getDeclarations();if(i&&0<i.length){if(u.some(i,o))return c(u.Diagnostics.You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library);if(71===e.kind&&79===e.originalKeywordKind&&1536&r.parent.flags)return;var a=u.stripQuotes(u.getDeclaredName(t,r,e)),s=u.SymbolDisplay.getSymbolKind(t,r,e);return s?l(a,t.getFullyQualifiedName(r),s,u.SymbolDisplay.getSymbolModifiers(r),e,n):void 0}}else if(9===e.kind){if(o(e))return c(u.Diagnostics.You_cannot_rename_elements_that_are_defined_in_the_standard_TypeScript_library);var a=u.stripQuotes(e.text);return l(a,a,"var","",e,n)}}(a,e,t,function(e){if(!n)return!1;var t=e.getSourceFile();return o(u.normalizePath(t.fileName))===i()}):void 0)||c(u.Diagnostics.You_cannot_rename_this_element)}}()}(ts||(ts={})),function(T){!function(e){var t;function i(e,t,n){if(T.isCallOrNewExpression(e.parent)){var o=e.parent,r=void 0,i=void 0;if(27===e.kind||19===e.kind)m=e,y=n,v=o.getChildren(y),b=v.indexOf(m),T.Debug.assert(0<=b&&v.length>b+1),r=v[b+1],T.Debug.assert(void 0!==r),i=0;else{if(!(r=T.findContainingList(e)))return;i=function(e,t){for(var n=0,o=e.getChildren(),r=0,i=o;r<i.length;r++){var a=i[r];if(a===t)break;26!==a.kind&&n++}return n}(r,e)}var a=o.typeArguments&&o.typeArguments.pos===r.pos?0:1,s=function(e){var t=e.getChildren(),n=T.countWhere(t,function(e){return 26!==e.kind});0<t.length&&26===T.lastOrUndefined(t).kind&&n++;return n}(r);return 0!==i&&T.Debug.assertLessThan(i,s),{kind:a,invocation:o,argumentsSpan:(_=n,f=(d=r).getFullStart(),h=T.skipTrivia(_.text,d.getEnd(),!1),T.createTextSpan(f,h-f)),argumentIndex:i,argumentCount:s}}if(13===e.kind&&183===e.parent.kind){if(T.isInsideTemplateLiteral(e,t))return k(e.parent,0,n)}else{if(14===e.kind&&183===e.parent.parent.kind){var l=(c=e.parent).parent;return T.Debug.assert(196===c.kind),k(l,i=T.isInsideTemplateLiteral(e,t)?0:1,n)}if(205===e.parent.kind&&183===e.parent.parent.parent.kind){var c,u=e.parent;l=(c=u.parent).parent;if(T.Debug.assert(196===c.kind),16===e.kind&&!T.isInsideTemplateLiteral(e,t))return;return k(l,i=function(e,t,n){if(T.Debug.assert(n>=t.getStart(),"Assumed 'position' could not occur before node."),T.isTemplateLiteralKind(t.kind))return T.isInsideTemplateLiteral(t,n)?0:e+2;return e+1}(c.templateSpans.indexOf(u),e,t),n)}if(e.parent&&T.isJsxOpeningLikeElement(e.parent)){var g=e.parent.attributes.getFullStart(),p=T.skipTrivia(n.text,e.parent.attributes.getEnd(),!1);return{kind:3,invocation:e.parent,argumentsSpan:T.createTextSpan(g,p-g),argumentIndex:0,argumentCount:1}}}var d,_,f,h,m,y,v,b}function k(e,t,n){var o=13===e.template.kind?1:e.template.templateSpans.length+1;return 0!==t&&T.Debug.assertLessThan(t,o),{kind:2,invocation:e,argumentsSpan:function(e,t){var n=e.template,o=n.getStart(),r=n.getEnd();if(196===n.kind){var i=T.lastOrUndefined(n.templateSpans);0===i.literal.getFullWidth()&&(r=T.skipTrivia(t.text,r,!1))}return T.createTextSpan(o,r-o)}(e,n),argumentIndex:t,argumentCount:o}}function u(e,t,n){for(var o=e;265!==o.kind;o=o.parent){if(T.isFunctionBlock(o))return;(o.pos<o.parent.pos||o.end>o.parent.end)&&T.Debug.fail("Node of kind "+o.kind+" is not a subspan of its parent of kind "+o.parent.kind);var r=i(o,t,n);if(r)return r}}function h(e,t,n,c){var o=n.argumentCount,r=n.argumentsSpan,u=n.invocation,i=n.argumentIndex,g=0===n.kind,a=T.getInvokedExpression(u),s=c.getSymbolAtLocation(a),p=s&&T.symbolToDisplayParts(c,s,void 0,void 0),l=T.map(e,function(t){var e,n,o=[],r=[];if(p&&T.addRange(o,p),g){n=!1,o.push(T.punctuationPart(27));var i=(t.target||t).typeParameters;e=i&&0<i.length?T.map(i,f):T.emptyArray,r.push(T.punctuationPart(29));var a=T.mapToDisplayParts(function(e){return c.getSymbolDisplayBuilder().buildDisplayForParametersAndDelimiters(t.thisParameter,t.parameters,e,u)});T.addRange(r,a)}else{n=t.hasRestParameter;var s=T.mapToDisplayParts(function(e){return c.getSymbolDisplayBuilder().buildDisplayForTypeParametersAndDelimiters(t.typeParameters,e,u)});T.addRange(o,s),o.push(T.punctuationPart(19)),e=T.map(t.parameters,_),r.push(T.punctuationPart(20))}var l=T.mapToDisplayParts(function(e){return c.getSymbolDisplayBuilder().buildReturnTypeDisplay(t,e,u)});return T.addRange(r,l),{isVariadic:n,prefixDisplayParts:o,suffixDisplayParts:r,separatorDisplayParts:[T.punctuationPart(26),T.spacePart()],parameters:e,documentation:t.getDocumentationComment(),tags:t.getJsDocTags()}});0!==i&&T.Debug.assertLessThan(i,o);var d=e.indexOf(t);return T.Debug.assert(-1!==d),{items:l,applicableSpan:r,selectedItemIndex:d,argumentIndex:i,argumentCount:o};function _(t){var e=T.mapToDisplayParts(function(e){return c.getSymbolDisplayBuilder().buildParameterDisplay(t,e,u)});return{name:t.name,documentation:t.getDocumentationComment(),displayParts:e,isOptional:c.isOptionalParameter(t.valueDeclaration)}}function f(t){var e=T.mapToDisplayParts(function(e){return c.getSymbolDisplayBuilder().buildTypeParameterDisplay(t,e,u)});return{name:t.symbol.name,documentation:T.emptyArray,displayParts:e,isOptional:!1}}}(t=e.ArgumentListKind||(e.ArgumentListKind={}))[t.TypeArguments=0]="TypeArguments",t[t.CallArguments=1]="CallArguments",t[t.TaggedTemplateArguments=2]="TaggedTemplateArguments",t[t.JSXAttributesArguments=3]="JSXAttributesArguments",e.getSignatureHelpItems=function(e,t,n,o){var r=e.getTypeChecker(),i=T.findTokenOnLeftOfPosition(t,n);if(i){var a=u(i,n,t);if(a){o.throwIfCancellationRequested();var s=a.invocation,l=[],c=r.getResolvedSignature(s,l,a.argumentCount);return o.throwIfCancellationRequested(),l.length?h(l,c,a,r):T.isSourceFileJavaScript(t)?function(e,t){if(181===e.invocation.kind){var n=e.invocation.expression,o=71===n.kind?n:179===n.kind?n.name:void 0;if(o&&o.escapedText)for(var r=t.getTypeChecker(),i=0,a=t.getSourceFiles();i<a.length;i++){var s=a[i],l=s.getNamedDeclarations(),c=l.get(o.text);if(c)for(var u=0,g=c;u<g.length;u++){var p=g[u],d=p.symbol;if(d){var _=r.getTypeOfSymbolAtLocation(d,p);if(_){var f=_.getCallSignatures();if(f&&f.length)return h(f,f[0],e,r)}}}}}}(a,e):void 0}}},e.getImmediatelyContainingArgumentInfo=i,e.getContainingArgumentInfo=u}(T.SignatureHelp||(T.SignatureHelp={}))}(ts||(ts={})),function(M){!function(e){function L(e,t,n){var o=M.getCombinedLocalAndExportSymbolFlags(t);if(32&o)return M.getDeclarationOfKind(t,199)?"local class":"class";if(384&o)return"enum";if(524288&o)return"type";if(64&o)return"interface";if(262144&o)return"type parameter";var r=P(e,t,n);if(""===r){if(262144&o)return"type parameter";if(8&o)return"enum member";if(2097152&o)return"alias";if(1536&o)return"module"}return r}function P(e,t,n){if(e.isUndefinedSymbol(t))return"var";if(e.isArgumentsSymbol(t))return"local var";if(99===n.kind&&M.isExpression(n))return"parameter";var o=M.getCombinedLocalAndExportSymbolFlags(t);if(3&o)return M.isFirstDeclarationOfSymbolParameter(t)?"parameter":t.valueDeclaration&&M.isConst(t.valueDeclaration)?"const":M.forEach(t.declarations,M.isLet)?"let":i(t)?"local var":"var";if(16&o)return i(t)?"local function":"function";if(32768&o)return"getter";if(65536&o)return"setter";if(8192&o)return"method";if(16384&o)return"constructor";if(4&o){if(33554432&o&&6&t.checkFlags){var r=M.forEach(e.getRootSymbols(t),function(e){var t=e.getFlags();if(98311&t)return"property";M.Debug.assert(!!(8208&t))});return r||(e.getTypeOfSymbolAtLocation(t,n).getCallSignatures().length?"method":"property")}return n.parent&&M.isJsxAttribute(n.parent)?"JSX attribute":"property"}return""}function i(e){return!e.parent&&M.forEach(e.declarations,function(e){if(186===e.kind)return!0;if(226!==e.kind&&228!==e.kind)return!1;for(var t=e.parent;!M.isFunctionBlock(t);t=t.parent)if(265===t.kind||234===t.kind)return!1;return!0})}e.getSymbolKind=L,e.getSymbolModifiers=function(e){return e&&e.declarations&&0<e.declarations.length?M.getNodeModifiers(e.declarations[0]):""},e.getSymbolDisplayPartsDocumentationAndSymbolKind=function(o,e,r,i,t,n){void 0===n&&(n=M.getMeaningFromLocation(t));var a,s,l,c,u=[],g=M.getCombinedLocalAndExportSymbolFlags(e),p=P(o,e,t),d=99===t.kind&&M.isExpression(t);if(""!==p||32&g||2097152&g){"getter"!==p&&"setter"!==p||(p="property");var _=void 0;if(c=d?o.getTypeAtLocation(t):o.getTypeOfSymbolAtLocation(e.exportSymbol||e,t),t.parent&&179===t.parent.kind){var f=t.parent.name;(f===t||f&&0===f.getFullWidth())&&(t=t.parent)}var h=void 0;if(M.isCallOrNewExpression(t)?h=t:M.isCallExpressionTarget(t)||M.isNewExpressionTarget(t)?h=t.parent:t.parent&&M.isJsxOpeningLikeElement(t.parent)&&M.isFunctionLike(e.valueDeclaration)&&(h=t.parent),h){_=o.getResolvedSignature(h,[]);var m=182===h.kind||M.isCallExpression(h)&&97===h.expression.kind,y=m?c.getConstructSignatures():c.getCallSignatures();if(M.contains(y,_.target)||M.contains(y,_)||(_=y.length?y[0]:void 0),_){switch(m&&32&g?(p="constructor",N(c.symbol,p)):2097152&g?(w(p="alias"),u.push(M.spacePart()),m&&(u.push(M.keywordPart(94)),u.push(M.spacePart())),I(e)):N(e,p),p){case"JSX attribute":case"property":case"var":case"const":case"let":case"parameter":case"local var":u.push(M.punctuationPart(56)),u.push(M.spacePart()),m&&(u.push(M.keywordPart(94)),u.push(M.spacePart())),32768&c.flags&&16&c.objectFlags||!c.symbol||M.addRange(u,M.symbolToDisplayParts(o,c.symbol,i,void 0,1)),O(_,y,16);break;default:O(_,y)}l=!0}}else if(M.isNameOfFunctionDeclaration(t)&&!(98304&g)||123===t.kind&&152===t.parent.kind){var v=t.parent;M.find(e.declarations,function(e){return e===(123===t.kind?v.parent:v)})&&(y=152===v.kind?c.getNonNullableType().getConstructSignatures():c.getNonNullableType().getCallSignatures(),_=o.isImplementationOfOverload(v)?y[0]:o.getSignatureFromDeclaration(v),152===v.kind?(p="constructor",N(c.symbol,p)):N(155!==v.kind||2048&c.symbol.flags||4096&c.symbol.flags?e:c.symbol,p),O(_,y),l=!0)}}if(32&g&&!l&&!d&&(M.getDeclarationOfKind(e,199)?w("local class"):u.push(M.keywordPart(75)),u.push(M.spacePart()),I(e),R(e,r)),64&g&&2&n&&(D(),u.push(M.keywordPart(109)),u.push(M.spacePart()),I(e),R(e,r)),524288&g&&(D(),u.push(M.keywordPart(138)),u.push(M.spacePart()),I(e),R(e,r),u.push(M.spacePart()),u.push(M.operatorPart(58)),u.push(M.spacePart()),M.addRange(u,M.typeToDisplayParts(o,o.getDeclaredTypeOfSymbol(e),i,1024))),384&g&&(D(),M.forEach(e.declarations,M.isConstEnumDeclaration)&&(u.push(M.keywordPart(76)),u.push(M.spacePart())),u.push(M.keywordPart(83)),u.push(M.spacePart()),I(e)),1536&g){D();var b=(x=M.getDeclarationOfKind(e,233))&&x.name&&71===x.name.kind;u.push(M.keywordPart(b?129:128)),u.push(M.spacePart()),I(e)}if(262144&g&&2&n)if(D(),u.push(M.punctuationPart(19)),u.push(M.textPart("type parameter")),u.push(M.punctuationPart(20)),u.push(M.spacePart()),I(e),e.parent)B(),I(e.parent,i),R(e.parent,i);else{var k=M.getDeclarationOfKind(e,145);M.Debug.assert(void 0!==k),(x=k.parent)&&(M.isFunctionLikeKind(x.kind)?(B(),_=o.getSignatureFromDeclaration(x),156===x.kind?(u.push(M.keywordPart(94)),u.push(M.spacePart())):155!==x.kind&&x.name&&I(x.symbol),M.addRange(u,M.signatureToDisplayParts(o,_,r,64))):231===x.kind&&(B(),u.push(M.keywordPart(138)),u.push(M.spacePart()),I(x.symbol),R(x.symbol,r)))}if(8&g&&(N(e,p="enum member"),264===(x=e.declarations[0]).kind)){var T=o.getConstantValue(x);void 0!==T&&(u.push(M.spacePart()),u.push(M.operatorPart(58)),u.push(M.spacePart()),u.push(M.displayPart(M.getTextOfConstantValue(T),"number"==typeof T?M.SymbolDisplayPartKind.numericLiteral:M.SymbolDisplayPartKind.stringLiteral)))}if(2097152&g){switch(D(),e.declarations[0].kind){case 236:u.push(M.keywordPart(84)),u.push(M.spacePart()),u.push(M.keywordPart(129));break;case 243:u.push(M.keywordPart(84)),u.push(M.spacePart()),u.push(M.keywordPart(e.declarations[0].isExportEquals?58:79));break;default:u.push(M.keywordPart(91))}u.push(M.spacePart()),I(e),M.forEach(e.declarations,function(e){if(237===e.kind){var t=e;if(M.isExternalModuleImportEqualsDeclaration(t))u.push(M.spacePart()),u.push(M.operatorPart(58)),u.push(M.spacePart()),u.push(M.keywordPart(132)),u.push(M.punctuationPart(19)),u.push(M.displayPart(M.getTextOfNode(M.getExternalModuleImportEqualsDeclarationExpression(t)),M.SymbolDisplayPartKind.stringLiteral)),u.push(M.punctuationPart(20));else{var n=o.getSymbolAtLocation(t.moduleReference);n&&(u.push(M.spacePart()),u.push(M.operatorPart(58)),u.push(M.spacePart()),I(n,i))}return!0}})}if(!l)if(""!==p){if(c)if(d?(D(),u.push(M.keywordPart(99))):N(e,p),"property"===p||"JSX attribute"===p||3&g||"local var"===p||d)if(u.push(M.punctuationPart(56)),u.push(M.spacePart()),c.symbol&&262144&c.symbol.flags){var E=M.mapToDisplayParts(function(e){o.getSymbolDisplayBuilder().buildTypeParameterDisplay(c,e,i)});M.addRange(u,E)}else M.addRange(u,M.typeToDisplayParts(o,c,i));else(16&g||8192&g||16384&g||131072&g||98304&g||"method"===p)&&(y=c.getNonNullableType().getCallSignatures()).length&&O(y[0],y)}else p=L(o,e,t);if(!a&&(a=e.getDocumentationComment(),s=e.getJsDocTags(),0===a.length&&4&g&&e.parent&&M.forEach(e.parent.declarations,function(e){return 265===e.kind})))for(var S=0,C=e.declarations;S<C.length;S++){var x;if((x=C[S]).parent&&194===x.parent.kind){var A=o.getSymbolAtLocation(x.parent.right);if(A&&(a=A.getDocumentationComment(),s=A.getJsDocTags(),0<a.length))break}}return{displayParts:u,documentation:a,symbolKind:p,tags:s};function D(){u.length&&u.push(M.lineBreakPart())}function B(){u.push(M.spacePart()),u.push(M.keywordPart(92)),u.push(M.spacePart())}function I(e,t){var n=M.symbolToDisplayParts(o,e,t||r,void 0,3);M.addRange(u,n)}function N(e,t){D(),t&&(w(t),u.push(M.spacePart()),I(e))}function w(e){switch(e){case"var":case"function":case"let":case"const":case"constructor":return void u.push(M.textOrKeywordPart(e));default:return u.push(M.punctuationPart(19)),u.push(M.textOrKeywordPart(e)),void u.push(M.punctuationPart(20))}}function O(e,t,n){M.addRange(u,M.signatureToDisplayParts(o,e,i,64|n)),1<t.length&&(u.push(M.spacePart()),u.push(M.punctuationPart(19)),u.push(M.operatorPart(37)),u.push(M.displayPart((t.length-1).toString(),M.SymbolDisplayPartKind.numericLiteral)),u.push(M.spacePart()),u.push(M.textPart(2===t.length?"overload":"overloads")),u.push(M.punctuationPart(20))),a=e.getDocumentationComment(),s=e.getJsDocTags()}function R(t,n){var e=M.mapToDisplayParts(function(e){o.getSymbolDisplayBuilder().buildTypeParameterDisplayFromSymbol(t,e,n)});M.addRange(u,e)}}}(M.SymbolDisplay||(M.SymbolDisplay={}))}(ts||(ts={})),function(g){function a(e,t){var n=[],o=t.compilerOptions?p(t.compilerOptions,n):g.getDefaultCompilerOptions();o.isolatedModules=!0,o.suppressOutputPathCheck=!0,o.allowNonTsExtensions=!0,o.noLib=!0,o.lib=void 0,o.types=void 0,o.noEmit=void 0,o.noEmitOnError=void 0,o.paths=void 0,o.rootDirs=void 0,o.declaration=void 0,o.declarationDir=void 0,o.out=void 0,o.outFile=void 0,o.noResolve=!0;var r=t.fileName||(o.jsx?"module.tsx":"module.ts"),i=g.createSourceFile(r,e,o.target);t.moduleName&&(i.moduleName=t.moduleName),t.renamedDependencies&&(i.renamedDependencies=g.createMapFromTemplate(t.renamedDependencies));var a,s,l=g.getNewLineCharacter(o),c={getSourceFile:function(e){return e===g.normalizePath(r)?i:void 0},writeFile:function(e,t){g.fileExtensionIs(e,".map")?(g.Debug.assertEqual(s,void 0,"Unexpected multiple source map outputs, file:",e),s=t):(g.Debug.assertEqual(a,void 0,"Unexpected multiple outputs, file:",e),a=t)},getDefaultLibFileName:function(){return"lib.d.ts"},useCaseSensitiveFileNames:function(){return!1},getCanonicalFileName:function(e){return e},getCurrentDirectory:function(){return""},getNewLine:function(){return l},fileExists:function(e){return e===r},readFile:function(){return""},directoryExists:function(){return!0},getDirectories:function(){return[]}},u=g.createProgram([r],o,c);return t.reportDiagnostics&&(g.addRange(n,u.getSyntacticDiagnostics(i)),g.addRange(n,u.getOptionsDiagnostics())),u.emit(void 0,void 0,void 0,void 0,t.transformers),g.Debug.assert(void 0!==a,"Output generation failed"),{outputText:a,diagnostics:n,sourceMapText:s}}var i;function p(n,o){i=i||g.filter(g.optionDeclarations,function(e){return"object"==typeof e.type&&!g.forEachEntry(e.type,function(e){return"number"!=typeof e})}),n=g.cloneCompilerOptions(n);for(var e=function(e){if(!g.hasProperty(n,e.name))return"continue";var t=n[e.name];g.isString(t)?n[e.name]=g.parseCustomTypeOption(e,t,o):g.forEachEntry(e.type,function(e){return e===t})||o.push(g.createCompilerDiagnosticForInvalidCustomType(e))},t=0,r=i;t<r.length;t++){e(r[t])}return n}g.transpileModule=a,g.transpile=function(e,t,n,o,r){var i=a(e,{compilerOptions:t,fileName:n,reportDiagnostics:!!o,moduleName:r});return g.addRange(o,i.diagnostics),i.outputText},g.fixupCompilerOptions=p}(ts||(ts={})),function(f){var e,t,n,h,m;e=f.formatting||(f.formatting={}),h=f.createScanner(5,!1,0),m=f.createScanner(5,!1,1),(n=t||(t={}))[n.Scan=0]="Scan",n[n.RescanGreaterThanToken=1]="RescanGreaterThanToken",n[n.RescanSlashToken=2]="RescanSlashToken",n[n.RescanTemplateToken=3]="RescanTemplateToken",n[n.RescanJsxIdentifier=4]="RescanJsxIdentifier",n[n.RescanJsxText=5]="RescanJsxText",e.getFormattingScanner=function(e,t,o,a,n){var s=1===t?m:h;s.setText(e),s.setTextPos(o);var l,c,u,g,p,r=!0,i=n({advance:function(){p=void 0,s.getStartPos()!==o?r=c&&4===f.lastOrUndefined(c).kind:s.scan(),c=l=void 0;for(var e=s.getStartPos();e<a;){var t=s.getToken();if(!f.isTrivia(t))break;s.scan();var n={pos:e,end:s.getStartPos(),kind:t};e=s.getStartPos(),l=f.append(l,n)}u=s.getStartPos()},readTokenInfo:function(e){f.Debug.assert(d());var t,n=function(e){switch(e.kind){case 31:case 66:case 67:case 47:case 46:return!0}return!1}(e)?1:12===e.kind?2:15===(t=e).kind||16===t.kind?3:function(e){if(e.parent)switch(e.parent.kind){case 253:case 251:case 252:case 250:return f.isKeyword(e.kind)||71===e.kind}return!1}(e)?4:10===e.kind?5:0;if(p&&n===g)return _(p,e);s.getStartPos()!==u&&(f.Debug.assert(void 0!==p),s.setTextPos(u),s.scan());var o=function(e,t){var n,o=s.getToken();switch(g=0,t){case 1:if(29===o){g=1;var r=s.reScanGreaterToken();return f.Debug.assert(e.kind===r),r}break;case 2:if(41===(n=o)||63===n){g=2;var r=s.reScanSlashToken();return f.Debug.assert(e.kind===r),r}break;case 3:if(18===o)return g=3,s.reScanTemplateToken();break;case 4:return g=4,s.scanJsxIdentifier();case 5:return g=5,s.reScanJsxToken();case 0:break;default:f.Debug.assertNever(t)}return o}(e,n),r={pos:s.getStartPos(),end:s.getTextPos(),kind:o};for(c&&(c=void 0);s.getStartPos()<a&&(o=s.scan(),f.isTrivia(o));){var i={pos:s.getStartPos(),end:s.getTextPos(),kind:o};if(c||(c=[]),c.push(i),4===o){s.scan();break}}return _(p={leadingTrivia:l,trailingTrivia:c,token:r},e)},isOnToken:d,getCurrentLeadingTrivia:function(){return l},lastTrailingTriviaWasNewLine:function(){return r},skipToEndOf:function(e){s.setTextPos(e.end),u=s.getStartPos(),r=!1,c=l=p=g=void 0}});return p=void 0,s.setText(void 0),i;function d(){var e=p?p.token.kind:s.getToken();return(p?p.token.pos:s.getStartPos())<a&&1!==e&&!f.isTrivia(e)}function _(e,t){return f.isToken(t)&&e.token.kind!==t.kind&&(e.token.kind=t.kind),e}}}(ts||(ts={})),function(i){var e,t;e=i.formatting||(i.formatting={}),t=function(){function e(e,t,n){this.sourceFile=e,this.formattingRequestKind=t,this.options=n}return e.prototype.updateContext=function(e,t,n,o,r){i.Debug.assert(void 0!==e,"currentTokenSpan is null"),i.Debug.assert(void 0!==t,"currentTokenParent is null"),i.Debug.assert(void 0!==n,"nextTokenSpan is null"),i.Debug.assert(void 0!==o,"nextTokenParent is null"),i.Debug.assert(void 0!==r,"commonParent is null"),this.currentTokenSpan=e,this.currentTokenParent=t,this.nextTokenSpan=n,this.nextTokenParent=o,this.contextNode=r,this.contextNodeAllOnSameLine=void 0,this.nextNodeAllOnSameLine=void 0,this.tokensAreOnSameLine=void 0,this.contextNodeBlockIsOnOneLine=void 0,this.nextNodeBlockIsOnOneLine=void 0},e.prototype.ContextNodeAllOnSameLine=function(){return void 0===this.contextNodeAllOnSameLine&&(this.contextNodeAllOnSameLine=this.NodeIsOnOneLine(this.contextNode)),this.contextNodeAllOnSameLine},e.prototype.NextNodeAllOnSameLine=function(){return void 0===this.nextNodeAllOnSameLine&&(this.nextNodeAllOnSameLine=this.NodeIsOnOneLine(this.nextTokenParent)),this.nextNodeAllOnSameLine},e.prototype.TokensAreOnSameLine=function(){if(void 0===this.tokensAreOnSameLine){var e=this.sourceFile.getLineAndCharacterOfPosition(this.currentTokenSpan.pos).line,t=this.sourceFile.getLineAndCharacterOfPosition(this.nextTokenSpan.pos).line;this.tokensAreOnSameLine=e===t}return this.tokensAreOnSameLine},e.prototype.ContextNodeBlockIsOnOneLine=function(){return void 0===this.contextNodeBlockIsOnOneLine&&(this.contextNodeBlockIsOnOneLine=this.BlockIsOnOneLine(this.contextNode)),this.contextNodeBlockIsOnOneLine},e.prototype.NextNodeBlockIsOnOneLine=function(){return void 0===this.nextNodeBlockIsOnOneLine&&(this.nextNodeBlockIsOnOneLine=this.BlockIsOnOneLine(this.nextTokenParent)),this.nextNodeBlockIsOnOneLine},e.prototype.NodeIsOnOneLine=function(e){return this.sourceFile.getLineAndCharacterOfPosition(e.getStart(this.sourceFile)).line===this.sourceFile.getLineAndCharacterOfPosition(e.getEnd()).line},e.prototype.BlockIsOnOneLine=function(e){var t=i.findChildOfKind(e,17,this.sourceFile),n=i.findChildOfKind(e,18,this.sourceFile);return!(!t||!n)&&this.sourceFile.getLineAndCharacterOfPosition(t.getEnd()).line===this.sourceFile.getLineAndCharacterOfPosition(n.getStart(this.sourceFile)).line},e}(),e.FormattingContext=t}(ts||(ts={})),function(e){var t,n;t=e.formatting||(e.formatting={}),(n=t.FormattingRequestKind||(t.FormattingRequestKind={}))[n.FormatDocument=0]="FormatDocument",n[n.FormatSelection=1]="FormatSelection",n[n.FormatOnEnter=2]="FormatOnEnter",n[n.FormatOnSemicolon=3]="FormatOnSemicolon",n[n.FormatOnOpeningCurlyBrace=4]="FormatOnOpeningCurlyBrace",n[n.FormatOnClosingCurlyBrace=5]="FormatOnClosingCurlyBrace"}(ts||(ts={})),function(e){var t;t=function(e,t,n){void 0===n&&(n=0),this.Descriptor=e,this.Operation=t,this.Flag=n},(e.formatting||(e.formatting={})).Rule=t}(ts||(ts={})),function(e){var t,n;t=e.formatting||(e.formatting={}),(n=t.RuleAction||(t.RuleAction={}))[n.Ignore=1]="Ignore",n[n.Space=2]="Space",n[n.NewLine=4]="NewLine",n[n.Delete=8]="Delete"}(ts||(ts={})),function(e){var o,t;o=e.formatting||(e.formatting={}),t=function(){function n(e,t){this.LeftTokenRange=e,this.RightTokenRange=t}return n.prototype.toString=function(){return"[leftRange="+this.LeftTokenRange+",rightRange="+this.RightTokenRange+"]"},n.create1=function(e,t){return n.create4(o.Shared.TokenRange.FromToken(e),o.Shared.TokenRange.FromToken(t))},n.create2=function(e,t){return n.create4(e,o.Shared.TokenRange.FromToken(t))},n.create3=function(e,t){return n.create4(o.Shared.TokenRange.FromToken(e),t)},n.create4=function(e,t){return new n(e,t)},n}(),o.RuleDescriptor=t}(ts||(ts={})),function(e){var t,n;t=e.formatting||(e.formatting={}),(n=t.RuleFlags||(t.RuleFlags={}))[n.None=0]="None",n[n.CanDeleteNewLines=1]="CanDeleteNewLines"}(ts||(ts={})),function(e){var t,n;t=e.formatting||(e.formatting={}),n=function(){function n(e,t){this.Context=e,this.Action=t}return n.prototype.toString=function(){return"[context="+this.Context+",action="+this.Action+"]"},n.create1=function(e){return n.create2(t.RuleOperationContext.Any,e)},n.create2=function(e,t){return new n(e,t)},n}(),t.RuleOperation=n}(ts||(ts={})),function(e){var t,n;t=e.formatting||(e.formatting={}),n=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.customContextChecks=e}return e.prototype.IsAny=function(){return this===e.Any},e.prototype.InContext=function(e){if(this.IsAny())return!0;for(var t=0,n=this.customContextChecks;t<n.length;t++){if(!(0,n[t])(e))return!1}return!0},e.Any=new e,e}(),t.RuleOperationContext=n}(ts||(ts={})),function(o){var r,e;r=o.formatting||(o.formatting={}),e=function(){function n(){if(this.IgnoreBeforeComment=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.Comments),r.RuleOperation.create1(1)),this.IgnoreAfterLineComment=new r.Rule(r.RuleDescriptor.create3(2,r.Shared.TokenRange.Any),r.RuleOperation.create1(1)),this.NoSpaceBeforeSemicolon=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,25),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeColon=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,56),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),8)),this.NoSpaceBeforeQuestionMark=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,55),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),8)),this.SpaceAfterColon=new r.Rule(r.RuleDescriptor.create3(56,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),2)),this.SpaceAfterQuestionMarkInConditionalOperator=new r.Rule(r.RuleDescriptor.create3(55,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsConditionalOperatorContext),2)),this.NoSpaceAfterQuestionMark=new r.Rule(r.RuleDescriptor.create3(55,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterSemicolon=new r.Rule(r.RuleDescriptor.create3(25,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterCloseBrace=new r.Rule(r.RuleDescriptor.create3(18,r.Shared.TokenRange.FromRange(0,142,[20])),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsAfterCodeBlockContext),2)),this.SpaceBetweenCloseBraceAndElse=new r.Rule(r.RuleDescriptor.create1(18,82),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceBetweenCloseBraceAndWhile=new r.Rule(r.RuleDescriptor.create1(18,106),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterCloseBrace=new r.Rule(r.RuleDescriptor.create3(18,r.Shared.TokenRange.FromTokens([22,26,25])),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeDot=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,23),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterDot=new r.Rule(r.RuleDescriptor.create3(23,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeOpenBracket=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.AnyExcept(120),21),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterCloseBracket=new r.Rule(r.RuleDescriptor.create3(22,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBeforeBlockInFunctionDeclarationContext),8)),this.FunctionOpenBraceLeftTokenRange=r.Shared.TokenRange.AnyIncludingMultilineComments,this.SpaceBeforeOpenBraceInFunction=new r.Rule(r.RuleDescriptor.create2(this.FunctionOpenBraceLeftTokenRange,17),r.RuleOperation.create2(new r.RuleOperationContext(n.isOptionDisabledOrUndefinedOrTokensOnSameLine("placeOpenBraceOnNewLineForFunctions"),n.IsFunctionDeclContext,n.IsBeforeBlockContext,n.IsNotFormatOnEnter,n.IsSameLineTokenOrBeforeBlockContext),2),1),this.TypeScriptOpenBraceLeftTokenRange=r.Shared.TokenRange.FromTokens([71,3,75,84,91]),this.SpaceBeforeOpenBraceInTypeScriptDeclWithBlock=new r.Rule(r.RuleDescriptor.create2(this.TypeScriptOpenBraceLeftTokenRange,17),r.RuleOperation.create2(new r.RuleOperationContext(n.isOptionDisabledOrUndefinedOrTokensOnSameLine("placeOpenBraceOnNewLineForFunctions"),n.IsTypeScriptDeclWithBlockContext,n.IsNotFormatOnEnter,n.IsSameLineTokenOrBeforeBlockContext),2),1),this.ControlOpenBraceLeftTokenRange=r.Shared.TokenRange.FromTokens([20,3,81,102,87,82]),this.SpaceBeforeOpenBraceInControl=new r.Rule(r.RuleDescriptor.create2(this.ControlOpenBraceLeftTokenRange,17),r.RuleOperation.create2(new r.RuleOperationContext(n.isOptionDisabledOrUndefinedOrTokensOnSameLine("placeOpenBraceOnNewLineForControlBlocks"),n.IsControlDeclContext,n.IsNotFormatOnEnter,n.IsSameLineTokenOrBeforeBlockContext),2),1),this.SpaceAfterOpenBrace=new r.Rule(r.RuleDescriptor.create3(17,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),n.IsBraceWrappedContext),2)),this.SpaceBeforeCloseBrace=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,18),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),n.IsBraceWrappedContext),2)),this.NoSpaceAfterOpenBrace=new r.Rule(r.RuleDescriptor.create3(17,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeCloseBrace=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,18),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBetweenEmptyBraceBrackets=new r.Rule(r.RuleDescriptor.create1(17,18),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsObjectContext),8)),this.NewLineAfterOpenBraceInBlockContext=new r.Rule(r.RuleDescriptor.create3(17,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsMultilineBlockContext),4)),this.NewLineBeforeCloseBraceInBlockContext=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.AnyIncludingMultilineComments,18),r.RuleOperation.create2(new r.RuleOperationContext(n.IsMultilineBlockContext),4)),this.NoSpaceAfterUnaryPrefixOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.UnaryPrefixOperators,r.Shared.TokenRange.UnaryPrefixExpressions),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),8)),this.NoSpaceAfterUnaryPreincrementOperator=new r.Rule(r.RuleDescriptor.create3(43,r.Shared.TokenRange.UnaryPreincrementExpressions),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterUnaryPredecrementOperator=new r.Rule(r.RuleDescriptor.create3(44,r.Shared.TokenRange.UnaryPredecrementExpressions),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeUnaryPostincrementOperator=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.UnaryPostincrementExpressions,43),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeUnaryPostdecrementOperator=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.UnaryPostdecrementExpressions,44),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterPostincrementWhenFollowedByAdd=new r.Rule(r.RuleDescriptor.create1(43,37),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterAddWhenFollowedByUnaryPlus=new r.Rule(r.RuleDescriptor.create1(37,37),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterAddWhenFollowedByPreincrement=new r.Rule(r.RuleDescriptor.create1(37,43),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterPostdecrementWhenFollowedBySubtract=new r.Rule(r.RuleDescriptor.create1(44,38),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterSubtractWhenFollowedByUnaryMinus=new r.Rule(r.RuleDescriptor.create1(38,38),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterSubtractWhenFollowedByPredecrement=new r.Rule(r.RuleDescriptor.create1(38,44),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.NoSpaceBeforeComma=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,26),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterCertainKeywords=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([104,100,94,80,96,103,121]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterNewKeywordOnConstructorSignature=new r.Rule(r.RuleDescriptor.create1(94,19),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsConstructorSignatureContext),8)),this.SpaceAfterLetConstInVariableDeclaration=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([110,76]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsStartOfVariableDeclarationList),2)),this.NoSpaceBeforeOpenParenInFuncCall=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,19),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsFunctionCallOrNewContext,n.IsPreviousTokenNotComma),8)),this.SpaceAfterFunctionInFuncDecl=new r.Rule(r.RuleDescriptor.create3(89,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsFunctionDeclContext),2)),this.SpaceBeforeOpenParenInFuncDecl=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,19),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceBeforeFunctionParenthesis"),n.IsNonJsxSameLineTokenContext,n.IsFunctionDeclContext),2)),this.NoSpaceBeforeOpenParenInFuncDecl=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,19),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceBeforeFunctionParenthesis"),n.IsNonJsxSameLineTokenContext,n.IsFunctionDeclContext),8)),this.SpaceAfterVoidOperator=new r.Rule(r.RuleDescriptor.create3(105,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsVoidOpContext),2)),this.NoSpaceBetweenReturnAndSemicolon=new r.Rule(r.RuleDescriptor.create1(96,25),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceBetweenStatements=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([20,81,82,73]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNonJsxElementContext,n.IsNotForContext),2)),this.SpaceAfterTryFinally=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.FromTokens([102,87]),17),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterGetSetInMember=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.FromTokens([125,135]),71),r.RuleOperation.create2(new r.RuleOperationContext(n.IsFunctionDeclContext),2)),this.SpaceBeforeBinaryKeywordOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.BinaryKeywordOperators),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterBinaryKeywordOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.BinaryKeywordOperators,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterConstructor=new r.Rule(r.RuleDescriptor.create1(123,19),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterConstructor"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterConstructor=new r.Rule(r.RuleDescriptor.create1(123,19),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterConstructor"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterModuleImport=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.FromTokens([128,132]),19),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterCertainTypeScriptKeywords=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([117,75,124,79,83,84,85,125,108,91,109,128,129,112,114,113,131,135,115,138,140,127]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeCertainTypeScriptKeywords=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.FromTokens([85,108,140])),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterModuleName=new r.Rule(r.RuleDescriptor.create1(9,17),r.RuleOperation.create2(new r.RuleOperationContext(n.IsModuleDeclContext),2)),this.SpaceBeforeArrow=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,36),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.SpaceAfterArrow=new r.Rule(r.RuleDescriptor.create3(36,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterEllipsis=new r.Rule(r.RuleDescriptor.create1(24,71),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterOptionalParameters=new r.Rule(r.RuleDescriptor.create3(55,r.Shared.TokenRange.FromTokens([20,26])),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNotBinaryOpContext),8)),this.NoSpaceBeforeOpenAngularBracket=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.TypeNames,27),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceBetweenCloseParenAndAngularBracket=new r.Rule(r.RuleDescriptor.create1(20,27),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceAfterOpenAngularBracket=new r.Rule(r.RuleDescriptor.create3(27,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceBeforeCloseAngularBracket=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,29),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceAfterCloseAngularBracket=new r.Rule(r.RuleDescriptor.create3(29,r.Shared.TokenRange.FromTokens([19,21,29,26])),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsTypeArgumentOrParameterOrAssertionContext),8)),this.NoSpaceBetweenEmptyInterfaceBraceBrackets=new r.Rule(r.RuleDescriptor.create1(17,18),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsObjectTypeContext),8)),this.SpaceBeforeAt=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,57),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterAt=new r.Rule(r.RuleDescriptor.create3(57,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterDecorator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.FromTokens([117,71,84,79,75,115,114,112,113,125,135,21,39])),r.RuleOperation.create2(new r.RuleOperationContext(n.IsEndOfDecoratorContextOnSameLine),2)),this.NoSpaceBetweenFunctionKeywordAndStar=new r.Rule(r.RuleDescriptor.create1(89,39),r.RuleOperation.create2(new r.RuleOperationContext(n.IsFunctionDeclarationOrFunctionExpressionContext),8)),this.SpaceAfterStarInGeneratorDeclaration=new r.Rule(r.RuleDescriptor.create3(39,r.Shared.TokenRange.FromTokens([71,19])),r.RuleOperation.create2(new r.RuleOperationContext(n.IsFunctionDeclarationOrFunctionExpressionContext),2)),this.NoSpaceBetweenYieldKeywordAndStar=new r.Rule(r.RuleDescriptor.create1(116,39),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsYieldOrYieldStarWithOperand),8)),this.SpaceBetweenYieldOrYieldStarAndOperand=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([116,39]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsYieldOrYieldStarWithOperand),2)),this.SpaceBetweenAsyncAndOpenParen=new r.Rule(r.RuleDescriptor.create1(120,19),r.RuleOperation.create2(new r.RuleOperationContext(n.IsArrowFunctionContext,n.IsNonJsxSameLineTokenContext),2)),this.SpaceBetweenAsyncAndFunctionKeyword=new r.Rule(r.RuleDescriptor.create1(120,89),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBetweenTagAndTemplateString=new r.Rule(r.RuleDescriptor.create3(71,r.Shared.TokenRange.FromTokens([13,14])),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.SpaceBeforeJsxAttribute=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,71),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNextTokenParentJsxAttribute,n.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeSlashInJsxOpeningElement=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,41),r.RuleOperation.create2(new r.RuleOperationContext(n.IsJsxSelfClosingElementContext,n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBeforeGreaterThanTokenInJsxOpeningElement=new r.Rule(r.RuleDescriptor.create1(41,29),r.RuleOperation.create2(new r.RuleOperationContext(n.IsJsxSelfClosingElementContext,n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeEqualInJsxAttribute=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,58),r.RuleOperation.create2(new r.RuleOperationContext(n.IsJsxAttributeContext,n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterEqualInJsxAttribute=new r.Rule(r.RuleDescriptor.create3(58,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsJsxAttributeContext,n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeNonNullAssertionOperator=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,51),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext,n.IsNonNullAssertionContext),8)),this.SpaceAfterComma=new r.Rule(r.RuleDescriptor.create3(26,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterCommaDelimiter"),n.IsNonJsxSameLineTokenContext,n.IsNonJsxElementContext,n.IsNextTokenNotCloseBracket),2)),this.NoSpaceAfterComma=new r.Rule(r.RuleDescriptor.create3(26,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterCommaDelimiter"),n.IsNonJsxSameLineTokenContext,n.IsNonJsxElementContext),8)),this.SpaceBeforeBinaryOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.BinaryOperators),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceBeforeAndAfterBinaryOperators"),n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.SpaceAfterBinaryOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.BinaryOperators,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceBeforeAndAfterBinaryOperators"),n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),2)),this.NoSpaceBeforeBinaryOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.BinaryOperators),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceBeforeAndAfterBinaryOperators"),n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),8)),this.NoSpaceAfterBinaryOperator=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.BinaryOperators,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceBeforeAndAfterBinaryOperators"),n.IsNonJsxSameLineTokenContext,n.IsBinaryOpContext),8)),this.SpaceAfterKeywordInControl=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Keywords,19),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterKeywordsInControlFlowStatements"),n.IsControlDeclContext),2)),this.NoSpaceAfterKeywordInControl=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Keywords,19),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterKeywordsInControlFlowStatements"),n.IsControlDeclContext),8)),this.NewLineBeforeOpenBraceInFunction=new r.Rule(r.RuleDescriptor.create2(this.FunctionOpenBraceLeftTokenRange,17),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("placeOpenBraceOnNewLineForFunctions"),n.IsFunctionDeclContext,n.IsBeforeMultilineBlockContext),4),1),this.NewLineBeforeOpenBraceInTypeScriptDeclWithBlock=new r.Rule(r.RuleDescriptor.create2(this.TypeScriptOpenBraceLeftTokenRange,17),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("placeOpenBraceOnNewLineForFunctions"),n.IsTypeScriptDeclWithBlockContext,n.IsBeforeMultilineBlockContext),4),1),this.NewLineBeforeOpenBraceInControl=new r.Rule(r.RuleDescriptor.create2(this.ControlOpenBraceLeftTokenRange,17),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("placeOpenBraceOnNewLineForControlBlocks"),n.IsControlDeclContext,n.IsBeforeMultilineBlockContext),4),1),this.SpaceAfterSemicolonInFor=new r.Rule(r.RuleDescriptor.create3(25,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterSemicolonInForStatements"),n.IsNonJsxSameLineTokenContext,n.IsForContext),2)),this.NoSpaceAfterSemicolonInFor=new r.Rule(r.RuleDescriptor.create3(25,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterSemicolonInForStatements"),n.IsNonJsxSameLineTokenContext,n.IsForContext),8)),this.SpaceAfterOpenParen=new r.Rule(r.RuleDescriptor.create3(19,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeCloseParen=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,20),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),2)),this.SpaceBetweenOpenParens=new r.Rule(r.RuleDescriptor.create1(19,19),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBetweenParens=new r.Rule(r.RuleDescriptor.create1(19,20),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterOpenParen=new r.Rule(r.RuleDescriptor.create3(19,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeCloseParen=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,20),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis"),n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterOpenBracket=new r.Rule(r.RuleDescriptor.create3(21,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),n.IsNonJsxSameLineTokenContext),2)),this.SpaceBeforeCloseBracket=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,22),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBetweenBrackets=new r.Rule(r.RuleDescriptor.create1(21,22),r.RuleOperation.create2(new r.RuleOperationContext(n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterOpenBracket=new r.Rule(r.RuleDescriptor.create3(21,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceBeforeCloseBracket=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,22),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets"),n.IsNonJsxSameLineTokenContext),8)),this.NoSpaceAfterTemplateHeadAndMiddle=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([14,15]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),n.IsNonJsxSameLineTokenContext),8)),this.SpaceAfterTemplateHeadAndMiddle=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.FromTokens([14,15]),r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceBeforeTemplateMiddleAndTail=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.FromTokens([15,16])),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),n.IsNonJsxSameLineTokenContext),8)),this.SpaceBeforeTemplateMiddleAndTail=new r.Rule(r.RuleDescriptor.create4(r.Shared.TokenRange.Any,r.Shared.TokenRange.FromTokens([15,16])),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces"),n.IsNonJsxSameLineTokenContext),2)),this.NoSpaceAfterOpenBraceInJsxExpression=new r.Rule(r.RuleDescriptor.create3(17,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),n.IsNonJsxSameLineTokenContext,n.IsJsxExpressionContext),8)),this.SpaceAfterOpenBraceInJsxExpression=new r.Rule(r.RuleDescriptor.create3(17,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),n.IsNonJsxSameLineTokenContext,n.IsJsxExpressionContext),2)),this.NoSpaceBeforeCloseBraceInJsxExpression=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,18),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),n.IsNonJsxSameLineTokenContext,n.IsJsxExpressionContext),8)),this.SpaceBeforeCloseBraceInJsxExpression=new r.Rule(r.RuleDescriptor.create2(r.Shared.TokenRange.Any,18),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces"),n.IsNonJsxSameLineTokenContext,n.IsJsxExpressionContext),2)),this.SpaceAfterAnonymousFunctionKeyword=new r.Rule(r.RuleDescriptor.create1(89,19),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterFunctionKeywordForAnonymousFunctions"),n.IsFunctionDeclContext),2)),this.NoSpaceAfterAnonymousFunctionKeyword=new r.Rule(r.RuleDescriptor.create1(89,19),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterFunctionKeywordForAnonymousFunctions"),n.IsFunctionDeclContext),8)),this.NoSpaceAfterTypeAssertion=new r.Rule(r.RuleDescriptor.create3(29,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionDisabledOrUndefined("insertSpaceAfterTypeAssertion"),n.IsNonJsxSameLineTokenContext,n.IsTypeAssertionContext),8)),this.SpaceAfterTypeAssertion=new r.Rule(r.RuleDescriptor.create3(29,r.Shared.TokenRange.Any),r.RuleOperation.create2(new r.RuleOperationContext(n.IsOptionEnabled("insertSpaceAfterTypeAssertion"),n.IsNonJsxSameLineTokenContext,n.IsTypeAssertionContext),2)),this.HighPriorityCommonRules=[this.IgnoreBeforeComment,this.IgnoreAfterLineComment,this.NoSpaceBeforeColon,this.SpaceAfterColon,this.NoSpaceBeforeQuestionMark,this.SpaceAfterQuestionMarkInConditionalOperator,this.NoSpaceAfterQuestionMark,this.NoSpaceBeforeDot,this.NoSpaceAfterDot,this.NoSpaceAfterUnaryPrefixOperator,this.NoSpaceAfterUnaryPreincrementOperator,this.NoSpaceAfterUnaryPredecrementOperator,this.NoSpaceBeforeUnaryPostincrementOperator,this.NoSpaceBeforeUnaryPostdecrementOperator,this.SpaceAfterPostincrementWhenFollowedByAdd,this.SpaceAfterAddWhenFollowedByUnaryPlus,this.SpaceAfterAddWhenFollowedByPreincrement,this.SpaceAfterPostdecrementWhenFollowedBySubtract,this.SpaceAfterSubtractWhenFollowedByUnaryMinus,this.SpaceAfterSubtractWhenFollowedByPredecrement,this.NoSpaceAfterCloseBrace,this.NewLineBeforeCloseBraceInBlockContext,this.SpaceAfterCloseBrace,this.SpaceBetweenCloseBraceAndElse,this.SpaceBetweenCloseBraceAndWhile,this.NoSpaceBetweenEmptyBraceBrackets,this.NoSpaceBetweenFunctionKeywordAndStar,this.SpaceAfterStarInGeneratorDeclaration,this.SpaceAfterFunctionInFuncDecl,this.NewLineAfterOpenBraceInBlockContext,this.SpaceAfterGetSetInMember,this.NoSpaceBetweenYieldKeywordAndStar,this.SpaceBetweenYieldOrYieldStarAndOperand,this.NoSpaceBetweenReturnAndSemicolon,this.SpaceAfterCertainKeywords,this.SpaceAfterLetConstInVariableDeclaration,this.NoSpaceBeforeOpenParenInFuncCall,this.SpaceBeforeBinaryKeywordOperator,this.SpaceAfterBinaryKeywordOperator,this.SpaceAfterVoidOperator,this.SpaceBetweenAsyncAndOpenParen,this.SpaceBetweenAsyncAndFunctionKeyword,this.NoSpaceBetweenTagAndTemplateString,this.SpaceBeforeJsxAttribute,this.SpaceBeforeSlashInJsxOpeningElement,this.NoSpaceBeforeGreaterThanTokenInJsxOpeningElement,this.NoSpaceBeforeEqualInJsxAttribute,this.NoSpaceAfterEqualInJsxAttribute,this.NoSpaceAfterModuleImport,this.SpaceAfterCertainTypeScriptKeywords,this.SpaceBeforeCertainTypeScriptKeywords,this.SpaceAfterModuleName,this.SpaceBeforeArrow,this.SpaceAfterArrow,this.NoSpaceAfterEllipsis,this.NoSpaceAfterOptionalParameters,this.NoSpaceBetweenEmptyInterfaceBraceBrackets,this.NoSpaceBeforeOpenAngularBracket,this.NoSpaceBetweenCloseParenAndAngularBracket,this.NoSpaceAfterOpenAngularBracket,this.NoSpaceBeforeCloseAngularBracket,this.NoSpaceAfterCloseAngularBracket,this.SpaceBeforeAt,this.NoSpaceAfterAt,this.SpaceAfterDecorator,this.NoSpaceBeforeNonNullAssertionOperator,this.NoSpaceAfterNewKeywordOnConstructorSignature],this.UserConfigurableRules=[this.SpaceAfterConstructor,this.NoSpaceAfterConstructor,this.SpaceAfterComma,this.NoSpaceAfterComma,this.SpaceAfterAnonymousFunctionKeyword,this.NoSpaceAfterAnonymousFunctionKeyword,this.SpaceAfterKeywordInControl,this.NoSpaceAfterKeywordInControl,this.SpaceAfterOpenParen,this.SpaceBeforeCloseParen,this.SpaceBetweenOpenParens,this.NoSpaceBetweenParens,this.NoSpaceAfterOpenParen,this.NoSpaceBeforeCloseParen,this.SpaceAfterOpenBracket,this.SpaceBeforeCloseBracket,this.NoSpaceBetweenBrackets,this.NoSpaceAfterOpenBracket,this.NoSpaceBeforeCloseBracket,this.SpaceAfterOpenBrace,this.SpaceBeforeCloseBrace,this.NoSpaceBetweenEmptyBraceBrackets,this.NoSpaceAfterOpenBrace,this.NoSpaceBeforeCloseBrace,this.SpaceAfterTemplateHeadAndMiddle,this.SpaceBeforeTemplateMiddleAndTail,this.NoSpaceAfterTemplateHeadAndMiddle,this.NoSpaceBeforeTemplateMiddleAndTail,this.SpaceAfterOpenBraceInJsxExpression,this.SpaceBeforeCloseBraceInJsxExpression,this.NoSpaceAfterOpenBraceInJsxExpression,this.NoSpaceBeforeCloseBraceInJsxExpression,this.SpaceAfterSemicolonInFor,this.NoSpaceAfterSemicolonInFor,this.SpaceBeforeBinaryOperator,this.SpaceAfterBinaryOperator,this.NoSpaceBeforeBinaryOperator,this.NoSpaceAfterBinaryOperator,this.SpaceBeforeOpenParenInFuncDecl,this.NoSpaceBeforeOpenParenInFuncDecl,this.NewLineBeforeOpenBraceInControl,this.NewLineBeforeOpenBraceInFunction,this.NewLineBeforeOpenBraceInTypeScriptDeclWithBlock,this.SpaceAfterTypeAssertion,this.NoSpaceAfterTypeAssertion],this.LowPriorityCommonRules=[this.NoSpaceBeforeSemicolon,this.SpaceBeforeOpenBraceInControl,this.SpaceBeforeOpenBraceInFunction,this.SpaceBeforeOpenBraceInTypeScriptDeclWithBlock,this.NoSpaceBeforeComma,this.NoSpaceBeforeOpenBracket,this.NoSpaceAfterCloseBracket,this.SpaceAfterSemicolon,this.SpaceBetweenStatements,this.SpaceAfterTryFinally],o.Debug.isDebugging){for(var e in this){var t=this[e];t instanceof r.Rule&&(t.debugName=e)}}}return n.IsOptionEnabled=function(t){return function(e){return e.options&&e.options.hasOwnProperty(t)&&!!e.options[t]}},n.IsOptionDisabled=function(t){return function(e){return e.options&&e.options.hasOwnProperty(t)&&!e.options[t]}},n.IsOptionDisabledOrUndefined=function(t){return function(e){return!e.options||!e.options.hasOwnProperty(t)||!e.options[t]}},n.isOptionDisabledOrUndefinedOrTokensOnSameLine=function(t){return function(e){return!e.options||!e.options.hasOwnProperty(t)||!e.options[t]||e.TokensAreOnSameLine()}},n.IsOptionEnabledOrUndefined=function(t){return function(e){return!e.options||!e.options.hasOwnProperty(t)||!!e.options[t]}},n.IsForContext=function(e){return 214===e.contextNode.kind},n.IsNotForContext=function(e){return!n.IsForContext(e)},n.IsBinaryOpContext=function(e){switch(e.contextNode.kind){case 194:case 195:case 202:case 246:case 242:case 158:case 166:case 167:return!0;case 176:case 231:case 237:case 226:case 146:case 264:case 149:case 148:return 58===e.currentTokenSpan.kind||58===e.nextTokenSpan.kind;case 215:case 145:return 92===e.currentTokenSpan.kind||92===e.nextTokenSpan.kind;case 216:return 142===e.currentTokenSpan.kind||142===e.nextTokenSpan.kind}return!1},n.IsNotBinaryOpContext=function(e){return!n.IsBinaryOpContext(e)},n.IsConditionalOperatorContext=function(e){return 195===e.contextNode.kind},n.IsSameLineTokenOrBeforeBlockContext=function(e){return e.TokensAreOnSameLine()||n.IsBeforeBlockContext(e)},n.IsBraceWrappedContext=function(e){return 174===e.contextNode.kind||n.IsSingleLineBlockContext(e)},n.IsBeforeMultilineBlockContext=function(e){return n.IsBeforeBlockContext(e)&&!(e.NextNodeAllOnSameLine()||e.NextNodeBlockIsOnOneLine())},n.IsMultilineBlockContext=function(e){return n.IsBlockContext(e)&&!(e.ContextNodeAllOnSameLine()||e.ContextNodeBlockIsOnOneLine())},n.IsSingleLineBlockContext=function(e){return n.IsBlockContext(e)&&(e.ContextNodeAllOnSameLine()||e.ContextNodeBlockIsOnOneLine())},n.IsBlockContext=function(e){return n.NodeIsBlockContext(e.contextNode)},n.IsBeforeBlockContext=function(e){return n.NodeIsBlockContext(e.nextTokenParent)},n.NodeIsBlockContext=function(e){if(n.NodeIsTypeScriptDeclWithBlockContext(e))return!0;switch(e.kind){case 207:case 235:case 178:case 234:return!0}return!1},n.IsFunctionDeclContext=function(e){switch(e.contextNode.kind){case 228:case 151:case 150:case 153:case 154:case 155:case 186:case 152:case 187:case 230:return!0}return!1},n.IsFunctionDeclarationOrFunctionExpressionContext=function(e){return 228===e.contextNode.kind||186===e.contextNode.kind},n.IsTypeScriptDeclWithBlockContext=function(e){return n.NodeIsTypeScriptDeclWithBlockContext(e.contextNode)},n.NodeIsTypeScriptDeclWithBlockContext=function(e){switch(e.kind){case 229:case 199:case 230:case 232:case 163:case 233:case 244:case 245:case 238:case 241:return!0}return!1},n.IsAfterCodeBlockContext=function(e){switch(e.currentTokenParent.kind){case 229:case 233:case 232:case 260:case 234:case 221:return!0;case 207:var t=e.currentTokenParent.parent;if(!t||187!==t.kind&&186!==t.kind)return!0}return!1},n.IsControlDeclContext=function(e){switch(e.contextNode.kind){case 211:case 221:case 214:case 215:case 216:case 213:case 224:case 212:case 220:case 260:return!0;default:return!1}},n.IsObjectContext=function(e){return 178===e.contextNode.kind},n.IsFunctionCallContext=function(e){return 181===e.contextNode.kind},n.IsNewContext=function(e){return 182===e.contextNode.kind},n.IsFunctionCallOrNewContext=function(e){return n.IsFunctionCallContext(e)||n.IsNewContext(e)},n.IsPreviousTokenNotComma=function(e){return 26!==e.currentTokenSpan.kind},n.IsNextTokenNotCloseBracket=function(e){return 22!==e.nextTokenSpan.kind},n.IsArrowFunctionContext=function(e){return 187===e.contextNode.kind},n.IsNonJsxSameLineTokenContext=function(e){return e.TokensAreOnSameLine()&&10!==e.contextNode.kind},n.IsNonJsxElementContext=function(e){return 249!==e.contextNode.kind},n.IsJsxExpressionContext=function(e){return 256===e.contextNode.kind},n.IsNextTokenParentJsxAttribute=function(e){return 253===e.nextTokenParent.kind},n.IsJsxAttributeContext=function(e){return 253===e.contextNode.kind},n.IsJsxSelfClosingElementContext=function(e){return 250===e.contextNode.kind},n.IsNotBeforeBlockInFunctionDeclarationContext=function(e){return!n.IsFunctionDeclContext(e)&&!n.IsBeforeBlockContext(e)},n.IsEndOfDecoratorContextOnSameLine=function(e){return e.TokensAreOnSameLine()&&e.contextNode.decorators&&n.NodeIsInDecoratorContext(e.currentTokenParent)&&!n.NodeIsInDecoratorContext(e.nextTokenParent)},n.NodeIsInDecoratorContext=function(e){for(;o.isPartOfExpression(e);)e=e.parent;return 147===e.kind},n.IsStartOfVariableDeclarationList=function(e){return 227===e.currentTokenParent.kind&&e.currentTokenParent.getStart(e.sourceFile)===e.currentTokenSpan.pos},n.IsNotFormatOnEnter=function(e){return 2!==e.formattingRequestKind},n.IsModuleDeclContext=function(e){return 233===e.contextNode.kind},n.IsObjectTypeContext=function(e){return 163===e.contextNode.kind},n.IsConstructorSignatureContext=function(e){return 156===e.contextNode.kind},n.IsTypeArgumentOrParameterOrAssertion=function(e,t){if(27!==e.kind&&29!==e.kind)return!1;switch(t.kind){case 159:case 184:case 231:case 229:case 199:case 230:case 228:case 186:case 187:case 151:case 150:case 155:case 156:case 181:case 182:case 201:return!0;default:return!1}},n.IsTypeArgumentOrParameterOrAssertionContext=function(e){return n.IsTypeArgumentOrParameterOrAssertion(e.currentTokenSpan,e.currentTokenParent)||n.IsTypeArgumentOrParameterOrAssertion(e.nextTokenSpan,e.nextTokenParent)},n.IsTypeAssertionContext=function(e){return 184===e.contextNode.kind},n.IsVoidOpContext=function(e){return 105===e.currentTokenSpan.kind&&190===e.currentTokenParent.kind},n.IsYieldOrYieldStarWithOperand=function(e){return 197===e.contextNode.kind&&void 0!==e.contextNode.expression},n.IsNonNullAssertionContext=function(e){return 203===e.contextNode.kind},n}(),r.Rules=e}(ts||(ts={})),function(o){!function(e){var t=function(){function e(e){this.mapRowLength=143,this.map=new Array(this.mapRowLength*this.mapRowLength);for(var t=new Array(this.map.length),n=0,o=e;n<o.length;n++){var r=o[n];this.FillRule(r,t)}}return e.prototype.GetRuleBucketIndex=function(e,t){return o.Debug.assert(e<=142&&t<=142,"Must compute formatting context from tokens"),e*this.mapRowLength+t},e.prototype.FillRule=function(r,i){var a=this,s=r.Descriptor.LeftTokenRange.isSpecific()&&r.Descriptor.RightTokenRange.isSpecific();r.Descriptor.LeftTokenRange.GetTokens().forEach(function(o){r.Descriptor.RightTokenRange.GetTokens().forEach(function(e){var t=a.GetRuleBucketIndex(o,e),n=a.map[t];void 0===n&&(n=a.map[t]=new c),n.AddRule(r,s,i,t)})})},e.prototype.GetRule=function(e){var t=this.GetRuleBucketIndex(e.currentTokenSpan.kind,e.nextTokenSpan.kind),n=this.map[t];if(n)for(var o=0,r=n.Rules();o<r.length;o++){var i=r[o];if(i.Operation.Context.InContext(e))return i}},e}();e.RulesMap=t;var s,n;(n=s||(s={}))[n.IgnoreRulesSpecific=0]="IgnoreRulesSpecific",n[n.IgnoreRulesAny=5]="IgnoreRulesAny",n[n.ContextRulesSpecific=10]="ContextRulesSpecific",n[n.ContextRulesAny=15]="ContextRulesAny",n[n.NoContextRulesSpecific=20]="NoContextRulesSpecific",n[n.NoContextRulesAny=25]="NoContextRulesAny";var l=function(){function e(){this.rulesInsertionIndexBitmap=0}return e.prototype.GetInsertionIndex=function(e){for(var t=0,n=0,o=this.rulesInsertionIndexBitmap;n<=e;)t+=31&o,o>>=5,n+=5;return t},e.prototype.IncreaseInsertionIndex=function(e){var t=this.rulesInsertionIndexBitmap>>e&31;t++,o.Debug.assert((31&t)===t,"Adding more rules into the sub-bucket than allowed. Maximum allowed is 32 rules.");var n=this.rulesInsertionIndexBitmap&~(31<<e);n|=t<<e,this.rulesInsertionIndexBitmap=n},e}();e.RulesBucketConstructionState=l;var c=function(){function e(){this.rules=[]}return e.prototype.Rules=function(){return this.rules},e.prototype.AddRule=function(e,t,n,o){var r;r=1===e.Operation.Action?t?s.IgnoreRulesSpecific:s.IgnoreRulesAny:e.Operation.Context.IsAny()?t?s.NoContextRulesSpecific:s.NoContextRulesAny:t?s.ContextRulesSpecific:s.ContextRulesAny;var i=n[o];void 0===i&&(i=n[o]=new l);var a=i.GetInsertionIndex(r);this.rules.splice(a,0,e),i.IncreaseInsertionIndex(r)},e}();e.RulesBucket=c}(o.formatting||(o.formatting={}))}(ts||(ts={})),function(l){var e;(function(e){for(var n=[],t=0;t<=142;t++)n.push(t);var o,i=function(){function e(e){void 0===e&&(e=[]),this.tokens=e}return e.prototype.GetTokens=function(){return this.tokens},e.prototype.Contains=function(e){return 0<=this.tokens.indexOf(e)},e.prototype.isSpecific=function(){return!0},e}(),r=function(){function e(e){this.token=e}return e.prototype.GetTokens=function(){return[this.token]},e.prototype.Contains=function(e){return e===this.token},e.prototype.isSpecific=function(){return!0},e}(),a=function(){function e(){}return e.prototype.GetTokens=function(){return n},e.prototype.Contains=function(){return!0},e.prototype.toString=function(){return"[allTokens]"},e.prototype.isSpecific=function(){return!1},e}(),s=function(){function e(e){this.except=e}return e.prototype.GetTokens=function(){var t=this;return n.filter(function(e){return e!==t.except})},e.prototype.Contains=function(e){return e!==this.except},e.prototype.isSpecific=function(){return!1},e}();(o=e.TokenRange||(e.TokenRange={})).FromToken=function(e){return new r(e)},o.FromTokens=function(e){return new i(e)},o.FromRange=function(e,t,n){void 0===n&&(n=[]);for(var o=[],r=e;r<=t;r++)l.indexOf(n,r)<0&&o.push(r);return new i(o)},o.AnyExcept=function(e){return new s(e)},o.Any=new a,o.AnyIncludingMultilineComments=o.FromTokens(n.concat([3])),o.Keywords=o.FromRange(72,142),o.BinaryOperators=o.FromRange(27,70),o.BinaryKeywordOperators=o.FromTokens([92,93,142,118,126]),o.UnaryPrefixOperators=o.FromTokens([43,44,52,51]),o.UnaryPrefixExpressions=o.FromTokens([8,71,19,21,17,99,94]),o.UnaryPreincrementExpressions=o.FromTokens([71,19,99,94]),o.UnaryPostincrementExpressions=o.FromTokens([71,20,22,94]),o.UnaryPredecrementExpressions=o.FromTokens([71,19,99,94]),o.UnaryPostdecrementExpressions=o.FromTokens([71,20,22,94]),o.Comments=o.FromTokens([2,3]),o.TypeNames=o.FromTokens([71,133,136,122,137,105,119])})((e=l.formatting||(l.formatting={})).Shared||(e.Shared={}))}(ts||(ts={})),function(t){var n,e;n=t.formatting||(t.formatting={}),e=function(){function e(){this.globalRules=new n.Rules;var e=this.globalRules.HighPriorityCommonRules.concat(this.globalRules.UserConfigurableRules).concat(this.globalRules.LowPriorityCommonRules);this.rulesMap=new n.RulesMap(e)}return e.prototype.getRulesMap=function(){return this.rulesMap},e.prototype.getFormatOptions=function(){return this.options},e.prototype.ensureUpToDate=function(e){this.options&&t.compareDataObjects(this.options,e)||(this.options=t.clone(e))},e}(),n.RulesProvider=e}(ts||(ts={})),function(P){!function(R){var e,t,c,u,g;function a(e,t,n){var o=P.findPrecedingToken(e,n);return o&&o.kind===t&&e===o.getEnd()?o:void 0}function s(e){for(var t=e;t&&t.parent&&t.parent.end===e.end&&!n(t.parent,t);)t=t.parent;return t}function n(e,t){switch(e.kind){case 229:case 230:return P.rangeContainsRange(e.members,t);case 233:var n=e.body;return n&&234===n.kind&&P.rangeContainsRange(n.statements,t);case 265:case 207:case 234:return P.rangeContainsRange(e.statements,t);case 260:return P.rangeContainsRange(e.block.statements,t)}return!1}function r(e,t,n,o,r){return e?l({pos:P.getLineStartPositionForPosition(e.getStart(t),t),end:e.end},t,n,o,r):[]}function l(t,n,o,r,i){var a,s,l=(a=t,function e(t){var n=P.forEachChild(t,function(e){return P.startEndContainsRange(e.getStart(s),e.end,a)&&e});if(n){var o=e(n);if(o)return o}return t}(s=n));return R.getFormattingScanner(n.text,n.languageVariant,function(e,t,n){var o=e.getStart(n);if(o===t.pos&&e.end===t.end)return o;var r=P.findPrecedingToken(t.pos,n);return r?r.end>=t.pos?e.pos:r.end:e.pos}(l,t,n),t.end,function(e){return p(t,l,R.SmartIndenter.getIndentationForNode(l,t,n,o),function(e,t,n){for(var o,r=-1;e;){var i=n.getLineAndCharacterOfPosition(e.getStart(n)).line;if(-1!==r&&i!==r)break;if(R.SmartIndenter.shouldIndentChildNode(e,o))return t.indentSize;r=i,e=(o=e).parent}return 0}(l,o,n),e,o,r,i,function(e,t){if(!e.length)return r;var n=e.filter(function(e){return P.rangeOverlapsWithStartEnd(t,e.start,e.start+e.length)}).sort(function(e,t){return e.start-t.start});if(!n.length)return r;var o=0;return function(e){for(;;){if(o>=n.length)return!1;var t=n[o];if(e.end<=t.start)return!1;if(P.startEndOverlapsWithStartEnd(e.pos,e.end,t.start,t.start+t.length))return!0;o++}};function r(){return!1}}(n.parseDiagnostics,t),n)})}function p(b,e,t,n,k,y,g,o,T,E){var S,a,s,C,x,r,i,l,p=new R.FormattingContext(E,o,y),c=[];if(k.advance(),k.isOnToken()){var u=E.getLineAndCharacterOfPosition(e.getStart(E)).line,d=u;e.decorators&&(d=E.getLineAndCharacterOfPosition(P.getNonDecoratorTokenPosOfNode(e,E)).line),function f(h,e,t,n,o,r){if(!P.rangeOverlapsWithStartEnd(b,h.getStart(E),h.getEnd()))return;var i=D(h,t,o,r);var v=e;P.forEachChild(h,function(e){d(e,-1,h,i,t,n,!1)},function(e){!function(e,t,n,o){P.Debug.assert(P.isNodeArray(e));var r=function(e,t){switch(e.kind){case 152:case 228:case 186:case 151:case 150:case 187:if(e.typeParameters===t)return 27;if(e.parameters===t)return 19;break;case 181:case 182:if(e.typeArguments===t)return 27;if(e.arguments===t)return 19;break;case 159:if(e.typeArguments===t)return 27}return 0}(t,e),i=function(e){switch(e){case 19:return 20;case 27:return 29}return 0}(r),a=o,s=n;if(0!==r)for(;k.isOnToken();){var l=k.readTokenInfo(t);if(l.token.end>e.pos)break;if(l.token.kind===r){s=E.getLineAndCharacterOfPosition(l.token.pos).line;var c=A(l.token,s,-1,t,o,n);a=D(t,n,c.indentation,c.delta),m(l,t,a,t)}else m(l,t,o,t)}for(var u=-1,g=0;g<e.length;g++){var p=e[g];u=d(p,u,h,a,s,s,!0,0===g)}if(0!==i&&k.isOnToken()){var l=k.readTokenInfo(t);l.token.kind===i&&P.rangeContainsRange(t,l.token)&&m(l,t,a,t)}}(e,h,t,i)});for(;k.isOnToken();){var a=k.readTokenInfo(h);if(a.token.end>h.end)break;m(a,h,i,h)}function d(e,t,n,o,r,i,a,s){var l=e.getStart(E),c=E.getLineAndCharacterOfPosition(l).line,u=c;e.decorators&&(u=E.getLineAndCharacterOfPosition(P.getNonDecoratorTokenPosOfNode(e,E)).line);var g=-1;if(a&&P.rangeContainsRange(b,n)&&-1!==(g=function(e,t,n,o,r){if(P.rangeOverlapsWithStartEnd(o,e,t)||P.rangeContainsStartEnd(o,e,t)){if(-1!==r)return r}else{var i=E.getLineAndCharacterOfPosition(e).line,a=P.getLineStartPositionForPosition(e,E),s=R.SmartIndenter.findFirstNonWhitespaceColumn(a,e,E,y);if(i!==n||e===s){var l=R.SmartIndenter.getBaseIndentation(y);return s<l?l:s}}return-1}(l,e.end,r,b,t))&&(t=g),!P.rangeOverlapsWithStartEnd(b,e.pos,e.end))return e.end<b.pos&&k.skipToEndOf(e),t;if(0===e.getFullWidth())return t;for(;k.isOnToken();){var p=k.readTokenInfo(h);if(p.token.end>l)break;m(p,h,o,h)}if(!k.isOnToken())return t;if(P.isToken(e)&&10!==e.kind){var p=k.readTokenInfo(e);return P.Debug.assert(p.token.end===e.end,"Token end is child end"),m(p,h,o,e),t}var d=147===e.kind?c:i,_=A(e,c,g,h,o,d);return f(e,v,c,u,_.indentation,_.delta),v=h,s&&177===n.kind&&-1===t&&(t=_.indentation),t}function m(e,t,n,o){P.Debug.assert(P.rangeContainsRange(t,e.token));var r,i=k.lastTrailingTriviaWasNewLine(),a=!1;e.leadingTrivia&&B(e.leadingTrivia,t,v,n);var s=P.rangeContainsRange(b,e.token),l=E.getLineAndCharacterOfPosition(e.token.pos);if(s){var c=T(e.token),u=S;if(r=I(e.token,l,t,v,n),c)a=!1;else if(void 0!==r)a=r;else{var g=u&&E.getLineAndCharacterOfPosition(u.end).line;a=i&&l.line!==g}}if(e.trailingTrivia&&B(e.trailingTrivia,t,v,n),a){var p=s&&!T(e.token)?n.getIndentationForToken(l.line,e.token.kind,o):-1,d=!0;if(e.leadingTrivia)for(var _=n.getIndentationForComment(e.token.kind,p,o),f=0,h=e.leadingTrivia;f<h.length;f++){var m=h[f],y=P.rangeContainsRange(b,m);switch(m.kind){case 3:y&&w(m,_,!d),d=!1;break;case 2:d&&y&&N(m.pos,_,!1),d=!1;break;case 4:d=!0}}-1!==p&&d&&(N(e.token.pos,p,r),C=l.line,x=p)}k.advance(),v=t}}(e,e,u,d,t,n)}if(!k.isOnToken()){var _=k.getCurrentLeadingTrivia();_&&(B(_,e,e,void 0),r=S?S.end:b.pos,i=E.getLineAndCharacterOfPosition(r).line,l=E.getLineAndCharacterOfPosition(b.end).line,f(i,l+1,S))}return c;function A(e,t,n,o,r,i){var a=n,s=R.SmartIndenter.shouldIndentChildNode(e)?y.indentSize:0;return i===t?(a=t===C?x:r.getIndentation(),s=Math.min(y.indentSize,r.getDelta(e)+s)):-1===a&&(a=R.SmartIndenter.childStartsOnTheSameLineWithElseInIfStatement(o,e,t,E)?r.getIndentation():r.getIndentation()+r.getDelta(e)),{indentation:a,delta:s}}function D(o,r,i,a){return{getIndentationForComment:function(e,t,n){switch(e){case 18:case 22:case 20:return i+s(a,n)}return-1!==t?t:i},getIndentationForToken:function(e,t,n){if(r!==e&&o.decorators&&t===function(e){if(e.modifiers&&e.modifiers.length)return e.modifiers[0].kind;switch(e.kind){case 229:return 75;case 230:return 109;case 228:return 89;case 232:return 232;case 153:return 125;case 154:return 135;case 151:if(e.asteriskToken)return 39;case 149:case 146:return P.getNameOfDeclaration(e).kind}}(o))return i;switch(t){case 17:case 18:case 19:case 20:case 82:case 106:case 57:return i;case 41:case 29:if(251===n.kind||252===n.kind||250===n.kind)return i;break;case 21:case 22:if(172!==n.kind)return i}return r!==e?i+s(a,n):i},getIndentation:function(){return i},getDelta:function(e){return s(a,e)},recomputeIndentation:function(e){o.parent&&R.SmartIndenter.shouldIndentChildNode(o.parent,o)&&(e?i+=y.indentSize:i-=y.indentSize,a=R.SmartIndenter.shouldIndentChildNode(o)?y.indentSize:0)}};function s(e,t){return R.SmartIndenter.nodeWillIndentChild(o,t,!0)?e:0}}function B(e,t,n,o){for(var r=0,i=e;r<i.length;r++){var a=i[r];if(P.isComment(a.kind)&&P.rangeContainsRange(b,a))I(a,E.getLineAndCharacterOfPosition(a.pos),t,n,o)}}function I(e,t,n,o,r){var i;T(e)||(S?i=function(e,t,n,o,r,i,a,s){p.updateContext(o,i,e,n,a);var l,c,u=g.getRulesMap().GetRule(p);u?(!function(e,t,n,o,r){switch(e.Operation.Action){case 1:return;case 8:t.end!==o.pos&&v(t.end,o.pos-t.end);break;case 4:if(1!==e.Flag&&n!==r)return;var i=r-n;1!==i&&O(t.end,o.pos-t.end,y.newLineCharacter);break;case 2:if(1!==e.Flag&&n!==r)return;var a=o.pos-t.end;1===a&&32===E.text.charCodeAt(t.end)||O(t.end,o.pos-t.end," ")}}(u,o,r,e,t),10&u.Operation.Action&&t!==r?(c=!1,n.getStart(E)===e.pos&&s.recomputeIndentation(!1)):4&u.Operation.Action&&t===r&&(c=!0,n.getStart(E)===e.pos&&s.recomputeIndentation(!0)),l=!(8&u.Operation.Action)&&1!==u.Flag):l=!0;t!==r&&l&&f(r,t,o);return c}(e,t.line,n,S,s,a,o,r):f(E.getLineAndCharacterOfPosition(b.pos).line,t.line));return S=e,a=n,s=t.line,i}function N(e,t,n){var o,r,i=L(t,y);if(n)O(e,0,i);else{var a=E.getLineAndCharacterOfPosition(e),s=P.getStartPositionOfLine(a.line,E);t===function(e,t){for(var n=0,o=0;o<t;o++)9===E.text.charCodeAt(e+o)?n+=y.tabSize-n%y.tabSize:n++;return n}(s,a.character)&&(r=s,(o=i)===E.text.substr(r,o.length))||O(s,a.character,i)}}function w(e,t,n){var o,r=E.getLineAndCharacterOfPosition(e.pos).line,i=E.getLineAndCharacterOfPosition(e.end).line;if(r!==i){o=[];for(var a=e.pos,s=r;s<i;s++){var l=P.getEndLinePosition(s,E);o.push({pos:a,end:l}),a=P.getStartPositionOfLine(s+1,E)}o.push({pos:a,end:e.end});var c=P.getStartPositionOfLine(r,E),u=R.SmartIndenter.findFirstNonWhitespaceCharacterAndColumn(c,o[0].pos,E,y);if(t!==u.column){var g=0;n&&(g=1,r++);for(var p=t-u.column,d=g;d<o.length;d++,r++){var _=P.getStartPositionOfLine(r,E),f=0===d?u:R.SmartIndenter.findFirstNonWhitespaceCharacterAndColumn(o[d].pos,o[d].end,E,y),h=f.column+p;if(0<h){var m=L(h,y);O(_,f.character,m)}else v(_,f.character)}}}else n||N(e.pos,t,!1)}function f(e,t,n){for(var o=e;o<t;o++){var r=P.getStartPositionOfLine(o,E),i=P.getEndLinePosition(o,E);if(!(n&&(P.isComment(n.kind)||P.isStringOrRegularExpressionOrTemplateLiteral(n.kind))&&n.pos<=i&&n.end>i)){var a=h(r,i);-1!==a&&(P.Debug.assert(a===r||!P.isWhiteSpaceSingleLine(E.text.charCodeAt(a-1))),v(a,i+1-a))}}}function h(e,t){for(var n=t;e<=n&&P.isWhiteSpaceSingleLine(E.text.charCodeAt(n));)n--;return n!==t?n+1:-1}function m(e,t,n){return{span:P.createTextSpan(e,t),newText:n}}function v(e,t){t&&c.push(m(e,t,""))}function O(e,t,n){(t||n)&&c.push(m(e,t,n))}}function L(e,t){if((!c||c.tabSize!==t.tabSize||c.indentSize!==t.indentSize)&&(c={tabSize:t.tabSize,indentSize:t.indentSize},u=g=void 0),t.convertTabsToSpaces){var n=void 0,o=Math.floor(e/t.indentSize),r=e%t.indentSize;return g||(g=[]),void 0===g[o]?(n=l(" ",t.indentSize*o),g[o]=n):n=g[o],r?n+l(" ",r):n}var i=Math.floor(e/t.tabSize),a=e-i*t.tabSize,s=void 0;return u||(u=[]),void 0===u[i]?u[i]=s=l("\t",i):s=u[i],a?s+l(" ",a):s;function l(e,t){for(var n="",o=0;o<t;o++)n+=e;return n}}(t=e||(e={}))[t.Unknown=-1]="Unknown",R.formatOnEnter=function(e,t,n,o){var r=t.getLineAndCharacterOfPosition(e).line;if(0===r)return[];for(var i=P.getEndLinePosition(r,t);P.isWhiteSpaceSingleLine(t.text.charCodeAt(i));)i--;return P.isLineBreak(t.text.charCodeAt(i))&&i--,l({pos:P.getStartPositionOfLine(r-1,t),end:i+1},t,o,n,2)},R.formatOnSemicolon=function(e,t,n,o){return r(s(a(e,25,t)),t,o,n,3)},R.formatOnOpeningCurly=function(e,t,n,o){var r=a(e,17,t);if(!r)return[];var i=s(r.parent);return l({pos:P.getLineStartPositionForPosition(i.getStart(t),t),end:e},t,o,n,4)},R.formatOnClosingCurly=function(e,t,n,o){return r(s(a(e,18,t)),t,o,n,5)},R.formatDocument=function(e,t,n){return l({pos:0,end:e.text.length},e,n,t,0)},R.formatSelection=function(e,t,n,o,r){return l({pos:P.getLineStartPositionForPosition(e,n),end:t},n,r,o,1)},R.formatNodeGivenIndentation=function(t,n,e,o,r,i){var a={pos:0,end:n.text.length};return R.getFormattingScanner(n.text,e,a.pos,a.end,function(e){return p(a,t,o,r,e,i.getFormatOptions(),i,1,function(e){return!1},n)})},R.getRangeOfEnclosingComment=function(e,t,n,o,r,i){if(void 0===r&&(r=P.getTokenAtPosition(e,t,!1)),!(r.getStart(e)<=t&&t<r.getEnd())){void 0===o&&(o=P.findPrecedingToken(t,e));var a=o&&P.getTrailingCommentRanges(e.text,o.end),s=P.getLeadingCommentRangesOfNode(r,e),l=a&&s?a.concat(s):a||s;if(l)for(var c=0,u=l;c<u.length;c++){var g=u[c];if(g.pos<t&&t<g.end||t===g.end&&(2===g.kind||t===e.getFullWidth()))return 3!==g.kind&&n||i&&!i(g)?void 0:g}}},R.getIndentationString=L}(P.formatting||(P.formatting={}))}(ts||(ts={})),function(G){var V;(function(N){var e,t,n,o;function w(e){return e.baseIndentSize||0}function O(e,t,n,o,r,i){for(var a,s,l,c,u,g=e.parent;g;){var p=!0;if(n){var d=e.getStart(r);p=d<n.pos||d>n.end}if(p&&-1!==(f=L(e,r,i)))return f+o;s=g,c=C(e,l=r),u=c?c.pos:s.getStart(l);var _=(a=l.getLineAndCharacterOfPosition(u)).line===t.line||S(g,e,t.line,r);if(p){var f;if(-1!==(m=e,y=g,v=t,b=_,k=r,T=i,f=!G.isDeclaration(m)&&!G.isStatementButNotDeclaration(m)||265!==y.kind&&b?-1:x(v,k,T)))return f+o;if(-1!==(f=P(e,r,i)))return f+o}H(g,e)&&!_&&(o+=i.indentSize);var h=E(g,e,t.line,r);g=(e=g).parent,t=h?r.getLineAndCharacterOfPosition(e.getStart()):a}var m,y,v,b,k,T;return o+w(i)}function R(e,t){return t.getLineAndCharacterOfPosition(e.getStart(t))}function E(e,t,n,o){if(!G.isCallExpression(e)||!G.contains(e.arguments,t))return!1;var r=e.expression.getEnd();return G.getLineAndCharacterOfPosition(o,r).line===n}function S(e,t,n,o){if(211===e.kind&&e.elseStatement===t){var r=G.findChildOfKind(e,82,o);return G.Debug.assert(void 0!==r),R(r,o).line===n}return!1}function r(e,t,n){return e&&G.rangeContainsStartEnd(e,t,n)?e:void 0}function C(e,t){if(e.parent)switch(e.parent.kind){case 159:return r(e.parent.typeArguments,e.getStart(t),e.getEnd());case 178:return e.parent.properties;case 177:return e.parent.elements;case 228:case 186:case 187:case 151:case 150:case 155:case 152:case 161:case 156:var n=e.getStart(t);return r(e.parent.typeParameters,n,e.getEnd())||r(e.parent.parameters,n,e.getEnd());case 229:return r(e.parent.typeParameters,e.getStart(t),e.getEnd());case 182:case 181:return n=e.getStart(t),r(e.parent.typeArguments,n,e.getEnd())||r(e.parent.arguments,n,e.getEnd());case 227:return r(e.parent.declarations,e.getStart(t),e.getEnd());case 241:case 245:return r(e.parent.elements,e.getStart(t),e.getEnd())}}function L(e,t,n){var o,r,i=C(e,t);return i?(o=i,-1!==(r=G.indexOf(o,e))?M(o,r,t,n):-1):-1}function P(e,t,n){if(20===e.kind)return-1;if(e.parent&&G.isCallOrNewExpression(e.parent)&&e.parent.expression!==e){var o=e.parent.expression,r=function(e){for(;;)switch(e.kind){case 181:case 182:case 179:case 180:e=e.expression;break;default:return e}}(o);if(o===r)return-1;var i=t.getLineAndCharacterOfPosition(o.end),a=t.getLineAndCharacterOfPosition(r.end);return i.line===a.line?-1:x(i,t,n)}return-1}function M(e,t,n,o){G.Debug.assert(0<=t&&t<e.length);for(var r=R(e[t],n),i=t-1;0<=i;i--)if(26!==e[i].kind){if(n.getLineAndCharacterOfPosition(e[i].end).line!==r.line)return x(r,n,o);r=R(e[i],n)}return-1}function x(e,t,n){var o=t.getPositionOfLineAndCharacter(e.line,0);return U(o,o+e.character,t,n)}function F(e,t,n,o){for(var r=0,i=0,a=e;a<t;a++){var s=n.text.charCodeAt(a);if(!G.isWhiteSpaceSingleLine(s))break;9===s?i+=o.tabSize+i%o.tabSize:i++,r++}return{column:i,character:r}}function U(e,t,n,o){return F(e,t,n,o).column}function i(e,t,n){var o=t?t.kind:0;switch(e.kind){case 212:case 213:case 215:case 216:case 214:case 211:case 228:case 186:case 151:case 187:case 152:case 153:case 154:return 207!==o;case 244:return 245!==o;case 238:return 239!==o||t.namedBindings&&241!==t.namedBindings.kind;case 249:return 252!==o}return n}function H(e,t){return function(e){switch(e){case 210:case 229:case 199:case 230:case 232:case 231:case 177:case 207:case 234:case 178:case 163:case 172:case 165:case 235:case 258:case 257:case 185:case 179:case 181:case 182:case 208:case 226:case 243:case 219:case 195:case 175:case 174:case 251:case 250:case 256:case 150:case 155:case 156:case 146:case 160:case 161:case 168:case 183:case 191:case 245:case 241:case 246:case 242:case 261:case 149:return!0}return!1}(e.kind)||i(e,t,!1)}(t=e||(e={}))[t.Unknown=-1]="Unknown",N.getIndentation=function(e,t,n,o){if(void 0===o&&(o=!1),e>t.text.length)return w(n);if(n.indentStyle===G.IndentStyle.None)return 0;var r=G.findPrecedingToken(e,t),i=V.getRangeOfEnclosingComment(t,e,!0,r||null);if(i){var a=G.getLineAndCharacterOfPosition(t,e).line-1,s=G.getLineAndCharacterOfPosition(t,i.pos).line;if(G.Debug.assert(0<=s),a<=s)return U(G.getStartPositionOfLine(s,t),e,t,n);var l=G.getStartPositionOfLine(a,t),c=F(l,e,t,n),u=c.column,g=c.character;return 0===u?u:42===t.text.charCodeAt(l+g)?u-1:u}if(!r)return w(n);if(G.isStringOrRegularExpressionOrTemplateLiteral(r.kind)&&r.getStart(t)<=e&&e<r.end)return 0;var p,d,_,f,h,m,y,v,b,k,T=t.getLineAndCharacterOfPosition(e).line;if(n.indentStyle===G.IndentStyle.Block){for(var E=e;0<E;){var S=t.text.charCodeAt(E);if(!G.isWhiteSpaceLike(S))break;E--}var C=G.getLineStartPositionForPosition(E,t);return N.findFirstNonWhitespaceColumn(C,E,t,n)}if(26===r.kind&&194!==r.parent.kind&&-1!==(p=r,d=t,_=n,I=(f=G.findListItemInfo(p))&&0<f.listItemIndex?M(f.list.getChildren(),f.listItemIndex-1,d,_):-1))return I;for(var x,A,D=r;D;){if(G.positionBelongsToNode(D,e,t)&&H(D,h)){x=R(D,t);var B=(m=r,y=D,v=T,b=t,void 0,(k=G.findNextToken(m,y))?17===k.kind?1:18===k.kind&&v===R(k,b).line?2:0:0);A=0!==B?o&&2===B?n.indentSize:0:T!==x.line?n.indentSize:0;break}var I;if(-1!==(I=L(D,t,n)))return I;if(-1!==(I=P(D,t,n)))return I+n.indentSize;D=(h=D).parent}return D?O(D,x,void 0,A,t,n):w(n)},N.getIndentationForNode=function(e,t,n,o){return O(e,n.getLineAndCharacterOfPosition(e.getStart(n)),t,0,n,o)},N.getBaseIndentation=w,(o=n||(n={}))[o.Unknown=0]="Unknown",o[o.OpenBrace=1]="OpenBrace",o[o.CloseBrace=2]="CloseBrace",N.isArgumentAndStartLineOverlapsExpressionBeingCalled=E,N.childStartsOnTheSameLineWithElseInIfStatement=S,N.getContainingList=C,N.findFirstNonWhitespaceCharacterAndColumn=F,N.findFirstNonWhitespaceColumn=U,N.nodeWillIndentChild=i,N.shouldIndentChildNode=H})((V=G.formatting||(G.formatting={})).SmartIndenter||(V.SmartIndenter={}))}(ts||(ts={})),function(C){!function(e){function s(e){var t=e.__pos;return C.Debug.assert("number"==typeof t),t}function r(e,t){C.Debug.assert("number"==typeof t),e.__pos=t}function l(e){var t=e.__end;return C.Debug.assert("number"==typeof t),t}function i(e,t){C.Debug.assert("number"==typeof t),e.__end=t}var c,t,y,n;function v(e,t){return C.skipTrivia(e,t,!1,!0)}function u(e,t,n,o){if(n.useNonAdjustedStartPosition)return t.getFullStart();var r=t.getFullStart(),i=t.getStart(e);if(r===i)return i;var a=C.getLineStartPositionForPosition(r,e);if(C.getLineStartPositionForPosition(i,e)===a)return o===c.Start?i:r;var s=0<r?1:0,l=C.getStartPositionOfLine(C.getLineOfLocalPosition(e,a)+s,e);return l=v(e.text,l),C.getStartPositionOfLine(C.getLineOfLocalPosition(e,l),e)}function g(e,t,n){if(n.useNonAdjustedEndPosition||C.isExpression(t))return t.getEnd();var o=t.getEnd(),r=C.skipTrivia(e.text,o,!0);return r!==o&&C.isLineBreak(e.text.charCodeAt(r-1))?r:o}function b(e,t){return t&&e.parent&&(26===t.kind||25===t.kind&&178===e.parent.kind)}(t=c=e.Position||(e.Position={}))[t.FullStart=0]="FullStart",t[t.Start=1]="Start",(n=y||(y={}))[n.Remove=0]="Remove",n[n.ReplaceWithSingleNode=1]="ReplaceWithSingleNode",n[n.ReplaceWithMultipleNodes=2]="ReplaceWithMultipleNodes",e.getSeparatorCharacter=function(e){return C.tokenToString(e.kind)},e.getAdjustedStartPosition=u,e.getAdjustedEndPosition=g;var o=function(){function l(e,t,n){this.newLine=e,this.rulesProvider=t,this.validator=n,this.changes=[],this.newLineCharacter=C.getNewLineCharacter({newLine:e})}return l.fromContext=function(e){return new l("\n"===e.newLineCharacter?1:0,e.rulesProvider)},l.with=function(e,t){var n=l.fromContext(e);return t(n),n.getChanges()},l.prototype.deleteRange=function(e,t){return this.changes.push({kind:y.Remove,sourceFile:e,range:t}),this},l.prototype.deleteNode=function(e,t,n){void 0===n&&(n={});var o=u(e,t,n,c.FullStart),r=g(e,t,n);return this.changes.push({kind:y.Remove,sourceFile:e,range:{pos:o,end:r}}),this},l.prototype.deleteNodeRange=function(e,t,n,o){void 0===o&&(o={});var r=u(e,t,o,c.FullStart),i=g(e,n,o);return this.changes.push({kind:y.Remove,sourceFile:e,range:{pos:r,end:i}}),this},l.prototype.deleteNodeInList=function(e,t){var n=C.formatting.SmartIndenter.getContainingList(t,e);if(!n)return C.Debug.fail("node is not a list element"),this;var o=C.indexOfNode(n,t);if(o<0)return this;if(1===n.length)return this.deleteNode(e,t),this;if(o!==n.length-1){var r=C.getTokenAtPosition(e,t.end,!1);if(r&&b(t,r)){var i=C.skipTrivia(e.text,u(e,t,{},c.FullStart),!1,!0),a=n[o+1],s=C.skipTrivia(e.text,u(e,a,{},c.FullStart),!1,!0);this.deleteRange(e,{pos:i,end:s})}}else{var l=C.getTokenAtPosition(e,n[o-1].end,!1);l&&b(t,l)&&this.deleteNodeRange(e,l,t)}return this},l.prototype.replaceRange=function(e,t,n,o){return void 0===o&&(o={}),this.changes.push({kind:y.ReplaceWithSingleNode,sourceFile:e,range:t,options:o,node:n}),this},l.prototype.replaceNode=function(e,t,n,o){void 0===o&&(o={});var r=u(e,t,o,c.Start),i=g(e,t,o);return this.replaceWithSingle(e,r,i,n,o)},l.prototype.replaceNodeRange=function(e,t,n,o,r){void 0===r&&(r={});var i=u(e,t,r,c.Start),a=g(e,n,r);return this.replaceWithSingle(e,i,a,o,r)},l.prototype.replaceWithSingle=function(e,t,n,o,r){return this.changes.push({kind:y.ReplaceWithSingleNode,sourceFile:e,options:r,node:o,range:{pos:t,end:n}}),this},l.prototype.replaceWithMultiple=function(e,t,n,o,r){return this.changes.push({kind:y.ReplaceWithMultipleNodes,sourceFile:e,options:r,nodes:o,range:{pos:t,end:n}}),this},l.prototype.replaceNodeWithNodes=function(e,t,n,o){var r=u(e,t,o,c.Start),i=g(e,t,o);return this.replaceWithMultiple(e,r,i,n,o)},l.prototype.replaceNodesWithNodes=function(e,t,n,o){var r=u(e,t[0],o,c.Start),i=g(e,C.lastOrUndefined(t),o);return this.replaceWithMultiple(e,r,i,n,o)},l.prototype.replaceRangeWithNodes=function(e,t,n,o){return this.replaceWithMultiple(e,t.pos,t.end,n,o)},l.prototype.replaceNodeRangeWithNodes=function(e,t,n,o,r){var i=u(e,t,r,c.Start),a=g(e,n,r);return this.replaceWithMultiple(e,i,a,o,r)},l.prototype.insertNodeAt=function(e,t,n,o){return void 0===o&&(o={}),this.changes.push({kind:y.ReplaceWithSingleNode,sourceFile:e,options:o,node:n,range:{pos:t,end:t}}),this},l.prototype.insertNodeBefore=function(e,t,n,o){void 0===o&&(o={});var r=u(e,t,o,c.Start);return this.replaceWithSingle(e,r,r,n,o)},l.prototype.insertNodeAfter=function(e,t,n,o){void 0===o&&(o={}),(C.isStatementButNotDeclaration(t)||149===t.kind||148===t.kind||150===t.kind)&&59!==e.text.charCodeAt(t.end-1)&&this.changes.push({kind:y.ReplaceWithSingleNode,sourceFile:e,options:{},range:{pos:t.end,end:t.end},node:C.createToken(25)});var r=g(e,t,o);return this.replaceWithSingle(e,r,r,n,o)},l.prototype.insertNodeInListAfter=function(e,t,n){var o=C.formatting.SmartIndenter.getContainingList(t,e);if(!o)return C.Debug.fail("node is not a list element"),this;var r=C.indexOfNode(o,t);if(r<0)return this;var i=t.getEnd();if(r!==o.length-1){var a=C.getTokenAtPosition(e,t.end,!1);if(a&&b(t,a)){var s=C.getLineAndCharacterOfPosition(e,v(e.text,o[r+1].getFullStart())),l=C.getLineAndCharacterOfPosition(e,a.end),c=void 0,u=void 0;l.line===s.line?(u=a.end,c=function(e){for(var t="",n=0;n<e;n++)t+=" ";return t}(s.character-l.character)):u=C.getStartPositionOfLine(s.line,e),this.changes.push({kind:y.ReplaceWithSingleNode,sourceFile:e,range:{pos:u,end:o[r+1].getStart(e)},node:n,options:{prefix:c,suffix:""+C.tokenToString(a.kind)+e.text.substring(a.end,o[r+1].getStart(e))}})}}else{var g=t.getStart(e),p=C.getLineStartPositionForPosition(g,e),d=void 0,_=!1;if(1===o.length)d=26;else{var f=C.findPrecedingToken(t.pos,e);d=b(t,f)?f.kind:26,_=C.getLineStartPositionForPosition(o[r-1].getStart(e),e)!==p}if(function(e,t){for(var n=t;n<e.length;){var o=e.charCodeAt(n);if(!C.isWhiteSpaceSingleLine(o))return 47===o;n++}return!1}(e.text,t.end)&&(_=!0),_){this.changes.push({kind:y.ReplaceWithSingleNode,sourceFile:e,range:{pos:i,end:i},node:C.createToken(d),options:{}});var h=C.formatting.SmartIndenter.findFirstNonWhitespaceColumn(p,g,e,this.rulesProvider.getFormatOptions()),m=C.skipTrivia(e.text,i,!0,!1);m!==i&&C.isLineBreak(e.text.charCodeAt(m-1))&&m--,this.changes.push({kind:y.ReplaceWithSingleNode,sourceFile:e,range:{pos:m,end:m},node:n,options:{indentation:h,prefix:this.newLineCharacter}})}else this.changes.push({kind:y.ReplaceWithSingleNode,sourceFile:e,range:{pos:i,end:i},node:n,options:{prefix:C.tokenToString(d)+" "}})}return this},l.prototype.getChanges=function(){for(var a=this,e=C.createMap(),t=0,n=this.changes;t<n.length;t++){var o=n[t],r=e.get(o.sourceFile.path);r||e.set(o.sourceFile.path,r=[]),r.push(o)}var s=[];return e.forEach(function(e){for(var t=e[0].sourceFile,n={fileName:t.fileName,textChanges:[]},o=0,r=l.normalize(e);o<r.length;o++){var i=r[o];n.textChanges.push({span:a.computeSpan(i,t),newText:a.computeNewText(i,t)})}s.push(n)}),s},l.prototype.computeSpan=function(e,t){return C.createTextSpanFromBounds(e.range.pos,e.range.end)},l.prototype.computeNewText=function(e,t){var n=this;if(e.kind===y.Remove)return"";var o,r=e.options||{},i=e.range.pos,a=C.getLineStartPositionForPosition(i,t)===i;e.kind===y.ReplaceWithMultipleNodes?o=e.nodes.map(function(e){return n.getFormattedTextOfNode(e,t,i,r)}).join(e.options.nodeSeparator):(C.Debug.assert(e.kind===y.ReplaceWithSingleNode,"change.kind === ReplaceWithSingleNode"),o=this.getFormattedTextOfNode(e.node,t,i,r));return o=a||void 0!==r.indentation?o:o.replace(/^\s+/,""),(r.prefix||"")+o+(r.suffix||"")},l.prototype.getFormattedTextOfNode=function(e,t,n,o){var r,i,a,s,l,c=(r=e,i=t,a=this.newLine,s={newLine:a,target:i&&i.languageVersion},l=new S(C.getNewLineCharacter(s)),C.createPrinter(s,l).writeNode(4,r,i,l),{text:l.getText(),node:E(r)});this.validator&&this.validator(c);var u,g,p,d,_,f,h,m,y=this.rulesProvider.getFormatOptions(),v=C.getLineStartPositionForPosition(n,t)===n,b=void 0!==o.indentation?o.indentation:!1!==o.useIndentationFromFile?C.formatting.SmartIndenter.getIndentation(n,t,y,v||o.prefix===this.newLineCharacter):0,k=void 0!==o.delta?o.delta:C.formatting.SmartIndenter.shouldIndentChildNode(e)&&y.indentSize||0;return u=c,g=t,p=b,d=k,_=this.rulesProvider,f=C.computeLineStarts(u.text),h={text:u.text,lineMap:f,getLineAndCharacterOfPosition:function(e){return C.computeLineAndCharacterOfPosition(f,e)}},m=C.formatting.formatNodeGivenIndentation(u.node,h,g.languageVariant,p,d,_),T(u.text,m)},l.normalize=function(e){for(var t=C.stableSort(e,function(e,t){return e.range.pos-t.range.pos}),n=0;n<t.length-2;n++)C.Debug.assert(t[n].range.end<=t[n+1].range.pos);return t},l}();function T(e,t){for(var n=t.length-1;0<=n;n--){var o=t[n];e=""+e.substring(0,o.span.start)+o.newText+e.substring(C.textSpanEnd(o.span))}return e}function E(e){var t=C.visitEachChild(e,E,C.nullTransformationContext,a,E),n=C.nodeIsSynthesized(t)?t:Object.create(t);return n.pos=s(e),n.end=l(e),n}function a(e,t,n,o,r){var i=C.visitNodes(e,t,n,o,r);if(!i)return i;var a=i===e?C.createNodeArray(i.slice(0)):i;return a.pos=s(e),a.end=l(e),a}e.ChangeTracker=o,e.applyChanges=T;var S=function(){function e(e){var o=this;this.lastNonTriviaPosition=0,this.writer=C.createTextWriter(e),this.onEmitNode=function(e,t,n){t&&r(t,o.lastNonTriviaPosition),n(e,t),t&&i(t,o.lastNonTriviaPosition)},this.onBeforeEmitNodeArray=function(e){e&&r(e,o.lastNonTriviaPosition)},this.onAfterEmitNodeArray=function(e){e&&i(e,o.lastNonTriviaPosition)},this.onBeforeEmitToken=function(e){e&&r(e,o.lastNonTriviaPosition)},this.onAfterEmitToken=function(e){e&&i(e,o.lastNonTriviaPosition)}}return e.prototype.setLastNonTriviaPosition=function(e,t){if(t||(o=e,C.skipTrivia(o,0)!==o.length)){this.lastNonTriviaPosition=this.writer.getTextPos();for(var n=0;C.isWhiteSpaceLike(e.charCodeAt(e.length-n-1));)n++;this.lastNonTriviaPosition-=n}var o},e.prototype.write=function(e){this.writer.write(e),this.setLastNonTriviaPosition(e,!1)},e.prototype.writeTextOfNode=function(e,t){this.writer.writeTextOfNode(e,t)},e.prototype.writeLine=function(){this.writer.writeLine()},e.prototype.increaseIndent=function(){this.writer.increaseIndent()},e.prototype.decreaseIndent=function(){this.writer.decreaseIndent()},e.prototype.getText=function(){return this.writer.getText()},e.prototype.rawWrite=function(e){this.writer.rawWrite(e),this.setLastNonTriviaPosition(e,!1)},e.prototype.writeLiteral=function(e){this.writer.writeLiteral(e),this.setLastNonTriviaPosition(e,!0)},e.prototype.getTextPos=function(){return this.writer.getTextPos()},e.prototype.getLine=function(){return this.writer.getLine()},e.prototype.getColumn=function(){return this.writer.getColumn()},e.prototype.getIndent=function(){return this.writer.getIndent()},e.prototype.isAtStartOfLine=function(){return this.writer.isAtStartOfLine()},e.prototype.reset=function(){this.writer.reset(),this.lastNonTriviaPosition=0},e}()}(C.textChanges||(C.textChanges={}))}(ts||(ts={})),function(t){var e,o;e=t.codefix||(t.codefix={}),o=[],e.registerCodeFix=function(n){t.forEach(n.errorCodes,function(e){var t=o[e];t||(t=[],o[e]=t),t.push(n)})},e.getSupportedErrorCodes=function(){return Object.keys(o)},e.getFixes=function(i){var e=o[i.errorCode],a=[];return t.forEach(e,function(e){var t=e.getCodeActions(i);if(t&&0<t.length)for(var n=0,o=t;n<o.length;n++){var r=o[n];void 0===r?i.host.log("Action for error code "+i.errorCode+" added an invalid action entry; please log a bug"):a.push(r)}}),a}}(ts||(ts={})),function(e){var t,r;t=e.refactor||(e.refactor={}),r=e.createMap(),t.registerRefactor=function(e){r.set(e.name,e)},t.getApplicableRefactors=function(t){return e.flatMapIter(r.values(),function(e){return t.cancellationToken&&t.cancellationToken.isCancellationRequested()?void 0:e.getAvailableActions(t)})},t.getEditsForRefactor=function(e,t,n){var o=r.get(t);return o&&o.getEditsForAction(e,n)},e.getRefactorContextLength=function(e){return void 0===e.endPosition?0:e.endPosition-e.startPosition}}(ts||(ts={})),function(a){(a.codefix||(a.codefix={})).registerCodeFix({errorCodes:[a.Diagnostics._0_accepts_too_few_arguments_to_be_used_as_a_decorator_here_Did_you_mean_to_call_it_first_and_write_0.code],getCodeActions:function(e){var t=e.sourceFile,n=a.getTokenAtPosition(t,e.span.start,!1),o=a.getAncestor(n,147);a.Debug.assert(!!o,"Expected position to be owned by a decorator.");var r=a.createCall(o.expression,void 0,void 0),i=a.textChanges.ChangeTracker.fromContext(e);return i.replaceNode(t,o.expression,r),[{description:a.getLocaleSpecificMessage(a.Diagnostics.Call_decorator_expression),changes:i.getChanges()}]}})}(ts||(ts={})),function(l){(l.codefix||(l.codefix={})).registerCodeFix({errorCodes:[l.Diagnostics.Cannot_access_0_1_because_0_is_a_type_but_not_a_namespace_Did_you_mean_to_retrieve_the_type_of_the_property_1_in_0_with_0_1.code],getCodeActions:function(e){var t=e.sourceFile,n=l.getTokenAtPosition(t,e.span.start,!1),o=l.getAncestor(n,143);if(l.Debug.assert(!!o,"Expected position to be owned by a qualified name."),l.isIdentifier(o.left)){var r=o.left.getText(t),i=o.right.getText(t),a=l.createIndexedAccessTypeNode(l.createTypeReferenceNode(o.left,void 0),l.createLiteralTypeNode(l.createLiteral(i))),s=l.textChanges.ChangeTracker.fromContext(e);return s.replaceNode(t,o,a),[{description:l.formatStringFromArgs(l.getLocaleSpecificMessage(l.Diagnostics.Rewrite_as_the_indexed_access_type_0),[r+'["'+i+'"]']),changes:s.getChanges()}]}}})}(ts||(ts={})),function(T){var E;(E=T.codefix||(T.codefix={})).registerCodeFix({errorCodes:[T.Diagnostics.Class_0_incorrectly_implements_interface_1.code],getCodeActions:function(e){var t=e.sourceFile,n=e.span.start,o=T.getTokenAtPosition(t,n,!1),a=e.program.getTypeChecker(),s=T.getContainingClass(o);if(s){for(var r=T.getOpenBraceOfClassLike(s,t),i=a.getTypeAtLocation(s),l=T.getClassImplementsHeritageClauseElements(s),c=!!a.getIndexTypeOfType(i,1),u=!!a.getIndexTypeOfType(i,0),g=[],p=0,d=l;p<d.length;p++){var _=d[p],f=a.getTypeAtLocation(_),h=a.getPropertiesOfType(f),m=h.filter(function(e){return!(8&T.getModifierFlags(e.valueDeclaration))}),y=[];k(f,1,c,y),k(f,0,u,y),y=y.concat(E.createMissingMemberNodes(s,m,a));var v=T.formatStringFromArgs(T.getLocaleSpecificMessage(T.Diagnostics.Implement_interface_0),[_.getText()]);0<y.length&&(b=y,g.push({description:v,changes:E.newNodesToChanges(b,r,e)}))}var b;return g}function k(e,t,n,o){if(!n){var r=a.getIndexInfoOfType(e,t);if(r){var i=a.indexInfoToIndexSignatureDeclaration(r,t,s);o.push(i)}}}}})}(ts||(ts={})),function(T){var c;(c=T.codefix||(T.codefix={})).registerCodeFix({errorCodes:[T.Diagnostics.Property_0_does_not_exist_on_type_1.code,T.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2.code],getCodeActions:function(h){var e=h.sourceFile,t=h.span.start,m=T.getTokenAtPosition(e,t,!1);if(71===m.kind&&T.isPropertyAccessExpression(m.parent)){var n,y=m.getText(e),i=!1;if(99===m.parent.expression.kind){var o=T.getThisContainer(m,!1);if(!T.isClassElement(o))return;n=o.parent,i=n&&T.hasModifier(o,32)}else{var r=h.program.getTypeChecker(),a=m.parent.expression,s=r.getTypeAtLocation(a);if(32768&s.flags){var l=s.symbol;32&l.flags&&(n=l.declarations&&l.declarations[0],s!==r.getDeclaredTypeOfSymbol(l)&&(i=!0))}}if(n&&T.isClassLike(n)){var v=T.getSourceFileOfNode(n),b=T.getOpenBraceOfClassLike(n,v);return T.isInJavaScriptFile(v)?function(e,t){var n,o=k(!1);if(o&&(n=[o]),t){if(199===e.kind)return n;var r=e.name.getText(),i=T.createStatement(T.createAssignment(T.createPropertyAccess(T.createIdentifier(r),y),T.createIdentifier("undefined"))),a=T.textChanges.ChangeTracker.fromContext(h);a.insertNodeAfter(v,e,i,{prefix:h.newLineCharacter,suffix:h.newLineCharacter});var s={description:T.formatStringFromArgs(T.getLocaleSpecificMessage(T.Diagnostics.Initialize_static_property_0),[y]),changes:a.getChanges()};return(n||(n=[])).push(s),n}var l=T.getFirstConstructorWithBody(e);if(!l)return n;var c=T.createStatement(T.createAssignment(T.createPropertyAccess(T.createThis(),y),T.createIdentifier("undefined"))),u=T.textChanges.ChangeTracker.fromContext(h);u.insertNodeBefore(v,l.body.getLastToken(),c,{suffix:h.newLineCharacter});var g={description:T.formatStringFromArgs(T.getLocaleSpecificMessage(T.Diagnostics.Initialize_property_0_in_the_constructor),[y]),changes:u.getChanges()};return(n||(n=[])).push(g),n}(n,i):function(e,t){var n,o,r=k(!0);if(r&&(n=[r]),194===m.parent.parent.kind){var i=m.parent.parent,a=m.parent===i.left?i.right:i.left,s=h.program.getTypeChecker(),l=s.getWidenedType(s.getBaseTypeOfLiteralType(s.getTypeAtLocation(a)));o=s.typeToTypeNode(l,e)}o=o||T.createKeywordTypeNode(119);var c=T.createProperty(void 0,t?[T.createToken(115)]:void 0,y,void 0,o,void 0),u=T.textChanges.ChangeTracker.fromContext(h);u.insertNodeAfter(v,b,c,{suffix:h.newLineCharacter});var g=t?T.Diagnostics.Declare_static_property_0:T.Diagnostics.Declare_property_0;if(n=T.append(n,{description:T.formatStringFromArgs(T.getLocaleSpecificMessage(g),[y]),changes:u.getChanges()}),!t){var p=T.createKeywordTypeNode(136),d=T.createParameter(void 0,void 0,void 0,"x",void 0,p,void 0),_=T.createIndexSignature(void 0,void 0,[d],o),f=T.textChanges.ChangeTracker.fromContext(h);f.insertNodeAfter(v,b,_,{suffix:h.newLineCharacter}),n.push({description:T.formatStringFromArgs(T.getLocaleSpecificMessage(T.Diagnostics.Add_index_signature_for_property_0),[y]),changes:f.getChanges()})}return n}(n,i)}}function k(e){if(181===m.parent.parent.kind){var t=m.parent.parent,n=c.createMethodFromCallExpression(t,y,e,i),o=T.textChanges.ChangeTracker.fromContext(h);o.insertNodeAfter(v,b,n,{suffix:h.newLineCharacter});var r=i?T.Diagnostics.Declare_static_method_0:T.Diagnostics.Declare_method_0;return{description:T.formatStringFromArgs(T.getLocaleSpecificMessage(r),[y]),changes:o.getChanges()}}}}})}(ts||(ts={})),function(c){(c.codefix||(c.codefix={})).registerCodeFix({errorCodes:[c.Diagnostics.Property_0_does_not_exist_on_type_1_Did_you_mean_2.code,c.Diagnostics.Cannot_find_name_0_Did_you_mean_1.code],getCodeActions:function(e){var t,n,o,r=e.sourceFile,i=c.getTokenAtPosition(r,e.span.start,!1),a=e.program.getTypeChecker();if(c.isPropertyAccessExpression(i.parent)&&i.parent.name===i){c.Debug.assert(71===i.kind);var s=a.getTypeAtLocation(i.parent.expression);t=a.getSuggestionForNonexistentProperty(i,s)}else{var l=c.getMeaningFromLocation(i);t=a.getSuggestionForNonexistentSymbol(i,c.getTextOfNode(i),(o=0,4&(n=l)&&(o|=1920),2&n&&(o|=793064),1&n&&(o|=107455),o))}if(t)return[{description:c.formatStringFromArgs(c.getLocaleSpecificMessage(c.Diagnostics.Change_spelling_to_0),[t]),changes:[{fileName:r.fileName,textChanges:[{span:{start:i.getStart(),length:i.getWidth()},newText:t}]}]}]}})}(ts||(ts={})),function(a){!function(e){function i(e,t){var n=a.getPackageName(t).packageName;if(e.isKnownTypesPackageName(n)){var o=a.getTypesPackageName(n);return{description:"Install '"+o+"'",changes:[],commands:[{type:"install package",packageName:o}]}}}e.registerCodeFix({errorCodes:[a.Diagnostics.Could_not_find_a_declaration_file_for_module_0_1_implicitly_has_an_any_type.code],getCodeActions:function(e){var t=e.sourceFile,n=e.span.start,o=a.getTokenAtPosition(t,n,!1);if(!a.isStringLiteral(o))throw a.Debug.fail();var r=i(e.host,o.text);return r&&[r]}}),e.tryGetCodeActionForInstallPackageTypes=i}(a.codefix||(a.codefix={}))}(ts||(ts={})),function(d){!function(g){function e(e){var t=e.sourceFile,n=e.span.start,o=d.getTokenAtPosition(t,n,!1),r=e.program.getTypeChecker();if(d.isClassLike(o.parent)){var i=o.parent,a=d.getClassExtendsHeritageClauseElement(i),s=r.getTypeAtLocation(a),l=r.getPropertiesOfType(s).filter(p),c=g.createMissingMemberNodes(i,l,r),u=g.newNodesToChanges(c,d.getOpenBraceOfClassLike(i,t),e);if(u&&0<u.length)return[{description:d.getLocaleSpecificMessage(d.Diagnostics.Implement_inherited_abstract_class),changes:u}]}}function p(e){var t=e.getDeclarations();d.Debug.assert(!!(t&&0<t.length));var n=d.getModifierFlags(t[0]);return!(8&n||!(128&n))}g.registerCodeFix({errorCodes:[d.Diagnostics.Non_abstract_class_0_does_not_implement_inherited_abstract_member_1_from_class_2.code],getCodeActions:e}),g.registerCodeFix({errorCodes:[d.Diagnostics.Non_abstract_class_expression_does_not_implement_inherited_abstract_member_0_from_class_1.code],getCodeActions:e})}(d.codefix||(d.codefix={}))}(ts||(ts={})),function(l){(l.codefix||(l.codefix={})).registerCodeFix({errorCodes:[l.Diagnostics.super_must_be_called_before_accessing_this_in_the_constructor_of_a_derived_class.code],getCodeActions:function(e){var t=e.sourceFile,n=l.getTokenAtPosition(t,e.span.start,!1);if(99===n.kind){var o=l.getContainingFunction(n),r=function e(t){return 210===t.kind&&l.isSuperCall(t.expression)?t:l.isFunctionLike(t)?void 0:l.forEachChild(t,e)}(o.body);if(r){if(r.expression&&181===r.expression.kind)for(var i=r.expression.arguments,a=0;a<i.length;a++)if(i[a].expression===n)return;var s=l.textChanges.ChangeTracker.fromContext(e);return s.insertNodeAfter(t,l.getOpenBrace(o,t),r,{suffix:e.newLineCharacter}),s.deleteNode(t,r),[{description:l.getLocaleSpecificMessage(l.Diagnostics.Make_super_call_the_first_statement_in_the_constructor),changes:s.getChanges()}]}}}})}(ts||(ts={})),function(i){(i.codefix||(i.codefix={})).registerCodeFix({errorCodes:[i.Diagnostics.Constructors_for_derived_classes_must_contain_a_super_call.code],getCodeActions:function(e){var t=e.sourceFile,n=i.getTokenAtPosition(t,e.span.start,!1);if(123===n.kind){var o=i.textChanges.ChangeTracker.fromContext(e),r=i.createStatement(i.createCall(i.createSuper(),void 0,i.emptyArray));return o.insertNodeAfter(t,i.getOpenBrace(n.parent,t),r,{suffix:e.newLineCharacter}),[{description:i.getLocaleSpecificMessage(i.Diagnostics.Add_missing_super_call),changes:o.getChanges()}]}}})}(ts||(ts={})),function(u){(u.codefix||(u.codefix={})).registerCodeFix({errorCodes:[u.Diagnostics.Cannot_extend_an_interface_0_Did_you_mean_implements.code],getCodeActions:function(e){var t=e.sourceFile,n=e.span.start,o=u.getTokenAtPosition(t,n,!1),r=u.getContainingClass(o);if(71===o.kind&&u.isClassLike(r)){var i=r.heritageClauses;if(i&&0<i.length){var a=i[0].getFirstToken();if(a&&85===a.kind){var s=u.textChanges.ChangeTracker.fromContext(e);s.replaceNode(t,a,u.createToken(108));for(var l=1;l<i.length;l++){var c=i[l].getFirstToken();c&&s.replaceNode(t,c,u.createToken(26))}return[{description:u.getLocaleSpecificMessage(u.Diagnostics.Change_extends_to_implements),changes:s.getChanges()}]}}}}})}(ts||(ts={})),function(r){(r.codefix||(r.codefix={})).registerCodeFix({errorCodes:[r.Diagnostics.Cannot_find_name_0_Did_you_mean_the_instance_member_this_0.code],getCodeActions:function(e){var t=e.sourceFile,n=r.getTokenAtPosition(t,e.span.start,!1);if(71===n.kind){var o=r.textChanges.ChangeTracker.fromContext(e);return o.replaceNode(t,n,r.createPropertyAccess(r.createThis(),n)),[{description:r.getLocaleSpecificMessage(r.Diagnostics.Add_this_to_unresolved_variable),changes:o.getChanges()}]}}})}(ts||(ts={})),function(T){(T.codefix||(T.codefix={})).registerCodeFix({errorCodes:[T.Diagnostics._0_is_declared_but_its_value_is_never_read.code,T.Diagnostics.Property_0_is_declared_but_its_value_is_never_read.code],getCodeActions:function(d){var _=d.sourceFile,e=d.span.start,n=T.getTokenAtPosition(_,e,!1);switch(21===n.kind&&(n=T.getTokenAtPosition(_,e+1,!1)),n.kind){case 71:return function(e){var t,n,o=e.parent;switch(o.kind){case 226:return function(e,t){switch(t.parent.parent.kind){case 214:var n=t.parent.parent,o=n.initializer;return[1===o.declarations.length?y(o):b(t)];case 216:var r=t.parent.parent;T.Debug.assert(227===r.initializer.kind);var i=r.initializer;return[(s=i.declarations[0],l=T.createObjectLiteral(),k(T.textChanges.ChangeTracker.fromContext(d).replaceNode(_,s,l))),h(e)];case 215:return[h(e)];default:var a=t.parent.parent;return 1===a.declarationList.declarations.length?[y(a)]:[b(t)]}var s,l}(e,o);case 145:var r=o.parent.typeParameters;if(1===r.length){var i=T.getTokenAtPosition(_,r.pos-1,!1),a=T.getTokenAtPosition(_,r.end,!1);return T.Debug.assert(27===i.kind),T.Debug.assert(29===a.kind),[(t=i,n=a,k(T.textChanges.ChangeTracker.fromContext(d).deleteNodeRange(_,t,n)))]}return[b(o)];case 146:var s=o.parent;return[1===s.parameters.length?y(o):b(o),h(e)];case 237:var l=T.getAncestor(e,237);return[y(l)];case 242:var c=o.parent;return 1===c.elements.length?m(c):[b(o)];case 239:var u=o;if(u.namedBindings){var g=u.name.getStart(_),a=T.getTokenAtPosition(_,u.name.end,!1);return a&&26===a.kind?[v({pos:g,end:T.skipTrivia(_.text,a.end,!1,!0)})]:[y(u.name)]}var p=T.getAncestor(u,238);return[y(p)];case 240:return m(o);default:return f()}}(n);case 149:case 240:return[y(n.parent)];default:return f()}function f(){return T.isDeclarationName(n)?[y(n.parent)]:T.isLiteralComputedPropertyDeclarationName(n)?[y(n.parent.parent)]:void 0}function h(e){var t=e.getStart(_,!1);return{description:T.formatStringFromArgs(T.getLocaleSpecificMessage(T.Diagnostics.Prefix_0_with_an_underscore),{0:n.getText()}),changes:[{fileName:_.path,textChanges:[{span:{start:t,length:0},newText:"_"}]}]}}function m(e){if(e.parent.name){var t=T.getTokenAtPosition(_,e.pos-1,!1);return t&&26===t.kind?[v({pos:t.getStart(),end:e.end})]:void 0}return[y(T.getAncestor(e,238))]}function y(e){return k(T.textChanges.ChangeTracker.fromContext(d).deleteNode(_,e))}function v(e){return k(T.textChanges.ChangeTracker.fromContext(d).deleteRange(_,e))}function b(e){return k(T.textChanges.ChangeTracker.fromContext(d).deleteNodeInList(_,e))}function k(e){return{description:T.formatStringFromArgs(T.getLocaleSpecificMessage(T.Diagnostics.Remove_declaration_for_Colon_0),{0:n.getText()}),changes:e.getChanges()}}}})}(ts||(ts={})),function(g){!function(e){function u(e,t,n,o){return{description:g.formatStringFromArgs(g.getLocaleSpecificMessage(g.Diagnostics.Change_0_to_1),[n,o]),changes:[{fileName:t,textChanges:[{span:{start:e.getStart(),length:e.getWidth()},newText:o}]}]}}(g.codefix||(g.codefix={})).registerCodeFix({errorCodes:[g.Diagnostics.JSDoc_types_can_only_be_used_inside_documentation_comments.code],getCodeActions:function(e){var t=e.sourceFile,n=g.getTokenAtPosition(t,e.span.start,!1),o=g.findAncestor(n,function(e){return 202===e.kind||155===e.kind||156===e.kind||228===e.kind||153===e.kind||157===e.kind||172===e.kind||151===e.kind||150===e.kind||146===e.kind||149===e.kind||148===e.kind||154===e.kind||231===e.kind||184===e.kind||226===e.kind});if(!o)return;var r=e.program.getTypeChecker(),i=o.type;if(!i)return;var a=g.getTextOfNode(i),s=r.getTypeFromTypeNode(i),l=[u(i,t.fileName,a,r.typeToString(s,void 0,8))];if(270===i.kind){var c=r.typeToString(r.getNullableType(s,2048),void 0,8);l.push(u(i,t.fileName,a,c))}return l}})}()}(ts||(ts={})),function(F){!function(e){var t,n,N=F.textChanges.ChangeTracker;e.registerCodeFix({errorCodes:[F.Diagnostics.Cannot_find_name_0.code,F.Diagnostics.Cannot_find_name_0_Did_you_mean_1.code,F.Diagnostics.Cannot_find_namespace_0.code,F.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead.code],getCodeActions:function(e){var t=(n=e,o=!!n.host.useCaseSensitiveFileNames&&n.host.useCaseSensitiveFileNames(),r=n.program.getTypeChecker(),i=F.getTokenAtPosition(n.sourceFile,n.span.start,!1),{host:n.host,newLineCharacter:n.newLineCharacter,rulesProvider:n.rulesProvider,sourceFile:n.sourceFile,checker:r,compilerOptions:n.program.getCompilerOptions(),cachedImportDeclarations:[],getCanonicalFileName:F.createGetCanonicalFileName(o),symbolName:i.getText(),symbolToken:i});var n,o,r,i;return e.errorCode===F.Diagnostics._0_refers_to_a_UMD_global_but_the_current_file_is_a_module_Consider_adding_an_import_instead.code?function(e){var t,n,o=e.checker,r=e.symbolToken,i=o.getSymbolAtLocation(r);2097152&i.flags?(t=o.getAliasedSymbol(i),n=e.symbolName):F.isJsxOpeningLikeElement(r.parent)&&r.parent.tagName===r?(t=o.getAliasedSymbol(o.resolveName(o.getJsxNamespace(),r.parent.tagName,107455)),n=t.name):F.Debug.fail("Either the symbol or the JSX namespace should be a UMD global if we got here");return d(t,__assign({},e,{symbolName:n,kind:2}))}(t):function(i,e,a){var s=i.sourceFile,l=i.checker,c=i.symbolName,t=i.symbolToken;F.Debug.assert("default"!==c);var u=new p,g=F.getMeaningFromLocation(t);return f(l,e,function(e){if(e!==s.symbol){a.throwIfCancellationRequested();var t=l.tryGetMemberInModuleExports("default",e);if(t){var n=F.getLocalSymbolForExportDefault(t);if(n&&n.escapedName===c&&_(n,g)){var o=F.getUniqueSymbolId(n,l);u.addActions(o,d(e,__assign({},i,{kind:1})))}}var r=l.tryGetMemberInModuleExportsAndProperties(c,e);r&&_(r,g)&&(o=F.getUniqueSymbolId(r,l),u.addActions(o,d(e,__assign({},i,{kind:0}))))}}),u.getAllActions()}(t,e.program.getSourceFiles(),e.cancellationToken)}}),(n=t||(t={}))[n.Better=0]="Better",n[n.Equal=1]="Equal",n[n.Worse=2]="Worse";var o,p=function(){function e(){this.symbolIdToActionMap=[]}return e.prototype.addAction=function(e,t){var n=this.symbolIdToActionMap[e];if(n)if("CodeChange"!==t.kind){for(var o=[],r=0,i=this.symbolIdToActionMap[e];r<i.length;r++){var a=i[r];if("CodeChange"!==a.kind)switch(this.compareModuleSpecifiers(a.moduleSpecifier,t.moduleSpecifier)){case 0:if("NewImport"===t.kind)return;case 1:o.push(a);break;case 2:continue}else o.push(a)}o.push(t),this.symbolIdToActionMap[e]=o}else n.push(t);else this.symbolIdToActionMap[e]=[t]},e.prototype.addActions=function(e,t){for(var n=0,o=t;n<o.length;n++){var r=o[n];this.addAction(e,r)}},e.prototype.getAllActions=function(){var e=[];for(var t in this.symbolIdToActionMap)e=F.concatenate(e,this.symbolIdToActionMap[t]);return e},e.prototype.compareModuleSpecifiers=function(e,t){if(e===t)return 1;if(0===t.indexOf(e))return 0;if(0===e.indexOf(t))return 2;if(F.isExternalModuleNameRelative(e)&&F.isExternalModuleNameRelative(t)){var n=new RegExp(F.directorySeparator,"g"),o=(e.match(n)||[]).length,r=(t.match(n)||[]).length;return o<r?0:o===r?1:2}return 1},e}();function w(e,t,n,o,r){return{description:F.formatMessage.apply(void 0,[void 0,e].concat(t)),changes:n,kind:o,moduleSpecifier:r}}function d(e,t){var n=function(t,n,e,o){var r=e.imports;void 0===o&&(o=[]);var i=F.getUniqueSymbolId(t,n),a=o[i];a||(a=o[i]=F.mapDefined(r,function(e){return n.getSymbolAtLocation(e)===t?function(e){var t=e.parent;switch(t.kind){case 238:return t;case 248:return t.parent;default:return void F.Debug.assert(244===t.kind)}}(e):void 0}));return a}(e,t.checker,t.sourceFile,t.cachedImportDeclarations),o=[];if(t.symbolToken)for(var r=0,i=n;r<i.length;r++){var a=s(i[r]);a&&o.push(l(a.text,t,t.symbolToken))}return o.push(function(e,o,t){var n=F.firstDefined(t,function(e){if(238===e.kind&&e.importClause){var t=function(e,t){var n=e.symbolName,o=e.sourceFile,r=e.kind,i=t.name,a=t.namedBindings;switch(r){case 1:return i?void 0:N.with(e,function(e){return e.replaceNode(o,t,F.createImportClause(F.createIdentifier(n),a))});case 0:var s=F.createImportSpecifier(void 0,F.createIdentifier(n));return a&&241===a.kind&&0!==a.elements.length?N.with(e,function(e){return e.insertNodeInListAfter(o,a.elements[a.elements.length-1],s)}):!a||241===a.kind&&0===a.elements.length?N.with(e,function(e){return e.replaceNode(o,t,F.createImportClause(i,F.createNamedImports([s])))}):void 0;case 2:return a?void 0:N.with(e,function(e){return e.replaceNode(o,t,F.createImportClause(i,F.createNamespaceImport(F.createIdentifier(n))))});default:F.Debug.assertNever(r)}}(o,e.importClause);if(t){var n=F.stripQuotes(e.moduleSpecifier.getText());return w(F.Diagnostics.Add_0_to_existing_import_declaration_from_1,[o.symbolName,n],t,"InsertingIntoExistingImport",n)}}});if(n)return n;var r=F.firstDefined(t,M)||(i=o.sourceFile,a=e,s=o.compilerOptions,l=o.getCanonicalFileName,c=o.host,u=a.valueDeclaration.getSourceFile().fileName,g=F.getDirectoryPath(i.fileName),function(e){var t=e.valueDeclaration;if(F.isModuleDeclaration(t)&&F.isStringLiteral(t.name))return t.name.text}(a)||(p=s,d=c,_=l,f=u,h=F.getEffectiveTypeRoots(p,d),h&&F.firstDefined(h,function(e){var t=F.toPath(e,void 0,_);if(F.startsWith(f,t))return R(f.substring(t.length+1))}))||function(e,t,s,l,n){if(F.getEmitModuleResolutionKind(e)===F.ModuleResolutionKind.NodeJs){var c=function(e){var t,n,o=0,r=0,i=0,a=0;(n=t||(t={}))[n.BeforeNodeModules=0]="BeforeNodeModules",n[n.NodeModules=1]="NodeModules",n[n.Scope=2]="Scope",n[n.PackageContent=3]="PackageContent";for(var s=0,l=0,c=0;0<=l;)switch(s=l,l=e.indexOf("/",s+1),c){case 0:e.indexOf("/node_modules/",s)===s&&(o=s,r=l,c=1);break;case 1:case 2:1===c&&"@"===e.charAt(s+1)?c=2:(i=l,c=3);break;case 3:c=e.indexOf("/node_modules/",s)===s?1:3}return a=s,1<c?{topLevelNodeModulesIndex:o,topLevelPackageNameIndex:r,packageRootIndex:i,fileNameIndex:a}:void 0}(t);if(c){var o,r,i=function(e){var t=e.substring(0,c.packageRootIndex),n=F.combinePaths(t,"package.json");if(s.fileExists(n)){var o=JSON.parse(s.readFile(n));if(o){var r=o.typings||o.types||o.main;if(r){var i=F.toPath(r,t,l);if(i===l(e))return t}}}var a=F.removeFileExtension(e);return"/index"===l(a.substring(c.fileNameIndex))?a.substring(0,c.fileNameIndex):a}(t);return r=(o=i).substring(0,c.topLevelNodeModulesIndex),i=0===n.indexOf(r)?o.substring(c.topLevelPackageNameIndex+1):P(o,n,l),F.getPackageNameFromAtTypesDirectory(i)}}}(s,u,c,l,g)||function(e,t,n){if(e.baseUrl){var o=L(t,e.baseUrl,n);if(o){var r=F.removeFileExtension(o);if(o=R(o),e.paths)for(var i in e.paths)for(var a=0,s=e.paths[i];a<s.length;a++){var l=s[a],c=l.indexOf("*");if(0!==c||1!==l.length)if(-1!==c){var u=l.substr(0,c),g=l.substr(c+1);if(o.length>=u.length+g.length&&F.startsWith(o,u)&&F.endsWith(o,g)){var p=o.substr(u.length,o.length-g.length);return i.replace("*",p)}}else if(l===o||l===r)return i}return o}}}(s,u,l)||s.rootDirs&&function(e,t,n,o){var r=O(t,e,o);if(void 0!==r){var i=O(n,e,o),a=void 0!==i?P(r,i,o):r;return F.removeFileExtension(a)}}(s.rootDirs,u,g,l)||F.removeFileExtension(P(u,g,l)));var i,a,s,l,c,u,g,p,d,_,f,h;return m=o,y=r,v=m.kind,b=m.sourceFile,k=m.newLineCharacter,T=m.symbolName,E=F.findLast(b.statements,F.isAnyImportSyntax),S=F.stripQuotes(y),C=F.createImportDeclaration(void 0,void 0,function(e,t){var n=F.createIdentifier(t);switch(e){case 1:return F.createImportClause(n,void 0);case 2:return F.createImportClause(void 0,F.createNamespaceImport(n));case 0:return F.createImportClause(void 0,F.createNamedImports([F.createImportSpecifier(void 0,n)]));default:F.Debug.assertNever(e)}}(v,T),(A=b,D=S,B=F.createLiteral(D),I=F.firstOrUndefined(A.imports),B.singleQuote=!!I&&!F.isStringDoubleQuoted(I,A),B)),x=N.with(m,function(e){E?e.insertNodeAfter(b,E,C,{suffix:k}):e.insertNodeAt(b,F.getSourceFileImportLocation(b),C,{suffix:""+k+k})}),w(F.Diagnostics.Import_0_from_1,[T,S],x,"NewImport",S);var m,y,v,b,k,T,E,S,C,x,A,D,B,I}(e,t,n)),o}function s(e){if(238===e.kind){var t=e.importClause&&e.importClause.namedBindings;return t&&240===t.kind?t.name:void 0}return e.name}function O(t,e,n){return F.firstDefined(e,function(e){return L(t,e,n)})}function R(e){return e=F.removeFileExtension(e),F.endsWith(e,"/index")&&(e=e.substr(0,e.length-6)),e}function L(e,t,n){var o=F.getRelativePathToDirectoryOrUrl(t,e,t,n,!1);return F.isRootedDiskPath(o)||F.startsWith(o,"..")?void 0:o}function P(e,t,n){var o=F.getRelativePathToDirectoryOrUrl(t,e,t,n,!1);return F.pathIsRelative(o)?o:"./"+o}function M(e){var t=238===e.kind?e.moduleSpecifier:248===e.moduleReference.kind?e.moduleReference.expression:void 0;return t&&F.isStringLiteral(t)?t.text:void 0}function l(t,e,n){var o=e.symbolName,r=e.sourceFile;return w(F.Diagnostics.Change_0_to_1,[o,t+"."+o],N.with(e,function(e){return e.replaceNode(r,n,F.createPropertyAccess(F.createIdentifier(t),o))}),"CodeChange",void 0)}function _(e,t){var n=e.declarations;return F.some(n,function(e){return!!(F.getMeaningFromDeclaration(e)&t)})}function f(e,t,n){for(var o=0,r=e.getAmbientModules();o<r.length;o++){n(r[o])}for(var i=0,a=t;i<a.length;i++){var s=a[i];F.isExternalOrCommonJsModule(s)&&n(s.symbol)}}(o=e.ImportKind||(e.ImportKind={}))[o.Named=0]="Named",o[o.Default=1]="Default",o[o.Namespace=2]="Namespace",e.getCodeActionForImport=d,e.forEachExternalModule=f}(F.codefix||(F.codefix={}))}(ts||(ts={})),function(l){var t;(l.codefix||(l.codefix={})).registerCodeFix({errorCodes:(t=l.Diagnostics,Object.keys(t).filter(function(e){return t[e]&&t[e].category===l.DiagnosticCategory.Error}).map(function(e){return t[e].code})),getCodeActions:function(e){var t=e.sourceFile,n=e.program,o=e.newLineCharacter,r=e.span;if(l.isInJavaScriptFile(t)&&l.isCheckJsEnabledForFile(t,n.getCompilerOptions()))return[{description:l.getLocaleSpecificMessage(l.Diagnostics.Ignore_this_error_message),changes:[{fileName:t.fileName,textChanges:[function(e,t,n){var o=l.getLineAndCharacterOfPosition(e,t).line,r=l.getStartPositionOfLine(o,e),i=l.getFirstNonSpaceCharacterPosition(e.text,r);if(!l.isInComment(e,i)&&!l.isInString(e,i)&&!l.isInTemplateString(e,i)){var a=l.getTouchingToken(e,i,!1),s=l.getLeadingCommentRangesOfNode(a,e);if(!s||!s.length||s[0].pos>=i)return{span:{start:i,length:0},newText:"// @ts-ignore"+n}}return{span:{start:t,length:0},newText:(t===i?"":n)+"// @ts-ignore"+n}}(t,r.start,o)]}]},{description:l.getLocaleSpecificMessage(l.Diagnostics.Disable_checking_for_this_file),changes:[{fileName:t.fileName,textChanges:[{span:{start:t.checkJsDirective?t.checkJsDirective.pos:0,length:t.checkJsDirective?t.checkJsDirective.end-t.checkJsDirective.pos:0},newText:"// @ts-nocheck"+o}]}]}]}})}(ts||(ts={})),function(b){!function(e){function l(e,t,r){var n=e.getDeclarations();if(n&&n.length){var o=n[0],i=b.getSynthesizedClone(b.getNameOfDeclaration(o)),a=function(e){{if(4&e)return b.createToken(114);if(16&e)return b.createToken(113)}return}(b.getModifierFlags(o)),s=a?b.createNodeArray([a]):void 0,l=r.getWidenedType(r.getTypeOfSymbolAtLocation(e,t)),c=!!(16777216&e.flags);switch(o.kind){case 153:case 154:case 148:case 149:var u=r.typeToTypeNode(l,t);return b.createProperty(void 0,s,i,c?b.createToken(55):void 0,u,void 0);case 150:case 151:var g=r.getSignaturesOfType(l,0);if(!b.some(g))return;if(1===n.length)return b.Debug.assert(1===g.length),h(g[0],t,v());for(var p=[],d=0;d<g.length;d++){(_=h(g[d],t))&&p.push(_)}if(n.length>g.length){var _;(_=h(r.getSignatureFromDeclaration(n[n.length-1]),t,v()))&&p.push(_)}else{b.Debug.assert(n.length===g.length);var f=function(e,t,n,o){for(var r=e[0],i=e[0].minArgumentCount,a=!1,s=0;s<e.length;s++){var l=e[s];i=Math.min(l.minArgumentCount,i),l.hasRestParameter&&(a=!0),l.parameters.length>=r.parameters.length&&(!l.hasRestParameter||r.hasRestParameter)&&(r=l)}var c=r.parameters.length-(r.hasRestParameter?1:0),u=r.parameters.map(function(e){return e.name}),g=m(c,u,i,!0);if(a){var p=b.createArrayTypeNode(b.createKeywordTypeNode(119)),d=b.createParameter(void 0,void 0,b.createToken(24),u[c]||"rest",i<=c?b.createToken(55):void 0,p,void 0);g.push(d)}return y(o,t,n,void 0,g,void 0)}(g,i,c,s);p.push(f)}return p;default:return}}function h(e,t,n){var o=r.signatureToSignatureDeclaration(e,151,t,b.NodeBuilderFlags.SuppressAnyReturnType);return o&&(o.decorators=void 0,o.modifiers=s,o.name=i,o.questionToken=c?b.createToken(55):void 0,o.body=n),o}}function m(e,t,n,o){for(var r=[],i=0;i<e;i++){var a=b.createParameter(void 0,void 0,void 0,t&&t[i]||"arg"+i,void 0!==n&&n<=i?b.createToken(55):void 0,o?b.createKeywordTypeNode(119):void 0,void 0);r.push(a)}return r}function y(e,t,n,o,r,i){return b.createMethod(void 0,e,void 0,t,n?b.createToken(55):void 0,o,r,i,v())}function v(){return b.createBlock([b.createThrow(b.createNew(b.createIdentifier("Error"),void 0,[b.createLiteral("Method not implemented.")]))],!0)}e.newNodesToChanges=function(e,t,n){for(var o=n.sourceFile,r=b.textChanges.ChangeTracker.fromContext(n),i=0,a=e;i<a.length;i++){var s=a[i];r.insertNodeAfter(o,t,s,{suffix:n.newLineCharacter})}var l=r.getChanges();return b.some(l)?(b.Debug.assert(1===l.length),[{fileName:l[0].fileName,textChanges:[{span:l[0].textChanges[0].span,newText:l[0].textChanges.reduce(function(e,t){return e+t.newText},"")}]}]):l},e.createMissingMemberNodes=function(e,t,n){for(var o=e.symbol.members,r=[],i=0,a=t.filter(function(e){return!o.has(e.escapedName)});i<a.length;i++){var s=l(a[i],e,n);s&&(Array.isArray(s)?r=r.concat(s):r.push(s))}return r},e.createMethodFromCallExpression=function(e,t,n,o){var r,i=m(e.arguments.length,void 0,void 0,n);if(n)for(var a=b.length(e.typeArguments),s=0;s<a;s++){var l=a<8?String.fromCharCode(84+s):"T"+s,c=b.createTypeParameterDeclaration(l,void 0,void 0);(r||(r=[])).push(c)}return b.createMethod(void 0,o?[b.createToken(115)]:void 0,void 0,t,void 0,r,i,n?b.createKeywordTypeNode(119):void 0,v())},e.createStubbedMethod=y}(b.codefix||(b.codefix={}))}(ts||(ts={})),function(v){var b;(v.codefix||(v.codefix={})).registerCodeFix({errorCodes:[v.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined.code,v.Diagnostics.Variable_0_implicitly_has_an_1_type.code,v.Diagnostics.Parameter_0_implicitly_has_an_1_type.code,v.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type.code,v.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation.code,v.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type.code,v.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation.code,v.Diagnostics.Member_0_implicitly_has_an_1_type.code],getCodeActions:function(e){var r,i=e.sourceFile,n=e.program,t=e.span.start,o=e.errorCode,a=e.cancellationToken,s=v.getTokenAtPosition(i,t,!1);if(v.isInJavaScriptFile(s));else{switch(s.kind){case 71:case 24:case 114:case 112:case 113:case 131:break;default:return}var l,c,u=v.getContainingFunction(s),g=n.getTypeChecker();switch(o){case v.Diagnostics.Member_0_implicitly_has_an_1_type.code:case v.Diagnostics.Variable_0_implicitly_has_type_1_in_some_locations_where_its_type_cannot_be_determined.code:return p(s.parent);case v.Diagnostics.Variable_0_implicitly_has_an_1_type.code:return l=s,(c=g.getSymbolAtLocation(l))&&c.valueDeclaration&&p(c.valueDeclaration);case v.Diagnostics.Parameter_0_implicitly_has_an_1_type.code:if(v.isSetAccessor(u))return d(u);case v.Diagnostics.Rest_parameter_0_implicitly_has_an_any_type.code:return function(e){if(v.isIdentifier(e.name)&&function(e){switch(e.kind){case 228:case 151:case 152:return!0;case 186:return!!e.name}return!1}(u)){var t=function(e){switch(e.kind){case 152:case 186:case 228:case 151:var t=152===e.kind,n=t?y(e,i,123):e.name;if(n)return b.inferTypeForParametersFromReferences(f(n),e,g,a)}}(u)||v.map(u.parameters,function(e){return v.isIdentifier(e.name)&&h(e.name)});if(t){var n=v.zipWith(u.parameters,t,function(e,t){if(t&&!e.type&&!e.initializer){var n=m(t,u);return n?{span:{start:e.end,length:0},newText:": "+n}:void 0}}).filter(function(e){return!!e});return n.length?[{description:v.formatStringFromArgs(v.getLocaleSpecificMessage(v.Diagnostics.Infer_parameter_types_from_usage),[e.name.getText()]),changes:[{fileName:i.fileName,textChanges:n}]}]:void 0}}}(s.parent);case v.Diagnostics.Property_0_implicitly_has_type_any_because_its_get_accessor_lacks_a_return_type_annotation.code:case v.Diagnostics._0_which_lacks_return_type_annotation_implicitly_has_an_1_return_type.code:return v.isGetAccessor(u)?function(e){if(v.isIdentifier(e.name)){var t=h(e.name),n=t&&m(t,u);if(n){var o=y(e,i,20);return _(e.name.getText(),o.getEnd(),": "+n)}}}(u):void 0;case v.Diagnostics.Property_0_implicitly_has_type_any_because_its_set_accessor_lacks_a_parameter_type_annotation.code:return v.isSetAccessor(u)?d(u):void 0}}function p(e){if(v.isIdentifier(e.name)){var t=h(e.name),n=t&&m(t,e);if(n)return _(e.name.getText(),e.name.getEnd(),": "+n)}}function d(e){var t=e.parameters[0];if(t&&v.isIdentifier(e.name)&&v.isIdentifier(t.name)){var n=h(e.name)||h(t.name),o=n&&m(n,u);if(o)return _(e.name.getText(),t.name.getEnd(),": "+o)}}function _(e,t,n){return[{description:v.formatStringFromArgs(v.getLocaleSpecificMessage(v.Diagnostics.Infer_type_of_0_from_usage),[e]),changes:[{fileName:i.fileName,textChanges:[{span:{start:t,length:0},newText:n}]}]}]}function f(e){var t=v.FindAllReferences.findReferencedSymbols(n,a,n.getSourceFiles(),e.getSourceFile(),e.getStart());return v.Debug.assert(!!t,"Found no references!"),v.Debug.assert(1===t.length,"Found more references than expected"),v.map(t[0].references,function(e){return v.getTokenAtPosition(n.getSourceFile(e.fileName),e.textSpan.start,!1)})}function h(e){return b.inferTypeFromReferences(f(e),g,a)}function m(e,t){var n=function(){if(!r){var t="",o=!0,e=function(e){return t+=e};r={string:function(){return o?t:void 0},writeKeyword:e,writeOperator:e,writePunctuation:e,writeSpace:e,writeStringLiteral:e,writeParameter:e,writeProperty:e,writeSymbol:e,writeLine:function(){return t+=" "},increaseIndent:v.noop,decreaseIndent:v.noop,clear:function(){o=!(t="")},trackSymbol:function(e,t,n){0!==g.isSymbolAccessible(e,t,n,!1).accessibility&&(o=!1)},reportInaccessibleThisError:function(){o=!1},reportPrivateInBaseOfClassExpression:function(){o=!1}}}return r.clear(),r}();return g.getSymbolDisplayBuilder().buildTypeDisplay(e,n,t),n.string()}function y(e,t,n){for(var o=0,r=e.getChildren(t);o<r.length;o++){var i=r[o];if(i.kind===n)return i}}}}),function(e){function m(e,t,n){for(;v.isRightSideOfQualifiedNameOrPropertyAccess(e);)e=e.parent;switch(e.parent.kind){case 193:n.isNumber=!0;break;case 192:!function(e,t){switch(e.operator){case 43:case 44:case 38:case 52:t.isNumber=!0;break;case 37:t.isNumberOrString=!0}}(e.parent,n);break;case 194:!function(e,t,n,o){switch(t.operatorToken.kind){case 40:case 39:case 41:case 42:case 45:case 46:case 47:case 48:case 49:case 50:case 60:case 62:case 61:case 63:case 64:case 68:case 69:case 70:case 65:case 67:case 66:case 38:case 27:case 30:case 29:case 31:var r=n.getTypeAtLocation(t.left===e?t.right:t.left);272&r.flags?a(o,r):o.isNumber=!0;break;case 59:case 37:var i=n.getTypeAtLocation(t.left===e?t.right:t.left);272&i.flags?a(o,i):84&i.flags?o.isNumber=!0:262178&i.flags?o.isString=!0:o.isNumberOrString=!0;break;case 58:case 32:case 34:case 35:case 33:a(o,n.getTypeAtLocation(t.left===e?t.right:t.left));break;case 92:e===t.left&&(o.isString=!0);break;case 54:e!==t.left||226!==e.parent.parent.kind&&!v.isAssignmentExpression(e.parent.parent,!0)||a(o,n.getTypeAtLocation(t.right))}}(e,e.parent,t,n);break;case 257:case 258:o=e.parent,a(n,t.getTypeAtLocation(o.parent.parent.expression));break;case 181:case 182:e.parent.expression===e?function(e,t,n){var o={argumentTypes:[],returnType:{}};if(e.arguments)for(var r=0,i=e.arguments;r<i.length;r++){var a=i[r];o.argumentTypes.push(t.getTypeAtLocation(a))}m(e,t,o.returnType),181===e.kind?(n.callContexts||(n.callContexts=[])).push(o):(n.constructContexts||(n.constructContexts=[])).push(o)}(e.parent,t,n):r(e,t,n);break;case 179:!function(e,t,n){var o=v.escapeLeadingUnderscores(e.name.text);n.properties||(n.properties=v.createUnderscoreEscapedMap());var r=n.properties.get(o)||{};m(e,t,r),n.properties.set(o,r)}(e.parent,t,n);break;case 180:!function(e,t,n,o){if(t===e.argumentExpression)return o.isNumberOrString=!0;var r=n.getTypeAtLocation(e),i={};m(e,n,i),84&r.flags?o.numberIndexContext=i:o.stringIndexContext=i}(e.parent,e,t,n);break;default:return r(e,t,n)}var o}function r(e,t,n){v.isPartOfExpression(e)&&a(n,t.getContextualType(e))}function _(e,o){if(e.isNumberOrString&&!e.isNumber&&!e.isString)return o.getUnionType([o.getNumberType(),o.getStringType()]);if(e.isNumber)return o.getNumberType();if(e.isString)return o.getStringType();if(e.candidateTypes)return o.getWidenedType(o.getUnionType(v.map(e.candidateTypes,function(e){return o.getBaseTypeOfLiteralType(e)}),!0));if(e.properties&&y(e.properties.get("then"))){var t=f(0,e.properties.get("then").callContexts,!1,o).getCallSignatures().map(function(e){return e.getReturnType()});return o.createPromiseType(t.length?o.getUnionType(t,!0):o.getAnyType())}if(e.properties&&y(e.properties.get("push")))return o.createArrayType(f(0,e.properties.get("push").callContexts,!1,o));if(e.properties||e.callContexts||e.constructContexts||e.numberIndexContext||e.stringIndexContext){var r=v.createUnderscoreEscapedMap(),n=[],i=[],a=void 0,s=void 0;if(e.properties&&e.properties.forEach(function(e,t){var n=o.createSymbol(4,t);n.type=_(e,o)||o.getAnyType(),r.set(t,n)}),e.callContexts)for(var l=0,c=e.callContexts;l<c.length;l++){var u=c[l];n.push(h(u,o))}if(e.constructContexts)for(var g=0,p=e.constructContexts;g<p.length;g++){var d=p[g];i.push(h(d,o))}return e.numberIndexContext&&(s=o.createIndexInfo(_(e.numberIndexContext,o),!1)),e.stringIndexContext&&(a=o.createIndexInfo(_(e.stringIndexContext,o),!1)),o.createAnonymousType(void 0,r,n,i,a,s)}}function f(e,t,n,o){var r=[];if(t)for(var i=0,a=t;i<a.length;i++){var s=a[i];s.argumentTypes.length>e&&(n?r=v.concatenate(r,v.map(s.argumentTypes.slice(e),function(e){return o.getBaseTypeOfLiteralType(e)})):r.push(o.getBaseTypeOfLiteralType(s.argumentTypes[e])))}if(r.length){var l=o.getWidenedType(o.getUnionType(r,!0));return n?o.createArrayType(l):l}}function h(e,t){for(var n=[],o=0;o<e.argumentTypes.length;o++){var r=t.createSymbol(1,v.escapeLeadingUnderscores("arg"+o));r.type=t.getWidenedType(t.getBaseTypeOfLiteralType(e.argumentTypes[o])),n.push(r)}var i=_(e.returnType,t)||t.getVoidType();return t.createSignature(void 0,void 0,void 0,n,i,void 0,e.argumentTypes.length,!1,!1)}function a(e,t){!t||1&t.flags||8192&t.flags||(e.candidateTypes||(e.candidateTypes=[])).push(t)}function y(e){return e&&e.callContexts}e.inferTypeFromReferences=function(e,t,n){for(var o={},r=0,i=e;r<i.length;r++){var a=i[r];n.throwIfCancellationRequested(),m(a,t,o)}return _(o,t)},e.inferTypeForParametersFromReferences=function(e,t,n,o){if(t.parameters){for(var r={},i=0,a=e;i<a.length;i++){var s=a[i];o.throwIfCancellationRequested(),m(s,n,r)}var l=152===t.kind?r.constructContexts:r.callContexts;if(l){for(var c=[],u=0;u<t.parameters.length;u++){for(var g=[],p=v.isRestParameter(t.parameters[u]),d=0,_=l;d<_.length;d++){var f=_[d];f.argumentTypes.length>u&&(p?g=v.concatenate(g,v.map(f.argumentTypes.slice(u),function(e){return n.getBaseTypeOfLiteralType(e)})):g.push(n.getBaseTypeOfLiteralType(f.argumentTypes[u])))}if(g.length){var h=n.getWidenedType(n.getUnionType(g,!0));c[u]=p?n.createArrayType(h):h}}return c}}}}(b||(b={}))}(ts||(ts={})),function(_){var f;(function(e){var g="annotate",n={name:"Annotate with type from JSDoc",description:_.Diagnostics.Annotate_with_type_from_JSDoc.message,getEditsForAction:function(e,t){if(g!==t)return _.Debug.fail("actionName !== action: "+g+" !== "+t);var n=_.getTokenAtPosition(e.file,e.startPosition,!1),o=_.findAncestor(n,p);if(o&&!o.type){var r,i,a,s,l,c,u=_.getJSDocType(o);return _.isFunctionLikeDeclaration(o)&&(_.getJSDocReturnType(o)||o.parameters.some(function(e){return!!_.getJSDocType(e)}))||u&&146===o.kind?(i=(r=e).file,a=_.getTokenAtPosition(i,r.startPosition,!1),s=_.findAncestor(a,_.isFunctionLikeDeclaration),l=_.textChanges.ChangeTracker.fromContext(r),c=function(e){var t=_.getEffectiveTypeParameterDeclarations(e,!0),n=e.parameters.map(function(e){return _.createParameter(e.decorators,e.modifiers,e.dotDotDotToken,e.name,e.questionToken,d(_.getEffectiveTypeAnnotationNode(e,!0)),e.initializer)}),o=d(_.getEffectiveReturnTypeNode(e,!0));switch(e.kind){case 228:return _.createFunctionDeclaration(e.decorators,e.modifiers,e.asteriskToken,e.name,t,n,o,e.body);case 152:return _.createConstructor(e.decorators,e.modifiers,n,e.body);case 186:return _.createFunctionExpression(e.modifiers,e.asteriskToken,e.name,t,n,o,e.body);case 187:return _.createArrowFunction(e.modifiers,t,n,o,e.equalsGreaterThanToken,e.body);case 151:return _.createMethod(e.decorators,e.modifiers,e.asteriskToken,e.name,e.questionToken,t,n,o,e.body);case 153:return _.createGetAccessor(e.decorators,e.modifiers,e.name,e.parameters,o,e.body);case 154:return _.createSetAccessor(e.decorators,e.modifiers,e.name,n,e.body);default:return _.Debug.assertNever(e,"Unexpected SyntaxKind: "+e.kind)}}(s),_.suppressLeadingAndTrailingTrivia(c),l.replaceRange(i,{pos:s.getStart(),end:s.end},c),{edits:l.getChanges(),renameFilename:void 0,renameLocation:void 0}):u?function(e){var t=e.file,n=_.getTokenAtPosition(t,e.startPosition,!1),o=_.findAncestor(n,p),r=_.getJSDocType(o);if(!o||!r||o.type)return _.Debug.fail("!decl || !jsdocType || decl.type: !"+o+" || !"+r+" || "+o.type);var i=_.textChanges.ChangeTracker.fromContext(e),a=function(e,t){switch(e.kind){case 226:return _.createVariableDeclaration(e.name,t,e.initializer);case 148:return _.createPropertySignature(e.modifiers,e.name,e.questionToken,t,e.initializer);case 149:return _.createProperty(e.decorators,e.modifiers,e.name,e.questionToken,t,e.initializer);default:return _.Debug.fail("Unexpected SyntaxKind: "+e.kind)}}(o,d(r));return _.suppressLeadingAndTrailingTrivia(a),i.replaceRange(t,{pos:o.getStart(),end:o.end},a),{edits:i.getChanges(),renameFilename:void 0,renameLocation:void 0}}(e):void _.Debug.assert(!!f,"No applicable refactor found.")}},getAvailableActions:function(e){if(!_.isInJavaScriptFile(e.file)){var t=_.getTokenAtPosition(e.file,e.startPosition,!1);return o(_.findAncestor(t,p))?[{name:n.name,description:n.description,actions:[{description:n.description,name:g}]}]:void 0}}};function o(e){return!!e&&(_.isFunctionLikeDeclaration(e)?e.parameters.some(o)||!e.type&&!!_.getJSDocReturnType(e):!e.type&&!!_.getJSDocType(e))}function p(e){return _.isFunctionLikeDeclaration(e)||226===e.kind||146===e.kind||148===e.kind||149===e.kind}function d(e){var t,n,o,r,i,a,s,l,c,u;if(void 0!==e)switch(e.kind){case 268:case 269:return _.createTypeReferenceNode("any",_.emptyArray);case 272:return u=e,_.createUnionTypeNode([_.visitNode(u.type,d),_.createTypeReferenceNode("undefined",_.emptyArray)]);case 271:return d(e.type);case 270:return c=e,_.createUnionTypeNode([_.visitNode(c.type,d),_.createTypeReferenceNode("null",_.emptyArray)]);case 274:return l=e,_.createArrayTypeNode(_.visitNode(l.type,d));case 273:return s=(a=e).parameters&&a.parameters.map(d),_.createFunctionTypeNode(_.emptyArray,s,a.type);case 146:return n=(t=e).parent.parameters.indexOf(t),o=274===t.type.kind&&n===t.parent.parameters.length-1,r=t.name||(o?"rest":"arg"+n),i=o?_.createToken(24):t.dotDotDotToken,_.createParameter(t.decorators,t.modifiers,i,r,t.questionToken,_.visitNode(t.type,d),t.initializer);case 159:return function(e){var t,n,o,r=e.typeName,i=e.typeArguments;if(_.isIdentifier(e.typeName)){if(_.isJSDocIndexSignature(e))return t=e,n=_.createParameter(void 0,void 0,void 0,133===t.typeArguments[0].kind?"n":"s",void 0,_.createTypeReferenceNode(133===t.typeArguments[0].kind?"number":"string",[]),void 0),o=_.createTypeLiteralNode([_.createIndexSignature(void 0,void 0,[n],t.typeArguments[1])]),_.setEmitFlags(o,1),o;var a=e.typeName.text;switch(e.typeName.text){case"String":case"Boolean":case"Object":case"Number":a=a.toLowerCase();break;case"array":case"date":case"promise":a=a[0].toUpperCase()+a.slice(1)}r=_.createIdentifier(a),i="Array"!==a&&"Promise"!==a||e.typeArguments?_.visitNodes(e.typeArguments,d):_.createNodeArray([_.createTypeReferenceNode("any",_.emptyArray)])}return _.createTypeReferenceNode(r,i)}(e);default:var g=_.visitEachChild(e,d,void 0);return _.setEmitFlags(g,1),g}}f.registerRefactor(n)})((f=_.refactor||(_.refactor={})).annotateWithTypeFromJSDoc||(f.annotateWithTypeFromJSDoc={}))}(ts||(ts={})),function(b){var t;(function(e){var y="convert",n={name:"Convert to ES2015 class",description:b.Diagnostics.Convert_function_to_an_ES2015_class.message,getEditsForAction:function(e,t){if(y===t){var _=e.file,o=v(e),n=e.rulesProvider.getFormatOptions().newLineCharacter,r=[],i=[];if(19&o.flags){var a,s,l=o.valueDeclaration,c=b.textChanges.ChangeTracker.fromContext(e);switch(l.kind){case 228:f(a=l),s=function(e){var t=d(o);e.body&&t.unshift(b.createConstructor(void 0,void 0,e.parameters,e.body));var n=m(e,84);return b.createClassDeclaration(void 0,n,e.name,void 0,void 0,t)}(l);break;case 226:a=l.parent.parent,1===l.parent.declarations.length?f(a):f(l,!0),s=function(e){var t=e.initializer;if(t&&186===t.kind&&71===e.name.kind){var n=d(t.symbol);t.body&&n.unshift(b.createConstructor(void 0,void 0,t.parameters,t.body));var o=m(a,84);return b.createClassDeclaration(void 0,o,e.name,void 0,void 0,n)}}(l)}if(s){c.insertNodeAfter(_,a,s,{suffix:n});for(var u=0,g=i;u<g.length;u++){var p=g[u];p()}return{edits:c.getChanges(),renameFilename:void 0,renameLocation:void 0}}}}function f(t,e){void 0===e&&(e=!1),r.some(function(e){return b.isNodeDescendantOf(t,e)})||(r.push(t),e?i.push(function(){return c.deleteNodeInList(_,t)}):i.push(function(){return c.deleteNode(_,t)}))}function d(e){var n=[];return e.members&&e.members.forEach(function(e){var t=o(e,void 0);t&&n.push(t)}),e.exports&&e.exports.forEach(function(e){var t=o(e,[b.createToken(115)]);t&&n.push(t)}),n;function o(e,t){if(4&e.flags){var n=e.valueDeclaration,o=n.parent;if(r=o.right,b.isFunctionLike(r)){var r,i=o.parent&&210===o.parent.kind?o.parent:o;if(f(i),!o.right)return b.createProperty([],t,e.name,void 0,void 0,void 0);switch(o.right.kind){case 186:var a=o.right,s=b.concatenate(t,m(a,120)),l=b.createMethod(void 0,s,void 0,n.name,void 0,void 0,a.parameters,void 0,a.body);return h(o,l),l;case 187:var c=o.right,u=c.body,g=void 0;if(207===u.kind)g=u;else{var p=u;g=b.createBlock([b.createReturn(p)])}var s=b.concatenate(t,m(c,120)),l=b.createMethod(void 0,s,void 0,n.name,void 0,void 0,c.parameters,void 0,g);return h(o,l),l;default:if(b.isSourceFileJavaScript(_))return;var d=b.createProperty(void 0,t,n.name,void 0,void 0,o.right);return h(o.parent,d),d}}}}}function h(e,r){b.forEachLeadingCommentRange(_.text,e.pos,function(e,t,n,o){3===n?(e+=2,t-=2):e+=2,b.addSyntheticLeadingComment(r,n,_.text.slice(e,t),o)})}function m(e,t){return b.filter(e.modifiers,function(e){return e.kind===t})}},getAvailableActions:function(e){if(b.isInJavaScriptFile(e.file)){var t=v(e);if(t)return b.isDeclarationOfFunctionOrClassExpression(t)&&(t=t.valueDeclaration.initializer.symbol),16&t.flags&&t.members&&0<t.members.size?[{name:n.name,description:n.description,actions:[{description:n.description,name:y}]}]:void 0}}};function v(e){var t=e.startPosition,n=e.file,o=e.program.getTypeChecker(),r=b.getTokenAtPosition(n,t,!1);return o.getSymbolAtLocation(r)}t.registerRefactor(n)})((t=b.refactor||(b.refactor={})).convertFunctionToES6Class||(t.convertFunctionToES6Class={}))}(ts||(ts={})),function(re){var l;(function(e){var V,$,t,n,o,r,i,b={name:"Extract Symbol",description:re.getLocaleSpecificMessage(re.Diagnostics.Extract_symbol),getAvailableActions:a,getEditsForAction:s};function a(e){var t=x(e.file,{start:e.startPosition,length:re.getRefactorContextLength(e)}).targetRange;if(void 0!==t){var n,o,r,g,p,i=(n=D(t,e),o=n.scopes,r=n.readsAndWrites,g=r.functionErrorsPerScope,p=r.constantErrorsPerScope,o.map(function(e,t){var n,o,r,i,a,s,l=(n=e,re.isFunctionLikeDeclaration(n)?"inner function":re.isClassLike(n)?"method":"function"),c=(o=e,re.isClassLike(o)?"readonly field":"constant"),u=re.isFunctionLikeDeclaration(e)?function(e){switch(e.kind){case 152:return"constructor";case 186:return e.name?"function expression '"+e.name.text+"'":"anonymous function expression";case 228:return"function '"+e.name.text+"'";case 187:return"arrow function";case 151:return"method '"+e.name.getText();case 153:return"'get "+e.name.getText()+"'";case 154:return"'set "+e.name.getText()+"'";default:re.Debug.assertNever(e)}}(e):re.isClassLike(e)?229===(i=e).kind?"class '"+i.name.text+"'":i.name?"class expression '"+i.name.text+"'":"anonymous class expression":234===(r=e).kind?"namespace '"+r.parent.name.getText()+"'":r.externalModuleIndicator?0:1;return 1===u?(a=re.formatStringFromArgs(re.getLocaleSpecificMessage(re.Diagnostics.Extract_to_0_in_1_scope),[l,"global"]),s=re.formatStringFromArgs(re.getLocaleSpecificMessage(re.Diagnostics.Extract_to_0_in_1_scope),[c,"global"])):0===u?(a=re.formatStringFromArgs(re.getLocaleSpecificMessage(re.Diagnostics.Extract_to_0_in_1_scope),[l,"module"]),s=re.formatStringFromArgs(re.getLocaleSpecificMessage(re.Diagnostics.Extract_to_0_in_1_scope),[c,"module"])):(a=re.formatStringFromArgs(re.getLocaleSpecificMessage(re.Diagnostics.Extract_to_0_in_1),[l,u]),s=re.formatStringFromArgs(re.getLocaleSpecificMessage(re.Diagnostics.Extract_to_0_in_1),[c,u])),0!==t||re.isClassLike(e)||(s=re.formatStringFromArgs(re.getLocaleSpecificMessage(re.Diagnostics.Extract_to_0_in_enclosing_scope),[c])),{functionExtraction:{description:a,errors:g[t]},constantExtraction:{description:s,errors:p[t]}}}));if(void 0!==i){for(var a=[],s=re.createMap(),l=[],c=re.createMap(),u=0,d=0,_=i;d<_.length;d++){var f=_[d],h=f.functionExtraction,m=f.constantExtraction;if(0===h.errors.length){var y=h.description;s.has(y)||(s.set(y,!0),a.push({description:y,name:"function_scope_"+u}))}0===m.errors.length&&(y=m.description,c.has(y)||(c.set(y,!0),l.push({description:y,name:"constant_scope_"+u}))),u++}var v=[];return a.length&&v.push({name:b.name,description:re.getLocaleSpecificMessage(re.Diagnostics.Extract_function),actions:a}),l.length&&v.push({name:b.name,description:re.getLocaleSpecificMessage(re.Diagnostics.Extract_constant),actions:l}),v.length?v:void 0}}}function s(e,t){var n,o,r,i,a,s,l,c,u,g,p=x(e.file,{start:e.startPosition,length:re.getRefactorContextLength(e)}).targetRange,d=/^function_scope_(\d+)$/.exec(t);if(d){var _=+d[1];return re.Debug.assert(isFinite(_),"Expected to parse a finite number from the function scope index"),r=_,i=D(n=p,o=e),a=i.scopes,s=i.readsAndWrites,l=s.target,c=s.usagesPerScope,u=s.functionErrorsPerScope,g=s.exposedVariableDeclarations,re.Debug.assert(!u[r].length,"The extraction went missing? How?"),o.cancellationToken.throwIfCancellationRequested(),function(i,e,t,n,o,r){var a,s=t.usages,l=t.typeParameterUsages,c=t.substitutions,u=r.program.getTypeChecker(),g=e.getSourceFile(),p=Q(re.isClassLike(e)?"newMethod":"newFunction",g.text),d=re.isInJavaScriptFile(e),_=re.createIdentifier(p),f=void 0,h=[],m=[];s.forEach(function(e,t){var n=void 0;if(!d){var o=u.getTypeOfSymbolAtLocation(e.symbol,e.node);o=u.getBaseTypeOfLiteralType(o),n=u.typeToTypeNode(o,i,re.NodeBuilderFlags.NoTruncation)}var r=re.createParameter(void 0,void 0,void 0,t,void 0,n);h.push(r),2===e.usage&&(a||(a=[])).push(e),m.push(re.createIdentifier(t))});var y=re.arrayFrom(l.values()).map(function(e){return{type:e,declaration:function(e){var t=void 0,n=e.symbol;if(n&&n.declarations)for(var o=0,r=n.declarations;o<r.length;o++){var i=r[o];(void 0===t||i.pos<t.pos)&&(t=i)}return t}(e)}}).sort(te),v=0===y.length?void 0:y.map(function(e){return e.declaration}),b=void 0!==v?v.map(function(e){return re.createTypeReferenceNode(e.name,void 0)}):void 0;if(re.isExpression(i)&&!d){var k=u.getContextualType(i);f=u.typeToTypeNode(k,e,re.NodeBuilderFlags.NoTruncation)}var T,E=function(e,a,s,l,t){var c,u=void 0!==s||0<a.length;if(re.isBlock(e)&&!u&&0===l.size)return{body:re.createBlock(e.statements,!0),returnValueProperty:void 0};var g=!1,n=re.createNodeArray(re.isBlock(e)?e.statements.slice(0):[re.isStatement(e)?e:re.createReturn(e)]);if(u||l.size){var o=re.visitNodes(n,function e(t){if(!g&&219===t.kind&&u){var n=ne(a,s);return t.expression&&(c||(c="__return"),n.unshift(re.createPropertyAssignment(c,re.visitNode(t.expression,e)))),1===n.length?re.createReturn(n[0].name):re.createReturn(re.createObjectLiteral(n))}var o=g;g=g||re.isFunctionLikeDeclaration(t)||re.isClassLike(t);var r=l.get(re.getNodeId(t).toString()),i=r?re.getSynthesizedDeepClone(r):re.visitEachChild(t,e,re.nullTransformationContext);return g=o,i}).slice();if(u&&!t&&re.isStatement(e)){var r=ne(a,s);1===r.length?o.push(re.createReturn(r[0].name)):o.push(re.createReturn(re.createObjectLiteral(r)))}return{body:re.createBlock(o,!0),returnValueProperty:c}}return{body:re.createBlock(n,!0),returnValueProperty:void 0}}(i,n,a,c,!!(o.facts&$.HasReturn)),S=E.body,C=E.returnValueProperty;if(re.suppressLeadingAndTrailingTrivia(S),re.isClassLike(e)){var x=d?[]:[re.createToken(112)];o.facts&$.InStaticRegion&&x.push(re.createToken(115)),o.facts&$.IsAsyncFunction&&x.push(re.createToken(120)),T=re.createMethod(void 0,x.length?x:void 0,o.facts&$.IsGenerator?re.createToken(39):void 0,_,void 0,v,h,f,S)}else T=re.createFunctionDeclaration(void 0,o.facts&$.IsAsyncFunction?[re.createToken(120)]:void 0,o.facts&$.IsGenerator?re.createToken(39):void 0,_,v,h,f,S);var A,D,B=re.textChanges.ChangeTracker.fromContext(r),I=(A=(oe(o.range)?re.last(o.range):o.range).end,D=e,re.find(function(e){if(re.isFunctionLikeDeclaration(e)){var t=e.body;if(re.isBlock(t))return t.statements}else{if(re.isModuleBlock(e)||re.isSourceFile(e))return e.statements;if(re.isClassLike(e))return e.members;re.assertTypeIsNever(e)}return re.emptyArray}(D),function(e){return e.pos>=A&&re.isFunctionLikeDeclaration(e)&&!re.isConstructorDeclaration(e)}));I?B.insertNodeBefore(r.file,I,T,{suffix:r.newLineCharacter+r.newLineCharacter}):B.insertNodeBefore(r.file,e.getLastToken(),T,{prefix:re.isLineBreak(g.text.charCodeAt(e.getLastToken().pos))?r.newLineCharacter:r.newLineCharacter+r.newLineCharacter,suffix:r.newLineCharacter});var N=[],w=function(e,t,n){var o=re.createIdentifier(n);if(re.isClassLike(e)){var r=t.facts&$.InStaticRegion?re.createIdentifier(e.name.text):re.createThis();return re.createPropertyAccess(r,o)}return o}(e,o,p),O=re.createCall(w,b,m);if(o.facts&$.IsGenerator&&(O=re.createYield(re.createToken(39),O)),o.facts&$.IsAsyncFunction&&(O=re.createAwait(O)),n.length&&!a)if(re.Debug.assert(!C),re.Debug.assert(!(o.facts&$.HasReturn)),1===n.length){var R=n[0];N.push(re.createVariableStatement(void 0,re.createVariableDeclarationList([re.createVariableDeclaration(re.getSynthesizedDeepClone(R.name),re.getSynthesizedDeepClone(R.type),O)],R.parent.flags)))}else{for(var L=[],P=[],M=n[0].parent.flags,F=!1,U=0,H=n;U<H.length;U++){var R=H[U];L.push(re.createBindingElement(void 0,void 0,re.getSynthesizedDeepClone(R.name)));var G=u.typeToTypeNode(u.getBaseTypeOfLiteralType(u.getTypeAtLocation(R)),e,re.NodeBuilderFlags.NoTruncation);P.push(re.createPropertySignature(void 0,R.symbol.name,void 0,G,void 0)),F=F||void 0!==R.type,M&=R.parent.flags}var V=F?re.createTypeLiteralNode(P):void 0;V&&re.setEmitFlags(V,1),N.push(re.createVariableStatement(void 0,re.createVariableDeclarationList([re.createVariableDeclaration(re.createObjectBindingPattern(L),V,O)],M)))}else if(n.length||a){if(n.length)for(var W=0,K=n;W<K.length;W++){var R=K[W],z=R.parent.flags;2&z&&(z=-3&z|1),N.push(re.createVariableStatement(void 0,re.createVariableDeclarationList([re.createVariableDeclaration(R.symbol.name,Z(R.type))],z)))}C&&N.push(re.createVariableStatement(void 0,re.createVariableDeclarationList([re.createVariableDeclaration(C,Z(f))],1)));var j=ne(n,a);C&&j.unshift(re.createShorthandPropertyAssignment(C)),1===j.length?(re.Debug.assert(!C),N.push(re.createStatement(re.createAssignment(j[0].name,O))),o.facts&$.HasReturn&&N.push(re.createReturn())):(N.push(re.createStatement(re.createAssignment(re.createObjectLiteral(j),O))),C&&N.push(re.createReturn(re.createIdentifier(C))))}else o.facts&$.HasReturn?N.push(re.createReturn(O)):oe(o.range)?N.push(re.createStatement(O)):N.push(O);var Y=oe(o.range)?{pos:re.first(o.range).getStart(),end:re.last(o.range).end}:{pos:o.range.getStart(),end:o.range.end};B.replaceRangeWithNodes(r.file,Y,N,{nodeSeparator:r.newLineCharacter});var X=B.getChanges(),J=(oe(o.range)?re.first(o.range):o.range).getSourceFile().fileName,q=ee(X,J,p,!1);return{renameFilename:J,renameLocation:q,edits:X};function Z(e){if(void 0!==e){for(var t=re.getSynthesizedDeepClone(e),n=t;re.isParenthesizedTypeNode(n);)n=n.type;return re.isUnionTypeNode(n)&&re.find(n.types,function(e){return 139===e.kind})?t:re.createUnionTypeNode([t,re.createKeywordTypeNode(139)])}}}(l,a[r],c[r],g,n,o)}var f,h,m,y,v,b,k,T,E,S,C=/^constant_scope_(\d+)$/.exec(t);if(C)return _=+C[1],re.Debug.assert(isFinite(_),"Expected to parse a finite number from the constant scope index"),m=_,y=D(f=p,h=e),v=y.scopes,b=y.readsAndWrites,k=b.target,T=b.usagesPerScope,E=b.constantErrorsPerScope,S=b.exposedVariableDeclarations,re.Debug.assert(!E[m].length,"The extraction went missing? How?"),re.Debug.assert(0===S.length,"Extract constant accepted a range containing a variable declaration?"),h.cancellationToken.throwIfCancellationRequested(),function(e,t,n,o,r){var i,a,s=n.substitutions,l=r.program.getTypeChecker(),c=t.getSourceFile(),u=Q(re.isClassLike(t)?"newProperty":"newLocal",c.text),g=re.isInJavaScriptFile(t),p=g?void 0:l.typeToTypeNode(l.getContextualType(e),t,re.NodeBuilderFlags.NoTruncation),d=(i=e,(a=s).size?function e(t){var n=a.get(re.getNodeId(t).toString());return n?re.getSynthesizedDeepClone(n):re.visitEachChild(t,e,re.nullTransformationContext)}(i):i);re.suppressLeadingAndTrailingTrivia(d);var _=re.textChanges.ChangeTracker.fromContext(r);if(re.isClassLike(t)){re.Debug.assert(!g);var f=[];f.push(re.createToken(112)),o&$.InStaticRegion&&f.push(re.createToken(115)),f.push(re.createToken(131));var h=re.createProperty(void 0,f,u,void 0,p,d),m=re.createPropertyAccess(o&$.InStaticRegion?re.createIdentifier(t.name.getText()):re.createThis(),re.createIdentifier(u)),y=e.pos,v=function(e,t){var n=t.members;re.Debug.assert(0<n.length);for(var o=void 0,r=!0,i=0,a=n;i<a.length;i++){var s=a[i];if(s.pos>e)return o||n[0];if(r&&!re.isPropertyDeclaration(s)){if(void 0!==o)return s;r=!1}o=s}return re.Debug.assert(void 0!==o),o}(y,t);_.insertNodeBefore(r.file,v,h,{suffix:r.newLineCharacter+r.newLineCharacter}),_.replaceRange(r.file,{pos:e.getStart(),end:e.end},m)}else{var b=re.createVariableDeclaration(u,p,d),k=function(e,t){for(var n=void 0;void 0!==e&&e!==t;){if(re.isVariableDeclaration(e)&&e.initializer===n&&re.isVariableDeclarationList(e.parent)&&1<e.parent.declarations.length)return e;e=(n=e).parent}}(e,t);if(k){_.insertNodeAt(r.file,k.getStart(),b,{suffix:", "});var m=re.createIdentifier(u);_.replaceRange(r.file,{pos:e.getStart(),end:e.end},m)}else if(210===e.parent.kind&&t===re.findAncestor(e,A)){var T=re.createVariableStatement(void 0,re.createVariableDeclarationList([b],2));_.replaceRange(r.file,{pos:e.parent.getStart(),end:e.parent.end},T)}else{var T=re.createVariableStatement(void 0,re.createVariableDeclarationList([b],2)),v=function(e,t){re.Debug.assert(!re.isClassLike(t));for(var n=void 0,o=e;o!==t;o=o.parent)A(o)&&(n=o);for(var o=(n||e).parent;;o=o.parent){if(B(o)){for(var r=void 0,i=0,a=o.statements;i<a.length;i++){var s=a[i];if(s.pos>e.pos)break;r=s}return re.Debug.assert(void 0!==r),r}if(o===t){re.Debug.fail("Didn't encounter a block-like before encountering scope");break}}}(e,t);if(0===v.pos){var E=re.getSourceFileImportLocation(c);_.insertNodeAt(r.file,E,T,{prefix:0===E?void 0:r.newLineCharacter,suffix:re.isLineBreak(c.text.charCodeAt(E))?r.newLineCharacter:r.newLineCharacter+r.newLineCharacter})}else _.insertNodeBefore(r.file,v,T,{suffix:r.newLineCharacter+r.newLineCharacter});if(210===e.parent.kind)_.deleteRange(r.file,{pos:e.parent.getStart(),end:e.parent.end});else{var m=re.createIdentifier(u);_.replaceRange(r.file,{pos:e.getStart(),end:e.end},m)}}}var S=_.getChanges(),C=e.getSourceFile().fileName,x=ee(S,C,u,!0);return{renameFilename:C,renameLocation:x,edits:S}}(re.isExpression(k)?k:k.statements[0].expression,v[m],T[m],f.facts,h);re.Debug.fail("Unrecognized action name")}function x(e,c){var t=c.length;if(0===t)return{errors:[re.createFileDiagnostic(e,c.start,t,V.CannotExtractEmpty)]};var n=f(re.getTokenAtPosition(e,c.start,!1),e,c),o=f(re.findTokenOnLeftOfPosition(e,re.textSpanEnd(c)),e,c),u=[],g=$.None;if(!n||!o)return{errors:[re.createFileDiagnostic(e,c.start,t,V.CannotExtractRange)]};if(n.parent!==o.parent)return{errors:[re.createFileDiagnostic(e,c.start,t,V.CannotExtractRange)]};if(n!==o){if(!B(n.parent))return{errors:[re.createFileDiagnostic(e,c.start,t,V.CannotExtractRange)]};for(var r=[],i=0,a=n.parent.statements;i<a.length;i++){var s=a[i];if(s===n||r.length){var l=_(s);if(l)return{errors:l};r.push(s)}if(s===o)break}return{targetRange:{range:r,facts:g,declarations:u}}}var p,d=function(e){if(re.isIdentifier(re.isExpressionStatement(e)?e.expression:e))return[re.createDiagnosticForNode(e,V.CannotExtractIdentifier)]}(n)||_(n);return d?{errors:d}:{targetRange:{range:(p=n,re.isStatement(p)?[p]:re.isPartOfExpression(p)?re.isExpressionStatement(p.parent)?[p.parent]:p:void 0),facts:g,declarations:u}};function _(e){var t,n;if((n=t||(t={}))[n.None=0]="None",n[n.Break=1]="Break",n[n.Continue=2]="Continue",n[n.Return=4]="Return",!(re.isStatement(e)||re.isPartOfExpression(e)&&function(e){switch(e.parent.kind){case 264:return!1}switch(e.kind){case 9:return 238!==e.parent.kind&&242!==e.parent.kind;case 198:case 174:case 176:return!1;case 71:return 176!==e.parent.kind&&242!==e.parent.kind&&246!==e.parent.kind}return!0}(e)))return[re.createDiagnosticForNode(e,V.StatementOrExpressionExpected)];if(re.isInAmbientContext(e))return[re.createDiagnosticForNode(e,V.CannotExtractAmbientBlock)];var a,o=re.getContainingClass(e);o&&function(e,t){for(var n=e;n!==t;){if(149===n.kind){re.hasModifier(n,32)&&(g|=$.InStaticRegion);break}if(146===n.kind){152===re.getContainingFunction(n).kind&&(g|=$.InStaticRegion);break}151===n.kind&&re.hasModifier(n,32)&&(g|=$.InStaticRegion),n=n.parent}}(e,o);var s,l=4;return function e(t){if(a)return!0;if(re.isDeclaration(t)){var n=226===t.kind?t.parent.parent:t;if(re.hasModifier(n,1))return(a||(a=[])).push(re.createDiagnosticForNode(t,V.CannotExtractExportedEntity)),!0;u.push(t.symbol)}switch(t.kind){case 238:return(a||(a=[])).push(re.createDiagnosticForNode(t,V.CannotExtractImport)),!0;case 97:if(181===t.parent.kind){var o=re.getContainingClass(t);if(o.pos<c.start||o.end>=c.start+c.length)return(a||(a=[])).push(re.createDiagnosticForNode(t,V.CannotExtractSuper)),!0}else g|=$.UsesThis}if(!t||re.isFunctionLikeDeclaration(t)||re.isClassLike(t)){switch(t.kind){case 228:case 229:265===t.parent.kind&&void 0===t.parent.externalModuleIndicator&&(a||(a=[])).push(re.createDiagnosticForNode(t,V.FunctionWillNotBeVisibleInTheNewScope))}return!1}var r=l;switch(t.kind){case 211:case 224:l=0;break;case 207:t.parent&&224===t.parent.kind&&t.parent.finallyBlock===t&&(l=4);break;case 257:l|=1;break;default:re.isIterationStatement(t,!1)&&(l|=3)}switch(t.kind){case 169:case 99:g|=$.UsesThis;break;case 222:var i=t.label;(s||(s=[])).push(i.escapedText),re.forEachChild(t,e),s.pop();break;case 218:case 217:var i=t.label;i?re.contains(s,i.escapedText)||(a||(a=[])).push(re.createDiagnosticForNode(t,V.CannotExtractRangeContainingLabeledBreakOrContinueStatementWithTargetOutsideOfTheRange)):l&(218===t.kind?1:2)||(a||(a=[])).push(re.createDiagnosticForNode(t,V.CannotExtractRangeContainingConditionalBreakOrContinueStatements));break;case 191:g|=$.IsAsyncFunction;break;case 197:g|=$.IsGenerator;break;case 219:4&l?g|=$.HasReturn:(a||(a=[])).push(re.createDiagnosticForNode(t,V.CannotExtractRangeContainingConditionalReturnStatement));break;default:re.forEachChild(t,e)}l=r}(e),a}}function A(e){return re.isFunctionLikeDeclaration(e)||re.isSourceFile(e)||re.isModuleBlock(e)||re.isClassLike(e)}function D(e,t){var n,o,r=t.file,i=function(e){var t=oe(e.range)?re.first(e.range):e.range;if(e.facts&$.UsesThis){var n=re.getContainingClass(t);if(n){var o=re.findAncestor(t,re.isFunctionLikeDeclaration);return o?[o,n]:[n]}}for(var r=[];;)if(146===(t=t.parent).kind&&(t=re.findAncestor(t,function(e){return re.isFunctionLikeDeclaration(e)}).parent),A(t)&&(r.push(t),265===t.kind))return r}(e);return{scopes:i,readsAndWrites:function(k,T,E,S,C,a){var s=re.createMap(),x=[],A=[],D=[],B=[],i=[],l=re.createMap(),c=[],u=void 0,e=oe(k.range)?1===k.range.length&&re.isExpressionStatement(k.range[0])?k.range[0].expression:void 0:k.range,t=void 0;if(void 0===e){var n=k.range,o=re.first(n).getStart(),r=re.last(n).end;t=re.createFileDiagnostic(S,o,r-o,V.ExpressionExpected)}else 9216&C.getTypeAtLocation(e).flags&&(t=re.createDiagnosticForNode(e,V.UselessConstantType));for(var g=0,p=T;g<p.length;g++){var d=p[g];x.push({usages:re.createMap(),typeParameterUsages:re.createMap(),substitutions:re.createMap()}),A.push(re.createMap()),D.push(re.isFunctionLikeDeclaration(d)&&228!==d.kind?[re.createDiagnosticForNode(d,V.CannotExtractToOtherFunctionLike)]:[]);var _=[];t&&_.push(t),re.isClassLike(d)&&re.isInJavaScriptFile(d)&&_.push(re.createDiagnosticForNode(d,V.CannotExtractToJSClass)),re.isArrowFunction(d)&&!re.isBlock(d.body)&&_.push(re.createDiagnosticForNode(d,V.CannotExtractToExpressionArrowFunction)),B.push(_)}var I=re.createMap(),f=oe(k.range)?re.createBlock(k.range):k.range,h=oe(k.range)?re.first(k.range):k.range,m=function(e){for(;e;e=e.parent)if(t=e,re.isDeclarationWithTypeParameters(t)&&void 0!==t.typeParameters&&0<t.typeParameters.length)return!0;var t;return!1}(h);if(function e(t,n){if(void 0===n&&(n=1),m){var o=C.getTypeAtLocation(t);U(o)}if(re.isDeclaration(t)&&t.symbol&&i.push(t),re.isAssignmentExpression(t))e(t.left,2),e(t.right);else if(re.isUnaryExpressionWithWrite(t))e(t.operand,2);else if(re.isPropertyAccessExpression(t)||re.isElementAccessExpression(t))re.forEachChild(t,e);else if(re.isIdentifier(t)){if(!t.parent)return;if(re.isQualifiedName(t.parent)&&t!==t.parent.left)return;if(re.isPropertyAccessExpression(t.parent)&&t!==t.parent.expression)return;!function(e,t,n){var o=function(e,t,n){var o=H(e);if(o){var r=re.getSymbolId(o).toString(),i=I.get(r);if(i&&t<=i)return r;if(I.set(r,t),i){for(var a=0,s=x;a<s.length;a++){var l=s[a],c=l.usages.get(e.text);c&&l.usages.set(e.text,{usage:t,symbol:o,node:e})}return r}var u=re.find(o.getDeclarations(),function(e){return e.getSourceFile()===S});if(u&&!re.rangeContainsStartEnd(E,u.getStart(),u.end)){if(k.facts&$.IsGenerator&&2===t){for(var g=re.createDiagnosticForNode(e,V.CannotExtractRangeThatContainsWritesToReferencesLocatedOutsideOfTheTargetRangeInGenerators),p=0,d=D;p<d.length;p++){var _=d[p];_.push(g)}for(var f=0,h=B;f<h.length;f++){var _=h[f];_.push(g)}}for(var m=0;m<T.length;m++){var y=T[m],v=C.resolveName(o.name,y,o.flags);if(v!==o&&!A[m].has(r)){var b=G(o.exportSymbol||o,y,n);if(b)A[m].set(r,b);else if(n){if(!(262144&o.flags)){var g=re.createDiagnosticForNode(e,V.TypeWillNotBeVisibleInTheNewScope);D[m].push(g),B[m].push(g)}}else x[m].usages.set(e.text,{usage:t,symbol:o,node:e})}}return r}}}(e,t,n);if(o)for(var r=0;r<T.length;r++){var i=A[r].get(o);i&&x[r].substitutions.set(re.getNodeId(e).toString(),i)}}(t,n,re.isPartOfTypeNode(t))}else re.forEachChild(t,e)}(f),m&&!oe(k.range)){var y=C.getContextualType(k.range);U(y)}if(0<s.size){for(var v=re.createMap(),b=0,N=h;void 0!==N&&b<T.length;N=N.parent)if(N===T[b]&&(v.forEach(function(e,t){x[b].typeParameterUsages.set(t,e)}),b++),re.isDeclarationWithTypeParameters(N)&&N.typeParameters)for(var w=0,O=N.typeParameters;w<O.length;w++){var R=O[w],L=C.getTypeAtLocation(R);s.has(L.id.toString())&&v.set(L.id.toString(),L)}re.Debug.assert(b===T.length)}if(i.length){var P=re.isBlockScope(T[0],T[0].parent)?T[0]:re.getEnclosingBlockScopeContainer(T[0]);re.forEachChild(P,function e(t){if(!(t===k.range||oe(k.range)&&0<=k.range.indexOf(t))){var n=re.isIdentifier(t)?H(t):C.getSymbolAtLocation(t);if(n){var o=re.find(i,function(e){return e.symbol===n});if(o)if(re.isVariableDeclaration(o)){var r=o.symbol.id.toString();l.has(r)||(c.push(o),l.set(r,!0))}else u=u||o}re.forEachChild(t,e)}})}for(var M=function(e){var t=x[e];if(0<e&&(0<t.usages.size||0<t.typeParameterUsages.size)){var n=oe(k.range)?k.range[0]:k.range;B[e].push(re.createDiagnosticForNode(n,V.CannotAccessVariablesFromNestedScopes))}var o=!1,r=void 0;if(x[e].usages.forEach(function(e){2===e.usage&&(o=!0,106500&e.symbol.flags&&e.symbol.valueDeclaration&&re.hasModifier(e.symbol.valueDeclaration,64)&&(r=e.symbol.valueDeclaration))}),re.Debug.assert(oe(k.range)||0===c.length),o&&!oe(k.range)){var i=re.createDiagnosticForNode(k.range,V.CannotWriteInExpression);D[e].push(i),B[e].push(i)}else if(r&&0<e){var i=re.createDiagnosticForNode(r,V.CannotExtractReadonlyPropertyInitializerOutsideConstructor);D[e].push(i),B[e].push(i)}else if(u){var i=re.createDiagnosticForNode(u,V.CannotExtractExportedEntity);D[e].push(i),B[e].push(i)}},F=0;F<T.length;F++)M(F);return{target:f,usagesPerScope:x,functionErrorsPerScope:D,constantErrorsPerScope:B,exposedVariableDeclarations:c};function U(e){for(var t=C.getSymbolWalker(function(){return a.throwIfCancellationRequested(),!0}),n=t.walkType(e).visitedTypes,o=0,r=n;o<r.length;o++){var i=r[o];16384&i.flags&&s.set(i.id.toString(),i)}}function H(e){return e.parent&&re.isShorthandPropertyAssignment(e.parent)&&e.parent.name===e?C.getShorthandAssignmentValueSymbol(e.parent):C.getSymbolAtLocation(e)}function G(e,t,n){if(e){if(e.getDeclarations().some(function(e){return e.parent===t}))return re.createIdentifier(e.name);var o=G(e.parent,t,n);if(void 0!==o)return n?re.createQualifiedName(o,re.createIdentifier(e.name)):re.createPropertyAccess(o,e.name)}}}(e,i,(o=r,oe((n=e).range)?{pos:re.first(n.range).getStart(o),end:re.last(n.range).getEnd()}:n.range),r,t.program.getTypeChecker(),t.cancellationToken)}}function Q(e,t){for(var n=e,o=1;re.stringContains(t,n);o++)n=e+"_"+o;return n}function ee(e,t,n,o){for(var r=0,i=-1,a=0,s=e;a<s.length;a++){var l=s[a],c=l.fileName,u=l.textChanges;re.Debug.assert(c===t);for(var g=0,p=u;g<p.length;g++){var d=p[g],_=d.span,f=d.newText,h=f.indexOf(n);if(-1!==h&&(i=_.start+r+h,!o))return i;r+=f.length-_.length}}return re.Debug.assert(o),re.Debug.assert(0<=i),i}function te(e,t){var n=e.type,o=e.declaration,r=t.type,i=t.declaration;if(o){if(!i)return 1;var a=o.pos-i.pos;if(0!==a)return a}else if(i)return-1;var s=n.symbol?n.symbol.getName():"",l=r.symbol?r.symbol.getName():"",c=re.compareStrings(s,l);return 0!==c?c:n.id-r.id}function ne(e,t){var n=re.map(e,function(e){return re.createShorthandPropertyAssignment(e.symbol.name)}),o=re.map(t,function(e){return re.createShorthandPropertyAssignment(e.symbol.name)});return void 0===n?o:void 0===o?n:n.concat(o)}function oe(e){return re.isArray(e)}function f(e,t,n){var o,r,i;if(e)for(;e.parent;){if(re.isSourceFile(e.parent)||(o=n,r=e.parent,i=t,!(re.textSpanContainsPosition(o,r.getStart(i))&&r.getEnd()<=re.textSpanEnd(o))))return e;e=e.parent}}function B(e){switch(e.kind){case 207:case 265:case 234:case 257:return!0;default:return!1}}l.registerRefactor(b),e.getAvailableActions=a,e.getEditsForAction=s,function(e){function t(e){return{message:e,code:0,category:re.DiagnosticCategory.Message,key:e}}e.CannotExtractRange=t("Cannot extract range."),e.CannotExtractImport=t("Cannot extract import statement."),e.CannotExtractSuper=t("Cannot extract super call."),e.CannotExtractEmpty=t("Cannot extract empty range."),e.ExpressionExpected=t("expression expected."),e.UselessConstantType=t("No reason to extract constant of type."),e.StatementOrExpressionExpected=t("Statement or expression expected."),e.CannotExtractRangeContainingConditionalBreakOrContinueStatements=t("Cannot extract range containing conditional break or continue statements."),e.CannotExtractRangeContainingConditionalReturnStatement=t("Cannot extract range containing conditional return statement."),e.CannotExtractRangeContainingLabeledBreakOrContinueStatementWithTargetOutsideOfTheRange=t("Cannot extract range containing labeled break or continue with target outside of the range."),e.CannotExtractRangeThatContainsWritesToReferencesLocatedOutsideOfTheTargetRangeInGenerators=t("Cannot extract range containing writes to references located outside of the target range in generators."),e.TypeWillNotBeVisibleInTheNewScope=t("Type will not visible in the new scope."),e.FunctionWillNotBeVisibleInTheNewScope=t("Function will not visible in the new scope."),e.CannotExtractIdentifier=t("Select more than a single identifier."),e.CannotExtractExportedEntity=t("Cannot extract exported declaration"),e.CannotWriteInExpression=t("Cannot write back side-effects when extracting an expression"),e.CannotExtractReadonlyPropertyInitializerOutsideConstructor=t("Cannot move initialization of read-only class property outside of the constructor"),e.CannotExtractAmbientBlock=t("Cannot extract code from ambient contexts"),e.CannotAccessVariablesFromNestedScopes=t("Cannot access variables from nested scopes"),e.CannotExtractToOtherFunctionLike=t("Cannot extract method to a function-like scope that is not a function"),e.CannotExtractToJSClass=t("Cannot extract constant to a class scope in JS"),e.CannotExtractToExpressionArrowFunction=t("Cannot extract constant to an arrow function without a block")}(V=e.Messages||(e.Messages={})),(t=$||($={}))[t.None=0]="None",t[t.HasReturn=1]="HasReturn",t[t.IsGenerator=2]="IsGenerator",t[t.IsAsyncFunction=4]="IsAsyncFunction",t[t.UsesThis=8]="UsesThis",t[t.InStaticRegion=16]="InStaticRegion",e.getRangeToExtract=x,(o=n||(n={}))[o.Module=0]="Module",o[o.Global=1]="Global",(i=r||(r={}))[i.Read=1]="Read",i[i.Write=2]="Write"})((l=re.refactor||(re.refactor={})).extractSymbol||(l.extractSymbol={}))}(ts||(ts={})),function(a){var t;(function(e){var o="install",r={name:"Install missing types package",description:"Install missing types package",getEditsForAction:function(e,t){a.Debug.assertEqual(o,t);var n=i(e);return{edits:[],renameFilename:void 0,renameLocation:void 0,commands:n.commands}},getAvailableActions:function(e){var t=e.program.getCompilerOptions();if(void 0===t.noImplicitAny?!t.strict:!t.noImplicitAny){var n=i(e);return n&&[{name:r.name,description:r.description,actions:[{description:n.description,name:o}]}]}}};function i(e){var t=e.file,n=e.startPosition,o=a.getTokenAtPosition(t,n,!1);if(a.isStringLiteral(o)&&function(e){switch(e.parent.kind){case 238:case 248:return!0;default:return!1}}(o)&&void 0===a.getResolvedModule(t,o.text))return a.codefix.tryGetCodeActionForInstallPackageTypes(e.host,o.text)}t.registerRefactor(r)})((t=a.refactor||(a.refactor={})).installTypesForPackage||(t.installTypesForPackage={}))}(ts||(ts={})),function(E){var o;function a(e,t,n,o){var r=E.isNodeKind(e)?new i(e,t,n):71===e?new l(71,t,n):new s(e,t,n);return r.parent=o,r}E.servicesVersion="0.6";var i=function(){function e(e,t,n){this.pos=t,this.end=n,this.flags=0,this.transformFlags=void 0,this.parent=void 0,this.kind=e}return e.prototype.getSourceFile=function(){return E.getSourceFileOfNode(this)},e.prototype.getStart=function(e,t){return E.getTokenPosOfNode(this,e,t)},e.prototype.getFullStart=function(){return this.pos},e.prototype.getEnd=function(){return this.end},e.prototype.getWidth=function(e){return this.getEnd()-this.getStart(e)},e.prototype.getFullWidth=function(){return this.end-this.pos},e.prototype.getLeadingTriviaWidth=function(e){return this.getStart(e)-this.pos},e.prototype.getFullText=function(e){return(e||this.getSourceFile()).text.substring(this.pos,this.end)},e.prototype.getText=function(e){return e||(e=this.getSourceFile()),e.text.substring(this.getStart(e),this.getEnd())},e.prototype.addSyntheticNodes=function(e,t,n){for(E.scanner.setTextPos(t);t<n;){var o=E.scanner.scan(),r=E.scanner.getTextPos();if(r<=n&&e.push(a(o,t,r,this)),t=r,1===o)break}return t},e.prototype.createSyntaxList=function(e){var t=a(286,e.pos,e.end,this);t._children=[];for(var n=e.pos,o=0,r=e;o<r.length;o++){var i=r[o];n<i.pos&&(n=this.addSyntheticNodes(t._children,n,i.pos)),t._children.push(i),n=i.end}return n<e.end&&this.addSyntheticNodes(t._children,n,e.end),t},e.prototype.createChildren=function(e){var t=this;if(E.isNodeKind(this.kind)){if(E.isJSDocCommentContainingNode(this)){var n=[];return this.forEachChild(function(e){n.push(e)}),void(this._children=n)}var o=[];E.scanner.setText((e||this.getSourceFile()).text);var r=this.pos,i=function(e){r=t.addSyntheticNodes(o,r,e.pos),o.push(e),r=e.end};if(this.jsDoc)for(var a=0,s=this.jsDoc;a<s.length;a++){i(s[a])}r=this.pos,E.forEachChild(this,i,function(e){r<e.pos&&(r=t.addSyntheticNodes(o,r,e.pos)),o.push(t.createSyntaxList(e)),r=e.end}),r<this.end&&this.addSyntheticNodes(o,r,this.end),E.scanner.setText(void 0),this._children=o}else this._children=E.emptyArray},e.prototype.getChildCount=function(e){return this._children||this.createChildren(e),this._children.length},e.prototype.getChildAt=function(e,t){return this._children||this.createChildren(t),this._children[e]},e.prototype.getChildren=function(e){return this._children||this.createChildren(e),this._children},e.prototype.getFirstToken=function(e){var t=this.getChildren(e);if(t.length){var n=E.find(t,function(e){return e.kind<267||285<e.kind});return n.kind<143?n:n.getFirstToken(e)}},e.prototype.getLastToken=function(e){var t=this.getChildren(e),n=E.lastOrUndefined(t);if(n)return n.kind<143?n:n.getLastToken(e)},e.prototype.forEachChild=function(e,t){return E.forEachChild(this,e,t)},e}(),e=function(){function e(e,t){this.pos=e,this.end=t,this.flags=0,this.parent=void 0}return e.prototype.getSourceFile=function(){return E.getSourceFileOfNode(this)},e.prototype.getStart=function(e,t){return E.getTokenPosOfNode(this,e,t)},e.prototype.getFullStart=function(){return this.pos},e.prototype.getEnd=function(){return this.end},e.prototype.getWidth=function(e){return this.getEnd()-this.getStart(e)},e.prototype.getFullWidth=function(){return this.end-this.pos},e.prototype.getLeadingTriviaWidth=function(e){return this.getStart(e)-this.pos},e.prototype.getFullText=function(e){return(e||this.getSourceFile()).text.substring(this.pos,this.end)},e.prototype.getText=function(e){return(e||this.getSourceFile()).text.substring(this.getStart(),this.getEnd())},e.prototype.getChildCount=function(){return 0},e.prototype.getChildAt=function(){},e.prototype.getChildren=function(){return E.emptyArray},e.prototype.getFirstToken=function(){},e.prototype.getLastToken=function(){},e.prototype.forEachChild=function(){},e}(),t=function(){function e(e,t){this.flags=e,this.escapedName=t}return e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"name",{get:function(){return E.symbolName(this)},enumerable:!0,configurable:!0}),e.prototype.getEscapedName=function(){return this.escapedName},e.prototype.getName=function(){return this.name},e.prototype.getDeclarations=function(){return this.declarations},e.prototype.getDocumentationComment=function(){return void 0===this.documentationComment&&(this.documentationComment=E.JsDoc.getJsDocCommentsFromDeclarations(this.declarations)),this.documentationComment},e.prototype.getJsDocTags=function(){return void 0===this.tags&&(this.tags=E.JsDoc.getJsDocTagsFromDeclarations(this.declarations)),this.tags},e}(),s=function(r){function e(e,t,n){var o=r.call(this,t,n)||this;return o.kind=e,o}return __extends(e,r),e}(e),l=function(o){function e(e,t,n){return o.call(this,t,n)||this}return __extends(e,o),Object.defineProperty(e.prototype,"text",{get:function(){return E.idText(this)},enumerable:!0,configurable:!0}),e}(e);l.prototype.kind=71;var n=function(){function e(e,t){this.checker=e,this.flags=t}return e.prototype.getFlags=function(){return this.flags},e.prototype.getSymbol=function(){return this.symbol},e.prototype.getProperties=function(){return this.checker.getPropertiesOfType(this)},e.prototype.getProperty=function(e){return this.checker.getPropertyOfType(this,e)},e.prototype.getApparentProperties=function(){return this.checker.getAugmentedPropertiesOfType(this)},e.prototype.getCallSignatures=function(){return this.checker.getSignaturesOfType(this,0)},e.prototype.getConstructSignatures=function(){return this.checker.getSignaturesOfType(this,1)},e.prototype.getStringIndexType=function(){return this.checker.getIndexTypeOfType(this,0)},e.prototype.getNumberIndexType=function(){return this.checker.getIndexTypeOfType(this,1)},e.prototype.getBaseTypes=function(){return 32768&this.flags&&3&this.objectFlags?this.checker.getBaseTypes(this):void 0},e.prototype.getNonNullableType=function(){return this.checker.getNonNullableType(this)},e}(),r=function(){function e(e){this.checker=e}return e.prototype.getDeclaration=function(){return this.declaration},e.prototype.getTypeParameters=function(){return this.typeParameters},e.prototype.getParameters=function(){return this.parameters},e.prototype.getReturnType=function(){return this.checker.getReturnTypeOfSignature(this)},e.prototype.getDocumentationComment=function(){return void 0===this.documentationComment&&(this.documentationComment=this.declaration?E.JsDoc.getJsDocCommentsFromDeclarations([this.declaration]):[]),this.documentationComment},e.prototype.getJsDocTags=function(){return void 0===this.jsDocTags&&(this.jsDocTags=this.declaration?E.JsDoc.getJsDocTagsFromDeclarations([this.declaration]):[]),this.jsDocTags},e}(),c=function(o){function e(e,t,n){return o.call(this,e,t,n)||this}return __extends(e,o),e.prototype.update=function(e,t){return E.updateSourceFile(this,e,t)},e.prototype.getLineAndCharacterOfPosition=function(e){return E.getLineAndCharacterOfPosition(this,e)},e.prototype.getLineStarts=function(){return E.getLineStarts(this)},e.prototype.getPositionOfLineAndCharacter=function(e,t){return E.getPositionOfLineAndCharacter(this,e,t)},e.prototype.getLineEndOfPosition=function(e){var t,n=this.getLineAndCharacterOfPosition(e).line,o=this.getLineStarts();n+1>=o.length&&(t=this.getEnd()),t||(t=o[n+1]-1);var r=this.getFullText();return"\n"===r[t]&&"\r"===r[t-1]?t-1:t},e.prototype.getNamedDeclarations=function(){return this.namedDeclarations||(this.namedDeclarations=this.computeNamedDeclarations()),this.namedDeclarations},e.prototype.computeNamedDeclarations=function(){var l=E.createMultiMap();return E.forEachChild(this,function e(t){switch(t.kind){case 228:case 186:case 151:case 150:var n=t,o=u(n);if(o){var r=function(e){var t=l.get(e);t||l.set(e,t=[]);return t}(o),i=E.lastOrUndefined(r);i&&n.parent===i.parent&&n.symbol===i.symbol?n.body&&!i.body&&(r[r.length-1]=n):r.push(n)}E.forEachChild(t,e);break;case 229:case 199:case 230:case 231:case 232:case 233:case 237:case 246:case 242:case 239:case 240:case 153:case 154:case 163:c(t),E.forEachChild(t,e);break;case 146:if(!E.hasModifier(t,92))break;case 226:case 176:var a=t;if(E.isBindingPattern(a.name)){E.forEachChild(a.name,e);break}a.initializer&&e(a.initializer);case 264:case 149:case 148:c(t);break;case 244:t.exportClause&&E.forEach(t.exportClause.elements,e);break;case 238:var s=t.importClause;s&&(s.name&&c(s),s.namedBindings&&(240===s.namedBindings.kind?c(s.namedBindings):E.forEach(s.namedBindings.elements,e)));break;case 194:0!==E.getSpecialPropertyAssignmentKind(t)&&c(t);default:E.forEachChild(t,e)}}),l;function c(e){var t=u(e);t&&l.add(t,e)}function u(e){var t=E.getNameOfDeclaration(e);if(t){var n=E.getTextOfIdentifierOrLiteral(t);if(void 0!==n)return n;if(144===t.kind){var o=t.expression;return 179===o.kind?o.name.text:E.getTextOfIdentifierOrLiteral(o)}}}},e}(i),u=function(){function e(e,t,n){this.fileName=e,this.text=t,this.skipTrivia=n}return e.prototype.getLineAndCharacterOfPosition=function(e){return E.getLineAndCharacterOfPosition(this,e)},e}();function S(e){var t=!0;for(var n in e)if(E.hasProperty(e,n)&&!g(n)){t=!1;break}if(t)return e;var o={};for(var n in e){if(E.hasProperty(e,n))o[g(n)?n:n.charAt(0).toLowerCase()+n.substr(1)]=e[n]}return o}function g(e){return!e.length||e.charAt(0)===e.charAt(0).toLowerCase()}function p(){return{target:1,jsx:1}}E.toEditorSettings=S,E.displayPartsToString=function(e){return e?E.map(e,function(e){return e.text}).join(""):""},E.getDefaultCompilerOptions=p,E.getSupportedCodeFixes=function(){return E.codefix.getSupportedErrorCodes()};var C=function(){function e(e,t){this.host=e,this.currentDirectory=e.getCurrentDirectory(),this.fileNameToEntry=E.createMap();for(var n=0,o=e.getScriptFileNames();n<o.length;n++){var r=o[n];this.createEntry(r,E.toPath(r,this.currentDirectory,t))}this._compilationSettings=e.getCompilationSettings()||{target:1,jsx:1}}return e.prototype.compilationSettings=function(){return this._compilationSettings},e.prototype.createEntry=function(e,t){var n,o=this.host.getScriptSnapshot(e);return n=o?{hostFileName:e,version:this.host.getScriptVersion(e),scriptSnapshot:o,scriptKind:E.getScriptKind(e,this.host)}:e,this.fileNameToEntry.set(t,n),n},e.prototype.getEntryByPath=function(e){return this.fileNameToEntry.get(e)},e.prototype.getHostFileInformation=function(e){var t=this.fileNameToEntry.get(e);return E.isString(t)?void 0:t},e.prototype.getOrCreateEntryByPath=function(e,t){var n=this.getEntryByPath(t)||this.createEntry(e,t);return E.isString(n)?void 0:n},e.prototype.getRootFileNames=function(){return E.arrayFrom(this.fileNameToEntry.values(),function(e){return E.isString(e)?e:e.hostFileName})},e.prototype.getVersion=function(e){var t=this.getHostFileInformation(e);return t&&t.version},e.prototype.getScriptSnapshot=function(e){var t=this.getHostFileInformation(e);return t&&t.scriptSnapshot},e}(),x=function(){function e(e){this.host=e}return e.prototype.getCurrentSourceFile=function(e){var t=this.host.getScriptSnapshot(e);if(!t)throw new Error("Could not find file: '"+e+"'.");var n,o=E.getScriptKind(e,this.host),r=this.host.getScriptVersion(e);if(this.currentFileName!==e)n=_(e,t,5,r,!0,o);else if(this.currentFileVersion!==r){var i=t.getChangeRange(this.currentFileScriptSnapshot);n=f(this.currentSourceFile,t,r,i)}return n&&(this.currentFileVersion=r,this.currentFileName=e,this.currentFileScriptSnapshot=t,this.currentSourceFile=n),this.currentSourceFile},e}();function d(e,t,n){e.version=n,e.scriptSnapshot=t}function _(e,t,n,o,r,i){var a=t.getText(0,t.getLength()),s=E.createSourceFile(e,a,n,r,i);return d(s,t,o),s}function f(e,t,n,o,r){if(o&&n!==e.version&&!E.disableIncrementalParsing){var i=void 0,a=0!==o.span.start?e.text.substr(0,o.span.start):"",s=E.textSpanEnd(o.span)!==e.text.length?e.text.substr(E.textSpanEnd(o.span)):"";if(0===o.newLength)i=a&&s?a+s:a||s;else{var l=t.getText(o.span.start,o.span.start+o.newLength);i=a&&s?a+l+s:a?a+l:l+s}var c=E.updateSourceFile(e,i,o,r);return d(c,t,n),c.nameTable=void 0,e!==c&&e.scriptSnapshot&&(e.scriptSnapshot.dispose&&e.scriptSnapshot.dispose(),e.scriptSnapshot=void 0),c}return _(e.fileName,t,e.languageVersion,n,!0,e.scriptKind)}E.createLanguageServiceSourceFile=_,E.disableIncrementalParsing=!1,E.updateLanguageServiceSourceFile=f;var A=function(){function e(e){this.cancellationToken=e}return e.prototype.isCancellationRequested=function(){return this.cancellationToken&&this.cancellationToken.isCancellationRequested()},e.prototype.throwIfCancellationRequested=function(){if(this.isCancellationRequested())throw new E.OperationCanceledException},e}(),h=function(){function e(e,t){void 0===t&&(t=20),this.hostCancellationToken=e,this.throttleWaitMilliseconds=t,this.lastCancellationCheckTime=0}return e.prototype.isCancellationRequested=function(){var e=E.timestamp();return Math.abs(e-this.lastCancellationCheckTime)>=this.throttleWaitMilliseconds&&(this.lastCancellationCheckTime=e,this.hostCancellationToken.isCancellationRequested())},e.prototype.throwIfCancellationRequested=function(){if(this.isCancellationRequested())throw new E.OperationCanceledException},e}();function m(e){switch(e.kind){case 253:case 255:case 261:case 262:case 151:case 153:case 154:return!0}return!1}function y(e,t){var n=E.unescapeLeadingUnderscores(E.getTextOfPropertyName(t));if(n&&e){var o=[],r=e.getProperty(n);if(65536&e.flags)return E.forEach(e.types,function(e){var t=e.getProperty(n);t&&o.push(t)}),o;if(r)return o.push(r),o}}E.ThrottledCancellationToken=h,E.createLanguageService=function(u,g){void 0===g&&(g=E.createDocumentRegistry(u.useCaseSensitiveFileNames&&u.useCaseSensitiveFileNames(),u.getCurrentDirectory()));var p,d,_=new x(u);o=o||new E.formatting.RulesProvider;var f=0,h=u.useCaseSensitiveFileNames&&u.useCaseSensitiveFileNames(),m=new A(u.getCancellationToken&&u.getCancellationToken()),y=u.getCurrentDirectory();function v(e){u.log&&u.log(e)}!E.localizedDiagnosticMessages&&u.getLocalizedDiagnosticMessages&&(E.localizedDiagnosticMessages=u.getLocalizedDiagnosticMessages());var b=E.createGetCanonicalFileName(h);function k(e){var t=p.getSourceFile(e);if(!t)throw new Error("Could not find file: '"+e+"'.");return t}function c(e){return o.ensureUpToDate(e),o}function T(){if(u.getProjectVersion){var e=u.getProjectVersion();if(e){if(d===e&&!u.hasChangedAutomaticTypeDirectiveNames)return;d=e}}var t=u.getTypeRootsVersion?u.getTypeRootsVersion():0;f!==t&&(v("TypeRoots version has changed; provide new program"),p=void 0,f=t);var s=new C(u,b),n=s.getRootFileNames(),o=u.hasInvalidatedResolution||E.returnFalse;if(!E.isProgramUptoDate(p,n,s.compilationSettings(),function(e){return s.getVersion(e)},i,o,u.hasChangedAutomaticTypeDirectiveNames)){var l=s.compilationSettings(),r={getSourceFile:function(e,t,n,o){return a(e,E.toPath(e,y,b),0,0,o)},getSourceFileByPath:a,getCancellationToken:function(){return m},getCanonicalFileName:b,useCaseSensitiveFileNames:function(){return h},getNewLine:function(){return E.getNewLineCharacter(l,{newLine:E.getNewLineOrDefaultFromHost(u)})},getDefaultLibFileName:function(e){return u.getDefaultLibFileName(e)},writeFile:E.noop,getCurrentDirectory:function(){return y},fileExists:i,readFile:function(e){var t=E.toPath(e,y,b),n=s.getEntryByPath(t);return n?E.isString(n)?void 0:n.scriptSnapshot.getText(0,n.scriptSnapshot.getLength()):u.readFile&&u.readFile(e)},directoryExists:function(e){return E.directoryProbablyExists(e,u)},getDirectories:function(e){return u.getDirectories?u.getDirectories(e):[]},onReleaseOldSourceFile:function(e,t){var n=g.getKeyForCompilationSettings(t);g.releaseDocumentWithKey(e.path,n)},hasInvalidatedResolution:o,hasChangedAutomaticTypeDirectiveNames:u.hasChangedAutomaticTypeDirectiveNames};u.trace&&(r.trace=function(e){return u.trace(e)}),u.resolveModuleNames&&(r.resolveModuleNames=function(e,t,n){return u.resolveModuleNames(e,t,n)}),u.resolveTypeReferenceDirectives&&(r.resolveTypeReferenceDirectives=function(e,t){return u.resolveTypeReferenceDirectives(e,t)});var c=g.getKeyForCompilationSettings(l);return p=E.createProgram(n,l,r,p),s=void 0,void p.getTypeChecker()}function i(e){var t=E.toPath(e,y,b),n=s.getEntryByPath(t);return n?!E.isString(n):u.fileExists&&u.fileExists(e)}function a(e,t,n,o,r){E.Debug.assert(void 0!==s);var i=s.getOrCreateEntryByPath(e,t);if(i){if(!r){var a=p&&p.getSourceFileByPath(t);if(a)return E.Debug.assertEqual(i.scriptKind,a.scriptKind,"Registered script kind should match new script kind.",t),g.updateDocumentWithKey(e,t,l,c,i.scriptSnapshot,i.version,i.scriptKind)}return g.acquireDocumentWithKey(e,t,l,c,i.scriptSnapshot,i.version,i.scriptKind)}}}function r(){return T(),p}function i(e,t,n){T();var o=E.map(n,function(e){return p.getSourceFile(e)}),r=k(e);return E.DocumentHighlights.getDocumentHighlights(p,m,r,t,o)}function a(e,t,n){T();var o=[];if(n&&n.isForRename)for(var r=0,i=p.getSourceFiles();r<i.length;r++){var a=i[r];p.isSourceFileDefaultLibrary(a)||o.push(a)}else o=p.getSourceFiles().slice();return E.FindAllReferences.findReferencedEntries(p,m,o,k(e),t,n)}function t(e){return _.getCurrentSourceFile(e)}function n(e){var t=E.getScriptKind(e,u);return 3===t||4===t}function s(e,t,n){var o="number"==typeof t?[t,void 0]:[t.pos,t.end];return{file:e,startPosition:o[0],endPosition:o[1],program:r(),newLineCharacter:n?n.newLineCharacter:u.getNewLine(),host:u,rulesProvider:c(n),cancellationToken:m}}return{dispose:function(){p&&(E.forEach(p.getSourceFiles(),function(e){return g.releaseDocument(e.fileName,p.getCompilerOptions())}),p=void 0),u=void 0},cleanupSemanticCache:function(){p=void 0},getSyntacticDiagnostics:function(e){return T(),p.getSyntacticDiagnostics(k(e),m).slice()},getSemanticDiagnostics:function(e){T();var t=k(e),n=p.getSemanticDiagnostics(t,m);if(!p.getCompilerOptions().declaration)return n.slice();var o=p.getDeclarationDiagnostics(t,m);return n.concat(o)},getCompilerOptionsDiagnostics:function(){return T(),p.getOptionsDiagnostics(m).concat(p.getGlobalDiagnostics(m))},getSyntacticClassifications:function(e,t){return E.getSyntacticClassifications(m,_.getCurrentSourceFile(e),t)},getSemanticClassifications:function(e,t){return n(e)?(T(),E.getSemanticClassifications(p.getTypeChecker(),m,k(e),p.getClassifiableNames(),t)):[]},getEncodedSyntacticClassifications:function(e,t){return E.getEncodedSyntacticClassifications(m,_.getCurrentSourceFile(e),t)},getEncodedSemanticClassifications:function(e,t){return n(e)?(T(),E.getEncodedSemanticClassifications(p.getTypeChecker(),m,k(e),p.getClassifiableNames(),t)):{spans:[],endOfLineState:0}},getCompletionsAtPosition:function(e,t){return T(),E.Completions.getCompletionsAtPosition(u,p.getTypeChecker(),v,p.getCompilerOptions(),k(e),t,p.getSourceFiles())},getCompletionData:E.Completions.getCompletionData,getCompletionEntryDetails:function(e,t,n,o,r){T();var i=o?c(o):void 0;return E.Completions.getCompletionEntryDetails(p.getTypeChecker(),v,p.getCompilerOptions(),k(e),t,{name:n,source:r},p.getSourceFiles(),u,i)},getCompletionEntrySymbol:function(e,t,n,o){return T(),E.Completions.getCompletionEntrySymbol(p.getTypeChecker(),v,p.getCompilerOptions(),k(e),t,{name:n,source:o},p.getSourceFiles())},getSignatureHelpItems:function(e,t){T();var n=k(e);return E.SignatureHelp.getSignatureHelpItems(p,n,t,m)},getQuickInfoAtPosition:function(e,t){T();var n=k(e),o=E.getTouchingPropertyName(n,t,!0);if(o!==n&&!E.isLabelName(o)){var r=p.getTypeChecker(),i=function(e,t){if((E.isIdentifier(e)||E.isStringLiteral(e))&&E.isPropertyAssignment(e.parent)&&e.parent.name===e){var n=t.getContextualType(e.parent.parent);if(n){var o=t.getPropertyOfType(n,E.getTextOfIdentifierOrLiteral(e));if(o)return o}}return t.getSymbolAtLocation(e)}(o,r);if(i&&!r.isUnknownSymbol(i)){var a=E.SymbolDisplay.getSymbolDisplayPartsDocumentationAndSymbolKind(r,i,n,E.getContainerNode(o),o);return{kind:a.symbolKind,kindModifiers:E.SymbolDisplay.getSymbolModifiers(i),textSpan:E.createTextSpan(o.getStart(),o.getWidth()),displayParts:a.displayParts,documentation:a.documentation,tags:a.tags}}switch(o.kind){case 71:case 179:case 143:case 99:case 169:case 97:var s=r.getTypeAtLocation(o);if(s)return{kind:"",kindModifiers:"",textSpan:E.createTextSpan(o.getStart(),o.getWidth()),displayParts:E.typeToDisplayParts(r,s,E.getContainerNode(o)),documentation:s.symbol?s.symbol.getDocumentationComment():void 0,tags:s.symbol?s.symbol.getJsDocTags():void 0}}}},getDefinitionAtPosition:function(e,t){return T(),E.GoToDefinition.getDefinitionAtPosition(p,k(e),t)},getImplementationAtPosition:function(e,t){return T(),E.FindAllReferences.getImplementationsAtPosition(p,m,p.getSourceFiles(),k(e),t)},getTypeDefinitionAtPosition:function(e,t){return T(),E.GoToDefinition.getTypeDefinitionAtPosition(p.getTypeChecker(),k(e),t)},getReferencesAtPosition:function(e,t){return a(e,t)},findReferences:function(e,t){return T(),E.FindAllReferences.findReferencedSymbols(p,m,p.getSourceFiles(),k(e),t)},getOccurrencesAtPosition:function(e,t){var n,o=function(e){if(e){for(var t=[],n=0,o=e;n<o.length;n++)for(var r=o[n],i=0,a=r.highlightSpans;i<a.length;i++){var s=a[i];t.push({fileName:r.fileName,textSpan:s.textSpan,isWriteAccess:"writtenReference"===s.kind,isDefinition:!1,isInString:s.isInString})}return t}}(i(n=e,t,[n]));if(o){var r=b(E.normalizeSlashes(e));o=E.filter(o,function(e){return b(E.normalizeSlashes(e.fileName))===r})}return o},getDocumentHighlights:i,getNameOrDottedNameSpan:function(e,t,n){var o=_.getCurrentSourceFile(e),r=E.getTouchingPropertyName(o,t,!1);if(r!==o){switch(r.kind){case 179:case 143:case 9:case 86:case 101:case 95:case 97:case 99:case 169:case 71:break;default:return}for(var i=r;;)if(E.isRightSideOfPropertyAccess(i)||E.isRightSideOfQualifiedName(i))i=i.parent;else{if(!E.isNameOfModuleDeclaration(i))break;if(233!==i.parent.parent.kind||i.parent.parent.body!==i.parent)break;i=i.parent.parent.name}return E.createTextSpanFromBounds(i.getStart(),r.getEnd())}},getBreakpointStatementAtPosition:function(e,t){var n=_.getCurrentSourceFile(e);return E.BreakpointResolver.spanInSourceFileAtLocation(n,t)},getNavigateToItems:function(e,t,n,o){T();var r=n?[k(n)]:p.getSourceFiles();return E.NavigateTo.getNavigateToItems(r,p.getTypeChecker(),m,e,t,o)},getRenameInfo:function(e,t){T();var n=u.getDefaultLibFileName(u.getCompilationSettings());return E.Rename.getRenameInfo(p.getTypeChecker(),n,b,k(e),t)},findRenameLocations:function(e,t,n,o){return a(e,t,{findInStrings:n,findInComments:o,isForRename:!0})},getNavigationBarItems:function(e){return E.NavigationBar.getNavigationBarItems(_.getCurrentSourceFile(e),m)},getNavigationTree:function(e){return E.NavigationBar.getNavigationTree(_.getCurrentSourceFile(e),m)},getOutliningSpans:function(e){var t=_.getCurrentSourceFile(e);return E.OutliningElementsCollector.collectElements(t,m)},getTodoComments:function(e,t){T();var n=k(e);m.throwIfCancellationRequested();var o,r,i,a,s=n.text,l=[];if(0<t.length&&(a=n.fileName,!E.stringContains(a,"/node_modules/")))for(var c=(r="("+/(?:^(?:\s|\*)*)/.source+"|"+/(?:\/\/+\s*)/.source+"|"+/(?:\/\*+\s*)/.source+")",i="(?:"+E.map(t,function(e){return"("+e.text.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+")"}).join("|")+")",new RegExp(r+"("+i+/(?:.*?)/.source+")"+/(?:$|\*\/)/.source,"gim")),u=void 0;u=c.exec(s);){m.throwIfCancellationRequested(),E.Debug.assert(u.length===t.length+3);var g=u[1],p=u.index+g.length;if(E.isInComment(n,p)){for(var d=void 0,_=0;_<t.length;_++)u[_+3]&&(d=t[_]);if(E.Debug.assert(void 0!==d),!(97<=(o=s.charCodeAt(p+d.text.length))&&o<=122||65<=o&&o<=90||48<=o&&o<=57)){var f=u[2];l.push({descriptor:d,message:f,position:p})}}}return l},getBraceMatchingAtPosition:function(e,t){var n=_.getCurrentSourceFile(e),o=[],r=E.getTouchingToken(n,t,!1);if(r.getStart(n)===t){var i=function(e){switch(e.kind){case 17:return 18;case 19:return 20;case 21:return 22;case 27:return 29;case 18:return 17;case 20:return 19;case 22:return 21;case 29:return 27}}(r);if(i)for(var a=0,s=r.parent.getChildren(n);a<s.length;a++){var l=s[a];if(l.kind===i){var c=E.createTextSpan(r.getStart(n),r.getWidth(n)),u=E.createTextSpan(l.getStart(n),l.getWidth(n));c.start<u.start?o.push(c,u):o.push(u,c);break}}}return o},getIndentationAtPosition:function(e,t,n){var o=E.timestamp(),r=S(n),i=_.getCurrentSourceFile(e);v("getIndentationAtPosition: getCurrentSourceFile: "+(E.timestamp()-o)),o=E.timestamp();var a=E.formatting.SmartIndenter.getIndentation(t,i,r);return v("getIndentationAtPosition: computeIndentation  : "+(E.timestamp()-o)),a},getFormattingEditsForRange:function(e,t,n,o){var r=_.getCurrentSourceFile(e),i=S(o);return E.formatting.formatSelection(t,n,r,c(i),i)},getFormattingEditsForDocument:function(e,t){var n=_.getCurrentSourceFile(e),o=S(t);return E.formatting.formatDocument(n,c(o),o)},getFormattingEditsAfterKeystroke:function(e,t,n,o){var r=_.getCurrentSourceFile(e),i=S(o);if(!E.isInComment(r,t)){if("{"===n)return E.formatting.formatOnOpeningCurly(t,r,c(i),i);if("}"===n)return E.formatting.formatOnClosingCurly(t,r,c(i),i);if(";"===n)return E.formatting.formatOnSemicolon(t,r,c(i),i);if("\n"===n)return E.formatting.formatOnEnter(t,r,c(i),i)}return[]},getDocCommentTemplateAtPosition:function(e,t){return E.JsDoc.getDocCommentTemplateAtPosition(E.getNewLineOrDefaultFromHost(u),_.getCurrentSourceFile(e),t)},isValidBraceCompletionAtPosition:function(e,t,n){if(60===n)return!1;var o=_.getCurrentSourceFile(e);if(E.isInString(o,t))return!1;if(E.isInsideJsxElementOrAttribute(o,t))return 123===n;if(E.isInTemplateString(o,t))return!1;switch(n){case 39:case 34:case 96:return!E.isInComment(o,t)}return!0},getSpanOfEnclosingComment:function(e,t,n){var o=_.getCurrentSourceFile(e),r=E.formatting.getRangeOfEnclosingComment(o,t,n);return r&&E.createTextSpanFromRange(r)},getCodeFixesAtPosition:function(e,t,n,o,r){T();var i=k(e),a=E.createTextSpanFromBounds(t,n),s=E.getNewLineOrDefaultFromHost(u),l=c(r);return E.flatMap(E.deduplicate(o),function(e){return m.throwIfCancellationRequested(),E.codefix.getFixes({errorCode:e,sourceFile:i,span:a,program:p,newLineCharacter:s,host:u,cancellationToken:m,rulesProvider:l})})},applyCodeActionCommand:function(e,t){switch(e=E.toPath(e,y,b),t.type){case"install package":return u.installPackage?u.installPackage({fileName:e,packageName:t.packageName}):Promise.reject("Host does not implement `installPackage`");default:E.Debug.fail()}},getEmitOutput:function(e,t){T();var n=k(e),o=u.getCustomTransformers&&u.getCustomTransformers();return E.getFileEmitOutput(p,n,t,m,o)},getNonBoundSourceFile:t,getSourceFile:function(e){return t(e)},getProgram:r,getApplicableRefactors:function(e,t){T();var n=k(e);return E.refactor.getApplicableRefactors(s(n,t))},getEditsForRefactor:function(e,t,n,o,r){T();var i=k(e);return E.refactor.getEditsForRefactor(s(i,n,t),o,r)}}},E.getNameTable=function(e){var t,l;return e.nameTable||(l=(t=e).nameTable=E.createUnderscoreEscapedMap(),t.forEachChild(function e(t){if(E.isIdentifier(t)&&t.escapedText||E.isStringOrNumericLiteral(t)&&(o=t,E.isDeclarationName(o)||248===o.parent.kind||(r=o)&&r.parent&&180===r.parent.kind&&r.parent.argumentExpression===r||E.isLiteralComputedPropertyDeclarationName(o))){var n=E.getEscapedTextOfIdentifierOrLiteral(t);l.set(n,void 0===l.get(n)?t.pos:-1)}var o,r;if(E.forEachChild(t,e),E.hasJSDocNodes(t))for(var i=0,a=t.jsDoc;i<a.length;i++){var s=a[i];E.forEachChild(s,e)}})),e.nameTable},E.getContainingObjectLiteralElement=function(e){switch(e.kind){case 9:case 8:if(144===e.parent.kind)return m(e.parent.parent)?e.parent.parent:void 0;case 71:return!m(e.parent)||178!==e.parent.parent.kind&&254!==e.parent.parent.kind||e.parent.name!==e?void 0:e.parent}},E.getPropertySymbolsFromContextualType=function(e,t){var n=t.parent;return y(e.getContextualType(n),t.name)},E.getPropertySymbolsFromType=y,E.getDefaultLibFilePath=function(e){if("undefined"!=typeof __dirname)return __dirname+E.directorySeparator+E.getDefaultLibFileName(e);throw new Error("getDefaultLibFilePath is only supported when consumed as a node module. ")},E.objectAllocator={getNodeConstructor:function(){return i},getTokenConstructor:function(){return s},getIdentifierConstructor:function(){return l},getSourceFileConstructor:function(){return c},getSymbolConstructor:function(){return t},getTypeConstructor:function(){return n},getSignatureConstructor:function(){return r},getSourceMapSourceConstructor:function(){return u}}}(ts||(ts={})),function(x){(x.BreakpointResolver||(x.BreakpointResolver={})).spanInSourceFileAtLocation=function(v,e){if(!v.isDeclarationFile){var t=x.getTokenAtPosition(v,e,!1),n=v.getLineAndCharacterOfPosition(e).line;if((!(v.getLineAndCharacterOfPosition(t.getStart(v)).line>n)||(t=x.findPrecedingToken(t.pos,v))&&v.getLineAndCharacterOfPosition(t.getEnd()).line===n)&&!x.isInAmbientContext(t))return C(t)}function b(e,t){var n=e.decorators?x.skipTrivia(v.text,e.decorators.end):e.getStart(v);return x.createTextSpanFromBounds(n,(t||e).getEnd())}function k(e,t){return b(e,x.findNextToken(t,t.parent))}function T(e,t){return e&&n===v.getLineAndCharacterOfPosition(e.getStart(v)).line?C(e):C(t)}function E(e){return C(x.findPrecedingToken(e.pos,v))}function S(e){return C(x.findNextToken(e,e.parent))}function C(e){if(e)switch(e.kind){case 208:return d(e.declarationList.declarations[0]);case 226:case 149:case 148:return d(e);case 146:return function e(t){if(x.isBindingPattern(t.name))return m(t.name);if((n=t).initializer||void 0!==n.dotDotDotToken||x.hasModifier(n,12))return b(t);var n,o=t.parent,r=x.indexOf(o.parameters,t);return r?e(o.parameters[r-1]):C(o.body)}(e);case 228:case 151:case 150:case 153:case 154:case 152:case 186:case 187:return function(e){if(e.body)return _(e)?b(e):C(e.body)}(e);case 207:if(x.isFunctionBlock(e))return u=(c=e).statements.length?c.statements[0]:c.getLastToken(),_(c.parent)?T(c.parent,u):C(u);case 234:return f(e);case 260:return f(e.block);case 210:return b(e.expression);case 219:return b(e.getChildAt(0),e.expression);case 213:return k(e,e.expression);case 212:return C(e.statement);case 225:return b(e.getChildAt(0));case 211:return k(e,e.expression);case 222:return C(e.statement);case 218:case 217:return b(e.getChildAt(0),e.label);case 214:return(l=e).initializer?h(l):l.condition?b(l.condition):l.incrementor?b(l.incrementor):void 0;case 215:return k(e,e.expression);case 216:return h(e);case 221:return k(e,e.expression);case 257:case 258:return C(e.statements[0]);case 224:return f(e.tryBlock);case 223:case 243:return b(e,e.expression);case 237:return b(e,e.moduleReference);case 238:case 244:return b(e,e.moduleSpecifier);case 233:if(1!==x.getModuleInstanceState(e))return;case 229:case 232:case 264:case 176:return b(e);case 220:return C(e.statement);case 147:return g=e.parent.decorators,x.createTextSpanFromBounds(x.skipTrivia(v.text,g.pos),g.end);case 174:case 175:return m(e);case 230:case 231:return;case 25:case 1:return T(x.findPrecedingToken(e.pos,v));case 26:return E(e);case 17:return function(e){switch(e.parent.kind){case 232:var t=e.parent;return T(x.findPrecedingToken(e.pos,v,e.parent),t.members.length?t.members[0]:t.getLastToken(v));case 229:var n=e.parent;return T(x.findPrecedingToken(e.pos,v,e.parent),n.members.length?n.members[0]:n.getLastToken(v));case 235:return T(e.parent.parent,e.parent.clauses[0])}return C(e.parent)}(e);case 18:return function(e){switch(e.parent.kind){case 234:if(1!==x.getModuleInstanceState(e.parent.parent))return;case 232:case 229:return b(e);case 207:if(x.isFunctionBlock(e.parent))return b(e);case 260:return C(x.lastOrUndefined(e.parent.statements));case 235:var t=e.parent,n=x.lastOrUndefined(t.clauses);return n?C(x.lastOrUndefined(n.statements)):void 0;case 174:var o=e.parent;return C(x.lastOrUndefined(o.elements)||o);default:if(x.isArrayLiteralOrObjectLiteralDestructuringPattern(e.parent)){var r=e.parent;return b(x.lastOrUndefined(r.properties)||r)}return C(e.parent)}}(e);case 22:return function(e){switch(e.parent.kind){case 175:var t=e.parent;return b(x.lastOrUndefined(t.elements)||t);default:if(x.isArrayLiteralOrObjectLiteralDestructuringPattern(e.parent)){var n=e.parent;return b(x.lastOrUndefined(n.elements)||n)}return C(e.parent)}}(e);case 19:return 212===(s=e).parent.kind||181===s.parent.kind||182===s.parent.kind?E(s):185===s.parent.kind?S(s):C(s.parent);case 20:return function(e){switch(e.parent.kind){case 186:case 228:case 187:case 151:case 150:case 153:case 154:case 152:case 213:case 212:case 214:case 216:case 181:case 182:case 185:return E(e);default:return C(e.parent)}}(e);case 56:return a=e,x.isFunctionLike(a.parent)||261===a.parent.kind||146===a.parent.kind?E(a):C(a.parent);case 29:case 27:return 184===(i=e).parent.kind?S(i):C(i.parent);case 106:return 212===(r=e).parent.kind?k(r,r.parent.expression):C(r.parent);case 82:case 74:case 87:return S(e);case 142:return 216===(o=e).parent.kind?S(o):C(o.parent);default:if(x.isArrayLiteralOrObjectLiteralDestructuringPattern(e))return y(e);if((71===e.kind||198===e.kind||261===e.kind||262===e.kind)&&x.isArrayLiteralOrObjectLiteralDestructuringPattern(e.parent))return b(e);if(194===e.kind){var t=e;if(x.isArrayLiteralOrObjectLiteralDestructuringPattern(t.left))return y(t.left);if(58===t.operatorToken.kind&&x.isArrayLiteralOrObjectLiteralDestructuringPattern(t.parent))return b(e);if(26===t.operatorToken.kind)return C(t.left)}if(x.isPartOfExpression(e))switch(e.parent.kind){case 212:return E(e);case 147:return C(e.parent);case 214:case 216:return b(e);case 194:if(26===e.parent.operatorToken.kind)return b(e);break;case 187:if(e.parent.body===e)return b(e)}if(261===e.parent.kind&&e.parent.name===e&&!x.isArrayLiteralOrObjectLiteralDestructuringPattern(e.parent.parent))return C(e.parent.initializer);if(184===e.parent.kind&&e.parent.type===e)return S(e.parent.type);if(x.isFunctionLike(e.parent)&&e.parent.type===e)return E(e);if(226===e.parent.kind||146===e.parent.kind){var n=e.parent;if(n.initializer===e||n.type===e||x.isAssignmentOperator(e.kind))return E(e)}return 194!==e.parent.kind||(t=e.parent,!x.isArrayLiteralOrObjectLiteralDestructuringPattern(t.left)||t.right!==e&&t.operatorToken!==e)?C(e.parent):E(e)}var o,r,i,a,s,l,c,u,g;function p(e){return 227===e.parent.kind&&e.parent.declarations[0]===e?b(x.findPrecedingToken(e.pos,v,e.parent),e):b(e)}function d(e){return 215===e.parent.parent.kind?C(e.parent.parent):x.isBindingPattern(e.name)?m(e.name):e.initializer||x.hasModifier(e,1)||216===e.parent.parent.kind?p(e):227===e.parent.kind&&e.parent.declarations[0]!==e?C(x.findPrecedingToken(e.pos,v,e.parent)):void 0}function _(e){return x.hasModifier(e,1)||229===e.parent.kind&&152!==e.kind}function f(e){switch(e.parent.kind){case 233:if(1!==x.getModuleInstanceState(e.parent))return;case 213:case 211:case 215:return T(e.parent,e.statements[0]);case 214:case 216:return T(x.findPrecedingToken(e.pos,v,e.parent),e.statements[0])}return C(e.statements[0])}function h(e){if(227!==e.initializer.kind)return C(e.initializer);var t=e.initializer;return 0<t.declarations.length?C(t.declarations[0]):void 0}function m(e){var t=x.forEach(e.elements,function(e){return 200!==e.kind?e:void 0});return t?C(t):176===e.parent.kind?b(e.parent):p(e.parent)}function y(e){x.Debug.assert(175!==e.kind&&174!==e.kind);var t=177===e.kind?e.elements:e.properties,n=x.forEach(t,function(e){return 200!==e.kind?e:void 0});return n?C(n):b(194===e.parent.kind?e.parent:e)}}}}(ts||(ts={})),function(a){a.transform=function(e,t,n){var o=[];n=a.fixupCompilerOptions(n,o);var r=a.isArray(e)?e:[e],i=a.transformNodes(void 0,void 0,n,r,t,!0);return i.diagnostics=a.concatenate(i.diagnostics,o),i}}(ts||(ts={}));var debugObjectHost=function(){return this}(),ts,TypeScript;!function(l){function a(e,t){e&&e.log("*INTERNAL ERROR* - Exception in typescript services: "+t.message)}var n=function(){function e(e){this.scriptSnapshotShim=e}return e.prototype.getText=function(e,t){return this.scriptSnapshotShim.getText(e,t)},e.prototype.getLength=function(){return this.scriptSnapshotShim.getLength()},e.prototype.getChangeRange=function(e){var t=e,n=this.scriptSnapshotShim.getChangeRange(t.scriptSnapshotShim);if(null===n)return null;var o=JSON.parse(n);return l.createTextChangeRange(l.createTextSpan(o.span.start,o.span.length),o.newLength)},e.prototype.dispose=function(){"dispose"in this.scriptSnapshotShim&&this.scriptSnapshotShim.dispose()},e}(),o=function(){function e(e){var o=this;this.shimHost=e,this.loggingEnabled=!1,this.tracingEnabled=!1,"getModuleResolutionsForFile"in this.shimHost&&(this.resolveModuleNames=function(e,t){var n=JSON.parse(o.shimHost.getModuleResolutionsForFile(t));return l.map(e,function(e){var t=l.getProperty(n,e);return t?{resolvedFileName:t,extension:l.extensionFromPath(t),isExternalLibraryImport:!1}:void 0})}),"directoryExists"in this.shimHost&&(this.directoryExists=function(e){return o.shimHost.directoryExists(e)}),"getTypeReferenceDirectiveResolutionsForFile"in this.shimHost&&(this.resolveTypeReferenceDirectives=function(e,t){var n=JSON.parse(o.shimHost.getTypeReferenceDirectiveResolutionsForFile(t));return l.map(e,function(e){return l.getProperty(n,e)})})}return e.prototype.log=function(e){this.loggingEnabled&&this.shimHost.log(e)},e.prototype.trace=function(e){this.tracingEnabled&&this.shimHost.trace(e)},e.prototype.error=function(e){this.shimHost.error(e)},e.prototype.getProjectVersion=function(){if(this.shimHost.getProjectVersion)return this.shimHost.getProjectVersion()},e.prototype.getTypeRootsVersion=function(){return this.shimHost.getTypeRootsVersion?this.shimHost.getTypeRootsVersion():0},e.prototype.useCaseSensitiveFileNames=function(){return!!this.shimHost.useCaseSensitiveFileNames&&this.shimHost.useCaseSensitiveFileNames()},e.prototype.getCompilationSettings=function(){var e=this.shimHost.getCompilationSettings();if(null===e||""===e)throw Error("LanguageServiceShimHostAdapter.getCompilationSettings: empty compilationSettings");var t=JSON.parse(e);return t.allowNonTsExtensions=!0,t},e.prototype.getScriptFileNames=function(){var e=this.shimHost.getScriptFileNames();return this.files=JSON.parse(e)},e.prototype.getScriptSnapshot=function(e){var t=this.shimHost.getScriptSnapshot(e);return t&&new n(t)},e.prototype.getScriptKind=function(e){return"getScriptKind"in this.shimHost?this.shimHost.getScriptKind(e):0},e.prototype.getScriptVersion=function(e){return this.shimHost.getScriptVersion(e)},e.prototype.getLocalizedDiagnosticMessages=function(){var e=this.shimHost.getLocalizedDiagnosticMessages();if(null===e||""===e)return null;try{return JSON.parse(e)}catch(e){return this.log(e.description||"diagnosticMessages.generated.json has invalid JSON format"),null}},e.prototype.getCancellationToken=function(){var e=this.shimHost.getCancellationToken();return new l.ThrottledCancellationToken(e)},e.prototype.getCurrentDirectory=function(){return this.shimHost.getCurrentDirectory()},e.prototype.getDirectories=function(e){return JSON.parse(this.shimHost.getDirectories(e))},e.prototype.getDefaultLibFileName=function(e){return this.shimHost.getDefaultLibFileName(JSON.stringify(e))},e.prototype.readDirectory=function(e,t,n,o,r){var i=l.getFileMatcherPatterns(e,n,o,this.shimHost.useCaseSensitiveFileNames(),this.shimHost.getCurrentDirectory());return JSON.parse(this.shimHost.readDirectory(e,JSON.stringify(t),JSON.stringify(i.basePaths),i.excludePattern,i.includeFilePattern,i.includeDirectoryPattern,r))},e.prototype.readFile=function(e,t){return this.shimHost.readFile(e,t)},e.prototype.fileExists=function(e){return this.shimHost.fileExists(e)},e}();l.LanguageServiceShimHostAdapter=o;var r=function(){function e(e){var t=this;this.shimHost=e,this.useCaseSensitiveFileNames=!!this.shimHost.useCaseSensitiveFileNames&&this.shimHost.useCaseSensitiveFileNames(),"directoryExists"in this.shimHost&&(this.directoryExists=function(e){return t.shimHost.directoryExists(e)}),"realpath"in this.shimHost&&(this.realpath=function(e){return t.shimHost.realpath(e)})}return e.prototype.readDirectory=function(e,t,n,o,r){var i=l.getFileMatcherPatterns(e,n,o,this.shimHost.useCaseSensitiveFileNames(),this.shimHost.getCurrentDirectory());return JSON.parse(this.shimHost.readDirectory(e,JSON.stringify(t),JSON.stringify(i.basePaths),i.excludePattern,i.includeFilePattern,i.includeDirectoryPattern,r))},e.prototype.fileExists=function(e){return this.shimHost.fileExists(e)},e.prototype.readFile=function(e){return this.shimHost.readFile(e)},e.prototype.getDirectories=function(e){return JSON.parse(this.shimHost.getDirectories(e))},e}();function i(e,t,n,o){return s(e,t,!0,n,o)}function s(t,n,e,o,r){try{var i=function(e,t,n,o){var r;o&&(e.log(t),r=l.timestamp());var i=n();if(o){var a=l.timestamp();if(e.log(t+" completed in "+(a-r)+" msec"),l.isString(i)){var s=i;128<s.length&&(s=s.substring(0,128)+"..."),e.log("  result.length="+s.length+", result='"+JSON.stringify(s)+"'")}}return i}(t,n,o,r);return e?JSON.stringify({result:i}):i}catch(e){return e instanceof l.OperationCanceledException?JSON.stringify({canceled:!0}):(a(t,e),e.description=n,JSON.stringify({error:e}))}}l.CoreServicesShimHostAdapter=r;var e=function(){function e(e){(this.factory=e).registerShim(this)}return e.prototype.dispose=function(e){this.factory.unregisterShim(this)},e}();function c(e,o){return e.map(function(e){return t=e,n=o,{message:l.flattenDiagnosticMessageText(t.messageText,n),start:t.start,length:t.length,category:l.DiagnosticCategory[t.category].toLowerCase(),code:t.code};var t,n})}l.realizeDiagnostics=c;var u=function(r){function e(e,t,n){var o=r.call(this,e)||this;return o.host=t,o.languageService=n,o.logPerformance=!1,o.logger=o.host,o}return __extends(e,r),e.prototype.forwardJSONCall=function(e,t){return i(this.logger,e,t,this.logPerformance)},e.prototype.dispose=function(e){this.logger.log("dispose()"),this.languageService.dispose(),this.languageService=null,debugObjectHost&&debugObjectHost.CollectGarbage&&(debugObjectHost.CollectGarbage(),this.logger.log("CollectGarbage()")),this.logger=null,r.prototype.dispose.call(this,e)},e.prototype.refresh=function(e){this.forwardJSONCall("refresh("+e+")",function(){return null})},e.prototype.cleanupSemanticCache=function(){var e=this;this.forwardJSONCall("cleanupSemanticCache()",function(){return e.languageService.cleanupSemanticCache(),null})},e.prototype.realizeDiagnostics=function(e){var t=l.getNewLineOrDefaultFromHost(this.host);return l.realizeDiagnostics(e,t)},e.prototype.getSyntacticClassifications=function(e,t,n){var o=this;return this.forwardJSONCall("getSyntacticClassifications('"+e+"', "+t+", "+n+")",function(){return o.languageService.getSyntacticClassifications(e,l.createTextSpan(t,n))})},e.prototype.getSemanticClassifications=function(e,t,n){var o=this;return this.forwardJSONCall("getSemanticClassifications('"+e+"', "+t+", "+n+")",function(){return o.languageService.getSemanticClassifications(e,l.createTextSpan(t,n))})},e.prototype.getEncodedSyntacticClassifications=function(e,t,n){var o=this;return this.forwardJSONCall("getEncodedSyntacticClassifications('"+e+"', "+t+", "+n+")",function(){return g(o.languageService.getEncodedSyntacticClassifications(e,l.createTextSpan(t,n)))})},e.prototype.getEncodedSemanticClassifications=function(e,t,n){var o=this;return this.forwardJSONCall("getEncodedSemanticClassifications('"+e+"', "+t+", "+n+")",function(){return g(o.languageService.getEncodedSemanticClassifications(e,l.createTextSpan(t,n)))})},e.prototype.getSyntacticDiagnostics=function(t){var n=this;return this.forwardJSONCall("getSyntacticDiagnostics('"+t+"')",function(){var e=n.languageService.getSyntacticDiagnostics(t);return n.realizeDiagnostics(e)})},e.prototype.getSemanticDiagnostics=function(t){var n=this;return this.forwardJSONCall("getSemanticDiagnostics('"+t+"')",function(){var e=n.languageService.getSemanticDiagnostics(t);return n.realizeDiagnostics(e)})},e.prototype.getCompilerOptionsDiagnostics=function(){var t=this;return this.forwardJSONCall("getCompilerOptionsDiagnostics()",function(){var e=t.languageService.getCompilerOptionsDiagnostics();return t.realizeDiagnostics(e)})},e.prototype.getQuickInfoAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getQuickInfoAtPosition('"+e+"', "+t+")",function(){return n.languageService.getQuickInfoAtPosition(e,t)})},e.prototype.getNameOrDottedNameSpan=function(e,t,n){var o=this;return this.forwardJSONCall("getNameOrDottedNameSpan('"+e+"', "+t+", "+n+")",function(){return o.languageService.getNameOrDottedNameSpan(e,t,n)})},e.prototype.getBreakpointStatementAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getBreakpointStatementAtPosition('"+e+"', "+t+")",function(){return n.languageService.getBreakpointStatementAtPosition(e,t)})},e.prototype.getSignatureHelpItems=function(e,t){var n=this;return this.forwardJSONCall("getSignatureHelpItems('"+e+"', "+t+")",function(){return n.languageService.getSignatureHelpItems(e,t)})},e.prototype.getDefinitionAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getDefinitionAtPosition('"+e+"', "+t+")",function(){return n.languageService.getDefinitionAtPosition(e,t)})},e.prototype.getTypeDefinitionAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getTypeDefinitionAtPosition('"+e+"', "+t+")",function(){return n.languageService.getTypeDefinitionAtPosition(e,t)})},e.prototype.getImplementationAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getImplementationAtPosition('"+e+"', "+t+")",function(){return n.languageService.getImplementationAtPosition(e,t)})},e.prototype.getRenameInfo=function(e,t){var n=this;return this.forwardJSONCall("getRenameInfo('"+e+"', "+t+")",function(){return n.languageService.getRenameInfo(e,t)})},e.prototype.findRenameLocations=function(e,t,n,o){var r=this;return this.forwardJSONCall("findRenameLocations('"+e+"', "+t+", "+n+", "+o+")",function(){return r.languageService.findRenameLocations(e,t,n,o)})},e.prototype.getBraceMatchingAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getBraceMatchingAtPosition('"+e+"', "+t+")",function(){return n.languageService.getBraceMatchingAtPosition(e,t)})},e.prototype.isValidBraceCompletionAtPosition=function(e,t,n){var o=this;return this.forwardJSONCall("isValidBraceCompletionAtPosition('"+e+"', "+t+", "+n+")",function(){return o.languageService.isValidBraceCompletionAtPosition(e,t,n)})},e.prototype.getSpanOfEnclosingComment=function(e,t,n){var o=this;return this.forwardJSONCall("getSpanOfEnclosingComment('"+e+"', "+t+")",function(){return o.languageService.getSpanOfEnclosingComment(e,t,n)})},e.prototype.getIndentationAtPosition=function(t,n,o){var r=this;return this.forwardJSONCall("getIndentationAtPosition('"+t+"', "+n+")",function(){var e=JSON.parse(o);return r.languageService.getIndentationAtPosition(t,n,e)})},e.prototype.getReferencesAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getReferencesAtPosition('"+e+"', "+t+")",function(){return n.languageService.getReferencesAtPosition(e,t)})},e.prototype.findReferences=function(e,t){var n=this;return this.forwardJSONCall("findReferences('"+e+"', "+t+")",function(){return n.languageService.findReferences(e,t)})},e.prototype.getOccurrencesAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getOccurrencesAtPosition('"+e+"', "+t+")",function(){return n.languageService.getOccurrencesAtPosition(e,t)})},e.prototype.getDocumentHighlights=function(n,o,r){var i=this;return this.forwardJSONCall("getDocumentHighlights('"+n+"', "+o+")",function(){var e=i.languageService.getDocumentHighlights(n,o,JSON.parse(r)),t=l.normalizeSlashes(n).toLowerCase();return l.filter(e,function(e){return l.normalizeSlashes(e.fileName).toLowerCase()===t})})},e.prototype.getCompletionsAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getCompletionsAtPosition('"+e+"', "+t+")",function(){return n.languageService.getCompletionsAtPosition(e,t)})},e.prototype.getCompletionEntryDetails=function(t,n,o,r,i){var a=this;return this.forwardJSONCall("getCompletionEntryDetails('"+t+"', "+n+", '"+o+"')",function(){var e=JSON.parse(r);return a.languageService.getCompletionEntryDetails(t,n,o,e,i)})},e.prototype.getFormattingEditsForRange=function(t,n,o,r){var i=this;return this.forwardJSONCall("getFormattingEditsForRange('"+t+"', "+n+", "+o+")",function(){var e=JSON.parse(r);return i.languageService.getFormattingEditsForRange(t,n,o,e)})},e.prototype.getFormattingEditsForDocument=function(t,n){var o=this;return this.forwardJSONCall("getFormattingEditsForDocument('"+t+"')",function(){var e=JSON.parse(n);return o.languageService.getFormattingEditsForDocument(t,e)})},e.prototype.getFormattingEditsAfterKeystroke=function(t,n,o,r){var i=this;return this.forwardJSONCall("getFormattingEditsAfterKeystroke('"+t+"', "+n+", '"+o+"')",function(){var e=JSON.parse(r);return i.languageService.getFormattingEditsAfterKeystroke(t,n,o,e)})},e.prototype.getDocCommentTemplateAtPosition=function(e,t){var n=this;return this.forwardJSONCall("getDocCommentTemplateAtPosition('"+e+"', "+t+")",function(){return n.languageService.getDocCommentTemplateAtPosition(e,t)})},e.prototype.getNavigateToItems=function(e,t,n){var o=this;return this.forwardJSONCall("getNavigateToItems('"+e+"', "+t+", "+n+")",function(){return o.languageService.getNavigateToItems(e,t,n)})},e.prototype.getNavigationBarItems=function(e){var t=this;return this.forwardJSONCall("getNavigationBarItems('"+e+"')",function(){return t.languageService.getNavigationBarItems(e)})},e.prototype.getNavigationTree=function(e){var t=this;return this.forwardJSONCall("getNavigationTree('"+e+"')",function(){return t.languageService.getNavigationTree(e)})},e.prototype.getOutliningSpans=function(e){var t=this;return this.forwardJSONCall("getOutliningSpans('"+e+"')",function(){return t.languageService.getOutliningSpans(e)})},e.prototype.getTodoComments=function(e,t){var n=this;return this.forwardJSONCall("getTodoComments('"+e+"')",function(){return n.languageService.getTodoComments(e,JSON.parse(t))})},e.prototype.getEmitOutput=function(e){var t=this;return this.forwardJSONCall("getEmitOutput('"+e+"')",function(){return t.languageService.getEmitOutput(e)})},e.prototype.getEmitOutputObject=function(e){var t=this;return s(this.logger,"getEmitOutput('"+e+"')",!1,function(){return t.languageService.getEmitOutput(e)},this.logPerformance)},e}(e);function g(e){return{spans:e.spans.join(","),endOfLineState:e.endOfLineState}}var p=function(o){function e(e,t){var n=o.call(this,e)||this;return n.logger=t,n.logPerformance=!1,n.classifier=l.createClassifier(),n}return __extends(e,o),e.prototype.getEncodedLexicalClassifications=function(e,t,n){var o=this;return i(this.logger,"getEncodedLexicalClassifications",function(){return g(o.classifier.getEncodedLexicalClassifications(e,t,n))},this.logPerformance)},e.prototype.getClassificationsForLine=function(e,t,n){for(var o=this.classifier.getClassificationsForLine(e,t,n),r="",i=0,a=o.entries;i<a.length;i++){var s=a[i];r+=s.length+"\n",r+=s.classification+"\n"}return r+=o.finalLexState},e}(e),d=function(r){function e(e,t,n){var o=r.call(this,e)||this;return o.logger=t,o.host=n,o.logPerformance=!1,o}return __extends(e,r),e.prototype.forwardJSONCall=function(e,t){return i(this.logger,e,t,this.logPerformance)},e.prototype.resolveModuleName=function(o,r,i){var a=this;return this.forwardJSONCall("resolveModuleName('"+o+"')",function(){var e=JSON.parse(i),t=l.resolveModuleName(r,l.normalizeSlashes(o),e,a.host),n=t.resolvedModule?t.resolvedModule.resolvedFileName:void 0;return t.resolvedModule&&".ts"!==t.resolvedModule.extension&&".tsx"!==t.resolvedModule.extension&&".d.ts"!==t.resolvedModule.extension&&(n=void 0),{resolvedFileName:n,failedLookupLocations:t.failedLookupLocations}})},e.prototype.resolveTypeReferenceDirective=function(n,o,r){var i=this;return this.forwardJSONCall("resolveTypeReferenceDirective("+n+")",function(){var e=JSON.parse(r),t=l.resolveTypeReferenceDirective(o,l.normalizeSlashes(n),e,i.host);return{resolvedFileName:t.resolvedTypeReferenceDirective?t.resolvedTypeReferenceDirective.resolvedFileName:void 0,primary:!t.resolvedTypeReferenceDirective||t.resolvedTypeReferenceDirective.primary,failedLookupLocations:t.failedLookupLocations}})},e.prototype.getPreProcessedFileInfo=function(e,t){var n=this;return this.forwardJSONCall("getPreProcessedFileInfo('"+e+"')",function(){var e=l.preProcessFile(t.getText(0,t.getLength()),!0,!0);return{referencedFiles:n.convertFileReferences(e.referencedFiles),importedFiles:n.convertFileReferences(e.importedFiles),ambientExternalModules:e.ambientExternalModules,isLibFile:e.isLibFile,typeReferenceDirectives:n.convertFileReferences(e.typeReferenceDirectives)}})},e.prototype.getAutomaticTypeDirectiveNames=function(t){var n=this;return this.forwardJSONCall("getAutomaticTypeDirectiveNames('"+t+"')",function(){var e=JSON.parse(t);return l.getAutomaticTypeDirectiveNames(e,n.host)})},e.prototype.convertFileReferences=function(e){if(e){for(var t=[],n=0,o=e;n<o.length;n++){var r=o[n];t.push({path:l.normalizeSlashes(r.fileName),position:r.pos,length:r.end-r.pos})}return t}},e.prototype.getTSConfigFileInfo=function(r,i){var a=this;return this.forwardJSONCall("getTSConfigFileInfo('"+r+"')",function(){var e=i.getText(0,i.getLength()),t=l.parseJsonText(r,e),n=l.normalizeSlashes(r),o=l.parseJsonSourceFileConfigFileContent(t,a.host,l.getDirectoryPath(n),{},n);return{options:o.options,typeAcquisition:o.typeAcquisition,files:o.fileNames,raw:o.raw,errors:c(t.parseDiagnostics.concat(o.errors),"\r\n")}})},e.prototype.getDefaultCompilationSettings=function(){return this.forwardJSONCall("getDefaultCompilationSettings()",function(){return l.getDefaultCompilerOptions()})},e.prototype.discoverTypings=function(t){var n=this,o=l.createGetCanonicalFileName(!1);return this.forwardJSONCall("discoverTypings()",function(){var e=JSON.parse(t);return void 0===n.safeList&&(n.safeList=l.JsTyping.loadSafeList(n.host,l.toPath(e.safeListPath,e.safeListPath,o))),l.JsTyping.discoverTypings(n.host,function(e){return n.logger.log(e)},e.fileNames,l.toPath(e.projectRootPath,e.projectRootPath,o),n.safeList,e.packageNameToTypingLocation,e.typeAcquisition,e.unresolvedImports)})},e}(e),t=function(){function e(){this._shims=[]}return e.prototype.getServicesVersion=function(){return l.servicesVersion},e.prototype.createLanguageServiceShim=function(t){try{void 0===this.documentRegistry&&(this.documentRegistry=l.createDocumentRegistry(t.useCaseSensitiveFileNames&&t.useCaseSensitiveFileNames(),t.getCurrentDirectory()));var e=new o(t),n=l.createLanguageService(e,this.documentRegistry);return new u(this,t,n)}catch(e){throw a(t,e),e}},e.prototype.createClassifierShim=function(t){try{return new p(this,t)}catch(e){throw a(t,e),e}},e.prototype.createCoreServicesShim=function(t){try{var e=new r(t);return new d(this,t,e)}catch(e){throw a(t,e),e}},e.prototype.close=function(){l.clear(this._shims),this.documentRegistry=void 0},e.prototype.registerShim=function(e){this._shims.push(e)},e.prototype.unregisterShim=function(e){for(var t=0;t<this._shims.length;t++)if(this._shims[t]===e)return void delete this._shims[t];throw new Error("Invalid operation")},e}();l.TypeScriptServicesFactory=t,"undefined"!=typeof module&&module.exports&&(module.exports=l)}(ts||(ts={})),function(e){(e.Services||(e.Services={})).TypeScriptServicesFactory=ts.TypeScriptServicesFactory}(TypeScript||(TypeScript={}));var toolsVersion="2.6",e=function(){function u(e,t){postMessage({action:Ne,cbn:t,result:e})}function I(e){var t=[];return t[e-1]=void 0,t}function k(e,t){return o(e[0]+t[0],e[1]+t[1])}function a(e,t){return n=~~Math.max(Math.min(e[1]/Oe,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/Oe,2147483647),-2147483648),o=w(e)&w(t),(r=o)<0&&(r+=Oe),[r,n*Oe];var n,o,r}function N(e,t){var n,o;return e[0]==t[0]&&e[1]==t[1]?0:(n=e[1]<0,o=t[1]<0,n&&!o?-1:!n&&o?1:S(e,t)[1]<0?-1:1)}function o(e,t){var n,o;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(n=t%Oe)+(o=Math.floor(e/Oe)*Oe),e=e-o+n;e<0;)e+=Oe,t-=Oe;for(;4294967295<e;)e-=Oe,t+=Oe;for(t%=0x10000000000000000;0x7fffffff00000000<t;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function T(e,t){return e[0]==t[0]&&e[1]==t[1]}function E(e){return 0<=e?[e,0]:[e+Oe,-Oe]}function w(e){return 2147483648<=e[0]?~~Math.max(Math.min(e[0]-Oe,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function s(e){return e<=30?1<<e:s(30)*s(e-30)}function l(e,t){var n,o,r,i;if(t&=63,T(e,Le))return t?Pe:e;if(e[1]<0)throw Error("Neg");return i=s(t),o=e[1]*i%0x10000000000000000,0x8000000000000000<=(o+=n=(r=e[0]*i)-r%Oe)&&(o-=0x10000000000000000),[r-=n,o]}function O(e,t){var n;return n=s(t&=63),o(Math.floor(e[0]/n),e[1]/n)}function S(e,t){return o(e[0]-t[0],e[1]-t[1])}function r(e,t){return e.Mc=t,e.Lc=0,e.Yb=t.length,e}function _(e){return e.Lc>=e.Yb?-1:255&e.Mc[e.Lc++]}function i(e){return e.Mc=I(32),e.Yb=0,e}function g(e){var t=e.Mc;return t.length=e.Yb,t}function R(e,t){e.Mc[e.Yb++]=t<<24>>24}function L(e,t,n,o){c(t,n,e.Mc,e.Yb,o),e.Yb+=o}function c(e,t,n,o,r){for(var i=0;i<r;++i)n[o+i]=e[t+i]}function p(t,n,o,r,i){var a,s,l,c,u,g,p,d,_,f,h,m,y,v,b,k,T,E,S,C,x,A,D,B;if(N(r,Re)<0)throw Error("invalid length "+r);for(t.Tb=r,a=function(e){var t;for(e.v=I(4),e.a=[],e.d={},e.C=I(192),e.bb=I(12),e.hb=I(12),e.Ub=I(12),e.vc=I(12),e._=I(192),e.K=[],e.Sb=I(114),e.S=de({},4),e.$=X({}),e.i=X({}),e.A={},e.m=[],e.P=[],e.lb=[],e.nc=I(16),e.x=I(4),e.Q=I(4),e.Xb=[Pe],e.uc=[Pe],e.Kc=[0],e.fc=I(5),e.yc=I(128),e.vb=0,e.X=1,e.D=0,e.Hb=-1,e.mb=0,t=0;t<4096;++t)e.a[t]={};for(t=0;t<4;++t)e.K[t]=de({},6);return e}({}),p=g=u=void 0,function(e,t){e.ab=t;for(var n=0;1<<n<t;++n);e.$b=2*n}(c=a,1<<(l=i).s),c.n=l.f,u=c,g=l.m,p=u.X,u.X=g,u.b&&p!=u.X&&(u.wb=-1,u.b=null),c.eb=0,c.fb=3,c.Y=2,c.y=3,a.Gc=void 0===e.disableEndMark,function(e,t){e.fc[0]=9*(5*e.Y+e.eb)+e.fb<<24>>24;for(var n=0;n<4;++n)e.fc[1+n]=e.ab>>8*n<<24>>24;L(t,e.fc,0,5)}(a,o),s=0;s<64;s+=8)R(o,255&w(O(r,s)));t.yb=(a.W=0,a.oc=n,a.pc=0,(_=a).b||(f={},h=4,_.X||(h=2),(B=f).qb=2<h,B.qb?(B.w=0,B.xb=4,B.R=66560):(B.w=2,B.xb=3,B.R=0),_.b=f),function(e,t,n){var o,r,i;if(null==e.V||e.u!=n||e.I!=t)for(e.I=t,e.qc=(1<<t)-1,e.u=n,r=1<<e.u+e.I,e.V=I(r),o=0;o<r;++o)e.V[o]=((i={}).tb=I(768),i)}(_.A,_.eb,_.fb),(_.ab!=_.wb||_.Hb!=_.n)&&(m=_.b,y=_.ab,v=4096,b=_.n,k=274,y<1073741567&&(m.Fc=16+(b>>1),x=b+k,A=256+~~(((C=y+v)+b+k)/2),(S=m).Bc=C,S._b=x,D=C+x+A,(null==S.c||S.Kb!=D)&&(S.c=null,S.Kb=D,S.c=I(S.Kb)),S.H=S.Kb-x,m.ob=b,T=y+1,m.p!=T&&(m.L=I(2*(m.p=T))),E=65536,m.qb&&(E=y-1,E|=E>>1,E|=E>>2,E|=E>>4,E|=E>>8,E>>=1,16777216<(E|=65535)&&(E>>=1),m.Ec=E,++E,E+=m.R),E!=m.rc&&(m.ub=I(m.rc=E))),_.wb=_.ab,_.Hb=_.n),a.d.Ab=o,function(e){(function(e){e.l=0;for(var t=e.J=0;t<4;++t)e.v[t]=0})(e),t=e.d,t.mc=Pe,t.xc=Pe,t.E=-1,t.Jb=1,t.Oc=0,ke(e.C),ke(e._),ke(e.bb),ke(e.hb),ke(e.Ub),ke(e.vc),ke(e.Sb),function(e){var t,n=1<<e.u+e.I;for(t=0;t<n;++t)ke(e.V[t].tb)}(e.A);var t;for(var n=0;n<4;++n)ke(e.K[n].G);z(e.$,1<<e.Y),z(e.i,1<<e.Y),ke(e.S.G),e.N=0,e.jb=0,e.q=0,e.s=0}(a),H(a),U(a),a.$.rb=a.n+1-2,J(a.$,1<<a.Y),a.i.rb=a.n+1-2,J(a.i,1<<a.Y),a.g=Pe,(d={}).cb=a,d.Z=null,d.zc=1,d)}function d(e,t,n){return e.Nb=i({}),p(e,r({},t),e.Nb,E(t.length),n),e}function n(e,t,n){var o,r,i,a,s,l,c,u,g,p="",d=[];for(r=0;r<5;++r){if(-1==(i=_(t)))throw Error("truncated input");d[r]=i<<24>>24}if(!function(e,t){var n,o,r,i,a,s,l;if(t.length<5)return 0;for(l=255&t[0],r=l%9,i=(s=~~(l/9))%5,a=~~(s/5),o=n=0;o<4;++o)n+=(255&t[1+o])<<8*o;return 99999999<n||!function(e,t,n,o){if(8<t||4<n||4<o)return 0;!function(e,t,n){var o,r;if(null==e.V||e.u!=n||e.I!=t)for(e.I=t,e.qc=(1<<t)-1,e.u=n,r=1<<e.u+e.I,e.V=I(r),o=0;o<r;++o)e.V[o]=(i={},i.Ib=I(768),i);var i}(e.gb,n,t);var r=1<<o;return B(e.Rb,r),B(e.sb,r),e.Dc=r-1,1}(e,r,i,a)?0:(c=e,u=n,u<0?0:(c.Ob!=u&&(c.Ob=u,c.nb=Math.max(c.Ob,1),g=c.B,p=Math.max(c.nb,4096),(null==g.Lb||g.M!=p)&&(g.Lb=I(p)),g.M=p,g.o=0,g.h=0),1));var c,u,g,p}(o=function(e){e.B={},e.e={},e.Gb=I(192),e.Zb=I(12),e.Cb=I(12),e.Db=I(12),e.Eb=I(12),e.pb=I(192),e.kb=I(4),e.kc=I(114),e.Fb=ge({},4),e.Rb=M({}),e.sb=M({}),e.gb={};for(var t=0;t<4;++t)e.kb[t]=ge({},6);return e}({}),d))throw Error("corrupted input");for(r=0;r<64;r+=8){if(-1==(i=_(t)))throw Error("truncated input");1==(i=i.toString(16)).length&&(i="0"+i),p=i+""+p}/^0+$|^f+$/i.test(p)?e.Tb=Re:(a=parseInt(p,16),e.Tb=4294967295<a?Re:E(a)),e.yb=(s=o,l=t,c=n,u=e.Tb,s.e.Ab=l,v(s.B),s.B.cc=c,function(e){e.B.h=0,e.B.o=0,ke(e.Gb),ke(e.pb),ke(e.Zb),ke(e.Cb),ke(e.Db),ke(e.Eb),ke(e.kc),function(e){var t,n;for(n=1<<e.u+e.I,t=0;t<n;++t)ke(e.V[t].Ib)}(e.gb);for(var t=0;t<4;++t)ke(e.kb[t].G);F(e.Rb),F(e.sb),ke(e.Fb.G),function(e){e.Bb=0,e.E=-1;for(var t=0;t<5;++t)e.Bb=e.Bb<<8|_(e.Ab)}(e.e)}(s),s.U=0,s.ib=0,s.Jc=0,s.Ic=0,s.Qc=0,s.Nc=u,s.g=Pe,s.jc=0,(g={}).Z=s,g.cb=null,g.zc=1,g)}function f(e,t){return e.Nb=i({}),n(e,r({},t),e.Nb),e}function q(e,t){return e.c[e.f+e.o+t]}function Z(e,t,n,o){var r,i;for(e.T&&e.o+t+o>e.h&&(o=e.h-(e.o+t)),++n,i=e.f+e.o+t,r=0;r<o&&e.c[i+r]==e.c[i+r-n];++r);return r}function $(e){return e.h-e.o}function C(e){var t,n,o,r,i,a;if(!e.T)for(;;){if(!(n=-e.f+e.Kb-e.h))return;if(o=e.cc,r=e.c,i=e.f+e.h,a=n,-1==(t=o.Lc>=o.Yb?-1:(a=Math.min(a,o.Yb-o.Lc),c(o.Mc,o.Lc,r,i,a),o.Lc+=a,a)))return e.zb=e.h,e.f+e.zb>e.H&&(e.zb=e.H-e.f),void(e.T=1);e.h+=t,e.h>=e.o+e._b&&(e.zb=e.h-e._b)}}function x(e,t){e.f+=t,e.zb-=t,e.o-=t,e.h-=t}function A(e){var t,n;++e.k>=e.p&&(e.k=0),++(n=e).o,n.o>n.zb&&(n.f+n.o>n.H&&function(e){var t,n,o;for(0<(o=e.f+e.o-e.Bc)&&--o,n=e.f+e.h-o,t=0;t<n;++t)e.c[t]=e.c[o+t];e.f-=o}(n),C(n)),1073741823==e.o&&(t=e.o-e.p,h(e.L,2*e.p,t),h(e.ub,e.rc,t),x(e,t))}function h(e,t,n){var o,r;for(o=0;o<t;++o)(r=e[o]||0)<=n?r=0:r-=n,e[o]=r}function m(e){var t=e.o-e.h;t&&(L(e.cc,e.Lb,e.h,t),e.o>=e.M&&(e.o=0),e.h=e.o)}function y(e,t){var n=e.o-t-1;return n<0&&(n+=e.M),e.Lb[n]}function v(e){m(e),e.cc=null}function D(e){return(e-=2)<4?e:3}function Q(e){return e<4?0:e<10?e-3:e-6}function b(e){if(!e.zc)throw Error("bad state");return e.cb?(function(e,t,n,o){var r,i,a,s,l,c,u,g,p,d,_,f,h,m,y,v,b;if(t[0]=Pe,n[0]=Pe,o[0]=1,e.oc&&(e.b.cc=e.oc,(b=e.b).f=0,b.o=0,b.h=0,b.T=0,C(b),b.k=0,x(b,-1),e.W=1,e.oc=null),!e.pc){if(e.pc=1,m=e.g,T(e.g,Pe)){if(!$(e.b))return G(e,w(e.g));re(e),h=w(e.g)&e.y,Te(e.d,e.C,(e.l<<4)+h,0),e.l=Q(e.l),a=q(e.b,-e.s),se(ae(e.A,w(e.g),e.J),e.d,a),e.J=a,--e.s,e.g=k(e.g,Me)}if(!$(e.b))return G(e,w(e.g));for(;;){if(u=V(e,w(e.g)),d=e.mb,h=w(e.g)&e.y,i=(e.l<<4)+h,1==u&&-1==d)Te(e.d,e.C,i,0),a=q(e.b,-e.s),y=ae(e.A,w(e.g),e.J),e.l<7?se(y,e.d,a):(p=q(e.b,-e.v[0]-1-e.s),le(y,e.d,p,a)),e.J=a,e.l=Q(e.l);else{if(Te(e.d,e.C,i,1),d<4){if(Te(e.d,e.bb,e.l,1),d?(Te(e.d,e.hb,e.l,1),1==d?Te(e.d,e.Ub,e.l,0):(Te(e.d,e.Ub,e.l,1),Te(e.d,e.vc,e.l,d-2))):(Te(e.d,e.hb,e.l,0),Te(e.d,e._,i,1==u?0:1)),1==u?e.l=e.l<7?9:11:(Y(e.i,e.d,u-2,h),e.l=e.l<7?8:11),s=e.v[d],0!=d){for(c=d;1<=c;--c)e.v[c]=e.v[c-1];e.v[0]=s}}else{for(Te(e.d,e.bb,e.l,0),e.l=e.l<7?7:10,Y(e.$,e.d,u-2,h),f=K(d-=4),g=D(u),_e(e.K[g],e.d,f),4<=f&&(_=d-(r=(2|1&f)<<(l=(f>>1)-1)),f<14?ye(e.Sb,r-f-1,e.d,l,_):(Ee(e.d,_>>4,l-4),he(e.S,e.d,15&_),++e.Qb)),s=d,c=3;1<=c;--c)e.v[c]=e.v[c-1];e.v[0]=s,++e.Mb}e.J=q(e.b,u-1-e.s)}if(e.s-=u,e.g=k(e.g,E(u)),!e.s){if(128<=e.Mb&&H(e),16<=e.Qb&&U(e),t[0]=e.g,n[0]=k(k(E((v=e.d).Jb),v.mc),[4,0]),!$(e.b))return G(e,w(e.g));if(0<=N(S(e.g,m),[4096,0]))return e.pc=0,o[0]=0}}}}((t=e).cb,t.cb.Xb,t.cb.uc,t.cb.Kc),t.Pb=t.cb.Xb[0],t.cb.Kc[0]&&(W(n=t.cb),n.d.Ab=null,t.zc=0)):function(e){var t=function(e){var t,n,o,r,i,a;if(a=w(e.g)&e.Dc,be(e.e,e.Gb,(e.U<<4)+a)){if(be(e.e,e.Zb,e.U))o=0,be(e.e,e.Cb,e.U)?(be(e.e,e.Db,e.U)?(be(e.e,e.Eb,e.U)?(n=e.Qc,e.Qc=e.Ic):n=e.Ic,e.Ic=e.Jc):n=e.Jc,e.Jc=e.ib,e.ib=n):be(e.e,e.pb,(e.U<<4)+a)||(e.U=e.U<7?9:11,o=1),o||(o=P(e.sb,e.e,a)+2,e.U=e.U<7?8:11);else if(e.Qc=e.Ic,e.Ic=e.Jc,e.Jc=e.ib,o=2+P(e.Rb,e.e,a),e.U=e.U<7?7:10,4<=(i=pe(e.kb[D(o)],e.e))){if(r=(i>>1)-1,e.ib=(2|1&i)<<r,i<14)e.ib+=function(e,t,n,o){var r,i,a=1,s=0;for(i=0;i<o;++i)r=be(n,e,t+a),a<<=1,a+=r,s|=r<<i;return s}(e.kc,e.ib-i-1,e.e,r);else if(e.ib+=function(e,t){var n,o,r=0;for(n=t;0!=n;--n)e.E>>>=1,o=e.Bb-e.E>>>31,e.Bb-=e.E&o-1,r=r<<1|1-o,-16777216&e.E||(e.Bb=e.Bb<<8|_(e.Ab),e.E<<=8);return r}(e.e,r-4)<<4,e.ib+=function(e,t){var n,o,r=1,i=0;for(o=0;e.F>o;++o)n=be(t,e.G,r),r<<=1,r+=n,i|=n<<o;return i}(e.Fb,e.e),e.ib<0)return-1==e.ib?1:-1}else e.ib=i;if(0<=N(E(e.ib),e.g)||e.ib>=e.nb)return-1;(function(e,t,n){var o=e.o-t-1;for(o<0&&(o+=e.M);0!=n;--n)o>=e.M&&(o=0),e.Lb[e.o++]=e.Lb[o++],e.o>=e.M&&m(e)})(e.B,e.ib,o),e.g=k(e.g,E(o)),e.jc=y(e.B,0)}else c=e.gb,u=w(e.g),g=e.jc,t=c.V[((u&c.qc)<<c.u)+((255&g)>>>8-c.u)],e.jc=e.U<7?function(e,t){var n=1;for(;n=n<<1|be(t,e.Ib,n),n<256;);return n<<24>>24}(t,e.e):function(e,t,n){var o,r,i=1;do{if(r=n>>7&1,n<<=1,o=be(t,e.Ib,(1+r<<8)+i),i=i<<1|o,r!=o){for(;i<256;)i=i<<1|be(t,e.Ib,i);break}}while(i<256);return i<<24>>24}(t,e.e,y(e.B,e.ib)),s=e.B,l=e.jc,s.Lb[s.o++]=l,s.o>=s.M&&m(s),e.U=Q(e.U),e.g=k(e.g,Me);var s,l;var c,u,g;return 0}(e.Z);if(-1==t)throw Error("corrupted input");e.Pb=Re,e.Pc=e.Z.g,(t||0<=N(e.Z.Nc,Pe)&&0<=N(e.Z.g,e.Z.Nc))&&(m(e.Z.B),v(e.Z.B),e.Z.e.Ab=null,e.zc=0)}(e),e.zc;var t,n}function B(e,t){for(;t>e.O;++e.O)e.ec[e.O]=ge({},3),e.hc[e.O]=ge({},3)}function P(e,t,n){return be(t,e.wc,0)?8+(be(t,e.wc,1)?8+pe(e.tc,t):pe(e.hc[n],t)):pe(e.ec[n],t)}function M(e){return e.wc=I(2),e.ec=I(16),e.hc=I(16),e.tc=ge({},8),e.O=0,e}function F(e){ke(e.wc);for(var t=0;e.O>t;++t)ke(e.ec[t].G),ke(e.hc[t].G);ke(e.tc.G)}function ee(e,t){var n,o,r,i;for(e.jb=t,r=e.a[t].r,o=e.a[t].j;e.a[t].t&&(ue(e.a[r]),e.a[r].r=r-1,e.a[t].Ac&&(e.a[r-1].t=0,e.a[r-1].r=e.a[t].r2,e.a[r-1].j=e.a[t].j2)),i=r,n=o,o=e.a[i].j,r=e.a[i].r,e.a[i].j=n,e.a[i].r=t,0<(t=i););return e.mb=e.a[0].j,e.q=e.a[0].r}function U(e){for(var t=0;t<16;++t)e.nc[t]=me(e.S,t);e.Qb=0}function H(e){var t,n,o,r,i,a,s,l;for(r=4;r<128;++r)t=(2|1&(a=K(r)))<<(o=(a>>1)-1),e.yc[r]=ve(e.Sb,t-a-1,o,r-t);for(i=0;i<4;++i){for(n=e.K[i],s=i<<6,a=0;e.$b>a;++a)e.P[s+a]=fe(n,a);for(a=14;e.$b>a;++a)e.P[s+a]+=(a>>1)-1-4<<6;for(l=128*i,r=0;r<4;++r)e.lb[l+r]=e.P[s+r];for(;r<128;++r)e.lb[l+r]=e.P[s+K(r)]+e.yc[r]}e.Mb=0}function G(e,t){W(e),function(e,t){if(e.Gc){Te(e.d,e.C,(e.l<<4)+t,1),Te(e.d,e.bb,e.l,0),e.l=e.l<7?7:10,Y(e.$,e.d,0,t);var n=D(2);_e(e.K[n],e.d,63),Ee(e.d,67108863,26),he(e.S,e.d,15)}}(e,t&e.y);for(var n=0;n<5;++n)Se(e.d)}function V(e,t){var n,o,r,i,a,s,l,c,u,g,p,d,_,f,h,m,y,v,b,k,T,E,S,C,x,A,D,B,I,N,w,O,R,L,P,M,F,U,H,G,V,W,K,z,j,Y,X,J;if(e.jb!=e.q)return _=e.a[e.q].r-e.q,e.mb=e.a[e.q].j,e.q=e.a[e.q].r,_;if(e.q=e.jb=0,e.N?(d=e.vb,e.N=0):d=re(e),A=e.D,(C=$(e.b)+1)<2)return e.mb=-1,1;for(273<C&&(C=273),u=H=0;u<4;++u)e.x[u]=e.v[u],e.Q[u]=Z(e.b,-1,e.x[u],273),e.Q[u]>e.Q[H]&&(H=u);if(e.Q[H]>=e.n)return e.mb=H,oe(e,(_=e.Q[H])-1),_;if(d>=e.n)return e.mb=e.m[A-1]+4,oe(e,d-1),d;if(l=q(e.b,-1),y=q(e.b,-e.v[0]-1-1),d<2&&l!=y&&e.Q[H]<2)return e.mb=-1,1;if(e.a[0].Hc=e.l,R=t&e.y,e.a[1].z=He[e.C[(e.l<<4)+R]>>>2]+ce(ae(e.A,t,e.J),7<=e.l,y,l),ue(e.a[1]),U=(v=He[2048-e.C[(e.l<<4)+R]>>>2])+He[2048-e.bb[e.l]>>>2],y==l&&(G=U+(X=(Y=e).l,J=R,He[Y.hb[X]>>>2]+He[Y._[(X<<4)+J]>>>2]),e.a[1].z>G&&(e.a[1].z=G,(j=e.a[1]).j=0,j.t=0)),(p=d>=e.Q[H]?d:e.Q[H])<2)return e.mb=e.a[1].j,1;for(e.a[1].r=0,e.a[0].bc=e.x[0],e.a[0].ac=e.x[1],e.a[0].dc=e.x[2],e.a[0].lc=e.x[3],g=p;e.a[g--].z=268435455,2<=g;);for(u=0;u<4;++u)if(!((F=e.Q[u])<2))for(P=U+ne(e,u,e.l,R);i=P+ie(e.i,F-2,R),(N=e.a[F]).z>i&&(N.z=i,N.r=0,N.j=u,N.t=0),2<=--F;);if(S=v+He[e.bb[e.l]>>>2],(g=2<=e.Q[0]?e.Q[0]+1:2)<=d){for(D=0;g>e.m[D];)D+=2;for(;i=S+te(e,c=e.m[D+1],g,R),(N=e.a[g]).z>i&&(N.z=i,N.r=0,N.j=c+4,N.t=0),g!=e.m[D]||(D+=2)!=A;++g);}for(n=0;;){if(++n==p)return ee(e,n);if(b=re(e),A=e.D,b>=e.n)return e.vb=b,e.N=1,ee(e,n);if(++t,O=e.a[n].r,e.a[n].t?(--O,e.a[n].Ac?(W=e.a[e.a[n].r2].Hc,W=e.a[n].j2<4?W<7?8:11:W<7?7:10):W=e.a[O].Hc,W=Q(W)):W=e.a[O].Hc,O==n-1?W=e.a[n].j?Q(W):W<7?9:11:(e.a[n].t&&e.a[n].Ac?(O=e.a[n].r2,w=e.a[n].j2,W=W<7?8:11):W=(w=e.a[n].j)<4?W<7?8:11:W<7?7:10,I=e.a[O],w<4?w?1==w?(e.x[0]=I.ac,e.x[1]=I.bc,e.x[2]=I.dc,e.x[3]=I.lc):2==w?(e.x[0]=I.dc,e.x[1]=I.bc,e.x[2]=I.ac,e.x[3]=I.lc):(e.x[0]=I.lc,e.x[1]=I.bc,e.x[2]=I.ac,e.x[3]=I.dc):(e.x[0]=I.bc,e.x[1]=I.ac,e.x[2]=I.dc,e.x[3]=I.lc):(e.x[0]=w-4,e.x[1]=I.bc,e.x[2]=I.ac,e.x[3]=I.dc)),e.a[n].Hc=W,e.a[n].bc=e.x[0],e.a[n].ac=e.x[1],e.a[n].dc=e.x[2],e.a[n].lc=e.x[3],s=e.a[n].z,l=q(e.b,-1),y=q(e.b,-e.x[0]-1-1),R=t&e.y,o=s+He[e.C[(W<<4)+R]>>>2]+ce(ae(e.A,t,q(e.b,-2)),7<=W,y,l),k=0,(T=e.a[n+1]).z>o&&(T.z=o,T.r=n,T.j=-1,T.t=0,k=1),U=(v=s+He[2048-e.C[(W<<4)+R]>>>2])+He[2048-e.bb[W]>>>2],y!=l||n>T.r&&!T.j||(G=U+(He[e.hb[W]>>>2]+He[e._[(W<<4)+R]>>>2]),T.z>=G&&(T.z=G,T.r=n,T.j=0,T.t=0,k=1)),!((C=x=4095-n<(x=$(e.b)+1)?4095-n:x)<2)){if(C>e.n&&(C=e.n),!k&&y!=l&&(z=Math.min(x-1,e.n),2<=(h=Z(e.b,0,e.x[0],z)))){for(K=Q(W),L=t+1&e.y,E=o+He[2048-e.C[(K<<4)+L]>>>2]+He[2048-e.bb[K]>>>2],B=n+1+h;p<B;)e.a[++p].z=268435455;i=E+(ie(e.i,h-2,L)+ne(e,0,K,L)),(N=e.a[B]).z>i&&(N.z=i,N.r=n+1,N.j=0,N.t=1,N.Ac=0)}for(V=2,M=0;M<4;++M)if(!((f=Z(e.b,-1,e.x[M],C))<2)){m=f;do{for(;p<n+f;)e.a[++p].z=268435455;i=U+(ie(e.i,f-2,R)+ne(e,M,W,R)),(N=e.a[n+f]).z>i&&(N.z=i,N.r=n,N.j=M,N.t=0)}while(2<=--f);if(f=m,M||(V=f+1),f<x&&(z=Math.min(x-1-f,e.n),2<=(h=Z(e.b,f,e.x[M],z)))){for(K=W<7?8:11,L=t+f&e.y,r=U+(ie(e.i,f-2,R)+ne(e,M,W,R))+He[e.C[(K<<4)+L]>>>2]+ce(ae(e.A,t+f,q(e.b,f-1-1)),1,q(e.b,f-1-(e.x[M]+1)),q(e.b,f-1)),K=Q(K),L=t+f+1&e.y,E=r+He[2048-e.C[(K<<4)+L]>>>2]+He[2048-e.bb[K]>>>2],B=f+1+h;p<n+B;)e.a[++p].z=268435455;i=E+(ie(e.i,h-2,L)+ne(e,0,K,L)),(N=e.a[n+B]).z>i&&(N.z=i,N.r=n+f+1,N.j=0,N.t=1,N.Ac=1,N.r2=n,N.j2=M)}}if(C<b){for(b=C,A=0;b>e.m[A];A+=2);e.m[A]=b,A+=2}if(V<=b){for(S=v+He[e.bb[W]>>>2];p<n+b;)e.a[++p].z=268435455;for(D=0;V>e.m[D];)D+=2;for(f=V;;++f)if(i=S+te(e,a=e.m[D+1],f,R),(N=e.a[n+f]).z>i&&(N.z=i,N.r=n,N.j=a+4,N.t=0),f==e.m[D]){if(f<x&&(z=Math.min(x-1-f,e.n),2<=(h=Z(e.b,f,a,z)))){for(K=W<7?7:10,L=t+f&e.y,r=i+He[e.C[(K<<4)+L]>>>2]+ce(ae(e.A,t+f,q(e.b,f-1-1)),1,q(e.b,f-(a+1)-1),q(e.b,f-1)),K=Q(K),L=t+f+1&e.y,E=r+He[2048-e.C[(K<<4)+L]>>>2]+He[2048-e.bb[K]>>>2],B=f+1+h;p<n+B;)e.a[++p].z=268435455;i=E+(ie(e.i,h-2,L)+ne(e,0,K,L)),(N=e.a[n+B]).z>i&&(N.z=i,N.r=n+f+1,N.j=0,N.t=1,N.Ac=1,N.r2=n,N.j2=a+4)}if((D+=2)==A)break}}}}}function te(e,t,n,o){var r,i=D(n);return(t<128?e.lb[128*i+t]:e.P[(i<<6)+(r=t,r<131072?Ue[r>>6]+12:r<134217728?Ue[r>>16]+32:Ue[r>>26]+52)]+e.nc[15&t])+ie(e.$,n-2,o)}function ne(e,t,n,o){var r;return t?(r=He[2048-e.hb[n]>>>2],1==t?r+=He[e.Ub[n]>>>2]:(r+=He[2048-e.Ub[n]>>>2],r+=Ce(e.vc[n],t-2))):(r=He[e.hb[n]>>>2],r+=He[2048-e._[(n<<4)+o]>>>2]),r}function oe(e,t){0<t&&(function(e,t){var n,o,r,i,a,s,l,c,u,g,p,d,_,f,h,m,y;do{if(e.h>=e.o+e.ob)d=e.ob;else if(d=e.h-e.o,e.xb>d){A(e);continue}for(_=e.o>e.p?e.o-e.p:0,o=e.f+e.o,e.qb?(s=1023&(y=Fe[255&e.c[o]]^255&e.c[o+1]),e.ub[s]=e.o,l=65535&(y^=(255&e.c[o+2])<<8),e.ub[1024+l]=e.o,c=(y^Fe[255&e.c[o+3]]<<5)&e.Ec):c=255&e.c[o]^(255&e.c[o+1])<<8,r=e.ub[e.R+c],e.ub[e.R+c]=e.o,h=1+(e.k<<1),m=e.k<<1,g=p=e.w,n=e.Fc;;){if(r<=_||0==n--){e.L[h]=e.L[m]=0;break}if(a=e.o-r,i=(e.k>=a?e.k-a:e.k-a+e.p)<<1,f=e.f+r,u=g<p?g:p,e.c[f+u]==e.c[o+u]){for(;++u!=d&&e.c[f+u]==e.c[o+u];);if(u==d){e.L[m]=e.L[i],e.L[h]=e.L[i+1];break}}(255&e.c[o+u])>(255&e.c[f+u])?(e.L[m]=r,m=i+1,r=e.L[m],p=u):(e.L[h]=r,h=i,r=e.L[h],g=u)}A(e)}while(0!=--t)}(e.b,t),e.s+=t)}function re(e){var t=0;return e.D=function(e,t){var n,o,r,i,a,s,l,c,u,g,p,d,_,f,h,m,y,v,b,k,T;if(e.h>=e.o+e.ob)f=e.ob;else if(f=e.h-e.o,e.xb>f)return A(e),0;for(y=0,h=e.o>e.p?e.o-e.p:0,o=e.f+e.o,m=1,u=c=0,e.qb?(c=1023&(T=Fe[255&e.c[o]]^255&e.c[o+1]),u=65535&(T^=(255&e.c[o+2])<<8),g=(T^Fe[255&e.c[o+3]]<<5)&e.Ec):g=255&e.c[o]^(255&e.c[o+1])<<8,r=e.ub[e.R+g]||0,e.qb&&(i=e.ub[c]||0,a=e.ub[1024+u]||0,e.ub[c]=e.o,e.ub[1024+u]=e.o,h<i&&e.c[e.f+i]==e.c[o]&&(t[y++]=m=2,t[y++]=e.o-i-1),h<a&&e.c[e.f+a]==e.c[o]&&(a==i&&(y-=2),t[y++]=m=3,t[y++]=e.o-a-1,i=a),0!=y&&i==r&&(y-=2,m=1)),e.ub[e.R+g]=e.o,b=1+(e.k<<1),k=e.k<<1,d=_=e.w,0!=e.w&&h<r&&e.c[e.f+r+e.w]!=e.c[o+e.w]&&(t[y++]=m=e.w,t[y++]=e.o-r-1),n=e.Fc;;){if(r<=h||0==n--){e.L[b]=e.L[k]=0;break}if(l=e.o-r,s=(e.k>=l?e.k-l:e.k-l+e.p)<<1,v=e.f+r,p=d<_?d:_,e.c[v+p]==e.c[o+p]){for(;++p!=f&&e.c[v+p]==e.c[o+p];);if(m<p&&(t[y++]=m=p,t[y++]=l-1,p==f)){e.L[k]=e.L[s],e.L[b]=e.L[s+1];break}}(255&e.c[o+p])>(255&e.c[v+p])?(e.L[k]=r,k=s+1,r=e.L[k],_=p):(e.L[b]=r,b=s,r=e.L[b],d=p)}return A(e),y}(e.b,e.m),0<e.D&&((t=e.m[e.D-2])==e.n&&(t+=Z(e.b,t-1,e.m[e.D-1],273-t))),++e.s,t}function W(e){e.b&&e.W&&(e.b.cc=null,e.W=0)}function K(e){return e<2048?Ue[e]:e<2097152?Ue[e>>10]+20:Ue[e>>20]+40}function z(e,t){ke(e.db);for(var n=0;n<t;++n)ke(e.Vb[n].G),ke(e.Wb[n].G);ke(e.ic.G)}function j(e,t,n,o,r){var i,a,s,l,c;for(i=He[e.db[0]>>>2],s=(a=He[2048-e.db[0]>>>2])+He[e.db[1]>>>2],l=a+He[2048-e.db[1]>>>2],c=c=0;c<8;++c){if(n<=c)return;o[r+c]=i+fe(e.Vb[t],c)}for(;c<16;++c){if(n<=c)return;o[r+c]=s+fe(e.Wb[t],c-8)}for(;c<n;++c)o[r+c]=l+fe(e.ic,c-8-8)}function Y(e,t,n,o){var r,i,a,s;r=e,i=t,s=o,(a=n)<8?(Te(i,r.db,0,0),_e(r.Vb[s],i,a)):(a-=8,Te(i,r.db,0,1),a<8?(Te(i,r.db,1,0),_e(r.Wb[s],i,a)):(Te(i,r.db,1,1),_e(r.ic,i,a-8))),0==--e.sc[o]&&(j(e,o,e.rb,e.Cc,272*o),e.sc[o]=e.rb)}function X(e){return function(e){e.db=I(2),e.Vb=I(16),e.Wb=I(16),e.ic=de({},8);for(var t=0;t<16;++t)e.Vb[t]=de({},3),e.Wb[t]=de({},3)}(e),e.Cc=[],e.sc=[],e}function ie(e,t,n){return e.Cc[272*n+t]}function J(e,t){for(var n=0;n<t;++n)j(e,n,e.rb,e.Cc,272*n),e.sc[n]=e.rb}function ae(e,t,n){return e.V[((t&e.qc)<<e.u)+((255&n)>>>8-e.u)]}function se(e,t,n){var o,r,i=1;for(r=7;0<=r;--r)o=n>>r&1,Te(t,e.tb,i,o),i=i<<1|o}function le(e,t,n,o){var r,i,a,s,l=1,c=1;for(i=7;0<=i;--i)r=o>>i&1,s=c,l&&(s+=1+(a=n>>i&1)<<8,l=a==r),Te(t,e.tb,s,r),c=c<<1|r}function ce(e,t,n,o){var r,i,a=1,s=7,l=0;if(t)for(;0<=s;--s)if(i=n>>s&1,r=o>>s&1,l+=Ce(e.tb[(1+i<<8)+a],r),a=a<<1|r,i!=r){--s;break}for(;0<=s;--s)r=o>>s&1,l+=Ce(e.tb[a],r),a=a<<1|r;return l}function ue(e){e.j=-1,e.t=0}function ge(e,t){return e.F=t,e.G=I(1<<t),e}function pe(e,t){var n,o=1;for(n=e.F;0!=n;--n)o=(o<<1)+be(t,e.G,o);return o-(1<<e.F)}function de(e,t){return e.F=t,e.G=I(1<<t),e}function _e(e,t,n){var o,r,i=1;for(r=e.F;0!=r;)o=n>>>--r&1,Te(t,e.G,i,o),i=i<<1|o}function fe(e,t){var n,o,r=1,i=0;for(o=e.F;0!=o;)n=t>>>--o&1,i+=Ce(e.G[r],n),r=(r<<1)+n;return i}function he(e,t,n){var o,r,i=1;for(r=0;e.F>r;++r)o=1&n,Te(t,e.G,i,o),i=i<<1|o,n>>=1}function me(e,t){var n,o,r=1,i=0;for(o=e.F;0!=o;--o)n=1&t,t>>>=1,i+=Ce(e.G[r],n),r=r<<1|n;return i}function ye(e,t,n,o,r){var i,a,s=1;for(a=0;a<o;++a)Te(n,e,t+s,i=1&r),s=s<<1|i,r>>=1}function ve(e,t,n,o){var r,i,a=1,s=0;for(i=n;0!=i;--i)r=1&o,o>>>=1,s+=He[(2047&(e[t+a]-r^-r))>>>2],a=a<<1|r;return s}function be(e,t,n){var o,r=t[n];return(-2147483648^(o=(e.E>>>11)*r))>(-2147483648^e.Bb)?(e.E=o,t[n]=r+(2048-r>>>5)<<16>>16,-16777216&e.E||(e.Bb=e.Bb<<8|_(e.Ab),e.E<<=8),0):(e.E-=o,e.Bb-=o,t[n]=r-(r>>>5)<<16>>16,-16777216&e.E||(e.Bb=e.Bb<<8|_(e.Ab),e.E<<=8),1)}function ke(e){for(var t=e.length-1;0<=t;--t)e[t]=1024}function Te(e,t,n,o){var r,i=t[n];r=(e.E>>>11)*i,o?(e.xc=k(e.xc,a(E(r),[4294967295,0])),e.E-=r,t[n]=i-(i>>>5)<<16>>16):(e.E=r,t[n]=i+(2048-i>>>5)<<16>>16),-16777216&e.E||(e.E<<=8,Se(e))}function Ee(e,t,n){for(var o=n-1;0<=o;--o)e.E>>>=1,1==(t>>>o&1)&&(e.xc=k(e.xc,E(e.E))),-16777216&e.E||(e.E<<=8,Se(e))}function Se(e){var t,n,o,r,i=w((n=e.xc,o=32,r=O(n,o&=63),n[1]<0&&(r=k(r,l([2,0],63-o))),r));if(0!=i||N(e.xc,[4278190080,0])<0){for(e.mc=k(e.mc,E(e.Jb)),t=e.Oc;R(e.Ab,t+i),t=255,0!=--e.Jb;);e.Oc=w(e.xc)>>>24}++e.Jb,e.xc=l(a(e.xc,[16777215,0]),8)}function Ce(e,t){return He[(2047&(e-t^-t))>>>2]}function xe(e){for(var t,n,o,r=0,i=0,a=e.length,s=[],l=[];r<a;++r,++i){if(128&(t=255&e[r]))if(192==(224&t)){if(a<=r+1)return e;if(128!=(192&(n=255&e[++r])))return e;l[i]=(31&t)<<6|63&n}else{if(224!=(240&t))return e;if(a<=r+2)return e;if(128!=(192&(n=255&e[++r])))return e;if(128!=(192&(o=255&e[++r])))return e;l[i]=(15&t)<<12|(63&n)<<6|63&o}else{if(!t)return e;l[i]=t}16383==i&&(s.push(String.fromCharCode.apply(String,l)),i=-1)}return 0<i&&(l.length=i,s.push(String.fromCharCode.apply(String,l))),s.join("")}function Ae(e){var t,n,o,r=[],i=0,a=e.length;if("object"==typeof e)return e;for(function(e,t,n,o,r){var i;for(i=t;i<n;++i)o[r++]=e.charCodeAt(i)}(e,0,a,r,0),o=0;o<a;++o)1<=(t=r[o])&&t<=127?++i:i+=!t||128<=t&&t<=2047?2:3;for(n=[],o=i=0;o<a;++o)1<=(t=r[o])&&t<=127?n[i++]=t<<24>>24:(!t||128<=t&&t<=2047?n[i++]=(192|t>>6&31)<<24>>24:(n[i++]=(224|t>>12&15)<<24>>24,n[i++]=(128|t>>6&63)<<24>>24),n[i++]=(128|63&t)<<24>>24);return n}function De(e){return e[1]+e[0]}var t,Be=1,Ie=2,Ne=3,we="function"==typeof setImmediate?setImmediate:setTimeout,Oe=4294967296,Re=[4294967295,-Oe],Le=[0,-0x8000000000000000],Pe=[0,0],Me=[1,0],Fe=function(){var e,t,n,o=[];for(e=0;e<256;++e){for(n=e,t=0;t<8;++t)0!=(1&n)?n=n>>>1^-306674912:n>>>=1;o[e]=n}return o}(),Ue=function(){var e,t,n,o=2,r=[0,1];for(n=2;n<22;++n)for(t=1<<(n>>1)-1,e=0;e<t;++e,++o)r[o]=n<<24>>24;return r}(),He=function(){var e,t,n,o=[];for(t=8;0<=t;--t)for(e=1<<9-t,n=1<<9-t-1;n<e;++n)o[n]=(t<<6)+(e-n<<6>>>9-t-1);return o}(),Ge=(t=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}],function(e){return t[e-1]||t[6]});return"undefined"==typeof onmessage||"undefined"!=typeof window&&void 0!==window.document||(onmessage=function(t){t&&t.gc&&(t.gc.action==Ie?e.decompress(t.gc.gc,t.gc.cbn):t.gc.action==Be&&e.compress(t.gc.gc,t.gc.Rc,t.gc.cbn))}),{compress:function(e,t,o,r){var i,n,a={},s=void 0===o&&void 0===r;if("function"!=typeof o&&(n=o,o=r=0),r=r||function(e){return void 0!==n?u(e,n):void 0},o=o||function(e,t){return void 0!==n?postMessage({action:Be,cbn:n,result:e,error:t}):void 0},s){for(a.c=d({},Ae(e),Ge(t));b(a.c.yb););return g(a.c.Nb)}try{a.c=d({},Ae(e),Ge(t)),r(0)}catch(e){return o(null,e)}we(function e(){try{for(var t,n=(new Date).getTime();b(a.c.yb);)if(i=De(a.c.yb.Pb)/De(a.c.Tb),200<(new Date).getTime()-n)return r(i),we(e,0),0;r(1),t=g(a.c.Nb),we(o.bind(null,t),0)}catch(e){o(null,e)}},0)},decompress:function(e,r,i){var a,n,s,l,c={},t=void 0===r&&void 0===i;if("function"!=typeof r&&(n=r,r=i=0),i=i||function(e){return void 0!==n?u(s?e:-1,n):void 0},r=r||function(e,t){return void 0!==n?postMessage({action:Ie,cbn:n,result:e,error:t}):void 0},t){for(c.d=f({},e);b(c.d.yb););return xe(g(c.d.Nb))}try{c.d=f({},e),l=De(c.d.Tb),s=-1<l,i(0)}catch(e){return r(null,e)}we(function e(){try{for(var t,n=0,o=(new Date).getTime();b(c.d.yb);)if(++n%1e3==0&&200<(new Date).getTime()-o)return s&&(a=De(c.d.yb.Z.g)/l,i(a)),we(e,0),0;i(1),t=xe(g(c.d.Nb)),we(r.bind(null,t),0)}catch(e){r(null,e)}},0)}}}();this.LZMA=this.LZMA_WORKER=e;var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),pxt,pxt,pxt,ts;pxt||(pxt={}),function(s){!function(e){function t(){return"undefined"!=typeof mscc&&!mscc.hasConsent()}e.enable=function(){if(s.aiTrackException&&s.aiTrackEvent){s.debug("setting up app insights");var a=s.tickEvent;s.tickEvent=function(e,t,n){if(a&&a(e,t,n),n&&n.interactiveConsent&&"undefined"!=typeof mscc&&!mscc.hasConsent()&&mscc.setConsent(),t){var o={},r={};for(var i in t)"string"==typeof t[i]?o[i]=t[i]:r[i]=t[i];s.aiTrackEvent(e,o,r)}else s.aiTrackEvent(e)};var o=s.reportException;s.reportException=function(e,t){o&&o(e,t);var n={target:s.appTarget.id,version:s.appTarget.versions.target};t&&s.Util.jsonMergeFrom(n,t),s.aiTrackException(e,"exception",n)};var e=s.reportError;s.reportError=function(t,n,o){e&&e(t,n,o);try{throw n}catch(e){var r={target:s.appTarget.id,version:s.appTarget.versions.target,category:t,message:n};o&&s.Util.jsonMergeFrom(r,o),s.aiTrackException(e,"error",r)}}}},e.isCookieBannerVisible=t,e.enableCookies=function(){t()&&mscc.setConsent()}}(s.analytics||(s.analytics={}))}(pxt||(pxt={})),pxt||(pxt={}),(pxt||(pxt={})).tickEvent=function(e){},function(e){(e.pxtc||(e.pxtc={})).__dummy=42}(ts||(ts={}));var pxtc=ts.pxtc;!function(e){var t;(function(g){function t(e){return e.replace(/[^\w .!?\-$]/g,function(e){var t=e.charCodeAt(0).toString(16);return"\\u"+"0000".substr(0,4-t.length)+t})}g.assert=function(e,t){if(void 0===t&&(t="Assertion failed"),!e)throw new Error(t)},g.flatClone=function(t){if(null==t)return null;var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},g.clone=function(e){return null==e?null:JSON.parse(JSON.stringify(e))},g.htmlEscape=function(e){return e?e.replace(/([^\w .!?\-$])/g,function(e){return"&#"+e.charCodeAt(0)+";"}):e},g.jsStringQuote=t,g.jsStringLiteral=function(e){return'"'+t(e)+'"'};var n="en",o={},e={};g.localizeLive=!1;var r=function(){function e(){this.translations={}}return e.prototype.key=function(e,t,n){return e+"|"+t+"|"+(n||"")},e.prototype.getAsync=function(e,t,n){return Promise.resolve(this.translations[this.key(e,t,n)])},e.prototype.setAsync=function(e,t,n,o,r){return this.translations[this.key(e,t,n)]={etag:o,strings:r,cached:!0},Promise.resolve()},e}();function i(){return n}function a(e,u){return 0==u.length?e:e.replace(/\{([0-9]+)(\:[^\}]+)?\}/g,function(e,t,n){var o=u[parseInt(t)],r="",i=/^:f(\d*)\.(\d+)/.exec(n);if(i){var a=parseInt(i[2]),s=parseInt(i[1])||0,l=/^0/.test(i[1])?"0":" ",c=o.toFixed(a);if(0<s&&0<a&&(s+=a+1),0<s)for(;c.length<s;)c=l+c;r=c}else r=":x"==n?"0x"+o.toString(16):void 0===o?"(undef)":null===o?"(null)":o.toString?o.toString():o+"";return":a"==n?/^\s*[euioah]/.test(r.toLowerCase())?r="an "+r:/^\s*[bcdfgjklmnpqrstvwxz]/.test(r.toLowerCase())&&(r="a "+r):":s"==n?r=1==o?"":"s":":q"==n?r=g.htmlEscape(r):":jq"==n?r=g.jsStringQuote(r):":uri"==n?r=encodeURIComponent(r).replace(/'/g,"%27").replace(/"/g,"%22"):":url"==n?r=encodeURI(r).replace(/'/g,"%27").replace(/"/g,"%22"):":%"==n&&(r=(100*o).toFixed(1).toString()+"%"),r})}g.translationDb=new r,g.localeInfo=function(){return(g.localizeLive?"live-":"")+i()},g.userLanguage=i,g.setUserLanguage=function(e){n=e},g.isUserLanguageRtl=function(){return/^ar|dv|fa|ha|he|ks|ku|ps|ur|yi/i.test(n)},g._localize=function(e){return o[e]||e},g.getLocalizedStrings=function(){return o},g.setLocalizedStrings=function(e){o=e},g.translationsCache=function(){return e},g.fmt_va=a,g.fmt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return a(e,t)};var s={};g.dumpLocStats=function(){var t={};Object.keys(s).sort(function(e,t){return s[t]-s[e]}).forEach(function(e){return t[e]=e}),console.log("prioritized list of strings:"),console.log(JSON.stringify(t,null,2))};var l=!0;function c(e,t){s[e]=(s[e]||0)+1;var n=g._localize(e);return!l&&n!=e&&/\d:s\}/.test(n)&&(n=n.replace(/\{\d+:s\}/g,"")),a(n=n.replace(/\{(id|loc):[^\}]+\}/g,""),t)}g.lf_va=c,g.lf=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return c(e,t)},g.rlf=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return c(e,t)},g.lookup=function(e,t){return e.hasOwnProperty(t)?e[t]:null},g.isoTime=function(e){var t=new Date(1e3*e);return g.fmt("{0}-{1:f02.0}-{2:f02.0} {3:f02.0}:{4:f02.0}:{5:f02.0}",t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())},g.userError=function(e){var t=new Error(e);throw t.isUserError=!0,t}})((t=e.pxtc||(e.pxtc={})).Util||(t.Util={}))}(ts||(ts={}));var lf=ts.pxtc.Util.lf,ts,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,ts,pxt,pxt,pxt,pxt,ts,pxt,pxt,ts,pxt;!function(e){var t;(t=e.pxtc||(e.pxtc={})).decodeBase64=function(e){return atob(e)},t.encodeBase64=function(e){return btoa(e)}}(ts||(ts={})),function(e){var m;(function(p){function o(e,t){for(var n=0;n<t.length;++n)e.push(t[n])}function r(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function c(e,t,n,o,r){void 0===o&&(o=0),void 0===r&&(r=n.length-o);for(var i=0;i<r;++i)e[t+i]=n[o+i]}function i(e,t){return e==t?0:e<t?-1:1}function t(n,o){var r={};return function(e){var t=n(e);return r.hasOwnProperty(t)?r[t]:r[t]=o(e)}}function n(e){return e&&(e=e.replace(/\\/g,"/")),e}function a(o){return p.httpRequestCoreAsync(o).then(function(e){if(200!=e.statusCode&&304!=e.statusCode&&!o.allowHttpErrors){var t=p.lf("Bad HTTP status code: {0} at {1}; message: {2}",e.statusCode,o.url,(e.text||"").slice(0,500)),n=new Error(t);return n.statusCode=e.statusCode,Promise.reject(n)}return e.text&&/application\/json/.test(e.headers["content-type"])&&(e.json=JSON.parse(e.text)),e})}function s(e){var t="";if(!e)return t;for(var n=0;n<e.length;++n){var o=e.charCodeAt(n);if(o<=127)t+=e.charAt(n);else if(o<=2047)t+=String.fromCharCode(192|o>>6,128|63&o);else{if(55296<=o&&o<=56319){var r=e.charCodeAt(++n);isNaN(r)||(o=65536+(o-55296<<10)+(r-56320))}t+=o<=65535?String.fromCharCode(224|o>>12,128|o>>6&63,128|63&o):String.fromCharCode(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o)}}return t}p.bufferSerial=function(e,t,n,o){void 0===t&&(t=""),void 0===n&&(n="?"),void 0===o&&(o=255);for(var r=0;r<t.length;++r){var i=t[r];if(e[n]=(e[n]||"")+i,"\n"===i||e[n].length>o){var a=e[n];e[n]="",window.postMessage({type:"serial",id:n,data:a},"*")}}},p.fileReadAsBufferAsync=function(o){return o?new Promise(function(t,e){var n=new FileReader;n.onerror=function(e){return t(null)},n.onload=function(e){return t(new Uint8Array(n.result))},n.readAsArrayBuffer(o)}):Promise.resolve(null)},p.fileReadAsTextAsync=function(o){return o?new Promise(function(t,e){var n=new FileReader;n.onerror=function(e){return t(null)},n.onload=function(e){return t(n.result)},n.readAsText(o)}):Promise.resolve(null)},p.repeatMap=function(e,t){e=e||0;for(var n=[],o=0;o<e;++o)n.push(t(o));return n},p.listsEqual=function(e,t){if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},p.oops=function(e){throw void 0===e&&(e="OOPS"),new Error(e)},p.reversed=function(e){return(e=e.slice(0)).reverse(),e},p.iterMap=function(t,n){Object.keys(t).forEach(function(e){return n(e,t[e])})},p.mapMap=function(t,n){var o={};return Object.keys(t).forEach(function(e){return o[e]=n(e,t[e])}),o},p.mapStringMapAsync=function(e,n){var o={};return Promise.all(Object.keys(e).map(function(t){return n(t,e[t]).then(function(e){return o[t]=e})})).then(function(){return o})},p.values=function(t){return Object.keys(t||{}).map(function(e){return t[e]})},p.pushRange=o,p.concat=function(e){for(var t=[],n=0;n<e.length;++n)o(t,e[n]);return t},p.memcpy=c,p.uint8ArrayConcat=function(e){for(var t=0,n=0,o=e;n<o.length;n++)t+=(l=o[n]).length;for(var r=new Uint8Array(t),i=0,a=0,s=e;a<s.length;a++){var l;c(r,i,l=s[a]),i+=l.length}return r},p.jsonMergeFrom=function t(n,o){o&&Object.keys(o).forEach(function(e){r(n[e])&&r(o[e])?t(n[e],o[e]):n[e]=p.clone(o[e])})},p.jsonCopyFrom=function(e,t){for(var n=p.clone(t),o=0,r=Object.keys(t);o<r.length;o++){var i=r[o];e[i]=n[i]}},p.jsonFlatten=function(e){var i={},a=function(e,t){if(null!==t&&"object"==typeof t){p.assert(!Array.isArray(t)),e&&(e+=".");for(var n=0,o=Object.keys(t);n<o.length;n++){var r=o[n];a(e+r,t[r])}}else i[e]=t};return a("",e),i},p.jsonUnFlatten=function(e){for(var t={},n=0,o=Object.keys(e);n<o.length;n++)for(var r=o[n],i=t,a=r.split("."),s=0;s<a.length;++s){var l=a[s];s==a.length-1?i[l]=e[r]:("object"!=typeof i[l]&&(i[l]={}),i=i[l])}return t},p.strcmp=i,p.stringMapEq=function(e,t){var n=Object.keys(e),o=Object.keys(t);if(n.length!=o.length)return!1;for(var r=0,i=n;r<i.length;r++){var a=i[r];if(!t.hasOwnProperty(a))return!1;if(e[a]!==t[a])return!1}return!0},p.endsWith=function(e,t){return!(e.length<t.length||0!=t.length&&e.slice(-t.length)!=t)},p.startsWith=function(e,t){return!(e.length<t.length||0!=t.length&&e.slice(0,t.length)!=t)},p.contains=function(e,t){return!(e.length<t.length)&&(0==t.length||-1<e.indexOf(t))},p.replaceAll=function(e,t,n){return t?e.split(t).join(n):e},p.sortObjectFields=function(t){var e=Object.keys(t);e.sort(i);var n={};return e.forEach(function(e){return n[e]=t[e]}),n},p.chopArray=function(e,t){for(var n=[],o=0;o<e.length;o+=t)n.push(e.slice(o,o+t));return n},p.unique=function(e,n){var o=[],r={};return e.forEach(function(e){var t=n(e);r.hasOwnProperty(t)||(r[t]=null,o.push(e))}),o},p.groupBy=function(e,n){var o={};return e.forEach(function(e){var t=n(e);o.hasOwnProperty(t)||(o[t]=[]),o[t].push(e)}),o},p.toDictionary=function(e,t){var n={};return e.forEach(function(e){n[t(e)]=e}),n},p.toArray=function(e){if(Array.isArray(e))return e;for(var t=[],n=0;n<e.length;++n)t.push(e[n]);return t},p.indexOfMatching=function(e,t){for(var n=0;n<e.length;++n)if(t(e[n]))return n;return-1},p.nextTick=function(e){Promise._async._schedule(e)},p.memoizeString=function(e){return t(function(e){return e},e)},p.memoize=t,p.debounce=function(o,r,i){var a;return function(){var e=this,t=arguments,n=i&&!a;clearTimeout(a),a=setTimeout(function(){a=null,i||o.apply(e,t)},r),n&&o.apply(e,t)}},p.throttle=function(o,r,i){var a;return function(){var e=this,t=arguments,n=i&&!a;a||(a=setTimeout(function(){a=null,i||o.apply(e,t)},r)),n&&o.apply(e,t)}},p.randomPermute=function(e){for(var t=0;t<e.length;++t){var n=g()%e.length,o=e[t];e[t]=e[n],e[n]=o}},p.randomPick=function(e){return 0==e.length?null:e[g()%e.length]},p.timeSince=function(e){var t=(Date.now()-(e*=1e3))/1e3;return isNaN(t)?"":t<-30?(t=-t)<60?p.lf("in a few seconds"):t<120?p.lf("in a minute"):t<3600?p.lf("in {0} minute{0:s}",Math.floor(t/60)):t<7200?p.lf("in an hour"):t<86400?p.lf("in {0} hour{0:s}",Math.floor(t/60/60)):t<2592e3?p.lf("in {0} day{0:s}",Math.floor(t/60/60/24)):t<31536e3?p.lf("in {0} month{0:s}",Math.floor(t/60/60/24/30)):p.lf("in {0} year{0:s}",Math.floor(t/60/60/24/365)):t<0?p.lf("now"):t<10?p.lf("a few seconds ago"):t<60?p.lf("{0} second{0:s} ago",Math.floor(t)):t<120?p.lf("a minute ago"):t<3600?p.lf("{0} minute{0:s} ago",Math.floor(t/60)):t<7200?p.lf("an hour ago"):t<86400?p.lf("{0} hour{0:s} ago",Math.floor(t/60/60)):t<2592e3?p.lf("{0} day{0:s} ago",Math.floor(t/60/60/24)):t<31536e3?p.lf("{0} month{0:s} ago",Math.floor(t/60/60/24/30)):p.lf("{0} year{0:s} ago",Math.floor(t/60/60/24/365))},p.unicodeToChar=function(e){return e.replace(/\\u([\d\w]{4})/gi,function(e,t){return String.fromCharCode(parseInt(t,16))})},p.escapeForRegex=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},p.stripUrlProtocol=function(e){return e.replace(/.*?:\/\//g,"")},p.normalizePath=n,p.pathJoin=function(e,t){if(n(e),n(t),e||t)return e?t?("/"!==e.charAt(e.length-1)&&(e+="/"),"/"==t.charAt(0)&&(t=t.substring(1)),e+t):e:t},p.isNodeJS=!1,p.requestAsync=a,p.httpGetTextAsync=function(e){return a({url:e}).then(function(e){return e.text})},p.httpGetJsonAsync=function(e){return a({url:e}).then(function(e){return e.json})},p.httpPostJsonAsync=function(e,t){return a({url:e,data:t||{}}).then(function(e){return e.json})},p.stringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),o=0;o<t;++o)n[o]=255&e.charCodeAt(o);return n},p.uint8ArrayToString=function(e){for(var t=e.length,n="",o=0;o<t;++o)n+=String.fromCharCode(e[o]);return n},p.fromUTF8=function(e){if(!e)return"";for(var t="",n=0;n<e.length;++n){var o=255&e.charCodeAt(n);t+=37==o||127<o?"%"+o.toString(16):e.charAt(n)}return decodeURIComponent(t)},p.toUTF8=s,p.toHex=function(e){for(var t="",n=0;n<e.length;++n)t+=("0"+e[n].toString(16)).slice(-2);return t},p.fromHex=function(e){for(var t=new Uint8Array(e.length>>1),n=0;n<e.length;n+=2)t[n>>1]=parseInt(e.slice(n,n+2),16);return t};var e=function(){function e(){this.promises={}}return e.prototype.enqueue=function(o,r){var i=this;return new Promise(function(e,t){var n=i.promises[o];n||(n=i.promises[o]=[]),n.push(function(){return r().finally(function(){n.shift(),0==n.length?delete i.promises[o]:n[0]()}).then(e,t)}),1==n.length&&n[0]()})},e}();p.PromiseQueue=e;var l=function(){function e(){this.waiting=[],this.available=[]}return e.prototype.drain=function(){for(var e=0,t=this.waiting;e<t.length;e++)(0,t[e])(new Error("Promise Buffer Reset"));this.waiting=[],this.available=[]},e.prototype.pushError=function(e){this.push(e)},e.prototype.push=function(e){var t=this.waiting.shift();t?t(e):this.available.push(e)},e.prototype.shiftAsync=function(e){var r=this;if(void 0===e&&(e=0),0<this.available.length){var t=this.available.shift();return t instanceof Error?Promise.reject(t):Promise.resolve(t)}return new Promise(function(t,n){var o=function(e){e instanceof Error?n(e):t(e)};r.waiting.push(o),0<e&&Promise.delay(e).then(function(){var e=r.waiting.indexOf(o);0<=e&&(r.waiting.splice(e,1),n(new Error("Timeout")))})})},e}();function u(){return Date.now()}function g(){var e=new Uint8Array(4);return p.getRandomBuf(e),new Uint32Array(e.buffer)[0]}function d(n,o,r,i){function t(){var t="https://makecode.com/api/translations?lang="+encodeURIComponent(n)+"&filename="+encodeURIComponent(o)+"&approved=true";r&&(t+="&branch="+encodeURIComponent(r));var e={};return i&&(e["If-None-Match"]=i),a({url:t,headers:e}).then(function(e){if(304!=e.statusCode)return 200==e.statusCode?(i=e.headers.ETag||"",p.translationDb.setAsync(n,o,r,i,e.json).then(function(){return e.json})):e.json},function(e){console.log("failed to load translations from "+t)})}return p.translationDb.getAsync(n,o,r).then(function(e){return e?(i=e.etag,e.cached||t().done(),e.strings):t()})}function _(e){return/^(es|pt|si|sv|zh)/i.test(e)||(e=e.split("-")[0]),e}function f(e){return e=_(e),pxt.appTarget.appTheme&&pxt.appTarget.appTheme.availableLocales&&-1<pxt.appTarget.appTheme.availableLocales.indexOf(e)}function h(e,t,n,o,r,i,a){var s=(o=_(o))+"/"+a+"/"+t;if(p.translationsCache()[s])return Promise.resolve(p.translationsCache()[s]);var l,c=t?[{branch:i,path:e+"/sim-strings.json"}]:[{branch:r,path:"strings.json"},{branch:i,path:e+"/target-strings.json"}];function u(t){t&&(l||(l={}),Object.keys(t).filter(function(e){return!!t[e]}).forEach(function(e){return l[e]=t[e]}))}if(a){var g=0;return Promise.mapSeries(c,function(e){return d(o,e.path,e.branch).then(u,function(e){console.log(e.message),++g})}).then(function(){return g&&(p.translationsCache()[s]=l),g!==c.length&&l?Promise.resolve(l):(pxt.tickEvent("translations.livetranslationsfailed"),h(e,t,n,o,r,i,!1))})}return p.httpGetJsonAsync(n+"locales/"+o+"/strings.json").then(function(e){e&&(l=e,p.translationsCache()[s]=l)},function(e){console.error("failed to load localizations")}).then(function(){return l})}p.PromiseBuffer=l,p.now=u,p.nowSeconds=function(){return Math.round(u()/1e3)},p.getMime=function(e){var t=/\.([a-zA-Z0-9]+)$/.exec(e);if(!t)return"application/octet-stream";switch(t[1].toLowerCase()){case"txt":return"text/plain";case"html":case"htm":return"text/html";case"css":return"text/css";case"js":return"application/javascript";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"ico":return"image/x-icon";case"manifest":return"text/cache-manifest";case"webmanifest":return"application/manifest+json";case"json":return"application/json";case"svg":return"image/svg+xml";case"eot":return"application/vnd.ms-fontobject";case"ttf":return"font/ttf";case"woff":return"application/font-woff";case"woff2":return"application/font-woff2";case"md":return"text/markdown";case"xml":return"application/xml";case"m4a":return"audio/m4a";case"mp3":return"audio/mp3";default:return"application/octet-stream"}},p.randomUint32=g,p.guidGen=function(){function e(){return(65536|g()).toString(16).slice(-4)}return e()+e()+"-"+e()+"-4"+e().slice(-3)+"-"+e()+"-"+e()+e()+e()},p.downloadLiveTranslationsAsync=d,p.isLocaleEnabled=f,p.updateLocalizationAsync=function(e,t,n,o,r,i,a,s){return(o=_(o))===p.userLanguage()||!f(o)&&!s?Promise.resolve():h(e,t,n,o,r,i,a).then(function(e){return e&&(p.setUserLanguage(o),p.setLocalizedStrings(e),a&&(p.localizeLive=!0)),Promise.resolve()})},p.downloadSimulatorLocalizationAsync=function(e,t,n,o,r,i,a){return(n=_(n))===p.userLanguage()||!f(n)&&!a?Promise.resolve(void 0):h(e,!0,t,n,o,r,i)},p.downloadTranslationsAsync=h,p.capitalize=function(e){return e?e[0].toLocaleUpperCase()+e.slice(1):e},p.uncapitalize=function(e){return(e||"").split(/(?=[A-Z])/g).join(" ").toLowerCase()},p.range=function(e){for(var t=[],n=0;n<e;++n)t.push(n);return t},p.multipartPostAsync=function(e,o,t,n){void 0===o&&(o={}),void 0===t&&(t=null),void 0===n&&(n=null);var r,i,a,s="--------------------------0461489f461126c5",l="";Object.keys(o).forEach(function(e){return n=o[t=e],l+=s+"\r\n",l+='Content-Disposition: form-data; name="'+t+'"\r\n\r\n',void(l+=n+"\r\n");var t,n}),t&&(i=n,a=(r=t).split("/").reverse()[0],l+=s+"\r\n",l+='Content-Disposition: form-data; name="files['+r+']"; filename="'+a+'"\r\n',l+="\r\n",l+=i+"\r\n"),l+=s+"--\r\n";var c={url:e,method:"POST",headers:{"Content-Type":"multipart/form-data; boundary="+s.slice(2)},data:l};return p.httpRequestCoreAsync(c)},p.toDataUri=function(e,t){return/^https?:/i.test(e)?e:/^data:/i.test(e)?e:(t||/^<svg/i.test(e)&&(t="image/svg+xml"),/xml|svg/.test(t)?"data:"+t+","+encodeURIComponent(e):"data:"+(t||"image/png")+";base64,"+m.encodeBase64(s(e)))}})((m=e.pxtc||(e.pxtc={})).Util||(m.Util={}))}(ts||(ts={})),function(e){var m;(function(e){m.Util.httpRequestCoreAsync=function(l){return new Promise(function(e,t){var o,r=!1,n=m.Util.clone(l.headers)||{};o=new XMLHttpRequest,l.responseArrayBuffer&&(o.responseType="arraybuffer"),o.onreadystatechange=function(){if(!r&&4==o.readyState){r=!0;var n={statusCode:o.status,headers:{},buffer:o.responseBody||o.response,text:l.responseArrayBuffer?void 0:o.responseText};o.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=/^\s*([^:]+): (.*)/.exec(e);t&&(n.headers[t[1].toLowerCase()]=t[2])}),e(n)}};var i,a=l.data,s=l.method||(null==a?"GET":"POST");null==a?i=null:a instanceof Uint8Array?i=a:"object"==typeof a?(i=JSON.stringify(a),n["content-type"]="application/json; charset=utf8"):"string"==typeof a?i=a:m.Util.oops("bad data"),o.open(s,l.url),Object.keys(n).forEach(function(e){o.setRequestHeader(e,n[e])}),null==i?o.send():o.send(i)})},m.Util.sha256=n,m.Util.getRandomBuf=function(e){if(window.crypto)window.crypto.getRandomValues(e);else for(var t=0;t<e.length;++t)e[t]=Math.floor(255*Math.random())};var f=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function h(e,t){return e>>>t|e<<32-t}function p(e,t){m.Util.assert(8==e.length),m.Util.assert(64==t.length);for(var n=16;n<64;++n){var o=h(t[n-15],7)^h(t[n-15],18)^t[n-15]>>>3,r=h(t[n-2],17)^h(t[n-2],19)^t[n-2]>>>10;t[n]=t[n-16]+o+t[n-7]+r|0}var i=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],g=e[6],p=e[7];for(n=0;n<64;++n){var d=p+(r=h(c,6)^h(c,11)^h(c,25))+(c&u^~c&g)+f[n]+t[n]|0,_=i&a^i&s^a&s;p=g,g=u,u=c,c=l+d|0,l=s,s=a,i=d+((o=h(a=i,2)^h(i,13)^h(i,22))+_|0)|0}e[0]+=i,e[1]+=a,e[2]+=s,e[3]+=l,e[4]+=c,e[5]+=u,e[6]+=g,e[7]+=p}function t(e){var i=new Uint32Array(8);i[0]=1779033703,i[1]=3144134277,i[2]=1013904242,i[3]=2773480762,i[4]=1359893119,i[5]=2600822924,i[6]=528734635,i[7]=1541459225;var a=new Uint32Array(64),s=64;function t(e){for(var t=e.length-(s-1),n=0;n<t;n+=s){for(var o=0;o<16;o++){var r=(o<<2)+n;a[o]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]}p(i,a)}}t(e);var n=64-(e.length+9)%64;64==n&&(n=0);for(var o=e.length-e.length%s,r=new Uint8Array(e.length-o+1+n+8),l=0;o<e.length;)r[l++]=e[o++];for(r[l++]=128;0<n--;)r[l++]=0;var c=8*e.length;for(l=r.length;0<c;)r[--l]=255&c,c>>=8;t(r);for(var u="",g=0;g<i.length;++g)u+=("000000000"+i[g].toString(16)).slice(-8);return u.toLowerCase()}function n(e){return t(m.Util.stringToUint8Array(m.Util.toUTF8(e)))}e.sha256buffer=t,e.sha256string=n})((m=e.pxtc||(e.pxtc={})).BrowserImpl||(m.BrowserImpl={}))}(ts||(ts={})),function(r){var i;r.U=pxtc.Util,r.Util=pxtc.Util,r.setAppTarget=function(e){r.appTarget=e||{};var t=r.appTarget.compile;t||(t=r.appTarget.compile={isNative:!1,hasHex:!1}),t.hasHex&&void 0===t.jsRefCounting&&(t.jsRefCounting=!0),t.hasHex||void 0!==t.floatingPoint||(t.floatingPoint=!0),t.hasHex&&!t.nativeType&&(t.nativeType=pxtc.NATIVE_TYPE_THUMB),t.nativeType!=pxtc.NATIVE_TYPE_AVR&&t.nativeType!=pxtc.NATIVE_TYPE_AVRVM||(t.shortPointers=!0,t.flashCodeAlign=16),t.nativeType==pxtc.NATIVE_TYPE_CS&&(t.floatingPoint=!0,t.needsUnboxing=!0,t.jsRefCounting=!1),t.taggedInts&&(t.floatingPoint=!0,t.needsUnboxing=!0),t.vtableShift||(t.vtableShift=2),t.useUF2||t.useELF||null!=t.noSourceInFlash||(t.noSourceInFlash=!0),r.appTarget.appTheme||(r.appTarget.appTheme={}),r.appTarget.appTheme.embedUrl||(r.appTarget.appTheme.embedUrl=r.appTarget.appTheme.homeUrl);var n=r.appTarget.compileService;n&&n.yottaTarget&&!n.yottaBinary&&(n.yottaBinary="pxt-microbit-app-combined.hex");var o=r.appTarget.appTheme;Object.keys(o).filter(function(e){return/(logo|hero)$/i.test(e)&&/^@cdnUrl@/.test(o[e])}).forEach(function(e){return o[e]=r.BrowserUtils.patchCdn(o[e])}),i=r.U.clone(r.appTarget)},r.setAppTargetVariant=function(e){if(r.appTargetVariant=e,r.appTarget=r.U.clone(i),e){if(r.appTarget.variants){var t=r.appTarget.variants[e];if(t)return void r.U.jsonMergeFrom(r.appTarget,t)}r.U.userError(lf("Variant '{0}' not defined in pxtarget.json",e))}},r.options={},r.debug="undefined"!=typeof console&&console.debug?function(e){r.options.debug&&console.debug(e)}:function(){},r.log="undefined"!=typeof console&&console.log?function(e){console.log(e)}:function(){},r.reportException=function(e,t){if(console&&(console.error(e),t))try{console.log(t)}catch(e){}},r.reportError=function(e,t,n){if(console&&(console.error(e+": "+t),n))try{r.log(JSON.stringify(n,null,2))}catch(e){}};var n={},o=r.Util.debounce(function(){r.tickEvent("activity",n),n={}},1e4,!1);function t(){return{relprefix:"/--",workerjs:"/worker.js",monacoworkerjs:"/monacoworker.js",pxtVersion:"local",pxtRelId:"",pxtCdnUrl:"/cdn/",commitCdnUrl:"/cdn/",blobCdnUrl:"/blb/",cdnUrl:"/cdn/",targetUrl:"",targetVersion:"local",targetRelId:"",targetId:r.appTarget?r.appTarget.id:"",simUrl:"/sim/simulator.html",partsUrl:"/sim/siminstructions.html"}}r.tickActivity=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.filter(function(e){return!!e}).map(function(e){return e.slice(0,64)}).forEach(function(e){return n[e]=(n[e]||0)+1}),o()},r.localWebConfig=t,r.getOnlineCdnUrl=function(){if(!r.webConfig)return null;var e=/^(https:\/\/[^\/]+)/.exec(r.webConfig.commitCdnUrl);return e?e[1]:null},r.setupWebConfig=function(e){e?r.webConfig=e:r.webConfig||(r.webConfig=t())},r.getEmbeddedScript=function(e){return r.U.lookup(r.appTarget.bundledpkgs||{},e)};var e=void 0;function a(){return e||(e=r.Cloud.downloadTargetConfigAsync().then(function(e){return e||{}},function(e){return{}})),e}function s(e){return void 0===e&&(e=null),e||(e=r.appTarget.compile),e.nativeType==ts.pxtc.NATIVE_TYPE_CS?ts.pxtc.BINARY_CS:e.useUF2?ts.pxtc.BINARY_UF2:e.useELF?ts.pxtc.BINARY_ELF:ts.pxtc.BINARY_HEX}r.targetConfigAsync=a,r.packagesConfigAsync=function(){return a().then(function(e){return e?e.packages:void 0})},r.CONFIG_NAME="pxt.json",r.SERIAL_EDITOR_FILE="serial.txt",r.CLOUD_ID="pxt/",r.BLOCKS_PROJECT_NAME="blocksprj",r.JAVASCRIPT_PROJECT_NAME="tsprj",r.outputName=s,r.isOutputText=function(e){return void 0===e&&(e=null),s(e)==ts.pxtc.BINARY_HEX||s(e)==ts.pxtc.BINARY_CS}}(pxt||(pxt={})),function(o){!function(r){var t,h="this";function n(){(t={device_while:{name:o.Util.lf("a loop that repeats while the condition is true"),tooltip:o.Util.lf("Run the same sequence of actions while the condition is met."),url:"/blocks/loops/while",category:"loops",block:{message0:o.Util.lf("while %1"),appendField:o.Util.lf("{id:while}do")}},pxt_controls_for:{name:o.Util.lf("a loop that repeats the number of times you say"),tooltip:o.Util.lf("Have the variable '{0}' take on the values from 0 to the end number, counting by 1, and do the specified blocks."),url:"blocks/loops/for",category:"loops",block:{message0:o.Util.lf("for %1 from 0 to %2"),variable:o.Util.lf("{id:var}index"),appendField:o.Util.lf("{id:for}do")}},controls_simple_for:{name:o.Util.lf("a loop that repeats the number of times you say"),tooltip:o.Util.lf("Have the variable '{0}' take on the values from 0 to the end number, counting by 1, and do the specified blocks."),url:"blocks/loops/for",category:"loops",block:{message0:o.Util.lf("for %1 from 0 to %2"),variable:o.Util.lf("{id:var}index"),appendField:o.Util.lf("{id:for}do")}},pxt_controls_for_of:{name:o.Util.lf("a loop that repeats for each value in an array"),tooltip:o.Util.lf("Have the variable '{0}' take the value of each item in the array one by one, and do the specified blocks."),url:"blocks/loops/for-of",category:"loops",block:{message0:o.Util.lf("for element %1 of %2"),variable:o.Util.lf("{id:var}value"),appendField:o.Util.lf("{id:for_of}do")}},controls_for_of:{name:o.Util.lf("a loop that repeats for each value in an array"),tooltip:o.Util.lf("Have the variable '{0}' take the value of each item in the array one by one, and do the specified blocks."),url:"blocks/loops/for-of",category:"loops",block:{message0:o.Util.lf("for element %1 of %2"),variable:o.Util.lf("{id:var}value"),appendField:o.Util.lf("{id:for_of}do")}},math_op2:{name:o.Util.lf("minimum or maximum of 2 numbers"),tooltip:{min:o.Util.lf("smaller value of 2 numbers"),max:o.Util.lf("larger value of 2 numbers")},url:"/blocks/math",operators:{op:["min","max"]},category:"math"},math_op3:{name:o.Util.lf("absolute number"),tooltip:o.Util.lf("absolute value of a number"),url:"/reference/math",category:"math",block:{message0:o.Util.lf("absolute of %1")}},math_number:{name:o.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math",tooltip:o.appTarget&&o.appTarget.compile&&o.appTarget.compile.floatingPoint?o.Util.lf("a decimal number"):o.Util.lf("an integer number")},math_integer:{name:o.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math",tooltip:o.Util.lf("an integer number")},math_whole_number:{name:o.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math",tooltip:o.Util.lf("an whole number")},math_number_minmax:{name:o.Util.lf("{id:block}number"),url:"/blocks/math/random",category:"math"},math_arithmetic:{name:o.Util.lf("arithmetic operation"),url:"/blocks/math",tooltip:{ADD:o.Util.lf("Return the sum of the two numbers."),MINUS:o.Util.lf("Return the difference of the two numbers."),MULTIPLY:o.Util.lf("Return the product of the two numbers."),DIVIDE:o.Util.lf("Return the quotient of the two numbers."),POWER:o.Util.lf("Return the first number raised to the power of the second number.")},operators:{OP:["ADD","MINUS","MULTIPLY","DIVIDE","POWER"]},category:"math",block:{MATH_ADDITION_SYMBOL:o.Util.lf("{id:op}+"),MATH_SUBTRACTION_SYMBOL:o.Util.lf("{id:op}-"),MATH_MULTIPLICATION_SYMBOL:o.Util.lf("{id:op}"),MATH_DIVISION_SYMBOL:o.Util.lf("{id:op}"),MATH_POWER_SYMBOL:o.Util.lf("{id:op}**")}},math_modulo:{name:o.Util.lf("division remainder"),tooltip:o.Util.lf("Return the remainder from dividing the two numbers."),url:"/blocks/math",category:"math",block:{MATH_MODULO_TITLE:o.Util.lf("remainder of %1  %2")}},math_js_op:{name:o.Util.lf("math function"),tooltip:{sin:o.Util.lf("Returns the sine of the argument"),cos:o.Util.lf("Returns the cosine of the argument"),tan:o.Util.lf("Returns the tangent of the argument"),sqrt:o.Util.lf("Returns the square root of the argument"),ceil:o.Util.lf("Returns the lowest integer value greater than or equal to the argument"),floor:o.Util.lf("Returns the highest integer value lesser than or equal to the argument"),atan2:o.Util.lf("Returns the arctangent of the quotient of the two arguments")},url:"/blocks/math",operators:{OP:["sqrt","sin","cos","tan","ceil","floor","atan2"]},category:"math",block:{sin:o.Util.lf("{id:op}sin"),cos:o.Util.lf("{id:op}cos"),tan:o.Util.lf("{id:op}tan"),sqrt:o.Util.lf("{id:op}square root"),ceil:o.Util.lf("{id:op}ceiling"),floor:o.Util.lf("{id:op}floor"),atan2:o.Util.lf("{id:op}atan2")}},variables_change:{name:o.Util.lf("update the value of a number variable"),tooltip:o.Util.lf("Changes the value of the variable by this amount"),url:"/blocks/variables/change",category:"variables",block:{message0:o.Util.lf("change %1 by %2")}},controls_repeat_ext:{name:o.Util.lf("a loop that repeats and increments an index"),tooltip:o.Util.lf("Do some statements several times."),url:"/blocks/loops/repeat",category:"loops",block:{CONTROLS_REPEAT_TITLE:o.Util.lf("repeat %1 times"),CONTROLS_REPEAT_INPUT_DO:o.Util.lf("{id:repeat}do")}},variables_get:{name:o.Util.lf("get the value of a variable"),tooltip:o.Util.lf("Returns the value of this variable."),url:"/blocks/variables",category:"variables",block:{VARIABLES_GET_CREATE_SET:o.Util.lf("Create 'set %1'")}},variables_get_reporter:{name:o.Util.lf("get the value of a variable"),tooltip:o.Util.lf("Returns the value of this variable."),url:"/blocks/variables",category:"variables",block:{VARIABLES_GET_CREATE_SET:o.Util.lf("Create 'set %1'")}},variables_set:{name:o.Util.lf("assign the value of a variable"),tooltip:o.Util.lf("Sets this variable to be equal to the input."),url:"/blocks/variables/assign",category:"variables",block:{VARIABLES_SET:o.Util.lf("set %1 to %2")}},controls_if:{name:o.Util.lf("a conditional statement"),tooltip:{CONTROLS_IF_TOOLTIP_1:o.Util.lf("If a value is true, then do some statements."),CONTROLS_IF_TOOLTIP_2:o.Util.lf("If a value is true, then do the first block of statements. Otherwise, do the second block of statements."),CONTROLS_IF_TOOLTIP_3:o.Util.lf("If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements."),CONTROLS_IF_TOOLTIP_4:o.Util.lf("If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.")},tooltipSearch:"CONTROLS_IF_TOOLTIP_2",url:"/blocks/logic/if",category:"logic",block:{CONTROLS_IF_MSG_IF:o.Util.lf("{id:logic}if"),CONTROLS_IF_MSG_THEN:o.Util.lf("{id:logic}then"),CONTROLS_IF_MSG_ELSE:o.Util.lf("{id:logic}else"),CONTROLS_IF_MSG_ELSEIF:o.Util.lf("{id:logic}else if")}},lists_create_with:{name:o.Util.lf("create an array"),tooltip:o.Util.lf("Creates a new array."),url:"/reference/arrays/create",category:"arrays",blockTextSearch:"LISTS_CREATE_WITH_INPUT_WITH",block:{LISTS_CREATE_EMPTY_TITLE:o.Util.lf("empty array"),LISTS_CREATE_WITH_INPUT_WITH:o.Util.lf("array of"),LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:o.Util.lf("array"),LISTS_CREATE_WITH_ITEM_TITLE:o.Util.lf("value")}},lists_length:{name:o.Util.lf("array length"),tooltip:o.Util.lf("Returns the number of items in an array."),url:"/reference/arrays/length",category:"arrays",block:{LISTS_LENGTH_TITLE:o.Util.lf("length of array %1")}},lists_index_get:{name:o.Util.lf("get a value in an array"),tooltip:o.Util.lf("Returns the value at the given index in an array."),url:"/reference/arrays/get",category:"arrays",block:{message0:o.Util.lf("%1 get value at %2")}},lists_index_set:{name:o.Util.lf("set a value in an array"),tooltip:o.Util.lf("Sets the value at the given index in an array"),url:"/reference/arrays/set",category:"arrays",block:{message0:o.Util.lf("%1 set value at %2 to %3")}},logic_compare:{name:o.Util.lf("comparing two numbers"),tooltip:{LOGIC_COMPARE_TOOLTIP_EQ:o.Util.lf("Return true if both inputs equal each other."),LOGIC_COMPARE_TOOLTIP_NEQ:o.Util.lf("Return true if both inputs are not equal to each other."),LOGIC_COMPARE_TOOLTIP_LT:o.Util.lf("Return true if the first input is smaller than the second input."),LOGIC_COMPARE_TOOLTIP_LTE:o.Util.lf("Return true if the first input is smaller than or equal to the second input."),LOGIC_COMPARE_TOOLTIP_GT:o.Util.lf("Return true if the first input is greater than the second input."),LOGIC_COMPARE_TOOLTIP_GTE:o.Util.lf("Return true if the first input is greater than or equal to the second input.")},url:"/blocks/logic/boolean",category:"logic",block:{search:"=  <  > "}},logic_operation:{name:o.Util.lf("boolean operation"),tooltip:{LOGIC_OPERATION_TOOLTIP_AND:o.Util.lf("Return true if both inputs are true."),LOGIC_OPERATION_TOOLTIP_OR:o.Util.lf("Return true if at least one of the inputs is true.")},url:"/blocks/logic/boolean",category:"logic",block:{LOGIC_OPERATION_AND:o.Util.lf("{id:op}and"),LOGIC_OPERATION_OR:o.Util.lf("{id:op}or")}},logic_negate:{name:o.Util.lf("logical negation"),tooltip:o.Util.lf("Returns true if the input is false. Returns false if the input is true."),url:"/blocks/logic/boolean",category:"logic",block:{LOGIC_NEGATE_TITLE:o.Util.lf("not %1")}},logic_boolean:{name:o.Util.lf("a `true` or `false` value"),tooltip:o.Util.lf("Returns either true or false."),url:"/blocks/logic/boolean",category:"logic",block:{LOGIC_BOOLEAN_TRUE:o.Util.lf("{id:boolean}true"),LOGIC_BOOLEAN_FALSE:o.Util.lf("{id:boolean}false")}},text:{name:o.Util.lf("a piece of text"),tooltip:o.Util.lf("A letter, word, or line of text."),url:"types/string",category:"text",block:{search:o.Util.lf("a piece of text")}},text_length:{name:o.Util.lf("number of characters in the string"),tooltip:o.Util.lf("Returns the number of letters (including spaces) in the provided text."),url:"reference/text/length",category:"text",block:{TEXT_LENGTH_TITLE:o.Util.lf("length of %1")}},text_join:{name:o.Util.lf("join items to create text"),tooltip:o.Util.lf("Create a piece of text by joining together any number of items."),url:"reference/text/join",category:"text",block:{TEXT_JOIN_TITLE_CREATEWITH:o.Util.lf("join")}},procedures_defnoreturn:{name:o.Util.lf("define the function"),tooltip:o.Util.lf("Create a function."),url:"types/function/define",category:"functions",block:{PROCEDURES_DEFNORETURN_TITLE:o.Util.lf("function"),PROCEDURE_ALREADY_EXISTS:o.Util.lf("A function named '%1' already exists.")}},procedures_callnoreturn:{name:o.Util.lf("call the function"),tooltip:o.Util.lf("Call the user-defined function."),url:"types/function/call",category:"functions",block:{PROCEDURES_CALLNORETURN_TITLE:o.Util.lf("call function")}}})[pxtc.ON_START_TYPE]={name:o.Util.lf("on start event"),tooltip:o.Util.lf("Run code when the program starts"),url:"/blocks/on-start",category:"loops",block:{message0:o.Util.lf("on start %1 %2")}},t[pxtc.PAUSE_UNTIL_TYPE]={name:o.Util.lf("pause until"),tooltip:o.Util.lf("Pause execution of code until the given boolean expression is true"),url:"/blocks/pause-until",category:"loops",block:{message0:o.Util.lf("pause until %1")}}}r.MATH_FUNCTIONS={unary:["sqrt","sin","cos","tan","ceil","floor"],binary:["atan2"]},r.builtinFunctionInfo={"Math.abs":{blockId:"math_op3",params:["x"]},"Math.min":{blockId:"math_op2",params:["x","y"]},"Math.max":{blockId:"math_op2",params:["x","y"]}},r.normalizeBlock=function(e){if(!e)return e;var t=e.replace(/%\s+/g,"%");return t!=e?(o.log("block has extra spaces: "+e),e):t=t.replace(/\s*\|\s*/g,"|")},r.compileInfo=function(n){var i={parameters:[],actualNameToParam:{},definitionNameToParam:{},handlerArgs:[]},e=(n.kind==ts.pxtc.SymbolKind.Method||n.kind==ts.pxtc.SymbolKind.Property)&&!n.attributes.defaultInstance,a=!!n.attributes._def,s=a?n.attributes._def.parameters.slice(0):void 0,l=a?s.length:n.parameters?n.parameters.length:0,c=r.builtinFunctionInfo[n.qName];a&&n.attributes._expandedDef&&s.push.apply(s,n.attributes._expandedDef.parameters);var u={},g=s?s.filter(function(e){return!e.ref||(u[e.name]=e,!1)}):[];if(e&&a&&s.length){var t=u[h]||s[0],o=t.name;i.thisParameter={actualName:h,definitionName:o,shadowBlockId:t.shadowBlockId,type:n.namespace,fieldEditor:d(o,h),fieldOptions:_(o,h),shadowOptions:f(o,h)}}if(n.parameters){var p=e&&!u[h]?1:0;n.parameters.forEach(function(e,t){var n;if(u[e.name]?n=u[e.name]:p<g.length&&(n=g[p],++p),n||!a){var o=void 0;e.options&&e.options.min&&e.options.max&&(o={min:e.options.min.value,max:e.options.max.value});var r=n?n.name:c?c.params[p++]:e.name;i.parameters.push({actualName:e.name,type:e.type,defaultValue:e.default,definitionName:r,shadowBlockId:n&&n.shadowBlockId,isOptional:!!s&&s.indexOf(n)>=l,fieldEditor:d(r,e.name),fieldOptions:_(r,e.name),shadowOptions:f(r,e.name),range:o})}e.handlerParameters&&e.handlerParameters.forEach(function(t){i.handlerArgs.push({name:t.name,type:t.type,inBlockDef:!!s&&s.some(function(e){return e.ref&&e.name===t.name})})})})}return i.parameters.forEach(function(e){i.actualNameToParam[e.actualName]=e,i.definitionNameToParam[e.definitionName]=e}),i;function d(e,t){return n.attributes.paramFieldEditor&&(n.attributes.paramFieldEditor[e]||n.attributes.paramFieldEditor[t])}function _(e,t){return n.attributes.paramFieldEditorOptions&&(n.attributes.paramFieldEditorOptions[e]||n.attributes.paramFieldEditorOptions[t])}function f(e,t){return n.attributes.paramShadowOptions&&(n.attributes.paramShadowOptions[e]||n.attributes.paramShadowOptions[t])}},r.parseFields=function(e){return e.split("|").map(function(e,t){var n=/([^%]*)\s*%([a-zA-Z0-9_]+)/.exec(e);if(!n)return{n:e,ni:t};var o=n[1];return o&&(o=o.trim()),{n:e,ni:t,pre:o,p:n[2]}})},r.blockDefinitions=function(){return t||n(),t},r.getBlockDefinition=function(e){return t||n(),t[e]}}(o.blocks||(o.blocks={}))}(pxt||(pxt={})),function(A){!function(e){function t(){return"undefined"!=typeof navigator}function n(){return t()&&/(Win32|Win64|WOW64)/i.test(navigator.platform)}function g(){return t()&&/mobi/i.test(navigator.userAgent)}function o(){return t()&&/Mac/i.test(navigator.platform)}function u(){return!!navigator&&/Linux/i.test(navigator.platform)}function p(){return t()&&/arm/i.test(navigator.platform)}function d(){return t()&&/Edge/i.test(navigator.userAgent)}function _(){return t()&&/Trident/i.test(navigator.userAgent)}function f(){return!d()&&!_()&&!!navigator&&(/Chrome/i.test(navigator.userAgent)||/Chromium/i.test(navigator.userAgent))}function h(){return!f()&&!d()&&!!navigator&&/(Safari|iPod|iPhone|iPad)/i.test(navigator.userAgent)}function m(){return!h()&&!!navigator&&(/Firefox/i.test(navigator.userAgent)||/Seamonkey/i.test(navigator.userAgent))}function y(){return t()&&/Opera|OPR/i.test(navigator.userAgent)}function v(){return t()&&/Midori/i.test(navigator.userAgent)}function b(){return t()&&/Epiphany/i.test(navigator.userAgent)}function k(){return n()?"windows":o()?"mac":u()&&p()?"rpi":u()?"linux":"unknown"}function T(){return d()?"edge":b()?"epiphany":v()?"midori":y()?"opera":_()?"ie":f()?"chrome":h()?"safari":m()?"firefox":"unknown"}function E(){if(!t())return null;var e=[];return y()&&(e=/(Opera|OPR)\/([0-9\.]+)/i.exec(navigator.userAgent)),b()?e=/Epiphany\/([0-9\.]+)/i.exec(navigator.userAgent):v()?e=/Midori\/([0-9\.]+)/i.exec(navigator.userAgent):h()?(e=/Version\/([0-9\.]+)/i.exec(navigator.userAgent))||(e=/(iPod|iPhone|iPad); CPU .*?OS (\d+)/i.exec(navigator.userAgent)):e=f()?/(Chrome|Chromium)\/([0-9\.]+)/i.exec(navigator.userAgent):d()?/Edge\/([0-9\.]+)/i.exec(navigator.userAgent):_()?/(MSIE |rv:)([0-9\.]+)/i.exec(navigator.userAgent):/(Firefox|Seamonkey)\/([0-9\.]+)/i.exec(navigator.userAgent),e&&0!=e.length?e[e.length-1]:null}e.isIFrame=function(){try{return window&&window.self!==window.top}catch(e){return!0}},e.hasNavigator=t,e.isWindows=n,e.isWindows10=function(){return t()&&/(Win32|Win64|WOW64)/i.test(navigator.platform)&&/Windows NT 10/i.test(navigator.userAgent)},e.isMobile=g,e.isMac=o,e.isLinux=u,e.isARM=p,e.isUwpEdge=function(){return"undefined"!=typeof window&&!!window.Windows},e.isEdge=d,e.isIE=_,e.isChrome=f,e.isSafari=h,e.isFirefox=m,e.isOpera=y,e.isMidori=v,e.isEpiphany=b,e.isTouchEnabled=function(){return"undefined"!=typeof window&&("ontouchstart"in window||0<navigator.maxTouchPoints)},e.hasPointerEvents=function(){return"undefined"!=typeof window&&!!window.PointerEvent},e.hasSaveAs=function(){return d()||_()||m()},e.os=k,e.browser=T,e.browserVersion=E;var r,S=!1;function C(){return g()&&h()&&!/downloadWindowOpen=0/i.test(window.location.href)}function l(e,t,n){var o=C(),r=E(),i=parseInt(r||"0");if(o)n?n.location.href=e:window.open(e,"_self");else if(A.BrowserUtils.isSafari()&&(i<10||0==r.indexOf("10.0")||g())){var a=document.getElementById("downloader");a||(A.debug("injecting downloader iframe"),(a=document.createElement("iframe")).id="downloader",a.style.position="absolute",a.style.right="0",a.style.bottom="0",a.style.zIndex="-1",a.style.width="1px",a.style.height="1px",document.body.appendChild(a)),a.src=e}else if(A.BrowserUtils.isEdge()||A.BrowserUtils.isIE()){var s=atob(e.split(",")[1]),l=A.Util.stringToUint8Array(s),c=new Blob([l],{type:"img/png"});window.navigator.msSaveOrOpenBlob(c,t)}else{var u=window.document.createElement("a");"string"==typeof u.download?(u.href=e,u.download=t,document.body.appendChild(u),u.click(),document.body.removeChild(u)):document.location.href=e}}function c(e,t){var n="data";g()&&h()&&A.appTarget.appTheme.mobileSafariDownloadProtocol&&(n=A.appTarget.appTheme.mobileSafariDownloadProtocol);var o=/downloadProtocol=([a-z0-9:/?]+)/i.exec(window.location.href);return o&&(n=o[1]),n+":"+t+";base64,"+e}function i(e,t,n,o,r){void 0===n&&(n="application/octet-stream"),A.debug("trigger download");var i=window.navigator.msSaveOrOpenBlob&&!A.BrowserUtils.isMobile(),a=c(e,t);try{if(i){var s=new Blob([A.Util.stringToUint8Array(atob(e))],{type:n});window.navigator.msSaveOrOpenBlob(s,t)}else l(a,t,o)}catch(e){r&&r(e),A.debug("saving failed")}return a}function a(e){if(/^https?:\/\//i.test(e))return e;var t=(window.MonacoPaths||{})[e];return t||(A.U.startsWith(e,A.webConfig.commitCdnUrl)?e:A.webConfig.commitCdnUrl+e)}function x(e){return e&&A.getOnlineCdnUrl()?e.replace("@cdnUrl@",A.getOnlineCdnUrl()):e}e.isBrowserSupported=function(){if(!navigator)return!0;if(/bot|crawler|spider|crawling/i.test(navigator.userAgent))return!0;var e=E(),t=parseInt(e||"0"),n=f()&&38<=t,o=m()&&31<=t,r=d(),i=h()&&9<=t,a=y()&&f()&&21<=t,s=_()&&11<=t,l=n||o||r||i||a||s,c=v()||u()&&p()&&b();return l=(l=l&&!c)||/anybrowser=(true|1)/.test(window.location.href),S||(A.log("Browser: "+T()+" "+e+" on "+k()),l||A.tickEvent("browser.unsupported."+navigator.userAgent),S=!0),l},e.devicePixelRatio=function(){return"undefined"!=typeof window&&window.screen?void 0!==window.screen.systemXDPI&&void 0!==window.screen.logicalXDPI&&window.screen.systemXDPI>window.screen.logicalXDPI?window.screen.systemXDPI/window.screen.logicalXDPI:window&&void 0!==window.devicePixelRatio?window.devicePixelRatio:1:1},e.browserDownloadBinText=function(e,t,n,o,r){return void 0===n&&(n="application/octet-stream"),i(ts.pxtc.encodeBase64(e),t,n,o,r)},e.browserDownloadText=function(e,t,n,o,r){return void 0===n&&(n="application/octet-stream"),i(ts.pxtc.encodeBase64(A.Util.toUTF8(e)),t,n,o,r)},e.isBrowserDownloadInSameWindow=C,e.isBrowserDownloadWithinUserContext=function(){var e=E(),t=parseInt(e||"0");return g()&&h()&&11<=t||/downloadUserContext=1/i.test(window.location.href)},e.browserDownloadDataUri=l,e.browserDownloadUInt8Array=function(e,t,n,o,r){return void 0===n&&(n="application/octet-stream"),i(ts.pxtc.encodeBase64(A.Util.uint8ArrayToString(e)),t,n,o,r)},e.toDownloadDataUri=c,e.browserDownloadBase64=i,e.loadImageAsync=function(n){var o=document.createElement("img");return new Promise(function(e,t){o.onload=function(){return e(o)},o.onerror=function(){return e(void 0)},o.crossOrigin="anonymous",o.src=n})},e.loadStyleAsync=function(e,t){t&&(e="rtl"+e);var o="style-"+e;if(document.getElementById(o))return Promise.resolve();var r=a(e),n=A.Util.toArray(document.head.getElementsByTagName("link")).filter(function(e){return e.getAttribute("href")==r})[0];return n?(n.id||(n.id=o),Promise.resolve()):new Promise(function(e,t){var n=document.createElement("link");n.href=r,n.rel="stylesheet",n.type="text/css",n.id=o,n.addEventListener("load",function(){return e()}),n.addEventListener("error",function(e){return t(e)}),document.head.appendChild(n)})},e.loadScriptAsync=function(e){var o=a(e);return A.debug("script: loading "+o),new Promise(function(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=o,n.async=!0,n.addEventListener("load",function(){return e()}),n.addEventListener("error",function(e){return t(e)}),document.body.appendChild(n)})},e.loadAjaxAsync=function(o){return new Promise(function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){n.readyState==XMLHttpRequest.DONE&&(200==n.status?e(n.responseText):t(n.status))},n.open("GET",o,!0),n.send()})},e.loadBlocklyAsync=function(){if(!r){A.debug("blockly: delay load");var e=A.BrowserUtils.loadStyleAsync("blockly.css",ts.pxtc.Util.isUserLanguageRtl());void 0===Blockly&&(e=e.then(function(){return A.BrowserUtils.loadScriptAsync("pxtblockly.js")})),e=e.then(function(){A.debug("blockly: loaded")}),r=e}return r},e.patchCdn=x,e.initTheme=function(){var e=A.appTarget.appTheme;if(e&&e.accentColor){var t=document.createElement("style");t.type="text/css",t.appendChild(document.createTextNode(".ui.accent { color: "+e.accentColor+"; }\n                .ui.inverted.menu .accent.active.item, .ui.inverted.accent.menu  { background-color: "+e.accentColor+"; }")),document.getElementsByTagName("head")[0].appendChild(t)}if(A.Util.isUserLanguageRtl()){A.debug("rtl layout"),document.body.classList.add("rtl"),document.body.style.direction="rtl";var n=A.Util.toArray(document.head.getElementsByTagName("link")),o=n.filter(function(e){return A.Util.endsWith(e.getAttribute("href"),"semantic.css")})[0];if(o){var r=o.getAttribute("data-rtl");r&&(A.debug("swapping to "+r),o.setAttribute("href",r))}var i=n.filter(function(e){return A.Util.endsWith(e.getAttribute("href"),"blockly.css")})[0];if(i){var a=i.getAttribute("data-rtl");a&&(A.debug("swapping to "+a),i.setAttribute("href",a),i.removeAttribute("data-rtl"))}}var s=A.appTarget.simulator;if(s&&s.boardDefinition&&s.boardDefinition.visual){var l=s.boardDefinition.visual;l.image&&(l.image=x(l.image),l.outlineImage&&(l.outlineImage=x(l.outlineImage)))}Object.keys(A.appTarget.bundledpkgs).forEach(function(e){var t=A.appTarget.bundledpkgs[e],n=JSON.parse(t[A.CONFIG_NAME]);n.icon&&(n.icon=x(n.icon)),t[A.CONFIG_NAME]=JSON.stringify(n,null,4)})},e.changeHash=function(e,t){"#"!=e.charAt(0)&&(e="#"+e),t?window.location.hash=e:window.history.replaceState("","",e)}}(A.BrowserUtils||(A.BrowserUtils={}))}(pxt||(pxt={})),function(e){var t;(t=e.commands||(e.commands={})).deployCoreAsync=void 0,t.browserDownloadAsync=void 0,t.saveOnlyAsync=void 0,t.showUploadInstructionsAsync=void 0,t.saveProjectAsync=void 0}(pxt||(pxt={})),function(r){function e(){var e;return e||(e=r.U.isNodeJS?Promise.resolve(require("lzma")):Promise.resolve(window.LZMA)).then(function(e){return e||r.reportError("lzma","failed to load"),e}),e}r.lzmaDecompressAsync=function(o){return e().then(function(t){return new Promise(function(n,e){try{t.decompress(o,function(e,t){t&&r.debug("lzma decompression failed"),n(t?void 0:e)})}catch(e){e&&r.debug("lzma decompression failed"),n(void 0)}})})},r.lzmaCompressAsync=function(o){return e().then(function(t){return new Promise(function(n,e){try{t.compress(o,7,function(e,t){t&&r.reportException(t),n(t?void 0:new Uint8Array(e))})}catch(e){r.reportException(e),n(void 0)}})})}}(pxt||(pxt={})),function(we){!function(e){var Ce,xe,Ae=pxtc.Util,De=Ae.lf;function Be(n){void 0===n&&(n="namespace");var o="",r="",e=function(e,t){void 0===t&&(t=""),r!=e&&(r&&(o+="}\n"),e&&(o+=t||n+" "+e+" {\n"),r=e)},t="    ";return{setNs:e,clear:function(){r=o=""},write:function(e){e.trim()?(e=e.trim().replace(/^\s*/gm,t).replace(/^(\s*)\*/gm,function(e,t){return t+" *"}),o+=e+"\n"):o+="\n"},incrIndent:function(){t+="    "},decrIndent:function(){t=t.slice(4)},finish:function(){return e(""),o}}}function Ie(e){if(!e)return null;e=e.trim();var t=/^\((.*)\)/.exec(e);return t&&(e=t[1]),/^-?(\d+|0[xX][0-9a-fA-F]+)$/.test(e)?parseInt(e):null}e.nsWriter=Be,e.parseCppInt=Ie;var Ne=function(n){function e(e){var t=n.call(this,e)||this;return t.isUserError=!0,t.message=e,t}return __extends(e,n),e}(Error);function c(e){if(!e)return"";for(var t="",n=0;n<e.length;++n){var o=255&e[n];t+=37==o||127<o?"%"+o.toString(16):String.fromCharCode(o)}return decodeURIComponent(t)}function u(e){for(var t="",n=0;n<e.length;n+=2)t=e[n]+e[n+1]+t;return we.Util.assert(n==e.length),t}function i(e){var t=[65,20,14,47,184,47,162,187];e:for(var n=0;n<e.length;n+=16)if(e[n]==t[0]){for(var o=0;o<t.length;++o)if(e[n+o]!=t[o])continue e;var r=e[n+8]|e[n+9]<<8,i=e[n+10]|e[n+11]<<8|e[n+12]<<16|e[n+13]<<24,a=(n+=16)+r+i;if(!(a>e.length)){var s=e.slice(n,n+r),l=e.slice(n+r,a);return{meta:c(s),text:l}}}return null}function t(e){function t(e){return we.debug(e),Promise.reject(new Error(e))}var n;if(we.HF2.read32(e,0)==ts.pxtc.UF2.UF2_MAGIC_START0){var o=ts.pxtc.UF2.toBin(e);o&&(n=i(o.buf))}(1179403647==we.HF2.read32(e,0)&&(n=i(e)),58==e[0])&&(n=function(e){if(e){var o,r=0,i=0,a=0,s=0;if(e.split(/\r?\n/).forEach(function(e){var t=/^:10....0041140E2FB82FA2BB(....)(....)(....)(....)(..)/.exec(e);if(t)r=parseInt(u(t[1]),16),i=parseInt(u(t[2]),16),a=r+i,o=new Uint8Array(a);else if(0<a){if(!(t=/^:10....00(.*)(..)$/.exec(e)))return;for(var n=t[1];0<a&&0<n.length;)o[s++]=parseInt(n[0]+n[1],16),n=n.slice(2),a--}}),o&&0==a&&s==o.length){for(var t=new Uint8Array(r),n=new Uint8Array(i),l=0;l<r;++l)t[l]=o[l];for(l=0;l<i;++l)n[l]=o[r+l];return{meta:c(t),text:n}}}}(c(e)||""));if(!n||!n.meta||!n.text)return t("This .hex file doesn't contain source.");var r=JSON.parse(n.meta);return r?"LZMA"==r.compression?we.lzmaDecompressAsync(n.text).then(function(e){if(!e)return null;var t=e.slice(0,r.headerSize||r.metaSize||0),n=e.slice(t.length);return t&&we.Util.jsonCopyFrom(r,JSON.parse(t)),{meta:r,source:n}}):r.compression?t("Compression type "+r.compression+" not supported."):Promise.resolve({source:c(n.text)}):t("This .hex file is not valid.")}e.PkgConflictError=Ne,e.getExtensionInfo=function(e){for(var t={},n="dal.d.ts",o="/source/",r=0,i=e.sortedDeps();r<i.length;r++)(re=i[r]).addSnapshot(t,[n,".h",".cpp"]);if(xe&&Ae.stringMapEq(t,xe))return we.debug("Using cached extinfo"),Ce;we.debug("Generating new extinfo");var T=pxtc.emptyExtInfo(),a=we.appTarget.compileService;a||(a={gittag:"none",serviceId:"nocompile"}),a=Ae.clone(a);var s=we.appTarget.compile;s||(s={isNative:!1,hasHex:!1});var l=s.nativeType==pxtc.NATIVE_TYPE_CS,c=!!a.platformioIni,u="codal"==a.buildEngine,g="dockermake"==a.buildEngine,E=!(l||c||u||g);c?o="/src/":(u||g)&&(o="/pxtapp/");var p="// Configuration defines\n",S="\nPXT_SHIMS_BEGIN\n",C="",d='#include "pxt.h"\n',_="",f="",x=function(e){return f+="   "+h+"("+A+"): "+e+"\n"},A=0,h="",D=Be("namespace"),B=Be("declare namespace"),I=Be("declare namespace"),m="",N={},y={true:"1",false:"0",null:"0",NULL:"0"};function w(e){return e.trim().replace(/[\_\*]$/,"")}for(var v="",b=0,k=e.sortedDeps();b<k.length;b++){if(0<=(re=k[b]).getFiles().indexOf(n)){var O=re.host().readFile(re,n);we.Util.assert(!!O,n+" not found in "+re.id),O.split(/\r?\n/).forEach(function(e){var t=/^\s*(\w+) = (.*),/.exec(e);t&&(y[t[1]]=t[2])})}!v&&0<=re.getFiles().indexOf("Makefile")&&(v=re.host().readFile(re,"Makefile"))}function R(e){return e.replace(/\/\/.*/,"").replace(/\/\*/,"")}var L=0,P=!1,M="",F="",U="",H=!1,G="";function V(e){return P?(G+=e+"\n",!0):/^\s*\/\*\*/.test(e)?(H=!0,F=e+"\n",/\*\//.test(e)&&(H=!1),G+="//\n",!0):H?(F+=e+"\n",/\*\//.test(e)&&(H=!1),G+="//\n",!0):/^\s*\/\/%/.test(e)?(U+=e+"\n",G+="//\n",!0):(G+=e+"\n",!1)}function W(e,t){P=!0,L=-1,I.write(""),I.write(""),(U||F)&&(I.write(F),I.write(U),F=U=""),I.write("declare const enum "+w(e)+" "+t),N[e]=!0}function K(e){var t=R(e);if(P&&0<=t.indexOf("}")&&(P=!1,I.write("}")),P){var n=/^\s*(\w+)\s*(=\s*(.*?))?,?\s*$/.exec(t);if(n){var o=n[1],r=n[3],i="";if(r){r=r.trim();var a=Ae.lookup(y,r);null!=a&&(i="  // "+r,r=a),null==(L=Ie(r))&&x("cannot determine value of "+t)}else r=++L+"";I.write("    "+w(o)+" = "+r+","+i)}else I.write(e)}}function z(){B.setNs(""),B.write(""),B.write(""),(U||F)&&(B.write(F),B.write(U),F=U="")}function j(e,t){t=t.trim();var n=/(.*)=\s*(-?\w+)$/.exec(t),o="",r="";if(n&&(o=n[2],r="?",t=n[1].trim()),!(n=/^(.*?)(\w+)$/.exec(t)))return x("invalid argument: "+t),{name:"???",type:"int"};var i=n[2];e.paramDefl[i]&&(o=e.paramDefl[i],r="?");var a=o?Ae.lookup(y,o):null;return null!=a&&(o=a),o&&(null==Ie(o)&&x("Invalid default value (non-integer): "+o),U+=" "+i+".defl="+o),{name:i+r,type:n[1]}}function Y(e,h){var m;U=F=M="",H=!1;var y=-1;function v(){var e=M.replace(/Methods$/,"");return e==M?null:e}function b(e){switch(e.replace(/\s+/g,"")){case"void":return"void";case"int32_t":case"int":return"int32";case"uint32_t":case"unsigned":return"uint32";case"TNumber":case"float":case"double":return"number";case"uint16_t":return"uint16";case"int16_t":case"short":return"int16";case"uint8_t":case"byte":return"uint8";case"int8_t":case"sbyte":return"int8";case"bool":return s.shortPointers&&x("use 'boolean' not 'bool' on 8 bit targets"),"boolean";case"StringData*":case"String":case"ImageLiteral_":case"ImageLiteral":return"string";case"Action":return"() => void";case"TValue":return"any";default:return w(e)}}function k(e){switch(e=e.replace(/\s+/g,"")){case"int32_t":case"uint32_t":case"unsigned":case"uint16_t":case"int16_t":case"short":case"uint8_t":case"byte":case"int8_t":case"sbyte":case"int":return"I";case"void":return"V";case"float":return"F";case"TNumber":return"N";case"TValue":return"T";case"bool":return"B";case"double":return"D";case"ImageLiteral_":return"T";default:return Ae.lookup(N,e)?"I":"_"}}return e=e.replace(/^\s*#\s*if\s+0\s*$[^]*?^\s*#\s*endif\s*$/gm,function(e){return e.replace(/[^\n]/g,"")}),G="",P=!1,L=A=0,I.setNs(""),B.setNs(""),e.split(/\r?\n/).forEach(function(e){++A;var t=R(e);K(e);var n=/^\s*enum\s+(|class\s+|struct\s+)(\w+)\s*({|$)/.exec(t);if(n&&(W(n[2],n[3]),h||(D.setNs(M),D.write("enum "+n[2]+" : int;"))),!V(e)){/^typedef.*;\s*$/.test(e)&&(D.setNs(M),D.write(e));var o=/^\s*namespace\s+(\w+)/.exec(e);if(!o){if((o=/^PXT_ABI\((\w+)\)/.exec(e))&&(S+="PXT_FNPTR(::"+o[1]+"),\n",C+='extern "C" void '+o[1]+"();\n",T.functions.push({name:o[1],argsFmt:"",value:0})),(o=/^#define\s+PXT_COMM_BASE\s+([0-9a-fx]+)/.exec(e))&&(T.commBase=parseInt(o[1])),o=/^\s*(\w+)([\*\&]*\s+[\*\&]*)(\w+)\s*\(([^\(\)]*)\)\s*(;\s*$|\{|$)/.exec(e),U&&o){m=null;var r=pxtc.parseCommentString(U);M||x("missing namespace declaration");var i=(o[1]+o[2]).replace(/\s+/g,""),a=o[3],s=o[4];U=U.trim().replace(/ \w+\.defl=\w+/g,"");var l=k(i),c=s.split(/,/).filter(function(e){return!!e}).map(function(e){var t=j(r,e);return l+=k(t.type),t.name+": "+b(t.type)}),u=(c.length,{name:M+"::"+a,argsFmt:l,value:null});if(F)if(B.setNs(w(M)),B.write(""),B.write(F),/ImageLiteral/.test(o[4])&&!/imageLiteral=/.test(U)&&(U+=" imageLiteral=1"),U+=" shim="+u.name,B.write(U),a=w(a),v()){var g=(c[0]||"").replace(/^.*:\s*/,"").trim();g.toLowerCase()!=v().toLowerCase()&&x(De("Invalid first argument; should be of type '{0}', but is '{1}'",v(),g)),c.shift(),0==c.length&&/\bproperty\b/.test(U)?B.write(a+": "+b(i)+";"):B.write(a+"("+c.join(", ")+"): "+b(i)+";")}else B.write("function "+a+"("+c.join(", ")+"): "+b(i)+";");return U=F="",h||(D.setNs(M),D.write(i+" "+a+"("+s+");")),T.functions.push(u),void(S+=E?"(uint32_t)(void*)::"+u.name+",\n":"PXT_FNPTR(::"+u.name+"),\n")}if(o=/^\s*(\w+)\s+(\w+)\s*;/.exec(e),U&&o){var p=pxtc.parseCommentString(U);p.indexedInstanceNS&&(m=p,B.setNs(p.indexedInstanceNS),y=0);var d=o[1],_=o[2];if(m)return U=U.trim(),U+=" fixedInstance shim="+m.indexedInstanceShim+"("+y+++")",B.write(""),B.write(F),B.write(U),B.write("const "+_+": "+b(d)+";"),void(U=F="")}return U&&e.trim()?(x("declaration not understood: "+e),void(F=U="")):void 0}if(M=o[1],v()){z();var f=v();B.setNs(M,"declare interface "+f+" {")}else(U||F)&&(z(),B.setNs(w(M)),I.setNs(w(M)))}}),G}function X(e){function y(e){switch(e.replace(/\s+/g,"")){case"void":return"void";case"int":return"int32";case"uint":return"uint32";case"float":case"double":return"number";case"ushort":return"uint16";case"short":return"int16";case"byte":return"uint8";case"sbyte":return"int8";case"bool":return"boolean";case"string":case"String":return"string";case"Function":return"() => void";case"object":return"any";default:return w(e)}}function v(e){return function(e){if(e=e.replace(/\s+/g,""),Ae.lookup(N,e))return!0;var t=y(e);return!("number"!=t&&!/^u?int\d+$/.test(t))}(e=e.replace(/\s+/g,""))&&(e="#"+e),e+";"}return U=F=M="",H=!1,e=e.replace(/^\s*#\s*if\s+false\s*$[^]*?^\s*#\s*endif\s*$/gm,function(e){return e.replace(/[^\n]/g,"")}),G="",P=!1,L=A=0,I.setNs(""),B.setNs(""),e.split(/\r?\n/).forEach(function(e){++A;var t=R(e);K(e);var n=/^\s*(public) enum\s+(\w+)\s*({|$)/.exec(t);if(n&&W(n[2],n[3]),!V(e)){var o=/^\s*public (static\s+|partial\s+)*class\s+(\w+)/.exec(e);if(o)return M=o[2],void((U||F)&&(z(),B.setNs(w(M)),I.setNs(w(M))));if(o=/^\s*public static (async\s+)*([\w\[\]<>]+)\s+(\w+)\(([^\(\)]*)\)\s*(;\s*$|\{|$)/.exec(e),U&&o){var r=pxtc.parseCommentString(U);M||x("missing namespace declaration");var i=o[2],a=o[3],s=o[4],l=!1;if(U=U.trim().replace(/ \w+\.defl=\w+/g,""),"Task"==i)i="void",l=!0;else{var c=/^Task<(.*)>$/.exec(i);c&&(l=!0,i=c[1])}var u=v(i);l&&(u="async;"+u,U+=" async");for(var g=[],p=0,d=s.split(/,/);p<d.length;p++){var _=d[p];if(_){var f=j(r,_),h=v(f.type);u+=h,"CTX;"!=h&&g.push(f.name+": "+y(f.type))}}var m={name:M+"::"+a,argsFmt:u,value:null};return F&&(B.setNs(w(M)),B.write(""),B.write(F),U+=" shim="+m.name,B.write(U),a=w(a),B.write("function "+a+"("+g.join(", ")+"): "+y(i)+";")),U=F="",void T.functions.push(m)}return U&&e.trim()?(x("declaration not understood: "+e),void(F=U="")):void 0}}),G}var J=Ae.clone(a.yottaConfig||{}),q={},Z={};function $(e){var t=e.config.platformio;t&&t.dependencies&&Ae.jsonCopyFrom(T.platformio.dependencies,t.dependencies),T.npmDependencies&&e.config.npmDependencies&&Ae.jsonCopyFrom(T.npmDependencies,e.config.npmDependencies);var n=e.config.yotta;if(n){if(n.dependencies&&Ae.jsonCopyFrom(T.yotta.dependencies,n.dependencies),n.config)for(var o=Ae.jsonFlatten(n.config),r=0,i=Object.keys(o);r<i.length;r++){var a=i[r],s=Ae.lookup(Z,a),l=o[a];if(!s||s.config.yotta.configIsJustDefaults)Z[a]=e,J[a]=l;else if(J[a]===l);else if(!e.parent.config.yotta||!e.parent.config.yotta.ignoreConflicts){var c=new Ne(De("conflict on yotta setting {0} between packages {1} and {2}",a,e.id,s.id));throw c.pkg0=s,c.pkg1=e,c.settingName=a,c}}if(n.optionalConfig){o=Ae.jsonFlatten(n.optionalConfig);for(var u=0,g=Object.keys(o);u<g.length;u++)l=o[a=g[u]],q[a]=l}}}if(E&&s.hasHex){var Q=a;Ae.assert(!!Q.yottaCorePackage),Ae.assert(!!Q.githubCorePackage),Ae.assert(!!Q.gittag);var ee=Q.githubCorePackage+"#"+a.gittag;T.yotta.dependencies[Q.yottaCorePackage]=ee}if(e)for(var te=!1,ne=0,oe=e.sortedDeps();ne<oe.length;ne++){var re=oe[ne];f="",$(re),re==e?(te=!0,B.clear(),I.clear()):Ae.assert(!te);for(var ie=l?".cs":".cpp",ae=0,se=re.getFiles();ae<se.length;ae++){var le=se[ae],ce=!l&&Ae.endsWith(le,".h");if(ce||Ae.endsWith(le,ie)){var ue=re.config.name+"/"+le;"base"!=re.config.name&&"core"!=re.config.name||!ce||(ue=le),ce&&(d+='#include "'+(E?o.slice(1):"")+ue+'"\n'),null==(O=re.readFile(le))&&Ae.userError(De("C++ file {0} is missing in package {1}.",le,re.config.name)),h=ue,l?(we.debug("Parse C#: "+ue),X(O),_+='\n\n\n#line 1 "'+ue+'"\n'+O):(we.debug("Parse C++: "+ue),O=Y(O,ce),T.extensionFiles[o+ue]=O),0==re.level&&(T.onlyPublic=!1),re.verProtocol()&&"pub"!=re.verProtocol()&&"embed"!=re.verProtocol()&&(T.onlyPublic=!1)}!l&&(Ae.endsWith(le,".c")||Ae.endsWith(le,".S")||Ae.endsWith(le,".s"))&&(O=re.readFile(le),T.extensionFiles[o+re.config.name+"/"+le.replace(/\.S$/,".s")]=O)}f&&(m+=De("Package {0}:\n",re.id)+f)}m&&Ae.userError(m),_+="\n#line default\n",Ae.jsonCopyFrom(q,J);var ge=Ae.jsonUnFlatten(q);if(l)T.extensionFiles["/lib.cs"]=_,T.generatedFiles["/module.json"]="{}";else if(g){var pe={name:"pxt-app",private:!0,dependencies:T.npmDependencies};T.generatedFiles["/package.json"]=JSON.stringify(pe,null,4)+"\n"}else if(u){Q=a;var de=Ae.clone(Q.codalDefinitions)||{},_e=Q.codalTarget;"string"==typeof _e&&(_e+=".json");var fe={target:_e,definitions:de,config:de,application:"pxtapp",output_folder:"build",pxt_gitrepo:Q.githubCorePackage,pxt_gittag:Q.gittag};Ae.iterMap(Ae.jsonFlatten(ge),function(e,t){e=e.replace(/^codal\./,"device.").toUpperCase().replace(/\./g,"_"),de[e]=t}),T.generatedFiles["/codal.json"]=JSON.stringify(fe,null,4)+"\n"}else if(c){var he=a.platformioIni.slice();he.push("lib_deps ="),Ae.iterMap(T.platformio.dependencies,function(e,t){var n=/[@#\/]/.test(t)?t:e+"@"+t;he.push("  "+n)}),T.generatedFiles["/platformio.ini"]=he.join("\n")+"\n"}else{T.yotta.config=ge;var me="pxt-app";a.yottaBinary&&(me=a.yottaBinary.replace(/-combined/,"").replace(/\.hex$/,""));var ye={name:me,version:"0.0.0",description:"Auto-generated. Do not edit.",license:"n/a",dependencies:T.yotta.dependencies,targetDependencies:{},bin:"./source"};T.generatedFiles["/module.json"]=JSON.stringify(ye,null,4)+"\n"}if(s.boxDebug&&(p+="#define PXT_BOX_DEBUG 1\n",p+="#define PXT_MEMLEAK_DEBUG 1\n"),s.vtableShift&&(p+="#define PXT_VTABLE_SHIFT "+s.vtableShift+"\n"),s.nativeType==pxtc.NATIVE_TYPE_AVRVM?p+="#define PXT_VM 1\n":p+="#define PXT_VM 0\n",l||(T.generatedFiles[o+"pointers.cpp"]=d+D.finish()+C+S+"\nPXT_SHIMS_END\n",T.generatedFiles[o+"pxtconfig.h"]=p,E&&(T.generatedFiles["/config.json"]=JSON.stringify(ge,null,4)+"\n"),T.generatedFiles[o+"main.cpp"]='\n#include "pxt.h"\n#ifdef PXT_MAIN\nPXT_MAIN\n#else\nint main() {\n    uBit.init();\n    pxt::start();\n    while (1) uBit.sleep(10000);\n    return 0;\n}\n#endif\n'),v){var ve=Object.keys(T.extensionFiles).concat(Object.keys(T.generatedFiles)),be="",ke=function(e,t){var n=ve.filter(function(e){return Ae.endsWith(e,t)}).map(function(e){return e.slice(1)});be+=e+" = "+n.join(" ")+"\n"};ke("PXT_C",".c"),ke("PXT_CPP",".cpp"),ke("PXT_S",".s"),ke("PXT_HEADERS",".h"),be+="PXT_SOURCES = $(PXT_C) $(PXT_S) $(PXT_CPP)\n",be+="PXT_OBJS = $(addprefix bld/, $(PXT_C:.c=.o) $(PXT_S:.s=.o) $(PXT_CPP:.cpp=.o))\n",T.generatedFiles["/Makefile"]=v,T.generatedFiles["/Makefile.inc"]=be}var Te=T.extensionFiles;Ae.jsonCopyFrom(Te,T.generatedFiles);var Ee={config:a.serviceId,tag:a.gittag,replaceFiles:Te,dependencies:E?T.yotta.dependencies:null},Se=JSON.stringify(Ee);return T.sha=Ae.sha256(Se),T.compileData=ts.pxtc.encodeBase64(Ae.toUTF8(Se)),T.shimsDTS=B.finish(),T.enumsDTS=I.finish(),xe=t,Ce=T},e.unpackSourceFromHexFileAsync=function(e){if(e)return we.Util.fileReadAsBufferAsync(e).then(function(e){return t(new Uint8Array(e))})},e.unpackSourceFromHexAsync=t}(we.cpp||(we.cpp={}))}(pxt||(pxt={})),function(_){!function(s){var l,c={};function i(t){var n,r,e,o,i,a=Promise.resolve();return c.hasOwnProperty(t.sha)||(a=(n=t,r="",s.showLoading(_.U.lf("Compiling (this may take a minute)...")),(e=n,_.webConfig&&_.webConfig.isStatic?_.Util.requestAsync({url:_.webConfig.cdnUrl+"hexcache/"+e.sha+".hex"}).then(function(e){if(e.text){var t={enums:[],functions:[],hex:e.text.split(/\r?\n/)};return Promise.resolve(t)}return _.log("Hex info not found in bundled hex cache"),Promise.resolve()}).catch(function(e){return _.log("Error fetching hex info from bundled hex cache"),Promise.resolve()}):_.Cloud.localToken&&window&&_.Cloud.isLocalHost()?(o="compile/"+e.sha,_.Cloud.localRequestAsync(o,i).then(function(e){return e.json})).then(function(e){return e&&!e.notInOfflineCache&&e.hex?(e.hex=e.hex.split(/\r?\n/),e):Promise.resolve()}).catch(function(e){return Promise.resolve()}):Promise.resolve()).then(function(e){return e||function(){if(l)return l;var e=_.getOnlineCdnUrl();if(e)return l=Promise.resolve(e);var t=_.webConfig&&_.webConfig.isStatic;return l=_.Cloud.privateGetAsync("clientconfig",t).then(function(e){return e.primaryCdnUrl})}().then(function(e){return r=e+"/compile/"+n.sha,_.U.httpGetTextAsync(r+".hex")}).then(function(e){return e},function(e){return _.Cloud.privatePostAsync("compile/extension",{data:n.compileData}).then(function(o){return new Promise(function(t,e){var n=function(){var e=o.hex.replace(/\.hex/,".json");return _.log("polling at "+e),_.Util.httpGetJsonAsync(e).then(function(e){e.success?(_.log("fetching "+r+".hex"),t(_.U.httpGetTextAsync(r+".hex"))):_.U.userError(JSON.stringify(e,null,1))},function(e){return setTimeout(n,1e3),null})};n()})})}).then(function(e){return s.hideLoading(),{enums:[],functions:[],hex:e.split(/\r?\n/)}})}).finally(function(){s.hideLoading()})).then(function(e){c[t.sha]=e})),a.then(function(){return c[t.sha]})}function a(o,r,i,e,a){return void 0===a&&(a=10),o.cacheStoreAsync(i,e).then(function(){return o.cacheGetAsync(r)}).then(function(e){var t;try{t=JSON.parse(e||"[]")}catch(e){console.error("invalid cache entry, clearing entry"),t=[]}(t=t.filter(function(e){return e!=i})).unshift(i);var n=t.slice(a);return t=t.slice(0,a),Promise.map(n,function(e){return o.cacheStoreAsync(e,null)}).then(function(){return o.cacheStoreAsync(r,JSON.stringify(t))})})}function u(n,o,r){return n.cacheGetAsync(o).then(function(e){var t;try{t=JSON.parse(e||"[]")}catch(e){return console.error("invalid cache entry, clearing entry"),n.cacheStoreAsync(o,"[]")}return t[0]!=r?((t=t.filter(function(e){return e!=r})).unshift(r),n.cacheStoreAsync(o,JSON.stringify(t))):null})}s.showLoading=function(e){},s.hideLoading=function(){},s.storeWithLimitAsync=a,s.recordGetAsync=u,s.getHexInfoAsync=function(o,n,e){if(!n.sha)return Promise.resolve(null);if(pxtc.hex.isSetupFor(n))return Promise.resolve(pxtc.hex.currentHexInfo);_.debug("get hex info: "+n.sha);var r="hex-"+n.sha;return o.cacheGetAsync(r).then(function(e){var t;try{t=e?JSON.parse(e):null}catch(e){console.log("invalid cache entry, clearing entry"),t=null}return t&&t.hex?(_.debug("cache hit, size="+e.length),t.hex=function(e){for(var t=[],n=0;n<e.length;n++){var o=/^([@!])(....)$/.exec(e[n]);if(o){var r=parseInt(o[2],16),i=e[++n],a="";if("@"==o[1]){a="";for(var s=parseInt(i,16);0<s--;)a+="\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}else a=ts.pxtc.decodeBase64(i);_.Util.assert(0<a.length),_.Util.assert(a.length%16==0);for(var l=0;l<a.length;){var c=[16,r>>8&255,255&r,0];r+=16;for(var u=0;u<16;++u)c.push(a.charCodeAt(l++));for(var g=0,u=0;u<c.length;++u)g+=c[u];c.push(255&-g);for(var p=":",u=0;u<c.length;++u){var d=255&c[u];d<=15&&(p+="0"),p+=d.toString(16)}t.push(p.toUpperCase())}}else t.push(e[n])}return t}(t.hex),u(o,"hex-keys",r).then(function(){return t})):i(n).then(function(e){var t=e.hex;e.hex=function(e){for(var t=[],n=0,o=0;o<e.length;o+=n){var r=-1,i="";n=0;for(var a=!1;n<500;){var s=/^:10(....)00(.{32})(..)$/.exec(e[o+n]);if(!s)break;var l=s[2],c=/^0+$/.test(l),u=parseInt(s[1],16);if(-1==r)a=c,t.push((a?"@":"!")+s[1]),r=u-16;else{if(c!=a)break;if(r+16!=u)break}a||(i+=l),r=u,n++}if(0==n)t.push(e[o]),n=1;else if(a)t.push(n.toString(16));else{for(var g="",p=0;p<i.length;p+=2)g+=String.fromCharCode(parseInt(i.slice(p,p+2),16));t.push(ts.pxtc.encodeBase64(g))}}return t}(e.hex);var n=JSON.stringify(e);return e.hex=t,a(o,"hex-keys",r,n).then(function(){return e})}).catch(function(e){return _.reportException(e,{sha:n.sha}),Promise.resolve(null)})})}}(_.hex||(_.hex={}))}(pxt||(pxt={})),function(_){!function(e){function p(e,t,n,o,r){_.Util.assert(!!t&&!!n&&!!o);var i="https://api.crowdin.com/api/project/"+t+"/",a="?key="+n;return e&&(r||(r={}),r.branch=e),r&&(a+="&"+Object.keys(r).map(function(e){return e+"="+encodeURIComponent(r[e])}).join("&")),i+o+a}function t(e){var t=0;return function(){if(10<t++)throw new Error("Too many API calls for "+e)}}function u(o,r,i,a,s){return a=d(a),_.debug("create directory "+(o||"")+"/"+a),s||(s=t(a)),_.Util.multipartPostAsync(p(o,r,i,"add-directory"),{json:"true",name:a}).then(function(e){if(_.debug("crowdin resp: "+e.statusCode),200==e.statusCode||400==e.statusCode)return Promise.resolve();if(500==e.statusCode&&e.text&&50===JSON.parse(e.text).error.code)return _.log("directory already exists"),Promise.resolve();var t=e.json||JSON.parse(e.text)||{error:{}};if(404==e.statusCode&&17==t.error.code){_.log("parent directory missing for "+a);var n=a.replace(/\/[^\/]+$/,"");if(n!=a)return u(o,r,i,n,s).then(function(){return u(o,r,i,a,s)})}throw new Error("cannot create directory "+(o||"")+"/"+a+": "+e.statusCode+" "+JSON.stringify(t))})}function d(e){return e.replace(/\\/g,"/")}function r(e,t){var n=_.appTarget.versions.pxtCrowdinBranch||"",o=_.appTarget.versions.targetCrowdinBranch||"",r=[];if(e.forEach(function(e){return function t(n,o,r,e){var i=o.name,a=r?r+"/"+i:i;switch(o.fullName=a,o.branch=e||"",o.node_type){case"file":n.push(o);break;case"directory":(o.files||[]).forEach(function(e){return t(n,e,a)});break;case"branch":(o.files||[]).forEach(function(e){return t(n,e,r,o.name)})}}(r,e,"")}),r=r.filter(function(e){return e.fullName.indexOf("/")<0?e.branch==n:e.branch==o}),t&&(r=r.filter(function(e){return 0==e.fullName.indexOf(t)})),"core"!=_.appTarget.id){var i=_.appTarget.id+"/";r=r.filter(function(e){return e.fullName.indexOf("/")<0||e.fullName.substr(0,i.length)==i||0<=e.fullName.indexOf("common-docs")})}return r}function o(e,t){var n=p("",e,t,"info",{json:"true"});return _.Util.httpGetTextAsync(n).then(function(e){return JSON.parse(e)})}e.KEY_VARIABLE="CROWDIN_KEY",e.downloadTranslationsAsync=function(a,s,l,c,u){void 0===u&&(u={});var e=p(a,s,l,"info",{json:"true"}),g={};return c=d(c),_.Util.httpGetTextAsync(e).then(function(e){var t=JSON.parse(e);if(!t)throw new Error("info failed");var r=t.languages;_.log("languages: "+r.map(function(e){return e.code}).join(", "));var i=function(){var n=r.pop();if(!n)return Promise.resolve();var o=p(a,s,l,"export-file",{file:c,language:n.code,export_translated_only:u.translatedOnly?"1":"0",export_approved_only:u.validatedOnly?"1":"0"});return _.log("downloading "+n.name+" - "+n.code+" ("+r.length+" more)"),_.Util.httpGetTextAsync(o).then(function(e){try{var t=JSON.parse(e);t&&(g[n.code]=t)}catch(e){_.log(o+" "+e)}return i()}).delay(1e3)};return i()}).then(function(){return g})},e.createDirectoryAsync=u,e.uploadTranslationAsync=function(o,r,i,a,n){_.Util.assert(!!r),_.Util.assert(!!i);var s=t(a=d(a));function l(){return c("update-file",{update_option:"update_as_unapproved"})}function c(e,t){return t.type="auto",t.json="",t.escape_quotes="0",s(),_.Util.multipartPostAsync(p(o,r,i,e),t,a,n).then(function(e){return function(e){var t=e.statusCode,n=JSON.parse(e.text);if(_.debug("upload result: "+t),404==t&&8==n.error.code)return _.log("create new translation file: "+a),c("add-file",{});if(404==t&&17==n.error.code)return u(o,r,i,a.replace(/\/[^\/]+$/,""),s).then(function(){return l()});if(200==t)return Promise.resolve();throw new Error("Error, upload translation: "+a+", "+e+", "+JSON.stringify(n))}(e)})}return l()},e.projectInfoAsync=o,e.listFilesAsync=function(e,t,n){return _.log("crowdin: listing files under "+n),o(e,t).then(function(e){if(!e)throw new Error("info failed");var t=r(e.files,n);return _.debug("crowdin: found "+t.length+" under "+n),t.map(function(e){return{fullName:e.fullName,branch:e.branch||""}})})},e.languageStatsAsync=function(e,t,n){var o=p("",e,t,"language-status",{language:n,json:"true"});return _.Util.httpGetJsonAsync(o).then(function(e){return r(e.files)})}}(_.crowdin||(_.crowdin={}))}(pxt||(pxt={})),function(c){!function(E){var S,B=pxtc.Util,I={},N={},e="\x3c!-- @CMD@ @ARGS@ --\x3e",w={parent:e,short:e,description:"\x3c!-- desc --\x3e"};function t(e,t,n){return e.split(t).join(n)}function n(e){return e=t(e=t(e=t(e=t(e=t(e,"&","&amp;"),"<","&lt;"),">","&gt;"),'"',"&quot;"),"'","&#39;")}function O(e){return e?n(e.replace(/\&([#a-z0-9A-Z]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"==t[0]?String.fromCharCode(parseInt(t.slice(1))):e}})):e}E.htmlQuote=n,E.html2Quote=O;var C=[{rx:/^vimeo\.com\/(\d+)/i,cmd:"### @vimeo $1"},{rx:/^(www\.youtube\.com\/watch\?v=|youtu\.be\/)([\w\-]+(\#t=([0-9]+m[0-9]+s|[0-9]+m|[0-9]+s))?)/i,cmd:"### @youtube $2"}];E.requireMarked=function(){return"undefined"!=typeof marked?marked:"undefined"!=typeof require?require("marked"):void 0};var R=function(e){return"<div class='ui negative message'>"+n(e)+"</div>"};function x(r){var i=B.clone(I),a=B.clone(N),s=B.clone(w),l={},c={},e=r.params,t=r.theme;r.boxes=i,r.macros=a,r.settings=s,r.html=r.html.replace(/<aside\s+([^<>]+)>([^]*?)<\/aside>/g,function(e,t,n){var o=function(e){for(var t={};e.trim();){var n=/\s*([^=\s]+)=("([^"]*)"|'([^']*)'|(\S*))/.exec(e);if(n){var o=n[3]||n[4]||n[5]||"";t[n[1].toLowerCase()]=o}else t[(n=/^\s*(\S+)/.exec(e))[1]]="true";e=e.slice(n[0].length)}return t}(t),r=o["data-name"]||o.id;return r?(/box/.test(o.class)?i[r]=n:/aside/.test(o.class)?i[r]="\x3c!-- BEGIN-ASIDE "+r+" --\x3e"+n+"\x3c!-- END-ASIDE --\x3e":/setting/.test(o.class)?s[r]=n:/menu/.test(o.class)?l[r]=n:/toc/.test(o.class)?c[r]=n:a[r]=n,"\x3c!-- macro "+r+" --\x3e"):R("id or data-name missing on macro")});var u,g=function(e,t){var n=l.item,o={NAME:e.name};if(e.subitems)n=0==t?l["top-dropdown"]:l["inner-dropdown"],o.ITEMS=e.subitems.map(function(e){return g(e,t+1)}).join("\n");else{if(/^-+$/.test(e.name)&&(n=l.divider),e.path&&!/^(https?:|\/)/.test(e.path))return R("Invalid link: "+e.path);o.LINK=e.path}return L(n,o,["ITEMS"])},p=[{name:lf("Docs"),href:"/docs"}],d=[],_=function(e){for(var t=0,n=e.subitems||[];t<n.length;t++){var o=n[t];if(_(o))return d.push(e),!0}return!(!r.filepath||0!=r.filepath.indexOf(e.path))&&(d.push(e),!0)};(t.TOC||[]).forEach(_);var f=function(e,t){var n=c.item,o={NAME:e.name};return e.path&&!/^(https?:|\/)/.test(e.path)?R("Invalid link: "+e.path):(/^\//.test(e.path)&&r.versionPath&&(e.path="/"+r.versionPath+e.path),o.LINK=e.path,0<=d.indexOf(e)?(o.ACTIVE="active",o.EXPANDED="true",u=e,p.push({name:e.name,href:e.path})):o.EXPANDED="false",e.subitems&&0<e.subitems.length?(n=0==t?""!==e.name?c["top-dropdown"]:c["top-dropdown-noHeading"]:1==t?c["inner-dropdown"]:c["nested-dropdown"],o.ITEMS=e.subitems.map(function(e){return f(e,t+1)}).join("\n")):/^-+$/.test(e.name)&&(n=c.divider),L(n,o,["ITEMS"]))};e.menu=(t.docMenu||[]).map(function(e){return g(e,0)}).join("\n"),e.TOC=(t.TOC||[]).map(function(e){return f(e,0)}).join("\n"),t.appStoreID&&(e.appstoremeta='<meta name="apple-itunes-app" content="app-id='+B.htmlEscape(t.appStoreID)+'"/>');var n="";1<p.length&&(n='\n            <nav class="ui breadcrumb" aria-label="'+lf("Breadcrumb")+'">\n                '+p.map(function(e,t){return'<a class="'+(t==p.length-1?"active":"")+' section"\n                        href="'+O(e.href)+'" aria-current="'+(t==p.length-1?"page":"")+'">'+O(e.name)+"</a>"}).join('<i class="right chevron icon divider"></i>')+"\n            </nav>"),e.breadcrumb=n,u&&(u.prevPath&&(e.prev='<a href="'+u.prevPath+'" class="navigation navigation-prev " title="'+u.prevName+'">\n                                    <i class="icon angle left"></i>\n                                </a>'),u.nextPath&&(e.next='<a href="'+u.nextPath+'" class="navigation navigation-next " title="'+u.nextName+'">\n                                    <i class="icon angle right"></i>\n                                </a>')),t.boardName&&(e.boardname=O(t.boardName)),t.boardNickname&&(e.boardnickname=O(t.boardNickname)),t.driveDisplayName&&(e.drivename=O(t.driveDisplayName)),t.homeUrl&&(e.homeurl=O(t.homeUrl)),e.targetid=t.id||"???",e.targetname=t.name||"Microsoft MakeCode",e.targetlogo=t.docsLogo?'<img aria-hidden="true" role="presentation" class="ui mini image" src="'+t.docsLogo+'" />':"";var o=r.ghEditURLs||[];if(o.length){for(var h='<p style="margin-top:1em">\n',m=lf("Edit this page on GitHub"),y=0,v=o;y<v.length;y++){h+='<a href="'+v[y]+'"><i class="write icon"></i>'+m+"</a><br>\n",m=lf("Edit template of this page on GitHub")}h+="</p>\n",e.github=h}else e.github="";var b='\n            <a href="#maincontent" class="ui item link" tabindex="0" role="menuitem">'+lf("Skip to main content")+"</a>\n        ";e.accMenu=b;var k='\n            <button id="printbtn" class="circular ui icon right floated button hideprint" title="'+lf("Print this page")+'">\n                <i class="icon print"></i>\n            </button>\n        ';e.printBtn=k;var T='\n            <a id="togglesidebar" class="launch icon item" tabindex="0" title="Side menu" aria-label="'+lf("Side menu")+'" role="menu" aria-expanded="false">\n                <i class="content icon"></i>\n            </a>\n        ';e.sidebarToggle=T;var E=["tocsearch1","tocsearch2"].map(function(e){return'\n                <input type="search" name="q" placeholder="'+lf("Search...")+'" aria-label="'+lf("Search Documentation")+'">\n                <i onclick="document.getElementById(\''+e+'\').submit();" tabindex="0" class="search link icon" aria-label="'+lf("Search")+'" role="button"></i>\n            '});e.searchBar1=E[0],e.searchBar2=E[1];var S="";t.accentColor&&(S+="\n.ui.accent { color: "+t.accentColor+"; }\n.ui.inverted.accent { background: "+t.accentColor+"; }\n"),e.targetstyle=S;for(var C=0,x=Object.keys(t);C<x.length;C++){var A=x[C],D=t[A];void 0===e[A]&&"string"==typeof D&&(e[A]=D)}r.finish=function(){return L(r.html,e,["body","menu","accMenu","TOC","prev","next","printBtn","breadcrumb","targetlogo","github","JSON","appstoremeta","sidebarToggle","searchBar1","searchBar2"])}}function L(e,o,r){return void 0===r&&(r=[]),e?e.replace(/@(\w+)@/g,function(e,t){var n=B.lookup(o,t)||"";return n+="",r.indexOf(t)<0&&(n=O(n)),n}):""}E.prepTemplate=x,E.renderMarkdown=function(u){var e=!0;u.pubinfo||(e=!1,u.pubinfo={});var g=u.pubinfo;if(u.theme||(u.theme={}),delete u.pubinfo.private,g.time){var t=parseInt(g.time);g.timems||(g.timems=1e3*t+""),g.humantime||(g.humantime=B.isoTime(t))}g.name&&(g.dirname=g.name.replace(/[^A-Za-z0-9_]/g,"-"),g.title=g.name),e&&(g.JSON=JSON.stringify(g,null,4).replace(/</g,"\\u003c"));var n=u.template;n=(n=n.replace(/<!--\s*@include\s+(\S+)\s*-->/g,function(e,t){return"\x3c!-- include "+t+" --\x3e\n"+((u.theme.htmlDocIncludes||{})[t]||"")+"\n\x3c!-- end include --\x3e\n"})).replace(/<!--\s*@(ifn?def)\s+(\w+)\s*-->([^]*?)<!--\s*@endif\s*-->/g,function(e,t,n,o){return"ifdef"==t&&g[n]||"ifndef"==t&&!g[n]?"\x3c!-- "+t+" "+n+" --\x3e"+o+"\x3c!-- endif --\x3e":"\x3c!-- "+t+" "+n+" endif --\x3e"}),u.locale&&(n=A(n,u.locale).text);var p={html:n,theme:u.theme,filepath:u.filepath,versionPath:u.versionPath,ghEditURLs:u.ghEditURLs,params:g};if(x(p),!S){var i=new((S=E.requireMarked()).Renderer);i.image=function(e,t,n){var o='<img class="ui centered image" src="'+e+'" alt="'+n+'"';return t&&(o+=' title="'+t+'"'),o+=this.options.xhtml?"/>":">"},i.listitem=function(e){var t=/^\s*\[( |x)\]/i.exec(e);return t?'<li class="'+(" "==t[1]?"unchecked":"checked")+'">'+e.slice(t[0].length)+"</li>\n":"<li>"+e+"</li>\n"};var a=i.link;i.link=function(e,t,n){var o=0==e.indexOf("/"),r=o?"":"_blank";return o&&p.versionPath&&(e="/"+p.versionPath+e),a.call(i,e,t,n).replace(/^<a /,"<a "+(r?'target="'+r+'"':"")+' rel="nofollow noopener" ')},i.heading=function(e,t,n){var o=/(.*)#([\w\-]+)\s*$/.exec(e),r="";return o?(e=o[1],r=o[2]):r=n.toLowerCase().replace(/[^\w]+/g,"-"),"<h"+t+' id="'+this.options.headerPrefix+r+'">'+e+"</h"+t+">"},S.setOptions({renderer:i,gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!0})}var o=u.markdown;u.repo&&(o+="\n```package\n"+u.repo.name.replace(/^pxt-/,"")+"=github:"+u.repo.fullName+"#"+(u.repo.tag||"master")+"\n```\n"),o=(o=o.replace(/^\s*https?:\/\/(\S+)\s*$/gm,function(e,t){for(var n=function(e){var n=e.rx.exec(t);if(n)return{value:e.cmd.replace(/\$(\d+)/g,function(e,t){return n[parseInt(t)]||""})+"\n"}},o=0,r=C;o<r.length;o++){var i=n(r[o]);if("object"==typeof i)return i.value}return e})).replace(/@([a-z]+)@/gi,function(e,t){var n=g[t];return!n&&u.throwOnError&&B.userError("unknown macro "+t),n||"unknown macro"});var r=S(o);r=r.replace(/&lt;br\s*\/&gt;/gi,"<br/>");var d="";if(r=r.replace(/<h\d[^>]+>\s*([~@])\s*(.*?)<\/h\d>/g,function(e,t,n){var o=/^(\w+)\s+(.*)/.exec(n),r=o?o[1]:n,i=o?o[2]:"";if(i=O(i),r=O(r),"@"==t){var a=B.lookup(p.settings,r);if(null!=a)g[r]=i;else if(null==(a=B.lookup(p.macros,r)))return u.throwOnError&&B.userError("Unknown command: @"+r),R("Unknown command: @"+r);return L(a,{ARGS:i,CMD:r},["ARGS","CMD"])}if(!r){var s=d;return d="",s}var l=B.lookup(p.boxes,r);if(l){var c=l.split("@BODY@");return d=c[1],c[0].replace("@ARGS@",i)}return u.throwOnError&&B.userError("Unknown box: ~ "+r),R("Unknown box: ~ "+r)}),!g.title){var s=/<h1[^<>]*>([^<>]+)<\/h1>/.exec(r);s&&(g.title=O(s[1]))}if(!g.description){var l=/<p>([^]+?)<\/p>/.exec(r);l&&(g.description=O(l[1]))}var c=/<div class="ui embed mdvid"[^<>]+?data-placeholder="([^"]+)"[^>]*\/?>/i.exec(r)||/<img class="ui [^"]*image" src="([^"]+)"[^>]*\/?>/i.exec(r);c&&(g.cardLogo=O(c[1])),g.twitter=O(u.theme.twitter||"@msmakecode");var _,f,h={main:""};r=(r=r.replace(/<!-- BEGIN-ASIDE (\S+) -->([^]*?)<!-- END-ASIDE -->/g,function(e,t,n){var o=B.lookup(h,t);return h[t]=(o||"")+n,"\x3c!-- aside --\x3e"})).replace(/\n<\/code>/g,"</code>"),h.main=r,r="";for(var m=0,y=Object.keys(h);m<y.length;m++){var v=y[m];r+=(_=v+"-container",f=h[v],L(p.boxes[_]||"@BODY@",{BODY:f},["BODY"]))}g.body=r,g.name=g.title+" - "+g.targetname;for(var b=0,k=Object.keys(u.theme);b<k.length;b++){v=k[b];var T=u.theme[v];"string"==typeof T&&(g["theme_"+v]=T)}return p.finish()},E.embedUrl=function(e,t,n,o){return'<div style="position:relative;height:0;padding-bottom:70%;overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="'+e+"#"+t+":"+n+'" frameborder="0" sandbox="allow-popups allow-forms allow-scripts allow-same-origin"></iframe></div>'},E.runUrl=function(e,t,n){return'<div style="position:relative;height:0;padding-bottom:'+t+';overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="'+e+"?id="+encodeURIComponent(n)+'" allowfullscreen="allowfullscreen" sandbox="allow-popups allow-forms allow-scripts allow-same-origin" frameborder="0"></iframe></div>'},E.codeEmbedUrl=function(e,t,n){var o=e+"---codeembed#pub:"+t;return'<div style="position:relative;height:calc('+(n=Math.ceil(n||300))+'px + 5em);width:100%;overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="'+o+'" allowfullscreen="allowfullscreen" frameborder="0" sandbox="allow-scripts allow-same-origin"></iframe></div>'};var l={b:1,strong:1,em:1};function A(e,r){var i={};function a(e){var t=/^(\s*)([^]*?)(\s*)$/.exec(e),n=t[2].replace(/\s+/g," ");if(""==n||/^((IE=edge,.*|width=device-width.*|(https?:\/\/|\/)[\w@\/\.]+|@[\-\w]+@|\{[^\{\}]+\}|[^a-zA-Z]*|(&nbsp;)+)\s*)+$/.test(n))return null;var o=B.lookup(r,n);return o?n=o:i[n]="",t[1]+n+t[3]}function s(e){return e.replace(/&llt;/g,"<").replace(/&ggt;/g,">")}return{text:e=(e=(e=(e="<start>"+(e=e.replace(/<([\/\w]+)([^<>]*)>/g,function(e,t,n){var o=t.replace(/^\//,"").toLowerCase();return 1===l[o]?"&llt;"+t+n+"&ggt;":e}))).replace(/(<([\/\w]+)([^<>]*)>)([^<>]+)/g,function(e,t,n,o,r){if("script"==n||"style"==n)return s(e);var i=a(s(r));return null==i?s(e):t+i})).replace(/(<[^<>]*)(content|placeholder|alt|title)="([^"]+)"/g,function(e,t,n,o){return null==a(o)?e:t+n+'="'+o.replace(/"/g,"''")+'"'})).replace(/^<start>/g,""),missing:i}}function m(e,a){for(var s=0,l=[{level:0,id:"",title:"",start:s,text:"",children:[]}],t=(e=e.replace(/\r/g,"")).split(/\n/),c={},n=function(e){var t=/^\s*(#+)\s*(.*?)(#(\S+)\s*)?$/.exec(e),n=null;if(a&&t)if(t[4])if(c[t[4]])t=null;else{n=function e(t,n){if(t.id==n)return t;for(var o=0,r=t.children;o<r.length;o++){var i=e(r[o],n);if(i)return i}return null}(a,t[4]);var o=function(e){e.id&&(c[e.id]=!0),e.children.forEach(o)};n&&o(n)}else t=null;if(t){var r={level:a?1:t[1].length,title:t[2].trim(),id:t[4]||"",start:s,text:"",children:[]};if(n){e="";for(var i=0;i<n.level;++i)e+="#";e+=" ",e+=r.title||n.title,e+=" #"+r.id}for(;l[l.length-1].level>=r.level;)l.pop();l[l.length-1].children.push(r),l.push(r)}l[l.length-1].text+=e+"\n",s++},o=0,r=t;o<r.length;o++){n(r[o])}return l[0]}E.translate=A,E.buildTOC=function(e){if(!e)return null;var t=c.docs.requireMarked(),n={renderer:new t.Renderer,gfm:!0,tables:!1,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,smartypants:!1},o={name:"dummy",subitems:[]},r=[];r.push(o),t.lexer(e,n).forEach(function(e){switch(e.type){case"heading":e.depth;break;case"list_start":break;case"list_item_start":case"loose_item_start":r.push({name:"",subitems:[]});break;case"text":e.text.replace(/^\[(.*)\]\((.*)\)$/i,function(e,t,n){r[r.length-1].name=t,r[r.length-1].path=n.replace(".md","")});break;case"list_item_end":case"loose_item_end":var t=r.pop();r[r.length-1].subitems.push(t)}});var i,a=o.subitems;if(!a||0==a.length)return null;var s=function(e){i&&(e.prevName=i.name,e.prevPath=i.path,i.nextName=e.name,i.nextPath=e.path),e.path&&(i=e),e.subitems.forEach(function(e,t){s(e)})};return a.forEach(function(e,t){s(e)}),a};var y=!(E.visitTOC=function(e,t){e.forEach(function(e){t(e),e.subitems&&e.subitems.forEach(t)})});function v(e,t){if(y||function(){function e(e,t,n){var o=v(e,t).trim();if(n=n.trim(),o!=n)throw console.log("*** Template:\n"+e+"\n*** Input:\n"+t+"\n*** Expected:\n"+n+"\n*** Output:\n"+o),new Error("augment docs test fail")}y=!0;var t="\n# T0\n## Examples #ex\n### Example 1\nTEx1\n### Example 2 #ex2\nTEx2\n### Example 3\nTEx3\n\n## See also #also\nTAlso\n";e(t,"",t),e(t," ",t),e(t,"\n# @extends\n# #ex2\nMy example\n## See Also These! #also\nMy links\n","\n# T0\n## Examples #ex\n### Example 1\nTEx1\n### Example 2 #ex2\nMy example\n### Example 3\nTEx3\n\n## See Also These! #also\nMy links\n"),e(t,"\n# @extends\n### #ex\nFoo\n#### Example 1\nEx1\n#### Example 2x #ex2\nEx2\n## See Also These! #also\nMy links\n","\n# T0\n## Examples #ex\nFoo\n#### Example 1\nEx1\n#### Example 2x #ex2\nEx2\n## See Also These! #also\nMy links\n")}(),!t)return e;for(var n=m(e,null),o=m(t,n),r={},i={},a=0,s=o.children;a<s.length;a++){var l=s[a];B.assert(0==l.children.length),B.assert(!!l.id),r[l.id]=l.text}var c=function(e){e.id&&void 0!==r[e.id]&&(i[e.id]=!0,e.text=r[e.id],e.children=[]),e.children.forEach(c)};c(n);var u="",g=function(e){u+=e.text,e.children.forEach(g)};g(n);var p="",d=o.text.replace(/^\s*#+\s*@extends.*/gm,"").replace(/^\s*\n/gm,"");d.trim()&&(p+=d.trim()+"\n");for(var _=0,f=o.children;_<f.length;_++){var h=f[_];i[h.id]||(p+=h.text)}return p&&(u+="## Couldn't apply replacement logic to:\n"+p),u}E.augmentDocs=v}(c.docs||(c.docs={}))}(pxt||(pxt={})),function(a){!function(e){function n(e,t){if(t){var n=/```(blocks?|typescript)\s+((.|\s)+?)\s*```/i.exec(t);if(n){var o=/```package\s+((.|\s)+?)\s*```/i.exec(t),r=void 0;o&&(r={},o[1].split("\n").map(function(e){return e.replace(/\s*/g,"")}).filter(function(e){return!!e}).map(function(e){return e.split("=")}).forEach(function(e){return r[e[0]]=e[1]||"*"}));var i=n[2],a=t.substring(0,n.index).replace(/^(#+.*|\s*)$/gim,"").trim();return a&&(i="/**\n"+a.split("\n").map(function(e){return"* "+e}).join("\n")+"\n*/\n"+i),{name:e,filesOverride:{"main.blocks":'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',"main.ts":i},dependencies:r}}}}function t(e){if(!e)return[];var n=[],o=!1,r=void 0,i="";return e.split(/\r?\n/).forEach(function(e){if(/^##/.test(e))r=e.substr(2).trim();else if(/^```codecard$/.test(e))o=!0;else if(/^```$/.test(e)){if(o=!1,r&&i)try{var t=JSON.parse(i);t&&0<t.length&&n.push({name:r,cards:t})}catch(e){a.log("invalid card format in gallery")}i="",r=void 0}else o&&(i+=e+"\n")}),n}e.parseExampleMarkdown=n,e.parseGalleryMardown=t,e.loadGalleryAsync=function(e){return a.Cloud.downloadMarkdownAsync(e,a.Util.userLanguage(),a.Util.localizeLive).then(function(e){return t(e)})},e.loadExampleAsync=function(t,e){return a.Cloud.downloadMarkdownAsync(e,a.Util.userLanguage(),a.Util.localizeLive).then(function(e){return n(t,e)})}}(a.gallery||(a.gallery={}))}(pxt||(pxt={})),function(h){!function(o){function s(){return!h.U.isNodeJS&&!(h.appTarget&&h.appTarget.cloud&&h.appTarget.cloud.noGithubProxy)}o.useProxy=s;var a,e,t=function(){function e(){this.configs={},this.packages={}}return e.prototype.proxyLoadPackageAsync=function(e,t){var n=this,o=e+"/"+t,r=this.packages[o];return r?(h.debug("github cache "+e+"/"+t+"/text"),Promise.resolve(r)):h.U.httpGetJsonAsync(h.Cloud.apiRoot+"gh/"+e+"/"+t+"/text").then(function(e){return n.packages[o]={files:e}})},e.prototype.loadConfigAsync=function(e,t){var n=this;t||(t="master");var o=e+"/"+t,r=this.configs[o];if(r)return h.debug("github cache "+e+"/"+t+"/config"),Promise.resolve(h.U.clone(r));var i=function(e){var t=JSON.parse(e);return n.configs[o]=t,h.U.clone(t)};if(s())return this.proxyLoadPackageAsync(e,t).then(function(e){return i(e.files[h.CONFIG_NAME])});var a="https://raw.githubusercontent.com/"+e+"/"+t+"/"+h.CONFIG_NAME;return h.U.httpGetTextAsync(a).then(function(e){return i(e)})},e.prototype.loadPackageAsync=function(n,i){var a=this;return i||(i="master"),s()?this.proxyLoadPackageAsync(n,i).then(function(e){return h.U.clone(e)}):l(n,i).then(function(e){var o=n+"/"+e,t=a.packages[o];if(t)return h.debug("github cache "+n+"/"+i+"/text"),Promise.resolve(h.U.clone(t));var r="https://raw.githubusercontent.com/"+n+"/"+e+"/";return h.log("Downloading "+n+"/"+i+" -> "+e),h.U.httpGetTextAsync(r+h.CONFIG_NAME).then(function(e){var n={files:{}};n.files[h.CONFIG_NAME]=e;var t=JSON.parse(e);return Promise.map(t.files.concat(t.testFiles||[]),function(t){return h.U.httpGetTextAsync(r+t).then(function(e){n.files[t]=e})}).then(function(){return a.packages[o]=n,h.U.clone(n)})})})},e}();function r(e,n){void 0===n&&(n="tags");var i=null,t=h.U.httpGetJsonAsync(h.Cloud.apiRoot+"gh/"+e+"/refs").then(function(t){var e=Object.keys(t.refs).filter(function(e){return h.U.startsWith(e,"refs/"+n+"/")}).map(function(e){return{ref:e,object:{sha:t.refs[e]}}});return i=t.refs.HEAD,e}),a=function(e){return e.replace(/^refs\/[^\/]+\//,"")};return t.then(function(e){e.sort(function(e,t){return h.semver.strcmp(a(e.ref),a(t.ref))});for(var t={},n=0,o=e;n<o.length;n++){var r=o[n];t[a(r.ref)]=r.object.sha}return{refs:t,head:i}},function(e){return 404==e.statusCode?{refs:{}}:Promise.reject(e)})}function i(e){return"commit"==e.object.type?Promise.resolve(e.object.sha):"tag"==e.object.type?h.U.httpGetJsonAsync(e.object.url).then(function(e){return"commit"==e.object.type?e.object.sha:Promise.reject(new Error("Bad type (2nd order) "+e.object.type))}):Promise.reject(new Error("Bad type "+e.object.type))}function l(t,n){return/^[a-f0-9]{40}$/.test(n)?Promise.resolve(n):h.U.httpGetJsonAsync("https://api.github.com/repos/"+t+"/git/refs/tags/"+n).then(i,function(e){return h.U.httpGetJsonAsync("https://api.github.com/repos/"+t+"/git/refs/heads/"+n).then(i)})}function n(e){return h.Cloud.apiRoot+"gh/"+e.fullName+"/icon"}function c(e,t,n){if(e){var o={owner:e.owner.login.toLowerCase(),fullName:e.full_name.toLowerCase(),name:e.name,description:e.description,defaultBranch:e.default_branch,tag:n};return o.status=u(o,t),o}}function u(e,t){return g(e,t)?a.Banned:(i=o=t,(r=n=e)&&i&&r.owner&&i.approvedOrgs&&i.approvedOrgs.some(function(e){return e.toLowerCase()==r.owner.toLowerCase()})||n&&o&&n.fullName&&o.approvedRepos&&o.approvedRepos.some(function(e){return e.toLowerCase()==n.fullName.toLowerCase()})?a.Approved:a.Unknown);var n,o,r,i}function g(t,e){return n=t,!(!(o=e)||n&&n.owner&&(!o.bannedOrgs||!o.bannedOrgs.some(function(e){return e.toLowerCase()==n.owner.toLowerCase()})))||!!e&&(!t||!t.fullName||!(!e.bannedRepos||!e.bannedRepos.some(function(e){return e.toLowerCase()==t.fullName.toLowerCase()})));var n,o}function p(e,t){var n=_(e),o=u(n,t);return o==a.Banned?Promise.resolve(void 0):s()?h.Util.httpGetJsonAsync(h.Cloud.apiRoot+"gh/"+n.fullName).then(function(e){if(e)return{github:!0,owner:n.owner,fullName:n.fullName,name:e.name,description:e.description,defaultBranch:"master",tag:n.tag,status:o}}):h.U.httpGetJsonAsync("https://api.github.com/repos/"+n.fullName).then(function(e){return c(e,t,n.tag)})}function d(e){if(e){var t=/^((https:\/\/)?github.com\/)?([^/]+\/[^/#]+)(#(\w+))?$/i.exec(e.trim());if(t){var n={repo:t?t[3].toLowerCase():null,tag:t?t[5]:null};return n.path=n.repo+(n.tag?"#"+n.tag:""),n}}}function _(e){if(e){e=e.replace(/^github:/i,"");var t=/([^#]+)(#(.*))?/.exec(e);return{owner:t?t[1].split("/")[0].toLowerCase():void 0,fullName:t?t[1].toLowerCase():e.toLowerCase(),tag:t?t[3]:null}}}function f(e){return e?"github:"+e.fullName.toLowerCase()+"#"+(e.tag||"master"):void 0}o.MemoryGithubDb=t,o.db=new t,o.listRefsAsync=function(e,t){return void 0===t&&(t="tags"),r(e,t).then(function(e){return Object.keys(e.refs)})},o.listRefsExtAsync=r,o.pkgConfigAsync=function(e,t){return void 0===t&&(t="master"),o.db.loadConfigAsync(e,t)},o.downloadPackageAsync=function(e,t){var n=_(e);return n?g(n,t)?(h.tickEvent("github.download.banned"),h.log("Github repo is banned"),Promise.resolve(void 0)):o.db.loadPackageAsync(n.fullName,n.tag):(h.log("Unknown github syntax"),Promise.resolve(void 0))},(e=a=o.GitRepoStatus||(o.GitRepoStatus={}))[e.Unknown=0]="Unknown",e[e.Approved=1]="Approved",e[e.Banned=2]="Banned",o.repoIconUrl=function(e){if(e.status==a.Approved)return n(e)},o.mkRepoIconUrl=n,o.repoStatus=u,o.repoAsync=p,o.searchAsync=function(e,t){if(!t)return Promise.resolve([]);var n=e.split("|").map(d).filter(function(e){return!!e});return 0<n.length?Promise.all(n.map(function(e){return p(e.path,t)})).then(function(e){return e.filter(function(e){return e.status!=a.Banned})}):(e+=' in:name,description,readme "for PXT/'+(h.appTarget.platformid||h.appTarget.id)+'"',h.U.httpGetJsonAsync("https://api.github.com/search/repositories?q="+encodeURIComponent(e)).then(function(e){return e.items.map(function(e){return c(e,t)}).filter(function(e){return e.status==a.Approved||t.allowUnapproved&&e.status==a.Unknown})}).catch(function(e){return[]}))},o.parseRepoUrl=d,o.parseRepoId=_,o.isGithubId=function(e){return"github:"==e.slice(0,7)},o.stringifyRepo=f,o.noramlizeRepoId=function(e){return f(_(e))},o.latestVersionAsync=function(e,t){var n=_(e);return n?p(n.fullName,t).then(function(n){if(n)return r(n.fullName,"tags").then(function(e){var t=Object.keys(e.refs);return t.reverse(),(t=t.filter(function(e){return/^v\d+(\.\d+(\.\d+)?)?$/i.test(e)}))[0]?Promise.resolve(t[0]):e.head||l(n.fullName,n.defaultBranch)})}):Promise.resolve(null)},o.publishGistAsync=function(e,t,n,o,r){var i,a={description:o,public:!1,files:n},s={},l="https://api.github.com/gists";return e&&(s.Authorization="token "+e),r&&e&&!t?(i="PATCH",l+="/"+r):i="POST",h.U.requestAsync({url:l,allowHttpErrors:!0,headers:s,method:i,data:a}).then(function(e){return 200!=e.statusCode&&201!=e.statusCode||!e.json.id?404==e.statusCode&&"PATCH"==i?Promise.reject(e.statusCode):404==e.statusCode?Promise.reject("Make sure to add the ``gist`` scope to your token. "+e.text):Promise.reject(e.text):Promise.resolve(e.json.id)})}}(h.github||(h.github={}))}(pxt||(pxt={})),function(h){!function(f){function l(e,t,n){e[t+0]=n>>0&255,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255}function c(e,t,n){e[t+0]=n>>0&255,e[t+1]=n>>8&255}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function u(e,t){return e[t]|e[t+1]<<8}function n(e){for(var t=new Uint8Array(4*e.length),n=0;n<e.length;++n)l(t,4*n,e[n]);return t}f.HF2_CMD_BININFO=1,f.HF2_MODE_BOOTLOADER=1,f.HF2_MODE_USERSPACE=2,f.HF2_CMD_INFO=2,f.HF2_CMD_RESET_INTO_APP=3,f.HF2_CMD_RESET_INTO_BOOTLOADER=4,f.HF2_CMD_START_FLASH=5,f.HF2_CMD_WRITE_FLASH_PAGE=6,f.HF2_CMD_CHKSUM_PAGES=7,f.HF2_CMD_READ_WORDS=8,f.HF2_CMD_WRITE_WORDS=9,f.HF2_CMD_DMESG=16,f.HF2_FLAG_SERIAL_OUT=128,f.HF2_FLAG_SERIAL_ERR=192,f.HF2_FLAG_CMDPKT_LAST=64,f.HF2_FLAG_CMDPKT_BODY=0,f.HF2_FLAG_MASK=192,f.HF2_SIZE_MASK=63,f.HF2_STATUS_OK=0,f.HF2_STATUS_INVALID_CMD=1,f.HF2_STATUS_EXEC_ERR=2,f.HF2_STATUS_EVENT=128,f.HF2_EV_MASK=8388608,f.write32=l,f.write16=c,f.read32=i,f.read16=u,f.encodeU32LE=n;var t=!(f.decodeU32LE=function(e){for(var t=[],n=0;n<e.length;n+=4)t.push(i(e,n));return t});function g(e){t?h.log("HF2: "+e):h.debug("HF2: "+e)}f.enableLog=function(){t=!0};var e=function(){function e(p){var d=this;this.io=p,this.cmdSeq=h.U.randomUint32(),this.lock=new h.U.PromiseQueue,this.rawMode=!1,this.maxMsgSize=63,this.bootloaderMode=!1,this.reconnectTries=0,this.autoReconnect=!1,this.msgs=new h.U.PromiseBuffer,this.eventHandlers={},this.onSerial=function(e,t){};var _=[];p.onSerial=function(e,t){return d.onSerial(e,t)},p.onData=function(e){var t=e[0]&f.HF2_FLAG_MASK,n=63&e[0],o=new Uint8Array(n);if(h.U.memcpy(o,0,e,1,n),t&f.HF2_FLAG_SERIAL_OUT)d.onSerial(o,t==f.HF2_FLAG_SERIAL_ERR);else if(_.push(o),t!=f.HF2_FLAG_CMDPKT_BODY){h.U.assert(t==f.HF2_FLAG_CMDPKT_LAST);for(var r=0,i=0,a=_;i<a.length;i++){r+=(g=a[i]).length}for(var s=new Uint8Array(r),l=0,c=0,u=_;c<u.length;c++){var g=u[c];h.U.memcpy(s,l,g),l+=g.length}_=[],s[2]&f.HF2_STATUS_EVENT?p.onEvent(s):d.msgs.push(s)}},p.onEvent=function(e){var t=i(e,0),n=h.U.lookup(d.eventHandlers,t+"");n?n(e.slice(4)):g("unhandled event: "+t.toString(16))},p.onError=function(e){g("recv error: "+e.message),d.autoReconnect&&(d.autoReconnect=!1,d.reconnectAsync().then(function(){d.autoReconnect=!0},function(e){g("reconnect error: "+e.message)}))}}return e.prototype.resetState=function(){this.lock=new h.U.PromiseQueue,this.info=null,this.infoRaw=null,this.pageSize=null,this.flashSize=null,this.maxMsgSize=63,this.bootloaderMode=!1,this.msgs.drain()},e.prototype.onEvent=function(e,t){h.U.assert(!!(e&f.HF2_EV_MASK)),this.eventHandlers[e+""]=t},e.prototype.reconnectAsync=function(e){var t=this;return void 0===e&&(e=!1),this.resetState(),e?this.initAsync():(g("reconnect raw="+this.rawMode),this.io.reconnectAsync().then(function(){return t.initAsync()}).catch(function(e){if(t.reconnectTries<5)return t.reconnectTries++,g("error "+e.message+"; reconnecting attempt #"+t.reconnectTries),Promise.delay(500).then(function(){return t.reconnectAsync()});throw e}))},e.prototype.disconnectAsync=function(){return g("disconnect"),this.io.disconnectAsync()},e.prototype.error=function(e){return this.io.error(e)},e.prototype.talkAsync=function(e,t){var n=this;if(this.io.talksAsync)return this.io.talksAsync([{cmd:e,data:t}]).then(function(e){return e[0]});var o=8;t&&(o+=t.length);var r=new Uint8Array(o),i=65535&++this.cmdSeq;l(r,0,e),c(r,4,i),c(r,6,0),t&&h.U.memcpy(r,8,t,0,t.length);var a=0,s=function(){return n.msgs.shiftAsync(1e3).then(function(e){if(u(e,0)!=i){if(a<3)return a++,g("message out of sync, ("+i+" vs "+u(e,0)+"); will re-try"),s();n.error("out of sync")}var t="";switch(e[3]&&(t="; info="+e[3]),e[2]){case f.HF2_STATUS_OK:return e.slice(4);case f.HF2_STATUS_INVALID_CMD:n.error("invalid command"+t);break;case f.HF2_STATUS_EXEC_ERR:n.error("execution error"+t);break;default:n.error("error "+e[2]+t)}return null})};return this.sendMsgAsync(r).then(s)},e.prototype.sendMsgAsync=function(e){return this.sendMsgCoreAsync(e)},e.prototype.sendSerialAsync=function(e,t){return void 0===t&&(t=!1),this.io.sendSerialAsync?this.io.sendSerialAsync(e,t):this.sendMsgCoreAsync(e,t?2:1)},e.prototype.sendMsgCoreAsync=function(o,r){var i=this;void 0===r&&(r=0);var a=new Uint8Array(64),s=function(e){var t=o.length-e;if(t<=0)return Promise.resolve();63<t?(t=63,a[0]=f.HF2_FLAG_CMDPKT_BODY):a[0]=f.HF2_FLAG_CMDPKT_LAST,r&&(a[0]=1==r?f.HF2_FLAG_SERIAL_OUT:f.HF2_FLAG_SERIAL_ERR),a[0]|=t;for(var n=0;n<t;++n)a[n+1]=o[e+n];return i.io.sendPacketAsync(a).then(function(){return s(e+t)})};return this.lock.enqueue("out",function(){return s(0)})},e.prototype.switchToBootloaderAsync=function(){var e=this;return this.bootloaderMode?Promise.resolve():(g("Switching into bootloader mode"),this.io.isSwitchingToBootloader&&this.io.isSwitchingToBootloader(),this.maybeReconnectAsync().then(function(){return e.talkAsync(f.HF2_CMD_START_FLASH)}).then(function(){return e.initAsync()}).then(function(){e.bootloaderMode||e.error("cannot switch into bootloader mode")}))},e.prototype.reflashAsync=function(e){var t=this;return g("reflash"),this.flashAsync(e).then(function(){return Promise.delay(100)}).then(function(){return t.reconnectAsync()})},e.prototype.writeWordsAsync=function(e,t){return h.U.assert(t.length<=64),this.talkAsync(f.HF2_CMD_WRITE_WORDS,n([e,t.length].concat(t))).then(function(){})},e.prototype.readWordsAsync=function(e,t){var n=new Uint8Array(8);return l(n,0,e),l(n,4,t),h.U.assert(t<=64),this.talkAsync(f.HF2_CMD_READ_WORDS,n)},e.prototype.pingAsync=function(){return this.rawMode?Promise.resolve():this.talkAsync(f.HF2_CMD_BININFO).then(function(e){})},e.prototype.maybeReconnectAsync=function(){var t=this;return this.pingAsync().catch(function(e){return t.reconnectAsync().then(function(){return t.pingAsync()})})},e.prototype.flashAsync=function(o){var r=this,i=Date.now(),a=0,s=function(e){if(e>=o.length)return Promise.resolve();var t=o[e];h.U.assert(t.payloadSize==r.pageSize);var n=new Uint8Array(4+t.payloadSize);return l(n,0,t.targetAddr),h.U.memcpy(n,4,t.data,0,t.payloadSize),r.talkAsync(f.HF2_CMD_WRITE_FLASH_PAGE,n).then(function(){return s(e+1)})};return this.switchToBootloaderAsync().then(function(){var e=o.length*r.pageSize;return g("Starting flash ("+Math.round(e/1024)+"kB)."),a=Date.now(),p(o,function(e,t){return r.readWordsAsync(e,t)})}).then(function(e){if(e.length!=o.length){var t=(o=e).length*r.pageSize;g("Performing partial flash ("+Math.round(t/1024)+"kB).")}}).then(function(){return s(0)}).then(function(){var e=Date.now(),t=e-i,n=e-a;g("Flashing done at "+Math.round(o.length*r.pageSize/n*1e3/1024)+" kB/s in "+t+"ms (reset "+(t-n)+"ms). Resetting.")}).then(function(){return r.talkAsync(f.HF2_CMD_RESET_INTO_APP).catch(function(e){})}).then(function(){})},e.prototype.initAsync=function(){var n=this;return this.rawMode?Promise.resolve():Promise.resolve().then(function(){return n.talkAsync(f.HF2_CMD_BININFO)}).then(function(e){return n.bootloaderMode=e[0]==f.HF2_MODE_BOOTLOADER,n.pageSize=i(e,4),n.flashSize=i(e,8)*n.pageSize,n.maxMsgSize=i(e,12),g("Connected; msgSize "+n.maxMsgSize+"B; flash "+n.flashSize/1024+"kB; "+(n.bootloaderMode?"bootloader":"application")+" mode"),n.talkAsync(f.HF2_CMD_INFO)}).then(function(e){n.infoRaw=h.U.fromUTF8(h.U.uint8ArrayToString(e));var o={};("Header: "+n.infoRaw).replace(/^([\w\-]+):\s*([^\n\r]*)/gm,function(e,t,n){return o[t.replace(/-/g,"")]=n,""}),n.info=o;var t=/v(\d\S+)\s+(\S+)/.exec(n.info.Header);n.info.Parsed={Version:t[1],Features:t[2]},g("Board-ID: "+n.info.BoardID+" v"+n.info.Parsed.Version+" f"+n.info.Parsed.Features)}).then(function(){n.reconnectTries=0})},e}();function p(o,e){if(!h.appTarget.compile.flashChecksumAddr)return Promise.resolve(o);var n,t=pxtc.UF2.readBytes(o,h.appTarget.compile.flashChecksumAddr,48),r=pxtc.hex.parseChecksumBlock(t);return r?(n=e,h.appTarget.compile.flashChecksumAddr?n(h.appTarget.compile.flashChecksumAddr,12).then(function(e){var t=pxtc.hex.parseChecksumBlock(e);return t?n(t.endMarkerPos,1).then(function(e){return i(e,0)!=t.endMarker?(h.log("end-marker mismatch"),null):t}):null}):Promise.resolve(null)).then(function(e){if(!e)return o;var n=e.regions.filter(function(t){return r.regions.some(function(e){return t.checksum==e.checksum&&t.length==e.length&&t.start==e.start})});if(0==n.length)return o;g("skipping flash at: "+n.map(function(e){return pxtc.assembler.tohex(e.start)+" ("+e.length/1024+"kB)"}).join(", "));var t=function(t){return n.some(function(e){return e.start<=t&&t<e.start+e.length})};return o.filter(function(e){return!(t(e.targetAddr)&&t(e.targetAddr+e.payloadSize-1))})}):Promise.resolve(o)}f.Wrapper=e,f.onlyChangedBlocksAsync=p}(h.HF2||(h.HF2={}))}(pxt||(pxt={})),function(e){e.REF_TAG_STRING=1,e.REF_TAG_BUFFER=2,e.REF_TAG_IMAGE=3,e.REF_TAG_NUMBER=32,e.REF_TAG_ACTION=33}(pxt||(pxt={})),function(B){!function(t){var f,e,g,n,h,m,a,p,y=B.Util,d=B.HF2,o=1409050336,r=665147697,i=287358355,_=1888490768,s=915601917,l=d.read32,v=!1;function c(e){return e<<2|2}function b(e){return 1&e?e>>1:0!=e?2&e?e==t.taggedNull?null:e!=t.taggedFalse&&(e==t.taggedTrue||{tagged:e>>2}):{ptr:e}:void 0}function u(e,t){if(y.assert(!(3&e)),y.assert(0<=e),e<2097152){var n=new Uint8Array(t);return e-=a.start,y.memcpy(n,0,a.buf,e,t),Promise.resolve(n)}var o=p.maxMsgSize-32;if(o<t){for(var r=[];0<t;){var i=Math.min(o,t);r.push(u(e,i)),t-=i,e+=i}return Promise.all(r).then(y.uint8ArrayConcat)}return p.readWordsAsync(e,Math.ceil(t/4)).then(function(e){return e.length>t?e.slice(0,t):e})}function k(n){if("object"!=typeof n||!n)return Promise.resolve(n);if("number"==typeof n.ptr){if(3&n.ptr)return Promise.resolve({unalignedPtr:n.ptr});var o=0;return u(n.ptr,56).then(function(t){o=d.read16(t,2);var e=t.length;return o==B.REF_TAG_STRING||o==B.REF_TAG_BUFFER?e=d.read16(t,4)+6:o==B.REF_TAG_IMAGE?e=d.read16(t,4)*d.read16(t,8)+8:o==B.REF_TAG_NUMBER&&(e=12),e>t.length?u(n.ptr+t.length,e-t.length).then(function(e){return y.uint8ArrayConcat([t,e])}):e<t.length?t.slice(0,e):t}).then(function(e){return o==B.REF_TAG_STRING?y.uint8ArrayToString(e.slice(6)):o==B.REF_TAG_STRING?{type:"buffer",data:e.slice(6)}:o==B.REF_TAG_IMAGE?{type:"image",data:e.slice(8),width:d.read16(e,4),height:d.read16(e,8)}:o==B.REF_TAG_NUMBER?new Float64Array(e.buffer.slice(4))[0]:{type:"unknown",tag:o,refcnt:d.read16(e,0),data:e.slice(4)}})}return Promise.resolve(n)}function T(n){for(var e=[],t=function(t){e.push(k(n[t]).then(function(e){n[t]=e}))},o=0,r=Object.keys(n);o<r.length;o++){t(r[o])}return Promise.all(e).then(function(){})}function E(e){for(var t=f.breakpoints,n=t[0],o=1/0,r=0,i=t;r<i.length;r++){var a=i[r],s=e-a.binAddr;0<=s&&s<o&&(o=s,n=a)}return n}function S(c){return v?Promise.resolve():(v=!0,D().then(function(e){for(var t,n,o,r=d.decodeU32LE(c)[0],i={},a=0,s=f.procDebugInfo[0].locals;a<s.length;a++){var l=s[a];t=l,o=void 0,n=e.globals,null===(o=function(){switch(t.type){case"uint32":return d.read32(n,t.index);case"int32":return 0|d.read32(n,t.index);case"uint16":return d.read16(n,t.index);case"int16":return d.read16(n,t.index)<<16>>16;case"uint8":return n[t.index];case"int8":return n[t.index]<<24>>24;default:return null}}())&&(y.assert(0==(3&t.index)),o=b(d.read32(n,t.index))),i[t.name]=o}return h=E(r),u={type:"debugger",subtype:"breakpoint",breakpointId:h.id,globals:i,stackframes:[]},g(),p.talkAsync(_)}).then(function(e){!function(e,t){for(var n=h.binAddr,o=0,r=f.procDebugInfo.filter(function(e){return e.codeStartLoc<=n&&n<=e.codeEndLoc})[0];r&&r!=f.procDebugInfo[0];){var i=E(n),a=y.clone(i);a.functionName=r.name,t.stackframes.push({locals:{},funcInfo:a,breakpointId:i.id});for(var s=t.stackframes[t.stackframes.length-1],l=0,c=0,u=r.locals;c<u.length;c++){var g=u[c];y.assert(g.index==l++),s.locals[g.name]=b(e[o++])}n=2147483646&e[o++];for(var p=m[n+""],d=0,_=r.args;d<_.length;d++)g=_[d],s.locals[g.name]=b(e[o+(r.args.length-1-g.index)]);if(!p)break;r=p.from,o+=p.stack-r.localsMark}}(d.decodeU32LE(e),u);var t=[u.globals].concat(u.stackframes.map(function(e){return e.locals}));return Promise.map(t,T)}).then(function(){return t.postMessage(u)}));var u}function C(){v=!1,e=new Promise(function(e,t){g=e})}function x(e){return void 0===e&&(e=!1),Promise.resolve().then(function(){return p.talkAsync(r,d.encodeU32LE([e?1:3]))}).then(C)}function A(){return e||(e=Promise.resolve()),e}function D(){return(n?Promise.resolve(n):p.talkAsync(o).then(function(e){return n={numGlobals:l(e,0),globalsPtr:l(e,4)}})).then(function(e){return p.readWordsAsync(e.globalsPtr,e.numGlobals)}).then(function(e){return{staticState:n,globals:e}})}t.taggedUndefined=0,t.taggedNull=c(1),t.taggedFalse=c(2),t.taggedTrue=c(16),t.postMessage=function(e){return console.log(e)},t.decodeValue=b,t.heapExpandAsync=k,t.heapExpandMapAsync=T,t.startDebugAsync=function(c,e){return(p=e).onEvent(s,S),(v=!1,n=f=null,Promise.resolve()).then(function(){m={};for(var e=[],t=0,n=(f=c).procDebugInfo;t<n.length;t++)e[(i=n[t]).idx]=i;for(var o=0,r=c.procDebugInfo;o<r.length;o++)for(var i,a=0,s=(i=r[o]).calls;a<s.length;a++){var l=s[a];m[l.addr+""]={from:i,to:e[l.procIndex],stack:l.stack}}}).then(function(){var e=f.outfiles[pxtc.BINARY_UF2],t=y.stringToUint8Array(atob(e));a=pxtc.UF2.toBin(t);var n=pxtc.UF2.parseFile(t);return p.reflashAsync(n)}).then(function(){return p.talkAsync(i).catch(function(e){})}).then(function(){return Promise.delay(200)}).then(function(){return p.reconnectAsync()}).then(C).then(A)},t.handleMessage=function(e){if(console.log("HWDBGMSG",e),"debugger"==e.type){var t=!1;switch(e.subtype){case"stepinto":t=!0;case"stepover":x(t)}}},t.resumeAsync=x,t.waitForHaltAsync=A,t.getHwStateAsync=D}(B.HWDBG||(B.HWDBG={}))}(pxt||(pxt={})),function(v){!function(e){var _,t,f,n;(t=_=e.NT||(e.NT={}))[t.Prefix=0]="Prefix",t[t.Infix=1]="Infix",t[t.Block=2]="Block",t[t.NewLine=3]="NewLine",(n=f=e.GlueMode||(e.GlueMode={}))[n.None=0]="None",n[n.WithSpace=1]="WithSpace",n[n.NoSpace=2]="NoSpace";var o,r=["break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","export","extends","false","finally","for","function","if","import","in","instanceof","new","null","return","super","switch","this","throw","true","try","typeof","var","void","while","with"];function i(e){return 20<e.length&&/\n/.test(e)?"`"+e.replace(/[\\`${}]/g,function(e){return"\\"+e})+"`":JSON.stringify(e)}function a(e,t,n){return{type:e,op:t,children:n}}function s(){return a(_.NewLine,"",[])}function l(e,t){return a(_.Prefix,e,t)}function c(e,t,n){return a(_.Infix,t,null==e?[n]:[e,n])}function h(e){return l(e,[])}function u(e){return a(_.Block,"",e)}function m(e){return l("",e)}function g(e,t){void 0===t&&(t=!1);for(var n=[],o=0,r=e;o<r.length;o++){var i=r[o];t?(0<n.length&&n.push(h(",")),n.push(s())):0<n.length&&n.push(h(", ")),n.push(i)}return t&&n.push(s()),m(n)}e.stringLit=i,e.mkNode=a,e.mkNewLine=s,e.mkPrefix=l,e.mkInfix=c,e.mkText=h,e.mkBlock=u,e.mkGroup=m,e.mkStmt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return n&&n.type==_.Block||e.push(s()),m(e)},e.mkCommaSep=g,function(e){function r(e,t,n,o){return void 0===n&&(n=!1),void 0===o&&(o=!1),m(o?[c(t[0],".",h(e)),h("("),g(t.slice(1),n),h(")")]:[h(e),h("("),g(t,n),h(")")])}function n(e,t,n,o){return r(e+"."+t,n,o)}function o(e,t){return v.U.assert(2==t.length),c(t[0],e,t[1])}e.mkArrayLiteral=function(e){return m([h("["),g(e,!1),h("]")])},e.mkNumberLiteral=function(e){return h(e.toString())},e.mkBooleanLiteral=function(e){return h(e?"true":"false")},e.mkStringLiteral=function(e){return h(i(e))},e.mkPropertyAccess=function(e,t){return m([c(t,".",h(e))])},e.mkCall=r,e.stdCall=function(e,t,n){return r(e,t,n)},e.extensionCall=function(e,t,n){return r(e,t,n,!0)},e.namespaceCall=n,e.mathCall=function(e,t){return n("Math",e,t,!1)},e.mkGlobalRef=function(e){return h(e)},e.mkSimpleCall=o,e.mkWhile=function(e,t){return m([h("while ("),e,h(")"),u(t)])},e.mkComment=function(e){return h("// "+e)},e.mkMultiComment=function(e){var o=[h("/**"),s()];return e.split("\n").forEach(function(e,t,n){e&&(o.push(h(" * "+e)),o.push(s()),t<n.length-1&&(o.push(h(" * ")),o.push(s())))}),m(o.concat([h(" */"),s()]))},e.mkAssign=function(e,t){return o("=",[e,t])},e.mkParenthesizedExpression=function(e){return m([h("("),e,h(")")])}}(o=e.Helpers||(e.Helpers={})),e.H=o;var y={"=":3,"+=":3,"-=":3,"?":4,":":4,"||":5,"&&":6,"|":7,"^":8,"&":9,"==":10,"!=":10,"===":10,"!==":10,"<":11,">":11,"<=":11,">=":11,">>":12,">>>":12,"<<":12,"+":13,"-":13,"*":14,"/":14,"%":14,"**":15,"!":16,"~":16,"P-":16,"P+":16,"++":16,"--":16,".":18};e.flattenNode=function(e){var i=[],a={},s="",l="",c=[{}],t=m(e);return function e(t,n){if(t.type==_.Infix){var o=[],r=v.U.lookup(y,t.op);if(null==r&&v.U.oops("bad infix op: "+t.op),r<n&&l("("),1==t.children.length)l(t.op),e(t.children[0],r),o.push(t.children[0]);else{var i=3!=r&&"**"!=t.op;e(t.children[0],i?r:r+.1),o.push(t.children[0]),"."==t.op?l("."):l(" "+t.op+" "),e(t.children[1],i?r+.1:r),o.push(t.children[1])}r<n&&l(")"),t.type=_.Prefix,t.op="",t.children=o}else for(var a=0,s=t.children;a<s.length;a++)e(s[a],-1);function l(e){"P"==e[0]&&(e=e.slice(1)),o.push(h(e))}}(t,-1),u(t),s||(s+="\n"),{output:s,sourceMap:i};function u(e){e.glueToBlock&&(d(),e.glueToBlock==f.WithSpace&&(s+=" "));var t=g();switch(e.type){case _.Infix:v.U.oops("no infix should be left");break;case _.NewLine:s+="\n"+l;break;case _.Block:!function(e){var t=e.noFinalNewline?"":"\n";if(0==e.children.length)return p(" {\n\t\n}"+t);var n=v.U.clone(c[c.length-1]||{});c.push(n),l+="    "," "!=s[s.length-1]&&p(" "),p("{\n");for(var o=0,r=e.children;o<r.length;o++){var i=r[o];u(i)}l=l.slice(4),d(),p("\n}"+t),c.pop()}(e);break;case _.Prefix:e.canIndentInside?s+=e.op.replace(/\n/g,"\n"+l+"    "):s+=e.op,e.children.forEach(u)}var n=g();if(e.id)if(a[e.id]){var o=a[e.id];o.start=Math.min(o.start,t),o.end=Math.max(o.end,n)}else{var r={id:e.id,start:t,end:n};a[e.id]=r,i.push(r)}}function g(){var t=0;return s.replace(/\n/g,function(e){return t++,e}),t}function p(e){s+=e.replace(/\n/g,"\n"+l)}function d(){s=s.replace(/\n *$/,"")}},e.isReservedWord=function(e){return-1!==r.indexOf(e)}}(v.blocks||(v.blocks={}))}(pxt||(pxt={})),function(f){var e=function(){function r(e,t,n,o){this.id=e,this._verspec=t,this.parent=n,this.level=-1,this.isLoaded=!1,o&&(this.level=o.level+1),this.addedBy=[o]}return r.getConfigAsync=function(o,r,i){return Promise.resolve().then(function(){if(f.github.isGithubId(i)){var t=f.github.parseRepoId(i);return f.packagesConfigAsync().then(function(e){return f.github.repoAsync(t.fullName,e)}).then(function(e){return e?f.github.pkgConfigAsync(t.fullName,t.tag):null})}var e=f.patching.upgradePackageReference(o,r,i),n=f.appTarget.bundledpkgs[e];return JSON.parse(n[f.CONFIG_NAME])})},r.corePackages=function(){var t=f.appTarget.bundledpkgs;return Object.keys(t).map(function(e){return JSON.parse(t[e][f.CONFIG_NAME])}).filter(function(e){return!!e})},r.prototype.version=function(){return this.resolvedVersion||this._verspec},r.prototype.verProtocol=function(){var e=this.version().split(":");return 1<e.length?e[0]:""},r.prototype.verArgument=function(){var e=this.verProtocol();return e?this.version().slice(e.length+1):this.version()},r.prototype.targetVersion=function(){return this.parent&&this.parent!=this?this.parent.targetVersion():this.config.targetVersions?this.config.targetVersions.target:void 0},r.prototype.commonDownloadAsync=function(){var t=this,e=this.verProtocol();if("pub"==e)return f.Cloud.downloadScriptFilesAsync(this.verArgument());if("github"==e)return f.packagesConfigAsync().then(function(e){return f.github.downloadPackageAsync(t.verArgument(),e)}).then(function(e){return e.files});if("embed"==e){var n=f.getEmbeddedScript(this.verArgument());return Promise.resolve(n)}return Promise.resolve(null)},r.prototype.host=function(){return this.parent._host},r.prototype.readFile=function(e){return this.host().readFile(this,e)},r.prototype.resolveDep=function(e){return this.parent.deps.hasOwnProperty(e)?this.parent.deps[e]:null},r.prototype.saveConfig=function(){var e=JSON.stringify(this.config,null,4)||"\n";this.host().writeFile(this,f.CONFIG_NAME,e)},r.prototype.parseJRes=function(e){void 0===e&&(e={});for(var t=0,n=this.getFiles();t<n.length;t++){var o=n[t];if(f.U.endsWith(o,".jres"))for(var r=JSON.parse(this.readFile(o)),i=r["*"],a=0,s=Object.keys(r);a<s.length;a++){var l=s[a];if("*"!=l){var c=r[l];"string"==typeof c&&(c={data:c});var u=c.namespace||i.namespace||"";u&&(u+=".");var g=c.id||u+l,p=c.icon,d=c.mimeType||i.mimeType,_=c.dataEncoding||i.dataEncoding||"base64";p||"base64"!=_||"image/png"!=d&&"image/jpeg"!=d||(p="data:"+d+";base64,"+c.data),e[g]={id:g,data:c.data,dataEncoding:c.dataEncoding||i.dataEncoding||"base64",icon:p,namespace:u,mimeType:d}}}}return e},r.prototype.resolveVersionAsync=function(){var e=this._verspec;return f.getEmbeddedScript(this.id)?this.resolvedVersion=e="embed:"+this.id:e&&"*"!=e||f.U.userError(lf("version not specified for {0}",this.id)),Promise.resolve(e)},r.prototype.downloadAsync=function(){var t=this;return this.resolveVersionAsync().then(function(e){if(/^embed:/.test(e)||!t.config||t.config.installedVersion!=e)return f.debug("downloading "+e),t.host().downloadPackageAsync(t).then(function(){var e=t.readFile(f.CONFIG_NAME);e||f.U.userError("package "+t.id+" is missing "+f.CONFIG_NAME),t.parseConfig(e),0!=t.level&&(t.config.installedVersion=t.version()),t.saveConfig()}).then(function(){f.debug("installed "+t.id+" /"+e)})})},r.prototype.validateConfig=function(){this.config.dependencies||f.U.userError("Missing dependencies in config of: "+this.id),Array.isArray(this.config.files)||f.U.userError("Missing files in config of: "+this.id),("string"!=typeof this.config.name||!this.config.name||this.config.public&&!/^[a-z][a-z0-9\-_]+$/i.test(this.config.name))&&f.U.userError("Invalid package name: "+this.config.name),this.config.targetVersions&&this.config.targetVersions.target&&0<f.semver.majorCmp(this.config.targetVersions.target,f.appTarget.versions.target)&&f.U.userError(lf("Package {0} requires target version {1} (you are running {2})",this.config.name,this.config.targetVersions.target,f.appTarget.versions.target))},r.prototype.isPackageInUse=function(n,e){void 0===e&&(e=this.readFile("main.ts"));var o=null,t=f.patching.computePatches(this.targetVersion(),"missingPackage");return t&&t.forEach(function(t){Object.keys(t.map).forEach(function(e){t.map[e]===n&&(o=new RegExp(e,"g"))})}),o||(o=new RegExp(n+"\\.","g")),o.test(e)},r.prototype.getMissingPackages=function(r,i){var e=f.patching.computePatches(this.targetVersion(),"missingPackage"),a={};return i&&e&&e.forEach(function(o){Object.keys(o.map).forEach(function(e){var t=new RegExp(e,"g"),n=o.map[e];i.replace(t,function(e){return r.dependencies[n]||(a[n]="*"),""})})}),a},r.prototype.findConflictsAsync=function(e,g){var p,n=this,d=[];return Promise.resolve().then(function(){return"string"==typeof e?r.getConfigAsync(n.targetVersion(),e,g):Promise.resolve(e)}).then(function(e){if(p=e){var u=p.yotta?f.U.jsonFlatten(p.yotta.config):null;n.parent.sortedDeps().forEach(function(e){if(p.core&&e.config.core)return(a=new f.cpp.PkgConflictError(lf("conflict between core packages {0} and {1}",p.name,e.id))).pkg0=e,void d.push(a);var t=!1;if(u){var n=e.config||JSON.parse(e.readFile(f.CONFIG_NAME));if(!!n&&!!n.yotta&&!!e.config.yotta.config)for(var o=f.U.jsonFlatten(n.yotta.config),r=0,i=Object.keys(u);r<i.length;r++){var a,s=i[r],l=o[s],c=p.yotta.configIsJustDefaults||n.yotta.configIsJustDefaults;if(o.hasOwnProperty(s)&&l!==u[s]&&!c&&(!e.parent.config.yotta||!e.parent.config.yotta.ignoreConflicts))(a=new f.cpp.PkgConflictError(lf("conflict on yotta setting {0} between packages {1} and {2}",s,p.name,e.id))).pkg0=e,a.settingName=s,d.push(a),t=!0}}t||p.name!==e.id||e._verspec==g||/^file:/.test(e._verspec)||/^file:/.test(g)||((a=new f.cpp.PkgConflictError(lf("version mismatch for package {0} (installed: {1}, installing: {2})",e,e._verspec,g))).pkg0=e,a.isVersionConflict=!0,d.push(a))})}return Object.keys(p.dependencies).reduce(function(e,t){return e.then(function(){return n.findConflictsAsync(t,p.dependencies[t])}).then(function(e){return d.push.apply(d,e)})},Promise.resolve())}).then(function(){var o=function(e){var t=[];return e.addedBy.forEach(function(e){e.id!==n.id&&(t.push.apply(o(e)),t.push(e))}),t},e=[];return d.forEach(function(n){e.push.apply(e,o(n.pkg0).map(function(e){var t=new f.cpp.PkgConflictError(n.isVersionConflict?lf("a dependency of {0} has a version mismatch with package {1} (installed: {1}, installing: {2})",e.id,p.name,n.pkg0._verspec,g):lf("conflict on yotta setting {0} between packages {1} and {2}",n.settingName,p.name,n.pkg0.id));return t.pkg0=e,t}))}),d.push.apply(d,e),d=d.filter(function(e,t){for(var n=0;n<t;++n)if(e.pkg0.id===d[n].pkg0.id)return!1;return!0})})},r.prototype.upgradeFile=function(e,t){var n=f.patching.patchJavaScript(this.targetVersion(),t);return n!=t&&(f.debug("patching javascript in "+e+" (size="+t.length+")..."),this.host().writeFile(this,e,n,!0)),n},r.prototype.parseConfig=function(e,t){var n=JSON.parse(e);this.config=n;var o=JSON.stringify(this.config);for(var r in this.config.dependencies){var i=f.patching.upgradePackageReference(this.targetVersion(),r,this.config.dependencies[r]);i!=r&&(delete this.config.dependencies[r],i&&(this.config.dependencies[i]="*"))}t&&(this.config.targetVersions={target:t}),JSON.stringify(this.config)!=o&&this.saveConfig(),this.validateConfig()},r.prototype.patchCorePackage=function(){var t=this;f.Util.assert(f.appTarget.simulator&&f.appTarget.simulator.dynamicBoardDefinition),f.Util.assert(0==this.level);var e=Object.keys(this.config.dependencies).filter(function(e){return!!e&&JSON.parse((f.appTarget.bundledpkgs[e]||{})[f.CONFIG_NAME]||"{}").core});if(0==e.length){var n=f.Package.corePackages();n.length&&this.config.dependencies[n[0].name]}else 1<e.length&&(e.pop(),e.forEach(function(e){f.log("removing core package "+e),delete t.config.dependencies[e]}))},r.prototype.dependencies=function(){if(!this.config)return{};var e=f.Util.clone(this.config.dependencies||{});return 0==this.level&&this.config.testDependencies&&f.Util.jsonMergeFrom(e,this.config.testDependencies),e},r.prototype.loadAsync=function(o,e){var s=this;if(void 0===o&&(o=!1),this.isLoaded)return Promise.resolve();var t=Promise.resolve();this.isLoaded=!0;var n=this.readFile(f.CONFIG_NAME);null==n?o||f.U.userError("Package not installed: "+this.id+", did you forget to run `pxt install`?"):t=t.then(function(){return s.parseConfig(n)}),o&&(t=t.then(function(){return s.downloadAsync()})),o&&0==this.level&&(t=t.then(function(){f.debug("upgrading files, target version "+s.targetVersion()),s.getFiles().filter(function(e){return/\.ts$/.test(e)}).forEach(function(e){return s.upgradeFile(e,s.readFile(e))})})),f.appTarget.simulator&&f.appTarget.simulator.dynamicBoardDefinition&&(0==this.level&&(t=t.then(function(){return s.patchCorePackage()})),t=t.then(function(){if(!(s.config.files.indexOf("board.json")<0)){f.setAppTargetVariant(s.config.compileServiceVariant);var e=f.appTarget.simulator.boardDefinition=JSON.parse(s.readFile("board.json"));e.id=s.config.name,f.appTarget.appTheme.boardName=e.boardName||lf("board"),f.appTarget.appTheme.driveDisplayName=e.driveDisplayName||lf("DRIVE");var t=function(e){var t=/^pkg:\/\/(.*)/.exec(e);if(t){var n=t[1],o=s.readFile(n);return f.U.toDataUri(o,f.U.getMime(n))}return e},n=f.appTarget.simulator.boardDefinition;if("object"==typeof n.visual){var o=n.visual;o.image=t(o.image),o.outlineImage=t(o.outlineImage)}}}));var l=function(e){return f.U.mapStringMapAsync(e,function(e,t){var n=s.resolveDep(e);return t=t||"*",n?(n._verspec==t||/^file:/.test(n._verspec)||/^file:/.test(t)||f.U.userError("Version spec mismatch on "+e),n.level=Math.min(n.level,s.level+1),n.addedBy.push(s),Promise.resolve()):(n=new r(e,t,s.parent,s),s.parent.deps[e]=n,(s.parent.deps[e.replace(/---.*/,"")]=n).loadAsync(o))})};return t.then(function(){return l(s.dependencies())}).then(function(){if(s.config.palette&&f.appTarget.runtime&&(f.appTarget.runtime.palette=f.U.clone(s.config.palette)),s.config.screenSize&&f.appTarget.runtime&&(f.appTarget.runtime.screenSize=f.U.clone(s.config.screenSize)),0===s.level){var e=s.readFile("main.ts");if(!e)return Promise.resolve(null);var i=s.getMissingPackages(s.config,e),a=!1;Promise.resolve();Object.keys(i).reduce(function(e,r){return e.then(function(){return s.findConflictsAsync(r,i[r])}).then(function(e){if(e.length){var t=e.map(function(e){return e.pkg0.id}).join(", "),n=e.map(function(e){return e.settingName}).filter(function(e){return!!e}).join(", ");return f.log("skipping missing package "+r+" because it conflicts with the following packages: "+t+" (conflicting settings: "+n+")"),Promise.resolve(null)}f.log("adding missing package "+r),a=!0,s.config.dependencies[r]="*";var o={};return o[r]=i[r],l(o)})},Promise.resolve(null)).then(function(){return a&&(s.saveConfig(),s.validateConfig()),Promise.resolve(null)})}return Promise.resolve(null)}).then(function(){return null})},r.prototype.getFiles=function(){return 0==this.level?this.config.files.concat(this.config.testFiles||[]):this.config.files.slice(0)},r.prototype.addSnapshot=function(e,n){void 0===n&&(n=[""]);for(var t=function(t){n.some(function(e){return f.U.endsWith(t,e)})&&(e[o.id+"/"+t]=o.readFile(t))},o=this,r=0,i=this.getFiles();r<i.length;r++){t(i[r])}e[this.id+"/"+f.CONFIG_NAME]=this.readFile(f.CONFIG_NAME)},r.prototype.packageLocalizationStringsAsync=function(n){var o=this,r=f.appTarget.id,e=[this.id+"-jsdoc",this.id],i={},a=f.appTarget.appTheme||{};if(f.Util.localizeLive&&"this"!=this.id&&f.appTarget.bundledpkgs[this.id]){f.log("loading live translations for "+this.id);var s=f.Util.userLanguage();return Promise.all(e.map(function(t){return f.Util.downloadLiveTranslationsAsync(s,r+"/"+t+"-strings.json",a.crowdinBranch).then(function(e){e&&Object.keys(e).length?f.Util.jsonMergeFrom(i,e):(f.tickEvent("translations.livetranslationsfailed",{filename:t}),f.Util.jsonMergeFrom(i,o.bundledStringsForFile(n,t)))}).catch(function(e){f.tickEvent("translations.livetranslationsfailed",{filename:t}),f.log("error while downloading "+r+"/"+t+"-strings.json"),f.Util.jsonMergeFrom(i,o.bundledStringsForFile(n,t))})})).then(function(){return i})}return e.map(function(e){return o.bundledStringsForFile(n,e)}).filter(function(e){return!!e}).forEach(function(e){return f.Util.jsonMergeFrom(i,e)}),Promise.resolve(i)},r.prototype.bundledStringsForFile=function(e,t){var n={},o=this.config.files,r="_locales/"+e.toLowerCase()+"/"+t+"-strings.json";return-1<o.indexOf(r)&&(n=JSON.parse(this.readFile(r))),2<e.length&&(r="_locales/"+e.substring(0,2).toLowerCase()+"/"+t+"-strings.json",-1<o.indexOf(r)&&(n=JSON.parse(this.readFile(r)))),n},r}(),t=function(n){function e(e){var t=n.call(this,"this","file:.",null,null)||this;return t._host=e,t.deps={},(t.parent=t).addedBy=[t],t.level=0,t.deps[t.id]=t}return __extends(e,n),e.prototype.installAllAsync=function(e){return this.loadAsync(!0,e)},e.prototype.sortedDeps=function(){var o=this,r={},i=[],a=function(e){if(e&&!f.U.lookup(r,e.id)){r[e.id]=!0;var t=e.dependencies(),n=Object.keys(t);n.sort(function(e,t){return f.U.strcmp(e,t)}),n.forEach(function(e){return a(o.resolveDep(e))}),i.push(e.id)}};return a(this),i.map(function(e){return o.resolveDep(e)})},e.prototype.localizationStringsAsync=function(t){var n={};return Promise.all(f.Util.values(this.deps).map(function(e){return e.packageLocalizationStringsAsync(t).then(function(t){t&&Object.keys(t).forEach(function(e){n[e]||(n[e]=t[e])})})})).then(function(){return n})},e.prototype.getTargetOptions=function(){var e=f.U.clone(f.appTarget.compile);return f.U.assert(!!e),e},e.prototype.getJRes=function(){if(!this._jres){this._jres={};for(var e=0,t=this.sortedDeps();e<t.length;e++){t[e].parseJRes(this._jres)}if(f.appTarget.runtime&&f.appTarget.runtime.palette){var n=f.appTarget.runtime.palette.map(function(e){return("000000"+parseInt(e.replace(/#/,""),16).toString(16)).slice(-6)}).join("");this._jres.__palette={id:"__palette",data:n,dataEncoding:"hex",mimeType:"application/x-palette"}}}return this._jres},e.prototype.getCompileOptionsAsync=function(o){var s=this;void 0===o&&(o=this.getTargetOptions());var l={sourceFiles:[],fileSystem:{},target:o,hexinfo:{hex:[]},name:this.config?this.config.name:""},e=function(e,t){s.config.files.indexOf(e)<0&&f.U.userError(lf("please add '{0}' to \"files\" in {1}",e,f.CONFIG_NAME)),t="// Auto-generated. Do not edit.\n"+t+"\n// Auto-generated. Do not edit. Really.\n",s.host().readFile(s,e,!0)!==t&&(f.debug("updating "+e+" (size="+t.length+")..."),s.host().writeFile(s,e,t,!0))};return this.loadAsync().then(function(){f.debug("building: "+s.sortedDeps().map(function(e){return e.config.name}).join(", "));var t=f.cpp.getExtensionInfo(s);return t.shimsDTS&&e("shims.d.ts",t.shimsDTS),t.enumsDTS&&e("enums.d.ts",t.enumsDTS),(o.isNative?s.host().getHexInfoAsync(t):Promise.resolve(null)).then(function(e){delete(t=f.U.flatClone(t)).compileData,delete t.generatedFiles,delete t.extensionFiles,l.extinfo=t,l.hexinfo=e})}).then(function(){return s.config.binaryonly||f.appTarget.compile.shortPointers||!l.target.isNative?null:s.filesToBePublishedAsync(!0)}).then(function(e){if(e){e=f.U.mapMap(e,function(e,t){return s.upgradeFile(e,t)});var t=JSON.stringify({name:s.config.name,comment:s.config.description,status:"unpublished",scriptId:s.config.installedVersion,cloudId:f.CLOUD_ID+f.appTarget.id,editor:o.preferredEditor?o.preferredEditor:f.U.lookup(e,"main.blocks")?f.BLOCKS_PROJECT_NAME:f.JAVASCRIPT_PROJECT_NAME,targetVersions:f.appTarget.versions}),n=JSON.stringify(e);return f.lzmaCompressAsync(t+n).then(function(e){e&&(l.embedMeta=JSON.stringify({compression:"LZMA",headerSize:t.length,textSize:n.length,name:s.config.name,eURL:f.appTarget.appTheme.embedUrl,eVER:f.appTarget.versions?f.appTarget.versions.target:"",pxtTarget:f.appTarget.id}),l.embedBlob=ts.pxtc.encodeBase64(f.U.uint8ArrayToString(e)))})}return Promise.resolve()}).then(function(){for(var e=0,t=s.sortedDeps();e<t.length;e++)for(var n=t[e],o=0,r=n.getFiles();o<r.length;o++){var i=r[o];if(/\.(ts|asm)$/.test(i)){var a=i;0<n.level&&(a="pxt_modules/"+n.id+"/"+i),l.sourceFiles.push(a),l.fileSystem[a]=n.readFile(i)}}return l.jres=s.getJRes(),l})},e.prototype.filesToBePublishedAsync=function(i){var a=this;void 0===i&&(i=!1);var s={};return this.loadAsync().then(function(){i||a.config.public||f.U.userError('Only packages with "public":true can be published');var n=f.U.clone(a.config);delete n.installedVersion,delete n.additionalFilePath,n.targetVersions||(n.targetVersions=f.appTarget.versions),f.U.iterMap(n.dependencies,function(e,t){(!t||/^file:/.test(t)||/^workspace:/.test(t))&&(n.dependencies[e]="*")}),s[f.CONFIG_NAME]=JSON.stringify(n,null,4);for(var e=0,t=a.getFiles();e<t.length;e++){var o=t[e],r=a.readFile(o);null==r&&f.U.userError("referenced file missing: "+o),s[o]=r}return f.U.sortObjectFields(s)})},e.prototype.saveToJsonAsync=function(t){var n=this;return this.filesToBePublishedAsync(!0).then(function(e){return{meta:{cloudId:f.CLOUD_ID+f.appTarget.id,targetVersions:f.appTarget.versions,editor:t||f.BLOCKS_PROJECT_NAME,name:n.config.name},source:JSON.stringify(e,null,2)}})},e.prototype.compressToFileAsync=function(e){return this.saveToJsonAsync(e).then(function(e){return f.lzmaCompressAsync(JSON.stringify(e,null,2))})},e.prototype.computePartDefinitions=function(i){if(!i||!i.length)return{};var a={};return this.sortedDeps().forEach(function(o){var e=o.readFile("pxtparts.json");if(e)try{var r=JSON.parse(e);Object.keys(r).forEach(function(e){if(0<=i.indexOf(e)){var t=a[e]=r[e];if("string"==typeof t.visual.image&&/\.svg$/i.test(t.visual.image)){var n=o.readFile(t.visual.image);n||f.reportError("parts","invalid part definition",{error:"missing visual "+t.visual.image}),t.visual.image="data:image/svg+xml,"+encodeURIComponent(n)}}})}catch(e){f.reportError("parts","invalid pxtparts.json file")}}),a},e}(f.Package=e);f.MainPackage=t}(pxt||(pxt={})),function(i){var e;(e=i.patching||(i.patching={})).computePatches=function(e,t){var n=i.appTarget.compile?i.appTarget.compile.patches:void 0;if(n){var o=i.semver.tryParse(e||"0.0.0")||i.semver.tryParse("0.0.0"),r=[];return Object.keys(n).filter(function(e){return i.semver.inRange(e,o)}).forEach(function(e){return r=r.concat(n[e])}),t&&(r=r.filter(function(e){return e.type==t})),r.length?r:void 0}},e.upgradePackageReference=function(e,t,n){if("*"!=n)return t;var o=i.patching.computePatches(e,"package"),r=t;return o&&o.forEach(function(t){Object.keys(t.map).forEach(function(e){r==e&&(r=t.map[e])})}),r},e.patchJavaScript=function(e,t){var n=i.patching.computePatches(e,"api"),o=t;return n&&n.forEach(function(e){for(var t in e.map){var n=new RegExp(t,"g");o=o.replace(n,e.map[t])}}),o}}(pxt||(pxt={})),function(g){!function(e){function s(e,t){if(e){if(t){var n=e.major-t.major||e.minor-t.minor||e.patch-t.patch;if(n)return n;if(0==e.pre.length&&0<t.pre.length)return 1;if(0<e.pre.length&&0==t.pre.length)return-1;for(var o=0;o<e.pre.length+1;++o){var r=e.pre[o],i=t.pre[o];if(!r)return i?-1:0;if(!i)return 1;if(/^\d+$/.test(r)){if(!/^\d+$/.test(i))return-1;if(n=parseInt(r)-parseInt(i))return n}else{if(/^\d+$/.test(i))return 1;if(n=g.U.strcmp(r,i))return n}}return 0}return-1}return t?1:0}function a(e){var t=l(e);return t||g.U.userError(g.U.lf("'{0}' doesn't look like a semantic version number",e)),t}function l(e){/^v\d/i.test(e)&&(e=e.slice(1));var t=/^(\d+)\.(\d+)\.(\d+)(-([0-9a-zA-Z\-\.]+))?(\+([0-9a-zA-Z\-\.]+))?$/.exec(e);return t?{major:parseInt(t[1]),minor:parseInt(t[2]),patch:parseInt(t[3]),pre:t[5]?t[5].split("."):[],build:t[7]?t[7].split("."):[]}:null}function c(e){var t=e.major+"."+e.minor+"."+e.patch;return e.pre.length&&(t+="-"+e.pre.join(".")),e.build.length&&(t+="+"+e.build.join(".")),t}function u(e,t){var n=e.split(" - ");if(2!=n.length)return!1;var o=l(n[0]),r=l(n[1]);if(!o||!r)return!1;if(!t)return!0;var i=s(o,t),a=s(t,r);return i<=0&&a<0}e.cmp=s,e.parse=a,e.tryParse=l,e.normalize=function(e){return c(a(e))},e.stringify=c,e.majorCmp=function(e,t){var n=l(e),o=l(t);return n.major-o.major},e.strcmp=function(e,t){var n=l(e),o=l(t);return n||o?s(n,o):g.U.strcmp(e,t)},e.inRange=u,e.test=function(){console.log("Test semver");for(var e=["0.9.0","1.0.0-0.3.7","1.0.0-alpha","1.0.0-alpha.1","1.0.0-alpha.beta","1.0.0-beta","1.0.0-beta.2","1.0.0-beta.11","1.0.0-rc.1","1.0.0-x.7.z.92","1.0.0","1.0.1","1.9.0","1.10.0","1.11.0"],t=0;t<e.length;++t){var n=a(e[t]);console.log(e[t],n),g.U.assert(c(n)==e[t]);for(var o=0;o<e.length;++o){var r=s(n,a(e[o]));console.log(e[t],e[o],r),t<o?g.U.assert(r<0):o<t?g.U.assert(0<r):g.U.assert(0==r)}}var i=l("1.2.3");g.U.assert(u("0.1.2 - 2.2.3",i)),g.U.assert(u("1.2.3 - 2.2.3",i)),g.U.assert(!u("0.0.0 - 1.2.3",i)),g.U.assert(!u("1.2.4 - 4.2.3",i)),g.U.assert(!u("0.0.0 - 0.0.1",i))}}(g.semver||(g.semver={}))}(pxt||(pxt={})),function(e){!function(b){var k,e;b.assert=b.Util.assert,b.oops=b.Util.oops,b.U=b.Util,b.ON_START_TYPE="pxt-on-start",b.ON_START_COMMENT=b.U.lf("on start"),b.HANDLER_COMMENT=b.U.lf("code goes here"),b.TS_STATEMENT_TYPE="typescript_statement",b.TS_DEBUGGER_TYPE="debugger_keyword",b.TS_OUTPUT_TYPE="typescript_expression",b.PAUSE_UNTIL_TYPE="pxt_pause_until",b.BINARY_JS="binary.js",b.BINARY_CS="binary.cs",b.BINARY_ASM="binary.asm",b.BINARY_HEX="binary.hex",b.BINARY_UF2="binary.uf2",b.BINARY_ELF="binary.elf",b.NATIVE_TYPE_THUMB="thumb",b.NATIVE_TYPE_AVR="AVR",b.NATIVE_TYPE_CS="C#",b.NATIVE_TYPE_AVRVM="AVRVM",(e=k=b.SymbolKind||(b.SymbolKind={}))[e.None=0]="None",e[e.Method=1]="Method",e[e.Property=2]="Property",e[e.Function=3]="Function",e[e.Variable=4]="Variable",e[e.Module=5]="Module",e[e.Enum=6]="Enum",e[e.EnumMember=7]="EnumMember",e[e.Class=8]="Class",e[e.Interface=9]="Interface",b.computeUsedParts=function(o,e){if(void 0===e&&(e=!1),!o.usedSymbols||!pxt.appTarget.simulator||!pxt.appTarget.simulator.parts)return[];var r=[];if(Object.keys(o.usedSymbols).forEach(function(e){var t=o.usedSymbols[e];if(t&&t.attributes.parts){var n=t.attributes.parts;n&&n.split(/[ ,]+/).forEach(function(e){0<e.length&&r.indexOf(e)<0&&r.push(e)})}}),e){var t=pxt.appTarget.simulator.boardDefinition.onboardComponents;t&&(r=r.filter(function(e){return t.indexOf(e)<0}))}return r.sort(),r=r.reverse()},b.blocksCategory=function(e){var t=e?e.attributes.blockNamespace||e.namespace:void 0;return t?b.Util.capitalize(t.split(".")[0]):void 0},b.getBlocksInfo=function(e){var f=[],h={},m={},y={};function t(e,t){var n="get"==e,o="set"==e,r="number"==t.retType,i=n?m:o?h:y,a=t.namespace+"."+t.retType,s=b.U.lookup(i,a);if(!s){var l="@"+e+"@",c=void 0,u=void 0;if(t.attributes.blockCombineShadow){var g=t.attributes.blockCombineShadow,p=g.match(/^([^,.]*),?([^,.]*)$/);p&&3==p.length&&(c=p[1].trim(),0!=(u=p[2].trim()).length||b.Util.endsWith(g,",")||(u=c,c=""))}var d=t.namespace.toLowerCase()+"="+(c||""),_="value="+(u||"");(s=i[a]={attributes:{blockId:(r?t.namespace:a)+"_blockCombine_"+e,callingConvention:b.ir.CallingConvention.Plain,group:t.attributes.group,paramDefl:{},jsDoc:n?b.U.lf("Read value of a property on an object"):b.U.lf("Update value of property on an object")},name:l,namespace:t.namespace,qName:a+"."+l,pkg:t.pkg,kind:k.Property,parameters:[{name:"property",description:n?b.U.lf("the name of the property to read"):b.U.lf("the name of the property to change"),isEnum:!0,type:"@combined@"},{name:"value",description:o?b.U.lf("the new value of the property"):b.U.lf("the amount by which to change the property"),type:t.retType}].slice(0,n?1:2),retType:n?t.retType:"void",combinedProperties:[]}).attributes.block=n?"%"+d+" %property":o?"set %"+d+" %property to %"+_:"change %"+d+" %property by %"+_,T(s.attributes),f.push(s)}s.combinedProperties.push(t.qName)}for(var n=0,o=b.Util.values(e.byQName);n<o.length;n++){var r=o[n];if(r.attributes.blockCombine)/@set/.test(r.name)||t("get",r),r.isReadOnly||("number"==r.retType&&t("change",r),t("set",r));else if(r.attributes.block&&!r.attributes.fixedInstance&&r.kind!=b.SymbolKind.EnumMember&&r.kind!=b.SymbolKind.Module&&r.kind!=b.SymbolKind.Interface&&r.kind!=b.SymbolKind.Class){if(r.attributes.blockId||(r.attributes.blockId=r.qName.replace(/\./g,"_")),"true"==r.attributes.block){var i=b.U.uncapitalize(r.name);r.kind!=k.Method&&r.kind!=k.Property||(i+=" %"+r.namespace.toLowerCase());for(var a=0,s=r.parameters||[];a<s.length;a++)i+=" %"+s[a].name;r.attributes.block=i,T(r.attributes)}f.push(r)}}for(var l=0,c=f;l<c.length;l++){i=c[l];var u=b.U.lookup(e.byQName,i.namespace);if(u)for(var g=u.attributes,p=i.attributes,d=0,_=["blockNamespace","color","blockGap"];d<_.length;d++){var v=_[d];void 0===p[v]&&g[v]&&(p[v]=g[v])}}return{apis:e,blocks:f,blocksById:pxt.Util.toDictionary(f,function(e){return e.attributes.blockId})}},b.localizeApisAsync=function(e,t){var n=b.Util.userLanguage();return"en"==b.Util.userLanguage()?Promise.resolve(e):t.localizationStringsAsync(n).then(function(s){return b.Util.values(e.byQName).forEach(function(t){var e=s[t.qName];e&&(t.attributes.jsDoc=e,t.parameters&&t.parameters.forEach(function(e){return e.description=s[t.qName+"|param|"+e.name]||e.description}));var n=s["{id:category}"+b.Util.capitalize(t.qName)],o=s[t.qName+"|block"];if(n)t.attributes.block?t.attributes.block=o||t.attributes.block:t.attributes.block=n;else if(t.attributes.block&&o){var r=pxt.blocks.compileInfo(t),i=t.attributes.block;if(t.attributes.block=pxt.blocks.normalizeBlock(o),i!=t.attributes.block){var a=pxt.blocks.compileInfo(t);JSON.stringify(r)!=JSON.stringify(a)&&(pxt.log("block has non matching arguments: "+i+" vs "+t.attributes.block),t.attributes.block=i)}}T(t.attributes)})}).then(function(){return e})},b.emptyExtInfo=function(){var e=pxt.appTarget.compileService;e||(e={});var t=!!e.platformioIni,n="dockermake"==e.buildEngine,o={functions:[],generatedFiles:{},extensionFiles:{},sha:"",compileData:"",shimsDTS:"",enumsDTS:"",onlyPublic:!0};return t?o.platformio={dependencies:{}}:n?o.npmDependencies={}:o.yotta={config:{},dependencies:{}},o};var t,a=["weight","imageLiteral"],s=["advanced","handlerStatement","afterOnStart","optionalVariableArgs","blockHidden","constantShim","blockCombine","decompileIndirectFixedInstances","draggableParameters"];function T(e){if(e.block){var t=e.block.split("||");e._def=n(t[0]),e._def||pxt.debug("Unable to parse block def for id: "+e.blockId),t[1]&&(e._expandedDef=n(t[1])),t[1]&&!e._expandedDef&&pxt.debug("Unable to parse expanded block def for id: "+e.blockId)}}function n(l){for(var c,u=[],g=0,e=function(){var t=l[g],e=void 0;switch(t){case"*":case"_":var n=y(function(e){return e==t}).length,o="_"===t?2:0;if(1===n)e={kind:1<<o};else if(2===n)e={kind:2<<o};else{if(3!==n)return{value:void 0};e={kind:3<<o}}break;case"`":var r=v("`");if(void 0===r)return{value:void 0};e={kind:256,content:r};break;case"|":e={kind:32};break;case"\\":g<l.length-1&&(e={kind:16,content:l[1+g++]});break;case"[":var i=v("]");if(void 0===i)return{value:void 0};if("("!==l[1+g++])return{value:void 0};var a=v(")");if(void 0===a)return{value:void 0};e={kind:512,content:i,type:a};break;case"$":case"%":var s=y(function(e){return/[a-zA-Z0-9_=]/.test(e)},!0).split("=");if(2<s.length)return{value:void 0};e={kind:"$"===t?1024:64,content:s[0],type:s[1]}}e?(c&&u.push({kind:128,content:c}),c=void 0,u.push(e)):c?c+=t:c=t};g<l.length;g++){var t=e();if("object"==typeof t)return t.value}c&&u.push({kind:128,content:c});for(var n=[],o=[],r=[],i=0,a="",s=0;s<u.length;s++){var p=u[s].kind,d=r[r.length-1],_=!1,f=[];if(10&i&&f.push("bold"),5&i&&f.push("italics"),15&p)if(_=!0,p&i){if(!(d&p))return;r.pop();var h=d&(i^=p)|p&i;h&&r.push(h)}else i|=p,r.push(p);else switch(p){case 16:case 128:a+=u[s].content;break;case 32:case 64:case 1024:if(i)return;case 256:case 512:_=!0}if(_&&a&&(n.push({kind:"label",text:a,style:f}),a=""),64==p){var m={kind:"param",name:u[s].content,shadowBlockId:u[s].type,ref:!1};n.push(m),o.push(m)}else if(1024==p){m={kind:"param",name:u[s].content,shadowBlockId:u[s].type,ref:!0};n.push(m),o.push(m)}else 256==p?n.push({kind:"image",uri:u[s].content}):512==p?n.push({kind:"label",text:u[s].content,cssClass:u[s].type}):32==p&&n.push({kind:"break"})}if(!i)return a&&n.push({kind:"label",text:a,style:[]}),{parts:n,parameters:o};function y(e,t){void 0===t&&(t=!1);var n="";for(t&&g++;g<l.length&&e(l[g]);)n+=l[g],++g;return n&&g--,n}function v(t){var e=y(function(e){return e!==t},!0);if(l[g+1]===t)return++g,e}}b.parseCommentString=function(e){for(var u={paramDefl:{},callingConvention:b.ir.CallingConvention.Plain,_source:e},g=!0;g;)g=!1,e=e.replace(/\/\/%[ \t]*([\w\.]+)(=(("[^"\n]*")|'([^'\n]*)'|([^\s]*)))?/,function(e,t,n,o,r,i,a){var s=r?JSON.parse(r):n?r||i||a:"true";if(s||(s=""),b.U.endsWith(t,".defl"))-1<s.indexOf(" ")?u.paramDefl[t.slice(0,t.length-5)]='"'+s+'"':u.paramDefl[t.slice(0,t.length-5)]=s;else if(b.U.endsWith(t,".fieldEditor"))u.paramFieldEditor||(u.paramFieldEditor={}),u.paramFieldEditor[t.slice(0,t.length-12)]=s;else if(b.U.contains(t,".fieldOptions.")){u.paramFieldEditorOptions||(u.paramFieldEditorOptions={});var l=t.slice(0,t.indexOf(".fieldOptions.")),c=t.slice(t.indexOf(".fieldOptions.")+14,t.length);u.paramFieldEditorOptions[l]||(u.paramFieldEditorOptions[l]={}),u.paramFieldEditorOptions[l][c]=s}else b.U.contains(t,".shadowOptions.")?(u.paramShadowOptions||(u.paramShadowOptions={}),l=t.slice(0,t.indexOf(".shadowOptions.")),c=t.slice(t.indexOf(".shadowOptions.")+15,t.length),u.paramShadowOptions[l]||(u.paramShadowOptions[l]={}),u.paramShadowOptions[l][c]=s):b.U.endsWith(t,".min")?(u.paramMin||(u.paramMin={}),u.paramMin[t.slice(0,t.length-4)]=s):b.U.endsWith(t,".max")?(u.paramMax||(u.paramMax={}),u.paramMax[t.slice(0,t.length-4)]=s):u[t]=s;return g=!0,"//% "});for(var t=0,n=a;t<n.length;t++){var o=n[t];"string"==typeof u[o]&&(u[o]=parseInt(u[o]))}for(var r=0,i=s;r<i.length;r++)o=i[r],"string"==typeof u[o]&&(u[o]="true"==u[o]||"1"==u[o]);if(u.trackArgs&&(u.trackArgs=u.trackArgs.split(/[ ,]+/).map(function(e){return parseInt(e)||0})),u.blockExternalInputs&&!u.inlineInputMode&&(u.inlineInputMode="external"),u.paramHelp={},u.jsDoc="",e=e.replace(/\/\*\*([^]*?)\*\//g,function(e,t){return t=(t=t.replace(/\n\s*(\*\s*)?/g,"\n")).replace(/^\s*@param\s+(\w+)\s+(.*)$/gm,function(e,t,n){if(u.paramHelp[t]=n,!u.paramDefl[t]){var o=/\beg\.?:\s*(.+)/.exec(n);if(o&&o[1]){var r=/(?:"([^"]*)")|(?:'([^']*)')|(?:([^\s,]+))/g.exec(o[1]);if(r){var i=r[1]||r[2]||r[3];i||(i=""),-1<i.indexOf(" ")?u.paramDefl[t]='"'+i+'"':u.paramDefl[t]=i}}}return""}),u.jsDoc+=t,""}),u.jsDoc=u.jsDoc.trim(),u.async&&(u.callingConvention=b.ir.CallingConvention.Async),u.promise&&(u.callingConvention=b.ir.CallingConvention.Promise),u.jres&&(u.whenUsed=!0),u.subcategories)try{u.subcategories=JSON.parse(u.subcategories)}catch(e){u.subcategories=void 0}if(u.groups)try{u.groups=JSON.parse(u.groups)}catch(e){u.groups=void 0}if(u.groupIcons)try{u.groupIcons=JSON.parse(u.groupIcons)}catch(e){u.groupIcons=void 0}return T(u),u},b.updateBlockDef=T,b.parseBlockDefinition=n,(t=b.hex||(b.hex={})).isSetupFor=function(e){return t.currentSetup==e.sha},t.currentSetup=null,t.parseChecksumBlock=function(e,t){void 0===t&&(t=0);var n=pxt.HF2.read32(e,t);if(133083260!=(2147483647&n))return pxt.log("no checksum block magic"),null;var o=pxt.HF2.read32(e,t+4),r=pxt.HF2.read32(e,t+8);if(3&o)return pxt.log("invalid end marker position"),null;var i=1<<(255&r);if(i!=pxt.appTarget.compile.flashCodeAlign)return pxt.log("invalid page size: "+i),null;for(var a={magic:n,endMarkerPos:o,endMarker:r,regions:[]},s=t+12;s<e.length-7;s+=8){var l={start:i*pxt.HF2.read16(e,s),length:i*pxt.HF2.read16(e,s+2),checksum:pxt.HF2.read32(e,s+4)};if(!l.length||!l.checksum)break;a.regions.push(l)}return a},function(g){function h(t){var e=function(e){return t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24)>>>0};if(!t||512!=t.length||e(0)!=g.UF2_MAGIC_START0||e(4)!=g.UF2_MAGIC_START1||e(t.length-4)!=g.UF2_MAGIC_END)return null;var n=e(8),o=e(16);476<o&&(o=256);var r=null;if(n&g.UF2_FLAG_FILE){var i=t.slice(32+o),a=i.indexOf(0);0<=a&&(i=i.slice(0,a)),r=b.U.fromUTF8(b.U.uint8ArrayToString(i))}return{flags:n,targetAddr:e(12),payloadSize:o,blockNo:e(20),numBlocks:e(24),fileSize:e(28),data:t.slice(32,32+o),filename:r}}function a(e,t){return!!e&&(e.targetAddr<=t&&t<e.targetAddr+e.payloadSize)}function p(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255}function e(){return{currBlock:null,currPtr:-1,blocks:[],ptrs:[],filesize:0}}function s(e){for(var t=0;t<e.blocks.length;++t)p(e.blocks[t],20,t),p(e.blocks[t],24,e.blocks.length),e.filename&&p(e.blocks[t],28,e.filesize)}function d(e,t,n){var o=e.currBlock,r=t>>8,i=256-(255&t);if(n.length>i){var a=new Uint8Array(n);for(d(e,t,a.slice(0,i));i<n.length;){var s=Math.min(i+256,n.length);d(e,t+i,a.slice(i,s)),i=s}}else{if(r!=e.currPtr){var l=0;o=null;for(var c=0;c<e.ptrs.length;++c)if(e.ptrs[c]==r){o=e.blocks[c];break}o||(p(o=new Uint8Array(512),0,g.UF2_MAGIC_START0),p(o,4,g.UF2_MAGIC_START1),p(o,8,e.filename?g.UF2_FLAG_FILE:g.UF2_FLAG_NONE),p(o,12,r<<8),p(o,16,256),p(o,20,e.blocks.length),p(o,508,g.UF2_MAGIC_END),e.filename&&b.U.memcpy(o,288,b.U.stringToUint8Array(b.U.toUTF8(e.filename))),e.blocks.push(o),e.ptrs.push(r)),e.currPtr=r,e.currBlock=o}var u=32+(255&t);for(l=0;l<n.length;++l)o[u+l]=n[l];e.filesize=Math.max(e.filesize,n.length+t)}}g.UF2_MAGIC_START0=171066965,g.UF2_MAGIC_START1=2656915799,g.UF2_MAGIC_END=179400496,g.UF2_FLAG_NONE=0,g.UF2_FLAG_NOFLASH=1,g.UF2_FLAG_FILE=4096,g.parseBlock=h,g.parseFile=function(e){for(var t=[],n=0;n<e.length;n+=512){var o=h(e.slice(n,n+512));o&&t.push(o)}return t},g.toBin=function(e){if(e.length<512)return null;for(var t=-1,n=-1,o=[],r=0;r<e.length;++r){var i=512*r,a=h(e.slice(i,i+512));if(a){-1==t&&(n=t=a.targetAddr);var s=a.targetAddr-t;s<0||s%4||1048576<s||(0<s&&o.push(new Uint8Array(s)),o.push(e.slice(i+32,i+32+a.payloadSize)),t=a.targetAddr+a.payloadSize)}}for(var l=0,c=0,u=o;c<u.length;c++)l+=(f=u[c]).length;if(0==l)return null;for(var g=new Uint8Array(l),p=0,d=0,_=o;d<_.length;d++){var f=_[d];for(r=0;r<f.length;++r)g[p++]=f[r]}return{buf:g,start:n}},g.readBytes=function(e,t,n){for(var o,r=new Uint8Array(n),i=0;i<n;++i,++t)a(o,t)||(o=e.filter(function(e){return a(e,t)})[0]),o&&(r[i]=o.data[t-o.targetAddr]);return r},g.newBlockFile=e,g.finalizeFile=s,g.concatFiles=function(e){for(var t=0,n=e;t<n.length;t++)s(a=n[t]),a.filename=null;var o={currBlock:null,currPtr:-1,blocks:[],ptrs:[],filesize:0};o.blocks=b.U.concat(e.map(function(e){return e.blocks}));for(var r=0,i=e;r<i.length;r++){var a;(a=i[r]).blocks=[]}return o},g.serializeFile=function(e){s(e);for(var t="",n=0,o=e.blocks;n<o.length;n++){var r=o[n];t+=b.Util.uint8ArrayToString(r)}return t},g.readBytesFromFile=function e(t,n,o){var r,i=n>>8;if(i==t.currPtr)r=t.currBlock;else{for(var a=0;a<t.ptrs.length;++a)if(t.ptrs[a]==i){r=t.blocks[a];break}r&&(t.currPtr=i,t.currBlock=r)}if(!r)return null;var s=new Uint8Array(o),l=Math.min(o,256-(255&n));b.U.memcpy(s,0,r,32+(255&n),l);var c=o-l;if(0<c){var u=e(t,n+l,c);b.U.memcpy(s,l,u)}return s},g.writeBytes=d,g.writeHex=function(e,t){for(var n="0000",o=0;o<t.length;++o){var r=/:02000004(....)/.exec(t[o]);if(r&&(n=r[1]),r=/^:..(....)00(.*)[0-9A-F][0-9A-F]$/.exec(t[o])){for(var i=parseInt(n+r[1],16),a=r[2],s=[],l=0;l<a.length;l+=2)s.push(parseInt(a[l]+a[l+1],16));d(e,i,s)}}}}(b.UF2||(b.UF2={}))}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){var t,n,o;t=e.pxtc||(e.pxtc={}),n=t.ir||(t.ir={}),(o=n.CallingConvention||(n.CallingConvention={}))[o.Plain=0]="Plain",o[o.Async=1]="Async",o[o.Promise=2]="Promise"}(ts||(ts={})),function(n){var e;(e=n.streams||(n.streams={})).createStreamAsync=function(e,t){return n.Cloud.privatePostAsync("streams",{target:e,name:t||"data"}).then(function(e){return e})},e.postPayloadAsync=function(e,t){return n.Util.assert(!!e.privatekey),n.Cloud.privatePostAsync(e.id+"/data?privatekey="+e.privatekey,t)}}(pxt||(pxt={})),function(e){!function(n){var o,e,r,t;(e=o=n.PatternUnits||(n.PatternUnits={}))[e.userSpaceOnUse=0]="userSpaceOnUse",e[e.objectBoundingBox=1]="objectBoundingBox",(t=r=n.LengthUnit||(n.LengthUnit={}))[t.em=0]="em",t[t.ex=1]="ex",t[t.px=2]="px",t[t.in=3]="in",t[t.cm=4]="cm",t[t.mm=5]="mm",t[t.pt=6]="pt",t[t.pc=7]="pc",t[t.percent=8]="percent";var i=function(){function e(e){this.el=S(e)}return e.prototype.attr=function(t){var n=this;return Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])}),this},e.prototype.setAttribute=function(e,t){return this.el.setAttribute(e,t.toString()),this},e.prototype.id=function(e){return this.setAttribute("id",e)},e.prototype.setClass=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.setAttribute("class",e.join(" "))},e.prototype.appendClass=function(e){var t,n;return t=this.el,n=e,t.classList?t.classList.add(n):t.className.baseVal.indexOf(n)<0&&(t.className.baseVal+=" "+n),this},e.prototype.removeClass=function(e){var t,n;t=this.el,n=e,t.classList?t.classList.remove(n):t.className.baseVal=t.className.baseVal.replace(n,"").replace(/\s{2,}/," ")},e.prototype.title=function(e){this.titleElement||(this.titleElement=S("title"),this.el.firstChild?this.el.insertBefore(this.titleElement,this.el.firstChild):this.el.appendChild(this.titleElement)),this.titleElement.textContent=e},e.prototype.setVisible=function(e){return this.setAttribute("visibility",e?"visible":"hidden")},e}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.draw=function(e){var t=function(e){switch(e){case"text":return new p;case"circle":return new _;case"rect":return new d;case"line":return new f;case"polygon":return new y;case"polyline":return new m;case"path":return new v;default:return new g(e)}}(e);return this.el.appendChild(t.el),t},t.prototype.element=function(e,t){return t(this.draw(e)),this},t.prototype.group=function(){var e=new l;return this.el.appendChild(e.el),e},t.prototype.appendChild=function(e){this.el.appendChild(e.el)},t}(n.BaseElement=i),s=function(n){function e(e){var t=n.call(this,"svg")||this;return e&&e.appendChild(t.el),t}return __extends(e,n),e.prototype.define=function(e){return this.defs||(this.defs=new u(this.el)),e(this.defs),this},e}(n.DrawContext=a);n.SVG=s;var l=function(n){function e(e){var t=n.call(this,"g")||this;return e&&e.appendChild(t.el),t}return __extends(e,n),e.prototype.translate=function(e,t){return this.left=e,this.top=t,this.updateTransform()},e.prototype.scale=function(e){return this.scaleFactor=e,this.updateTransform()},e.prototype.updateTransform=function(){var e="";return null!=this.left&&(e+="translate("+this.left+" "+this.top+")"),null!=this.scaleFactor&&(e+=" scale("+this.scaleFactor+")"),this.setAttribute("transform",e),this},e}(a);n.Group=l;var c=function(e){function t(){return e.call(this,"pattern")||this}return __extends(t,e),t.prototype.units=function(e){return this.setAttribute("patternUnits",e===o.objectBoundingBox?"objectBoundingBox":"userSpaceOnUse")},t.prototype.contentUnits=function(e){return this.setAttribute("patternContentUnits",e===o.objectBoundingBox?"objectBoundingBox":"userSpaceOnUse")},t.prototype.size=function(e,t){return this.setAttribute("width",e),this.setAttribute("height",t),this},t}(a);n.Pattern=c;var u=function(n){function e(e){var t=n.call(this,"defs")||this;return e.appendChild(t.el),t}return __extends(e,n),e.prototype.create=function(e,t){var n;switch(e){case"path":n=new v;break;case"pattern":n=new c;break;case"radialGradient":n=new E;break;case"linearGradient":n=new T;break;default:n=new i(e)}return n.id(t),this.el.appendChild(n.el),n},e}(i);n.DefsElement=u;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.at=function(e,t){return this.setAttribute("x",e),this.setAttribute("y",t),this},t.prototype.moveTo=function(e,t){return this.at(e,t)},t.prototype.fill=function(e,t){return this.setAttribute("fill",e),null!=t&&this.opacity(t),this},t.prototype.opacity=function(e){return this.setAttribute("fill-opacity",e)},t.prototype.stroke=function(e,t){return this.setAttribute("stroke",e),null!=t&&this.strokeWidth(t),this},t.prototype.strokeWidth=function(e){return this.setAttribute("stroke-width",e)},t.prototype.strokeOpacity=function(e){return this.setAttribute("stroke-opacity",e)},t.prototype.onDown=function(e){return n.events.down(this.el,e),this},t.prototype.onUp=function(e){return n.events.up(this.el,e),this},t.prototype.onMove=function(e){return n.events.move(this.el,e),this},t.prototype.onEnter=function(e){return n.events.enter(this.el,e),this},t.prototype.onLeave=function(e){return n.events.leave(this.el,e),this},t.prototype.onClick=function(e){return n.events.click(this.el,e),this},t}(a),p=function(n){function e(e){var t=n.call(this,"text")||this;return null!=e&&t.text(e),t}return __extends(e,n),e.prototype.text=function(e){return this.el.textContent=e,this},e.prototype.fontFamily=function(e){return this.setAttribute("font-family",e)},e.prototype.fontSize=function(e,t){return this.setAttribute("font-size",x(e,t))},e.prototype.offset=function(e,t,n){return 0!==e&&this.setAttribute("dx",x(e,n)),0!==t&&this.setAttribute("dy",x(t,n)),this},e.prototype.anchor=function(e){return this.setAttribute("text-anchor",e)},e}(n.Drawable=g);n.Text=p;var d=function(e){function t(){return e.call(this,"rect")||this}return __extends(t,e),t.prototype.width=function(e,t){return void 0===t&&(t=r.px),this.setAttribute("width",x(e,t))},t.prototype.height=function(e,t){return void 0===t&&(t=r.px),this.setAttribute("height",x(e,t))},t.prototype.corner=function(e){return this.corners(e,e)},t.prototype.corners=function(e,t){return this.setAttribute("rx",e),this.setAttribute("ry",t),this},t.prototype.size=function(e,t,n){return void 0===n&&(n=r.px),this.width(e,n),this.height(t,n),this},t}(g);n.Rect=d;var _=function(e){function t(){return e.call(this,"circle")||this}return __extends(t,e),t.prototype.at=function(e,t){return this.setAttribute("cx",e),this.setAttribute("cy",t),this},t.prototype.radius=function(e){return this.setAttribute("r",e)},t}(g);n.Circle=_;!function(e){function t(){return e.call(this,"ellipse")||this}__extends(t,e),t.prototype.at=function(e,t){return this.setAttribute("cx",e),this.setAttribute("cy",t),this},t.prototype.radius=function(e,t){return this.setAttribute("rx",e),this.setAttribute("ry",t),this}}(g);var f=function(e){function t(){return e.call(this,"line")||this}return __extends(t,e),t.prototype.at=function(e,t,n,o){return this.from(e,t),null!=n&&null!=o&&this.to(n,o),this},t.prototype.from=function(e,t){return this.setAttribute("x1",e),this.setAttribute("y1",t),this},t.prototype.to=function(e,t){return this.setAttribute("x2",e),this.setAttribute("y2",t),this},t}(g);n.Line=f;var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.points=function(e){return this.setAttribute("points",e)},t.prototype.with=function(e){return this.points(e.map(function(e){return e.x+" "+e.y}).join(","))},t}(g),m=function(e){function t(){return e.call(this,"polyline")||this}return __extends(t,e),t}(n.PolyElement=h);n.Polyline=m;var y=function(e){function t(){return e.call(this,"polygon")||this}return __extends(t,e),t}(h);n.Polygon=y;var v=function(t){function e(){var e=t.call(this,"path")||this;return e.d=new C,e}return __extends(e,t),e.prototype.update=function(){return this.setAttribute("d",this.d.toAttribute())},e.prototype.path=function(e){return e(this.d),this.update()},e}(g);n.Path=v;var b=function(e){function t(){return e.call(this,"image")||this}return __extends(t,e),t.prototype.src=function(e){return this.setAttribute("href",e)},t.prototype.width=function(e,t){return void 0===t&&(t=r.px),this.setAttribute("width",x(e,t))},t.prototype.height=function(e,t){return void 0===t&&(t=r.px),this.setAttribute("height",x(e,t))},t.prototype.size=function(e,t,n){return void 0===n&&(n=r.px),this.width(e,n),this.height(t,n),this},t}(g);n.Image=b;var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.units=function(e){return this.setAttribute("gradientUnits",e===o.objectBoundingBox?"objectBoundingBox":"userSpaceOnUse")},t.prototype.stop=function(e,t,n){var o=S("stop");return o.setAttribute("offset",e+"%"),null!=t&&o.setAttribute("stop-color",t),null!=n&&o.setAttribute("stop-opacity",n),this.el.appendChild(o),this},t}(i),T=function(e){function t(){return e.call(this,"linearGradient")||this}return __extends(t,e),t.prototype.start=function(e,t){return this.setAttribute("x1",e),this.setAttribute("y1",t),this},t.prototype.end=function(e,t){return this.setAttribute("x2",e),this.setAttribute("y2",t),this},t}(n.Gradient=k);n.LinearGradient=T;var E=function(e){function t(){return e.call(this,"radialGradient")||this}return __extends(t,e),t.prototype.center=function(e,t){return this.setAttribute("cx",e),this.setAttribute("cy",t),this},t.prototype.focus=function(e,t,n){return this.setAttribute("fx",e),this.setAttribute("fy",t),this.setAttribute("fr",n),this},t.prototype.radius=function(e){return this.setAttribute("r",e)},t}(k);function S(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}n.RadialGradient=E;var C=function(){function e(){this.ops=[]}return e.prototype.clear=function(){this.ops=[]},e.prototype.moveTo=function(e,t){return this.op("M",e,t)},e.prototype.moveBy=function(e,t){return this.op("m",e,t)},e.prototype.lineTo=function(e,t){return this.op("L",e,t)},e.prototype.lineBy=function(e,t){return this.op("l",e,t)},e.prototype.cCurveTo=function(e,t,n,o,r,i){return this.op("C",e,t,n,o,r,i)},e.prototype.cCurveBy=function(e,t,n,o,r,i){return this.op("c",e,t,n,o,r,i)},e.prototype.qCurveTo=function(e,t,n,o){return this.op("Q",e,t,n,o)},e.prototype.qCurveBy=function(e,t,n,o){return this.op("q",e,t,n,o)},e.prototype.sCurveTo=function(e,t,n,o){return this.op("S",e,t,n,o)},e.prototype.sCurveBy=function(e,t,n,o){return this.op("s",e,t,n,o)},e.prototype.tCurveTo=function(e,t){return this.op("T",e,t)},e.prototype.tCurveBy=function(e,t){return this.op("t",e,t)},e.prototype.arcTo=function(e,t,n,o,r,i,a){return this.op("A",e,t,n,o?1:0,r?1:0,i,a)},e.prototype.close=function(){return this.op("z")},e.prototype.toAttribute=function(){return this.ops.map(function(e){return e.op+" "+e.args.join(" ")}).join(" ")},e.prototype.op=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.ops.push({op:e,args:t}),this},e}();function x(e,t){switch(t){case r.em:return e+"em";case r.ex:return e+"ex";case r.px:return e+"px";case r.in:return e+"in";case r.cm:return e+"cm";case r.mm:return e+"mm";case r.pt:return e+"pt";case r.pc:return e+"pc";case r.percent:return e+"%";default:return e.toString()}}n.PathContext=C}(e.svgUtil||(e.svgUtil={}))}(pxt||(pxt={})),function(e){var t;(function(e){function n(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator&&0<navigator.maxTouchPoints)}function o(){return"undefined"!=typeof window&&!!window.PointerEvent}e.isTouchEnabled=n,e.hasPointerEvents=o,e.down=function(e,t){o()?e.addEventListener("pointerdown",t):n()?(e.addEventListener("mousedown",t),e.addEventListener("touchstart",t)):e.addEventListener("mousedown",t)},e.up=function(e,t){o()?e.addEventListener("pointerup",t):(n(),e.addEventListener("mouseup",t))},e.enter=function(e,t){o()?e.addEventListener("pointerover",function(e){t(!!(1&e.buttons))}):n()?e.addEventListener("touchstart",function(e){t(!0)}):e.addEventListener("mouseover",function(e){t(!!(1&e.buttons))})},e.leave=function(e,t){o()?e.addEventListener("pointerleave",t):n()?e.addEventListener("touchend",t):e.addEventListener("mouseleave",t)},e.move=function(e,t){o()?e.addEventListener("pointermove",t):n()?e.addEventListener("touchmove",t):e.addEventListener("mousemove",t)},e.click=function(e,t){e.addEventListener("click",t)}})((t=e.svgUtil||(e.svgUtil={})).events||(t.events={}))}(pxt||(pxt={})),function(e){var t,n,o;t=e.svgUtil||(e.svgUtil={}),n=t.helpers||(t.helpers={}),o=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return __extends(e,n),e.prototype.at=function(e,t){return this.cx=e,this.cy=t,this.rePosition(),this},e.prototype.text=function(e,t){return void 0===t&&(t=12),n.prototype.text.call(this,e),this.fontSizePixels=t,this.setAttribute("font-size",t+"px"),this.rePosition(),this},e.prototype.rePosition=function(){null!=this.cx&&null!=this.cy&&null!=this.fontSizePixels&&(this.setAttribute("x",this.cx),this.setAttribute("y",this.cy),this.setAttribute("text-anchor","middle"),this.setAttribute("alignment-baseline","middle"))},e}(t.Text),n.CenteredText=o}(pxt||(pxt={})),function(r){!function(e){e.blockColors={loops:"#107c10",logic:"#006970",math:"#712672",images:"#5C2D91",variables:"#A80000",functions:"#005a9e",text:"#996600",arrays:"#A94400",advanced:"#3c3c3c",addpackage:"#717171",search:"#000",debug:"#e03030",default:"#dddddd"},e.blockIcons={loops:"",logic:"",math:"",variables:"",functions:"",text:"",arrays:"",advancedcollapsed:"",advancedexpanded:"",more:"",addpackage:"",search:"",debug:"",default:""};var o="";e.appendToolboxIconCss=function(e,t){if(!(-1<o.indexOf(e)))if(1===t.length){var n=r.Util.unicodeToChar(t);o+="\n                .blocklyTreeIcon."+e+'::before {\n                    content: "'+n+'";\n                }\n            '}else o+="\n                .blocklyTreeIcon."+e+' {\n                    background-image: url("'+r.Util.pathJoin(r.webConfig.commitCdnUrl,encodeURI(t))+'")!important;\n                    width: 30px;\n                    height: 100%;\n                    background-size: 20px !important;\n                    background-repeat: no-repeat !important;\n                    background-position: 50% 50% !important;\n                }\n            '},e.getNamespaceColor=function(e){return r.appTarget.appTheme.blockColors&&r.appTarget.appTheme.blockColors[e]?r.appTarget.appTheme.blockColors[e]:r.toolbox.blockColors[e]?r.toolbox.blockColors[e]:""},e.getNamespaceIcon=function(e){return r.appTarget.appTheme.blockIcons&&r.appTarget.appTheme.blockIcons[e]?r.appTarget.appTheme.blockIcons[e]:r.toolbox.blockIcons[e]?r.toolbox.blockIcons[e]:""},e.advancedTitle=function(){return r.Util.lf("{id:category}Advanced")},e.addPackageTitle=function(){return r.Util.lf("{id:category}Extensions")},e.convertColor=function(e){var t=parseInt(e);return isNaN(t)||console.error("hue style color not supported anymore, use #rrggbb"),e},e.fadeColor=function(e,t,n){(e=e.replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);for(var o="#",r=0;r<3;r++){var i=parseInt(e.substr(2*r,2),16),a=(i=Math.round(Math.min(Math.max(0,n?i+i*t:i-i*t),255))).toString(16);o+=("00"+a).substr(a.length)}return o}}(r.toolbox||(r.toolbox={}))}(pxt||(pxt={})),function(l){var e;(e=l.tutorial||(l.tutorial={})).parseTutorialSteps=function(e,t){var n=t.split(/^##[^#].*$/gim),o=!0;if(n.length<=1&&(n=t.split(/^###[^#].*$/gim),o=!1),0==n[0].indexOf("# Not found"))throw l.log("Tutorial not found: "+e),new Error("Tutorial not found: "+e);var r=[];if(t.replace(o?/^##[^#](.*)$/gim:/^###[^#](.*)$/gim,function(e,t){var n={fullscreen:/@(fullscreen|unplugged)/.test(t),unplugged:/@unplugged/.test(t)};return r.push(n),""}),!(n.length<1)){n[0],n=n.slice(1,n.length);for(var i=0;i<n.length;i++){var a=n[i].trim(),s=a.split("\n");r[i].headerContentMd=s[0],r[i].contentMd=a,r[i].hasHint=1<s.length}return r}},e.bundleTutorialCode=function(e){e=e.replace(/((?!.)\s)+/g,"\n");var o="";return e.replace(/```(sim|block|blocks|filterblocks)\s*\n([\s\S]*?)\n```/gim,function(e,t,n){return o+="\n { \n "+n+"\n } \n",""}),o}}(pxt||(pxt={})),function(u){!function(n){var o,e;n.flattenDiagnosticMessageText=function(e,t){if("string"==typeof e)return e;for(var n=e,o="",r=0;n;){if(r){o+=t;for(var i=0;i<r;i++)o+="  "}o+=n.messageText,r++,n=n.next}return o},(e=o=n.ScriptTarget||(n.ScriptTarget={}))[e.ES3=0]="ES3",e[e.ES5=1]="ES5",e[e.ES6=2]="ES6",e[e.ES2015=2]="ES2015",e[e.Latest=2]="Latest",n.isIdentifierStart=function(e,t){return 65<=e&&e<=90||97<=e&&e<=122||36===e||95===e||127<e&&l(e,t)},n.isIdentifierPart=function(e,t){return 65<=e&&e<=90||97<=e&&e<=122||48<=e&&e<=57||36===e||95===e||127<e&&(n=e,t>=o.ES5?c(n,i):c(n,s));var n},n.reservedWords=["abstract","any","as","break","case","catch","class","continue","const","constructor","debugger","declare","default","delete","do","else","enum","export","extends","false","finally","for","from","function","get","if","implements","import","in","instanceof","interface","is","let","module","namespace","new","null","package","private","protected","public","require","global","return","set","static","super","switch","symbol","this","throw","true","try","type","typeof","var","void","while","with","yield","async","await","of","Math"],n.escapeIdentifier=function(e){if(!e)return"_";var t=e.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_$]/g,function(e){return u.pxtc.isIdentifierPart(e.charCodeAt(0),u.pxtc.ScriptTarget.ES5)?e:""});return t&&u.pxtc.isIdentifierStart(t.charCodeAt(0),u.pxtc.ScriptTarget.ES5)&&-1===n.reservedWords.indexOf(t)||(t="_"+t),t};var t,r=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2208,2208,2210,2220,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3807,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7098,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7413,7414,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11506,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43744,43754,43762,43764,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],i=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,768,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1155,1159,1162,1319,1329,1366,1369,1369,1377,1415,1425,1469,1471,1471,1473,1474,1476,1477,1479,1479,1488,1514,1520,1522,1552,1562,1568,1641,1646,1747,1749,1756,1759,1768,1770,1788,1791,1791,1808,1866,1869,1969,1984,2037,2042,2042,2048,2093,2112,2139,2208,2208,2210,2220,2276,2302,2304,2403,2406,2415,2417,2423,2425,2431,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2500,2503,2504,2507,2510,2519,2519,2524,2525,2527,2531,2534,2545,2561,2563,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2641,2641,2649,2652,2654,2654,2662,2677,2689,2691,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2787,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2876,2884,2887,2888,2891,2893,2902,2903,2908,2909,2911,2915,2918,2927,2929,2929,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3006,3010,3014,3016,3018,3021,3024,3024,3031,3031,3046,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3140,3142,3144,3146,3149,3157,3158,3160,3161,3168,3171,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3260,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3299,3302,3311,3313,3314,3330,3331,3333,3340,3342,3344,3346,3386,3389,3396,3398,3400,3402,3406,3415,3415,3424,3427,3430,3439,3450,3455,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3807,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3948,3953,3972,3974,3991,3993,4028,4038,4038,4096,4169,4176,4253,4256,4293,4295,4295,4301,4301,4304,4346,4348,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4957,4959,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5908,5920,5940,5952,5971,5984,5996,5998,6e3,6002,6003,6016,6099,6103,6103,6108,6109,6112,6121,6155,6157,6160,6169,6176,6263,6272,6314,6320,6389,6400,6428,6432,6443,6448,6459,6470,6509,6512,6516,6528,6571,6576,6601,6608,6617,6656,6683,6688,6750,6752,6780,6783,6793,6800,6809,6823,6823,6912,6987,6992,7001,7019,7027,7040,7155,7168,7223,7232,7241,7245,7293,7376,7378,7380,7414,7424,7654,7676,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8204,8205,8255,8256,8276,8276,8305,8305,8319,8319,8336,8348,8400,8412,8417,8417,8421,8432,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11507,11520,11557,11559,11559,11565,11565,11568,11623,11631,11631,11647,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11744,11775,11823,11823,12293,12295,12321,12335,12337,12341,12344,12348,12353,12438,12441,12442,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,19893,19968,40908,40960,42124,42192,42237,42240,42508,42512,42539,42560,42607,42612,42621,42623,42647,42655,42737,42775,42783,42786,42888,42891,42894,42896,42899,42912,42922,43e3,43047,43072,43123,43136,43204,43216,43225,43232,43255,43259,43259,43264,43309,43312,43347,43360,43388,43392,43456,43471,43481,43520,43574,43584,43597,43600,43609,43616,43638,43642,43643,43648,43714,43739,43741,43744,43759,43762,43766,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44010,44012,44013,44016,44025,44032,55203,55216,55238,55243,55291,63744,64109,64112,64217,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65024,65039,65056,65062,65075,65076,65101,65103,65136,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],a=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1569,1594,1600,1610,1649,1747,1749,1749,1765,1766,1786,1788,1808,1808,1810,1836,1920,1957,2309,2361,2365,2365,2384,2384,2392,2401,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2784,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2877,2877,2908,2909,2911,2913,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3294,3294,3296,3297,3333,3340,3342,3344,3346,3368,3370,3385,3424,3425,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3805,3840,3840,3904,3911,3913,3946,3976,3979,4096,4129,4131,4135,4137,4138,4176,4181,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6067,6176,6263,6272,6312,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8319,8319,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12329,12337,12341,12344,12346,12353,12436,12445,12446,12449,12538,12540,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65138,65140,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500],s=[170,170,181,181,186,186,192,214,216,246,248,543,546,563,592,685,688,696,699,705,720,721,736,740,750,750,768,846,864,866,890,890,902,902,904,906,908,908,910,929,931,974,976,983,986,1011,1024,1153,1155,1158,1164,1220,1223,1224,1227,1228,1232,1269,1272,1273,1329,1366,1369,1369,1377,1415,1425,1441,1443,1465,1467,1469,1471,1471,1473,1474,1476,1476,1488,1514,1520,1522,1569,1594,1600,1621,1632,1641,1648,1747,1749,1756,1759,1768,1770,1773,1776,1788,1808,1836,1840,1866,1920,1968,2305,2307,2309,2361,2364,2381,2384,2388,2392,2403,2406,2415,2433,2435,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2492,2492,2494,2500,2503,2504,2507,2509,2519,2519,2524,2525,2527,2531,2534,2545,2562,2562,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2620,2620,2622,2626,2631,2632,2635,2637,2649,2652,2654,2654,2662,2676,2689,2691,2693,2699,2701,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2748,2757,2759,2761,2763,2765,2768,2768,2784,2784,2790,2799,2817,2819,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2870,2873,2876,2883,2887,2888,2891,2893,2902,2903,2908,2909,2911,2913,2918,2927,2946,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,2997,2999,3001,3006,3010,3014,3016,3018,3021,3031,3031,3047,3055,3073,3075,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3134,3140,3142,3144,3146,3149,3157,3158,3168,3169,3174,3183,3202,3203,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3262,3268,3270,3272,3274,3277,3285,3286,3294,3294,3296,3297,3302,3311,3330,3331,3333,3340,3342,3344,3346,3368,3370,3385,3390,3395,3398,3400,3402,3405,3415,3415,3424,3425,3430,3439,3458,3459,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3530,3530,3535,3540,3542,3542,3544,3551,3570,3571,3585,3642,3648,3662,3664,3673,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3769,3771,3773,3776,3780,3782,3782,3784,3789,3792,3801,3804,3805,3840,3840,3864,3865,3872,3881,3893,3893,3895,3895,3897,3897,3902,3911,3913,3946,3953,3972,3974,3979,3984,3991,3993,4028,4038,4038,4096,4129,4131,4135,4137,4138,4140,4146,4150,4153,4160,4169,4176,4185,4256,4293,4304,4342,4352,4441,4447,4514,4520,4601,4608,4614,4616,4678,4680,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4742,4744,4744,4746,4749,4752,4782,4784,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4814,4816,4822,4824,4846,4848,4878,4880,4880,4882,4885,4888,4894,4896,4934,4936,4954,4969,4977,5024,5108,5121,5740,5743,5750,5761,5786,5792,5866,6016,6099,6112,6121,6160,6169,6176,6263,6272,6313,7680,7835,7840,7929,7936,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8255,8256,8319,8319,8400,8412,8417,8417,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8497,8499,8505,8544,8579,12293,12295,12321,12335,12337,12341,12344,12346,12353,12436,12441,12442,12445,12446,12449,12542,12549,12588,12593,12686,12704,12727,13312,19893,19968,40869,40960,42124,44032,55203,63744,64045,64256,64262,64275,64279,64285,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65056,65059,65075,65076,65101,65103,65136,65138,65140,65140,65142,65276,65296,65305,65313,65338,65343,65343,65345,65370,65381,65470,65474,65479,65482,65487,65490,65495,65498,65500];function l(e,t){return t>=o.ES5?c(e,r):c(e,a)}function c(e,t){if(e<t[0])return!1;for(var n,o=0,r=t.length;o+1<r;){if(n=o+(r-o)/2,t[n-=n%2]<=e&&e<=t[n+1])return!0;e<t[n]?r=n:o=n+2}return!1}n.isUnicodeIdentifierStart=l,(t=n.DiagnosticCategory||(n.DiagnosticCategory={}))[t.Warning=0]="Warning",t[t.Error=1]="Error",t[t.Message=2]="Message"}(u.pxtc||(u.pxtc={}))}(ts||(ts={})),function(l){!function(i){var t=function(n){function e(e){var t=n.call(this,e)||this;return t.message=e,t}return __extends(e,n),e}(Error);i.USBError=t,i.filters=[{classCode:255,subclassCode:42}],i.setFilters=function(e){i.filters=e};var n,o=function(){function e(e){this.dev=e,this.ready=!1,this.onData=function(e){},this.onError=function(e){},this.onEvent=function(e){},this.readLoop()}return e.prototype.error=function(e){throw new t(l.U.lf("USB error on device {0} ({1})",this.dev.productName,e))},e.prototype.log=function(e){e="WebUSB: "+e,l.debug(e)},e.prototype.disconnectAsync=function(){var e=this;return this.dev?(this.ready=!1,this.log("close device"),this.dev.close().catch(function(e){}).then(function(){return e.dev=null,Promise.delay(500)})):Promise.resolve()},e.prototype.reconnectAsync=function(){var t=this;return this.log("reconnect"),this.disconnectAsync().then(r).then(function(e){return t.log("got device: "+e.manufacturerName+" "+e.productName),t.dev=e,t.initAsync()})},e.prototype.sendPacketAsync=function(e){var t=this;return l.Util.assert(e.length<=64),this.dev.transferOut(this.epOut.endpointNumber,e).then(function(e){"ok"!=e.status&&t.error("USB OUT transfer failed")})},e.prototype.readLoop=function(){var t=this,n=function(){t.ready?t.recvPacketAsync().then(function(e){t.onData(e),n()},function(e){t.onError(e),Promise.delay(300).then(n)}):Promise.delay(300).then(n)};n()},e.prototype.recvPacketAsync=function(){var n=this;return this.dev.transferIn(this.epIn.endpointNumber,64).then(function(e){"ok"!=e.status&&n.error("USB IN transfer failed");var t=new Uint8Array(e.data.buffer);return 0==t.length?n.recvPacketAsync():t})},e.prototype.initAsync=function(){var t=this,n=this.dev;return this.log("open device"),n.open().then(function(){return t.log("select configuration"),n.selectConfiguration(1)}).then(function(){t.log("got "+n.configurations[0].interfaces.length+" interfaces");var e=n.configurations[0].interfaces.filter(function(e){for(var t=e.alternates[0],n=0,o=i.filters;n<o.length;n++){var r=o[n];if((null==r.classCode||t.interfaceClass===r.classCode)&&(null==r.subclassCode||t.interfaceSubclass===r.subclassCode)&&(null==r.protocolCode||t.interfaceProtocol===r.protocolCode)&&2==t.endpoints.length&&t.endpoints.every(function(e){return 64==e.packetSize}))return!0}return!1})[0];return e||t.error("cannot find supported USB interface"),t.altIface=e.alternates[0],t.epIn=t.altIface.endpoints.filter(function(e){return"in"==e.direction})[0],t.epOut=t.altIface.endpoints.filter(function(e){return"out"==e.direction})[0],l.Util.assert(64==t.epIn.packetSize),l.Util.assert(64==t.epOut.packetSize),t.log("claim interface"),n.claimInterface(e.interfaceNumber)}).then(function(){t.log("device ready"),t.ready=!0})},e}();function r(){return navigator.usb.getDevices().then(function(e){return e&&e.length?e[0]:Promise.reject(new t(l.U.lf("No USB device selected or connected; try pairing!")))})}function a(){return n||(n=r().then(function(e){var t=new o(e);return t.initAsync().then(function(){return t})}).catch(function(e){return n=null,Promise.reject(e)})),n}function s(){return!!navigator.usb&&(!l.BrowserUtils.isWindows()||l.BrowserUtils.isWindows10())}i.pairAsync=function(){return navigator.usb.requestDevice({filters:i.filters}).then(function(e){return a()}).then(function(e){return e.reconnectAsync()})},i.mkPacketIOAsync=a,i.isEnabled=!1,i.setEnabled=function(e){s()||(e=!1),i.isEnabled=e},i.isAvailable=s}(l.usb||(l.usb={}))}(pxt||(pxt={})),function(s){!function(e){var n=s.Util,o={};function a(i){var a={},s=0,e=new n.PromiseQueue,t=new Promise(function(e,t){a.ready=e});e.enqueue("main",function(){return t});return{opAsync:function(o,r){return e.enqueue("main",function(){return new Promise(function(t,n){var e=""+s++;a[e]=function(e){e?e.errorMessage?n(new Error(e.errorMessage)):t(e):n(new Error("no response"))},i({id:e,op:o,arg:r})})})},recvHandler:function(e){if(a.hasOwnProperty(e.id)){var t=a[e.id];delete a[e.id],t(e.result)}}}}function r(e){var t=new Worker(e),n=a(function(e){return t.postMessage(e)});return t.onmessage=function(e){n.recvHandler(e.data)},n}e.getWorker=function(e){var t=o[e];return t||(t=o[e]=r(e)),t},e.wrap=a,e.makeWebWorker=r,e.makeWebSocket=function(e,n){void 0===n&&(n=null);var r=new WebSocket(e),i=[],o=a(function(e){var t=JSON.stringify(e);i?i.push(t):r.send(t)});return r.onmessage=function(e){var t=JSON.parse(e.data);n&&null==t.id?n(t):o.recvHandler(t)},r.onopen=function(e){s.debug("socket opened");for(var t=0,n=i;t<n.length;t++){var o=n[t];r.send(o)}i=null},r.onclose=function(e){s.debug("socket closed")},o}}(s.worker||(s.worker={}))}(pxt||(pxt={})),function(e){var m;(function(p){function d(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];return e.replace(/{(\d+)}/g,function(e,t){return n[+t]})}p.debug=!1,p.lf=d;var f=h("opcode name doesn't match","<name>"),a=function(){function e(e,t,n,o,r){var i=this;this.opcode=n,this.mask=o,this.is32bit=r,this.canBeShared=!1,m.assert((n&o)==n),this.ei=e,this.code=t.replace(/\s+/g," "),this.friendlyFmt=t.replace(/\$\w+/g,function(e){return i.ei.encoders[e]?i.ei.encoders[e].pretty:e});var a=u(t);this.name=a[0],this.args=a.slice(1)}return e.prototype.emit=function(e){var t=e.words;if(t[0]!=this.name)return f;for(var n=this.opcode,o=1,r=0,i=[],a=null,s=null,l=null,c=0;c<this.args.length;++c){var u=this.args[c],g=t[o++];if("$"==u[0]){var p=this.ei.encoders[u],d=null;if(p.isRegister){if(null==(d=this.ei.registerNo(g)))return h("expecting register name",g);this.ei.isPush(this.opcode)?r++:this.ei.isPop(this.opcode)&&r--}else if(p.isImmediate){if(g=g.replace(/^#/,""),null==(d=e.bin.parseOneInt(g)))return h("expecting number",g);this.ei.isAddSP(this.opcode)?r=-d/this.ei.wordSize():this.ei.isSubSP(this.opcode)&&(r=d/this.ei.wordSize())}else if(p.isRegList){if("{"!=g)return h("expecting {",g);for(d=0;"}"!=t[o];){if(!(g=t[o++]))return h("expecting }",t[o-2]);var _=this.ei.registerNo(g);if(null==_)return h("expecting register name",g);if(d&1<<_)return h("duplicate register name",g);d|=1<<_,this.ei.isPush(this.opcode)?r++:this.ei.isPop(this.opcode)&&r--,","==t[o]&&o++}g=t[o++]}else if(p.isLabel){if(g=g.replace(/^#/,""),/^[+-]?\d+$/.test(g))a="rel"+(d=parseInt(g,10));else if(/^0x[0-9a-fA-F]+$/.test(g))a="abs"+(d=parseInt(g,16));else if(a=g,null==(d=this.ei.getAddressFromLabel(e.bin,this,g,p.isWordAligned))){if(e.bin.finalEmit)return h("unknown label",g);d=8}if(this.ei.is32bit(this)){s=d,l=g;continue}}else m.oops();if(null==d)return h("didn't understand it",g);if(i.push(d),null==(d=p.encode(d)))return h("argument out of range or mis-aligned",g);m.assert(0==(n&d)),n|=d}else if(u!=g)return h("expecting "+u,g)}return t[o]?h("trailing tokens",t[o]):this.ei.is32bit(this)?this.ei.emit32(n,s,e.bin.normalizeExternalLabel(l)):{stack:r,opcode:n,numArgs:i,labelName:e.bin.normalizeExternalLabel(a)}},e.prototype.toString=function(){return this.friendlyFmt},e}();p.Instruction=a;var c=function(){function e(e,t){this.bin=e,this.text=t}return e.prototype.getOpExt=function(){return this.instruction?this.instruction.code:""},e.prototype.getOp=function(){return this.instruction?this.instruction.name:""},e.prototype.update=function(e){this.bin.peepOps++,(e=e.replace(/^\s*/,""))||this.bin.peepDel++,e&&(e+="      "),e="    "+e,this.text=e+"; WAS: "+this.text.trim(),this.instruction=null,this.numArgs=null,this.words=u(e)||[],0==this.words.length?this.type="empty":"@"==this.words[0][0]&&(this.type="directive")},e}();p.Line=c;var s=function(){function e(e){this.baseOffset=0,this.checkStack=!0,this.inlineMode=!1,this.normalizeExternalLabel=function(e){return e},this.currLineNo=0,this.scope="",this.scopeId=0,this.errors=[],this.labels={},this.stackpointers={},this.stack=0,this.commPtr=0,this.peepOps=0,this.peepDel=0,this.peepCounts={},this.stats="",this.throwOnError=!1,this.disablePeepHole=!1,this.stackAtLabel={},this.currLine=new c(this,"<start>"),this.currLine.lineNo=0,this.ei=e,this.ei.file=this}return e.prototype.emitShort=function(e){m.assert(0<=e&&e<=65535),this.buf.push(e)},e.prototype.emitOpCode=function(e){this.emitShort(e)},e.prototype.location=function(){return 2*this.buf.length},e.prototype.pc=function(){return this.location()+this.baseOffset},e.prototype.parseOneInt=function(e){if(!e)return null;if("0"==e)return 0;var t=1;if(0<=e.indexOf("*"))for(var n=null;n=/^([^\*]*)\*(.*)$/.exec(e);){var o=this.parseOneInt(n[1]);if(null==o)return null;t*=o,e=n[2]}"-"==e[0]?(t*=-1,e=e.slice(1)):"+"==e[0]&&(e=e.slice(1));var r=null;if(m.U.endsWith(e,"|1"))return 1|this.parseOneInt(e.slice(0,e.length-2));if(m.U.endsWith(e,"-1"))return this.parseOneInt(e.slice(0,e.length-2))-1;if(m.U.endsWith(e,"+1"))return this.parseOneInt(e.slice(0,e.length-2))+1;if("0"==e[0])if("x"==e[1]||"X"==e[1]){var i=/^0x([a-f0-9]+)$/i.exec(e);i&&(r=parseInt(i[1],16))}else if("b"==e[1]||"B"==e[1]){var a=/^0b([01]+)$/i.exec(e);a&&(r=parseInt(a[1],2))}var s=/^(\d+)$/i.exec(e);return s&&(r=parseInt(s[1],10)),0<=e.indexOf("@")&&((s=/^(\w+)@(-?\d+)$/.exec(e))&&(1!=t&&this.directiveError(d("multiplication not supported with saved stacks")),this.stackpointers.hasOwnProperty(s[1])?r=this.ei.wordSize()*this.ei.computeStackOffset(s[1],this.stack-this.stackpointers[s[1]]+parseInt(s[2])):this.directiveError(d("saved stack not found"))),(s=/^(.*)@(hi|lo|fn)$/.exec(e))&&this.looksLikeLabel(s[1])&&null!=(r=this.lookupLabel(s[1],!0))&&("fn"==s[2]?r=this.ei.toFnPtr(r,this.baseOffset):0<=(r>>=1)&&r<=65535?"hi"==s[2]?r=r>>8&255:"lo"==s[2]?r&=255:m.oops():(this.directiveError(d("@hi/lo out of range")),r=null))),null==r&&this.looksLikeLabel(e)&&null!=(r=this.lookupLabel(e,!0))&&1==this.ei.postProcessRelAddress(this,1)&&(r+=this.baseOffset),null==r||isNaN(r)?null:r*t},e.prototype.looksLikeLabel=function(e){return!/^(r\d|pc|sp|lr)$/i.test(e)&&/^[\.a-zA-Z_][\.:\w+]*$/.test(e)},e.prototype.scopedName=function(e){return"."==e[0]&&this.scope?this.scope+"$"+e:e},e.prototype.lookupLabel=function(e,t){void 0===t&&(t=!1);var n=null,o=this.scopedName(e);return this.labels.hasOwnProperty(o)?(n=this.labels[o],n=this.ei.postProcessRelAddress(this,n)):this.lookupExternalLabel&&null!=(n=this.lookupExternalLabel(e))&&(n=this.ei.postProcessAbsAddress(this,n)),null==n&&t&&(this.finalEmit?this.directiveError(d("unknown label: {0}",e)):n=33333),n},e.prototype.align=function(e){for(m.assert(2==e||4==e||8==e||16==e);this.location()%e!=0;)this.emitOpCode(0)},e.prototype.pushError=function(e,t){void 0===t&&(t="");var n={scope:this.scope,message:d("  -> Line {2} ('{1}'), error: {0}\n{3}",e,this.currLine.text,this.currLine.lineNo,t),lineNo:this.currLine.lineNo,line:this.currLine.text,coremsg:e,hints:t};if(this.errors.push(n),this.throwOnError)throw new Error(n.message)},e.prototype.directiveError=function(e){this.pushError(e)},e.prototype.emitString=function(e){function t(e,t){return 255&(e.charCodeAt(t)||0)}var n,o=/^\s*([\w\.]+\s*:\s*)?.\w+\s+(".*")\s*$/.exec(e);if(o&&null!=(n=function(e){e=e.replace(/\\\\/g,"\\B").replace(/\\(['\?])/g,function(e,t){return t}).replace(/\\[z0]/g,"\0").replace(/\\x([0-9a-f][0-9a-f])/gi,function(e,t){return"\\u00"+t}).replace(/\\B/g,"\\\\");try{return JSON.parse(e)}catch(e){return null}}(o[2]))){this.align(2);for(var r=0;r<n.length+1;r+=2)this.emitShort(t(n,r+1)<<8|t(n,r))}else this.directiveError(d("expecting string"))},e.prototype.parseNumber=function(e){var t=this.parseOneInt(e.shift());return null==t?null:t},e.prototype.parseNumbers=function(e){e=e.slice(1);for(var t=[];;){var n=this.parseNumber(e);if(null==n){this.directiveError(d("cannot parse number at '{0}'",e[0]));break}if(t.push(n),","!=e[0]){if(null==e[0])break;this.directiveError(d("expecting number, got '{0}'",e[0]));break}if(e.shift(),null==e[0])break}return t},e.prototype.emitSpace=function(e){var t=this.parseNumbers(e);if(1==t.length&&t.push(0),2!=t.length)this.directiveError(d("expecting one or two numbers"));else if(t[0]%2!=0)this.directiveError(d("only even space supported"));else{var n=255&t[1];n|=n<<8;for(var o=0;o<t[0];o+=2)this.emitShort(n)}},e.prototype.emitBytes=function(e){var t=this.parseNumbers(e);t.length%2!=0&&(this.directiveError(".bytes needs an even number of arguments"),t.push(0));for(var n=0;n<t.length;n+=2){var o=t[n],r=t[n+1];0<=o&&r<=255&&0<=r&&o<=255?this.emitShort(255&o|(255&r)<<8):this.directiveError(d("expecting uint8"))}},e.prototype.emitHex=function(e){var o=this;e.slice(1).forEach(function(e){if(","!=e)if(e.length%4!=0)o.directiveError(".hex needs an even number of bytes");else if(/^[a-f0-9]+$/i.test(e))for(var t=0;t<e.length;t+=4){var n=parseInt(e.slice(t,t+4),16);n=(255&n)<<8|n>>8&255,o.emitShort(n)}else o.directiveError(".hex needs a hex number")})},e.prototype.handleDirective=function(e){var t,n=this,o=e.words,r=function(){2!=o.length&&n.directiveError(d("expecting one argument"))};switch(o[0]){case".ascii":case".asciz":case".string":this.emitString(e.text);break;case".align":if(r(),null!=(t=this.parseOneInt(o[1]))){if(0==t)return;t<=4?this.align(1<<t):this.directiveError(d("expecting 1, 2, 3 or 4 (for 2, 4, 8, or 16 byte alignment)"))}else this.directiveError(d("expecting number"));break;case".balign":if(r(),null!=(t=this.parseOneInt(o[1]))){if(1==t)return;2==t||4==t||8==t||16==t?this.align(t):this.directiveError(d("expecting 2, 4, 8, or 16"))}else this.directiveError(d("expecting number"));break;case".p2align":r(),null!=(t=this.parseOneInt(o[1]))?this.align(1<<t):this.directiveError(d("expecting number"));break;case".byte":this.emitBytes(o);break;case".hex":this.emitHex(o);break;case".hword":case".short":case".2bytes":this.parseNumbers(o).forEach(function(e){-32768<=e&&e<=65535?n.emitShort(65535&e):n.directiveError(d("expecting int16"))});break;case".word":case".4bytes":case".long":this.parseNumbers(o).forEach(function(e){-2147483648<=e&&e<=4294967295?(n.emitShort(65535&e),n.emitShort(e>>16&65535)):n.directiveError(d("expecting int32"))});break;case".skip":case".space":this.emitSpace(o);break;case".startaddr":this.location()&&this.directiveError(d(".startaddr can be only be specified at the beginning of the file")),r(),this.baseOffset=this.parseOneInt(o[1]);break;case"@stackmark":r(),this.stackpointers[o[1]]=this.stack;break;case"@stackempty":this.checkStack&&(null==this.stackpointers[o[1]]?this.directiveError(d("no such saved stack")):this.stackpointers[o[1]]!=this.stack&&this.directiveError(d("stack mismatch")));break;case"@scope":this.scope=o[1]||"",this.currLineNo=this.scope?0:this.realCurrLineNo;break;case".syntax":case"@nostackcheck":this.checkStack=!1;break;case"@dummystack":r(),this.stack+=this.parseOneInt(o[1]);break;case".section":case".global":this.stackpointers={},this.stack=0,this.scope="$S"+this.scopeId++;break;case".comm":(o=o.filter(function(e){return","!=e})).shift();var i=this.parseOneInt(o[1]),a=0;if(a=o[2]?this.parseOneInt(o[2]):4,null==this.lookupLabel(o[0])){for(this.commPtr||(this.commPtr=this.lookupExternalLabel("_pxt_comm_base")||0,this.commPtr||this.directiveError(d("PXT_COMM_BASE not defined")));this.commPtr&a-1;)this.commPtr++;this.labels[this.scopedName(o[0])]=this.commPtr-this.baseOffset,this.commPtr+=i}break;case".file":case".text":case".cpu":case".fpu":case".eabi_attribute":case".code":case".thumb_func":case".type":case".fnstart":case".save":case".size":case".fnend":case".pad":case".globl":case".local":case"@":break;default:/^\.cfi_/.test(o[0])||this.directiveError(d("unknown directive"))}},e.prototype.handleOneInstruction=function(e,t){var n=t.emit(e);return!n.error&&(this.stack+=n.stack,this.checkStack&&this.stack<0&&this.pushError(d("stack underflow")),e.location=this.location(),e.opcode=n.opcode,e.stack=n.stack,this.emitOpCode(n.opcode),null!=n.opcode2&&this.emitOpCode(n.opcode2),null!=n.opcode3&&this.emitOpCode(n.opcode3),e.instruction=t,e.numArgs=n.numArgs,!0)},e.prototype.handleInstruction=function(n){var t=this;if(!n.instruction||!this.handleOneInstruction(n,n.instruction)){var e=function(e){return t.ei.instructions.hasOwnProperty(e)?t.ei.instructions[e]:[]};if(!n.instruction)for(var o=e(n.words[0]),r=0;r<o.length;++r)if(this.handleOneInstruction(n,o[r]))return;var i=n.words[0].toLowerCase().replace(/s$/,"").replace(/[^a-z]/g,""),a="",s=e(i).concat(e(i+"s"));0<s.length&&s.forEach(function(e){var t=e.emit(n);a+=d("   Maybe: {0} ({1} at '{2}')\n",e.toString(),t.error,t.errorAt)}),this.pushError(d("assembly error"),a)}},e.prototype.buildLine=function(e,n){var o=this,t=function(e){var t=new c(o,e);return t.scope=o.scope,t.lineNo=o.currLineNo,n.push(t),t},r=t(e),i=u(r.text)||[],a=(r.words=i)[0]||"";if(":"==a.charAt(a.length-1)){var s=/^([\.\w]+):$/.exec(i[0]);if(s){if(r.type="label",r.text=s[1]+":",r.words=[s[1]],!(1<i.length))return;i.shift(),a=((r=t(e.replace(/^[^:]*:/,""))).words=i)[0]||""}}var l=a.charAt(0);"."==l||"@"==l?(r.type="directive","@scope"==r.words[0]&&this.handleDirective(r)):0==r.words.length?r.type="empty":r.type="instruction"},e.prototype.prepLines=function(e){var t=this;this.currLineNo=0,this.realCurrLineNo=0,this.lines=[],e.split(/\r?\n/).forEach(function(e){10<t.errors.length||(t.currLineNo++,t.realCurrLineNo++,t.buildLine(e,t.lines))})},e.prototype.iterLines=function(){var o=this;this.stack=0,this.buf=[],this.scopeId=0,this.lines.forEach(function(e){if(!(10<o.errors.length)&&0!=(o.currLine=e).words.length)if("label"==e.type){var t=o.scopedName(e.words[0]);if(o.prevLabel=t,o.finalEmit){var n=o.labels[t];null==n&&m.oops(),m.assert(0<o.errors.length||n==o.location()),o.reallyFinalEmit&&(o.stackAtLabel[t]=o.stack)}else o.labels.hasOwnProperty(t)?o.directiveError(d("label redefinition")):o.inlineMode&&/^_/.test(t)?o.directiveError(d("labels starting with '_' are reserved for the compiler")):o.labels[t]=o.location();e.location=o.location()}else"directive"==e.type?o.handleDirective(e):"instruction"==e.type?o.handleInstruction(e):"empty"==e.type||m.oops()})},e.prototype.getSource=function(o,e,t){var r=this;void 0===e&&(e=1),void 0===t&&(t=0);var n=this.buf?this.location():0,i=this.labels._program_end||n,a=this.labels._frag_start||0;a&&(a=this.labels._js_end-a);var s=this.labels._program_end;s&&(s-=this.labels._js_end);var l=n+this.baseOffset;t&&t<l&&m.U.userError(d("program too big by {0} bytes!",l-t));var c=d("; total bytes: {0} ({1}% of {2}k flash with {3} free)",l,(100*l/(t=t||131072)).toFixed(1),(t/1024).toFixed(1),t-l),u=d("; code sizes (bytes): {0} (incl. {1} frags, and {2} lits); src size {3}\n",i,a,s,n-i)+d("; assembly: {0} lines; density: {1} bytes/stmt\n",this.lines.length,Math.round(100*(i-s)/e)/100)+c+"\n"+this.stats+"\n\n",g=!1;return this.lines.forEach(function(e,t){if("_stored_program"==e.words[0])return u+='_stored_program: .string "..."\n',void(g=!0);if(g)g=!1;else{var n=e.text;if(o){if("@stackempty"==e.words[0]&&r.lines[t-1].text==e.text)return;if(!(n=n.replace(/; WAS: .*/,"")).trim())return}p.debug&&("label"!=e.type&&"instruction"!=e.type||(n+=" \t; 0x"+(e.location+r.baseOffset).toString(16))),u+=n+"\n"}}),u},e.prototype.peepHole=function(){for(var e=this.lines.filter(function(e){return"empty"!=e.type}),t=0;t<e.length;++t){var n=e[t];if(!/^user/.test(n.scope)){var o=e[t+1];if(o){var r=e[t+2];"instruction"==n.type&&this.ei.peephole(n,o,r)}}}},e.prototype.clearLabels=function(){this.labels={},this.commPtr=0},e.prototype.peepPass=function(e){this.disablePeepHole||(this.peepOps=0,this.peepDel=0,this.peepCounts={},this.peepHole(),this.throwOnError=!0,this.finalEmit=!1,this.clearLabels(),this.iterLines(),m.assert(!this.checkStack||0==this.stack),this.finalEmit=!0,this.reallyFinalEmit=e||0==this.peepOps,this.iterLines(),this.stats+=d("; peep hole pass: {0} instructions removed and {1} updated\n",this.peepDel,this.peepOps-this.peepDel))},e.prototype.getLabels=function(){var n=this;return this.userLabelsCache||(this.userLabelsCache=m.U.mapMap(this.labels,function(e,t){return t+n.baseOffset})),this.userLabelsCache},e.prototype.emit=function(e){if(m.assert(null==this.buf),this.prepLines(e),!(0<this.errors.length||(this.clearLabels(),this.iterLines(),this.checkStack&&0!=this.stack&&this.directiveError(d("stack misaligned at the end of the file")),0<this.errors.length||(this.ei.expandLdlit(this),this.ei.commonalize(this),this.clearLabels(),this.iterLines(),this.finalEmit=!0,this.reallyFinalEmit=this.disablePeepHole,this.iterLines(),0<this.errors.length))))for(var t=0;t<5&&(pxt.debug("Peephole OPT, pass "+t),this.peepPass(5==t),0!=this.peepOps);++t);},e}(),e=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.location=function(){return this.buf.length},e.prototype.emitShort=function(e){m.assert(0<=e&&e<=65535),this.buf.push(255&e),this.buf.push(e>>8)},e.prototype.emitOpCode=function(e){m.assert(0<=e&&e<=255),this.buf.push(e)},e}(p.File=s);p.VMFile=e;var t=function(){function e(){var i=this;this.file=null,this.addEnc=function(e,t,n){var o={name:e,pretty:t,encode:n,isRegister:/^\$r\d/.test(e),isImmediate:/^\$i\d/.test(e),isRegList:/^\$rl\d/.test(e),isLabel:/^\$l[a-z]/.test(e)};return i.encoders[e]=o},this.inrange=function(e,t,n){return Math.floor(t)!=t?null:t<0?null:e<t?null:n},this.inminmax=function(e,t,n,o){return Math.floor(n)!=n?null:n<e?null:t<n?null:o},this.inseq=function(e,t){var n=e.indexOf(t);return n<0?null:n},this.inrangeSigned=function(e,t,n){return Math.floor(t)!=t?null:t<-(e+1)?null:e<t?null:n&(e<<1|1)},this.addInst=function(e,t,n,o){var r=new a(i,e,t,n,o);return i.instructions.hasOwnProperty(r.name)||(i.instructions[r.name]=[]),i.instructions[r.name].push(r),r},this.encoders={},this.instructions={}}return e.prototype.toFnPtr=function(e,t){return e},e.prototype.wordSize=function(){return-1},e.prototype.computeStackOffset=function(e,t){return t},e.prototype.is32bit=function(e){return!1},e.prototype.emit32=function(e,t,n){return null},e.prototype.postProcessRelAddress=function(e,t){return t},e.prototype.postProcessAbsAddress=function(e,t){return t},e.prototype.peephole=function(e,t,n){},e.prototype.registerNo=function(e){return null},e.prototype.getAddressFromLabel=function(e,t,n,o){return void 0===o&&(o=!1),null},e.prototype.isPop=function(e){return!1},e.prototype.isPush=function(e){return!1},e.prototype.isAddSP=function(e){return!1},e.prototype.isSubSP=function(e){return!1},e.prototype.testAssembler=function(){m.assert(!1)},e.prototype.commonalize=function(e){},e.prototype.expandLdlit=function(e){},e}();function u(e){var t=[],n="";e:for(var o=0;o<e.length;++o)switch(e[o]){case"[":case"]":case"!":case"{":case"}":case",":n&&(t.push(n),n=""),t.push(e[o]);break;case" ":case"\t":case"\r":case"\n":n&&(t.push(n),n="");break;case";":break e;default:n+=e[o]}return n&&(t.push(n),n=""),t[0]?t:null}function h(e,t){return{stack:null,opcode:null,error:e,errorAt:t}}function l(e){return e<0||65535<e?("0x"+e.toString(16)).toLowerCase():("0x"+("000"+e.toString(16)).slice(-4)).toLowerCase()}p.AbstractProcessor=t,p.emitErr=h,p.expectError=function(e,t){var n=new s(e);n.emit(t),0==n.errors.length&&m.oops("ASMTEST: expecting error for: "+t)},p.tohex=l,p.expect=function(e,t){var n=[],o=t.replace(/^([0-9a-fA-F]{4,8})\s/gm,function(e,t){return n.push(parseInt(t.slice(0,4),16)),8==t.length&&n.push(parseInt(t.slice(4,8),16)),""}),r=new s(e);r.throwOnError=!0,r.disablePeepHole=!0,r.emit(o),0<r.errors.length&&(console.debug(r.errors[0].message),m.oops("ASMTEST: not expecting errors")),r.buf.length!=n.length&&m.oops("ASMTEST: wrong buf len");for(var i=0;i<n.length;++i)r.buf[i]!=n[i]&&m.oops("ASMTEST: wrong buf content at "+i+" , exp:"+l(n[i])+", got: "+l(r.buf[i]))}})((m=e.pxtc||(e.pxtc={})).assembler||(m.assembler={}))}(ts||(ts={})),function(p){!function(l){var c=pxtc.Util;l.apiRoot="https://makecode.com/api/",l.accessToken="";var n=!(l.localToken="");function o(e){var t=new Error(c.lf("Cannot access {0} while offline",e));return t.isOffline=!0,Promise.delay(1e3).then(function(){return Promise.reject(t)})}function u(e,t){return p.U.requestAsync({url:"/api/"+e,headers:{Authorization:l.localToken},method:t?"POST":"GET",data:t||void 0,allowHttpErrors:!0})}function r(t){return t.url=p.webConfig&&p.webConfig.isStatic&&!t.forceLiveEndpoint?p.webConfig.relprefix+t.url:l.apiRoot+t.url,t.allowGzipPost=!0,l.isOnline()?(l.accessToken&&(t.headers||(t.headers={}),t.headers["x-td-access-token"]=l.accessToken),c.requestAsync(t).catch(function(e){return 0==e.statusCode?(n&&(n=!1,l.onOffline()),o(t.url)):Promise.reject(e)})):o(t.url)}function g(e){return r({url:e}).then(function(e){return e.text})}function e(){return navigator&&navigator.onLine}l.onOffline=function(){},l.hasAccessToken=function(){return!!l.accessToken},l.isLocalHost=function(){try{return/^http:\/\/(localhost|127\.0\.0\.1):\d+\//.test(window.location.href)&&!/nolocalhost=1/.test(window.location.href)&&!(p.webConfig&&p.webConfig.isStatic)}catch(e){return!1}},l.localRequestAsync=u,l.privateRequestAsync=r,l.privateGetTextAsync=g,l.privateGetAsync=function(e,t){return void 0===t&&(t=!1),r({url:e,forceLiveEndpoint:t}).then(function(e){return e.json})},l.downloadTargetConfigAsync=function(){if(!l.isOnline())return Promise.resolve(void 0);var e=p.appTarget.versions&&p.appTarget.versions.target,t=p.webConfig&&p.webConfig.isStatic?"targetconfig.json":"config/"+p.appTarget.id+"/targetconfig"+(e?"/v"+e:"");return l.isLocalHost()?u(t).then(function(e){return e?e.json:void 0}):l.privateGetAsync(t)},l.downloadScriptFilesAsync=function(e){return r({url:e+"/text",forceLiveEndpoint:!0}).then(function(e){return JSON.parse(e.text)})},l.downloadMarkdownAsync=function(e,t,n){var o,r=p.webConfig&&p.webConfig.isStatic,i=p.appTarget.versions&&p.appTarget.versions.target||"?";if(r){var a=/\/docs\//.test(o=e),s=/\.\w+$/.test(o);a||(o="docs/"+o),s||(o+=".md")}else o="md/"+p.appTarget.id+"/"+e.replace(/^\//,"")+"?targetVersion="+encodeURIComponent(i);return r||"en"==t||(o+="&lang="+encodeURIComponent(c.userLanguage()),n&&(o+="&live=1")),l.isLocalHost()&&!n?u(o).then(function(e){return 404==e.statusCode?g(o):e.text}):g(o)},l.privateDeleteAsync=function(e){return r({url:e,method:"DELETE"}).then(function(e){return e.json})},l.privatePostAsync=function(e,t,n){return void 0===n&&(n=!1),r({url:e,data:t||{},forceLiveEndpoint:n}).then(function(e){return e.json})},l.isLoggedIn=function(){return!!l.accessToken},l.isNavigatorOnline=e,l.isOnline=function(){return"undefined"!=typeof navigator&&e()&&(n=!0),n},l.getServiceUrl=function(){return l.apiRoot.replace(/\/api\/$/,"")},l.getUserId=function(){var e=/^0(\w+)\./.exec(l.accessToken);return e?e[1]:null},l.parseScriptId=function(e){var t=p.appTarget;if(e&&t.appTheme&&t.cloud&&t.cloud.sharing){var n=["makecode.com"];t.appTheme.embedUrl&&n.push(t.appTheme.embedUrl),t.appTheme.shareUrl&&n.push(t.appTheme.shareUrl);var o="^((https://)?(?:"+(n=c.unique(n,function(e){return e}).map(function(e){return c.escapeForRegex(c.stripUrlProtocol(e).replace(/\/$/,"")).toLowerCase()})).join("|")+")/)?(api/oembed?url=.*%2F([^&]*)&.*?|([a-z0-9-_]+))$",r=new RegExp(o,"i").exec(e.trim());return r&&(!r[1]||0<=n.indexOf(c.escapeForRegex(r[1].replace(/https:\/\//,"").replace(/\/$/,"")).toLowerCase()))&&(r[3]||r[4])?r[3]?r[3]:r[4]:null}}}(p.Cloud||(p.Cloud={}))}(pxt||(pxt={}));var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),pxt,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,ts,pxt,ts,ts,ts,ts,ts;!function(T){T.simshim=function(e,t){for(var n,f=ts.SyntaxKind,h=e.getTypeChecker(),m=T.cpp.nsWriter("declare namespace"),y="",o=0,r=e.getSourceFiles();o<r.length;o++){var i=r[o];if(t){var a=t(i.fileName);if(T.debug("SimShim[1]: "+a.dir),!T.U.endsWith(a.dir,"/sim")&&!T.U.startsWith(i.fileName,"sim/"))continue}else if(!T.U.startsWith(i.fileName,"sim/"))continue;T.debug("SimShim[2]: "+i.fileName);for(var s=0,l=i.statements;s<l.length;s++){var c=l[s],u=c;c.kind==f.ModuleDeclaration&&"pxsim"==u.name.text&&_((n=u).body)}}var g={};return g[T.appTarget.corepkg]=m.finish(),g;function v(e){var t;return ts.isExpression(e)&&(t=h.getContextualType(e)),t||(t=h.getTypeAtLocation(e)),t}function b(e){var t=h.typeToString(e,n,ts.TypeFormatFlags.UseFullyQualifiedType);switch(t=t.replace(/^pxsim\./,"")){case"RefAction":return"() => void";case"RefBuffer":return"Buffer";default:return t}}function p(n){var e=k(n);if(e){m.setNs(y),m.write(e);var t=y;y&&(y+="."),y+=n.name.text;var o=t?"":"declare",r="";if(n.heritageClauses)for(var i=0,a=n.heritageClauses;i<a.length;i++){var s=a[i];s.token==f.ExtendsKeyword&&(r=" extends "+b(v(s.types[0])))}m.write(o+" class "+n.name.text+r+" {"),m.incrIndent();for(var l=function(t){switch(t.kind){case f.MethodDeclaration:d(t);break;case f.PropertyDeclaration:!function(e){var t=k(e);if(t){var n=e.name.getText(),o="//% shim=."+n,r=h.getTypeAtLocation(e);m.write(t),m.write(o),m.write("public "+n+": "+b(r)+";"),m.write("")}}(t);break;case f.Constructor:!function(e){var t=k(e);if(t){h.getTypeAtLocation(e);var n=e.parameters.map(function(e){return e.name.getText()+": "+b(v(e))});m.write(t),m.write('//% shim="new '+y+'"'),m.write("constructor("+n.join(", ")+");"),m.write("")}}(t);break;case f.GetAccessor:var e=n.members.some(function(e){return e.kind==f.SetAccessor&&e.name.getText()==t.name.getText()});d(t,e)}},c=0,u=n.members;c<u.length;c++)l(u[c]);y=t,m.decrIndent(),m.write("}")}}function k(e){var t=pxtc.getComments(e);return/^\s*\/\/%/m.test(t)?t:null}function d(e,t){void 0===t&&(t=!1);var n=k(e);if(n){var o,r=e.name.getText(),i=e.kind==f.MethodDeclaration||e.kind==f.GetAccessor||e.kind==f.SetAccessor,a="//% shim="+(i?"."+r:y+"::"+r),s=h.getSignatureFromDeclaration(e),l=h.getReturnTypeOfSignature(s),c=/Async$/.test(r),u=(o=l,pxtc.isObjectType(o)&&o.objectFlags&ts.ObjectFlags.Reference&&"Promise"==o.symbol.name?o.typeArguments[0]:null);u?(a+=" promise",l=u,c||T.U.userError(y+"::"+r+" should be called "+r+"Async")):c&&T.U.userError(y+"::"+r+" doesn't return a promise"),T.debug("emitFun: "+r);var g=e.parameters.map(function(e){return e.name.getText()+(e.questionToken?"?":"")+": "+b(v(e))}),p=r.replace(/Async$/,""),d=i?"public":"function",_="("+g.join(", ")+")";e.kind==f.GetAccessor&&(d=t?"public":"readonly",_="",a+=" property"),i||m.setNs(y),m.write(n),m.write(a),m.write(d+" "+p+_+": "+b(l)+";"),m.write("")}}function _(e){switch(e.kind){case f.ModuleDeclaration:return(n=y)&&(y+="."),y+=(t=e).name.text,_(t.body),void(y=n);case f.ModuleBlock:return e.statements.forEach(_);case f.FunctionDeclaration:return d(e);case f.ClassDeclaration:return p(e)}var t,n}}}(pxt||(pxt={})),function(e){var r,t,n;r=e.pxtc||(e.pxtc={}),t=r.avr||(r.avr={}),n=function(e){function t(){var n=e.call(this)||this;return n.addEnc("$r0","R0-31",function(e){return n.inrange(31,e,e<<4)}),n.addEnc("$r1","R0-31",function(e){return n.inrange(31,e,15&e|(16&e)<<5)}),n.addEnc("$r2","R0-4",function(e){var t=n.inseq([24,26,28,30],e);return null==t?null:t<<4}),n.addEnc("$r3","R0-16-31",function(e){return n.inminmax(16,31,e,e-16<<4)}),n.addEnc("$r4","R0-7",function(e){return n.inrange(7,e,e<<4)}),n.addEnc("$r6","R0-31",function(e){return n.inrange(31,e,e<<4|15&e|(16&e)<<5)}),n.addEnc("$r7","R0-31",function(e){return n.inrange(31,e,e<<3)}),n.addEnc("$r8","Reven",function(e){return 1&e?null:e>>1<<4}),n.addEnc("$r9","Reven",function(e){return 1&e?null:e>>1}),n.addEnc("$r10","R0-16-23",function(e){return n.inminmax(16,23,e,e-16<<4)}),n.addEnc("$r11","R0-16-23",function(e){return n.inminmax(16,23,e,e-16)}),n.addEnc("$r12","R0-16-31",function(e){return n.inminmax(16,31,e,e-16)}),n.addEnc("$i0","#0-63",function(e){return n.inrange(63,e,15&e|(48&e)<<2)}),n.addEnc("$i1","#0-255",function(e){return n.inrange(255,e,15&e|(240&e)<<4)}),n.addEnc("$i2","#0-127",function(e){return n.inrange(127,e,e<<3)}),n.addEnc("$i3","#0-255",function(e){return n.inrange(255,e,15&~e|(240&~e)<<4)}),n.addEnc("$i4","#0-15",function(e){return n.inrange(15,e,e<<4)}),n.addEnc("$i5","#0-63",function(e){return n.inrange(63,e,15&e|(48&e)<<5)}),n.addEnc("$i6","#0-127",function(e){return n.inrange(127,e,15&e|(112&e)<<4)}),n.addEnc("$i7","#0-4095",function(e){return n.inrange(4095,e,e)}),n.addEnc("$i8","#0-63",function(e){return n.inrange(63,e,7&e|(24&e)<<7)|(32&e)<<7}),n.addEnc("$i9","#0-7",function(e){return n.inrange(7,e,e)}),n.addEnc("$la","LABEL",function(e){return n.inrange(65535,e,e)}),n.addEnc("$lb","LABEL",function(e){return n.inrangeSigned(127,e>>1,e>>1)<<3}),n.addEnc("$lc","LABEL",function(e){return n.inrange(65535,e>>1,e>>1)}),n.addEnc("$ld","LABEL",function(e){return n.inrangeSigned(2047,e>>1,e>>1)}),n.addInst("adc   $r0, $r1",7168,64512),n.addInst("add   $r0, $r1",3072,64512),n.addInst("adiw  $r2, $i0",38400,65280),n.addInst("and   $r0, $r1",8192,64512),n.addInst("andi  $r3, $i1",28672,61440),n.addInst("asr   $r0",37893,65039),n.addInst("bclr  $r4",38024,65423),n.addInst("bld   $r0, $i9",63488,65032),n.addInst("brbc  $i9, $lb",62464,64512),n.addInst("brbs  $i9, $lb",61440,64512),n.addInst("brcc  $lb",62464,64519),n.addInst("brcs  $lb",61440,64519),n.addInst("break",38296,65535),n.addInst("breq  $lb",61441,64519),n.addInst("brge  $lb",62468,64519),n.addInst("brhc  $lb",62469,64519),n.addInst("brhs  $lb",61445,64519),n.addInst("brid  $lb",62471,64519),n.addInst("brie  $lb",61447,64519),n.addInst("brlo  $lb",61440,64519),n.addInst("brlt  $lb",61444,64519),n.addInst("brmi  $lb",61442,64519),n.addInst("brne  $lb",62465,64519),n.addInst("brpl  $lb",62466,64519),n.addInst("brsh  $lb",62464,64519),n.addInst("brtc  $lb",62470,64519),n.addInst("brts  $lb",61446,64519),n.addInst("brvc  $lb",62467,64519),n.addInst("brvs  $lb",61443,64519),n.addInst("bset  $r4",37896,65423),n.addInst("bst   $r0, $i9",64e3,65032),n.addInst("call  $lc",37902,65535,!0),n.addInst("cbi   $r7, $i9",38912,65280),n.addInst("cbr   $r3, $i3",28672,61440),n.addInst("clc",38024,65535),n.addInst("clh",38104,65535),n.addInst("cli",38136,65535),n.addInst("cln",38056,65535),n.addInst("clr $r6",9216,64512),n.addInst("cls",38088,65535),n.addInst("clt",38120,65535),n.addInst("clv",38072,65535),n.addInst("clz",38040,65535),n.addInst("com   $r0",37888,65039),n.addInst("cp    $r0, $r1",5120,64512),n.addInst("cpc   $r0, $r1",1024,64512),n.addInst("cpi   $r3, $i1",12288,61440),n.addInst("cpse  $r0, $r1",4096,64512),n.addInst("dec   $r0",37898,65039),n.addInst("des   $i4",37899,65295),n.addInst("eicall",38169,65535),n.addInst("eijmp",37913,65535),n.addInst("elpm",38360,65535),n.addInst("elpm  $r0, Z0",36870,65039),n.addInst("elpm  $r0, Z+0",36871,65039),n.addInst("eor   $r0, $r1",9216,64512),n.addInst("fmul   $r10, $r11",776,65416),n.addInst("fmuls  $r10, $r11",896,65416),n.addInst("fmulsu $r10, $r11",904,65416),n.addInst("icall",38153,65535),n.addInst("ijmp",37897,65535),n.addInst("in    $r0, $i5",45056,63488),n.addInst("inc   $r0",37891,65039),n.addInst("jmp  $lc",37900,65535,!0),n.addInst("lac   Z, $r0",37382,65039),n.addInst("las   Z, $r0",37381,65039),n.addInst("lat   Z, $r0",37383,65039),n.addInst("ld    $r0, X",36876,65039),n.addInst("ld    $r0, X+",36877,65039),n.addInst("ld    $r0, -X",36878,65039),n.addInst("ld    $r0, Y",32776,65039),n.addInst("ld    $r0, Y+",36873,65039),n.addInst("ld    $r0, -Y",36874,65039),n.addInst("ldd   $r0, Y, $i8",32776,53768),n.addInst("ld    $r0, Z",32768,65039),n.addInst("ld    $r0, Z+",36865,65039),n.addInst("ld    $r0, -Z",36866,65039),n.addInst("ldd   $r0, Z, $i8",32768,53768),n.addInst("ldi   $r3, $i1",57344,61440),n.addInst("lds   $r0, $la",36864,65039,!0),n.addInst("lds   $r3, $i6",40960,63488),n.addInst("lpm",38312,65535),n.addInst("lpm   $r0, Z",36868,65039),n.addInst("lpm   $r0, Z+",36869,65039),n.addInst("lsl   $r6",3072,64512),n.addInst("lsr   $r0",37894,65039),n.addInst("mov   $r0, $r1",11264,64512),n.addInst("movw  $r8, $r9",256,65280),n.addInst("mul   $r0, $r1",39936,64512),n.addInst("muls  $r3, $r12",512,65280),n.addInst("mulsu $r10, $r11",768,65416),n.addInst("neg $r0",37889,65039),n.addInst("nop",0,65535),n.addInst("or    $r0, $r1",10240,64512),n.addInst("ori   $r3, $i1",24576,61440),n.addInst("out   $i5, $r0",47104,63488),n.addInst("pop $r0",36879,65039),n.addInst("push $r0",37391,65039),n.addInst("rcall $ld",53248,61440),n.addInst("ret",38152,65535),n.addInst("reti",38168,65535),n.addInst("rjmp $ld",49152,61440),n.addInst("rol $r6",7168,64512),n.addInst("ror $r0",37895,65039),n.addInst("sbc   $r0, $r1",2048,64512),n.addInst("sbci  $r3, $i1",16384,61440),n.addInst("sbi   $r7, $i9",39424,65280),n.addInst("sbic  $r7, $i9",39168,65280),n.addInst("sbis  $r7, $i9",39680,65280),n.addInst("sbiw  $r2, $i0",38656,65280),n.addInst("sbr   $r3, $i1",24576,61440),n.addInst("sbrc  $r0, $i9",64512,65032),n.addInst("sbrs  $r0, $i9",65024,65032),n.addInst("sec",37896,65535),n.addInst("seh",37976,65535),n.addInst("sei",38008,65535),n.addInst("sen",37928,65535),n.addInst("sec",37896,65535),n.addInst("ser $r3",61199,65295),n.addInst("ses",37960,65535),n.addInst("set",37992,65535),n.addInst("sev",37944,65535),n.addInst("sez",37912,65535),n.addInst("sleep",38280,65535),n.addInst("spm",38376,65535),n.addInst("st    X, $r0",37388,65039),n.addInst("st    X+, $r0",37389,65039),n.addInst("st    -X, $r0",37390,65039),n.addInst("st    Y, $r0",33288,65039),n.addInst("st    Y+, $r0",37385,65039),n.addInst("st    -Y, $r0",37386,65039),n.addInst("std   Y, $i8, $r0",33288,53768),n.addInst("st    Z, $r0",33280,65039),n.addInst("st    Z+, $r0",37377,65039),n.addInst("st    -Z, $r0",37378,65039),n.addInst("std   Z, $i8, $r0",33280,53768),n.addInst("sts   $la, $r0",37376,65039,!0),n.addInst("sts   $i6, $r3",43008,63488),n.addInst("sub   $r0, $r1",6144,64512),n.addInst("subi  $r3, $i1",20480,61440),n.addInst("swap  $r0",37890,65039),n.addInst("tst   $r6",8192,64512),n.addInst("wdr",38312,65535),n.addInst("xch   Z, $r0",37380,65039),n}return __extends(t,e),t.prototype.wordSize=function(){return 2},t.prototype.computeStackOffset=function(e,t){return"args"==e?t+2:t+1},t.prototype.is32bit=function(e){return e.is32bit},t.prototype.emit32=function(e,t,n){var o=t>>1;return r.assert(null!=o,"off null"),(0|o)==o&&-65536<=o&&o<=65536?{opcode:e,opcode2:65535&o,stack:0,numArgs:[t],labelName:n}:r.assembler.emitErr("jump out of range",n)},t.prototype.registerNo=function(e){if(!e)return null;e=e.toLowerCase();var t=/^r(\d+)$/.exec(e);if(t){var n=parseInt(t[1],10);if(0<=n&&n<32)return n}return null},t.prototype.postProcessRelAddress=function(e,t){return t+e.baseOffset},t.prototype.postProcessAbsAddress=function(e,t){return t<<1},t.prototype.getAddressFromLabel=function(e,t,n,o){void 0===o&&(o=!1);var r=e.lookupLabel(n);return null==r?null:t.is32bit?r:r-(e.pc()+2)},t.prototype.peephole=function(e,t,n){},t.prototype.toFnPtr=function(e,t){return e>>1},t.prototype.testAssembler=function(){r.assembler.expect(this,"2411       eor\tr1, r1 \nbe1f       out\t0x3f, r1 \nefcf       ldi\tr28, 0xFF \ne0da       ldi\tr29, 0x0A \nbfde       out\t0x3e, r29 \nbfcd      \tout\t0x3d, r28 \n"),r.assembler.expect(this,"0c00      lsl     r0\n920f      push    r0\ne604      ldi     r16, #100        ; 0x64\n903f      pop     r3\n"),r.assembler.expect(this,"1412      cp      r1, r2\nf409      brne    l6\nc001      rjmp    l8\n0e01  l6: add     r0, r17\n0000  l8: nop     \n")},t}(r.assembler.AbstractProcessor),t.AVRProcessor=n}(ts||(ts={})),function(m){!function(k){function n(e){for(var t='"',n=0;n<e.length;++n){var o=255&e.charCodeAt(n),r=String.fromCharCode(o);t+="\\"==r||'"'==r?"\\"+r:"\n"==r?"\\n":o<=15?"\\x0"+o.toString(16):o<32||127<o?"\\x"+o.toString(16):r}return t+'"'}k.asmStringLiteral=n;var e=function(){function e(){}return e.prototype.hasCommonalize=function(){return!1},e.prototype.nop=function(){return"TBD(nop)"},e.prototype.reg_gets_imm=function(e,t){return"TBD(reg_gets_imm)"},e.prototype.proc_setup=function(e,t){return"TBD(proc_setup)"},e.prototype.push_fixed=function(e){return"TBD(push_fixed)"},e.prototype.push_local=function(e){return"TBD(push_local)"},e.prototype.push_locals=function(e){return"TBD(push_locals)"},e.prototype.pop_fixed=function(e){return"TBD(pop_fixed)"},e.prototype.pop_locals=function(e){return"TBD(pop_locals)"},e.prototype.proc_return=function(){return"TBD(proc_return)"},e.prototype.debugger_stmt=function(e){return""},e.prototype.debugger_bkpt=function(e){return""},e.prototype.debugger_proc=function(e){return""},e.prototype.unconditional_branch=function(e){return"TBD(unconditional_branch)"},e.prototype.beq=function(e){return"TBD(beq)"},e.prototype.bne=function(e){return"TBD(bne)"},e.prototype.cmp=function(e,t){return"TBD(cmp)"},e.prototype.cmp_zero=function(e){return"TBD(cmp_zero)"},e.prototype.arithmetic=function(){return""},e.prototype.load_reg_src_off=function(e,t,n,o,r,i){return"TBD(load_reg_src_off)"},e.prototype.rt_call=function(e,t,n){return"TBD(rt_call)"},e.prototype.call_lbl=function(e){return"TBD(call_lbl)"},e.prototype.call_reg=function(e){return"TBD(call_reg)"},e.prototype.vcall=function(e,t,n){return"TBD(vcall)"},e.prototype.prologue_vtable=function(e,t){return"TBD(prologue_vtable"},e.prototype.helper_prologue=function(){return"TBD(lambda_prologue)"},e.prototype.helper_epilogue=function(){return"TBD(lambda_epilogue)"},e.prototype.load_ptr=function(e,t){return"TBD(load_ptr)"},e.prototype.load_ptr_full=function(e,t){return"TBD(load_ptr_full)"},e.prototype.emit_int=function(e,t){return"TBD(emit_int)"},e.prototype.string_literal=function(e,t){return"\n.balign 4\n"+e+"meta: .short 0xffff, "+(k.target.taggedInts?pxt.REF_TAG_STRING+",":"")+" "+t.length+"\n"+e+": .string "+n(t)+"\n"},e.prototype.hex_literal=function(e,t){return"\n.balign 4\n"+e+": .short 0xffff, "+(k.target.taggedInts?pxt.REF_TAG_BUFFER+",":"")+" "+(t.length>>1)+(k.target.taggedInts?", 0x0000":"")+"\n        .hex "+t+(t.length%4==0?"":"00")+"\n"},e.prototype.method_call=function(e,t){return""},e}();k.AssemblerSnippets=e,k.numBytes=function(e){for(var t=0,n=e;0<n;n>>>=8)t++;return t||1};var t=function(){function e(e,t,n){var o=this;this.resText="",this.exprStack=[],this.calls=[],this.proc=null,this.baseStackSize=0,this.write=function(e){o.resText+=k.asmline(e)},this.t=e,this.bin=t,this.proc=n,this.work()}return e.prototype.stackSize=function(){return this.baseStackSize+this.exprStack.length},e.prototype.stackAlignmentNeeded=function(e){if(void 0===e&&(e=0),!k.target.stackAlign)return 0;var t=k.target.stackAlign-(this.stackSize()+e&k.target.stackAlign-1);return t==k.target.stackAlign?0:t},e.prototype.alignStack=function(e){void 0===e&&(e=0);var t=this.stackAlignmentNeeded(e);return t?(this.write(this.t.push_locals(t)),this.t.pop_locals(t)):""},e.prototype.getAssembly=function(){return this.resText},e.prototype.work=function(){var l=this,e=this.proc.getName();if(k.assembler.debug&&this.proc.action){var t=m.pxtc.nodeLocationInfo(this.proc.action);e+=" "+t.fileName+":"+(t.line+1)}this.write("\n;\n; Function "+e+"\n;\n"),this.proc.args.length<=3&&this.emitLambdaWrapper(this.proc.isRoot);var n=this.proc.label(),c=n+"_bkpt",u=n+"_locals",g=n+"_end";this.write(".section code"),this.write("\n"+n+":\n    @stackmark func\n    @stackmark args\n"),this.proc.fillDebugInfo=function(e){var t=e.getLabels();l.proc.debugInfo={locals:(1==l.proc.seqNo?l.bin.globals:l.proc.locals).map(function(e){return e.getDebugInfo()}),args:l.proc.args.map(function(e){return e.getDebugInfo()}),name:l.proc.getName(),codeStartLoc:k.U.lookup(t,u),codeEndLoc:k.U.lookup(t,g),bkptLoc:k.U.lookup(t,c),localsMark:k.U.lookup(e.stackAtLabel,u),idx:l.proc.seqNo,calls:l.calls};for(var n=0,o=l.calls;n<o.length;n++){var r=o[n];r.addr=k.U.lookup(t,r.callLabel),r.stack=k.U.lookup(e.stackAtLabel,r.callLabel),r.callLabel=void 0}for(var i=0;i<l.proc.body.length;++i){var a=l.proc.body[i].breakpointInfo;if(a){var s=k.U.lookup(e.stackAtLabel,"__brkp_"+a.id);s!==l.proc.debugInfo.localsMark&&(console.log(a),console.log(e.stackAtLabel),k.U.oops("offset doesn't match: "+s+" != "+l.proc.debugInfo.localsMark))}}},this.bin.options.breakpoints&&this.write(this.t.debugger_proc(c)),this.baseStackSize=1;var o=this.proc.locals.length;this.write(this.t.proc_setup(o)),this.baseStackSize+=o,this.write("@stackmark locals"),this.write(u+":"),this.proc.resolve();for(var r=0;r<this.proc.body.length;++r){var i=this.proc.body[r];switch(i.stmtKind){case k.ir.SK.Expr:this.emitExpr(i.expr);break;case k.ir.SK.StackEmpty:if(0<this.exprStack.length){for(var a=0,s=this.proc.body.slice(r-4,r+1);a<s.length;a++){var p=s[a];console.log("PREVSTMT "+p.toString().trim())}for(var d=0,_=this.exprStack;d<_.length;d++){var f=_[d];console.log("EXPRSTACK "+f.currUses+"/"+f.totalUses+" E: "+f.toString())}k.oops("stack should be empty")}this.write("@stackempty locals");break;case k.ir.SK.Jmp:this.emitJmp(i);break;case k.ir.SK.Label:this.write(i.lblName+":");break;case k.ir.SK.Breakpoint:if(this.bin.options.breakpoints){var h="__brkp_"+i.breakpointInfo.id;i.breakpointInfo.isDebuggerStmt?this.write(this.t.debugger_stmt(h)):this.write(this.t.debugger_bkpt(h))}break;default:k.oops()}}k.assert(0<=o&&o<127),0<o&&this.write(this.t.pop_locals(o)),this.write(g+":"),this.write(this.t.proc_return()),this.write("@stackempty func"),this.write("@stackempty args")},e.prototype.mkLbl=function(e){var t=e+this.bin.lblNo++;return"_"!=t[0]&&(t="."+t),t},e.prototype.terminate=function(e){k.assert(e.exprKind==k.ir.EK.SharedRef);var t=e.args[0];if(t.currUses!=t.totalUses){for(var n=0;n<this.exprStack.length;){var o=this.exprStack[n];if(o!=t&&o.currUses!=o.totalUses)break;n++}k.assert(0<n),this.write("@dummystack "+n),this.write(this.t.pop_locals(n))}},e.prototype.emitJmp=function(e){if(e.jmpMode==k.ir.JmpMode.Always)e.expr&&this.emitExpr(e.expr),e.terminateExpr&&this.terminate(e.terminateExpr),this.write(this.t.unconditional_branch(e.lblName)+" ; with expression");else{var t=this.mkLbl("jmpz");e.jmpMode==k.ir.JmpMode.IfJmpValEq?(this.emitExprInto(e.expr,"r1"),this.write(this.t.cmp("r0","r1"))):(this.emitExpr(e.expr),(e.expr.exprKind!=k.ir.EK.RuntimeCall||"thumb::subs"!==e.expr.data&&!k.U.startsWith(e.expr.data,"_cmp_"))&&this.write(this.t.cmp_zero("r0"))),e.jmpMode==k.ir.JmpMode.IfNotZero?this.write(this.t.beq(t)):this.write(this.t.bne(t)),e.terminateExpr&&this.terminate(e.terminateExpr),this.write(this.t.unconditional_branch(e.lblName)),this.write(t+":")}},e.prototype.clearStack=function(){for(var e=0;0<this.exprStack.length&&this.exprStack[0].currUses==this.exprStack[0].totalUses;)e++,this.exprStack.shift();e&&this.write(this.t.pop_locals(e))},e.prototype.withRef=function(e,t){return e+(t?"Ref":"")},e.prototype.emitExprInto=function(e,t){switch(e.exprKind){case k.ir.EK.NumberLiteral:!0===e.data?this.write(this.t.emit_int(1,t)):!1===e.data?this.write(this.t.emit_int(0,t)):null===e.data?this.write(this.t.emit_int(0,t)):"number"==typeof e.data?this.write(this.t.emit_int(e.data,t)):k.oops();break;case k.ir.EK.PointerLiteral:e.args?this.write(this.t.load_ptr_full(e.data,t)):this.write(this.t.load_ptr(e.data,t));break;case k.ir.EK.SharedRef:var n=e.args[0];k.U.assert(!!n.currUses),k.U.assert(n.currUses<n.totalUses),n.currUses++;var o=this.exprStack.indexOf(n);if(k.U.assert(0<=o),0==o&&n.totalUses==n.currUses)this.write(this.t.pop_fixed([t])+" ; tmpref @"+this.exprStack.length),this.exprStack.shift(),this.clearStack();else{var r=o.toString()+":"+this.exprStack.length;this.write(this.t.load_reg_src_off(t,"sp",r,!0)+" ; tmpref @"+(this.exprStack.length-o))}break;case k.ir.EK.CellRef:var i=e.data;if(i.isGlobal()){var a=this.bitSizeInfo(i.bitSize),s="#"+i.index;(a.needsSignExt||i.index>=a.immLimit)&&(this.write(this.t.emit_int(i.index,t)),s=t),this.write(this.t.load_reg_src_off(t,"r6",s,!1,!1,a))}else{var l=this.cellref(i),c=l[0],u=l[1],g=l[2];this.write(this.t.load_reg_src_off(t,c,u,g))}break;default:k.oops()}},e.prototype.bitSizeInfo=function(e){var t={size:k.sizeOfBitSize(e),immLimit:128};return 1==t.size?t.immLimit=32:2==t.size&&(t.immLimit=64),1!=e&&3!=e||(t.needsSignExt=!0),t},e.prototype.emitExpr=function(e){var t=this;switch(e.exprKind){case k.ir.EK.JmpValue:this.write("; jmp value (already in r0)");break;case k.ir.EK.Nop:this.write(this.t.nop());break;case k.ir.EK.Incr:this.emitExpr(e.args[0]),this.emitCallRaw("pxt::incr");break;case k.ir.EK.Decr:this.emitExpr(e.args[0]),this.emitCallRaw("pxt::decr");break;case k.ir.EK.FieldAccess:var n=e.data;return this.emitExpr(k.ir.rtcall(this.withRef("pxtrt::ldfld",n.isRef),[e.args[0],k.ir.numlit(n.idx)]));case k.ir.EK.Store:return this.emitStore(e.args[0],e.args[1]);case k.ir.EK.RuntimeCall:return this.emitRtCall(e);case k.ir.EK.ProcCall:return this.emitProcCall(e);case k.ir.EK.SharedDef:return this.emitSharedDef(e);case k.ir.EK.Sequence:return e.args.forEach(function(e){return t.emitExpr(e)}),this.clearStack();default:return this.emitExprInto(e,"r0")}},e.prototype.emitSharedDef=function(e){var t=e.args[0];if(k.U.assert(1<=t.totalUses),k.U.assert(0===t.currUses),(t.currUses=1)==t.totalUses)return this.emitExpr(t);this.emitExpr(t),this.exprStack.unshift(t),this.write(this.t.push_local("r0")+"; tmpstore @"+this.exprStack.length)},e.prototype.emitSharedTerminate=function(e){this.emitExpr(e);e.data},e.prototype.emitRtCall=function(e){var n=this,t=k.ir.flattenArgs(e);t.precomp.forEach(function(e){return n.emitExpr(e)}),t.flattened.forEach(function(e,t){k.U.assert(t<=3),n.emitExprInto(e,"r"+t)}),this.clearStack();var o=e.data;"langsupp::ignore"!=o&&(k.U.startsWith(o,"thumb::")?this.write(this.t.rt_call(o.slice(7),"r0","r1")):this.alignedCall(o))},e.prototype.alignedCall=function(e,t){void 0===t&&(t="");var n=this.alignStack();this.write(this.t.call_lbl(e)+t),this.write(n)},e.prototype.emitHelper=function(e){if(!this.bin.codeHelpers[e]){var t=Object.keys(this.bin.codeHelpers).length;this.bin.codeHelpers[e]="_hlp_"+t}this.write(this.t.call_lbl(this.bin.codeHelpers[e]))},e.prototype.emitProcCall=function(e){var n=this,o=0,r=!1,t=e.args.map(function(e,t){return n.emitExpr(e),n.write(n.t.push_local("r0")+" ; proc-arg"),e.totalUses=1,e.currUses=0,n.exprStack.unshift(e),0==t&&(o=n.exprStack.length),n.exprStack.length-o!=t&&(r=!0),e});if(this.stackAlignmentNeeded()&&(r=!0),r){var i=this.stackAlignmentNeeded(t.length);if(i){this.write(this.t.push_locals(i));for(var a=0;a<i;++a){var s=k.ir.numlit(0);s.totalUses=1,s.currUses=1,this.exprStack.unshift(s)}}for(var l=0,c=t;l<c.length;l++){var u=c[l],g=this.exprStack.indexOf(u);k.assert(0<=g),this.write(this.t.load_reg_src_off("r0","sp",g.toString(),!0)+" ; repush"),this.write(this.t.push_local("r0")+" ; repush"),this.exprStack.unshift(u)}}var p=this.mkLbl("_proccall"),d=e.data,_=-1;if(null!=d.virtualIndex||null!=d.ifaceIndex){var f=this.t.method_call(d,e);if(f)this.write(f),this.write(p+":");else if(d.mapMethod){var h=/Set/.test(d.mapMethod);k.assert(h==(2==e.args.length)),k.assert(!h==(1==e.args.length)),this.write(this.t.emit_int(d.mapIdx,"r1")),h&&this.write(this.t.emit_int(d.ifaceIndex,"r2")),this.emitHelper(this.t.vcall(d.mapMethod,h,this.bin.options.target.vtableShift)),this.write(p+":")}else{this.write(this.t.prologue_vtable(e.args.length-1,this.bin.options.target.vtableShift));var m=d.virtualIndex+4;null!=d.ifaceIndex&&(this.write(this.t.load_reg_src_off("r0","r0","#4")+" ; iface table"),m=d.ifaceIndex),m<=31?this.write(this.t.load_reg_src_off("r0","r0",m.toString(),!0)+" ; ld-method"):(this.write(this.t.emit_int(4*m,"r1")),this.write(this.t.load_reg_src_off("r0","r0","r1")+" ; ld-method")),this.write(this.t.call_reg("r0")),this.write(p+":")}}else{var y=d.proc;_=y.seqNo,this.write(this.t.call_lbl(y.label())),this.write(p+":")}this.calls.push({procIndex:_,stack:0,addr:0,callLabel:p});for(var v=0,b=t;v<b.length;v++){(u=b[v]).currUses=1}this.clearStack()},e.prototype.emitStore=function(e,t){switch(e.exprKind){case k.ir.EK.CellRef:var n=e.data;if(this.emitExpr(t),n.isGlobal()){var o=this.bitSizeInfo(n.bitSize),r="#"+n.index;n.index>=o.immLimit&&(this.write(this.t.emit_int(n.index,"r1")),r="r1"),this.write(this.t.load_reg_src_off("r0","r6",r,!1,!0,o))}else{var i=this.cellref(n),a=i[0],s=i[1];r=i[2];this.write(this.t.load_reg_src_off("r0",a,s,r,!0))}break;case k.ir.EK.FieldAccess:var l=e.data;this.emitExpr(k.ir.rtcall(this.withRef("pxtrt::stfld",l.isRef),[e.args[0],k.ir.numlit(l.idx),t]));break;default:k.oops()}},e.prototype.cellref=function(e){if(e.isGlobal())throw k.oops();return e.iscap?(k.assert(0<=e.index&&e.index<32),["r5",e.index.toString(),!0]):e.isarg?["sp","args@"+(this.proc.args.length-e.index-1).toString()+":"+this.baseStackSize,!1]:["sp","locals@"+e.index,!1]},e.prototype.emitLambdaWrapper=function(e){var a=this;this.proc.action;this.write(""),this.write(".section code"),k.isAVR()?this.write(this.proc.label()+"_Lit:"):(e&&this.write(this.t.unconditional_branch(".themain")),this.write(".balign 4"),this.write(this.proc.label()+"_Lit:"),this.write(".short 0xffff, "+pxt.REF_TAG_ACTION+"   ; action literal"),e&&this.write(".themain:")),this.write("@stackmark litfunc");var t=this.proc.args.map(function(e){return e.def});this.write(this.t.proc_setup(0,!0));var n=this.t.hasCommonalize()||!!k.target.stackAlign;n?this.write(this.t.push_fixed(["r5","r6","r7"])):this.write(this.t.push_fixed(["r5","r6"])),this.baseStackSize=4;var o=t.length,r=this.stackAlignmentNeeded(t.length);r&&(this.write(this.t.push_locals(r)),o+=r),t.forEach(function(e,t){3<=t&&k.U.userError(k.U.lf("only up to three parameters supported in lambdas")),a.write(a.t.push_local("r"+(t+1)))});var s=this.t.helper_prologue();this.proc.args.forEach(function(e,t){if(e.isRef()){var n=a.cellref(e),o=n[0],r=n[1],i=n[2];s+=a.t.load_reg_src_off("r0",o,r,i)+"\n",s+=a.t.call_lbl("pxt::incr")+"\n"}}),s+=this.t.helper_epilogue(),this.emitHelper(s),this.write(this.t.call_lbl(this.proc.label())),o&&this.write(this.t.pop_locals(o)),n?this.write(this.t.pop_fixed(["r6","r5","r7"])):this.write(this.t.pop_fixed(["r6","r5"])),this.write(this.t.proc_return()),this.write("@stackempty litfunc")},e.prototype.emitCallRaw=function(e){var t=k.hex.lookupFunc(e);k.assert(!!t,"unimplemented raw function: "+e),this.alignedCall(e)},e}();k.ProctoAssembler=t}(m.pxtc||(m.pxtc={}))}(ts||(ts={})),function(e){var _,t;_=e.pxtc||(e.pxtc={}),t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rmap_lo={r0:"r24",r1:"r22",r2:"r20",r3:"r18",r5:"r4",r6:"r2"},e.rmap_hi={r0:"r25",r1:"r23",r2:"r21",r3:"r19",r5:"r5",r6:"r3"},e.inst_lo={adds:"add",subs:"sub",ands:"and",orrs:"or",eors:"eor",muls:"Number_::",lsls:"Number_::",asrs:"Number_::",lsrs:"Number_::"},e.inst_hi={adds:"adc",subs:"sbc",ands:"and",orrs:"or",eors:"eor"},e}return __extends(e,t),e.prototype.nop=function(){return"nop"},e.prototype.reg_gets_imm=function(e,t){var n=255&t,o=(65280&t)>>8;return"\n    ldi "+this.rmap_lo[e]+", #"+n+"\n    ldi "+this.rmap_hi[e]+", #"+o},e.prototype.push_fixed=function(e){var t=this,n="";return e.forEach(function(e){n=n+"\npush "+t.rmap_hi[e]+"\npush "+t.rmap_lo[e]}),n+="\n    @dummystack "+e.length},e.prototype.pop_fixed=function(e){var t=this,n="";return e.forEach(function(e){n=n+"\npop "+t.rmap_lo[e]+"\npop "+t.rmap_hi[e]}),n+="\n    @dummystack -"+e.length},e.prototype.proc_setup=function(e,t){var n=t?"clr r1":"";n+="\n    push r29\n    push r28";for(var o=0;o<e;++o)n+="\n    push r1\n    push r1";return n+="\n    @dummystack "+(e+1)+"\n    in r28, 0x3d\n    in r29, 0x3e\n    subi r28, #5\n    sbci r29, #0"},e.prototype.proc_return=function(){return"\n    pop r28\n    pop r29\n    @dummystack -1\n    ret"},e.prototype.debugger_hook=function(e){return"eor r1, r1"},e.prototype.debugger_bkpt=function(e){return"eor r1, r1"},e.prototype.breakpoint=function(){return"eor r1, r1"},e.prototype.push_local=function(e){return"\n    push "+this.rmap_hi[e]+"\n    push "+this.rmap_lo[e]+"\n    @dummystack 1"},e.prototype.push_locals=function(e){return"no stack alignment on AVR"},e.prototype.pop_locals=function(e){if(2*e<=5)return _.Util.range(2*e).map(function(e){return"pop r0"}).join("\n    ")+"\n    @dummystack -"+e;for(var t=e,n="\n    in\tr30, 0x3d\n    in\tr31, 0x3e\n";0<e;){var o=Math.min(e,31);n+="    adiw\tr30, #2*"+o+"\n",e-=o}return n+="\n    out\t0x3d, r30\n    out\t0x3e, r31\n    @dummystack -"+t},e.prototype.unconditional_branch=function(e){return"jmp "+e},e.prototype.beq=function(e){return"breq "+e},e.prototype.bne=function(e){return"brne "+e},e.prototype.cmp=function(e,t){var n=this.rmap_lo[e],o=this.rmap_hi[e];return"\n    cp "+n+", "+this.rmap_lo[t]+"\n    cpc "+o+", "+this.rmap_hi[t]},e.prototype.cmp_zero=function(e){return"\n    cp "+this.rmap_lo[e]+", r1\n    cpc "+this.rmap_hi[e]+", r1"},e.prototype.load_reg_src_off=function(e,t,n,o,r,i){var a="",s="";function l(e){if(_.assert(!isNaN(e)),0<=e&&e<=62)n=e.toString();else{for("Y"==a&&(s+="\n    movw r30, r28\n"),s+="\n    ; += "+e;0<e;){var t=Math.min(e,63);s+="\n    adiw r30, #"+t,e-=t}n="0",a="Z"}}var c=/^(\d+):(\d+)/.exec(n);if(c){var u=parseInt(c[1]),g=parseInt(c[2])-u;g<=3&&(n="locals@-"+g,o=!1)}if("sp"!=t?(s="\n    movw r30, "+this.rmap_lo[t],a="Z"):a="Y",o||"#"==n[0]){var p=0;p=o?2*parseInt(n):parseInt(n.slice(1)),_.assert(!isNaN(p),"off="+n+"/"+o),"sp"==t&&(p+=1,s+="\n    in  r30, 0x3d\n    in  r31, 0x3e",a="Z"),l(p)}else if("r"==n[0])"Y"==a&&(s+="\n    movw r30, r28"),s+="\n    add r30, "+this.rmap_lo[n]+"\n    adc r31, "+this.rmap_hi[n],n="0";else{_.assert("Y"==a);p=-1e5;var d=/^args@(\d+):(\d+)$/.exec(n);if(d)p=2*(parseInt(d[1])+(parseInt(d[2])+1));if(d=/^locals@([\-\d]+)$/.exec(n))p=2*parseInt(d[1]);s+="\n; "+n,p+=6,_.assert(0<=p),l(p)}return i&&1==i.size?r?"\n    "+s+"\n    std "+a+", "+n+", "+this.rmap_lo[e]:i.needsSignExt?"\n    "+s+"\n    ldd "+this.rmap_lo[e]+", "+a+", "+n+"\n    clr "+this.rmap_hi[e]+"\n    sbrc "+this.rmap_lo[e]+", 7\n    com "+this.rmap_hi[e]:"\n    "+s+"\n    ldd "+this.rmap_lo[e]+", "+a+", "+n+"\n    clr "+this.rmap_hi[e]+"\n    ":r?"\n    "+s+"\n    std "+a+", "+n+", "+this.rmap_lo[e]+"\n    std "+a+", "+n+"+1, "+this.rmap_hi[e]:"\n    "+s+"\n    ldd "+this.rmap_lo[e]+", "+a+", "+n+"\n    ldd "+this.rmap_hi[e]+", "+a+", "+n+"+1"},e.prototype.rt_call=function(e,t,n){return _.assert("r0"==t&&"r1"==n),"Number_::"==this.inst_lo[e]?this.call_lbl("Number_::"+e):"\n    "+this.inst_lo[e]+" r24, r22\n    "+this.inst_hi[e]+" r25, r23"},e.prototype.call_lbl=function(e){return"call "+e},e.prototype.call_reg=function(e){return"\n    movw r30, "+this.rmap_lo[e]+"\n    icall"},e.prototype.vcall=function(e,t,n){return _.assert(!1),""},e.prototype.prologue_vtable=function(e,t){return _.assert(!1),""},e.prototype.method_call=function(e,t){var n=this.load_reg_src_off("r0","sp","#"+2*(t.args.length-1))+"\n",o=!1,r=0;e.mapMethod?(o=!0,r=/Set/.test(e.mapMethod)?e.ifaceIndex:e.mapIdx):(r=e.virtualIndex+2,null!=e.ifaceIndex&&(o=!0,r=e.ifaceIndex));return n+=this.emit_int(r,"r1")+"\n",n+=this.call_lbl("pxtrt::fetchMethod"+(o?"Iface":""))+"\n",n+=this.call_reg("r0")+"\n"},e.prototype.helper_prologue=function(){return"\n    @stackmark args\n    movw r4, r24"},e.prototype.helper_epilogue=function(){return"\n    call pxtrt::getGlobalsPtr\n    movw r2, r24\n    ret\n    @stackempty args"},e.prototype.load_ptr=function(e,t){return _.assert(!!e),"\n    ldi "+this.rmap_lo[t]+", "+e+"@lo\n    ldi "+this.rmap_hi[t]+", "+e+"@hi"},e.prototype.emit_int=function(e,t){return this.reg_gets_imm(t,e)},e.prototype.string_literal=function(e,t){return"\n.balign 2\n"+e+"meta: .short "+t.length+"\n"+e+": .string "+_.asmStringLiteral(t)+"\n"},e.prototype.hex_literal=function(e,t){return"\n.balign 2\n"+e+": .short "+(t.length>>1)+"\n        .hex "+t+(t.length%4==0?"":"00")+"\n"},e}(_.AssemblerSnippets),_.AVRSnippets=t}(ts||(ts={})),function(e){!function(O){var R={"numops::toBoolDecr":"numops::toBool","pxtrt::ldfldRef":"pxtrt::ldfld","pxtrt::stfldRef":"pxtrt::stfld","pxtrt::ldlocRef":"pxtrt::ldloc","pxtrt::stlocRef":"pxtrt::stloc","pxtrt::mklocRef":"pxtrt::mkloc","pxtrt::mapSetRef":"pxtrt::mapSet","pxtrt::mapGetRef":"pxtrt::mapGet"};function L(e){return"PXT."+(e=e.replace(/::/g,"."))}function o(e){for(var t,n="static readonly VTable "+e.id+"_VT = new VTable("+(t=O.getName(e.decl),JSON.stringify(t))+",   "+e.refmask.length+", new FnPtr[] {\n",o=0,r=e.vtable;o<r.length;o++){n+="    "+(l=r[o]).label()+",\n"}n+="  },\n",n+="  new FnPtr[] {\n";for(var i=0,a=0,s=e.itable;a<s.length;a++){var l;n+="    "+((l=s[a])?l.label():"null")+",  // "+(e.itableInfo[i]||".")+"\n",i++}return n+="});\n"}O.csEmit=function(t,e){var n=e.hexinfo.hex[0];n+="\n// User code starts\n\n#pragma warning disable CS0164, CS1998, CS0219, CS0414, CS0162\n\nnamespace PXT {\npublic static class UserCode {\n",t.globals.forEach(function(e){n+="static object g_"+e.uniqueName()+";\n"}),t.procs.forEach(function(e){n+="\n"+function(r,p){var t="",d=function(e){t+=e+"\n"},_=function(e){t+="    "+e+"\n"},f=O.ir.EK,o=0,e=p.label()+"_CTX";p.resolve(),r.procs[0]==p&&d("\n\npublic static void Main() { "+p.label()+"(new CTX(0), null).GetAwaiter().GetResult(); }\n");var n=p.args.map(function(e,t){return"    "+D(e)+" = "+t+" >= args.Length ? TValue.Undefined : args["+t+"];\n"}).join("");d("\nstatic Action<Task, object> "+p.label()+"_delegate;\nstatic Task "+p.label()+"(CTX parent, object[] args) {\n    var s = new "+e+"(parent);\n    if ("+p.label()+"_delegate == null) {\n        "+p.label()+"_delegate = "+p.label()+"_task;\n    }\n"+n+"\n    "+p.label()+"_task(null, s);\n    return s.completion.Task;\n}\n\nstatic void "+p.label()+"_task(Task prevTask, object s_) {\n    var s = ("+e+")s_;\n    var r0 = TValue.Undefined;\n    var step = s.pc;\n    s.pc = -1;\n\n    while (true) {\n    switch (step) {\n    case 0:\n");for(var i=[],s=0,l=-1,h=0,m=[],a=0,c=p.body;a<c.length;a++){var u=c[a];u.stmtKind==O.ir.SK.Label&&(u.lblId=++h)}for(var g=0,y=p.body;g<y.length;g++){var u=y[g];switch(u.stmtKind){case O.ir.SK.Expr:w(u.expr);break;case O.ir.SK.StackEmpty:for(var v=0,b=i;v<b.length;v++){var k=b[v];k.totalUses!==k.currUses&&O.oops()}i=[];break;case O.ir.SK.Jmp:B(u);break;case O.ir.SK.Label:_("goto case "+u.lblId+";"),d("case "+u.lblId+":");break;case O.ir.SK.Breakpoint:A(u);break;default:O.oops()}}_("s.Leave(r0);"),_("return;"),d('  default: PXT.Util.check(false, "invalid pc: " + step); return;\n} } }');var T=O.nodeLocationInfo(p.action);T.functionName=p.getName(),d("// "+p.label()+".info = "+JSON.stringify(T)),d("\nclass "+e+" : CTX {\n    public "+e+"(CTX parent) : base(parent) {}");for(var E=0,S=p.locals.concat(p.args);E<S.length;E++){var C=S[E];_("public object "+C.uniqueName()+";")}for(var x=0;x<o;++x)_("public object tmp_"+x+";");for(var x=0;x<l;++x)_("public object[] callArgs_"+x+";");return d("}\n"),t;function A(e){var t,n=e.breakpointInfo.id;if(_("s.lastBrkId = "+n+";"),r.options.trace)t=++h,_("s.Trace("+n+", "+t+", "+p.label()+"_info);");else{if(!r.options.breakpoints)return;var o="s.Breakpoint("+(t=++h)+", "+n+", r0);";e.breakpointInfo.isDebuggerStmt?_(o):_("if ((breakAlways && s.IsBreakFrame()) || breakpoints["+n+"]) "+o)}d("case "+t+": // BRK")}function D(e){return e.isGlobal()?"g_"+e.uniqueName():e.iscap?"s.mycaps["+e.index+"]":"s."+e.uniqueName()}function B(e){var t="goto case "+e.lbl.lblId+";";e.jmpMode==O.ir.JmpMode.Always?(e.expr&&w(e.expr),_(t)):e.jmpMode==O.ir.JmpMode.IfJmpValEq?_("if (r0.Eq("+N(e.expr)+")) "+t):(w(e.expr),e.jmpMode==O.ir.JmpMode.IfNotZero?_("if (numops.toBool(r0)) "+t):_("if (!numops.toBool(r0)) "+t))}function I(e,t){return e+(t?"Ref":"")}function N(e){switch(e.exprKind){case f.NumberLiteral:if(!0===e.data)return"TValue.True";if(!1===e.data)return"TValue.False";if(null===e.data)return"TValue.Null";if(void 0===e.data)return"TValue.Undefined";if("number"==typeof e.data)return"(double)("+e.data+")";throw O.oops("invalid data: "+typeof e.data);case f.PointerLiteral:return e.jsInfo;case f.SharedRef:var t=e.args[0];O.U.assert(!!t.currUses),O.U.assert(t.currUses<t.totalUses),t.currUses++;var n=i.indexOf(t);return O.U.assert(0<=n),"s.tmp_"+n;case f.CellRef:var o=e.data;return D(o);default:throw O.oops()}}function w(e){switch(e.exprKind){case f.JmpValue:_("// jmp value (already in r0)");break;case f.Nop:_("// nop");break;case f.Incr:case f.Decr:w(e.args[0]);break;case f.FieldAccess:var t=e.data;return t.shimName?(w(e.args[0]),void _("r0 = r0"+t.shimName+";")):w(O.ir.rtcall(I("pxtrt::ldfld",t.isRef),[e.args[0],O.ir.numlit(t.idx)]));case f.Store:return function(e,t){switch(e.exprKind){case f.CellRef:var n=e.data;w(t);var o=function(e){switch(e){case 0:return"";case 1:return"PXT.pxtrt.toInt8";case 3:return"PXT.pxtrt.toInt16";case 5:return"PXT.pxtrt.toInt32";case 2:return"PXT.pxtrt.toUInt8";case 4:return"PXT.pxtrt.toUInt16";case 6:return"PXT.pxtrt.toUInt32";default:throw O.oops()}}(n.bitSize);_(o?D(n)+" = "+o+"(PXT.numops.toDouble(r0));":D(n)+" = r0;");break;case f.FieldAccess:var r=e.data;w(O.ir.rtcall(I("pxtrt::stfld",r.isRef),[e.args[0],O.ir.numlit(r.idx),t]));break;default:O.oops()}}(e.args[0],e.args[1]);case f.RuntimeCall:return function(e){var r=O.ir.flattenArgs(e);r.precomp.forEach(w);var t=e.data;t=O.U.lookup(R,t)||t;var n=r.flattened.map(N);if("langsupp::ignore"!=t){var o=e.callingConvention!=O.ir.CallingConvention.Plain,i=O.hex.lookupFunc(t),a=i?i.argsFmt:"";i||pxt.log("warning, missing //%: "+t);var s="object",l=!1;if(a){var c=a.split(";").filter(function(e){return!!e});"async"==c[0]&&(o=!0,c.shift()),s=c.shift(),"CTX"==c[0]&&(l=!0,c.shift()),n=n.map(function(e,t){var n=c[t];if("#"==n[0]){n=n.slice(1);var o=r.flattened[t].data;if(r.flattened[t].exprKind==f.NumberLiteral&&"number"==typeof o){if("double"==n||"float"==n)return o.toString();if((0|o)==o&&("int"==n||"uint"==n&&0<=o))return o.toString()}e="numops.toDouble("+e+")"}return"object"!=n&&(e="(("+n+")("+e+"))"),e})}l&&n.unshift("s");var u="";if(u="."==t[0]?""+n[0]+t+"("+n.slice(1).join(", ")+")":O.U.startsWith(t,"new ")?"new "+L(t.slice(4))+"("+n.join(", ")+")":L(t)+"("+n.join(", ")+")",o){var g=++h;m.push(g),_("s.pc = "+g+";"),_(u+".ContinueWith("+p.label()+"_delegate, (object)s);"),_("return;"),d("  case "+g+":\n"),u="void"==s?"/* void */":"((Task<"+s+">)prevTask).Result"}"#"==s[0]&&(u="(double)("+u+")"),_("void"==s?u+";":"r0 = "+u+";")}}(e);case f.ProcCall:return function(e){var t=e.data,n=t.proc,o=++h,r="s.callArgs_"+s;_(r+" = new object["+e.args.length+"];"),++s>l&&(l=s),e.args.forEach(function(e,t){w(e),_(r+"["+t+"] = r0;")}),_("s.pc = "+o+";");var i="(s, "+r+").ContinueWith("+p.label()+"_delegate, s)";if(null!=t.ifaceIndex){if(t.mapMethod){_("if ("+r+"[0] is PXT.RefMap) {");var a=e.args.map(function(e,t){return r+"["+t+"]"});a[0]="(PXT.RefMap)"+a[0],a.splice(1,0,t.mapIdx.toString()),_("  s.retval = "+L(t.mapMethod).replace("Ref","")+"("+a.join(", ")+");"),_("  goto case "+o+";"),_("} else {")}_("PXT.pxtrt.getVT("+r+"[0]).iface["+t.ifaceIndex+"]"+i+";"),t.mapMethod&&_("}")}else null!=t.virtualIndex?(O.assert(0<=t.virtualIndex),_("PXT.pxtrt.getVT("+r+"[0]).methods["+t.virtualIndex+"]"+i+";")):_(""+n.label()+i+";");_("return;"),d("  case "+o+":"),_("r0 = s.retval;"),s--}(e);case f.SharedDef:return function(e){var t=e.args[0];if(O.U.assert(1<=t.totalUses),O.U.assert(0===t.currUses),(t.currUses=1)==t.totalUses)return w(t);w(t);var n=i.length;i.push(t),o=Math.max(o,i.length),_("s.tmp_"+n+" = r0;")}(e);case f.Sequence:return e.args.forEach(w);default:_("r0 = "+N(e)+";")}}}(t,e)+"\n"}),t.usedClassInfos.forEach(function(e){n+=o(e)}),O.U.iterMap(t.hexlits,function(e,t){n+="static readonly Buffer "+t+' = PXT.BufferMethods.createBufferFromHex("'+e+'");\n'}),n+="\n} } // end UserCode\n",t.writeFile(O.BINARY_CS,n)}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(D){var B={"numops::adds":"+","numops::subs":"-","numops::div":"/","numops::mod":"%","numops::muls":"*","numops::ands":"&","numops::orrs":"|","numops::eors":"^","numops::bnot":"~","numops::lsls":"<<","numops::asrs":">>","numops::lsrs":">>>","numops::le":"<=","numops::lt":"<","numops::lt_bool":"<","numops::ge":">=","numops::gt":">","numops::eq":"==","pxt::eq_bool":"==","pxt::eqq_bool":"===","numops::eqq":"===","numops::neqq":"!==","numops::neq":"!=","langsupp::ptreq":"==","langsupp::ptreqq":"===","langsupp::ptrneqq":"!==","langsupp::ptrneq":"!="};function I(e){return"pxt."==(e=e.replace(/::/g,".")).slice(0,4)&&(e="pxtcore."+e.slice(4)),D.target.shortPointers&&(e=e.replace(/^thumb\./,"avr.")),"pxsim."+e}D.isBuiltinSimOp=function(e){return!!D.U.lookup(B,e.replace(/\./g,"::"))},D.shimToJs=I,D.jsEmit=function(t){var n="'use strict';\n";t.target.jsRefCounting||(n+="pxsim.noRefCounting();\n"),t.target.floatingPoint&&(n+="pxsim.enableFloatingPoint();\n"),n+="pxsim.setTitle("+JSON.stringify(t.options.name||"")+");\n";for(var e={},o={},r=0,i=t.res.configData||[];r<i.length;r++){var a=i[r];e[a.key+""]=a.value,o[a.name]=a.key}n+="pxsim.setConfigData("+JSON.stringify(e,null,1)+", "+JSON.stringify(o,null,1)+");\n",t.procs.forEach(function(e){n+="\n"+function(a,r){var t="",l=function(e){t+=e+"\n"},c=function(e){t+="    "+e+"\n"},i=D.ir.EK,o=!!a.target.jsRefCounting;l("\nvar "+r.label()+" "+(a.procs[0]==r?"= entryPoint":"")+" = function (s) {\nvar r0 = s.r0, step = s.pc;\ns.pc = -1;\nwhile (true) {\nif (yieldSteps-- < 0 && maybeYield(s, step, r0)) return null;\nswitch (step) {\n  case 0:\n"),r.resolve(),r.locals.forEach(function(e){c(T(e)+" = "+(D.target.floatingPoint?"undefined":"0")+";")}),r.args.length&&(c("if (s.lambdaArgs) {"),r.args.forEach(function(e,t){c("  "+T(e)+" = "+(o&&e.isRef()?"pxtrt.incr":"")+"(s.lambdaArgs["+t+"]);")}),c("  s.lambdaArgs = null;"),c("}"));for(var e,n=-1,u=[],g=0,s=[],p=0,d=r.body;p<d.length;p++){var _=d[p];e&&e.lbl==_&&e.stmtKind==D.ir.SK.Jmp&&_.stmtKind==D.ir.SK.Label&&e.jmpMode==D.ir.JmpMode.Always&&1==_.lblNumUses&&(_.lblNumUses=n),_.stmtKind==D.ir.SK.Label&&(_.lblId=++g),e=_}for(var f=0,h=r.body;f<h.length;f++){var _=h[f];switch(_.stmtKind){case D.ir.SK.Expr:A(_.expr);break;case D.ir.SK.StackEmpty:for(var m=0,y=u;m<y.length;m++){var v=y[m];v.totalUses!==v.currUses&&D.oops()}u=[];break;case D.ir.SK.Jmp:E(_);break;case D.ir.SK.Label:0<_.lblNumUses&&l("  case "+_.lblId+":");break;case D.ir.SK.Breakpoint:k(_);break;default:D.oops()}}c("return leave(s, r0)"),l("  default: oops()"),l("} } }");var b=D.nodeLocationInfo(r.action);return b.functionName=r.getName(),l(r.label()+".info = "+JSON.stringify(b)),r.isRoot&&l(r.label()+".continuations = [ "+s.join(",")+" ]"),t;function k(e){var t,n=e.breakpointInfo.id;if(c("s.lastBrkId = "+n+";"),a.options.trace)t=++g,c("return trace("+n+", s, "+t+", "+r.label()+".info);");else{if(!a.options.breakpoints)return;var o="return breakpoint(s, "+(t=++g)+", "+n+", r0);";e.breakpointInfo.isDebuggerStmt?c(o):c("if ((breakAlways && isBreakFrame(s)) || breakpoints["+n+"]) "+o)}l("  case "+t+":")}function T(e){return e.isGlobal()?"globals."+e.uniqueName():e.iscap?"s.caps["+e.index+"]":"s."+e.uniqueName()}function E(e){if(e.lbl.lblNumUses==n)return D.assert(e.jmpMode==D.ir.JmpMode.Always),void(e.expr&&A(e.expr));D.assert(0<e.lbl.lblNumUses);var t="{ step = "+e.lbl.lblId+"; continue; }";e.jmpMode==D.ir.JmpMode.Always?(e.expr&&A(e.expr),c(t)):e.jmpMode==D.ir.JmpMode.IfJmpValEq?c("if (r0 == ("+C(e.expr)+")) "+t):(A(e.expr),e.jmpMode==D.ir.JmpMode.IfNotZero?c("if (r0) "+t):c("if (!r0) "+t))}function S(e,t){return e+(t?"Ref":"")}function C(e){switch(e.exprKind){case i.NumberLiteral:if(!0===e.data)return"true";if(!1===e.data)return"false";if(null===e.data)return"null";if(void 0===e.data)return"undefined";if("number"==typeof e.data)return e.data+"";throw D.oops("invalid data: "+typeof e.data);case i.PointerLiteral:return e.jsInfo;case i.SharedRef:var t=e.args[0];D.U.assert(!!t.currUses),D.U.assert(t.currUses<t.totalUses),t.currUses++;var n=u.indexOf(t);return D.U.assert(0<=n),"s.tmp_"+n;case i.CellRef:var o=e.data;return T(o);default:throw D.oops()}}function x(e){return e.shimName?e.shimName:o?null:"."+e.name+"___"+e.idx}function A(e){switch(e.exprKind){case i.JmpValue:c("// jmp value (already in r0)");break;case i.Nop:c("// nop");break;case i.Incr:A(e.args[0]),o&&c("pxtrt.incr(r0);");break;case i.Decr:A(e.args[0]),o&&c("pxtrt.decr(r0);");break;case i.FieldAccess:var t=e.data,n=x(t);return n?(D.assert(!o),A(e.args[0]),void c("r0 = r0"+n+";")):A(D.ir.rtcall(S("pxtrt::ldfld",t.isRef),[e.args[0],D.ir.numlit(t.idx)]));case i.Store:return function(e,t){switch(e.exprKind){case i.CellRef:var n=e.data;A(t),c(T(n)+" = "+function(e){switch(e){case 0:return"";case 1:return"pxsim.pxtrt.toInt8";case 3:return"pxsim.pxtrt.toInt16";case 5:return"pxsim.pxtrt.toInt32";case 2:return"pxsim.pxtrt.toUInt8";case 4:return"pxsim.pxtrt.toUInt16";case 6:return"pxsim.pxtrt.toUInt32";default:throw D.oops()}}(n.bitSize)+"(r0);");break;case i.FieldAccess:var o=e.data,r=x(o);A(r?D.ir.rtcall("="+r,[e.args[0],t]):D.ir.rtcall(S("pxtrt::stfld",o.isRef),[e.args[0],D.ir.numlit(o.idx),t]));break;default:D.oops()}}(e.args[0],e.args[1]);case i.RuntimeCall:return function(e){var t=D.ir.flattenArgs(e);t.precomp.forEach(A);var n=e.data,o=t.flattened.map(C),r="";if(r="."==n[0]?""+o[0]+n+"("+o.slice(1).join(", ")+")":"="==n[0]?"("+o[0]+")"+n.slice(1)+" = ("+o[1]+")":D.U.startsWith(n,"new ")?"new "+I(n.slice(4))+"("+o.join(", ")+")":a.target.floatingPoint&&D.U.lookup(B,n)?2==o.length?"("+o[0]+" "+D.U.lookup(B,n)+" "+o[1]+")":"("+D.U.lookup(B,n)+" "+o[0]+")":I(n)+"("+o.join(", ")+")",e.callingConvention==D.ir.CallingConvention.Plain)c("r0 = "+r+";");else{var i=++g;s.push(i),e.callingConvention==D.ir.CallingConvention.Promise?c("(function(cb) { "+r+".done(cb) })(buildResume(s, "+i+"));"):(c("setupResume(s, "+i+");"),c(r+";")),c("checkResumeConsumed();"),c("return;"),l("  case "+i+":"),c("r0 = s.retval;")}}(e);case i.ProcCall:return function(e){var t=D.ir.rtcall("<frame>",[]);t.totalUses=1,t.currUses=0;var n=u.length;u.push(t);var o=e.data,r=o.proc,i="s.tmp_"+n,a=++g;if(c(i+" = { fn: "+(r?r.label():null)+", parent: s };"),e.args.forEach(function(e,t){A(e),c(i+".arg"+t+" = r0;")}),c("s.pc = "+a+";"),null!=o.ifaceIndex){if(o.mapMethod){c("if ("+i+".arg0.vtable === 42) {");var s=e.args.map(function(e,t){return i+".arg"+t});s.splice(1,0,o.mapIdx.toString()),c("  s.retval = "+I(o.mapMethod)+"("+s.join(", ")+");"),c("  "+i+".fn = doNothing;"),c("} else {")}c("pxsim.check(typeof "+i+'.arg0  != "number", "Can\'t access property of null/undefined.")'),c(i+".fn = "+i+".arg0.vtable.iface["+o.ifaceIndex+"];"),o.mapMethod&&c("}")}else null!=o.virtualIndex&&(D.assert(0<=o.virtualIndex),c("pxsim.check(typeof "+i+'.arg0  != "number", "Can\'t access property of null/undefined.")'),c(i+".fn = "+i+".arg0.vtable.methods["+o.virtualIndex+"];"));c("return actionCall("+i+")"),l("  case "+a+":"),c("r0 = s.retval;"),t.currUses=1}(e);case i.SharedDef:return function(e){var t=e.args[0];if(D.U.assert(1<=t.totalUses),D.U.assert(0===t.currUses),(t.currUses=1)==t.totalUses)return A(t);A(t);var n=u.length;u.push(t),c("s.tmp_"+n+" = r0;")}(e);case i.Sequence:return e.args.forEach(A);default:c("r0 = "+C(e)+";")}}}(t,e)+"\n"}),t.usedClassInfos.forEach(function(e){n+=function(e){for(var t="var "+e.id+"_VT = {\n  name: "+JSON.stringify(D.getName(e.decl))+",\n  refmask: "+JSON.stringify(e.refmask)+",\n  methods: [\n",n=0,o=e.vtable;n<o.length;n++)t+="    "+(s=o[n]).label()+",\n";t+="  ],\n",t+="  iface: [\n";for(var r=0,i=0,a=e.itable;i<a.length;i++){var s;t+="    "+((s=a[i])?s.label():"null")+",  // "+(e.itableInfo[r]||".")+"\n",r++}return t+="  ],\n",t+="};\n"}(e)}),t.res.breakpoints&&(n+="\nsetupDebugger("+t.res.breakpoints.length+")\n"),D.U.iterMap(t.hexlits,function(e,t){n+="var "+t+' = pxsim.BufferMethods.createBufferFromHex("'+e+'")\n'}),t.writeFile(D.BINARY_JS,n)}}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(e){!function(u){u.thumbCmpMap={"numops::lt":"_cmp_lt","numops::gt":"_cmp_gt","numops::le":"_cmp_le","numops::ge":"_cmp_ge","numops::eq":"_cmp_eq","numops::eqq":"_cmp_eqq","numops::neq":"_cmp_neq","numops::neqq":"_cmp_neqq"};var n={"numops::adds":"_numops_adds","numops::subs":"_numops_subs","numops::orrs":"_numops_orrs","numops::eors":"_numops_eors","numops::ands":"_numops_ands","pxt::toInt":"_numops_toInt","pxt::fromInt":"_numops_fromInt","pxt::incr":"_pxt_incr","pxt::decr":"_pxt_decr"},e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.hasCommonalize=function(){return!!u.target.commonalize},t.prototype.stackAligned=function(){return u.target.stackAlign&&1<u.target.stackAlign},t.prototype.pushLR=function(){return this.stackAligned()?"push {lr, r3}  ; r3 for align":"push {lr}"},t.prototype.popPC=function(){return this.stackAligned()?"pop {pc, r3}  ; r3 for align":"pop {pc}"},t.prototype.nop=function(){return"nop"},t.prototype.reg_gets_imm=function(e,t){return"movs "+e+", #"+t},t.prototype.push_fixed=function(e){return"push {"+e.join(", ")+"}"},t.prototype.pop_fixed=function(e){return"pop {"+e.join(", ")+"}"},t.prototype.proc_setup=function(e,t){var n="push {lr}\n";if(0<e){n+="    movs r0, #0\n";for(var o=0;o<e;++o)n+="    push {r0} ;loc\n"}return n},t.prototype.proc_return=function(){return"pop {pc}"},t.prototype.debugger_stmt=function(e){return"\n    @stackempty locals\n    ldr r0, [r6, #0] ; debugger\n    subs r0, r0, #4  ; debugger\n"+e+":\n    ldr r0, [r0, #0] ; debugger\n"},t.prototype.debugger_bkpt=function(e){return"\n    @stackempty locals\n    ldr r0, [r6, #0] ; brk\n"+e+":\n    ldr r0, [r0, #0] ; brk\n"},t.prototype.debugger_proc=function(e){return"\n    ldr r0, [r6, #0]  ; brk-entry\n    ldr r0, [r0, #4]  ; brk-entry\n"+e+":"},t.prototype.push_local=function(e){return"push {"+e+"}"},t.prototype.push_locals=function(e){return"sub sp, #4*"+e+" ; push locals "+e+" (align)"},t.prototype.pop_locals=function(e){return"add sp, #4*"+e+" ; pop locals "+e},t.prototype.unconditional_branch=function(e){return"bb "+e},t.prototype.beq=function(e){return"beq "+e},t.prototype.bne=function(e){return"bne "+e},t.prototype.cmp=function(e,t){return"cmp "+e+", "+t},t.prototype.cmp_zero=function(e){return"cmp "+e+", #0"},t.prototype.load_reg_src_off=function(e,t,n,o,r,i){n=n.replace(/:\d+$/,""),o&&(n="#4*"+n);var a="str",s="ldr";return i&&(32==i.immLimit?a="strb":64==i.immLimit&&(a="strh"),s=i.needsSignExt?a.replace("str","ldrs"):a.replace("str","ldr")),r?a+" "+e+", ["+t+", "+n+"]":s+" "+e+", ["+t+", "+n+"]"},t.prototype.rt_call=function(e,t,n){return e+" "+t+", "+n},t.prototype.call_lbl=function(e){if(u.target.taggedInts&&!u.target.boxDebug){var t=u.U.lookup(n,e);t&&(e=t)}return"bl "+e},t.prototype.call_reg=function(e){return"blx "+e},t.prototype.vcall=function(e,t,n){return"\n    ldr r0, [sp, #"+(t?4:0)+"] ; ld-this\n    ldrh r3, [r0, #2] ; ld-vtable\n    lsls r3, r3, #"+n+"\n    ldr r3, [r3, #4] ; iface table\n    cmp r3, #43\n    beq .objlit\n.nonlit:\n    lsls r1, "+(t?"r2":"r1")+", #2\n    ldr r0, [r3, r1] ; ld-method\n    bx r0\n.objlit:\n    "+(t?"ldr r2, [sp, #0]":"")+"\n    "+this.pushLR()+"\n    bl "+e+"\n    "+this.popPC()+"\n"},t.prototype.prologue_vtable=function(e,t){return"\n    ldr r0, [sp, #4*"+e+"]  ; ld-this\n    ldrh r0, [r0, #2] ; ld-vtable\n    lsls r0, r0, #"+t+"\n    "},t.prototype.helper_prologue=function(){return"\n    @stackmark args\n    "+this.pushLR()+"\n    mov r5, r0\n"},t.prototype.helper_epilogue=function(){return"\n    bl pxtrt::getGlobalsPtr\n    mov r6, r0\n    "+this.popPC()+"\n    @stackempty args\n"},t.prototype.load_ptr_full=function(e,t){return u.assert(!!e),"\n    ldlit "+t+", "+e+"\n"},t.prototype.load_ptr=function(e,t){return u.assert(!!e),"\n    movs "+t+", "+e+"@hi  ; ldptr\n    lsls "+t+", "+t+", #8\n    adds "+t+", "+e+"@lo\n"},t.prototype.arithmetic=function(){var e="";if(!u.target.taggedInts||u.target.boxDebug)return e;for(var t=0,n=["adds","subs","ands","orrs","eors"];t<n.length;t++){e+="\n_numops_"+(s=n[t])+":\n    @scope _numops_"+s+"\n    lsls r2, r0, #31\n    beq .boxed\n    lsls r2, r1, #31\n    beq .boxed\n","adds"==s||"subs"==s?e+="\n    subs r2, r1, #1\n    "+s+" r2, r0, r2\n    bvs .boxed\n    movs r0, r2\n    blx lr\n":(e+="    "+s+" r0, r1\n","eors"==s&&(e+="    adds r0, r0, #1\n"),e+="    blx lr\n"),e+="\n.boxed:\n    push {r4, lr}\n    push {r0, r1}\n    bl numops::"+s+"\n    movs r4, r0\n    pop {r0}\n    "+(this.stackAligned()?"push {r0} ; align":"")+"\n    bl _pxt_decr\n    "+(this.stackAligned()?"pop {r0} ; unalign":"")+"\n    pop {r0}\n    bl _pxt_decr\n    movs r0, r4\n    pop {r4, pc}\n"}e+="\n@scope _numops_toInt\n_numops_toInt:\n    asrs r0, r0, #1\n    bcc .over\n    blx lr\n.over:\n    "+this.pushLR()+"\n    lsls r0, r0, #1\n    bl pxt::toInt\n    "+this.popPC()+"\n\n_numops_fromInt:\n    lsls r2, r0, #1\n    asrs r1, r2, #1\n    cmp r0, r1\n    bne .over2\n    adds r0, r2, #1\n    blx lr\n.over2:\n    "+this.pushLR()+"\n    bl pxt::fromInt\n    "+this.popPC()+"\n";for(var o=0,r=["incr","decr"];o<r.length;o++){e+="\n_pxt_"+(s=r[o])+":\n    @scope _pxt_"+s+"\n    lsls r3, r0, #30\n    beq .t0\n    bx lr\n.t0:\n    cmp r0, #0\n    beq .skip\n    "+this.pushLR()+"\n    bl pxt::"+s+"\n    "+this.popPC()+"\n.skip:\n    bx lr\n"}for(var i=0,a=Object.keys(u.thumbCmpMap);i<a.length;i++){var s;e+="\n_cmp_"+(s=(s=a[i]).replace(/.*::/,""))+":\n    @scope _cmp_"+s+"\n    lsls r2, r0, #31\n    beq .boxed\n    lsls r2, r1, #31\n    beq .boxed\n    subs r0, r1\n    b"+s.replace("qq","q").replace("neq","ne")+" .true\n.false:\n    movs r0, #0\n    bx lr\n.true:\n    movs r0, #1\n    bx lr\n.boxed:\n    push {r4, lr}\n    push {r0, r1}\n    bl numops::"+s+"\n    bl numops::toBoolDecr\n    movs r4, r0\n    pop {r0}\n    "+(this.stackAligned()?"push {r0} ; align":"")+"\n    bl _pxt_decr\n    "+(this.stackAligned()?"pop {r0} ; unalign":"")+"\n    pop {r0}\n    bl _pxt_decr\n    movs r0, r4\n    pop {r4, pc}\n"}return e},t.prototype.emit_int=function(e,n){var o=!1;function t(e){u.assert(0<=e&&e<=255);var t="";return o?e&&(t="adds "+n+", #"+e+"\n"):t="movs "+n+", #"+e+"\n",o=!0,t}function r(e){return void 0===e&&(e=8),"lsls "+n+", "+n+", #"+e+"\n"}u.assert(null!=e);var i=Math.floor(e),a=!1;i<0&&(a=!0,i=-i);var s=0;if(255<i){for(var l=i;0==(1&l);)l>>>=1,s++;u.numBytes(l)<u.numBytes(i)?i=l:s=0}var c="";switch(u.numBytes(i)){case 4:c+=t(i>>>24&255),c+=r();case 3:c+=t(i>>>16&255),c+=r();case 2:c+=t(i>>>8&255),c+=r();case 1:c+=t(255&i);break;default:u.oops()}return s&&(c+=r(s)),a&&(c+="negs "+n+", "+n+"\n"),4<c.split("\n").length?"ldlit "+n+", "+Math.floor(e)+"\n":c},t}(u.AssemblerSnippets);u.ThumbSnippets=e}(e.pxtc||(e.pxtc={}))}(ts||(ts={})),function(l){var k,T,E;k=l.pxtc||(l.pxtc={}),T={"Number_::eq":"eq","Number_::adds":"add","Number_::subs":"sub"},E={},k.vmEmit=function(t,o){var r="; VM start\n"+k.hex.hexPrelude()+"        \n    .hex 708E3B92C615A841C49866C975EE5197 ; magic number\n    .hex "+k.hex.hexTemplateHash()+" ; hex template hash\n    .hex 0000000000000000 ; @SRCHASH@\n    .short "+t.globalsWords+"   ; num. globals\n    .short 0 ; patched with number of words resulting from assembly\n    .word 0 ; reserved\n    .word 0 ; reserved\n    .word 0 ; reserved\n",n=new k.AVRSnippets;t.procs.forEach(function(e){r+="\n"+function(s,l){var t="",c=function(e){t+=e+"\n"},u=function(e){t+="    "+e+"\n"},g=k.ir.EK,p=2,r=[],d=[],i=!1,_=0,f=0;l.resolve(),a(),s.numStmts=_,t="";for(var e=0,n=r;e<n.length;e++){var o=n[e];o.currUses=0}return i=!0,a(),t;function a(){c(";\n; Proc: "+l.getName()+"\n;"),u(".section code"),s.procs[0]==l&&c("; main"),c(l.label()+":"),c(l.label()+"_Lit:"),f=l.locals.length+d.length,u(0==f?"locals0":"locals "+f*p+" ; incl. "+d.length+" tmps");for(var e=0,t=l.body;e<t.length;e++){var n=t[e];switch(n.stmtKind){case k.ir.SK.Expr:v(n.expr);break;case k.ir.SK.StackEmpty:b();for(var o=0,r=d;o<r.length;o++){var i=r[o];i&&k.oops("uses: "+i.currUses+"/"+i.totalUses+" "+i.toString())}break;case k.ir.SK.Jmp:h(n);break;case k.ir.SK.Label:c(n.lblName+":");break;case k.ir.SK.Breakpoint:_++;break;default:k.oops()}}var a=f*p|l.args.length<<8;u("ret 0x"+a.toString(16))}function h(e){var t=e.lbl.lblName;e.jmpMode==k.ir.JmpMode.Always?(e.expr&&v(e.expr),u("jmp "+t)):e.jmpMode==k.ir.JmpMode.IfLambda?(e.expr&&v(e.expr),u("retlmb "+f*p)):e.jmpMode==k.ir.JmpMode.IfJmpValEq?(u("push"),v(e.expr),u("eq"),u("jmpnz "+t)):(v(e.expr),e.jmpMode==k.ir.JmpMode.IfNotZero?u("jmpnz "+t):e.jmpMode==k.ir.JmpMode.IfZero?u("jmpz "+t):k.oops())}function m(e,t){return e+(t?"Ref":"")}function y(e){if(e.isGlobal())return"glb "+e.index;if(e.iscap)return"cap "+e.index*p;if(e.isarg){var t=l.args.length-e.index-1;return k.assert(0<=t,"arg#"+t),"tmp "+(f+2+t)*p}var t=e.index+d.length;return k.assert(!i||t<f,"cell#"+t),k.assert(0<=t,"cell#"+t),"tmp "+t*p}function v(e){switch(e.exprKind){case g.JmpValue:u("; jmp value (already in r0)");break;case g.Nop:u("; nop");break;case g.Incr:v(e.args[0]),u("incr");break;case g.Decr:v(e.args[0]),u("decr");break;case g.FieldAccess:var t=e.data;return v(k.ir.rtcall(m("pxtrt::ldfld",t.isRef),[e.args[0],k.ir.numlit(t.idx)]));case g.Store:return function(e,t){switch(e.exprKind){case g.CellRef:v(t);var n=e.data,o="st"+y(n);!n.isGlobal()||1!=n.bitSize&&2!=n.bitSize||(o=o.replace("stglb","stglb1")),u(o);break;case g.FieldAccess:var r=e.data;v(k.ir.rtcall(m("pxtrt::stfld",r.isRef),[e.args[0],k.ir.numlit(r.idx),t]));break;default:k.oops()}}(e.args[0],e.args[1]);case g.RuntimeCall:return function(e){var t=e.data,n=/^(.*)\^(\d+)$/.exec(t),o=0;n&&(t=n[1],o=parseInt(n[2])),t=k.U.lookup(E,t)||t,k.assert(o<=15);var r=k.ir.flattenArgs(e);if(k.assert(0==r.precomp.length),b(),"pxt::stringLiteral"!=t||1!=r.flattened.length||r.flattened[0].exprKind!=g.PointerLiteral){k.assert(r.flattened.length<=4);var i="0x"+(o+16*r.flattened.length).toString(16);t=t.replace(/^thumb::/,"Number_::");var a=k.U.lookup(T,t);o&&(a=null);for(var s=0;s<r.flattened.length;++s)v(r.flattened[s]),s<r.flattened.length-1&&u("push");u(a||"call "+i+", "+t)}else u("stringlit "+r.flattened[0].data)}(e);case g.ProcCall:return function(e){for(var t=e.data,n=t.proc,o=0,r=e.args;o<r.length;o++){var i=r[o];v(i),u("push")}var a=-1,s="";null!=t.ifaceIndex?(a=t.ifaceIndex,s="pxtrt::fetchMethodIface"):null!=t.virtualIndex&&(a=t.virtualIndex+2,s="pxtrt::fetchMethod"),s?(u("ldstack "+(e.args.length*p-1)),u("push"),u("ldconst "+a),u("call 0x20, "+s),u("callind")):u("callproc "+n.label())}(e);case g.SharedDef:return function(e){var t=e.args[0];if(k.U.assert(1<=t.totalUses),k.U.assert(0===t.currUses),t.currUses=1,r.push(t),1==t.totalUses)return v(t);v(t);for(var n=-1,o=0;o<d.length;++o)if(null==d[o]){n=o;break}n<0?(i&&(console.log(t,d),k.assert(!1,"missed tmp")),n=d.length,d.push(t)):d[n]=t,u("sttmp "+n*p)}(e);case g.Sequence:return e.args.forEach(v);default:return function(e){switch(e.exprKind){case g.NumberLiteral:return void(0===e.data?u("ldzero"):1===e.data?u("ldone"):u("ldconst "+(65535&e.data)));case g.PointerLiteral:return void u("ldconst "+e.data);case g.SharedRef:var t=e.args[0];k.U.assert(!!t.currUses),k.U.assert(t.currUses<t.totalUses),t.currUses++;var n=d.indexOf(t);return n<0&&(console.log(d,t),k.assert(!1)),u("ldtmp "+n*p),void b();case g.CellRef:u("ld"+y(e.data));var o=e.data;return void(o.isGlobal()&&(1==o.bitSize?u("sgnext"):2==o.bitSize&&u("clrhi")));default:throw k.oops()}}(e)}}function b(){for(var e=0;e<d.length;++e){var t=d[e];t&&t.currUses==t.totalUses&&(i||r.push(t),d[e]=null)}}}(t,e)+"\n"}),t.usedClassInfos.forEach(function(e){var t,n;r+=(t=e,n=o,k.vtableToAsm(t,n))}),k.U.iterMap(t.hexlits,function(e,t){r+=n.hex_literal(t,e)}),k.U.iterMap(t.strings,function(e,t){r+=n.string_literal(t,e)}),r+="\n; The end.\n",t.writeFile(k.BINARY_ASM,r);var e=k.assemble(o.target,t,r);if(e.src&&t.writeFile(k.BINARY_ASM,e.src),e.buf){for(var i=[],a=0;a<e.buf.length;a+=2)i.push(e.buf[a]|e.buf[a+1]<<8);var s=l.pxtc.encodeBase64(k.hex.patchHex(t,i,!1,!0)[0]);t.writeFile(pxt.outputName(k.target),s)}}}(ts||(ts={})),function(Ce){var xe;(function(S){var Q,e;(e=Q=S.DecompileParamKeys||(S.DecompileParamKeys={})).DecompileLiterals="decompileLiterals",e.TaggedTemplate="taggedTemplate",e.DecompileIndirectFixedInstances="decompileIndirectFixedInstances",S.FILE_TOO_LARGE_CODE=9266;var ee=Ce.SyntaxKind,te=1e3,c=97,u=122,ne=160,oe=120,re=480,ie=360,a=/^[^\f\n\r\t\v\u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]*$/,ae="math_number",se="math_integer",le="math_whole_number",ce="text",ue="logic_boolean",ge={"+":{type:"math_arithmetic",op:"ADD"},"-":{type:"math_arithmetic",op:"MINUS"},"/":{type:"math_arithmetic",op:"DIVIDE"},"*":{type:"math_arithmetic",op:"MULTIPLY"},"**":{type:"math_arithmetic",op:"POWER"},"%":{type:"math_modulo",leftName:"DIVIDEND",rightName:"DIVISOR"},"<":{type:"logic_compare",op:"LT"},"<=":{type:"logic_compare",op:"LTE"},">":{type:"logic_compare",op:"GT"},">=":{type:"logic_compare",op:"GTE"},"==":{type:"logic_compare",op:"EQ"},"===":{type:"logic_compare",op:"EQ"},"!=":{type:"logic_compare",op:"NEQ"},"!==":{type:"logic_compare",op:"NEQ"},"&&":{type:"logic_operation",op:"AND"},"||":{type:"logic_operation",op:"OR"}},pe=/^\s*\/\/\s*(.*)$/,de=/^\s*(?:(?:(?:\/\*\*?)|(?:\*))(?!\/))?\s*(.*?)(?:\*?\*\/)?$/,t=function(){function e(e){this.renames=e,this.renames.sort(function(e,t){return e.span.start-t.span.start})}return e.prototype.getRenamesInSpan=function(e,t){for(var n=[],o=0,r=this.renames;o<r.length;o++){var i=r[o];if(i.span.start>t)break;i.span.start>=e&&n.push(i)}return n},e.prototype.getRenameForPosition=function(e){for(var t=0,n=this.renames;t<n.length;t++){var o=n[t];if(o.span.start>e)return;if(o.span.start===e)return o}},e}();S.RenameMap=t;var _e,n,o=function(){function e(e){this.p=e}return e.prototype.getCompilationSettings=function(){var e=this.p.getCompilerOptions();return e.noLib=!0,e},e.prototype.getNewLine=function(){return"\n"},e.prototype.getScriptFileNames=function(){return this.p.getSourceFiles().map(function(e){return e.fileName})},e.prototype.getScriptVersion=function(e){return"0"},e.prototype.getScriptSnapshot=function(e){var t=this.p.getSourceFile(e);return{getLength:function(){return t.getFullText().length},getText:function(){return t.getFullText()},getChangeRange:function(){}}},e.prototype.getCurrentDirectory=function(){return"."},e.prototype.getDefaultLibFileName=function(e){return""},e.prototype.useCaseSensitiveFileNames=function(){return!0},e}();function fe(e,t,n,o){switch(void 0===n&&(n=!1),void 0===o&&(o=!1),e.kind){case ee.WhileStatement:case ee.IfStatement:case ee.Block:return;case ee.ExpressionStatement:return fe(e.expression,t,n,o);case ee.VariableStatement:return function(e,t){for(var n=0,o=e.declarationList.declarations;n<o.length;n++){var r=o[n],i=a(r,t);if(i)return i}}(e,t);case ee.CallExpression:return function(e,T,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var a=e.callInfo;if(!a)return xe.Util.lf("Function call not supported in the blocks");var E=T.attrs(a);if(t){if("Math.pow"==a.qName)return;if(pxt.Util.startsWith(a.qName,"Math.")){var o=a.qName.substring(5);if(Se(o))return}}else if(a.isExpression)return xe.Util.lf("No output expressions as statements");if(E.blockId===xe.PAUSE_UNTIL_TYPE){var r=e.arguments[0];if(1===e.arguments.length&&function(e){if(e.kind!==ee.FunctionExpression&&e.kind!==ee.ArrowFunction)return!1;var t=e;if(function(e){switch(e.kind){case ee.BinaryExpression:var t=e.operatorToken.kind;return t!=ee.PlusEqualsToken&&t!=ee.MinusEqualsToken&&t!=ee.EqualsToken;case ee.PrefixUnaryExpression:case ee.PostfixUnaryExpression:var n=e.operator;return n!=ee.PlusPlusToken&&n!=ee.MinusMinusToken;case ee.CallExpression:var o=e.callInfo;return xe.assert(!!o),o.isExpression;case ee.ParenthesizedExpression:case ee.NumericLiteral:case ee.StringLiteral:case ee.NoSubstitutionTemplateLiteral:case ee.TrueKeyword:case ee.FalseKeyword:case ee.NullKeyword:case ee.TaggedTemplateExpression:return!0;default:return!1}}(t.body))return!0;var n=t.body;if(1===n.statements.length){var o=be(n.statements[0]);if(o.kind===ee.ReturnStatement)return!0}return!1}(r))return;return xe.Util.lf("Predicates must be inline expressions that return a value")}var i=ke(a,E);if(i&&!E.handlerStatement&&!n)return xe.Util.lf("Events must be top level");if(!E.blockId||!E.block){var s=pxt.blocks.builtinFunctionInfo[a.qName];if(!s)return 0===e.arguments.length&&e.expression.kind===ee.Identifier?T.declaredFunctions[e.expression.text]?void 0:xe.Util.lf("Call statements must have a valid declared function"):xe.Util.lf("Function call not supported in the blocks");E.blockId=s.blockId}var l=Ee(a,T.blocks),c=T.blocks.apis.byQName[a.qName],u=pxt.blocks.compileInfo(c),g=u.parameters.length+(u.thisParameter?1:0);if(E.imageLiteral){if(1<a.args.length-g)return xe.Util.lf("Function call has more arguments than are supported by its block");var p=e.arguments[0];if(p.kind!=ee.StringLiteral&&p.kind!=ee.NoSubstitutionTemplateLiteral)return xe.Util.lf("Only string literals supported for image literals");var d=(p.text||"").replace(/\s+/g,""),_=5*E.imageLiteral;return 5*_!=d.length?xe.Util.lf("Invalid image pattern"):void 0}var f=a.args.length-g;if(0<f&&!function(){if(E.mutatePropertyEnum&&2===f&&2<=a.args.length){var e=a.args[a.args.length-2],t=a.args[a.args.length-1];if(e.kind===ee.ArrayLiteralExpression&&k(t)){var n=[],o=!e.elements.some(function(e){return e.kind!==ee.PropertyAccessExpression||e.expression.kind!==ee.Identifier||(n.push(e.name.text),e.expression.text!==E.mutatePropertyEnum)});if(o){var r=me(t);if(r){var i=r[0];return i.length===n.length&&!n.some(function(e){return-1===i.indexOf(e)})}}}}return!1}()){var h=f;if(i&&h--,E.defaultInstance&&h--,0<h)return xe.Util.lf("Function call has more arguments than are supported by its block")}if(u.parameters.length||i){var m,y=E.defaultInstance||!!u.thisParameter;if(l.forEach(function(e,t){m||y&&0===t||(y&&t--,m=function(e){var t=be(e.value),n=e.info,o=e.param;if(n.isEnum){if(k(t))return;if(t.kind===ee.CallExpression){var r=t.callInfo,i=T.attrs(r);if(r&&"TD_ID"===i.shim&&r.args&&1===r.args.length){var a=be(r.args[0]);if(k(a))return}}return xe.Util.lf("Enum arguments may only be literal property access expressions")}if(Te(t)&&(o.fieldEditor||o.shadowBlockId)){var s=!(!o.fieldOptions||!o.fieldOptions[Q.DecompileLiterals]);if(!s&&o.shadowBlockId){var l=T.blocks.blocksById[o.shadowBlockId];if(l&&l.parameters&&l.parameters.length){var c=l.parameters[0].name;s=!l.attributes.paramFieldEditorOptions||!l.attributes.paramFieldEditorOptions[c]||!!l.attributes.paramFieldEditorOptions[c][Q.DecompileLiterals]}else s=!0}if(!s)return xe.Util.lf("Field editor does not support literal arguments")}else if(t.kind===ee.TaggedTemplateExpression&&o.fieldEditor){var u=o.fieldOptions&&o.fieldOptions[Q.TaggedTemplate];if(!u)return xe.Util.lf("Tagged templates only supported in custom fields with param.fieldOptions.taggedTemplate set");var g=be(t.tag);if(g.kind!==ee.Identifier)return xe.Util.lf("Tagged template literals must use an identifier as the tag");var p=g.getText();if(p.trim()!=u.trim())return xe.Util.lf("Function only supports template literals with tag '{0}'",u);var d=t.template;if(d.kind!==ee.NoSubstitutionTemplateLiteral)return xe.Util.lf("Tagged template literals cannot have substitutions")}else if(t.kind===ee.ArrowFunction){var _=t;if(_.parameters.length)if("objectdestructuring"===E.mutate){var f=be(_.parameters[0]);if(f.kind===ee.Parameter&&f.name.kind!==ee.ObjectBindingPattern)return xe.Util.lf("Object destructuring mutation callbacks can only have destructuring patters as arguments")}else for(var h=0,m=_.parameters;h<m.length;h++){var y=m[h];if(y.name.kind!==ee.Identifier)return xe.Util.lf("Only identifiers allowed as function arguments")}}else if(T.blocks.apis.byQName[n.type]){var v=T.blocks.apis.byQName[n.type];if(v.attributes.fixedInstances){if(C(o))return;if(o.shadowBlockId){var b=T.blocks.blocksById[o.shadowBlockId];if(b){var l=pxt.blocks.compileInfo(b);if(l.parameters&&C(l.parameters[0]))return}}var r=t.callInfo;if(r&&T.attrs(r).fixedInstance)return;return xe.Util.lf("Arguments of a fixed instance type must be a reference to a fixed instance declaration")}}return;function k(e){if(e.kind===ee.PropertyAccessExpression){var t=e.expression;if(t.kind===ee.Identifier&&t.text===n.type)return!0}return!1}}(e))}),m)return m}if(c){var v=T.blocks.apis.byQName[c.namespace];if(v&&v.attributes.fixedInstances&&!v.attributes.decompileIndirectFixedInstances&&a.args.length){var b=a.args[0].callInfo;if(!b||!T.attrs(b).fixedInstance)return xe.Util.lf("Fixed instance APIs can only be called directly from the fixed instance")}}}(e,t,n,o);case ee.VariableDeclaration:return a(e,t);case ee.PostfixUnaryExpression:case ee.PrefixUnaryExpression:return(r=e).operand.kind!=ee.Identifier?xe.Util.lf("-- and ++ may only be used on an identifier"):r.operator!==ee.PlusPlusToken&&r.operator!==ee.MinusMinusToken?xe.Util.lf("Only ++ and -- supported as prefix or postfix unary operators in a statement"):void 0;case ee.FunctionExpression:case ee.ArrowFunction:return function(e,t){var n=!1;if(e.parameters.length){var o=ve(e)[0];if(o&&o.callInfo){var r=o.callInfo;n="objectdestructuring"===t.attrs(r).mutate?e.parameters[0].name.kind!==ee.ObjectBindingPattern:e.parameters.some(function(e){return e.name.kind!==ee.Identifier})}}if(n)return xe.Util.lf("Unsupported parameters in error function")}(e,t);case ee.BinaryExpression:return function(e,t){if(e.left.kind===ee.ElementAccessExpression){if(e.operatorToken.kind!==ee.EqualsToken)return xe.Util.lf("Element access expressions may only be assigned to using the equals operator")}else if(e.left.kind===ee.PropertyAccessExpression){if(e.operatorToken.kind!==ee.EqualsToken&&e.operatorToken.kind!==ee.PlusEqualsToken)return xe.Util.lf("Property access expressions may only be assigned to using the = and += operators")}else{if(e.left.kind!==ee.Identifier)return xe.Util.lf("This expression cannot be assigned to");switch(e.operatorToken.kind){case ee.EqualsToken:return ye(e.right,t);case ee.PlusEqualsToken:case ee.MinusEqualsToken:return;default:return xe.Util.lf("Unsupported operator token in statement {0}",ee[e.operatorToken.kind])}}}(e,t);case ee.ForStatement:return function(n){if(!n.initializer||!n.incrementor||!n.condition)return xe.Util.lf("for loops must have an initializer, incrementor, and condition");if(n.initializer.kind!==ee.VariableDeclarationList)return xe.Util.lf("only variable declarations are permitted in for loop initializers");var e=n.initializer;if(!e.declarations)return xe.Util.lf("for loop with out-of-scope variables not supported");if(1!=e.declarations.length)return xe.Util.lf("for loop with multiple variables not supported");var t=e.declarations[0];if(t.initializer.kind!==ee.NumericLiteral||"0"!==t.initializer.text)return xe.Util.lf("for loop initializers must be initialized to 0");var o=t.name.text;if(!function(e){if(n.incrementor.kind===ee.PostfixUnaryExpression||n.incrementor.kind===ee.PrefixUnaryExpression){var t=n.incrementor;if(t.operator===ee.PlusPlusToken&&t.operand.kind===ee.Identifier)return t.operand.text===e}return!1}(o))return xe.Util.lf("for loop incrementors may only increment the variable declared in the initializer");if(n.condition.kind!==ee.BinaryExpression)return xe.Util.lf("for loop conditionals must be binary comparison operations");var r=n.condition;return r.left.kind!==ee.Identifier||r.left.text!==o?xe.Util.lf("left side of for loop conditional must be the variable declared in the initializer"):r.operatorToken.kind!==ee.LessThanToken&&r.operatorToken.kind!==ee.LessThanEqualsToken?xe.Util.lf("for loop conditional operator must be either < or <="):void 0}(e);case ee.ForOfStatement:return function(e){if(e.initializer.kind!==ee.VariableDeclarationList)return xe.Util.lf("only variable declarations are permitted in for of loop initializers")}(e);case ee.FunctionDeclaration:return function(e,t){if(!t)return xe.Util.lf("Function declarations must be top level");if(0<e.parameters.length)return xe.Util.lf("Functions with parameters not supported in blocks");var n=!1;return Ce.forEachReturnStatement(e.body,function(e){e.expression&&(n=!0)}),n?xe.Util.lf("Function with return value not supported in blocks"):void 0}(e,o);case ee.DebuggerStatement:return}var r;return xe.Util.lf("Unsupported statement in block: {0}",ee[e.kind]);function a(e,t){var n;return e.name.kind!==ee.Identifier?n=xe.Util.lf("Variable declarations may not use binding patterns"):e.initializer?he(e)||(n=ye(e.initializer,t)):n=xe.Util.lf("Variable declarations must have an initializer"),n}}function he(e){if(e.initializer){if(e.initializer.kind===Ce.SyntaxKind.NullKeyword||e.initializer.kind===Ce.SyntaxKind.FalseKeyword||(r=e.initializer).kind===ee.ArrayLiteralExpression&&0===r.elements.length)return!0;if(Ce.isStringOrNumericLiteral(e.initializer)){var t=e.initializer.getText();return"0"===t||'""'===(o=t)||"''"===o||"``"===o}var n=e.initializer.callInfo;if(n&&n.isAutoCreate)return!0}var o,r;return!1}function me(e){if(1===e.parameters.length&&e.parameters[0].name.kind===ee.ObjectBindingPattern){var t=e.parameters[0].name.elements,o={};return[t.map(function(e){if(r(e.propertyName)&&r(e.name)){var t=e.name.text;if(e.propertyName){var n=e.propertyName.text;return o[n]=t,n}return t}return""}),o]}return;function r(e){return!e||e.kind===ee.Identifier}}function ye(e,t){switch(e.kind){case ee.NumericLiteral:case ee.TrueKeyword:case ee.FalseKeyword:case ee.ExpressionStatement:case ee.ArrayLiteralExpression:case ee.ElementAccessExpression:return;case ee.ParenthesizedExpression:return ye(e.expression,t);case ee.StringLiteral:case ee.FirstTemplateToken:case ee.NoSubstitutionTemplateLiteral:return i=e.text,a.test(i)?void 0:xe.Util.lf("Only whitespace character allowed in string literals is space");case ee.Identifier:return(r=e)&&r.kind===ee.Identifier&&"undefined"===r.text?xe.Util.lf("Undefined is not supported in blocks"):void 0;case ee.BinaryExpression:var n=e.operatorToken.getText();return ge[n]?void 0:xe.Util.lf("Could not find operator {0}",n);case ee.PrefixUnaryExpression:var o=e.operator;return o===ee.MinusToken||o===ee.PlusToken||o===ee.ExclamationToken?void 0:xe.Util.lf("Unsupported prefix unary operator{0}",o);case ee.PropertyAccessExpression:return function(e,t){var n=e.callInfo;if(n){var o=t.attrs(n);if(o.blockIdentity||"lists_length"===o.blockId||"text_length"===o.blockId)return;if(o.blockCombine)return ye(e.expression,t);if(n.decl.kind===ee.EnumMember){var r=ve(e),i=r[0],a=r[1],s=!0;if(i){var l=i.callInfo;if(l&&l.args){var c=t.blocks.apis.byQName[l.qName],u=c.kind==xe.SymbolKind.Method||c.kind==xe.SymbolKind.Property;c&&l.args.forEach(function(e,t){if(e===a){var n=c.parameters[u?t-1:t];n.isEnum&&(s=!1)}})}}return s?xe.Util.lf("Enum value without a corresponding block"):void 0}if(o.fixedInstance&&e.parent)if(e.parent.parent&&e.parent.kind===ee.PropertyAccessExpression&&e.parent.parent.kind===ee.CallExpression){var g=e.parent.parent;if(g.expression===e.parent)return}else if(e.parent.kind===ee.CallExpression&&e.parent.expression!==e)return}return xe.Util.lf("No call info found")}(e,t);case ee.CallExpression:return fe(e,t,!0);case ee.TaggedTemplateExpression:return function(e,t){var n=e.callInfo;if(!n)return xe.Util.lf("Invalid tagged template");var o=t.attrs(n);if(!o.blockIdentity)return xe.Util.lf("Tagged template does not have blockIdentity set");var r=t.blocks.apis.byQName[o.blockIdentity];return r?1!==pxt.blocks.compileInfo(r).parameters.length?xe.Util.lf("Tagged template functions must have 1 argument"):void 0:xe.Util.lf("Could not find blockIdentity for tagged template")}(e,t)}var r,i;return xe.Util.lf("Unsupported syntax kind for output expression block: {0}",ee[e.kind])}function ve(e){return e.parent?e.parent.kind===ee.ParenthesizedExpression?ve(e.parent):[e.parent,e]:[void 0,e]}function be(e){for(;e.kind===ee.ParenthesizedExpression;)e=e.expression;return e}function ke(e,t){return t.blockId!==xe.PAUSE_UNTIL_TYPE&&(e.decl.parameters,e.args.some(function(e,t){return e&&k(e)}))}function Te(e){if(!e)return!1;switch(e.kind){case ee.ParenthesizedExpression:return Te(e.expression);case ee.NumericLiteral:case ee.StringLiteral:case ee.NoSubstitutionTemplateLiteral:case ee.TrueKeyword:case ee.FalseKeyword:return!0;case ee.PrefixUnaryExpression:var t=e;return(t.operator===ee.PlusToken||t.operator===ee.MinusToken)&&Te(t.operand);default:return!1}}function k(e){return e.kind===ee.ArrowFunction||e.kind===ee.FunctionExpression}function Ee(e,t){var n=[],o=t.apis.byQName[e.qName];if(o){var r=t.apis.byQName[e.qName].attributes,i=pxt.blocks.compileInfo(o),a=(pxt.blocks.builtinFunctionInfo[e.qName],r.imageLiteral?1:0);i.thisParameter?n.push({value:be(e.args[0]),info:null,param:i.thisParameter}):r.defaultInstance&&n.push({value:be(e.args[0]),info:o.parameters[0],param:{definitionName:"__instance__",actualName:"this"}});var s=!(!i.thisParameter&&!r.defaultInstance);s&&a++;for(var l=a;l<e.args.length;l++)n.push({value:be(e.args[l]),info:o.parameters[s?l-1:l],param:i.parameters[l-a]})}return n}function C(e){return e&&e.fieldOptions&&e.fieldOptions[Q.DecompileIndirectFixedInstances]}function Se(e){return-1!==pxt.blocks.MATH_FUNCTIONS.unary.indexOf(e)||-1!==pxt.blocks.MATH_FUNCTIONS.binary.indexOf(e)}S.buildRenameMap=function(e,i){var a,s=Ce.createLanguageService(new o(e)),l=[];return a={},function r(e){Ce.forEachChild(e,function(e){if(e.kind===ee.VariableDeclaration&&e.name.kind===ee.Identifier){var t=e.name.getText();if(a[t]){var n=function(e){if(1===e.length){var t=e.charCodeAt(0);if(c<=t&&t<=u)for(var n=t-c,o=1;o<26;o++){var r=String.fromCharCode(c+(n+o)%26);if(!a[r])return a[r]=!0,r}}for(var o=2;;o++){var i=e+o;if(!a[i])return a[i]=!0,i}}(t),o=s.findRenameLocations(i.fileName,e.name.pos+1,!1,!1);o&&o.forEach(function(e){l.push({name:n,diff:n.length-t.length,span:e.textSpan})})}else a[t]=!0}r(e)})}(i),l.length?new t(l):void 0},(n=_e||(_e={}))[n.None=0]="None",n[n.InBlocksOnly=1]="InBlocksOnly",n[n.InTextBlocks=2]="InTextBlocks",S.decompileToBlocks=function(N,C,u,n){var e,t,o=0,r=C.statements,i={blocksInfo:N,outfiles:{},diagnostics:[],success:!0,times:{}},w={blocks:N,declaredFunctions:{},attrs:R},x=C.getFullText(),a="",p={},A=[],D=[],B=(e=0,function(){return""+e++});Ce.forEachChild(C,function(e){e.kind!==ee.FunctionDeclaration||fe(e,w,!1,!0)||(w.declaredFunctions[$(e.name)]=!0)});try{t=Z(r,void 0,!0,void 0,!u.snippetMode)}catch(e){if(!e.programTooLarge)throw e;i.success=!1,i.diagnostics=xe.patchUpDiagnostics([{file:C,start:C.getFullStart(),length:C.getFullWidth(),messageText:e.message,category:Ce.DiagnosticCategory.Error,code:S.FILE_TOO_LARGE_CODE}])}return t&&_(t),A.forEach(function(e){!function(e){var t=0,n=e.text.split("\n");n.forEach(function(e){return t=Math.max(t,e.length)});var o=Math.max(Math.min(10*t,re),ne);s('<comment h="'+Math.max(Math.min(40*n.length,ie),oe)+'" w="'+o+'" data="'+xe.U.htmlEscape(e.refId)+'">'),s(xe.U.htmlEscape(e.text)),s("</comment>")}(e)}),i.outfiles[C.fileName.replace(/(\.blocks)?\.\w*$/i,"")+".blocks"]='<xml xmlns="http://www.w3.org/1999/xhtml">\n'+a+"</xml>",i;function s(e,t){void 0===t&&(t="\n"),a+=e+t}function O(e,t){var n=t||'Language feature "'+e.getFullText().trim()+'"" not supported in blocks',o=xe.patchUpDiagnostics([{file:C,start:e.getFullStart(),length:e.getFullWidth(),messageText:n,category:Ce.DiagnosticCategory.Error,code:1001}]);pxt.debug("decompilation error: "+n),xe.U.pushRange(i.diagnostics,o),i.success=!1}function R(e){var t=N.apis.byQName[e.qName];if(t)return t.attributes}function L(){if(te<++o){var e=new Error(xe.Util.lf("Could not decompile because the script is too large"));throw e.programTooLarge=!0,e}}function P(e){return L(),{kind:"statement",type:e}}function M(e){return L(),{kind:"expr",type:e}}function F(e,t,n){return n&&"expr"===t.kind&&t.type!==n&&L(),{kind:"value",name:e,value:t,shadowType:n}}function d(e){if(e.expression.kind==ee.CallExpression){var t=e.expression.callInfo;if(!t)return O(e),!1;var n=R(t);return n.blockId&&!n.handlerStatement&&!t.isExpression&&ke(t,n)}return!1}function _(e){var t;e&&(t=e.type,s('<block type="'+xe.U.htmlEscape(t)+'">'),l(e),void 0!==e.data&&s("<data>"+xe.U.htmlEscape(e.data)+"</data>"),e.handlers&&e.handlers.forEach(f),e.next&&(s("<next>"),_(e.next),s("</next>")),void 0!==e.comment&&s('<comment pinned="false">'+xe.U.htmlEscape(e.comment)+"</comment>"),s("</block>"))}function l(e){if(e.mutation){for(var t in s("<mutation ",""),e.mutation)s(t+'="'+e.mutation[t]+'" ',"");s("/>")}e.fields&&e.fields.forEach(g),e.inputs&&e.inputs.forEach(c)}function c(e){s('<value name="'+e.name+'">');var t=!1;if("expr"===e.value.kind){var n=e.value;if(!(t=n.type===e.shadowType))switch(n.type){case"math_number":case"math_integer":case"math_whole_number":case"logic_boolean":case"text":t=!e.shadowType}}if(t)h(e.value,!0);else{if(void 0!==e.shadowType)switch(e.shadowType){case ae:case se:case le:s('<shadow type="'+e.shadowType+'"><field name="NUM">0</field></shadow>');break;case ue:s('<shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow>');break;case ce:s('<shadow type="text"><field name="TEXT"></field></shadow>');break;default:s('<shadow type="'+e.shadowType+'"/>')}h(e.value)}s("</value>")}function g(e){s('<field name="'+xe.U.htmlEscape(e.name)+'">'+xe.U.htmlEscape(e.value.toString())+"</field>")}function f(e){s('<statement name="'+xe.U.htmlEscape(e.name)+'">'),_(e.statement),s("</statement>")}function h(e,t){if(void 0===t&&(t=!1),"text"===e.kind)s((n=e).value);else{var n=e,o=t||n.isShadow?"shadow":"block";s("<"+o+' type="'+xe.U.htmlEscape(n.type)+'">'),l(n),s("</"+o+">")}}function U(e){if(ye(e,w))return d=m((p=e).getFullText(),p.getFullStart(),p.getEnd()).trim(),E(p),V(xe.TS_OUTPUT_TYPE,"EXPRESSION",d);switch(e.kind){case ee.ExpressionStatement:case ee.ParenthesizedExpression:return U(e.expression);case ee.Identifier:return T(g=$(e),_e.InBlocksOnly),V("variables_get","VAR",g);case ee.StringLiteral:case ee.FirstTemplateToken:case ee.NoSubstitutionTemplateLiteral:return y(e.text);case ee.NumericLiteral:return G(e.text);case ee.TrueKeyword:return v(!0);case ee.FalseKeyword:return v(!1);case ee.BinaryExpression:return function(e){var t=e.operatorToken.getText(),n=ge[t];if(l(e)){var o=[];!function e(t,n){l(t)?(e(t.left,n),e(t.right,n)):n.push(t)}(e,o);var r=M("text_join");r.mutation={items:o.length.toString()},r.inputs=[];for(var i=0;i<o.length;i++)r.inputs.push(H("ADD"+i,o[i],ce));return r}var a=M(n.type);a.fields=[],a.inputs=[],n.op&&a.fields.push(K("OP",n.op));var s="&&"===t||"||"===t?ue:ae;return a.inputs.push(H(n.leftName||"A",e.left,s)),a.inputs.push(H(n.rightName||"B",e.right,s)),a;function l(e){if(e.kind===ee.BinaryExpression){var t=e;if("+"===t.operatorToken.getText()){var n=e.exprInfo;return!!n}}return!1}}(e);case ee.PrefixUnaryExpression:return function(e){switch(e.operator){case ee.ExclamationToken:var t=M("logic_negate");return t.inputs=[H("BOOL",e.operand,ue)],t;case ee.PlusToken:return U(e.operand);case ee.MinusToken:return e.operand.kind==ee.NumericLiteral?G("-"+e.operand.text):I(e.operand);default:O(e)}}(e);case ee.PropertyAccessExpression:return z(e);case ee.ArrayLiteralExpression:return c=e,(u=M("lists_create_with")).inputs=c.elements.map(function(e,t){return H("ADD"+t,e)}),u.mutation={items:c.elements.length.toString()},u;case ee.ElementAccessExpression:return s=e,(l=M("lists_index_get")).inputs=[H("LIST",s.expression),H("INDEX",s.argumentExpression,ae)],l;case ee.TaggedTemplateExpression:return n=(t=e).callInfo,o=w.blocks.apis.byQName[R(n).blockIdentity],r=pxt.blocks.compileInfo(o),i=M(o.attributes.blockId),a=t.template.text,i.fields=[K(r.parameters[0].actualName,a)],i;case ee.CallExpression:return j(e,void 0,void 0,!0);default:O(e,xe.Util.lf("Unsupported syntax kind for output expression block: {0}",ee[e.kind]))}var t,n,o,r,i,a,s,l,c,u,g,p,d}function m(o,r,e){if(n){var t=n.getRenamesInSpan(r,e);if(t.length){var i=0;t.forEach(function(e){var t=e.span.start+i-r,n=t+e.span.length;i+=e.diff,o=o.slice(0,t)+e.name+o.slice(n)})}}return o}function H(e,t,n){var o;if("expr"==(o="number"==typeof t?G(t.toString()):"boolean"==typeof t?v(t):"string"==typeof t?y(t):U(t)).kind&&"math_number"==o.type){var r=o.fields[0].value;"math_integer"==n&&r%1==0&&(o.type="math_integer"),"math_whole_number"==n&&r%1==0&&0<r&&(o.type="math_whole_number")}return F(e,o,n)}function G(e){return V("math_number","NUM",e)}function y(e){return V("text","TEXT",e)}function v(e){return V("logic_boolean","BOOL",e?"TRUE":"FALSE")}function V(e,t,n,o){var r=M(e);return r.fields=[K(t,n)],r.isShadow=o,r}function W(e,t){return F(e,V("variables_get_reporter","VAR",t,!0),"variables_get_reporter")}function K(e,t){return{kind:"field",name:e,value:t}}function I(e){var t=M("math_arithmetic");return t.inputs=[H("A",0,ae),H("B",e,ae)],t.fields=[K("OP","MINUS")],t}function z(e,t,n){void 0===t&&(t=!1);var o=e.callInfo;if(o){var r=R(o);if(r.blockCombine)return b(e,null,"@get@");if("lists_length"===r.blockId||"text_length"===r.blockId){var i=M(xe.U.htmlEscape(r.blockId));return i.inputs=[H("VALUE",e.expression)],i}var a=xe.U.htmlEscape(r.blockId||o.qName),s=ve(e)[0],l=s&&s.callInfo;if(t||!n&&!r.blockIdentity||l&&l.qName===r.blockIdentity)return{kind:"text",value:a};r.enumval&&l&&r.useEnumVal&&(a=r.enumval);var c=n?N.blocksById[n]:N.apis.byQName[r.blockIdentity],u=/%([a-zA-Z0-9_]+)/.exec(c.attributes.block),g=M(xe.U.htmlEscape(c.attributes.blockId));return g.fields=[{kind:"field",name:xe.U.htmlEscape(u[1]),value:a}],g}O(e)}function j(e,t,n,o,r){void 0===o&&(o=!1),void 0===r&&(r=!1);var i,a,s,l,c,u,g,p,d,_,f,h,m,y,v,b=e,k=fe(b,w,o,r);if(k)i=Y(b,void 0,k);else switch(b.kind){case ee.Block:return Z(b.statements,t,r);case ee.ExpressionStatement:return j(b.expression,t,n||b,o,r);case ee.VariableStatement:return Z(b.declarationList.declarations,t,!1,n||b);case ee.FunctionExpression:case ee.ArrowFunction:return m=t,j(b.body,m);case ee.BinaryExpression:i=function(e){switch(e.left.text,e.operatorToken.kind){case ee.EqualsToken:return e.left.kind===ee.Identifier?X(e.left,e.right):e.left.kind==ee.PropertyAccessExpression?J(e.left,e.right,"@set@"):(n=e.left,o=e.right,(r=P("lists_index_set")).inputs=[H("LIST",n.expression),H("INDEX",n.argumentExpression,ae),H("VALUE",o)],r);case ee.PlusEqualsToken:return e.left.kind==ee.PropertyAccessExpression?J(e.left,e.right,"@change@"):X(e.left,e.right,!0);case ee.MinusEqualsToken:var t=P("variables_change");return L(),t.inputs=[F("VALUE",I(e.right),ae)],t.fields=[K("VAR",$(e.left))],t;default:return void O(e,xe.Util.lf("Unsupported operator token in statement {0}",ee[e.operatorToken.kind]))}var n,o,r}(b);break;case ee.PostfixUnaryExpression:case ee.PrefixUnaryExpression:i=function(e){var t=e.operator===ee.PlusPlusToken;if(t||e.operator===ee.MinusMinusToken)return X(e.operand,t?1:-1,!0);O(e)}(b);break;case ee.VariableDeclaration:var T=b;if(he(T))return h=T,D.push([$(h.name),h]),S(n||b),E();i=function(e){if((t=e).name.kind!==ee.Identifier?(O(t,xe.Util.lf("Variable declarations may not use binding patterns")),0):t.initializer||(O(t,xe.Util.lf("Variable declarations must have an initializer")),0))return X(e.name,e.initializer);var t}(b);break;case ee.WhileStatement:_=b,(f=P("device_while")).inputs=[H("COND",_.expression,ue)],f.handlers=[{name:"DO",statement:j(_.statement)}],i=f;break;case ee.IfStatement:y=function e(t){var n={ifStatements:[{expression:t.expression,thenStatement:t.thenStatement}],elseStatement:t.elseStatement};if(t.elseStatement&&t.elseStatement.kind==ee.IfStatement){var o=e(t.elseStatement);n.ifStatements=n.ifStatements.concat(o.ifStatements),n.elseStatement=o.elseStatement}return n}(b),(v=P("controls_if")).mutation={elseif:(y.ifStatements.length-1).toString(),else:y.elseStatement?"1":"0"},v.inputs=[],v.handlers=[],y.ifStatements.forEach(function(e,t){v.inputs.push(H("IF"+t,e.expression,ue)),v.handlers.push({name:"DO"+t,statement:j(e.thenStatement)})}),y.elseStatement&&v.handlers.push({name:"ELSE",statement:j(y.elseStatement)}),i=v;break;case ee.ForStatement:i=function(e){var t,n=e.initializer,o=(n.declarations[0].name.text,e.condition),r=$(n.declarations[0].name);if(o.operatorToken.kind!==ee.LessThanToken||function e(t){return t.kind===ee.Identifier&&$(t)===r||Ce.forEachChild(t,e)}(e.statement))if((t=P("pxt_controls_for")).fields=[],t.inputs=[],t.handlers=[],t.inputs=[W("VAR",r)],o.operatorToken.kind===ee.LessThanToken){var i=M("math_arithmetic");i.fields=[K("OP","MINUS")],i.inputs=[H("A",o.right,ae),H("B",1,ae)],L(),t.inputs.push(F("TO",i,le))}else o.operatorToken.kind===ee.LessThanEqualsToken&&t.inputs.push(H("TO",o.right,le));else(t=P("controls_repeat_ext")).fields=[],t.inputs=[H("TIMES",o.right,le)],t.handlers=[];return t.handlers.push({name:"DO",statement:j(e.statement)}),t}(b);break;case ee.ForOfStatement:(g=(u=b).initializer).declarations[0].name.text,p=$(g.declarations[0].name),(d=P("controls_for_of")).inputs=[H("LIST",u.expression)],d.fields=[K("VAR",p)],d.handlers=[{name:"DO",statement:j(u.statement)}],i=d;break;case ee.FunctionDeclaration:s=$((a=b).name),l=j(a.body),(c=P("procedures_defnoreturn")).fields=[K("NAME",s)],c.handlers=[{name:"STACK",statement:l}],i=c;break;case ee.CallExpression:i=function(e,t){var S=e.callInfo,C=R(S);if("Math.pow"==S.qName){var n=M("math_arithmetic");return n.inputs=[F("A",U(e.arguments[0]),ae),F("B",U(e.arguments[1]),ae)],n.fields=[K("OP","POWER")],n}if(pxt.Util.startsWith(S.qName,"Math.")){var o=S.qName.substring(5);if(Se(o)){var r=M("math_js_op");return r.inputs=S.args.map(function(e,t){return F("ARG"+t,U(e),"math_number")}),r.fields=[K("OP",o)],r.mutation={"op-type":2==S.args.length?"binary":"unary"},r}}if(C.blockId===xe.PAUSE_UNTIL_TYPE){var i=P(xe.PAUSE_UNTIL_TYPE),a=e.arguments[0],s=void 0;return s=a.body.kind===ee.Block?a.body.statements[0].expression:a.body,i.inputs=[F("PREDICATE",U(s),"logic_boolean")],i}if(!C.blockId||!C.block){var l=pxt.blocks.builtinFunctionInfo[S.qName];if(!l){var c=$(e.expression);if(w.declaredFunctions[c]){var u=P("procedures_callnoreturn");return u.mutation={name:c},u}return Y(e)}C.blockId=l.blockId}if(C.imageLiteral)return function(e,t){var n=e.arguments[0];if(n.kind==ee.StringLiteral||n.kind==ee.NoSubstitutionTemplateLiteral){var o=R(t),r=P(o.blockId);r.fields=[];var i=(n.text||"").replace(/\s+/g,""),a=5*o.imageLiteral;if(5*a==i.length){for(var s="",l=0;l<5;++l){for(var c=0;c<a;++c)s+=/[#*1]/.test(i[l*a+c])?"#":".";s+="\n"}return r.fields.push(K("LEDS","`"+s+"`")),r}O(e,xe.Util.lf("Invalid image pattern"))}else O(e)}(e,S);Ce.isFunctionLike(S.decl);var g=Ee(S,w.blocks),p=w.blocks.apis.byQName[S.qName],x=pxt.blocks.compileInfo(p);L();var A={kind:t?"expr":"statement",type:C.blockId},D=function(e){return(A.inputs||(A.inputs=[])).push(e)},B=function(e){return(A.fields||(A.fields=[])).push(e)};"Math.max"==S.qName&&B({kind:"field",name:"op",value:"max"});var I=0;return g.forEach(function(e,t){var n,o=e.value,r=e.param,i=e.info;if(0===t&&C.defaultInstance){if(o.getText()===C.defaultInstance)return;A.mutation={showing:"true"}}if(!C.mutatePropertyEnum||t!==S.args.length-2){var a;if(r&&r.isOptional&&++I,r&&r.shadowBlockId&&(a=N.blocksById[r.shadowBlockId]),o.kind===ee.CallExpression){var s=o.callInfo;s&&"TD_ID"===R(s).shim&&(o=be(s.args[0]))}switch(o.kind){case ee.FunctionExpression:case ee.ArrowFunction:var l=function(e){var t=me(e);if(t)return{callbackproperties:t[0].join(","),renamemap:xe.Util.htmlEscape(JSON.stringify(t[1]))}}(o);if(l)A.mutation=l;else{var c=o,u=N.blocksById[C.blockId].parameters[x.thisParameter?t-1:t];if(c.parameters.length&&(C.optionalVariableArgs?(A.mutation={numargs:c.parameters.length.toString()},c.parameters.forEach(function(e,t){A.mutation["arg"+t]=e.name.text})):c.parameters.forEach(function(e,t){var n=u.handlerParameters[t];C.draggableParameters?D(W("HANDLER_DRAG_PARAM_"+n.name,e.name.text)):B(K("HANDLER_"+n.name,e.name.text))})),C.draggableParameters&&c.parameters.length<u.handlerParameters.length)for(var g=c.parameters.length;g<u.handlerParameters.length;g++){var p=u.handlerParameters[g];D(W("HANDLER_DRAG_PARAM_"+p.name,p.name))}}(A.handlers||(A.handlers=[])).push({name:"HANDLER",statement:j(o)});break;case ee.PropertyAccessExpression:var d=o.callInfo,_=xe.U.htmlEscape(r.definitionName),f=R(d);a&&"TD_ID"===a.attributes.shim?D(F(_,z(o,!1,r.shadowBlockId),r.shadowBlockId)):i&&i.isEnum||d&&(f.fixedInstance||f.blockIdentity===S.qName)?B(K(_,z(o,!0).value)):D(H(_,o,r.shadowBlockId));break;case ee.BinaryExpression:if(r&&r.shadowOptions&&r.shadowOptions.toString){var h=o;if(h.operatorToken.kind===ee.PlusToken&&((n=h.left).kind===ee.StringLiteral||n.kind===ee.NoSubstitutionTemplateLiteral)&&""===n.text){D(H(xe.U.htmlEscape(r.definitionName),h.right,r.shadowBlockId||"text"));break}}D(H(xe.U.htmlEscape(r.definitionName),o,r.shadowBlockId));break;default:var m=void 0,y=xe.U.htmlEscape(r.definitionName),v=!0;if("Math.random"==S.qName)m=F(y,function(e){switch(e.kind){case ee.NumericLiteral:var t=e;return G((parseInt(t.text)-1).toString());case ee.BinaryExpression:var n=e;if(n.operatorToken.kind==ee.PlusToken&&"1"==n.right.text)return L(),U(n.left);default:return U(e)}}(o),ae),v=!1;else if(Te(o)){var b="text"==r.fieldEditor?o.text:o.getText(),k=r.shadowBlockId&&!function(e){switch(e){case ae:case se:case le:case ce:case ue:return!0;default:return!1}}(r.shadowBlockId);if(q(r)&&r.fieldOptions.onParentBlock)return void B(K(y,b));if(k){var T=function(e){if(N.blocksById[e]){var t=pxt.blocks.compileInfo(N.blocksById[e]);if(!t.thisParameter&&1===t.parameters.length)return t.parameters[0]}}(r.shadowBlockId);if(T&&q(T)){var E=V(r.shadowBlockId,T.definitionName,b,!0);r.shadowOptions&&(E.mutation={customfield:xe.Util.htmlEscape(JSON.stringify(r.shadowOptions))}),m=F(y,E,r.shadowBlockId),v=!1}}}else if(o.kind===ee.TaggedTemplateExpression&&r.fieldOptions&&r.fieldOptions[Q.TaggedTemplate])return void B(K(y,xe.Util.htmlEscape(o.getText())));v&&(m=H(y,o,r.shadowBlockId)),D(m)}}}),I&&(A.mutation||(A.mutation={}),A.mutation._expanded=I.toString()),A}(b,o);break;case ee.DebuggerStatement:i=P(xe.TS_DEBUGGER_TYPE);break;default:return void O(b,t?xe.Util.lf("Unsupported statement in block: {0}",ee[b.kind]):xe.Util.lf("Statement kind unsupported in blocks: {0}",ee[b.kind]))}return i&&(i.next=E(),i.next&&(i.next.prev=i)),S(n||b),i;function E(){if(t&&t.length)return j(t.shift(),t,void 0,!1,r)}function S(e){var t=Ce.getLeadingCommentRangesOfNode(e,C);if(t){var n=[],o=function(e,t,n){for(var a="",s="",o=function e(t){var n=ve(t)[0];return!n||n.kind==ee.SourceFile||(n.kind==ee.ExpressionStatement?e(n):n.kind==ee.VariableDeclarationList&&e(n.parent))}(t),r=0,i=e;r<i.length;r++){var l=i[r],c=x.substr(l.pos,l.end-l.pos);if(c&&(c=c.replace(/\r\n/g,"\n")),l.kind===Ce.SyntaxKind.SingleLineCommentTrivia)d(c,1,3,pe);else if(l.kind===Ce.SyntaxKind.MultiLineCommentTrivia&&o){for(var u=c.split("\n"),g=0;g<u.length;g++)d(u[g],g,u.length,de);s&&(a+=s);var p=B();n&&n.push(p),A.push({text:a,refId:p}),s=a=""}else for(var u=c.split("\n"),g=0;g<u.length;g++)d(u[g],g,u.length,de)}return(a+=s).trim();function d(e,t,n,o){var r=o.exec(e);if(r){var i=r[1].trim();if(i===xe.ON_START_COMMENT||i===xe.HANDLER_COMMENT)return;i?s+=s?" "+i:i:t&&t<n-1&&(a+=s+"\n",s="")}}}(t,b,n);i&&(n.length&&(i.data=n.join(";")),o&&i&&(i.comment=o))}}}function Y(e,t,n){u.errorOnGreyBlocks&&O(e);var o=P(xe.TS_STATEMENT_TYPE);o.mutation={},E(e);var r=e.getText();r=m(r,e.getStart(),e.getEnd()),t&&(r=t+r);var i=[];if(e.kind===ee.VariableStatement)for(var a=0,s=e.declarationList.declarations;a<s.length;a++){var l=s[a];i.push($(l.name))}else e.kind===ee.VariableDeclaration&&i.push($(e.name));i.length&&(o.mutation.declaredvars=i.join(","));var c=r.split("\n");return o.mutation.numlines=c.length.toString(),n&&u.includeGreyBlockMessages&&(o.mutation.error=xe.U.htmlEscape(n)),c.forEach(function(e,t){o.mutation["line"+t]=xe.U.htmlEscape(e)}),o}function X(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var r=$(e);T(r,_e.InBlocksOnly);var i=P(n?"variables_change":"variables_set");return i.inputs=[H("VALUE",t,ae)],i.fields=[K("VAR",r)],i}function J(e,t,n){return b(e,t,n)}function b(e,t,n){var o=e.callInfo,r=w.blocks.apis.byQName[o?o.qName:""];if(r&&r.attributes.blockCombine){var i=r.namespace+"."+r.retType+"."+n,a=w.blocks.blocks.find(function(e){return e.qName==i}),s=t?P(a.attributes.blockId):M(a.attributes.blockId),l=a.attributes._def.parameters;return s.inputs=[H(l[0].name,e.expression)],s.fields=[K(l[1].name,o.qName)],t&&s.inputs.push(H(l[2].name,t)),s}O(e)}function q(e){return e&&e.fieldOptions&&e.fieldOptions[Q.DecompileLiterals]}function Z(e,t,n,o,r){void 0===n&&(n=!1),void 0===r&&(r=!1);for(var i=[],a=t||[],s=e.length-1;0<=s;s--){var l=e[s];(l.kind===ee.FunctionDeclaration||l.kind==ee.ExpressionStatement&&d(l))&&!fe(l,w,!1,n)?i.unshift(l):a.unshift(l)}if(i.map(function(e){return j(e,void 0,void 0,!1,n)}).forEach(_),a.length){var c=j(a.shift(),a,o,!1,n);if(r){var u=c;if(D.forEach(function(e){var t,n=e[0],o=e[1];p[n]!==_e.InBlocksOnly&&(o.initializer,(t=p[n]===_e.InTextBlocks?Y(o,"let "):X(o.name,o.initializer,!1,!0)).next=u,u=t)}),u){var g=P(Ce.pxtc.ON_START_TYPE);return g.handlers=[{name:"HANDLER",statement:u}],g}k()}return c}r&&k()}function k(){u.alwaysEmitOnStart&&s('<block type="'+Ce.pxtc.ON_START_TYPE+'"></block>')}function T(e,t){p[e]!==_e.InTextBlocks&&(p[e]=t)}function E(e){Ce.forEachChild(e,function(e){e.kind===ee.Identifier&&T($(e),_e.InTextBlocks),E(e)})}function $(e){if(n){var t=n.getRenameForPosition(e.getStart());if(t)return t.name}return e.text}}})((xe=Ce.pxtc||(Ce.pxtc={})).decompiler||(xe.decompiler={}))}(ts||(ts={})),function(e){var P;(function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.addEnc("$r0","R0-7",function(e){return t.inrange(7,e,e)}),t.addEnc("$r1","R0-7",function(e){return t.inrange(7,e,e<<3)}),t.addEnc("$r2","R0-15",function(e){return t.inrange(15,e,7&e|(8&e)<<4)}),t.addEnc("$r3","R0-15",function(e){return t.inrange(15,e,e<<3)}),t.addEnc("$r4","R0-7",function(e){return t.inrange(7,e,e<<6)}),t.addEnc("$r5","R0-7",function(e){return t.inrange(7,e,e<<8)}),t.addEnc("$r01","R0-7",function(e){return t.inrange(7,e,e|e<<3)}),t.addEnc("$i0","#0-255",function(e){return t.inrange(255,e,e)}),t.addEnc("$i1","#0-1020",function(e){return t.inrange(255,e/4,e>>2)}),t.addEnc("$i2","#0-510",function(e){return t.inrange(127,e/4,e>>2)}),t.addEnc("$i3","#0-7",function(e){return t.inrange(7,e,e<<6)}),t.addEnc("$i4","#0-31",function(e){return t.inrange(31,e,e<<6)}),t.addEnc("$i5","#0-124",function(e){return t.inrange(31,e/4,e>>2<<6)}),t.addEnc("$i6","#1-32",function(e){return 0==e?null:32==e?0:t.inrange(31,e,e<<6)}),t.addEnc("$i7","#0-62",function(e){return t.inrange(31,e/2,e>>1<<6)}),t.addEnc("$i32","#0-2^32",function(e){return 1}),t.addEnc("$rl0","{R0-7,...}",function(e){return t.inrange(255,e,e)}),t.addEnc("$rl1","{LR,R0-7,...}",function(e){return 16384&e?t.inrange(255,-16385&e,256|255&e):t.inrange(255,e,e)}),t.addEnc("$rl2","{PC,R0-7,...}",function(e){return 32768&e?t.inrange(255,-32769&e,256|255&e):t.inrange(255,e,e)}),t.addEnc("$la","LABEL",function(e){return t.inrange(255,e/4,e>>2)}).isWordAligned=!0,t.addEnc("$lb","LABEL",function(e){return t.inrangeSigned(127,e/2,e>>1)}),t.addEnc("$lb11","LABEL",function(e){return t.inrangeSigned(1023,e/2,e>>1)}),t.addInst("adcs  $r0, $r1",16704,65472),t.addInst("add   $r2, $r3",17408,65280),t.addInst("add   $r5, pc, $i1",40960,63488),t.addInst("add   $r5, sp, $i1",43008,63488),t.addInst("add   sp, $i2",45056,65408).canBeShared=!0,t.addInst("adds  $r0, $r1, $i3",7168,65024),t.addInst("adds  $r0, $r1, $r4",6144,65024),t.addInst("adds  $r01, $r4",6144,65024),t.addInst("adds  $r5, $i0",12288,63488),t.addInst("adr   $r5, $la",40960,63488),t.addInst("ands  $r0, $r1",16384,65472),t.addInst("asrs  $r0, $r1",16640,65472),t.addInst("asrs  $r0, $r1, $i6",4096,63488),t.addInst("bics  $r0, $r1",17280,65472),t.addInst("bkpt  $i0",48640,65280),t.addInst("blx   $r3",18304,65415),t.addInst("bx    $r3",18176,65408),t.addInst("cmn   $r0, $r1",17088,65472),t.addInst("cmp   $r0, $r1",17024,65472),t.addInst("cmp   $r2, $r3",17664,65280),t.addInst("cmp   $r5, $i0",10240,63488),t.addInst("eors  $r0, $r1",16448,65472),t.addInst("ldmia $r5!, $rl0",51200,63488),t.addInst("ldmia $r5, $rl0",51200,63488),t.addInst("ldr   $r0, [$r1, $i5]",26624,63488),t.addInst("ldr   $r0, [$r1, $r4]",22528,65024),t.addInst("ldr   $r5, [pc, $i1]",18432,63488),t.addInst("ldr   $r5, $la",18432,63488),t.addInst("ldr   $r5, [sp, $i1]",38912,63488).canBeShared=!0,t.addInst("ldr   $r5, [sp]",38912,63488).canBeShared=!0,t.addInst("ldrb  $r0, [$r1, $i4]",30720,63488),t.addInst("ldrb  $r0, [$r1, $r4]",23552,65024),t.addInst("ldrh  $r0, [$r1, $i7]",34816,63488),t.addInst("ldrh  $r0, [$r1, $r4]",23040,65024),t.addInst("ldrsb $r0, [$r1, $r4]",22016,65024),t.addInst("ldrsh $r0, [$r1, $r4]",24064,65024),t.addInst("lsls  $r0, $r1",16512,65472),t.addInst("lsls  $r0, $r1, $i4",0,63488),t.addInst("lsrs  $r0, $r1",16576,65472),t.addInst("lsrs  $r0, $r1, $i6",2048,63488),t.addInst("mov   $r2, $r3",17920,65280),t.addInst("movs  $r0, $r1",0,65472),t.addInst("movs  $r5, $i0",8192,63488),t.addInst("muls  $r0, $r1",17216,65472),t.addInst("mvns  $r0, $r1",17344,65472),t.addInst("negs  $r0, $r1",16960,65472),t.addInst("nop",18112,65535),t.addInst("orrs  $r0, $r1",17152,65472),t.addInst("pop   $rl2",48128,65024),t.addInst("push  $rl1",46080,65024),t.addInst("rev   $r0, $r1",47616,65472),t.addInst("rev16 $r0, $r1",47680,65472),t.addInst("revsh $r0, $r1",47808,65472),t.addInst("rors  $r0, $r1",16832,65472),t.addInst("sbcs  $r0, $r1",16768,65472),t.addInst("sev",48960,65535),t.addInst("stm   $r5!, $rl0",49152,63488),t.addInst("stmia $r5!, $rl0",49152,63488),t.addInst("stmea $r5!, $rl0",49152,63488),t.addInst("str   $r0, [$r1, $i5]",24576,63488).canBeShared=!0,t.addInst("str   $r0, [$r1]",24576,63488).canBeShared=!0,t.addInst("str   $r0, [$r1, $r4]",20480,65024),t.addInst("str   $r5, [sp, $i1]",36864,63488).canBeShared=!0,t.addInst("str   $r5, [sp]",36864,63488).canBeShared=!0,t.addInst("strb  $r0, [$r1, $i4]",28672,63488),t.addInst("strb  $r0, [$r1, $r4]",21504,65024),t.addInst("strh  $r0, [$r1, $i7]",32768,63488),t.addInst("strh  $r0, [$r1, $r4]",20992,65024),t.addInst("sub   sp, $i2",45184,65408),t.addInst("subs  $r0, $r1, $i3",7680,65024),t.addInst("subs  $r0, $r1, $r4",6656,65024),t.addInst("subs  $r01, $r4",6656,65024),t.addInst("subs  $r5, $i0",14336,63488),t.addInst("svc   $i0",57088,65280),t.addInst("sxtb  $r0, $r1",45632,65472),t.addInst("sxth  $r0, $r1",45568,65472),t.addInst("tst   $r0, $r1",16896,65472),t.addInst("udf   $i0",56832,65280),t.addInst("uxtb  $r0, $r1",45760,65472),t.addInst("uxth  $r0, $r1",45696,65472),t.addInst("wfe",48928,65535),t.addInst("wfi",48944,65535),t.addInst("yield",48912,65535),t.addInst("cpsid i",46706,65535),t.addInst("cpsie i",46690,65535),t.addInst("beq   $lb",53248,65280),t.addInst("bne   $lb",53504,65280),t.addInst("bcs   $lb",53760,65280),t.addInst("bcc   $lb",54016,65280),t.addInst("bmi   $lb",54272,65280),t.addInst("bpl   $lb",54528,65280),t.addInst("bvs   $lb",54784,65280),t.addInst("bvc   $lb",55040,65280),t.addInst("bhi   $lb",55296,65280),t.addInst("bls   $lb",55552,65280),t.addInst("bge   $lb",55808,65280),t.addInst("blt   $lb",56064,65280),t.addInst("bgt   $lb",56320,65280),t.addInst("ble   $lb",56576,65280),t.addInst("bhs   $lb",53760,65280),t.addInst("blo   $lb",54016,65280),t.addInst("b     $lb11",57344,63488),t.addInst("bal   $lb11",57344,63488),t.addInst("bl    $lb",61440,63488,!0),t.addInst("bb    $lb",57344,63488,!0),t.addInst("ldlit   $r5, $i32",18432,63488),t}return __extends(t,e),t.prototype.toFnPtr=function(e,t){return e+t|1},t.prototype.wordSize=function(){return 4},t.prototype.is32bit=function(e){return"bl"==e.name||"bb"==e.name},t.prototype.postProcessAbsAddress=function(e,t){return t&=4294967294,t-=e.baseOffset},t.prototype.emit32=function(e,t,n){if(t%2)return P.assembler.emitErr("uneven BL?",n);var o=t/2;if(P.assert(null!=o),(0|o)!=o||!(-2097152<o&&o<2097152))return P.assembler.emitErr("jump out of range",n);var r=o>>11&1023;return{opcode:4026531840&o?62464|r:61440|r,opcode2:63488|2047&o,stack:0,numArgs:[t],labelName:n}},t.prototype.commonalize=function(e){if(P.target.commonalize){for(var t=function(e){if("empty"==e.type)return!0;if("instruction"==e.type){var t=e.instruction;if(t&&t.canBeShared)return!0;switch(e.words[0]){case"pop":case"push":return!(-16&e.numArgs[0]);case"bl":switch(e.words[1]){case"_numops_fromInt":case"_pxt_incr":case"_pxt_decr":case"pxt::incr":case"pxt::decr":case"pxt::fromInt":return!0;default:return!1}default:return!1}}return!1},n=[],o={},r=-1,i=0;i<e.lines.length;++i)if("empty"!=(I=e.lines[i]).type)if(t(I))n.push(I);else{if("_js_end"==I.words[0]&&(r=i),2<n.length){for(var a="",s=0,l=n;s<l.length;s++){var c=l[s];"empty"!=c.type&&(P.assert(!!c.instruction),P.assert(!!c.opcode),a&&(a+=","),"bl"==c.words[0]?a+="BL "+c.words[1]:a+=c.opcode)}o[a]?o[a].push(n):o[a]=[n]}n=[]}if(!(r<0)){for(var u=0,g=Object.keys(o);u<g.length;u++)if(1==(S=o[E=g[u]]).length&&3<S[0].length){for(var p=E.split(","),d=p.slice(),_=S[0].slice(),f=S[0].slice(),h=null,m="";3<=_.length;){p.pop(),_.pop(),f.shift(),d.shift();var y=o[m=p.join(",")];if(y&&y.length){h=_;break}if((y=o[m=d.join(",")])&&y.length){h=f;break}}h&&(o[E]=[],o[m].push(h))}for(var v=[],b=0,k=0,T=Object.keys(o);k<T.length;k++){var E,S;if(!((S=o[E=T[k]]).length<=1)){0==v.length&&(e.buildLine("; shared assembly fragments",v),e.buildLine("@nostackcheck",v),e.buildLine("_frag_start:",v));var C=0<=E.indexOf("BL"),x="_frag_"+ ++b;e.buildLine("; num.uses: "+S.length,v),e.buildLine(x+":",v),C&&e.buildLine("mov r7, lr",v);for(var A=0,D=0,B=S[0];D<B.length;D++){var I,N=(I=B[D]).text.replace(/;.*/,"");/@\d/.test(N)&&(N=".short "+I.opcode+" ; "+N),e.buildLine(N,v),A+=I.stack}e.buildLine(C?"bx r7":"bx lr",v);for(var w=0,O=S;w<O.length;w++){var R=O[w];R[0].update("bl "+x),R[1].update("@dummystack "+A);for(var L=2;L<R.length;++L)R[L].update("")}}}0<v.length&&(e.lines=e.lines.slice(0,r).concat(v).concat(e.lines.slice(r)))}}},t.prototype.expandLdlit=function(e){for(var t,n=!1,o=[],r={},i=1,a=0;a<e.lines.length;++a){var s=e.lines[a];if(o.push(s),"instruction"==s.type&&s.instruction&&"ldlit"==s.instruction.name){if(!t){for(var l=s.location+900,c=a+1;c<e.lines.length&&!(e.lines[c].location>l);++c){var u=e.lines[c].getOp();("b"==u||"bb"==u||"pop"==u&&"pc"==e.lines[c].words[2])&&(t=e.lines[c])}if(t)n=!1;else for(n=!0;--c>a;)if("instruction"==e.lines[c].type){t=e.lines[c];break}}var g=s.words[1],p=s.words[3];(m=P.U.lookup(r,p))||(m="_ldlit_"+ ++i,r[p]=m),s.update("ldr "+g+", "+m)}if(s===t){t=null;var d=[],_="_jmpwords_"+ ++i;n&&d.push("bb "+_),d.push(".balign 4");for(var f=0,h=Object.keys(r);f<h.length;f++){var m=r[p=h[f]];d.push(m+": .word "+p)}n&&d.push(_+":");for(var y=0,v=d;y<v.length;y++){var b=v[y];e.buildLine(b,o);var k=o[o.length-1];k.scope=s.scope,k.lineNo=s.lineNo}r={}}}e.lines=o},t.prototype.getAddressFromLabel=function(e,t,n,o){void 0===o&&(o=!1);var r=e.lookupLabel(n);if(null==r)return null;var i=e.location()+4;return o&&(i&=4294967292),r-i},t.prototype.isPop=function(e){return 48128==e},t.prototype.isPush=function(e){return 46080==e},t.prototype.isAddSP=function(e){return 45056==e},t.prototype.isSubSP=function(e){return 45184==e},t.prototype.peephole=function(e,t,n){var o=this.encoders.$lb11,r=this.encoders.$lb;function i(e,t){return null!=e.encode(t.numArgs[0]+8)&&null!=e.encode(t.numArgs[0]-8)&&null!=e.encode(t.numArgs[0])}var a,s,l,c,u=e.getOp(),g=!1;"bne"!=u&&"beq"!=u||("b"==t.getOp()&&0==e.numArgs[0]&&(g=!0),"bb"==t.getOp()&&2==e.numArgs[0]&&(g=!0)),"bb"==u&&i(o,e)?e.update("b "+e.words[1]):"b"==u&&-2==e.numArgs[0]?e.update(""):"bne"==u&&g&&i(r,t)?(e.update("beq "+t.words[1]),t.update("")):"beq"==u&&g&&i(r,t)?(e.update("bne "+t.words[1]),t.update("")):"push"==u&&16384==e.numArgs[0]&&"push"==t.getOp()?(e.update(t.text.replace("{","{lr, ")),t.update("")):"pop"==u&&"pop"==t.getOp()&&32768==t.numArgs[0]?(e.update(e.text.replace("}",", pc}")),t.update("")):"push"==u&&"pop"==t.getOp()&&e.numArgs[0]==t.numArgs[0]?(P.assert(0<e.numArgs[0]),e.update(""),t.update("")):"push"==u&&"pop"==t.getOp()&&4==e.words.length&&4==t.words.length?(P.assert("{"==e.words[1]),e.update("mov "+t.words[2]+", "+e.words[2]),t.update("")):n&&"movs $r5, $i0"==e.getOpExt()&&"mov $r0, $r1"==t.getOpExt()&&e.numArgs[0]==t.numArgs[1]&&(l=n,c=e.numArgs[0],"pop"==l.getOp()&&l.numArgs[0]&1<<c)?(e.update("movs r"+t.numArgs[0]+", #"+e.numArgs[1]),t.update("")):"pop"==u&&0<=p(e)&&"push"==t.getOp()&&p(e)==p(t)?(e.update("ldr r"+p(e)+", [sp, #0]"),t.update("")):n&&"push"==u&&0<=p(e)&&(a=t,s=p(e),"movs $r5, $i0"==a.getOpExt()&&a.numArgs[0]!=s)&&"pop"==n.getOp()&&p(e)==p(n)&&(e.update(""),n.update(""))},t.prototype.registerNo=function(e){if(!e)return null;switch(e=e.toLowerCase()){case"pc":e="r15";break;case"lr":e="r14";break;case"sp":e="r13"}var t=/^r(\d+)$/.exec(e);if(t){var n=parseInt(t[1],10);if(0<=n&&n<16)return n}return null},t.prototype.testAssembler=function(){P.assembler.expectError(this,"lsl r0, r0, #8"),P.assembler.expectError(this,"push {pc,lr}"),P.assembler.expectError(this,"push {r17}"),P.assembler.expectError(this,"mov r0, r1 foo"),P.assembler.expectError(this,"movs r14, #100"),P.assembler.expectError(this,"push {r0"),P.assembler.expectError(this,"push lr,r0}"),P.assembler.expectError(this,"pop {lr,r0}"),P.assembler.expectError(this,"b #+11"),P.assembler.expectError(this,"b #+102400"),P.assembler.expectError(this,"bne undefined_label"),P.assembler.expectError(this,".foobar"),P.assembler.expect(this,"0200      lsls    r0, r0, #8\nb500      push    {lr}\n2064      movs    r0, #100        ; 0x64\nb401      push    {r0}\nbc08      pop     {r3}\nb501      push    {r0, lr}\nbd20      pop {r5, pc}\nbc01      pop {r0}\n4770      bx      lr\n0000      .balign 4\ne6c0      .word   -72000\nfffe\n"),P.assembler.expect(this,"4291      cmp     r1, r2\nd100      bne     l6\ne000      b       l8\n1840  l6: adds    r0, r0, r1\n4718  l8: bx      r3\n"),P.assembler.expect(this,"          @stackmark base\nb403      push    {r0, r1}\n          @stackmark locals\n9801      ldr     r0, [sp, locals@1]\nb401      push    {r0}\n9802      ldr     r0, [sp, locals@1]\nbc01      pop     {r0}\n          @stackempty locals\n9901      ldr     r1, [sp, locals@1]\n9102      str     r1, [sp, base@0]\n          @stackempty locals\nb002      add     sp, #8\n          @stackempty base\n"),P.assembler.expect(this,"b090      sub sp, #4*16\nb010      add sp, #4*16\n"),P.assembler.expect(this,'6261      .string "abc"\n0063      \n'),P.assembler.expect(this,'6261      .string "abcde"\n6463      \n0065      \n'),P.assembler.expect(this,"3042      adds r0, 0x42\n1c0d      adds r5, r1, #0\nd100      bne #0\n2800      cmp r0, #0\n6b28      ldr r0, [r5, #48]\n0200      lsls r0, r0, #8\n2063      movs r0, 0x63\n4240      negs r0, r0\n46c0      nop\nb500      push {lr}\nb401      push {r0}\nb402      push {r1}\nb404      push {r2}\nb408      push {r3}\nb520      push {r5, lr}\nbd00      pop {pc}\nbc01      pop {r0}\nbc02      pop {r1}\nbc04      pop {r2}\nbc08      pop {r3}\nbd20      pop {r5, pc}\n9003      str r0, [sp, #4*3]\n")},t}(P.assembler.AbstractProcessor);function p(e){P.assert("push"==e.getOp()||"pop"==e.getOp());for(var t=0,n=-1,o=e.numArgs[0];0<o;)1&o&&(n=-1==n?t:-2),o>>=1,t++;return 0<=n?n:-1}e.ThumbProcessor=t})((P=e.pxtc||(e.pxtc={})).thumb||(P.thumb={}))}(ts||(ts={})),function(e){var k;(function(p){var d,e,_=k.Util,n=_.assert;(e=d=p.EK||(p.EK={}))[e.None=0]="None",e[e.NumberLiteral=1]="NumberLiteral",e[e.PointerLiteral=2]="PointerLiteral",e[e.RuntimeCall=3]="RuntimeCall",e[e.ProcCall=4]="ProcCall",e[e.SharedRef=5]="SharedRef",e[e.SharedDef=6]="SharedDef",e[e.FieldAccess=7]="FieldAccess",e[e.Store=8]="Store",e[e.CellRef=9]="CellRef",e[e.Incr=10]="Incr",e[e.Decr=11]="Decr",e[e.Sequence=12]="Sequence",e[e.JmpValue=13]="JmpValue",e[e.Nop=14]="Nop";var i,t,l,o,r=0,a=function(){function e(){}return e.prototype.isExpr=function(){return!1},e.prototype.isStmt=function(){return!1},e.prototype.getId=function(){return this._id||(this._id=++r),this._id},e}(),f=function(r){function n(e,t,n){var o=r.call(this)||this;return o.exprKind=e,o.args=t,o.data=n,o.callingConvention=p.CallingConvention.Plain,o}return __extends(n,r),n.clone=function(e){var t=new n(e.exprKind,e.args.slice(0),e.data);return e.jsInfo&&(t.jsInfo=e.jsInfo),e.totalUses&&(t.totalUses=e.totalUses,t.currUses=e.currUses),t.callingConvention=e.callingConvention,t},n.prototype.isExpr=function(){return!0},n.prototype.isPure=function(){return this.isStateless()||this.exprKind==d.CellRef},n.prototype.isStateless=function(){switch(this.exprKind){case d.NumberLiteral:case d.PointerLiteral:case d.SharedRef:return!0;default:return!1}},n.prototype.sharingInfo=function(){var e=this;return this.exprKind!=d.SharedRef&&this.exprKind!=d.SharedDef||(e=this.args[0])||(e={currUses:"",totalUses:""}),e.currUses+"/"+e.totalUses},n.prototype.toString=function(){return c(this)},n.prototype.canUpdateCells=function(){switch(this.exprKind){case d.NumberLiteral:case d.PointerLiteral:case d.CellRef:case d.JmpValue:case d.SharedRef:case d.Nop:return!1;case d.SharedDef:case d.Incr:case d.Decr:case d.FieldAccess:return this.args[0].canUpdateCells();case d.RuntimeCall:case d.ProcCall:case d.Sequence:case d.Store:return!0;default:throw k.oops()}},n}(p.Node=a);p.Expr=f,(t=i=p.SK||(p.SK={}))[t.None=0]="None",t[t.Expr=1]="Expr",t[t.Label=2]="Label",t[t.Jmp=3]="Jmp",t[t.StackEmpty=4]="StackEmpty",t[t.Breakpoint=5]="Breakpoint",(o=l=p.JmpMode||(p.JmpMode={}))[o.Always=1]="Always",o[o.IfZero=2]="IfZero",o[o.IfNotZero=3]="IfNotZero",o[o.IfJmpValEq=4]="IfJmpValEq",o[o.IfLambda=5]="IfLambda";var s=function(o){function e(e,t){var n=o.call(this)||this;return n.stmtKind=e,n.expr=t,n}return __extends(e,o),e.prototype.isStmt=function(){return!0},e.prototype.toString=function(){return c(this)},e}(a);function c(e){return function e(t){if(t.isExpr()){var n=t,o=n.args?n.args[0]:null;switch(n.exprKind){case d.NumberLiteral:case d.PointerLiteral:return n.data+"";case d.CellRef:return n.data.toString();case d.JmpValue:return"JMPVALUE";case d.Nop:return"NOP";case d.SharedRef:return"SHARED_REF(#"+o.getId()+")";case d.SharedDef:return"SHARED_DEF(#"+o.getId()+": "+e(o)+")";case d.Incr:return"INCR("+e(o)+")";case d.Decr:return"DECR("+e(o)+")";case d.FieldAccess:return e(o)+"."+n.data.name;case d.RuntimeCall:return n.data+"("+n.args.map(e).join(", ")+")";case d.ProcCall:var r=n.data;return(null!=r.ifaceIndex?"IFACE@"+r.ifaceIndex:null!=r.virtualIndex?"VTABLE@"+r.virtualIndex:k.getDeclName(r.proc.action))+"("+n.args.map(e).join(", ")+")";case d.Sequence:return"("+n.args.map(e).join("; ")+")";case d.Store:return"{ "+e(n.args[0])+" := "+e(n.args[1])+" }";default:throw k.oops()}}else{var i=t,a=i.expr?e(i.expr):"{null}";switch(i.stmtKind){case p.SK.Expr:return"    "+a+"\n";case p.SK.Jmp:var s="goto "+i.lblName+"\n";switch(i.jmpMode){case l.Always:return i.expr?"    { JMPVALUE := "+a+" } "+s:"    "+s;case l.IfZero:return"    if (! "+a+") "+s;case l.IfNotZero:return"    if ("+a+") "+s;case l.IfJmpValEq:return"    if (r0 == "+a+") "+s;case l.IfLambda:return"    if (LAMBDA) return "+a;default:throw k.oops()}case p.SK.StackEmpty:return"    ;\n";case p.SK.Breakpoint:return"    // brk "+i.breakpointInfo.id+"\n";case p.SK.Label:return i.lblName+":\n";default:throw k.oops()}}}(e)}p.Stmt=s;var u=function(){function e(e,t,n){this.index=e,this.def=t,this.info=n,this.isarg=!1,this.iscap=!1,this._isRef=!1,this._isLocal=!1,this._isGlobal=!1,this._debugType="?",this.bitSize=0,t&&n&&k.setCellProps(this)}return e.prototype.getName=function(){return k.getDeclName(this.def)},e.prototype.getDebugInfo=function(){return{name:this.getName(),type:this._debugType,index:this.index}},e.prototype.toString=function(){var e="";return this.def&&(e+=this.getName()||"?"),this.isarg&&(e="ARG "+e),this.isRef()&&(e="REF "+e),"["+e+"]"},e.prototype.uniqueName=function(){return this.isarg?"arg"+this.index:this.getName().replace(/[^\w]/g,"_")+"___"+k.getNodeId(this.def)},e.prototype.refSuffix=function(){return this.isRef()?"Ref":""},e.prototype.isRef=function(){return this._isRef},e.prototype.isLocal=function(){return this._isLocal},e.prototype.isGlobal=function(){return this._isGlobal},e.prototype.loadCore=function(){return y(d.CellRef,null,this)},e.prototype.load=function(){var e=this.loadCore();return k.target.taggedInts&&0!=this.bitSize?6==this.bitSize?b("pxt::fromUInt",[e]):b("pxt::fromInt",[e]):this.isByRefLocal()?b("pxtrt::ldloc"+this.refSuffix(),[e]):this.refCountingHandledHere()?y(d.Incr,[e]):e},e.prototype.refCountingHandledHere=function(){return this.isRef()&&!this.isByRefLocal()},e.prototype.isByRefLocal=function(){return this.isLocal()&&this.info.captured&&this.info.written},e.prototype.storeDirect=function(e){return y(d.Store,[this.loadCore(),e])},e.prototype.storeByRef=function(e){if(this.isByRefLocal())return b("pxtrt::stloc"+this.refSuffix(),[this.loadCore(),e]);if(k.target.taggedInts&&0!=this.bitSize){e=v(e);var t=v(b(6==this.bitSize?"pxt::toUInt":"pxt::toInt",[e]));return y(d.Sequence,[t,y(d.Decr,[e]),this.storeDirect(t)])}if(this.refCountingHandledHere()){var n=v(e);return y(d.Sequence,[n,y(d.Decr,[this.loadCore()]),this.storeDirect(n)])}return this.storeDirect(e)},Object.defineProperty(e.prototype,"isTemporary",{get:function(){return!1},enumerable:!0,configurable:!0}),e}(),g=function(o){function r(e,t){var n=o.call(this,e,null,null)||this;return n.index=e,n.owningProc=t,n.uid=r.unnamedCellCounter++,n}return __extends(r,o),r.prototype.getName=function(){return"unnamed"+this.uid},r.prototype.uniqueName=function(){return this.getName()+"___U"+this.index},r.prototype.isByRefLocal=function(){return!1},Object.defineProperty(r.prototype,"isTemporary",{get:function(){return!0},enumerable:!0,configurable:!0}),r.unnamedCellCounter=0,r}(p.Cell=u);p.UnnamedCell=g;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numArgs=0,e.isRoot=!1,e.locals=[],e.captured=[],e.args=[],e.body=[],e.lblNo=0,e}return __extends(e,t),e.prototype.reset=function(){this.body=[],this.lblNo=0,this.locals=[],this.captured=[],this.args=[]},e.prototype.label=function(){return k.getFunctionLabel(this.action,this.bindings)},e.prototype.matches=function(e){if(this.action==e.action){_.assert(this.bindings.length==e.bindings.length,"this.bindings.length == id.bindings.length");for(var t=0;t<this.bindings.length;++t)if(this.bindings[t].isRef!=e.bindings[t].isRef)return!1;return!0}return!1},e.prototype.toString=function(){return"\nPROC "+k.getDeclName(this.action)+"\n"+this.body.map(function(e){return e.toString()}).join("")+"\n"},e.prototype.emit=function(e){this.body.push(e)},e.prototype.emitExpr=function(e){this.emit(m(i.Expr,e))},e.prototype.mkLabel=function(e){var t=m(i.Label,null);return t.lblName="."+e+"_"+this.lblNo+++"_"+this.seqNo,t.lbl=t},e.prototype.emitLbl=function(e){this.emit(e)},e.prototype.emitLblDirect=function(e){var t=m(i.Label,null);t.lblName=e,t.lbl=t,this.emit(t)},e.prototype.getName=function(){return(this.action&&this.action.name?this.action.name.text:null)||"inline"},e.prototype.mkLocal=function(e,t){var n=new u(this.locals.length,e,t);return this.locals.push(n),n},e.prototype.mkLocalUnnamed=function(e){void 0===e&&(e=!1);var t=new g(this.locals.length,this);return t._isRef=e,this.locals.push(t),t},e.prototype.localIndex=function(t,e){return void 0===e&&(e=!1),this.captured.filter(function(e){return e.def==t})[0]||this.locals.filter(function(e){return e.def==t})[0]||(e?null:this.args.filter(function(e){return e.def==t})[0])},e.prototype.stackEmpty=function(){this.emit(m(i.StackEmpty,null))},e.prototype.emitClrIfRef=function(e){n(!e.isGlobal()&&!e.iscap,"!p.isGlobal() && !p.iscap"),(e.isRef()||e.isByRefLocal())&&this.emitExpr(y(d.Decr,[e.loadCore()]))},e.prototype.emitClrs=function(e,t){var n=this;this.isRoot||(this.locals.forEach(function(e){return n.emitClrIfRef(e)}),k.isStackMachine()&&this.args.some(function(e){return e.isRef()||e.isByRefLocal()})&&this.emitJmp(e,t,p.JmpMode.IfLambda),this.args.forEach(function(e){return n.emitClrIfRef(e)}))},e.prototype.emitJmpZ=function(e,t){this.emitJmp(e,t,l.IfZero)},e.prototype.emitJmp=function(e,t,n,o){void 0===n&&(n=l.Always),void 0===o&&(o=null);var r=m(i.Jmp,t);r.jmpMode=n,o&&o.exprKind==d.NumberLiteral&&(o=null),r.terminateExpr=o,"string"==typeof e?r.lblName=e:(r.lbl=e,r.lblName=r.lbl.lblName),this.emit(r)},e.prototype.resolve=function(){var e,o=function(e,t){if(e.args)for(var n=0;n<e.args.length;++n)e.args[n]=t(e.args[n])},r=function(e){switch(e.exprKind){case d.SharedDef:throw _.oops();case d.SharedRef:var t=e.args[0];if(t.totalUses)return t.totalUses--,e;t.totalUses=-1,t.currUses=0;var n=f.clone(e);return n.exprKind=d.SharedDef,n.args[0]=r(n.args[0]),n}return o(e,r),e},t=function(n){if(n.exprKind==d.SharedRef)return n;if(o(n,t),(n.exprKind==d.Decr||n.exprKind==d.Incr)&&function e(t){switch(t.exprKind){case p.EK.Sequence:return e(t.args[t.args.length-1]);case p.EK.NumberLiteral:return!0;case p.EK.RuntimeCall:switch(t.data){case"String_::mkEmpty":case"pxt::ptrOfLiteral":return!0;default:return!1}case p.EK.SharedDef:case p.EK.SharedRef:return e(t.args[0]);default:return!1}}(n.args[0]))return n.args[0];switch(n.exprKind){case d.Decr:if(n.args[0].exprKind==d.Incr)return n.args[0].args[0];break;case d.Sequence:n.args=n.args.filter(function(e,t){return t==n.args.length-1||!e.isPure()})}return n},n=function(e){switch(e.exprKind){case d.SharedDef:var t=e.args[0];if(_.assert(t.totalUses<0,"arg.totalUses < 0"),_.assert(0===t.currUses,"arg.currUses === 0"),-1==t.totalUses)return n(t);t.totalUses=1;break;case d.SharedRef:return _.assert(0<e.args[0].totalUses,"e.args[0].totalUses > 0"),e.args[0].totalUses++,e}return o(e,n),e};this.body=this.body.filter(function(e){return!e.expr||(e.expr=t(r(e.expr)),e.stmtKind!=p.SK.Expr||!e.expr.isPure())});for(var i=_.toDictionary(this.body.filter(function(e){return e.stmtKind==p.SK.Label}),function(e){return e.lblName}),a=0;a<this.body.length;++a)this.body[a].stmtNo=a;for(var s=0,l=this.body;s<l.length;s++)switch((e=l[s]).expr&&(e.expr=n(e.expr)),e.stmtKind){case p.SK.Expr:break;case p.SK.Jmp:e.lbl=_.lookup(i,e.lblName),e.lbl||k.oops("missing label: "+e.lblName),e.lbl.lblNumUses?e.lbl.lblNumUses++:e.lbl.lblNumUses=1;break;case p.SK.StackEmpty:case p.SK.Label:case p.SK.Breakpoint:break;default:k.oops()}for(var c=[],u=0,g=this.body;u<g.length;u++)(e=g[u]).stmtKind==p.SK.Breakpoint&&(c[e.breakpointInfo.id]=e.breakpointInfo)},e}(a);function m(e,t){return new s(e,t)}function y(e,t,n){return new f(e,t,n)}function v(e){switch(e.exprKind){case d.NumberLiteral:case d.SharedRef:return e}return y(d.SharedRef,[e])}function b(e,t){return y(d.RuntimeCall,t,e)}p.Procedure=h,p.iterExpr=function e(t,n){if(n(t),t.args)for(var o=0,r=t.args;o<r.length;o++)e(r[o],n)},p.stmt=m,p.op=y,p.numlit=function(e){return y(d.NumberLiteral,null,e)},p.shared=v,p.ptrlit=function(e,t,n){void 0===n&&(n=!1);var o=y(d.PointerLiteral,null,e);if(o.jsInfo=t,n){if(k.target.isNative&&k.isAVR())return b("pxt::stringLiteral",[o]);o.args=[]}return o},p.rtcall=b,p.rtcallMask=function(e,n,t,o){var r=[];_.startsWith(e,"@nomask@")&&(e=e.slice(8),n=0),k.isStackMachine()?e+="^"+n:o=o.map(function(e,t){return n&1<<t&&(e=v(e),r.push(y(d.Decr,[e]))),e});var i=y(d.RuntimeCall,o,e);return i.callingConvention=t,0<r.length&&(i=v(i),r.unshift(i),r.push(i),i=y(d.Sequence,r)),i},p.flattenArgs=function(e){for(var t=!1,o=[],n=0,r=_.reversed(e.args);n<r.length;n++){var i=r[n];i.isStateless()||(i.exprKind!=d.CellRef||t)&&(i.canUpdateCells()&&(t=!0),o.push(i))}o.reverse(),k.isStackMachine()&&(o=[]);var a=[],s=e.args.map(function(e){if(0<=o.indexOf(e)){var t=e,n=e;return e.exprKind==d.SharedDef?(e.args[0].totalUses++,t=p.op(d.SharedRef,[e.args[0]])):(t=p.op(d.SharedRef,[e]),n=p.op(d.SharedDef,[e]),e.totalUses=2,e.currUses=0),a.push(n),t}return e});return{precomp:a,flattened:s}}})((k=e.pxtc||(e.pxtc={})).ir||(k.ir={}))}(ts||(ts={})),function(on){!function(Qe){var et,e;function t(e){return e<<2|2}(e=et||(et={}))[e.Enum=0]="Enum",e[e.Number=1]="Number",e[e.String=2]="String",e[e.Boolean=3]="Boolean",e[e.Unsupported=4]="Unsupported",Qe.taggedUndefined=0,Qe.taggedNull=t(1),Qe.taggedFalse=t(2),Qe.taggedTrue=t(16),Qe.thumbArithmeticInstr={adds:!0,subs:!0,muls:!0,ands:!0,orrs:!0,eors:!0,lsls:!0,asrs:!0,lsrs:!0},Qe.numberArithmeticInstr={div:!0,mod:!0,le:!0,lt:!0,ge:!0,gt:!0,eq:!0,neq:!0};var tt=Qe.ir.EK;Qe.SK=on.SyntaxKind,Qe.numReservedGlobals=1;var nt=0,ot=1;function rt(e){var t=e;return t.pxtNodeWave!==ot&&(t.pxtNodeId=++nt,t.pxtNodeWave=ot),t.pxtNodeId}function it(e){return e?on.SyntaxKind[e.kind]:"<null>"}function at(e,t,n){void 0===n&&(n=!1);var o=new Error(t);if(o.ksEmitterUserError=!0,o.ksErrorCode=e,n&&xt)return Et||(Et=t,Ct=e),o;throw o}function st(){return Qe.target.nativeType==Qe.NATIVE_TYPE_CS||!Qe.target.jsRefCounting&&!Qe.target.isNative}function lt(){return Qe.target.isNative&&Qe.target.nativeType==Qe.NATIVE_TYPE_AVRVM}function ct(){return Qe.target.isNative&&(Qe.target.nativeType==Qe.NATIVE_TYPE_AVRVM||Qe.target.nativeType==Qe.NATIVE_TYPE_AVR)}function ut(){return Qe.target.isNative&&Qe.target.nativeType==Qe.NATIVE_TYPE_THUMB}function r(e){return e.isThisType}function gt(e){if(c(e),st())return!1;if(e.flags&on.TypeFlags.Null)return!1;if(e.flags&on.TypeFlags.Undefined)return!1;if(e.flags&on.TypeFlags.TypeParameter){if(r(e))return!0;var t=w(e);if(t)return t.isRef;Qe.U.oops("unbound type parameter: "+Tt.typeToString(e))}if(e.flags&(on.TypeFlags.NumberLike|on.TypeFlags.Boolean|on.TypeFlags.NumberLiteral|on.TypeFlags.BooleanLiteral|on.TypeFlags.Enum|on.TypeFlags.EnumLike))return!!Qe.target.taggedInts;var n=e.getSymbol();if(n){var o=n.valueDeclaration||n.declarations[0];if(o)if(Bt(o).noRefCounting)return!1}return!0}function o(e){return!!e.isThisParameter}function pt(e){return!!o(e)||gt(Mt(e))}function dt(e){return Qe.target.taggedInts?Qe.ir.rtcall("pxt::fromInt",[e]):e}function _t(e){return Qe.target.taggedInts?Qe.ir.rtcall("pxt::fromBool",[e]):e}function ft(e){switch(e){case 0:return Qe.target.shortPointers?2:4;case 1:return 1;case 3:return 2;case 5:return 4;case 2:return 1;case 4:return 2;case 6:return 4;default:throw Qe.oops()}}function i(e){switch(e){case 1:case 3:case 5:return!0;case 2:case 4:case 6:return!1;default:throw Qe.oops()}}function ht(e){switch(e.kind){case Qe.SK.TemplateHead:case Qe.SK.TemplateMiddle:case Qe.SK.TemplateTail:case Qe.SK.StringLiteral:case Qe.SK.NoSubstitutionTemplateLiteral:return!0;default:return!1}}function mt(e){return e.modifiers&&e.modifiers.some(function(e){return e.kind==Qe.SK.StaticKeyword})}function n(e){if(!e)return null;switch(e.kind){case Qe.SK.MethodDeclaration:return"";case Qe.SK.Constructor:return"new/";case Qe.SK.GetAccessor:return"get/";case Qe.SK.SetAccessor:return"set/";default:return null}}function yt(e){return n(e)+It(e)}function vt(e){return null!=n(e)}function bt(e){for(var t=e;;)switch((t=t.parent)||at(9229,St("cannot determine parent of {0}",it(e))),t.kind){case Qe.SK.MethodDeclaration:case Qe.SK.Constructor:case Qe.SK.GetAccessor:case Qe.SK.SetAccessor:case Qe.SK.FunctionDeclaration:case Qe.SK.ArrowFunction:case Qe.SK.FunctionExpression:return t;case Qe.SK.SourceFile:return null}}function a(e){return"objectFlags"in e}function kt(e){return!!e&&(e.kind==Qe.SK.VariableDeclaration&&!bt(e)||e.kind==Qe.SK.PropertyDeclaration&&mt(e))}Qe.getNodeId=rt,Qe.stringKind=it,Qe.isStackMachine=lt,Qe.isAVR=ct,Qe.isThumb=ut,Qe.sizeOfBitSize=ft,Qe.isBitSizeSigned=i,Qe.setCellProps=function(e){var t;if(e._isRef=pt(e.def),e._isLocal=(t=e.def).kind==Qe.SK.VariableDeclaration&&!kt(t)||e.def.kind==Qe.SK.Parameter,e._isGlobal=kt(e.def),!o(e.def)){var n=Mt(e.def);n.flags&on.TypeFlags.Void&&Qe.oops("void-typed variable, "+e.toString()),e.bitSize=function(e){if(!e||!e.type)return 0;if(!Qt(Mt(e)))return 0;if(e.type.kind!=Qe.SK.TypeReference)return 0;switch(e.type.typeName.getText()){case"int8":return 1;case"int16":return 3;case"int32":return 5;case"uint8":return 2;case"uint16":return 4;case"uint32":return 6;default:return 0}}(e.def),0!=e.bitSize?e._debugType=(i(e.bitSize)?"int":"uint")+8*ft(e.bitSize):$t(n)?e._debugType="string":n.flags&on.TypeFlags.NumberLike&&(e._debugType="number")}e.isLocal()&&0!=e.bitSize&&(e.bitSize=0,at(9256,St("bit sizes are not supported for locals and parameters")))},Qe.isObjectType=a;var Tt,Et,St=Qe.assembler.lf,Ct=0,xt=0,At=[];function s(e){e.kind==Qe.SK.VariableDeclaration&&(e=e.parent.parent);var t=function(e){var t=on.getSourceFileOfNode(e),n=on.getLeadingCommentRangesOfNode(e,t);return n?n.map(function(e){return t.text.slice(e.pos,e.end)}).join("\n"):""};return e.symbol&&1<e.symbol.declarations.length?e.symbol.declarations.map(t).join("\n"):t(e)}function Dt(e){for(var t="",n=0,o=e.declarations;n<o.length;n++){t+=s(o[n])}return Qe.parseCommentString(t)}function Bt(e){if(!e||e.isBogusFunction)return Qe.parseCommentString("");var t=e,n=t.pxtCommentAttrs;if(n)return n;var o=Qe.parseCommentString(s(t));return o._name=It(t),t.pxtCommentAttrs=o}function It(e){return e.name&&e.name.kind==Qe.SK.Identifier?e.name.text:"???"}function l(e){if(a(e)&&e.objectFlags&on.ObjectFlags.Reference){var t=e;if(t.typeArguments&&t.typeArguments.length)return t.target}return null}function Nt(e){return!!a(e)&&(e.objectFlags&on.ObjectFlags.Reference&&"Array"==e.symbol.name)}function wt(e){return!!a(e)&&(!!(e.objectFlags&on.ObjectFlags.Interface)||!!(e.objectFlags&on.ObjectFlags.Anonymous))}function Ot(e){return!!r(e)||!!a(e)&&!!(e.objectFlags&on.ObjectFlags.Class||e.symbol.flags&on.SymbolFlags.Class)}function I(e){return null==N(e)&&(Ot(e)||wt(e)||(t=e).symbol&&0!=(t.symbol.flags&(on.SymbolFlags.ObjectLiteral|on.SymbolFlags.TypeLiteral)));var t}function Rt(e){var t=l(e);return Ot(t||e)}function Lt(e){return Nt(e)?c(e.typeArguments[0]):null}function N(e){if(0<e.getApparentProperties().length||0<e.getConstructSignatures().length)return null;var t=Tt.getSignaturesOfType(e,on.SignatureKind.Call);return t&&1==t.length?t[0]:null}function w(e){if(!(e.flags&on.TypeFlags.TypeParameter))return null;for(var t=At.length-1;0<=t;--t)if(At[t].tp==e)return At[t];return null}function Pt(e){var t=l(e);return!!(t&&t.typeParameters&&t.typeParameters.length)}function c(e){var t=on.TypeFlags.String|on.TypeFlags.Number|on.TypeFlags.Boolean|on.TypeFlags.StringLiteral|on.TypeFlags.NumberLiteral|on.TypeFlags.BooleanLiteral|on.TypeFlags.Void|on.TypeFlags.Enum|on.TypeFlags.EnumLiteral|on.TypeFlags.Null|on.TypeFlags.Undefined;if(0==(e.flags&t)){if(Nt(e))return e;if(Ot(e))return e;if(wt(e))return e;if(N(e))return e;if(w(e))return e;if(u(e)!==et.Unsupported)return e;var n=l(e);if(n)return c(n),e.typeArguments.forEach(c),e;at(9201,St("unsupported type: {0} 0x{1}",Tt.typeToString(e),e.flags.toString(16)),!0)}return e}function Mt(e){var t;if(e.typeOverride)return e.typeOverride;if(on.isExpression(e)&&(t=Tt.getContextualType(e)),!t)try{t=Tt.getTypeAtLocation(e)}catch(e){at(9203,St("Unknown type for expression"))}return t?c(t):t}function u(e){if(!(e.flags&on.TypeFlags.Union))return et.Unsupported;var t,n=!0;return e.types.forEach(function(e){if(void 0===t)e.flags&on.TypeFlags.NumberLike?t=et.Number:e.flags&on.TypeFlags.BooleanLike?t=et.Boolean:e.flags&on.TypeFlags.StringLike?t=et.String:e.flags&on.TypeFlags.EnumLike&&(t=et.Enum);else switch(t){case et.Number:n=n&&!!(e.flags&on.TypeFlags.NumberLike);break;case et.Boolean:n=n&&!!(e.flags&on.TypeFlags.BooleanLike);break;case et.String:n=n&&!!(e.flags&on.TypeFlags.StringLike);break;case et.Enum:n=n&&!!(e.flags&on.TypeFlags.EnumLike)}}),n?t:et.Unsupported}function O(e,t){if(e==t)return!0;if(e.heritageClauses)for(var n=0,o=e.heritageClauses;n<o.length;n++){var r=o[n];switch(r.token){case Qe.SK.ExtendsKeyword:var i=Mt(r.types[0]);if(Ot(i))return O(i.symbol.valueDeclaration,t)}}return!1}function Ft(e,t){var n=t.kind?Tt.getTypeAtLocation(t):t,o=e.kind?Tt.getTypeAtLocation(e):e,r=on.isExpression(t)?Tt.getContextualType(t):n;r||(r=n);var i=on.isExpression(e)?Tt.getContextualType(e):o;if(i||(i=o),r&&i){r==i&&i!=o&&(i=o),R=[];var a=function p(d,n){function e(){var e=Tt.getPropertiesOfType(n),c=Tt.getPropertiesOfType(d),t=[!0,""],u=t[0],g=t[1];return e.forEach(function(t){var e,n,o=t.valueDeclaration,r=c.filter(function(e){return e.name==t.name});if(1==r.length){var i=r[0].valueDeclaration,a=p(Tt.getTypeAtLocation(i),Tt.getTypeAtLocation(o)),s=a[0],l=a[1];u&&!s&&(u=(e=[s,l])[0],g=e[1])}else 0==r.length&&(t.flags&on.SymbolFlags.Optional||(n=[!1,"Property "+t.name+" not present in "+d.getSymbol().name],u=n[0],g=n[1]))}),L(r,[u,g])}var t=d.id;var o=n.id;var r=t+","+o;if(Ut[r])return Ut[r];if(-1!=R.indexOf(r))return[!0,""];R.push(r);if(n.flags&on.TypeFlags.Any)return L(r,[!1,"Unsupported type: any."]);if(I(n)&&(i=d,!(I(i)||i.flags&(on.TypeFlags.Null|on.TypeFlags.Undefined))))return L(r,[!1,"Cast to class/interface not supported."]);var i;if(Ot(n)&&!Pt(n)){if(Ot(d)&&!Pt(d)){var a=n.symbol.valueDeclaration,s=d.symbol.valueDeclaration;return O(s,a)?e():O(a,s)?L(r,[!1,"Downcasts not supported."]):L(r,[!1,"Classes "+s.name.getText()+" and "+a.name.getText()+" are not related by inheritance."])}if(!(d.flags&(on.TypeFlags.Undefined|on.TypeFlags.Null)))return L(r,[!1,"Cast to class not supported."])}else if(N(n)){var l=N(n);if(N(d)){var c=N(d);Qe.U.assert(l.parameters.length>=c.parameters.length,"sup should have at least params of sub");for(var u=[!0,""],g=u[0],_=u[1],f=0;f<c.parameters.length;f++){var h=Tt.getTypeAtLocation(l.parameters[f].valueDeclaration),m=Tt.getTypeAtLocation(c.parameters[f].valueDeclaration),y=p(h,m),v=y[0],b=y[1];g&&!v&&(g=(D=[v,b])[0],_=D[1])}var k=l.getReturnType(),T=l.getReturnType(),E=p(T,k),S=E[0],C=E[1];return g&&!S&&(g=(B=[S,C])[0],_=B[1]),L(r,[g,_])}}else if(wt(n)){if(I(d))return e()}else if(Nt(n)){if(Nt(d)){var x=Lt(n),A=Lt(d);return p(A,x)}}else w(n);return L(r,[!0,""]);var D,B}(i,r),s=a[0],l=a[1];s||at(9263,St(l))}}Qe.getComments=s,Qe.parseCommentsOnSymbol=Dt,Qe.parseComments=Bt,Qe.getName=It;var R=[],Ut={};function L(e,t){return Ut[e]=t,R.pop(),t}function Ht(e){return 0<Gt(e).length}function Gt(e){return e.typeParameters&&e.typeParameters.length?e.typeParameters:!vt(e)&&e.kind!=Qe.SK.MethodSignature||e.parent.kind!=Qe.SK.ClassDeclaration&&e.parent.kind!=Qe.SK.InterfaceDeclaration?[]:e.parent.typeParameters||[]}function Vt(e){var t=Tt.getSignatureFromDeclaration(e);return!(Tt.getReturnTypeOfSignature(t).flags&on.TypeFlags.Void)}function Wt(e){var t,n=(t=e)&&t.name?e.name.text:null;return n||e.kind!=Qe.SK.Constructor||(n="constructor"),e&&e.parent&&e.parent.kind==Qe.SK.ClassDeclaration&&(n=e.parent.name.text+"."+n),n=n||"inline"}function Kt(e){var t=l(e);return t&&t.typeParameters?zt(t.typeParameters,e.typeArguments):[]}function zt(e,n){return Qe.U.assert(e.length==n.length,"typeParameters.length == args.length"),e.map(function(e,t){return{tp:e,isRef:gt(n[t])}})}function jt(e){var t=[];return Yt(t,e),t}function Yt(o,e){if(e)for(var t=bt(e);t;t=bt(t))for(var n=function(e){var t=Tt.getTypeAtLocation(e),n=At.filter(function(e){return e.tp==t})[0];n||Qe.U.oops("cannot find binding for: "+Tt.typeToString(t)),o.push(n)},r=0,i=Gt(t);r<i.length;r++){n(i[r])}}function Xt(e){return e&&e.length?"_"+e.map(function(e){return e.isRef?"R":"P"}).join(""):""}function Jt(e,t){return Wt(e).replace(/[^\w]+/g,"_")+"__P"+rt(e)+Xt(t)}function qt(e,t,n){return{kind:Qe.SK.MethodDeclaration,parameters:n?[n]:[],name:{kind:Qe.SK.Identifier,text:t,pos:0,end:0},body:{kind:Qe.SK.Block,statements:[]},parent:e.decl,pos:0,end:0,isBogusFunction:!0}}function Zt(e,t,n){return!!(e.flags&t)||u(e)===n}function $t(e){return Zt(e,on.TypeFlags.String|on.TypeFlags.StringLiteral,et.String)}function Qt(e){return Zt(e,on.TypeFlags.Number|on.TypeFlags.NumberLiteral,et.Number)}function en(e){return Zt(e,on.TypeFlags.Enum|on.TypeFlags.EnumLiteral,et.Enum)||Qt(e)}Qe.getDeclName=Wt,Qe.getFunctionLabel=Jt,Qe.compileBinary=function(n,o,f,V,t){Qe.target=f.target;var s=on.createDiagnosticCollection();Tt=n.getTypeChecker();var c={},u={},v=[],r={},i={},a=[],E={},l=0,W={},g={},p=null;if(Ut={},nt=0,ot++,f.target.isNative){if(!f.hexinfo)return{diagnostics:[{file:n.getSourceFiles()[0],start:0,length:0,category:Qe.DiagnosticCategory.Error,code:9043,messageText:St("The hex file is not available, please connect to internet and try again.")}],emittedFiles:[],emitSkipped:!0};Qe.hex.setupFor(f.target,f.extinfo||Qe.emptyExtInfo(),f.hexinfo),Qe.hex.setupInlineAssembly(f)}else f.target.taggedInts=!1;var K,z=new tn;function e(){z.reset(),K=null,V.breakpoints=[{id:0,isDebuggerStmt:!1,fileName:"bogus",start:0,length:0,line:0,column:0}]}z.res=V,z.options=f,z.target=f.target,f.computeUsedSymbols&&(V.usedSymbols={},V.usedArguments={});var d=[];f.forceEmit&&0!=V.diagnostics.length||n.getSourceFiles().forEach(function(e){e.statements.forEach(function(e){d.push(e)})});var _=n.getSourceFiles().filter(function(e){return Qe.Util.endsWith(e.fileName,t)})[0],h={kind:Qe.SK.FunctionDeclaration,parameters:[],name:{text:"<main>",pos:0,end:0},body:{kind:Qe.SK.Block,statements:d},parent:_,pos:0,end:0,isRootFunction:!0,isBogusFunction:!0};if($(h),v=[],e(),Ze(h),function(){var e=z.globals.slice(0);e.forEach(function(e,t){return e.index=t}),e.sort(function(e,t){return ft(e.bitSize)-ft(t.bitSize)||e.index-t.index});for(var t=4*Qe.numReservedGlobals,n=0,o=e;n<o.length;n++){for(var r=o[n],i=ft(r.bitSize);t&i-1;)t++;r.index=t,t+=i}z.globalsWords=t+3>>2}(),function(){for(var e in i)i[e].virtualParent=void 0,i[e].virtualIndex=void 0,i[e].virtualInstances=void 0;for(var t in c)c[t].methods=c[t].methods.filter(function(e){return Y(e).isUsed});for(var t in c)c[t].baseClassInfo&&I(c[t])}(),function(){for(var e=0,t=z.usedClassInfos;e<t.length;e++){var n=t[e];B(n)}}(),0==s.getModificationCount()){e(),z.finalPass=!0,Ze(h),V.configData=[];for(var m=0,y=Object.keys(g);m<y.length;m++){var b=y[m];g["!"+b]||V.configData.push({name:b.replace(/^\!/,""),key:g[b].key,value:g[b].value})}Xe(h,function(){s.getModificationCount()||f.noEmit||!o||(z.writeFile=function(e,t){return o.writeFile(e,t,!1,null,n.getSourceFiles())},f.target.isNative?(f.extinfo.yotta&&z.writeFile("yotta.json",JSON.stringify(f.extinfo.yotta,null,2)),f.extinfo.platformio&&z.writeFile("platformio.json",JSON.stringify(f.extinfo.platformio,null,2)),f.target.nativeType==Qe.NATIVE_TYPE_CS?Qe.csEmit(z,f):f.target.nativeType==Qe.NATIVE_TYPE_AVRVM?Qe.vmEmit(z,f):Qe.processorEmit(z,f,V)):Qe.jsEmit(z))})}return{diagnostics:s.getDiagnostics(),emittedFiles:void 0,emitSkipped:!!f.noEmit};function k(e,t,n,o,r,i,a){s.add(on.createDiagnosticForNode(t,{code:n,message:o,key:o.replace(/^[a-zA-Z]+/g,"_"),category:e},r,i,a))}function T(e,t,n,o,r,i){k(Qe.DiagnosticCategory.Error,e,t,n,o,r,i)}function j(e,t,n){if(void 0===n&&(n=9202),t)return at(n,t);e||at(n,St("Sorry, this language feature is not supported"));var o=it(e),r=!1,i=null;switch(e.kind){case on.SyntaxKind.ForInStatement:o=St("for in loops");break;case on.SyntaxKind.ForOfStatement:o=St("for of loops"),r=!0;break;case on.SyntaxKind.PropertyAccessExpression:o=St("property access");break;case on.SyntaxKind.DeleteExpression:o=St("delete");break;case on.SyntaxKind.GetAccessor:o=St("get accessor method"),r=!0;break;case on.SyntaxKind.SetAccessor:o=St("set accessor method"),r=!0;break;case on.SyntaxKind.TaggedTemplateExpression:o=St("tagged templates");break;case on.SyntaxKind.TypeOfExpression:o=St("typeof");break;case on.SyntaxKind.SpreadElement:o=St("spread");break;case on.SyntaxKind.TryStatement:case on.SyntaxKind.CatchClause:case on.SyntaxKind.FinallyKeyword:case on.SyntaxKind.ThrowStatement:o=St("throwing and catching exceptions");break;case on.SyntaxKind.ClassExpression:o=St("class expressions"),i=St("declare a class as class C {} not let C = class {}")}var a="";return a=r?St("{0} not currently supported",o):St("{0} not supported",on.SyntaxKind[e.kind]),i&&(a+=" - "+i),at(n,a)}function S(e){return rt(e)+""}function Y(e){var t=S(e),n=i[t];return n||(i[t]=n={decl:e,capturedVars:[]}),n}function C(e){var t=rt(e)+"",n=r[t];return n||(r[t]=n={}),n}function x(e,t){void 0===t&&(t=!1);var n=C(e);t&&(n.written=!0);var o=bt(e);if(null==o||o==K.action);else{for(var r=K.action;r&&r!=o;){var i=Y(r);i.capturedVars.indexOf(e)<0&&i.capturedVars.push(e),r=bt(r)}n.captured=!0}}function X(e){var t=K,n=At.slice();try{e()}finally{K=t,At=n}}function J(e){var t=Qe.U.lookup(E,e);if(null!=t)return t;for(var n=0,o=z.usedClassInfos;n<o.length;n++)for(var r=o[n],i=0,a=r.methods;i<a.length;i++){var s=a[i];It(s)==e&&Z(s,r.bindings)}return t=E[e]=l++}function A(e){e||at(9203,St("variable has unknown type")),Mt(e).flags&on.TypeFlags.Void&&at(9203,St("void-typed variables not supported"))}function D(t){if(kt(t)){$(t),A(t);var e=z.globals.filter(function(e){return e.def==t})[0];return e||(e=new Qe.ir.Cell(null,t,C(t)),z.globals.push(e)),e}var n=K.localIndex(t);return n||(z.finalPass?at(9204,St("cannot locate identifer")):n=K.mkLocal(t,C(t))),n}function B(k){if(Qe.assert(k.isUsed,"inf.isUsed"),k.vtable)return k.vtable;var T=k.baseClassInfo?B(k.baseClassInfo).slice(0):[];return X(function(){Qe.U.pushRange(At,k.bindings);for(var e=0,t=k.methods;e<t.length;e++){var n=Y(f=t[e]);if(n.virtualParent){var o=yt(f),r=!1,i=ae(f,k.bindings);Qe.U.assert(!!i);for(var a=0;a<T.length;++a)yt(T[a].action)==o&&(T[a]=i,n.virtualIndex=a,r=!0);r||(n.virtualIndex=T.length,T.push(i))}}k.vtable=T,k.itable=[],k.itableInfo=[];for(var s=function(e,t){var n=J(e);k.itable[n]=t,k.itableInfo[n]=e,Qe.assert(!!t,"!!proc")},l=function(e,t){var n=ae(e,k.bindings);n||X(function(){fe(e,k.bindings),(n=ae(e,k.bindings)).body=[],t(n)}),Qe.assert(!!n,"!!proc"),s(It(e),n)},c=function(e){var t=e,n=It(t),o="set/"+n;if(ce(n)){t.irGetter||(t.irGetter=qt(k,n));var r=Ee(k,t,Mt(t));l(t.irGetter,function(e){Le(Qe.ir.op(tt.FieldAccess,[e.args[0].loadCore()],r))})}if(ce(o)){t.irSetter||(t.irSetter=qt(k,o,{kind:Qe.SK.Parameter,name:{text:"v"},parent:t.irSetter,typeOverride:Mt(t),symbol:{}}));var i=Ee(k,t,Mt(t));l(t.irSetter,function(e){var t=Qe.ir.op(tt.FieldAccess,[e.args[0].loadCore()],i);e.emitExpr(Qe.ir.op(tt.Store,[t,e.args[1].loadCore()]))})}},u=0,g=k.allfields;u<g.length;u++)c(g[u]);for(var p=k;p;p=p.baseClassInfo)for(var d=0,_=p.methods;d<_.length;d++){var f,h=It(f=_[d]);if(ce(h)){var m=J(h);k.itable[m]||s(h,ae(f,p.bindings))}}for(a=0;a<k.itable.length;++a)k.itable[a]||(k.itable[a]=null);for(var y=0,v=Object.keys(E);y<v.length;y++){var b=v[y];k.itableInfo[E[b]]=b}}),k.vtable}function I(e){for(var t={},n=e.baseClassInfo;n;n=n.baseClassInfo)for(var o=0,r=n.methods;o<r.length;o++)t[yt(s=r[o])]=s;for(var i=0,a=e.methods;i<a.length;i++){var s=a[i],l=Qe.U.lookup(t,yt(s));if(l){var c=Y(s),u=Y(l);l.parameters.length!=s.parameters.length&&T(s,9255,St("the overriding method is currently required to have the same number of arguments as the base one")),(c.virtualParent=u).virtualParent||(u.virtualParent=u),Qe.assert(u.virtualParent==u,"pinf.virtualParent == pinf"),u.virtualInstances||(u.virtualInstances=[]),u.virtualInstances.push(c)}}}function N(e,r,i){void 0===r&&(r=null),void 0===i&&(i=null),r||(r=e.symbol.valueDeclaration),i||(i=e?Kt(e):r.typeParameters?r.typeParameters.map(function(e){return{isRef:!0,tp:Tt.getTypeAtLocation(e),arg:Tt.getTypeAtLocation(e)}}):[]);var t="C"+rt(r)+Xt(i),a=c[t];if(!a){var s=[],l=[];(a={id:t,numRefFields:0,allfields:[],attrs:Bt(r),decl:r,refmask:null,baseClassInfo:null,methods:[],bindings:i}).attrs.autoCreate&&(W[a.attrs.autoCreate]=!0),(c[t]=a).baseClassInfo=function(e){if(e.heritageClauses)for(var t=0,n=e.heritageClauses;t<n.length;t++){var o=n[t];switch(o.token){case Qe.SK.ExtendsKeyword:if(!o.types||1!=o.types.length)throw at(9228,St("invalid extends clause"));var r=Mt(o.types[0]);if(r&&Ot(r)&&!Pt(r))return Ft(Tt.getTypeAtLocation(e),r),N(r);throw at(9228,St("cannot inherit from this type"));case Qe.SK.ImplementsKeyword:break;default:throw at(9228,St("invalid heritage clause"))}}return null}(r),X(function(){Qe.U.pushRange(At,i);for(var e=0,t=r.members;e<t.length;e++){var n=t[e];if(n.kind==Qe.SK.PropertyDeclaration){var o=n;gt(Mt(o))?s.push(o):l.push(o),a.allfields.push(o)}else vt(n)&&n.kind!=Qe.SK.Constructor&&(Y(n).parentClassInfo=a).methods.push(n)}a.baseClassInfo?(a.allfields=a.baseClassInfo.allfields.concat(a.allfields),a.numRefFields=-1,I(a)):(a.allfields=s.concat(l),a.numRefFields=s.length),a.refmask=a.allfields.map(function(e){return gt(Mt(e))})})}return a}function w(e){if(kt(e)&&e.parent.flags&on.NodeFlags.Const){var t=e.initializer;return!!t&&t.kind!=Qe.SK.ArrayLiteralExpression&&!O(t)}return!1}function O(e){if(!e)return!1;if(ht(e))return!1;switch(e.kind){case Qe.SK.NullKeyword:case Qe.SK.NumericLiteral:case Qe.SK.TrueKeyword:case Qe.SK.FalseKeyword:return!1;case Qe.SK.Identifier:return!w(Q(e));case Qe.SK.PropertyAccessExpression:var t=Q(e);return!t||t.kind!=Qe.SK.EnumMember;case Qe.SK.ArrayLiteralExpression:return e.elements.some(O);default:return!0}}function R(e){if(kt(e)){if(Bt(e).shim)return ne(e,e,[]);if(w(e))return Je(e.initializer)}var t=D(e);return x(e),t.load()}function L(e){Bt(e).shim&&at(9207,St("built-in functions cannot be yet used as values; did you forget ()?")),Ht(e)&&at(9232,St("generic functions cannot be yet used as values; did you forget ()?"));var t=Y(e);return t.location?t.location.load():(Qe.assert(!z.finalPass||0==t.capturedVars.length,"!bin.finalPass || info.capturedVars.length == 0"),_e(e))}function q(e){var t=function e(t){return t?vt(t)?t:e(t.parent):null}(e);t||at(9208,St("'this' used outside of a method"));var n=Y(t);return n.thisParameter||Qe.oops("no this"),R(n.thisParameter)}function P(e){if(""==e)return Qe.ir.rtcall("String_::mkEmpty",[]);var t=z.emitString(e);return Qe.ir.ptrlit(t+"meta",JSON.stringify(e),!0)}function M(e){for(var t=function(e,t){return ht(n=t)&&""==n.text?e:Qe.ir.rtcallMask("String_::concat",3,Qe.ir.CallingConvention.Plain,[e,Ue(t)]);var n},n=Ue(e.head),o=0,r=e.templateSpans;o<r.length;o++){var i=r[o];n=t(n=t(n,i.expression),i.literal)}return n}function F(e){var t=Q(e);if((!t||t.kind==Qe.SK.PropertyDeclaration&&!mt(t)||t.kind==Qe.SK.PropertySignature||t.kind==Qe.SK.PropertyAssignment)&&(Je(e.expression,!1),!t))return Qe.ir.numlit(0);if(t.kind==Qe.SK.GetAccessor)return re(e,e,[],null);var n=Bt(t),o={decl:t,qName:Qe.getFullName(Tt,t.symbol),args:[],isExpression:!0};if(e.callInfo=o,t.kind==Qe.SK.EnumMember){var r=n.enumval;if(!r){var i=Tt.getConstantValue(t);if(null==i){if(t.initializer)return Je(t.initializer);at(9210,St("Cannot compute enum value"))}r=i+""}return/^[+-]?\d+$/.test(r)?we(parseInt(r)):/^0x[A-Fa-f\d]{2,8}$/.test(r)?we(parseInt(r,16)):(Qe.U.userError("enumval only support number literals"),Qe.ir.rtcall(r,[]))}if(t.kind==Qe.SK.PropertySignature||t.kind==Qe.SK.PropertyAssignment)return re(e,e,[],null,t,e.expression);if(t.kind==Qe.SK.PropertyDeclaration){if(mt(t))return R(t);var a=function(e){var t=Mt(e.expression);if(Rt(t)){var n=N(t);return Ee(n,Se(n,e.name.text),Mt(e))}throw j(e,St("bad field access"),9247)}(e);return o.args.push(e.expression),Qe.ir.op(tt.FieldAccess,[Je(e.expression)],a)}if(vt(t)||t.kind==Qe.SK.MethodSignature)throw at(9211,St("cannot use method as lambda; did you forget '()' ?"));if(t.kind==Qe.SK.FunctionDeclaration)return L(t);if(t.kind==Qe.SK.VariableDeclaration)return R(t);throw j(e,St("Unknown property access for {0}",it(t)),9237)}function U(e,t){void 0===t&&(t=null);var n=Mt(e.expression),o={callingConvention:Qe.ir.CallingConvention.Plain,paramDefl:{}},r=null;if(!t&&$t(n)?r="String_::charAt":Nt(n)?r=t?"Array_::setAt":"Array_::getAt":wt(n)&&(o=Dt(n.symbol),r=t?o.indexerSet:o.indexerGet),r){if(Oe(e.argumentExpression))return Re(r,[e.expression,e.argumentExpression],o,t?[t]:[]);throw j(e,St("non-numeric indexer on {0}",r),9238)}throw j(e,St("unsupported indexer"),9239)}function H(e){var t,n,o=!(!kt(n=e)||O(n.initializer)&&!Bt(n).whenUsed)||(t=e).kind==Qe.SK.FunctionDeclaration&&!bt(t)||vt(t);return!(f.testMode&&o&&!Qe.U.startsWith(on.getSourceFileOfNode(e).fileName,"pxt_modules"))&&o}function G(e){return!H(e)||u.hasOwnProperty(S(e))}function Z(e,t){if(Y(e).isUsed=!0,t&&t.length){var n=Y(e);n.usages||(u[S(e)]=e,n.usages=[],n.prePassUsagesEmitted=0,f.computeUsedSymbols&&e&&e.symbol&&(V.usedSymbols[Qe.getFullName(Tt,e.symbol)]=null));var o=Xt(t);n.usages.some(function(e){return Xt(e)==o})||(n.usages.push(t),v.push(e))}else $(e)}function $(e){f.computeUsedSymbols&&e&&e.symbol&&(V.usedSymbols[Qe.getFullName(Tt,e.symbol)]=null),e&&!G(e)&&(u[S(e)]=e,v.push(e))}function Q(e){if(!e)return null;var t,n=Tt.getSymbolAtLocation(e);if(n&&!(t=n.valueDeclaration)&&n.declarations){var o=n.declarations[0];o&&o.kind==on.SyntaxKind.ImportEqualsDeclaration&&(n=Tt.getSymbolAtLocation(o.moduleReference))&&(t=n.valueDeclaration)}return $(t),t}function ee(e){return e.kind==Qe.SK.NullKeyword||e.kind==Qe.SK.NumericLiteral?!!e.isRefOverride:!(!ct()&&ht(e))&&gt(Mt(e))}function te(e){Qe.assert(e.length<=8,"args.length <= 8");var n=0;return e.forEach(function(e,t){ee(e)&&(n|=1<<t)}),n}function ne(e,t,n){var o,r,i,a=Bt(e),s=!(Mt(t).flags&on.TypeFlags.Void),l=a.shim;if(f.target.needsUnboxing)switch(l){case"Number_::toString":case"Boolean_::toString":l="numops::toString"}if(0<=l.indexOf("(")){var c=/(.*)\((.*)\)$/.exec(l);if(c){n.length&&Qe.U.userError("no arguments expected");var u=[];if(c[2].replace(/\s/g,"")){for(var g=0,p=c[2].split(/,/);g<p.length;g++){var d=p[g],_=parseInt(d);isNaN(_)&&(null==(_=Ie(t,d))&&(i=void 0,null==(i=Be(o=t,r=d,"userconfig"))&&(i=Be(o,r,"config")),_=i),null==_&&Qe.U.userError("invalid argument: "+d+" in "+l)),u.push(Qe.ir.numlit(_))}4<u.length&&Qe.U.userError("too many args")}return l=c[1],f.target.isNative&&Qe.hex.validateShim(Wt(e),l,a,!0,u.map(function(e){return!0})),Qe.ir.rtcallMask(l,0,a.callingConvention,u)}}return"TD_NOOP"==l?(Qe.assert(!s,"!hasRet"),we(void 0)):"TD_ID"==l?(Qe.assert(1==n.length,"args.length == 1"),Je(n[0])):(f.target.isNative&&Qe.hex.validateShim(Wt(e),l,a,s,n.map(Oe)),Re(l,n,a))}function oe(e,r,i){if(e){var t=e.getParameters(),n=r.length;t.length>r.length&&t.slice(r.length).forEach(function(e){if(e.valueDeclaration&&e.valueDeclaration.kind==Qe.SK.Parameter){var t=e.valueDeclaration;if(t.initializer)(function(e){switch(e.kind){case Qe.SK.NullKeyword:case Qe.SK.TrueKeyword:case Qe.SK.FalseKeyword:case Qe.SK.NumericLiteral:return!0;case Qe.SK.PropertyAccessExpression:return Je(e).exprKind==tt.NumberLiteral;default:return!1}})(t.initializer)||at(9212,St("only numbers, null, true and false supported as default arguments")),r.push(t.initializer);else{var n=i.paramDefl[It(t)],o=n?we(parseInt(n)):null;null==o&&(o=Mt(t).flags&on.TypeFlags.NumberLike?we(0):we(void 0)),r.push(ke(o))}}else at(9213,St("unsupported default argument (shouldn't happen)"))});for(var o=0;o<n;o++){var a=t[o];a&&a.valueDeclaration&&a.valueDeclaration.kind==Qe.SK.Parameter&&Ft(r[o],a.valueDeclaration)}i.imageLiteral&&(ht(r[0])||at(9214,St("Only image literals (string literals) supported here; {0}",it(r[0]))),r[0]=function(e){e||(e="0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n0 0 0 0 0\n");var t=0,n=0,o=0,r="";e+="\n";for(var i=0;i<e.length;++i)switch(e[i]){case".":case"_":case"0":r+="0,",t++;break;case"#":case"*":case"1":r+="1,",t++;break;case"\t":case"\r":case" ":break;case"\n":t&&(0==n?n=t:t!=n&&at(9205,St("lines in image literal have to have the same width (got {0} and then {1} pixels)",n,t)),t=0,o++);break;default:at(9206,St("Only 0 . _ (off) and 1 # * (on) are allowed in image literals"))}var a="_img"+z.lblNo++;r.length%4!=0&&(r+="42"),z.otherLiterals.push("\n.balign 4\n"+a+": .short 0xffff\n        .short "+n+", "+o+"\n        .byte "+r+"\n");var s="new pxsim.Image("+n+", ["+r+"])";return{kind:Qe.SK.NumericLiteral,imageLiteral:a,jsLit:s}}(r[0].text))}}function re(e,t,n,o,r,i){void 0===r&&(r=null),void 0===i&&(i=null),r||(r=Q(t));var a=!1;if(r)switch(r.kind){case Qe.SK.PropertySignature:case Qe.SK.PropertyAssignment:case Qe.SK.MethodDeclaration:case Qe.SK.MethodSignature:case Qe.SK.GetAccessor:case Qe.SK.SetAccessor:a=!0;break;case Qe.SK.ModuleDeclaration:case Qe.SK.FunctionDeclaration:break;default:r=null}var s=Bt(r),l=!(Mt(e).flags&on.TypeFlags.Void),c=n.slice(0),u={decl:r,qName:r?Qe.getFullName(Tt,r.symbol):"?",args:c.slice(0),isExpression:l};e.callInfo=u,!a||i||mt(r)||t.kind!=Qe.SK.PropertyAccessExpression||(i=t.expression),0==u.args.length&&Qe.U.lookup(W,u.qName)&&(u.isAutoCreate=!0);var g=ue(o),p=0<g.length;if(Yt(g,r),V.usedArguments&&s.trackArgs){var d=i?[i].concat(c):c,_=s.trackArgs.map(function(e){return d[e]}).map(function(e){var t=Q(e);return!t||t.kind!=Qe.SK.EnumMember&&t.kind!=Qe.SK.VariableDeclaration?"*":Qe.getFullName(Tt,t.symbol)}).join(","),f=Qe.getFullName(Tt,r.symbol),h=V.usedArguments[f];h||(h=V.usedArguments[f]=[]),h.indexOf(_)<0&&h.push(_)}function m(){return se(r,c.map(function(e){return Je(e)}),g)}if(X(function(){Qe.U.pushRange(At,g),oe(o,c,s)}),r&&r.kind==Qe.SK.FunctionDeclaration&&!(b=Y(r)).location)return s.shim&&!he(r)?ne(r,e,c):(Z(r,g),m());if(t.kind==Qe.SK.SuperKeyword){var y=K.classInfo.baseClassInfo.ctor;Qe.assert(!z.finalPass||!!y,"!bin.finalPass || !!baseCtor");var v=c.map(function(e){return Je(e)});return v.unshift(q(t)),ie(y,null,v)}if(a){var b,k=!1;if(mt(r)||(i?(i.kind==Qe.SK.SuperKeyword&&(k=!0),c.unshift(i),u.args.unshift(i),g=Kt(Mt(i)).concat(g)):j(e,St("strange method call"),9241)),(b=Y(r)).virtualParent&&(b=b.virtualParent),!b.isUsed){b.isUsed=!0;for(var T=0,E=b.virtualInstances||[];T<E.length;T++){var S=E[T];S.parentClassInfo.isUsed&&Z(S.decl,g)}b.decl.kind==Qe.SK.MethodDeclaration&&Z(b.decl,g)}if(b.virtualParent&&!k)return Qe.U.assert(!z.finalPass||null!=b.virtualIndex,"!bin.finalPass || info.virtualIndex != null"),ie(null,b.virtualIndex,c.map(function(e){return Je(e)}));if(s.shim&&!he(r))return ne(r,e,c);if(s.helper){for(var C=void 0,x=0,A=Tt.getSymbolsInScope(e,on.SymbolFlags.Module);x<A.length;x++){var D=A[x];if("helpers"==D.name)for(var B=0,I=D.declarations||[D.valueDeclaration];B<I.length;B++){var N=I[B];if(N.kind==Qe.SK.ModuleDeclaration)for(var w=0,O=N.body.statements;w<O.length;w++){var R=O[w];R.symbol.name==s.helper&&(C=R)}}}C||at(9215,St("helpers.{0} not found",s.helper)),C.kind!=Qe.SK.FunctionDeclaration&&at(9216,St("helpers.{0} isn't a function",s.helper)),r=C;var L=Tt.getSignatureFromDeclaration(r).getTypeParameters()||[];return L.length!=g.length&&Qe.U.oops("helpers type parameter mismatch"),g.forEach(function(e,t){e.tp=L[t]}),Z(r,g),m()}if(r.kind==Qe.SK.MethodSignature){var P=It(r);return ie(null,null,c.map(function(e){return Je(e)}),J(P))}if(r.kind!=Qe.SK.PropertySignature&&r.kind!=Qe.SK.PropertyAssignment)return Z(r,g),m();if(e==t){var M=It(r),F=ie(null,null,c.map(function(e){return Je(e)}),J(M));if(r.kind==Qe.SK.PropertySignature||r.kind==Qe.SK.PropertyAssignment){var U=F.data;U.mapIdx=U.ifaceIndex;var H="";2==c.length?(ee(c[1])&&(H="Ref"),U.ifaceIndex=J("set/"+M),U.mapMethod="pxtrt::mapSet"+H):(gt(Mt(e))&&(H="Ref"),U.mapMethod="pxtrt::mapGet"+H)}return F}c.shift(),u.args.shift()}p&&Qe.U.oops("invalid generic call"),r&&r.kind==Qe.SK.ModuleDeclaration&&("String"==It(r)?at(9219,St('to convert X to string use: X + ""')):at(9220,St("namespaces cannot be called directly"))),c.length>(lt()?2:3)&&at(9217,St("lambda functions with more than 3 arguments not supported"));var G=c.length+"";return c.unshift(t),u.args.unshift(t),Qe.ir.rtcallMask("pxt::runAction"+G,te(c),Qe.ir.CallingConvention.Async,c.map(function(e){return Je(e)}))}function ie(e,t,n,o){void 0===o&&(o=null);var r={proc:e,virtualIndex:t,ifaceIndex:o};return Qe.ir.op(tt.ProcCall,n,r)}function ae(e,t){var n={action:e,bindings:t};return z.procs.filter(function(e){return e.matches(n)})[0]}function se(e,t,n){var o=ae(e,n);return Qe.assert(!!o||!z.finalPass,"!!proc || !bin.finalPass"),ie(o,null,t)}function le(e){return e.members.filter(function(e){return e.kind==Qe.SK.Constructor})[0]}function ce(e){return null!=Qe.U.lookup(E,e)}function ue(t){var e=[];if(t){var n=t.target,o=t.typeParameters||(n?n.typeParameters:null)||[];e=zt(o,o.map(function(e){return t.mapper(e)}))}return e}function ge(e){var t=Mt(e);if(Nt(t))throw Qe.oops();if(Rt(t)){var n=Q(e.expression);n.kind!=Qe.SK.ClassDeclaration&&at(9221,St("new expression only supported on class types"));for(var o=void 0,r=N(Mt(e),n),i=r;i&&!(o=le(i.decl));i=i.baseClassInfo);!function e(t){if(!t.isUsed){t.isUsed=!0,t.baseClassInfo&&e(t.baseClassInfo),z.usedClassInfos.push(t);for(var n=0,o=t.methods;n<o.length;n++){var r=o[n],i=Y(r);(ce(It(r))||i.virtualParent&&i.virtualParent.isUsed)&&Z(r,t.bindings)}var a=le(t.decl);a&&Z(a,t.bindings)}}(r);var a=r.id+"_VT",s=Qe.ir.rtcall("pxt::mkClassInstance",[Qe.ir.ptrlit(a,a)]);if(s=Qe.ir.shared(s),o){$(o);var l=e.arguments.slice(0),c=Bt(o),u=ue(Tt.getResolvedSignature(e));oe(Tt.getResolvedSignature(e),l,c);var g=l.map(function(e){return Je(e)});return c.shim?(st()||Qe.U.userError("shim=... on constructor not supported right now"),Qe.ir.rtcall(c.shim,g)):(g.unshift(Qe.ir.op(tt.Incr,[s])),K.emitExpr(se(o,g,u)),s)}return e.arguments&&e.arguments.length&&at(9222,St("constructor with arguments not found")),s}throw j(e,St("unknown type for new"),9243)}function pe(c){function a(e){return/^[0-9a-f]$/i.test(e)}var e=Q(c.tag);if(!e)throw j(c,St("invalid tagged template"),9265);var t,u=Bt(e),n={decl:e,qName:e?Qe.getFullName(Tt,e.symbol):"?",args:[c.template],isExpression:!0};function o(e){if(c.template.kind!=Qe.SK.NoSubstitutionTemplateLiteral)throw j(c,St("substitution not supported in hex literal",u.shim),9265);t=function(e){var t=p;"_"==e[0]&&"_"==e[1]&&f.jres[e]&&(t=f.jres[e],e=""),""==e&&t&&(t.dataEncoding&&"base64"!=t.dataEncoding?"hex"==t.dataEncoding?e=t.data:at(9271,St("invalid jres encoding '{0}' on '{1}'",t.dataEncoding,t.id)):e=Qe.U.toHex(Qe.U.stringToUint8Array(on.pxtc.decodeBase64(t.data))));for(var n="",o=0;o<e.length;++o){var r=e[o];if(!a(r)){if(/^[\s\.]$/.test(r))continue;throw j(c,St("invalid character in hex literal '{0}'",r),9265)}a(e[o+1])&&(n+=r+e[o+1],o++)}var i=z.emitHexLiteral(n.toLowerCase());return Qe.ir.ptrlit(i,i,!0)}(e(c.template.text))}switch(c.callInfo=n,u.shim){case"@hex":o(function(e){return e});break;case"@f4":o(function(e){if(!Array.isArray(u.groups))throw j(c,St("missing groups in @f4 literal"),9272);var n=[],t=[],i={},o=0;u.groups.forEach(function(e,t){for(var n=0,o=e;n<o.length;n++){var r=o[n];i[r]=t}}),e+="\n";for(var r=0;r<e.length;++r){var a=e[r];switch(a){case" ":case"\t":break;case"\n":0<t.length&&(n.push(t),o=Math.max(t.length,o),t=[]);break;default:var s=Qe.U.lookup(i,a);if(null==s){if(2!=u.groups.length)throw j(c,St("invalid character in image literal: '{0}'",s),9273);s=1}t.push(s)}}var l=8;return u.groups.length<=2?l=1:u.groups.length<=16&&(l=4),Qe.f4EncodeImg(o,n.length,l,function(e,t){return n[t][e]||0})});break;default:throw j(c,St("invalid shim '{0}' on tagged template",u.shim),9265)}return u.helper&&(t=Qe.ir.rtcall(u.helper,[t])),t}function de(e){var t=e.parameters.slice(0);if(!mt(e)&&vt(e)){var n=Y(e);n.thisParameter||(n.thisParameter={kind:Qe.SK.Parameter,name:{text:"this"},isThisParameter:!0,parent:e}),t.unshift(n.thisParameter)}return t}function _e(e,t){void 0===t&&(t=!1);var n=Jt(e,jt(e)),o=n;Qe.target.nativeType==Qe.NATIVE_TYPE_CS&&(o="(FnPtr)"+o,t||(o="PXT.pxt.mkAction(0, 0, "+o+")"));var r=Qe.ir.ptrlit(n+"_Lit",o,!ct()&&!t);return!t&&ct()&&(r=Qe.ir.shared(Qe.ir.rtcall("pxt::mkAction",[Qe.ir.numlit(0),Qe.ir.numlit(0),r]))),r}function fe(e,t){var n=Y(e),r=null,o=e.kind==Qe.SK.ArrowFunction||e.kind==Qe.SK.FunctionExpression,i=function(e){if(pt(e))return!0;var t=C(e);return t.captured&&t.written},a=n.capturedVars.filter(function(e){return i(e)}),s=n.capturedVars.filter(function(e){return!i(e)}),l=a.concat(s),c=l.map(function(e,t){var n=new Qe.ir.Cell(t,e,C(e));return n.iscap=!0,n});o&&Ht(e)&&at(9233,St("function expressions cannot be generic")),0<l.length&&Ht(e)&&at(9234,St("nested functions cannot be generic yet")),0<l.length?(Qe.assert(null!=bt(e),"getEnclosingFunction(node) != null)"),r=Qe.ir.shared(Qe.ir.rtcall("pxt::mkAction",[Qe.ir.numlit(a.length),Qe.ir.numlit(l.length),_e(e,!0)])),l.forEach(function(e,t){var n=K.localIndex(e);n||at(9223,St("cannot find captured value: {0}",Tt.symbolToString(e.symbol)));var o=n.loadCore();(n.isRef()||n.isByRefLocal())&&(o=Qe.ir.op(tt.Incr,[o])),K.emitExpr(Qe.ir.rtcall("pxtrt::stclo",[r,Qe.ir.numlit(t),o]))}),e.kind==Qe.SK.FunctionDeclaration&&(n.location=K.mkLocal(e,C(e)),K.emitExpr(n.location.storeDirect(r)),r=null)):o&&(r=_e(e)),Qe.assert(!!r==o,"!!lit == isExpression");var u={action:e,bindings:t},g=z.procs.filter(function(e){return e.matches(u)})[0];if(g?(K=g).reset():(Qe.assert(!z.finalPass,"!bin.finalPass"),(K=new Qe.ir.Procedure).isRoot=!!e.isRootFunction,K.action=e,K.info=n,K.bindings=t,z.addProc(K)),K.captured=c,e.parent.kind==Qe.SK.ClassDeclaration){var p=e.parent,d=p.typeParameters?p.typeParameters.length:0;Qe.assert(t.length>=d,"bindings.length >= numTP");var _=N(null,p,t.slice(0,d));K.classInfo?Qe.assert(K.classInfo==_,"proc.classInfo == classInfo"):K.classInfo=_,e.kind==Qe.SK.Constructor&&(_.ctor?Qe.assert(_.ctor==K,"classInfo.ctor == proc"):_.ctor=K)}Qe.U.pushRange(At,t);var f=[];if(K.args=de(e).map(function(e,t){e.name.kind===Qe.SK.ObjectBindingPattern&&f.push(e);var n=new Qe.ir.Cell(t,e,C(e));return n.isarg=!0,n}),K.args.forEach(function(e){if(e.isByRefLocal()){var t=Qe.ir.shared(Qe.ir.rtcall("pxtrt::mkloc"+e.refSuffix(),[]));K.emitExpr(Qe.ir.rtcall("pxtrt::stloc"+e.refSuffix(),[t,e.loadCore()])),K.emitExpr(e.storeDirect(t))}}),f.forEach(function(e){return je(e)}),e.body.kind==Qe.SK.Block)Ze(e.body);else{var h=Je(e.body);K.emitJmp(Ve(e).ret,h,Qe.ir.JmpMode.Always)}K.emitLblDirect(Ve(e).ret),K.stackEmpty();var m=K.mkLabel("final"),y=Vt(K.action);for(y?(h=Qe.ir.shared(Qe.ir.op(tt.JmpValue,[])),K.emitExpr(h),K.emitClrs(m,h),K.emitJmp(m,h,Qe.ir.JmpMode.Always)):K.emitClrs(m,null),(y||lt())&&K.emitLbl(m),Qe.assert(!z.finalPass||0==v.length,"!bin.finalPass || usedWorkList.length == 0");0<v.length;)Ze(v.pop());return r}function he(e){if(f.target.isNative)return!1;var t=e;return t.body&&(t.body.kind!=Qe.SK.Block||0<t.body.statements.length)}function me(n){if(G(n)){var e=Bt(n);if(null!=e.shim){if("@"==e.shim[0])return;if(f.target.isNative&&Qe.hex.validateShim(Wt(n),e.shim,e,Vt(n),de(n).map(function(e){return nn(Mt(e))})),!he(n))return}if(!on.isInAmbientContext(n)&&n.body){var t=Y(n),o=null;if(Ht(n)){t.usages||(Qe.assert(f.testMode&&!u[S(n)]&&!z.finalPass,"opts.testMode && !usedDecls[nodeKey(node)] && !bin.finalPass"),Yt(l=Qe.Util.toArray(Gt(n)).map(function(e){return{arg:Tt.getTypeAtLocation(e),tp:Tt.getTypeAtLocation(e),isRef:!0}}),n),Qe.U.assert(0<l.length,"bindings.length > 0"),t.usages=[l]),Qe.U.assert(0<t.usages.length,"no generic usages recorded");var r=t.usages;z.finalPass||(r=t.usages.slice(t.prePassUsagesEmitted),t.prePassUsagesEmitted=t.usages.length);for(var i=function(t){X(function(){var e=fe(n,t);Qe.U.assert(null==e,"nolit == null")})},a=0,s=r;a<s.length;a++){var l;i(l=s[a])}}else X(function(){o=fe(n,jt(n))});return o}}}function ye(){}function ve(e){var t=e;t.needsIRCache=!0,a.push(t)}function be(e,t){void 0===t&&(t=null);var n=a.length;return e.kind!=Qe.SK.PropertyAccessExpression&&e.kind!=Qe.SK.ElementAccessExpression||ve(e.expression),t&&ve(t),a.length==n?ye:function(){for(var e=n;e<a.length;++e)a[e].cachedIR=null,a[e].needsIRCache=!1;a.splice(n,a.length-n)}}function ke(e,t){return void 0===t&&(t=!1),{kind:Qe.SK.NullKeyword,isRefOverride:t,valueOverride:e}}function Te(e,t,n,o){void 0===o&&(o=null);var r=be(e),i=o?Je(o):we(1),a=Qe.ir.shared(Je(e)),s=Qe.ir.shared(Ae(t,a,i));Ce(e,ke(s,f.target.taggedInts)),r();var l=n?a:s;return f.target.taggedInts?Qe.ir.op(tt.Incr,[l]):l}function Ee(e,t,n){var o=Bt(t);return{idx:e.allfields.indexOf(t),name:It(t),isRef:gt(n),shimName:o.shim}}function Se(e,t){var n=e.allfields.filter(function(e){return e.name.text==t})[0];return n||at(9224,St("field {0} not found",t)),n}function Ce(e,t,n){void 0===n&&(n=!1),n&&Ft(t,e);var o=Q(e),r=kt(o);if(e.kind==Qe.SK.Identifier||r)if(o&&(r||o.kind==Qe.SK.VariableDeclaration||o.kind==Qe.SK.Parameter)){var i=D(o);x(o,!0),K.emitExpr(i.storeByRef(Je(t)))}else j(e,St("bad target identifier"),9248);else if(e.kind==Qe.SK.PropertyAccessExpression){var a=Q(e);a&&a.kind==Qe.SK.GetAccessor?((a=on.getDeclarationOfKind(a.symbol,Qe.SK.SetAccessor))||j(e,St("setter not available"),9253),K.emitExpr(re(e,e,[t],null,a))):!a||a.kind!=Qe.SK.PropertySignature&&a.kind!=Qe.SK.PropertyAssignment?K.emitExpr(Qe.ir.op(tt.Store,[Je(e),Je(t)])):K.emitExpr(re(e,e,[t],null,a))}else e.kind==Qe.SK.ElementAccessExpression?K.emitExpr(U(e,t)):j(e,St("bad assignment target"),9249)}function xe(e){if(!f.target.floatingPoint){if(Qe.U.startsWith(e,"numops::")){var t=e.slice(8);return Qe.U.lookup(Qe.thumbArithmeticInstr,t)?"thumb::"+t:"lt_bool"==t?"Number_::lt":"Number_::"+t.replace(/eqq/,"eq")}switch(e){case"pxt::eq_bool":case"pxt::eqq_bool":case"langsupp::ptreq":case"langsupp::ptreqq":return"Number_::eq";case"langsupp::ptrneq":case"langsupp::ptrneqq":return"Number_::neq"}}if(f.target.taggedInts&&ut())switch(e){case"numops::adds":case"numops::subs":case"numops::eors":case"numops::ands":case"numops::orrs":return"@nomask@"+e}return e}function Ae(e,t,n){return e=xe(e),Qe.ir.rtcallMask(e,f.target.taggedInts?3:0,Qe.ir.CallingConvention.Plain,[t,n])}function De(e){var t=Ne(Je(e));if(void 0===t)throw at(9267,St("a constant number-like expression is required here"));return t}function Be(e,t,n){var o=Tt.getSymbolsInScope(e,on.SymbolFlags.Module).filter(function(e){return e.name==n&&!!e.valueDeclaration})[0];if(!o)return null;for(var r=0,i=o.valueDeclaration.body.statements;r<i.length;r++){var a=i[r];if(a.kind==Qe.SK.VariableStatement)for(var s=0,l=a.declarationList.declarations;s<l.length;s++){var c=l[s];if(c.symbol.name==t)return De(c.initializer)}}return null}function Ie(e,t){var n=Tt.getSymbolsInScope(e,on.SymbolFlags.Enum).filter(function(e){return"DAL"==e.name&&!!e.valueDeclaration})[0];if(!n)return null;var o=n.valueDeclaration.members.filter(function(e){return e.symbol.name==t})[0];return o?Tt.getConstantValue(o):null}function Ne(e){if(e.exprKind==Qe.ir.EK.NumberLiteral){var t=e.data;if(f.target.taggedInts){if(t==Qe.taggedNull||t==Qe.taggedUndefined||t==Qe.taggedFalse)return 0;if(t==Qe.taggedTrue)return 1;if("number"==typeof t)return t>>1}else if("number"==typeof t)return t}}function we(e){if(f.target.taggedInts){if(null===e)return Qe.ir.numlit(Qe.taggedNull);if(void 0===e)return Qe.ir.numlit(Qe.taggedUndefined);if(!1===e)return Qe.ir.numlit(Qe.taggedFalse);if(!0===e)return Qe.ir.numlit(Qe.taggedTrue);if("number"==typeof e){if(n=e,!Qe.target.boxDebug&&(0|n)==n&&-1073741824<=n&&n<=1073741823)return Qe.ir.numlit(e<<1|1);var t=z.emitDouble(e);return Qe.ir.ptrlit(t,JSON.stringify(e),!0)}throw Qe.U.oops("bad literal: "+e)}return f.target.floatingPoint||(!1!==e&&null!=e||(e=0),!0===e&&(e=1)),Qe.ir.numlit(e);var n}function Oe(e){if(e.kind==Qe.SK.NullKeyword){var t=e.valueOverride;if(void 0!==t)return t.exprKind==tt.NumberLiteral?!f.target.taggedInts||!!(1&t.data):t.exprKind==tt.RuntimeCall&&"pxt::ptrOfLiteral"==t.data?t.args[0].exprKind==tt.PointerLiteral&&!isNaN(parseFloat(t.args[0].jsInfo)):t.exprKind==tt.PointerLiteral&&!isNaN(parseFloat(t.jsInfo))}return e.kind==Qe.SK.NumericLiteral||nn(Mt(e))}function Re(i,e,t,n){void 0===n&&(n=null);var a="",o=Qe.hex.lookupFunc(i);o&&(a=o.argsFmt),n&&(e=e.concat(n));var r,s,l=te(e),c=e.map(function(e,t){var n=Je(e);if(!f.target.taggedInts)return n;var o=a.charAt(t+1),r=Oe(e);if(o){if("_"==o||"T"==o||"N"==o)return n;if("I"==o)return r||Qe.U.userError("argsFmt=...I... but argument not a number in "+i),n.exprKind==tt.NumberLiteral&&"number"==typeof n.data?Qe.ir.numlit(n.data>>1):(l&=~(1<<t),Qe.ir.rtcallMask("pxt::toInt",te([e]),Qe.ir.CallingConvention.Plain,[n]));if("B"==o)return l&=~(1<<t),Ge(e,n);if("F"==o||"D"==o)return"D"==o&&Qe.U.oops("double arguments not yet supported"),r||Qe.U.userError("argsFmt=...F/D... but argument not a number in "+i),l&=~(1<<t),Qe.ir.rtcallMask("D"==o?"pxt::toDouble":"pxt::toFloat",te([e]),Qe.ir.CallingConvention.Plain,[n]);throw Qe.U.oops("invalid format specifier: "+o)}throw Qe.U.userError("not enough args for "+i)}),u=Qe.ir.rtcallMask(i,l,t.callingConvention,c);return f.target.taggedInts&&("I"==a.charAt(0)?u=dt(u):"B"==a.charAt(0)?u=_t(u):"F"==a.charAt(0)?(s=u,u=Qe.target.taggedInts?Qe.ir.rtcall("pxt::fromFloat",[s]):s):"D"==a.charAt(0)&&(Qe.U.oops("double returns not yet supported"),r=u,u=Qe.target.taggedInts?Qe.ir.rtcall("pxt::fromDouble",[r]):r)),u}function Le(e){var t=K.mkLabel("ldjmp");K.emitJmp(t,e,Qe.ir.JmpMode.Always),K.emitLbl(t)}function Pe(e){if(z.numStmts++,f.breakpoints){var t=on.getSourceFileOfNode(e);if(!f.justMyCode||!Qe.U.startsWith(t.fileName,"pxt_modules")){for(var n=e.pos;/^\s$/.exec(t.text[n]);)n++;var o=on.getLineAndCharacterOfPosition(t,n),r=on.getLineAndCharacterOfPosition(t,e.end),i={id:V.breakpoints.length,isDebuggerStmt:e.kind==Qe.SK.DebuggerStatement,fileName:t.fileName,start:n,length:e.end-n,line:o.line,endLine:r.line,column:o.character,endColumn:r.character};V.breakpoints.push(i);var a=Qe.ir.stmt(Qe.ir.SK.Breakpoint,null);a.breakpointInfo=i,K.emit(a)}}}function Me(e,t){switch(t){case Qe.SK.PlusToken:return"numops::adds";case Qe.SK.MinusToken:return"numops::subs";case Qe.SK.SlashToken:return f.warnDiv&&(n=e,o=9274,r="usage of / operator",k(Qe.DiagnosticCategory.Warning,n,o,r,i,a,s)),"numops::div";case Qe.SK.PercentToken:return"numops::mod";case Qe.SK.AsteriskToken:return"numops::muls";case Qe.SK.AsteriskAsteriskToken:return"Math_::pow";case Qe.SK.AmpersandToken:return"numops::ands";case Qe.SK.BarToken:return"numops::orrs";case Qe.SK.CaretToken:return"numops::eors";case Qe.SK.LessThanLessThanToken:return"numops::lsls";case Qe.SK.GreaterThanGreaterThanToken:return"numops::asrs";case Qe.SK.GreaterThanGreaterThanGreaterThanToken:return"numops::lsrs";case Qe.SK.LessThanEqualsToken:return"numops::le";case Qe.SK.LessThanToken:return"numops::lt";case Qe.SK.GreaterThanEqualsToken:return"numops::ge";case Qe.SK.GreaterThanToken:return"numops::gt";case Qe.SK.EqualsEqualsToken:return"numops::eq";case Qe.SK.EqualsEqualsEqualsToken:return"numops::eqq";case Qe.SK.ExclamationEqualsEqualsToken:return"numops::neqq";case Qe.SK.ExclamationEqualsToken:return"numops::neq";default:return null}var n,o,r,i,a,s}function Fe(n){if(n.operatorToken.kind==Qe.SK.EqualsToken)return function(e){var t=be(e.left,e.right);Ce(e.left,e.right,!0);var n=Je(e.right);return t(),n}(n);var e=Mt(n.left),t=Mt(n.right);n.operatorToken.kind==Qe.SK.PlusToken&&($t(e)||$t(t))&&(n.exprInfo={leftType:Tt.typeToString(e),rightType:Tt.typeToString(t)});var o=function(e){e=xe(e);var t=[n.left,n.right];return Qe.ir.rtcallMask(e,te(t),Qe.ir.CallingConvention.Plain,t.map(function(e){return Je(e)}))};if(n.operatorToken.kind==Qe.SK.CommaToken){if(We(n.left))return Je(n.right);var r=Ke(n.left);return Qe.ir.op(tt.Sequence,[r,Je(n.right)])}switch(n.operatorToken.kind){case Qe.SK.BarBarToken:case Qe.SK.AmpersandAmpersandToken:return function(e){var t=Je(e.left),n=$t(Mt(e.left)),o=K.mkLabel("lazy");if(f.target.floatingPoint){t=Qe.ir.shared(t);var r=Qe.ir.rtcall("numops::toBool",[t]),i=K.mkLabel("lazySkip"),a=e.operatorToken.kind==Qe.SK.BarBarToken?Qe.ir.JmpMode.IfZero:e.operatorToken.kind==Qe.SK.AmpersandAmpersandToken?Qe.ir.JmpMode.IfNotZero:Qe.U.oops();K.emitJmp(i,r,a),K.emitJmp(o,t,Qe.ir.JmpMode.Always,t),K.emitLbl(i),ee(e.left)?K.emitExpr(Qe.ir.op(tt.Decr,[t])):K.emitExpr(Qe.ir.rtcall("langsupp::ignore",[t]))}else if(e.operatorToken.kind==Qe.SK.BarBarToken)n&&(t=Qe.ir.rtcall("pxtrt::emptyToNull",[t])),K.emitJmp(o,t,Qe.ir.JmpMode.IfNotZero);else if(e.operatorToken.kind==Qe.SK.AmpersandAmpersandToken)if(t=Qe.ir.shared(t),n){var s=K.mkLabel("lazyStr");K.emitJmp(s,Qe.ir.rtcall("pxtrt::emptyToNull",[t]),Qe.ir.JmpMode.IfNotZero),K.emitJmp(o,t,Qe.ir.JmpMode.Always,t),K.emitLbl(s),ee(e.left)?K.emitExpr(Qe.ir.op(tt.Decr,[t])):K.emitExpr(Qe.ir.rtcall("langsupp::ignore",[t]))}else ee(e.left)&&K.emitExpr(Qe.ir.op(tt.Decr,[t])),K.emitJmpZ(o,t);else Qe.oops();K.emitJmp(o,Je(e.right),Qe.ir.JmpMode.Always),K.emitLbl(o);var l=Qe.ir.shared(Qe.ir.op(tt.JmpValue,[]));return K.emitExpr(l),l}(n)}if(en(e)&&en(t)){var i=function(e){switch(e){case Qe.SK.PlusEqualsToken:return Qe.SK.PlusToken;case Qe.SK.MinusEqualsToken:return Qe.SK.MinusToken;case Qe.SK.AsteriskEqualsToken:return Qe.SK.AsteriskToken;case Qe.SK.AsteriskAsteriskEqualsToken:return Qe.SK.AsteriskAsteriskToken;case Qe.SK.SlashEqualsToken:return Qe.SK.SlashToken;case Qe.SK.PercentEqualsToken:return Qe.SK.PercentToken;case Qe.SK.LessThanLessThanEqualsToken:return Qe.SK.LessThanLessThanToken;case Qe.SK.GreaterThanGreaterThanEqualsToken:return Qe.SK.GreaterThanGreaterThanToken;case Qe.SK.GreaterThanGreaterThanGreaterThanEqualsToken:return Qe.SK.GreaterThanGreaterThanGreaterThanToken;case Qe.SK.AmpersandEqualsToken:return Qe.SK.AmpersandToken;case Qe.SK.BarEqualsToken:return Qe.SK.BarToken;case Qe.SK.CaretEqualsToken:return Qe.SK.CaretToken;default:return Qe.SK.Unknown}}(n.operatorToken.kind),a=Me(n,i||n.operatorToken.kind);return a||j(n.operatorToken,St("unsupported numeric operator"),9250),i?Te(n.left,a,!1,n.right):o(a)}if(n.operatorToken.kind==Qe.SK.PlusToken&&($t(e)||$t(t)))return Qe.ir.rtcallMask("String_::concat",3,Qe.ir.CallingConvention.Plain,[Ue(n.left),Ue(n.right)]);if(n.operatorToken.kind==Qe.SK.PlusEqualsToken&&$t(e)){var s=be(n.left),l=Qe.ir.shared(Qe.ir.rtcallMask("String_::concat",3,Qe.ir.CallingConvention.Plain,[Je(n.left),Ue(n.right)]));return Ce(n.left,ke(l)),s(),Qe.ir.op(tt.Incr,[l])}if($t(e)&&$t(t))switch(n.operatorToken.kind){case Qe.SK.EqualsEqualsToken:case Qe.SK.EqualsEqualsEqualsToken:case Qe.SK.ExclamationEqualsEqualsToken:case Qe.SK.ExclamationEqualsToken:if(f.target.needsUnboxing)break;case Qe.SK.LessThanEqualsToken:case Qe.SK.LessThanToken:case Qe.SK.GreaterThanEqualsToken:case Qe.SK.GreaterThanToken:return Qe.ir.rtcallMask(xe(Me(n,n.operatorToken.kind)),f.target.boxDebug?1:0,Qe.ir.CallingConvention.Plain,[dt(o("String_::compare")),we(0)]);default:j(n.operatorToken,St("unknown string operator"),9251)}switch(n.operatorToken.kind){case Qe.SK.EqualsEqualsToken:return o("langsupp::ptreq");case Qe.SK.EqualsEqualsEqualsToken:return o("langsupp::ptreqq");case Qe.SK.ExclamationEqualsEqualsToken:return o("langsupp::ptrneqq");case Qe.SK.ExclamationEqualsToken:return o("langsupp::ptrneq");default:throw j(n.operatorToken,St("unknown generic operator"),9252)}}function Ue(e){var t=Je(e);if(ht(e))return t;var n=Mt(e);if(Qe.target.floatingPoint&&n.flags&(on.TypeFlags.NumberLike|on.TypeFlags.Boolean|on.TypeFlags.BooleanLiteral))return Qe.ir.rtcallMask("numops::toString",1,Qe.ir.CallingConvention.Plain,[t]);if(n.flags&on.TypeFlags.NumberLike)return Qe.ir.rtcall("Number_::toString",[t]);if(Zt(n,on.TypeFlags.Boolean|on.TypeFlags.BooleanLiteral,et.Boolean))return Qe.ir.rtcall("Boolean_::toString",[t]);if($t(n))return t;var o=n.symbol?n.symbol.valueDeclaration:null;if(o&&(o.kind==Qe.SK.ClassDeclaration||o.kind==Qe.SK.InterfaceDeclaration)){var r=o.members.filter(function(e){return(e.kind==Qe.SK.MethodDeclaration||e.kind==Qe.SK.MethodSignature)&&0==e.parameters.length&&"toString"==It(e)})[0];if(r)return re(e,e,[],null,r,e);throw at(9254,St("type {0} lacks toString() method",It(o)))}throw at(9225,St("don't know how to convert to string"))}function He(e){if(e.flags&on.NodeFlags.Let||e.flags&on.NodeFlags.Const)return!0;throw at(9260,St("variable needs to be defined using 'let' instead of 'var'"))}function Ge(e,t){if(void 0===t&&(t=null),!t&&f.target.taggedInts&&ut()&&e.kind==Qe.SK.BinaryExpression){var n=e,o=Mt(n.left),r=Mt(n.right);if(o.flags&on.TypeFlags.NumberLike&&r.flags&on.TypeFlags.NumberLike){var i=Qe.U.lookup(Qe.thumbCmpMap,Me(n,n.operatorToken.kind));if(i)return Qe.ir.rtcall(i,[Je(n.left),Je(n.right)])}}return t||(t=Je(e)),f.target.floatingPoint?Qe.ir.rtcall("numops::toBoolDecr",[t]):$t(Mt(e))?Qe.ir.rtcall("pxtrt::stringToBool",[t]):ee(e)?Qe.ir.rtcall("pxtrt::ptrToBool",[t]):t}function Ve(e){var t=rt(e);return{fortop:".fortop."+t,cont:".cont."+t,brk:".brk."+t,ret:".ret."+t}}function We(e){if(!e)return!0;switch(e.kind){case Qe.SK.Identifier:case Qe.SK.StringLiteral:case Qe.SK.NumericLiteral:case Qe.SK.NullKeyword:return!0}return!1}function Ke(e){var t=Je(e),n=Mt(e);return n.flags&on.TypeFlags.Void||gt(n)&&(t=Qe.ir.op(tt.Decr,[t])),t}function ze(e){if(!We(e)){Pe(e);var t=Ke(e);K.emitExpr(t),K.stackEmpty()}}function je(e){if(e.name.kind===Qe.SK.ObjectBindingPattern){if(!e.initializer)return e.name.elements.forEach(function(e){return je(e)}),null;at(9259,"Object destructuring with initializers is not supported")}if(A(e),!G(e))return null;if(w(e))return null;var t=kt(e)?D(e):K.mkLocal(e,C(e));if(t.isByRefLocal()&&(K.emitClrIfRef(t),K.emitExpr(t.storeDirect(Qe.ir.rtcall("pxtrt::mkloc"+t.refSuffix(),[])))),e.kind===Qe.SK.BindingElement){Pe(e);var n=function e(t){var n,o,r=t.parent.parent;if(r.kind===Qe.SK.BindingElement){var i=e(r);n=i[0],o=i[1]}else o=Mt(r);var a=t.propertyName||t.name;if(Rt(o)){var s=N(o);n=n||R(r);var l=Tt.getTypeOfSymbolAtLocation(Tt.getPropertyOfType(o,a.text),t);return[Qe.ir.op(tt.FieldAccess,[n],Ee(s,Se(s,a.text),l)),l]}throw j(t,St("bad field access"),9247)}(e);Ft(n[1],e),K.emitExpr(t.storeByRef(n[0])),K.stackEmpty()}else if(e.initializer){if(Pe(e),kt(e)){var o=Bt(e).jres;if(o){"true"==o&&(o=Qe.getFullName(Tt,e.symbol));var r=Qe.U.lookup(f.jres||{},o);r?p=r:at(9270,St("resource '{0}' not found in any .jres file",o))}}Ft(e.initializer,e),K.emitExpr(t.storeByRef(Je(e.initializer))),p=null,K.stackEmpty()}return t}function Ye(e){!function(e,t){for(var n in t)t[n].decl.symbol==e.symbol&&at(9261,St("Interface with same name as a class not supported"));if(e.heritageClauses)for(var o=0,r=e.heritageClauses;o<r.length;o++){var i=r[o];switch(i.token){case Qe.SK.ExtendsKeyword:Ot(Mt(i.types[0]))&&at(9262,St("Extending a class by an interface not supported."))}}}(e,c);var t=Bt(e);t.autoCreate&&(W[t.autoCreate]=!0)}function Xe(t,e){var n=Et;xt++;try{Et=null;var o=e(t);return Et&&at(Ct,Et),Et=n,xt--,o}catch(e){return xt--,Et=null,T(t,e.ksErrorCode||9200,e.message),null}}function Je(e,t){void 0===t&&(t=!0);var n=e;if(t&&n.cachedIR)return ee(e)?Qe.ir.op(tt.Incr,[n.cachedIR]):n.cachedIR;var o=Xe(n,qe)||we(void 0);return t&&n.needsIRCache?(n.cachedIR=Qe.ir.shared(o),n.cachedIR):o}function qe(e){var t=function(e){switch(e.kind){case Qe.SK.NullKeyword:var t=e.valueOverride;return t||we(null);case Qe.SK.TrueKeyword:return we(!0);case Qe.SK.FalseKeyword:return we(!1);case Qe.SK.TemplateHead:case Qe.SK.TemplateMiddle:case Qe.SK.TemplateTail:case Qe.SK.NumericLiteral:case Qe.SK.StringLiteral:case Qe.SK.NoSubstitutionTemplateLiteral:return function(e){if(e.kind==Qe.SK.NumericLiteral){if(e.imageLiteral)return Qe.ir.ptrlit(e.imageLiteral,e.jsLit);var t=parseFloat(e.text);return f.target.floatingPoint||(Math.floor(t)!==t?at(9257,St("Decimal numbers are not supported")):t<<0!==t&&at(9258,St("Number is either too big or too small"))),we(t)}if(ht(e))return P(e.text);throw Qe.oops()}(e);case Qe.SK.TaggedTemplateExpression:return pe(e);case Qe.SK.PropertyAccessExpression:return F(e);case Qe.SK.BinaryExpression:return Fe(e);case Qe.SK.PrefixUnaryExpression:return function(e){var t=Mt(e.operand);if(e.operator==Qe.SK.ExclamationToken)return _t(Qe.ir.rtcall("Boolean_::bang",[Ge(e.operand)]));if(Qt(t))switch(e.operator){case Qe.SK.PlusPlusToken:return Te(e.operand,"numops::adds",!1);case Qe.SK.MinusMinusToken:return Te(e.operand,"numops::subs",!1);case Qe.SK.MinusToken:return null!=(o=Ne(n=Je(e.operand)))?we(-o):Ae("numops::subs",we(0),n);case Qe.SK.PlusToken:return Je(e.operand);case Qe.SK.TildeToken:var n,o;return null!=(o=Ne(n=Je(e.operand)))?we(~o):Qe.ir.rtcallMask(xe("numops::bnot"),1,Qe.ir.CallingConvention.Plain,[n])}throw j(e,St("unsupported prefix unary operation"),9245)}(e);case Qe.SK.PostfixUnaryExpression:return function(e){if(Qt(Mt(e.operand)))switch(e.operator){case Qe.SK.PlusPlusToken:return Te(e.operand,"numops::adds",!0);case Qe.SK.MinusMinusToken:return Te(e.operand,"numops::subs",!0)}throw j(e,St("unsupported postfix unary operation"),9246)}(e);case Qe.SK.ElementAccessExpression:return U(e);case Qe.SK.ParenthesizedExpression:return Je(e.expression);case Qe.SK.TypeAssertionExpression:return Ft((s=e).expression,s),Je(s.expression);case Qe.SK.ArrayLiteralExpression:return function(e){var t=Lt(Mt(e)),n=gt(t),o=0;$t(t)?o=3:n&&(o=1);for(var r=Qe.ir.shared(Qe.ir.rtcall("Array_::mk",f.target.floatingPoint?[]:[Qe.ir.numlit(o)])),i=0,a=e.elements;i<a.length;i++){var s=a[i],l=Qe.ir.shared(Je(s));K.emitExpr(Qe.ir.rtcall("Array_::push",[r,l])),n&&K.emitExpr(Qe.ir.op(tt.Decr,[l]))}return r}(e);case Qe.SK.NewExpression:return ge(e);case Qe.SK.SuperKeyword:case Qe.SK.ThisKeyword:return q(e);case Qe.SK.CallExpression:return i=e,a=Tt.getResolvedSignature(i),re(i,i.expression,i.arguments,a);case Qe.SK.FunctionExpression:case Qe.SK.ArrowFunction:return me(e);case Qe.SK.Identifier:return function(e){var t=Q(e);if(!t||t.kind!=Qe.SK.VariableDeclaration&&t.kind!=Qe.SK.Parameter&&t.kind!==Qe.SK.BindingElement){if(t&&t.kind==Qe.SK.FunctionDeclaration)return L(t);if("undefined"==e.text)return we(void 0);throw j(e,St("Unknown or undeclared identifier"),9235)}return R(t)}(e);case Qe.SK.ConditionalExpression:return function(e){var t=K.mkLabel("condexprz"),n=K.mkLabel("condexprfin");K.emitJmp(t,Ge(e.condition),Qe.ir.JmpMode.IfZero),K.emitJmp(n,Je(e.whenTrue),Qe.ir.JmpMode.Always),K.emitLbl(t),K.emitJmp(n,Je(e.whenFalse),Qe.ir.JmpMode.Always),K.emitLbl(n);var o=Qe.ir.shared(Qe.ir.op(tt.JmpValue,[]));return K.emitExpr(o),o}(e);case Qe.SK.AsExpression:return Ft((o=e).expression,o),Je(o.expression);case Qe.SK.TemplateExpression:return M(e);case Qe.SK.ObjectLiteralExpression:return n=e,r=Qe.ir.shared(Qe.ir.rtcall("pxtrt::mkMap",[])),n.properties.forEach(function(e){if(e.kind!=Qe.SK.ShorthandPropertyAssignment){var t="";ee(e.initializer)&&(t="Ref");var n=e.name.getText(),o=[Qe.ir.op(tt.Incr,[r]),Qe.ir.numlit(J(n)),Je(e.initializer)];f.target.isNative||o.push(P(n)),K.emitExpr(Qe.ir.rtcall("pxtrt::mapSet"+t,o))}else at(9264,"Shorthand properties not supported.")}),r;default:return j(e),null}var n,r,o,i,a,s}(e);if(t.isExpr())return t;throw new Error("expecting expression")}function Ze(e){Xe(e,$e)}function $e(e){switch(e.kind){case Qe.SK.SourceFile:return void e.statements.forEach(Ze);case Qe.SK.InterfaceDeclaration:return Ye(e);case Qe.SK.VariableStatement:return function(e){function t(e){var t=Qe.U.lookup(g,e.name);if(t||(g[(t=e).name]=t),t.value!=e.value)throw at(9269,St("conflicting values for config.{0}",e.name))}if(e.declarationList.flags&on.NodeFlags.Const)for(var n=0,o=e.declarationList.declarations;n<o.length;n++){var r=o[n],i=Wt(r),a=e.parent&&e.parent.kind==Qe.SK.ModuleBlock?It(e.parent.parent):"?";if("config"==a||"userconfig"==a){if(!r.initializer)continue;var s=De(r.initializer),l=Ie(e,"CFG_"+i);if(null==l||0==l)throw at(9268,St("can't find DAL.CFG_{0}",i));"userconfig"==a&&(i="!"+i),t({name:i,key:l,value:s})}}on.isInAmbientContext(e)||(He(e.declarationList),e.declarationList.declarations.forEach(Ze))}(e);case Qe.SK.ModuleDeclaration:return void Ze(e.body);case Qe.SK.EnumDeclaration:return;case Qe.SK.FunctionDeclaration:case Qe.SK.Constructor:case Qe.SK.MethodDeclaration:return void me(e);case Qe.SK.ExpressionStatement:return void ze(e.expression);case Qe.SK.Block:case Qe.SK.ModuleBlock:return void e.statements.forEach(Ze);case Qe.SK.VariableDeclaration:return void je(e);case Qe.SK.IfStatement:return function(e){Pe(e);var t=K.mkLabel("else");K.emitJmpZ(t,Ge(e.expression)),Ze(e.thenStatement);var n=K.mkLabel("afterif");K.emitJmp(n),K.emitLbl(t),e.elseStatement&&Ze(e.elseStatement),K.emitLbl(n)}(e);case Qe.SK.WhileStatement:return function(e){Pe(e);var t=Ve(e);K.emitLblDirect(t.cont),Pe(e.expression),K.emitJmpZ(t.brk,Ge(e.expression)),Ze(e.statement),K.emitJmp(t.cont),K.emitLblDirect(t.brk)}(e);case Qe.SK.DoStatement:return function(e){Pe(e);var t=Ve(e);K.emitLblDirect(t.cont),Ze(e.statement),Pe(e.expression),K.emitJmpZ(t.brk,Ge(e.expression)),K.emitJmp(t.cont),K.emitLblDirect(t.brk)}(e);case Qe.SK.ForStatement:return function(e){e.initializer&&e.initializer.kind==Qe.SK.VariableDeclarationList?(He(e.initializer),e.initializer.declarations.forEach(Ze)):ze(e.initializer),Pe(e);var t=Ve(e);K.emitLblDirect(t.fortop),e.condition&&(Pe(e.condition),K.emitJmpZ(t.brk,Ge(e.condition))),Ze(e.statement),K.emitLblDirect(t.cont),ze(e.incrementor),K.emitJmp(t.fortop),K.emitLblDirect(t.brk)}(e);case Qe.SK.ForOfStatement:return function(e){if(e.initializer&&e.initializer.kind==Qe.SK.VariableDeclarationList){var t=e.initializer;if(1==t.declarations.length){He(t);var n=Mt(e.expression),o="",r="";if($t(n))o="String_::charAt",r="String_::length";else{if(!Nt(n))return void j(e.expression,"cannot use for...of with this expression");o="Array_::getAt",r="Array_::length"}$(t.declarations[0]);var i=je(t.declarations[0]);K.emitExpr(i.storeByRef(we(void 0))),K.stackEmpty();var a=K.mkLocalUnnamed(!0);K.emitExpr(a.storeByRef(Je(e.expression)));var s=K.mkLocalUnnamed(!!f.target.taggedInts);K.emitExpr(s.storeByRef(we(0))),K.stackEmpty(),Pe(e);var l=Ve(e);K.emitLblDirect(l.fortop);var c,u=Qe.ir.rtcall(r,[a.loadCore()]),g=Ae("numops::lt_bool",s.load(),dt(u));K.emitJmpZ(l.brk,g),K.emitExpr(i.storeByRef(Qe.ir.rtcall(o,[a.loadCore(),(c=s.loadCore(),f.target.needsUnboxing?Qe.ir.rtcall("pxt::toInt",[c]):c)]))),Ze(e.statement),K.emitLblDirect(l.cont),K.emitExpr(s.storeByRef(Ae("numops::adds",s.load(),we(1)))),K.emitJmp(l.fortop),K.emitLblDirect(l.brk),K.emitExpr(a.storeByRef(we(void 0)))}else j(e,"only a single variable may be used to iterate a collection")}else j(e,"only a single variable may be used to iterate a collection")}(e);case Qe.SK.ContinueStatement:case Qe.SK.BreakStatement:return function(e){Pe(e);var n=e.label?e.label.text:null,o=e.kind==Qe.SK.BreakStatement,t=function e(t){return t?n&&t.kind==Qe.SK.LabeledStatement&&t.label.text==n?t.statement:t.kind==Qe.SK.SwitchStatement&&!n&&o?t:!n&&on.isIterationStatement(t,!1)?t:e(t.parent):null}(e);if(t){var r=Ve(t);e.kind==Qe.SK.ContinueStatement?on.isIterationStatement(t,!1)?K.emitJmp(r.cont):T(e,9231,St("continue on non-loop")):e.kind==Qe.SK.BreakStatement?K.emitJmp(r.brk):Qe.oops()}else T(e,9230,St("cannot find outer loop"))}(e);case Qe.SK.LabeledStatement:return r=Ve((o=e).statement),Ze(o.statement),void K.emitLblDirect(r.brk);case Qe.SK.ReturnStatement:return function(e){Pe(e);var t=null;e.expression?t=Je(e.expression):Vt(K.action)&&(t=we(void 0)),K.emitJmp(Ve(K.action).ret,t,Qe.ir.JmpMode.Always)}(e);case Qe.SK.ClassDeclaration:return N(null,n=e),void n.members.forEach(Ze);case Qe.SK.PropertyDeclaration:case Qe.SK.PropertyAssignment:return void(mt(t=e)?je(t):t.initializer&&at(9209,St("class field initializers not supported")));case Qe.SK.SwitchStatement:return function(e){Pe(e);var a,s=Mt(e.expression),t=!!(s.flags&on.TypeFlags.NumberLike),n=Ve(e),l=t,c=Qe.ir.shared(Je(e.expression)),u=ee(e.expression)?"Decr":"",g=c;t&&Le(c);var o=e.caseBlock.clauses.map(function(e){var t=K.mkLabel("switch");if(e.kind==Qe.SK.CaseClause){var n=e,o=Je(n.expression),r=ee(n.expression)?1:0;if(f.target.needsUnboxing){var i=Qe.ir.rtcallMask(xe("pxt::switch_eq"),r,Qe.ir.CallingConvention.Plain,[o,c]);l=!1,K.emitJmp(t,i,Qe.ir.JmpMode.IfNotZero,g)}else $t(s)?(i=Qe.ir.rtcallMask("String_::compare"+u,r,Qe.ir.CallingConvention.Plain,[o,c]),K.emitJmp(t,i,Qe.ir.JmpMode.IfZero,g)):ee(n.expression)||u?(i=Qe.ir.rtcallMask(xe("langsupp::ptreq")+u,3,Qe.ir.CallingConvention.Plain,[o,c]),l=!1,K.emitJmp(t,i,Qe.ir.JmpMode.IfNotZero,g)):lt()||f.target.needsUnboxing||o.exprKind!=tt.NumberLiteral?(i=Ae("pxt::eq_bool",o,c),l=!1,K.emitJmp(t,i,Qe.ir.JmpMode.IfNotZero,g)):(l||(Le(c),l=!0),K.emitJmp(t,o,Qe.ir.JmpMode.IfJmpValEq,g))}else e.kind==Qe.SK.DefaultClause?(Qe.assert(!a,"!defaultLabel"),a=t):Qe.oops();return t});(f.target.taggedInts||u)&&K.emitExpr(Qe.ir.op(tt.Decr,[c])),a?K.emitJmp(a,g):K.emitJmp(n.brk,g),e.caseBlock.clauses.forEach(function(e,t){K.emitLbl(o[t]),e.statements.forEach(Ze)}),K.emitLblDirect(n.brk)}(e);case Qe.SK.TypeAliasDeclaration:return;case Qe.SK.DebuggerStatement:return void Pe(e);case Qe.SK.GetAccessor:case Qe.SK.SetAccessor:return void me(e);case Qe.SK.ImportEqualsDeclaration:case Qe.SK.EmptyStatement:return;default:j(e)}var t,n,o,r}};var tn=function(){function e(){this.procs=[],this.globals=[],this.finalPass=!1,this.writeFile=function(e,t){},this.usedClassInfos=[],this.sourceHash="",this.numStmts=1,this.commSize=0,this.strings={},this.hexlits={},this.doubles={},this.otherLiterals=[],this.codeHelpers={},this.lblNo=0}return e.prototype.reset=function(){this.lblNo=0,this.otherLiterals=[],this.strings={},this.hexlits={},this.doubles={},this.numStmts=0},e.prototype.addProc=function(e){Qe.assert(!this.finalPass,"!this.finalPass"),this.procs.push(e),e.seqNo=this.procs.length},e.prototype.emitLabelled=function(e,t,n){var o=Qe.U.lookup(t,e);if(null!=o)return o;var r=n+this.lblNo++;return t[e]=r},e.prototype.emitDouble=function(e){return this.emitLabelled((t=e,(n=new Float64Array(1))[0]=t,Qe.U.toHex(new Uint8Array(n.buffer))),this.doubles,"_dbl");var t,n},e.prototype.emitString=function(e){return this.emitLabelled(e,this.strings,"_str")},e.prototype.emitHexLiteral=function(e){return this.emitLabelled(e,this.hexlits,"_hexlit")},e}();function nn(e){return!!(e.flags&(on.TypeFlags.NumberLike|on.TypeFlags.EnumLike))}Qe.Binary=tn}(on.pxtc||(on.pxtc={}))}(ts||(ts={})),function(T){!function(y){function v(e){var t=T.getDefaultCompilerOptions();return t.target=T.ScriptTarget.ES5,t.module=T.ModuleKind.None,t.noImplicitAny=!0,t.noImplicitReturns=!0,t.allowUnreachableCode=!0,t}function b(e,t){void 0===t&&(t=!1),t&&(e=e.filter(function(e){return 5012!==e.code}));var n=e.filter(function(e){return 1148==e.code});return 0<n.length&&(e=n),e.map(function(e){if(!e.file)return{code:e.code,start:e.start,length:e.length,line:0,column:0,messageText:e.messageText,category:e.category,fileName:"?"};var t=T.getLineAndCharacterOfPosition(e.file,e.start),n={code:e.code,start:e.start,length:e.length,line:t.line,column:t.character,messageText:e.messageText,category:e.category,fileName:e.file.fileName};return 1148==n.code&&(n.messageText=y.Util.lf("all symbols in top-level scope are always exported; please use a namespace if you want to export only some")),n})}function s(e){var t=Date.now(),r={outfiles:{},diagnostics:[],success:!1,times:{}};e.target.taggedInts&&(e.target.floatingPoint=!0),e.target.isNative||(e.target.taggedInts=!1);var i={};for(var n in e.fileSystem)i[k(n)]=e.fileSystem[n];var o=v(),a={getSourceFile:function(e,t,n){e=k(e);var o="";return i.hasOwnProperty(e)?o=i[e]:n&&n("File not found: "+e),null==o&&(n("File not found: "+e),o=""),T.createSourceFile(e,o,t,!0)},fileExists:function(e){return e=k(e),i.hasOwnProperty(e)},getCanonicalFileName:function(e){return e},getDefaultLibFileName:function(){return"no-default-lib.d.ts"},writeFile:function(e,t,n,o){r.outfiles[e]=t},getCurrentDirectory:function(){return"."},useCaseSensitiveFileNames:function(){return!0},getNewLine:function(){return"\n"},readFile:function(e){return e=k(e),i[e]||""},directoryExists:function(e){return!0},getDirectories:function(){return[]}};e.sourceFiles||(e.sourceFiles=Object.keys(e.fileSystem));var s=e.sourceFiles.filter(function(e){return y.U.endsWith(e,".ts")}),l=s.filter(function(e){return"main.ts"!=e}),c=!1;s.length>l.length&&((s=l).push("main.ts"),c=!0);var u,g=T.createProgram(s,o,a);if(c)u="main.ts";else{var p=s[s.length-1];u=p.substring(p.lastIndexOf("/")+1)}if(r.diagnostics=b(g.getSyntacticDiagnostics(),e.ignoreFileResolutionErrors),0<r.diagnostics.length)return e.forceEmit&&(pxt.debug("syntactic errors, forcing emit"),y.compileBinary(g,a,e,r,u)),r;r.diagnostics=b(g.getOptionsDiagnostics().concat(y.Util.toArray(g.getGlobalDiagnostics())),e.ignoreFileResolutionErrors),0==r.diagnostics.length&&(r.diagnostics=b(g.getSemanticDiagnostics(),e.ignoreFileResolutionErrors));var d=y.U.now();if(r.times.typescript=d-t,e.ast&&(r.ast=g),e.ast||e.forceEmit||0==r.diagnostics.length){var _=y.compileBinary(g,a,e,r,u);r.times.compilebinary=y.U.now()-d,r.diagnostics=r.diagnostics.concat(b(_.diagnostics))}0==r.diagnostics.length&&(r.success=!0);for(var f=0,h=e.sourceFiles;f<h.length;f++){var m=h[f];y.Util.startsWith(m,"built/")&&(r.outfiles[m.slice(6)]=e.fileSystem[m])}return r.times.all=y.U.now()-t,pxt.tickEvent("compile",r.times),r}function k(e){e=e.replace(/\\/g,"/");var t=[];return e.split("/").forEach(function(e){".."===e&&t.length?t.pop():"."!==e&&t.push(e)}),t.join("/")}y.getTsCompilerOptions=v,y.nodeLocationInfo=function(e){var t=T.getSourceFileOfNode(e),n=e.getStart?e.getStart():e.pos,o=T.getLineAndCharacterOfPosition(t,n),r=o.line,i=o.character,a=T.getLineAndCharacterOfPosition(t,e.end),s=a.line,l=a.character;return{start:n,length:e.end-n,line:r,column:i,endLine:s,endColumn:l,fileName:t.fileName}},y.patchUpDiagnostics=b,y.compile=s,y.decompile=function(e,t,n){void 0===n&&(n=!1);var o=s(e);if(!o.success)return o;var r=o.ast.getSourceFile(t),i=y.getApiInfo(e,o.ast),a=y.getBlocksInfo(i);return y.decompiler.decompileToBlocks(a,r,{snippetMode:!1,alwaysEmitOnStart:e.alwaysDecompileOnStart,includeGreyBlockMessages:n},y.decompiler.buildRenameMap(o.ast,r))}}(T.pxtc||(T.pxtc={}))}(ts||(ts={})),function(_){var e,f,h,m,y;e=_.elf||(_.elf={}),f=["type","offset","vaddr","paddr","filesz","memsz","flags","align"],h=_.HF2.read32,m=_.HF2.read16,y=4096,e.parse=function(s){1179403647!=h(s,0)&&_.U.userError("no magic"),1!=s[4]&&_.U.userError("not 32 bit"),1!=s[5]&&_.U.userError("not little endian"),1!=s[6]&&_.U.userError("bad version"),2!=m(s,16)&&_.U.userError("wrong object type"),40!=m(s,18)&&_.U.userError("not ARM");var t=h(s,28);h(s,32),0==t&&_.U.userError("expecting program headers");for(var n=m(s,42),e=m(s,44),o=_.U.range(e).map(function(e){return function(e){for(var t={},n=e,o=0,r=f;o<r.length;o++){var i=r[o];t[i]=h(s,e),e+=4}var a=t;return a._filepos=n,a}(t+e*n)}),r=s.length+1;15&r;)r++;for(var i=0,a=0,l=o;a<l.length;a++)1==(d=l[a]).type&&(i=Math.max(i,d.vaddr+d.memsz));for(var c=(i+y-1&~(y-1))+(r&y-1),u=-1,g=0,p=o;g<p.length;g++){var d;4==(d=p[g]).type&&(u=d._filepos)}return{imageMemStart:c,imageFileStart:r,phOffset:u,template:s}},e.patch=function(e,t){var n=new Uint8Array(e.imageFileStart+t.length);return n.fill(0),_.U.memcpy(n,0,e.template),_.U.memcpy(n,e.imageFileStart,t),function(e,t){for(var n=t._filepos,o=0,r=f;o<r.length;o++){var i=r[o];_.HF2.write32(e,n,t[i]||0),n+=4}}(n,{_filepos:e.phOffset,type:1,offset:e.imageFileStart,vaddr:e.imageMemStart,paddr:e.imageMemStart,filesz:t.length,memsz:t.length,flags:5,align:y}),n}}(pxt||(pxt={})),function(h){!function(m){var y,e;(e=y||(y={}))[e.None=0]="None",e[e.Whitespace=1]="Whitespace",e[e.Identifier=2]="Identifier",e[e.Keyword=3]="Keyword",e[e.Operator=4]="Operator",e[e.CommentLine=5]="CommentLine",e[e.CommentBlock=6]="CommentBlock",e[e.NewLine=7]="NewLine",e[e.Literal=8]="Literal",e[e.Tree=9]="Tree",e[e.Block=10]="Block",e[e.EOF=11]="EOF";var v=h.SyntaxKind;function b(e){switch(e){case v.CommaToken:return 2;case v.EqualsToken:case v.PlusEqualsToken:case v.MinusEqualsToken:case v.AsteriskEqualsToken:case v.AsteriskAsteriskEqualsToken:case v.SlashEqualsToken:case v.PercentEqualsToken:case v.LessThanLessThanEqualsToken:case v.GreaterThanGreaterThanEqualsToken:case v.GreaterThanGreaterThanGreaterThanEqualsToken:case v.AmpersandEqualsToken:case v.BarEqualsToken:case v.CaretEqualsToken:return 5;case v.QuestionToken:case v.ColonToken:return 7;case v.BarBarToken:return 10;case v.AmpersandAmpersandToken:return 20;case v.BarToken:return 30;case v.CaretToken:return 40;case v.AmpersandToken:return 50;case v.EqualsEqualsToken:case v.ExclamationEqualsToken:case v.EqualsEqualsEqualsToken:case v.ExclamationEqualsEqualsToken:return 60;case v.LessThanToken:case v.GreaterThanToken:case v.LessThanEqualsToken:case v.GreaterThanEqualsToken:case v.InstanceOfKeyword:case v.InKeyword:case v.AsKeyword:return 70;case v.LessThanLessThanToken:case v.GreaterThanGreaterThanToken:case v.GreaterThanGreaterThanGreaterThanToken:return 80;case v.PlusToken:case v.MinusToken:return 90;case v.AsteriskToken:case v.SlashToken:case v.PercentToken:return 100;case v.AsteriskAsteriskToken:return 101;case v.DotToken:return 120;default:return 0}}function p(e){switch(e){case v.EndOfFileToken:return y.EOF;case v.SingleLineCommentTrivia:return y.CommentLine;case v.MultiLineCommentTrivia:return y.CommentBlock;case v.NewLineTrivia:return y.NewLine;case v.WhitespaceTrivia:return y.Whitespace;case v.ShebangTrivia:case v.ConflictMarkerTrivia:return y.CommentBlock;case v.NumericLiteral:case v.StringLiteral:case v.RegularExpressionLiteral:case v.NoSubstitutionTemplateLiteral:case v.TemplateHead:case v.TemplateMiddle:case v.TemplateTail:return y.Literal;case v.Identifier:return y.Identifier;default:return e<v.Identifier?y.Operator:y.Keyword}}var d=!1;function _(e,t){for(;e[t]&&e[t].kind==y.Whitespace;)t++;return t}function k(){return{kind:y.EOF,synKind:v.EndOfFileToken,pos:0,lineNo:0,text:""}}function T(e,t){return{kind:y.Whitespace,synKind:v.WhitespaceTrivia,pos:e.pos-t.length,lineNo:e.lineNo,text:t}}function E(e){if(!e)return!1;switch(e.synKind){case v.IfKeyword:case v.ElseKeyword:case v.LetKeyword:case v.ConstKeyword:case v.VarKeyword:case v.DoKeyword:case v.WhileKeyword:case v.SwitchKeyword:case v.CaseKeyword:case v.DefaultKeyword:case v.ForKeyword:case v.ReturnKeyword:case v.BreakKeyword:case v.ContinueKeyword:case v.TryKeyword:case v.CatchKeyword:case v.FinallyKeyword:case v.DeleteKeyword:case v.FunctionKeyword:case v.ClassKeyword:case v.YieldKeyword:case v.DebuggerKeyword:return!0;default:return!1}}function S(i,a,s){void 0===s&&(s=null);var l,o=[],c=0,u=!1;for(i=i.concat([k()]);i[c].kind!=y.EOF;){var e=c;h(),m.Util.assert(e<c,"Error at "+i[c].text),t(i.slice(e,c))}return o;function t(e){if(a&&(e=C(e)),0!=e.length){e.forEach(r),e=function e(t){var n=[];var o=0;for(;o<t.length;)if(t[o].blockSpanLength){var r=t.slice(o,o+t[o].blockSpanLength),i=!!r[0].blockSpanIsVirtual;delete r[0].blockSpanLength,delete r[0].blockSpanIsVirtual,o+=r.length,r=e(r),i?n.push((s=r,{kind:y.Tree,synKind:v.WhitespaceTrivia,pos:s[0].pos,lineNo:s[0].lineNo,children:s,endToken:null,text:""})):(n.push(T(r[0]," ")),n.push((a=C(r),{kind:y.Block,synKind:v.OpenBraceToken,pos:a[0].pos,lineNo:a[0].lineNo,stmts:[{tokens:a}],text:"{",endToken:null})))}else n.push(t[o++]);var a;var s;return n}(e);if(a&&0<o.length){var t=o[o.length-1].tokens[0].synKind,n=e[0].synKind;if(t==v.IfKeyword&&n==v.ElseKeyword||t==v.TryKeyword&&n==v.CatchKeyword||t==v.TryKeyword&&n==v.FinallyKeyword||t==v.CatchKeyword&&n==v.FinallyKeyword)return e.unshift(T(e[0]," ")),void m.Util.pushRange(o[o.length-1].tokens,e)}o.push({tokens:e})}}function r(e){if(e.kind==y.Tree){var t=e;t.children=m.Util.concat(S(t.children,!1,t).map(function(e){return e.tokens}))}}function g(e){for(void 0===e&&(e=!1);;)switch(i[++c].kind){case y.Whitespace:case y.CommentBlock:case y.CommentLine:break;case y.NewLine:if(e)break;break;default:return}}function p(){for(;i[c].kind==y.Whitespace;)c++;i[c].kind==y.NewLine&&c++}function d(){for(;;)switch(i[++c].kind){case y.EOF:return;case y.Tree:if(i[c].synKind==v.OpenBraceToken)return c--,void f()}}function _(){m.Util.assert(i[c].synKind==v.OpenBraceToken);var e=i[c];m.Util.assert(e.kind==y.Tree);var t=i[c];t.stmts=S(e.children,!0,l),delete e.children,t.kind=y.Block,c++,u=!0}function f(){var e=c+1;g(),i[c].synKind==v.OpenBraceToken?(_(),p()):(h(),i[e].blockSpanLength=c-e)}function h(){for(;;){var e=i[c],t=c;if(u=!1,(l=e).kind==y.EOF)return;if(a&&e.synKind==v.SemicolonToken)return c++,void p();if(e.synKind==v.EqualsGreaterThanToken){if(g(),i[c].synKind==v.OpenBraceToken){_();continue}var n=c;h();for(var o=c;i[o].kind==y.NewLine;)o--;return i[n].blockSpanLength=o-n,void(i[n].blockSpanIsVirtual=!0)}if(a&&b(e.synKind)){n=c;if(g(),!E(i[c]))continue;c=n}if(a&&e.kind==y.NewLine){if(g(),b((e=i[c]).synKind)&&e.synKind!=v.PlusToken&&e.synKind!=v.MinusToken)continue;return void(c=t+1)}if(e.synKind==v.OpenBraceToken&&s&&s.synKind==v.ClassKeyword){for(var r=c-1;0<=r&&i[r].kind==y.Whitespace;)r--;if(r<0||i[r].synKind!=v.EqualsToken)return c--,void f()}switch(m.Util.assert(t==c),e.synKind){case v.ForKeyword:case v.WhileKeyword:case v.IfKeyword:case v.CatchKeyword:if(g(),i[c].synKind!=v.OpenParenToken)continue;return void f();case v.DoKeyword:if(f(),c--,g(),i[c].synKind==v.WhileKeyword){c++;continue}return;case v.ElseKeyword:if(g(),i[c].synKind==v.IfKeyword)continue;return c=t,void f();case v.TryKeyword:case v.FinallyKeyword:return void f();case v.ClassKeyword:case v.NamespaceKeyword:case v.ModuleKeyword:case v.InterfaceKeyword:case v.FunctionKeyword:return void d()}m.Util.assert(!u,"forgot continue/return after expectBlock"),c++}}}function t(e){return e&&(e.kind==y.Whitespace||e.kind==y.NewLine)}function f(e){for(var t=[],n=!1,o=0;o<e.length;++o)n&&(o=_(e,o)),e[o]&&(t.push(e[o]),n=e[o].kind==y.NewLine);return t}function C(e){for(e=e.slice(0);t(e[0]);)e.shift();for(;t(e[e.length-1]);)e.pop();return e}m.toStr=function e(t){return Array.isArray(t)?"[[ "+t.map(e).join("  ")+" ]]":"string"==typeof t.text?JSON.stringify(t.text):t+""},m.format=function(e,t){var n=function(e){e;for(var n=h.createScanner(h.ScriptTarget.Latest,!1,h.LanguageVariant.Standard,e,function(e){var t=n.getTextPos();console.log("scanner error",t,e.message)}),t=[],o=0,r=-1;;){var i=n.scan();if(i==v.CloseBraceToken&&o==r&&(r=-1,i=n.reScanTemplateToken()),d&&i==v.SlashToken||i==v.SlashEqualsToken){var a=n.reScanSlashToken();a==v.RegularExpressionLiteral&&(i=a)}i==v.GreaterThanToken&&(i=n.reScanGreaterToken());var s={kind:p(i),synKind:i,lineNo:0,pos:n.getTokenPos(),text:n.getTokenText()};if(i==v.OpenBraceToken&&o++,i==v.CloseBraceToken&&--o<0&&(o=-1e7),t.push(s),i!=v.TemplateHead&&i!=v.TemplateMiddle||(r=o),s.kind==y.EOF)break}return{tokens:t,braceBalance:o}}(e).tokens,o=S(n=function(e){var t=[];t.push({synKind:v.EndOfFileToken,token:{children:[]}});for(var n,o,r,i=0;i<e.length;++i){var a=e[i],s=t[t.length-1];switch(s.token.children.push(a),a.kind){case y.Operator:switch(a.synKind){case v.OpenBraceToken:case v.OpenParenToken:case v.OpenBracketToken:o=(n=a).synKind+1,r=void 0,(r=n).children=[],r.kind=y.Tree,t.push({synKind:o,token:r});break;case v.CloseBraceToken:case v.CloseParenToken:case v.CloseBracketToken:for(s.token.children.pop();;){if((s=t.pop()).synKind==a.synKind){s.token.endToken=a;break}if(0==t.length||s.synKind==v.CloseBraceToken){t.push(s);break}}}}}return t[0].token.children}(n=function(e,t){for(var n=[],o=!0,r=1,i=0;i<e.length;++i){if(o){var a=i;if(e[i=_(e,i)].kind==y.NewLine){var s=!1;0<=t&&e[i].pos>=t&&(t=-1,s=!0),n.push({text:"",kind:y.CommentLine,pos:e[i].pos,lineNo:r,synKind:v.SingleLineCommentTrivia,isCursor:s})}else i=a}n.push(e[i]),e[i].lineNo=r,e[i].kind==y.NewLine?(o=!0,r++):o=!1,0<=t&&e[i].pos>=t&&(t=-1)}return n}(n,t)),!0),a="",s="",r=-1,i=0;return o.forEach(u),o.forEach(function(e){return e.tokens.forEach(l)}),-1==r&&(r=s.length),{formatted:s,pos:r};function l(e){if(e.kind==y.Tree){var t=e;e.synKind,v.OpenBraceToken,t.children.forEach(l)}else e.kind==y.Block&&e.stmts.forEach(function(e){return e.tokens.forEach(l)})}function c(e,t){if(i==e.lineNo)t();else{i=e.lineNo;var n=a;a+="    ",t(),a=n}}function u(e){var t=f(e.tokens);1!=t.length||t[0].isCursor||""!=t[0].text?(s+=a,c(t[0],function(){!function r(i){i=function(e){var t,n=[],o=0,r=k();for(e=e.concat([k()]);o<e.length;){var i=e[o=_(e,o)];if(i.kind==y.EOF)break;var a=_(e,o+1);if(i.kind!=y.NewLine||e[a].synKind!=v.OpenBraceToken){var s=!0,l=0==n.length?(t=i,{kind:y.NewLine,synKind:v.NewLineTrivia,pos:t.pos,lineNo:t.lineNo,text:"\n"}):n[n.length-1];switch(l.synKind){case v.ExclamationToken:case v.TildeToken:case v.DotToken:s=!1;break;case v.PlusToken:case v.MinusToken:case v.PlusPlusToken:case v.MinusMinusToken:l.isPrefix&&(s=!1)}switch(i.synKind){case v.DotToken:case v.CommaToken:case v.NewLineTrivia:case v.ColonToken:case v.SemicolonToken:case v.OpenBracketToken:s=!1;break;case v.PlusPlusToken:case v.MinusMinusToken:l.kind!=y.Tree&&l.kind!=y.Identifier&&l.kind!=y.Keyword||(s=!1);case v.PlusToken:case v.MinusToken:(r.kind==y.EOF||b(r.synKind)||r.synKind==v.SemicolonToken)&&(i.isPrefix=!0);break;case v.OpenParenToken:if(l.kind==y.Identifier&&(s=!1),l.kind==y.Keyword)switch(l.synKind){case v.IfKeyword:case v.ForKeyword:case v.WhileKeyword:case v.SwitchKeyword:case v.ReturnKeyword:case v.ThrowKeyword:case v.CatchKeyword:break;default:s=!1}}l.kind==y.NewLine&&(s=!1),s&&n.push(T(i," ")),n.push(i),i.kind!=y.NewLine&&(r=i),o++}else o=a}return n}(i);for(var e=function(e){var t=i[e];switch(function(e,t){if(t.synKind==v.NoSubstitutionTemplateLiteral&&/^`[\s\.#01]*`$/.test(t.text)){var n=t.text.slice(1,t.text.length-1).split("\n").map(function(e){return e.replace(/\s/g,"")}).filter(function(e){return!!e});if(n.length<4||5<n.length)return;var o=Math.floor((Math.max.apply(Math,n.map(function(e){return e.length}))+2)/5);o<=0&&(o=1);for(var r="`\n",i=0;i<5;++i){for(var a=n[i]||"";a.length<5*o;)a+=".";r+=e+(a=(a=(a=a.replace(/0/g,".")).replace(/1/g,"#")).replace(/...../g,function(e){return"/"+e})).replace(/./g,function(e){return" "+e}).replace(/\//g," ").slice(3)+"\n"}r+=e+"`",t.text=r}}(a,t),g(t),t.kind){case y.Tree:var n=t;c(t,function(){r(f(n.children))}),n.endToken&&g(n.endToken);break;case y.Block:var o=t;0==o.stmts.length?s+=" ":(s+="\n",o.stmts.forEach(u),s+=a.slice(4)),o.endToken?g(o.endToken):s+="}";break;case y.NewLine:if(i[e+1]&&i[e+1].kind==y.CommentLine&&""==i[e+1].text&&!i[e+1].isCursor)break;e==i.length-1?s+=a.slice(4):s+=a;break;case y.Whitespace:}},t=0;t<i.length;++t)e(t)}(t)}),"\n"!=s[s.length-1]&&(s+="\n")):s+="\n"}function g(e){-1==r&&e.pos+e.text.length>=t&&(r=s.length+(t-e.pos)),s+=e.text}}}(h.pxtc||(h.pxtc={}))}(ts||(ts={})),function(N){!function(R){var D;function s(e,t){var n="\n        .balign "+(1<<t.target.vtableShift)+"\n"+e.id+"_VT:\n        .short "+(4*e.refmask.length+4)+"  ; size in bytes\n        .byte "+(e.vtable.length+2)+", 0  ; num. methods\n",o=R.target.shortPointers?".short":".word",r=function(e){"0"!=e&&(!R.isStackMachine()||0<=e.indexOf("::"))&&(e+="@fn"),n+="        "+o+" "+e+"\n"};n+="        "+o+" "+e.id+"_IfaceVT\n",r("pxt::RefRecord_destroy"),r("pxt::RefRecord_print");for(var i=0,a=e.vtable;i<a.length;i++){r((u=a[i]).label())}for(var s=e.refmask.map(function(e){return e?"1":"0"});s.length<2||s.length%2!=0;)s.push("0");n+="        .byte "+s.join(",")+"\n",n+="\n        .balign "+(R.target.shortPointers?2:4)+"\n"+e.id+"_IfaceVT:\n";for(var l=0,c=e.itable;l<c.length;l++){var u;r((u=c[l])?u.label():"0")}return n+="\n"}function B(n,t){var o="; start\n"+D.hexPrelude()+"\n    .hex 708E3B92C615A841C49866C975EE5197 ; magic number\n    .hex "+D.hexTemplateHash()+" ; hex template hash\n    .hex 0000000000000000 ; @SRCHASH@\n    .short "+n.globalsWords+"   ; num. globals\n    .short 0 ; patched with number of words resulting from assembly\n    .word _pxt_config_data\n    .short 0 ; patched with comm section size\n    .short 0 ; reserved\n    .word 0 ; reserved\n",r=null;r=t.target.nativeType==R.NATIVE_TYPE_AVR?new R.AVRSnippets:new R.ThumbSnippets,n.procs.forEach(function(e){var t=new R.ProctoAssembler(r,n,e);o+="\n"+t.getAssembly()+"\n"}),n.usedClassInfos.forEach(function(e){o+=s(e,t)}),R.U.iterMap(n.codeHelpers,function(e,t){o+="    .section code\n"+t+":\n"+e+"\n"}),o+=r.arithmetic(),o+="\n.balign 4\n_pxt_config_data:\n";for(var e=0,i=n.res.configData||[];e<i.length;e++){var a=i[e];o+="    .word "+a.key+", "+a.value+"  ; "+a.name+"="+a.value+"\n"}return o+="    .word 0\n\n",o+=D.asmTotalSource,o+="_js_end:\n",function(e,t){for(var n=0,o=Object.keys(t.strings);n<o.length;n++){var r=o[n];t.otherLiterals.push(e.string_literal(t.strings[r],r))}for(var i=0,a=Object.keys(t.doubles);i<a.length;i++){var s=a[i],l=t.doubles[s];t.otherLiterals.push("\n.balign 4\n"+l+": .short 0xffff, "+pxt.REF_TAG_NUMBER+"\n        .hex "+s+"\n")}for(var c=0,u=Object.keys(t.hexlits);c<u.length;c++)s=u[c],t.otherLiterals.push(e.hex_literal(t.hexlits[s],s)),t.otherLiterals.push()}(r,n),o+=n.otherLiterals.join(""),o+="_program_end:\n"}function i(e){var t;return(t=e.nativeType==R.NATIVE_TYPE_AVR?new R.assembler.File(new R.avr.AVRProcessor):e.nativeType==R.NATIVE_TYPE_AVRVM?new R.assembler.VMFile(new R.vm.VmProcessor(e)):new R.assembler.File(new R.thumb.ThumbProcessor)).ei.testAssembler(),t.lookupExternalLabel=D.lookupFunctionAddr,t.normalizeExternalLabel=function(e){var t=D.lookupFunc(e);return t?t.name:e},t}function a(e){if(0<e.errors.length){var n="";throw e.errors.forEach(function(e){var t=/^user(\d+)/.exec(e.scope);if(t){parseInt(t[1]);n+=R.U.lf("At inline assembly:\n"),n+=e.message}}),n&&(console.log(R.U.lf("errors in inline assembly")),console.log(n)),new Error(e.errors[0].message)}}!function(T){var E,S,C,x,A,D,B,y={},u={};function I(e){for(var t="",n=0;n<e.length;n+=2)t=e[n]+e[n+1]+t;return R.assert(n==e.length),t}function v(e){return e.flashCodeAlign||T.defaultPageSize}function g(e){return y[e]}function N(){for(var e=T.currentSetup?T.currentSetup.slice(0,16):"";e.length<16;)e+="0";return e.toUpperCase()}function w(e){var t=0,n=":";return e.forEach(function(e){return t+=e}),e.push(255&-t),e.forEach(function(e){return n+=("0"+e.toString(16)).slice(-2)}),n.toUpperCase()}function O(o,n){void 0===n&&(n=null);var i=[255,255,1,0];R.assert(4==i.length);var r=function(e,t,n){if(64==e[t]&&80==e[t+1]&&88==e[t+2]&&84==e[t+3]){var o=n();if(64==o[4]&&58==o[5]){for(var r=0;6+r<o.length&&0!=o[6+r];)r++;return 6+r>=o.length&&R.U.oops("constant string too long!"),i.concat([255&r,r>>8])}}return null};if(n)for(var e=function(e){var t=r(n,e,function(){return n.slice(e,e+200)});t&&R.U.memcpy(n,e,t)},t=0;t<n.length-8;t+=4)e(t);else for(var a=0;a<o.blocks.length;++a){var s=o.blocks[a],l=o.ptrs[a]<<8,c=function(e){var t=l+e-32,n=r(s,e,function(){return R.UF2.readBytesFromFile(o,t,200)});n&&R.UF2.writeBytes(o,t,n)};for(t=32;t<288;t+=4)c(t)}}T.asmTotalSource="",T.defaultPageSize=1024,T.commBase=0,T.hexDump=function(e,t){function n(e,t){void 0===t&&(t=8);for(var n=e.toString(16);n.length<t;)n="0"+n;return n}void 0===t&&(t=0);for(var o="",r=0;r<e.length;r+=16){o+=n(t+r)+": ";for(var i="",a=0;a<16;a++){0==(3&a)&&(o+=" ");var s=e[r+a];null!=s?(o+=n(s,2)+" ",i+=32<=s&&s<127?String.fromCharCode(s):"."):o+="   "}o+=" "+i+"\n"}return o},T.setupInlineAssembly=function(e){u={};var t=e.sourceFiles.filter(function(e){return R.U.endsWith(e,".asm")});T.asmTotalSource="";for(var n=0,o=0,r=t;o<r.length;o++){var i=r[o],a=e.fileSystem[i];a.replace(/^\s*(\w+):/gm,function(e,t){return u[t]=!0,""});var s=".section code\n@stackmark func\n@scope user"+n+++"\n"+a+"\n@stackempty func\n@scope\n";T.asmTotalSource+=s}},T.flashCodeAlign=v,T.encodeVTPtr=function(e,t){var n=e>>t.target.vtableShift;return R.assert(n<65535),R.assert(n<<t.target.vtableShift==e),n},T.setupFor=function(s,e,t){if(!T.isSetupFor(e)){var i=e.functions;if(T.commBase=e.commBase||0,T.currentSetup=e.sha,T.currentHexInfo=t,function(e){for(var t=0;t<e.length;++t)if("2"==e[t][8]){var n=/^:02....02(....)..$/.exec(e[t]);R.U.assert(!!n);var o=16*parseInt(n[1],16);R.U.assert(0==(65535&o)),e[t]=w([2,0,0,4,0,o>>16])}}(E=t.hex),s.nativeType!=R.NATIVE_TYPE_CS){if(E.length<=2){D=pxt.elf.parse(R.U.fromHex(E[0])),B=-1,A=D.imageMemStart,T.bytecodeStartAddrPadded=D.imageMemStart;var n=E[x=0].indexOf("0108010842424242010801083ed8e98d");return n<0&&R.oops("no jmp table in elf"),S=n/2,C=-1,h(E[0].slice(n+32,n+32+8*i.length+16)),void m()}var o=0,r="0000",l=0,c=0;A=0;for(var a=function(){if(!A){var e=function e(t){if(!(t=t.replace(/^[\s:]/,"")))return[];var n=/^([a-f0-9][a-f0-9])/i.exec(t);if(n)return[parseInt(n[1],16)].concat(e(t.slice(2)));throw R.oops("bad bytes "+t)}(E[c]),t=16-(l+e[0]&15)&15;if(t)if(15&e[2]){for(var n=l+e[0],o=[t,n>>8,255&n,0],r=0;r<t;++r)o.push(0);c++,E.splice(c,0,w(o)),A=n+t}else{if(16!=e[0]){for(e.pop(),e[0]=16;e.length<20;)e.push(0);E[c]=w(e)}A=l+16}else A=l+e[0];B=c+1;var i=v(s);T.bytecodeStartAddrPadded=(A&~(i-1))+i;var a=T.bytecodeStartAddrPadded-A;R.assert(0==(15&a)),x=a}};o<E.length;++o){if((p=/:02000004(....)/.exec(E[o]))&&(r=p[1]),p=/^:..(....)00/.exec(E[o])){var u=parseInt(r+p[1],16);s.flashUsableEnd&&u>=s.flashUsableEnd&&a(),c=o,l=u}/^:00000001/.test(E[o])&&a(),(p=/^:10....000108010842424242010801083ED8E98D/.exec(E[o]))&&(S=l,C=o)}S||R.oops("No hex start"),A||R.oops("No hex end"),y={};for(var g=C+1;g<E.length;++g){var p;if((p=/^:..(....)00(.{4,})/.exec(E[g]))&&(h(p[2]),0==i.length))break}return void m()}for(var d=0,_=i;d<_.length;d++){var f=_[d];y[f.name]=f}}function h(e){for(var t=s.shortPointers?4:8;e.length>=t;){var n=e.slice(0,t),o=parseInt(I(n),16);e=e.slice(t);var r=i.shift();if(!r)break;y[r.name]=r,o||R.U.oops("No value for "+r.name+" / "+n),s.nativeType!=R.NATIVE_TYPE_THUMB||1&o||R.U.oops("Non-thumb addr for "+r.name+" / "+n),r.value=o}}function m(){i.length&&R.oops("premature EOF in hex file; missing: "+i.map(function(e){return e.name}).join(", "))}},T.validateShim=function(e,t,n,o,r){if("TD_ID"!=t&&"TD_NOOP"!=t&&!R.U.lookup(u,t)){var i=e+"(...) (shim="+t+")",a=g(t);if(a){if(R.target.nativeType==R.NATIVE_TYPE_CS)return;o?"V"==a.argsFmt[0]&&R.U.userError("expecting function for "+i):"V"!=a.argsFmt[0]&&R.U.userError("expecting procedure for "+i);for(var s=0;s<r.length;++s){var l=a.argsFmt[s+1];if(l||R.U.userError("excessive parameters passed to "+i),R.target.taggedInts){var c="I"==l||"N"==l||"F"==l;"T"==l||(c&&!r[s]?R.U.userError("expecting number at parameter "+(s+1)+" of "+i):!c&&r[s]&&R.U.userError("expecting non-number at parameter "+(s+1)+" of "+i+" / "+a.argsFmt))}}r.length!=a.argsFmt.length-1&&R.U.userError("not enough arguments for "+i+" (got "+r.length+"; fmt="+a.argsFmt+")")}else R.U.userError("function not found: "+i)}},T.lookupFunc=g,T.lookupFunctionAddr=function(e){if("_pxt_comm_base"==e)return T.commBase;var t=g(e);return t?t.value:null},T.hexTemplateHash=N,T.hexPrelude=function(){return"    .startaddr 0x"+T.bytecodeStartAddrPadded.toString(16)+"\n"},T.patchHex=function(e,t,n,o){var r=E.slice(0,B);R.assert(t.length<64e3,"program too large, words: "+t.length),t[17]=t.length,t[20]=e.commSize;for(var i=[],a=0;a<x>>1;++a)i.push(0);t=i.concat(t);var s=0;function l(e,t){for(var n=[16,t>>8&255,255&t,0],o=0;o<8;++o)n.push(255&(e[s]||0)),n.push((e[s]||0)>>>8),s++;return n}var c=[16905,0,65535&T.bytecodeStartAddrPadded,T.bytecodeStartAddrPadded>>>16],u=N();for(a=0;a<4;++a)c.push(parseInt(I(u.slice(4*a,4*a+4)),16));var g=o?R.UF2.newBlockFile():null;if(D){var p=new Uint8Array(2*t.length);for(a=0;a<t.length;++a)pxt.HF2.write16(p,2*a,t[a]);var d=pxt.elf.patch(D,p);for(a=0;a<c.length;++a)pxt.HF2.write16(d,2*a+S,c[a]);return O(null,d),g?(R.UF2.writeBytes(g,0,d),[R.UF2.serializeFile(g)]):[R.U.uint8ArrayToString(d)]}if(g){if(R.UF2.writeHex(g,r),O(g),R.UF2.writeBytes(g,S,l(c,C).slice(4)),e.checksumBlock){for(var _=[],f=0,h=e.checksumBlock;f<h.length;f++){var m=h[f];_.push(255&m,m>>8)}R.UF2.writeBytes(g,e.target.flashChecksumAddr,_)}}else r[C]=w(l(c,S)),e.checksumBlock&&R.U.oops("checksum block in HEX not implemented yet");s=0,n&&(r=[]);for(var y=A,v=y-16>>16;s<t.length;)g?R.UF2.writeBytes(g,y,l(t,y).slice(4)):(y>>16!=v&&(v=y>>16,r.push(w([2,0,0,4,v>>8,255&v]))),r.push(w(l(t,y)))),y+=16;if(!n){var b=E.slice(B);g?R.UF2.writeHex(g,b):R.Util.pushRange(r,b)}if(e.packedSource)if(g)R.U.userError("TODO");else for(v=536870912,y=0,r.push(w([2,0,0,4,v>>8,255&v])),a=0;a<e.packedSource.length;a+=16){_=[16,y>>8&255,255&y,0];for(var k=0;k<16;++k)_.push(255&(e.packedSource.charCodeAt(a+k)||0));r.push(w(_)),y+=16}return g?[R.UF2.serializeFile(g)]:r}}(D=R.hex||(R.hex={})),R.asmline=function(e){return/(^[\s;])|(:$)/.test(e)||(e="    "+e),e+"\n"},R.vtableToAsm=s;var r=!(R.processorInlineAssemble=function(e,t){var n=i(e);n.disablePeepHole=!0,n.emit(t),a(n);for(var o=[],r=0;r<n.buf.length;r+=2)o.push(((n.buf[r+1]||0)<<16|n.buf[r])>>>0);return o});function I(e,t,n){var o=i(e);return o.emit(n),n=o.getSource(!r,t.numStmts,e.flashEnd),a(o),{src:n,buf:o.buf,thumbFile:o}}R.assemble=I,R.processorEmit=function(e,t,n){var o,r,i,a,s,l,c,u=B(e,t);o=e,r=u,i=R.U.sha256(r),o.sourceHash=i,u=r.replace(/\n.*@SRCHASH@\n/,"\n    .hex "+i.slice(0,16).toUpperCase()+" ; program hash\n"),t.embedBlob&&(e.packedSource=(a=t.embedMeta,s=N.pxtc.decodeBase64(t.embedBlob),(l=R.Util.toUTF8(a)).length,s.length,c="A//",c+=R.U.uint8ArrayToString([255&l.length,l.length>>8,255&s.length,s.length>>8,0,0,0,0]),c+=l,(c+=s).length%2&&(c+="\0"),c),!e.target.noSourceInFlash&&e.packedSource.length<4e4&&(u+=function(e){for(var t="",n=0;n<e.length;++n){var o=255&e.charCodeAt(n);t+=o<=15?"0"+o.toString(16):o.toString(16)}return"\n    .balign 16\n_stored_program: .hex "+t+"\n"}(e.packedSource),e.packedSource=null));var g=D.flashCodeAlign(t.target);if(t.target.flashChecksumAddr){for(var p=0;1<<p<g;)p++;var d=parseInt(e.sourceHash.slice(0,8),16),_=D.bytecodeStartAddrPadded/g;d=4294967040&d|p;var f=0,h=_;t.target.flashChecksumAddr<D.bytecodeStartAddrPadded&&(h-=f=Math.ceil((t.target.flashChecksumAddr+32)/g)),u+="\n    .balign 4\n__end_marker:\n    .word "+d+"\n\n; ------- this will get removed from the final binary ------\n__flash_checksums:\n    .word 0x87eeb07c ; magic\n    .word __end_marker ; end marker position\n    .word "+d+" ; end marker\n    ; template region\n    .short "+f+", "+h+"\n    .word 0x"+D.hexTemplateHash().slice(0,8)+"\n    ; user region\n    .short "+_+", 0xffff\n    .word 0x"+e.sourceHash.slice(0,8)+"\n    .word 0x0 ; terminator\n"}e.writeFile(R.BINARY_ASM,u);var m=I(t.target,e,u);if(m.thumbFile.commPtr&&(e.commSize=m.thumbFile.commPtr-D.commBase),m.src&&e.writeFile(R.BINARY_ASM,m.src),m.buf){if(t.target.flashChecksumAddr){var y=m.thumbFile.lookupLabel("__flash_checksums")/2;R.U.assert(y==m.buf.length-16);var v=m.buf.slice(m.buf.length-16);m.buf.splice(m.buf.length-16,16);var b=Math.ceil(2*m.buf.length/g);v[v.length-5]=b,e.checksumBlock=v}if(pxt.isOutputText(R.target))k=D.patchHex(e,m.buf,!1,!1).join("\r\n")+"\r\n",e.writeFile(pxt.outputName(R.target),k);else{var k=N.pxtc.encodeBase64(D.patchHex(e,m.buf,!1,!0)[0]);e.writeFile(pxt.outputName(R.target),k)}}for(var T=0,E=n.breakpoints;T<E.length;T++){var S=E[T],C=R.U.lookup(m.thumbFile.getLabels(),"__brkp_"+S.id);null!=C&&(S.binAddr=C)}for(var x=0,A=e.procs;x<A.length;x++)A[x].fillDebugInfo(m.thumbFile);n.procDebugInfo=e.procs.map(function(e){return e.debugInfo})},R.validateShim=D.validateShim,R.f4EncodeImg=function(e,t,n,o){for(var r=g(224|n)+g(e)+g(t)+"00",i=4,a=0,s=0,l=function(e){a|=e<<s,s==8-n?(r+=g(a),i++,s=a=0):s+=n},c=0;c<e;++c){for(var u=0;u<t;++u)l(o(c,u));for(;0!=s;)l(0);if(1<n)for(;3&i;)l(0)}return r;function g(e){return("0"+e.toString(16)).slice(-2)}}}(N.pxtc||(N.pxtc={}))}(ts||(ts={})),function(p){!function(u){var i=function(e,t){var n="";if(e.file){var o=p.getLineAndCharacterOfPosition(e.file,e.start),r=o.line,i=o.character,a=e.file.fileName;n+=a+"("+(r+1)+","+(i+1)+"): "}var s=u.DiagnosticCategory[e.category].toLowerCase();n+=s+" TS"+e.code+": "+u.flattenDiagnosticMessageText(e.messageText,p.sys.newLine)+p.sys.newLine,p.sys.write(n)};function g(e,t){for(var n=0,o=e;n<o.length;n++){var r=o[n];i(r,t)}}u.plainTsc=function(r){var e,t,n,o,i,a,s,l=p.parseCommandLine([]),c=p.findConfigFile(r,p.sys.fileExists);return e=function(){var e=p.sys.readFile(c),t=p.parseConfigFileTextToJson(c,e),n=t.config;if(!n)return g([t.error],void 0),void p.sys.exit(p.ExitStatus.DiagnosticsPresent_OutputsSkipped);var o=p.parseJsonConfigFileContent(n,p.sys,r,l.options,c);return 0<o.errors.length?(g(o.errors,void 0),void p.sys.exit(p.ExitStatus.DiagnosticsPresent_OutputsSkipped)):o}(),(t=p.createCompilerHost(e.options)).getDefaultLibFileName=function(){return"node_modules/typescript/lib/lib.d.ts"},n=e.fileNames,o=e.options,i=t,s=p.createProgram(n,o,i),0===(a=s.getSyntacticDiagnostics()).length&&0===(a=s.getOptionsDiagnostics().concat(u.Util.toArray(s.getGlobalDiagnostics()))).length&&(a=s.getSemanticDiagnostics()),g(a,i),s}}(p.pxtc||(p.pxtc={}))}(ts||(ts={})),function(E){!function(T){function n(t,e,n){if(void 0===n&&(n=""),e.parameters){var o=!!e.attributes.imageLiteral;return"("+e.parameters.filter(function(e){return!e.initializer}).map(function(e){return function(e,t,n,o){if(t.initializer)return t.initializer;if(t.default)return t.default;if("number"==t.type)return"0";if("boolean"==t.type)return"false";if("string"==t.type)return n?(n=!1,"`"+T.defaultImgLit+o+"`"):'"'+o+'"';var r=e?T.Util.lookup(e.byQName,t.type):void 0;if(r&&r.kind==T.SymbolKind.Enum){var i=T.Util.values(e.byQName).filter(function(e){return e.namespace==t.type})[0];if(i)return i.namespace+"."+i.name}var a=/^\((.*)\) => (.*)$/.exec(t.type);return a?"("+a[1]+") => {\n    "+o+"\n}":T.placeholderChar}(t,e,o,n)}).join(", ")+")"}return""}function f(d,e,t){function _(e,t,n){void 0===n&&(n=!1);var o=d.getTypeAtLocation(t);if(!o)return"None";n&&(o=o.getCallSignatures()[0].getReturnType());var r=d.typeToString(o,void 0,E.TypeFormatFlags.UseFullyQualifiedType);return isNaN(Number(r))?r:"number"}var n,o=function(e){switch(e.kind){case T.SK.MethodDeclaration:case T.SK.MethodSignature:return T.SymbolKind.Method;case T.SK.PropertyDeclaration:case T.SK.PropertySignature:case T.SK.GetAccessor:case T.SK.SetAccessor:return T.SymbolKind.Property;case T.SK.FunctionDeclaration:return T.SymbolKind.Function;case T.SK.VariableDeclaration:return T.SymbolKind.Variable;case T.SK.ModuleDeclaration:return T.SymbolKind.Module;case T.SK.EnumDeclaration:return T.SymbolKind.Enum;case T.SK.EnumMember:return T.SymbolKind.EnumMember;case T.SK.ClassDeclaration:return T.SymbolKind.Class;case T.SK.InterfaceDeclaration:return T.SymbolKind.Interface;default:return T.SymbolKind.None}}(t);if(o!=T.SymbolKind.None){var r=t,f=T.parseComments(r);if(f.weight<0)return null;var i=/^(.*)\.(.*)/.exec(e),a=o==T.SymbolKind.Function||o==T.SymbolKind.Method,s=null,l=E.getSourceFileOfNode(t);if(l){var c=/^pxt_modules\/([^\/]+)/.exec(l.fileName);c&&(s=c[1])}var u=void 0;if(o==T.SymbolKind.Class||o==T.SymbolKind.Interface){var g=t;if(u=[],g.heritageClauses)for(var p=0,h=g.heritageClauses;p<h.length;p++){var m=h[p];if(m.types)for(var y=0,v=m.types;y<v.length;y++){var b=v[y];u.push(_(0,b))}}}var k={kind:o,namespace:i?i[1]:"",name:i?i[2]:e,attributes:f,pkg:s,extendsTypes:u,retType:o==T.SymbolKind.Module?"":_(r.type,r,a),parameters:a?T.Util.toArray(r.parameters).map(function(n,e){var t,o,r=T.getName(n),i=f.paramHelp[r]||"",a=f.paramMin&&f.paramMin[r],s=f.paramMax&&f.paramMax[r];/\beg\.?:\s*(.+)/.exec(i);if(n.type&&n.type.kind===T.SK.FunctionType){var l=d.getSignatureFromDeclaration(n.type).getParameters();"objectdestructuring"===f.mutate?(T.assert(0<l.length),t=d.getTypeAtLocation(l[0].valueDeclaration).getProperties().map(function(e){return{name:e.getName(),type:d.typeToString(d.getTypeOfSymbolAtLocation(e,l[0].valueDeclaration))}})):o=l.map(function(e,t){return{name:e.getName(),type:d.typeToString(d.getTypeOfSymbolAtLocation(e,n))}})}var c={},u=d.getTypeAtLocation(n),g=u&&!!(u.flags&(E.TypeFlags.Enum|E.TypeFlags.EnumLiteral));if(f.block&&f.paramShadowOptions){var p=[];f.block.replace(/%(\w+)/g,function(e,t){return p.push(t),""}),f.paramShadowOptions[p[e]]&&(c.fieldEditorOptions={value:f.paramShadowOptions[p[e]]})}return a&&(c.min={value:a}),s&&(c.max={value:s}),{name:r,description:i,type:_(n.type,n),initializer:n.initializer?n.initializer.getText():f.paramDefl[r],default:f.paramDefl[r],properties:t,handlerParameters:o,options:c,isEnum:g}}):null,snippet:T.service.getSnippet(r,f)};return(t.kind===T.SK.GetAccessor||(t.kind===T.SK.PropertyDeclaration||t.kind===T.SK.PropertySignature)&&((n=t).modifiers&&n.modifiers.some(function(e){return e.kind==T.SK.ReadonlyKeyword})))&&(k.isReadOnly=!0),k}return null}function h(e,t){return e.getFullyQualifiedName(t)}T.placeholderChar="",T.defaultImgLit="\n. . . . .\n. . . . .\n. . # . .\n. . . . .\n. . . . .\n",T.renderCall=function(e,t){return t.namespace+"."+t.name+n(e,t)+";"},T.renderParameters=n,T.genDocs=function(o,e,r){void 0===r&&(r={}),pxt.debug("generating docs for "+o),pxt.debug(JSON.stringify(Object.keys(e.byQName),null,2));for(var i={},n=T.Util.values(e.byQName),t=n.filter(function(e){return e.kind==T.SymbolKind.EnumMember}).sort(function(e,t){var n=-(p(e)?1:-1)+(p(t)?1:-1);return n||(n=-(e.attributes.weight||50)+(t.attributes.weight||50))||T.U.strcmp(e.name,t.name)}),a={},s={},l=function(t,e){if(r.locs){var n={};Object.keys(t).sort().forEach(function(e){return n[e]=t[e]}),i[o+e+"-strings.json"]=JSON.stringify(n,null,2)}},c=function(t){if(t.kind==T.SymbolKind.Module){if(!n.filter(function(e){return e.namespace==t.name&&!!e.attributes.jsDoc})[0])return"continue";t.attributes.block||(t.attributes.block=t.name)}!function(t){if(r.locs&&t.qName&&!t.attributes.deprecated&&!/^__/.test(t.name)){if(pxt.debug("loc: "+t.qName),t.kind!=T.SymbolKind.EnumMember){var e=E.pxtc.blocksCategory(t);e&&(a["{id:category}"+e]=e)}t.attributes.jsDoc&&(s[t.qName]=t.attributes.jsDoc),t.attributes.block&&(a[t.qName+"|block"]=t.attributes.block),t.attributes.group&&(a["{id:group}"+t.attributes.group]=t.attributes.group),t.parameters&&t.parameters.filter(function(e){return!!e.description}).forEach(function(e){s[t.qName+"|param|"+e.name]=e.description})}}(t)},u=0,g=n;u<g.length;u++)c(g[u]);return r.locs&&t.forEach(function(e){e.attributes.block&&(a[e.qName+"|block"]=e.attributes.block),e.attributes.jsDoc&&(a[e.qName]=e.attributes.jsDoc)}),l(a,""),l(s,"-jsdoc"),i;function p(e){return!!e.attributes.block&&!!e.attributes.blockId}},T.getApiInfo=function(e,t,n){void 0===n&&(n=!1);for(var l={byQName:{},jres:e.jres},i=t.getTypeChecker(),a=function(e){if(e.kind!=T.SK.VariableStatement){if(function(e){if(e.modifiers&&e.modifiers.some(function(e){return e.kind==T.SK.PrivateKeyword||e.kind==T.SK.ProtectedKeyword}))return!1;var t=e.symbol;if(!t)return!1;for(;;){var n=t.parent;if(!n)break;t=n}var o=t.valueDeclaration||t.declarations[0];return o.kind==T.SK.VariableDeclaration&&(o=o.parent.parent),!(!o.parent||o.parent.kind!=T.SK.SourceFile)}(e)){if(!e.symbol)return void console.warn("no symbol",e);var t=h(i,e.symbol);e.kind==T.SK.SetAccessor&&(t+="@set");var n=f(i,t,e);if(n){var o=T.U.lookup(l.byQName,t);o&&(n.attributes=T.parseCommentString(o.attributes._source+"\n"+n.attributes._source),o.extendsTypes&&(n.extendsTypes=n.extendsTypes||[],o.extendsTypes.forEach(function(e){-1===n.extendsTypes.indexOf(e)&&n.extendsTypes.push(e)}))),l.byQName[t]=n}}if(e.kind==T.SK.ModuleDeclaration){var r=e;r.body.kind==T.SK.ModuleBlock?r.body.statements.forEach(a):r.body.kind==T.SK.ModuleDeclaration&&a(r.body)}else e.kind==T.SK.InterfaceDeclaration?e.members.forEach(a):e.kind==T.SK.ClassDeclaration?e.members.forEach(a):e.kind==T.SK.EnumDeclaration&&e.members.forEach(a)}else e.declarationList.declarations.forEach(a)},o=0,r=t.getSourceFiles();o<r.length;o++)r[o].statements.forEach(a);var s=[];for(var c in l.byQName){var u=l.byQName[c];u.qName=c,u.attributes._source=null,u.extendsTypes&&u.extendsTypes.length&&s.push(u);var g=u.attributes.jres;if(g){"true"==g&&(g=c);var p=T.U.lookup(e.jres||{},g);p&&p.icon&&!u.attributes.iconURL&&(u.attributes.iconURL=p.icon),p&&p.data&&!u.attributes.jresURL&&(u.attributes.jresURL="data:"+p.mimeType+";base64,"+p.data)}}var d={},_=function(e){if(!T.U.lookup(d,e.qName)){d[e.qName]=!0;var t={};t[e.qName]=!0;for(var n=0,o=e.extendsTypes||[];n<o.length;n++){var r=o[n];t[r]=!0;var i=l.byQName[r];if(i){_(i);for(var a=0,s=i.extendsTypes;a<s.length;a++)t[s[a]]=!0}}e.extendsTypes=Object.keys(t)}};return s.forEach(_),n&&delete l.byQName["Array.map"],l},T.getFullName=h,T.fillCompletionEntries=function(e,t,n,o){for(var r=e.getTypeChecker(),i=0,a=t;i<a.length;i++){var s=a[i],l=h(r,s);if((n.isMemberCompletion||!T.Util.lookup(o.byQName,l))&&!T.Util.lookup(n.entries,l)){var c=s.valueDeclaration||(s.declarations||[])[0];if(c){var u=f(r,l,c);u&&(u.isContextual=!0,n.entries[l]=u)}}}}}(E.pxtc||(E.pxtc={}))}(ts||(ts={})),function(m){var y;(function(e){var r,i,a,t,n,g,p,d,_,o={fileSystem:{},sourceFiles:[],target:{isNative:!1,hasHex:!1},hexinfo:null},s=function(){function e(){this.opts=o,this.fileVersions={},this.projectVer=0}return e.prototype.getProjectVersion=function(){return this.projectVer+""},e.prototype.setFile=function(e,t){this.opts.fileSystem[e]!=t&&(this.fileVersions[e]=(this.fileVersions[e]||0)+1,this.opts.fileSystem[e]=t,this.projectVer++)},e.prototype.setOpts=function(e){var n=this;y.Util.iterMap(e.fileSystem,function(e,t){n.opts.fileSystem[e]!=t&&(n.fileVersions[e]=(n.fileVersions[e]||0)+1)}),this.opts=e,this.projectVer++},e.prototype.getCompilationSettings=function(){return y.getTsCompilerOptions(this.opts)},e.prototype.getScriptFileNames=function(){return this.opts.sourceFiles.filter(function(e){return y.U.endsWith(e,".ts")})},e.prototype.getScriptVersion=function(e){return(this.fileVersions[e]||0).toString()},e.prototype.getScriptSnapshot=function(e){var t=this.opts.fileSystem[e];return t?m.ScriptSnapshot.fromString(t):null},e.prototype.getNewLine=function(){return"\n"},e.prototype.getCurrentDirectory=function(){return"."},e.prototype.getDefaultLibFileName=function(e){return"no-default-lib.d.ts"},e.prototype.log=function(e){console.log("LOG",e)},e.prototype.trace=function(e){console.log("TRACE",e)},e.prototype.error=function(e){console.error("ERROR",e)},e.prototype.useCaseSensitiveFileNames=function(){return!0},e}();function l(e){if(!/\.ts$/.test(e))return[];var t=r.getSyntacticDiagnostics(e);return t&&t.length||(t=r.getSemanticDiagnostics(e)),t||(t=[]),t}var f=function(e){return e?(n||(n=y.getBlocksInfo(e)),n):(t||(t=y.getBlocksInfo(a)),t)},c={reset:function(){r.cleanupSemanticCache(),i.setOpts(o)},setOptions:function(e){i.setOpts(e.options)},getCompletions:function(e){e.fileContent&&i.setFile(e.fileName,e.fileContent);var t=r.getProgram(),n=r.getCompletionData(e.fileName,e.position);if(!n)return{};t.getTypeChecker();var o={entries:{},isMemberCompletion:n.isMemberCompletion,isNewIdentifierLocation:n.isNewIdentifierLocation,isTypeLocation:!1};return y.fillCompletionEntries(t,n.symbols,o,a),o},compile:function(e){return y.compile(e.options)},decompile:function(e){return y.decompile(e.options,e.fileName)},assemble:function(e){return{words:y.processorInlineAssemble(i.opts.target,e.fileContent)}},fileDiags:function(e){return y.patchUpDiagnostics(l(e.fileName))},allDiags:function(){var e=r.getCompilerOptionsDiagnostics()||[],t=i.getScriptFileNames().map(l),n=e.concat(y.Util.concat(t));return 0==n.length&&(n=y.compileBinary(r.getProgram(),null,i.opts,{outfiles:{},diagnostics:[],success:!0,times:{}},"main.ts").diagnostics),y.patchUpDiagnostics(n)},format:function(e){var t=e.format;return y.format(t.input,t.pos)},apiInfo:function(){if(g=t=void 0,i.opts!==o)return a=y.getApiInfo(i.opts,r.getProgram())},blocksInfo:function(e){return f(e)},apiSearch:function(e){var t=e.search,i=f(t.localizedApis);t.localizedStrings&&pxt.Util.setLocalizedStrings(t.localizedStrings);var n,r=function(t,e,n){if(t)return"string"==typeof t?t:e?t[e]:Object.keys(t).map(function(e){return t[e]}).join(" ")};if(!p){p=[],d=pxt.blocks.blockDefinitions();var o=function(n){var o=d[n];if(o.operators){var e=function(t){o.operators[t].forEach(function(e){return p.push({id:n,name:o.name,jsdoc:"string"==typeof o.tooltip?o.tooltip:o.tooltip[e],block:e,field:[t,e],builtinBlock:!0})})};for(var t in o.operators)e(t)}else p.push({id:n,name:o.name,jsdoc:r(o.tooltip,o.tooltipSearch),block:r(o.block,o.blockTextSearch),builtinBlock:!0})};for(var a in d)o(a)}if(!g||t.subset){var s={},l=void 0;t.subset&&(_=t.subset,l=p.filter(function(e){return!!_[e.id]})),_?n=i.blocks.filter(function(e){return!!_[e.attributes.blockId]}):(n=i.blocks,l=p);var c=n.map(function(e){return{id:e.attributes.blockId,qName:e.qName,name:e.name,namespace:e.namespace,block:e.attributes.block,jsdoc:e.attributes.jsDoc,localizedCategory:_&&"string"==typeof _[e.attributes.blockId]?_[e.attributes.blockId]:void 0}}),u=0;n.forEach(function(e){var t,n,o,r=s[e.qName]=(n=(t=e).attributes.weight||50,(1e3*((o=i.apis.byQName[t.namespace])&&o.attributes.weight||50)+n)*(o&&o.attributes.advanced||t.attributes.advanced?1:1e6));u=Math.max(u,r)}),c=c.concat(l),g=new Fuse(c,{shouldSort:!0,threshold:.6,location:0,distance:100,maxPatternLength:16,minMatchCharLength:2,findAllMatches:!1,caseSensitive:!1,keys:[{name:"name",weight:.3},{name:"namespace",weight:.1},{name:"localizedCategory",weight:.1},{name:"block",weight:.4375},{name:"jsdoc",weight:.0625}],sortFn:function(e,t){var n=e.qName?1-s[e.item.qName]/u:1,o=t.qName?1-s[t.item.qName]/u:1;return e.score*(1+n/10)-t.score*(1+o/10)}})}return g.search(t.term).slice(0,7)}};e.performOperation=function(e,t){r||(i=new s,r=m.createLanguageService(i));var n=null;if(c.hasOwnProperty(e))try{n=c[e](t)||{}}catch(e){n={errorMessage:e.stack}}else n={errorMessage:"No such operation: "+e};return n};var h="`\n. . . . .\n. . . . .\n. . # . .\n. . . . .\n. . . . .\n`";e.getSnippet=function(e,u){if(m.isFunctionLike(e)){var g=r?r.getProgram().getTypeChecker():void 0,t=e.parameters?e.parameters.filter(function(e){return!e.initializer&&!e.questionToken}).map(function(e){var t=e.type;if(!t)return"null";var n=e.name.kind===y.SK.Identifier?e.name.text:void 0;if(u&&u.paramDefl&&u.paramDefl[n]){if(t.kind==y.SK.StringKeyword){var o=u.paramDefl[n];return t.kind==y.SK.StringKeyword&&0!=o.indexOf('"')?'"'+o+'"':o}return u.paramDefl[n]}switch(t.kind){case y.SK.StringKeyword:return"leds"==n?h:'""';case y.SK.NumberKeyword:return"0";case y.SK.BooleanKeyword:return"false";case y.SK.ArrayType:return"[]";case y.SK.TypeReference:if(g){var r=g.getTypeAtLocation(e);if(r){if(r.flags&m.TypeFlags.Enum){if(r.symbol){var i=r.symbol.valueDeclaration;if(i.members.length&&i.members[0].name.kind===y.SK.Identifier)return r.symbol.name+"."+i.members[0].name.text}return"0"}if(r.flags&(m.TypeFlags.Number|m.TypeFlags.NumberLiteral))return"0"}}break;case y.SK.FunctionType:var a=t,s=g?g.getSignatureFromDeclaration(a):void 0;return s?p(s):"function () {}"}var l=g?g.getTypeAtLocation(e):void 0;if(l&&y.isObjectType(l)&&l.objectFlags&m.ObjectFlags.Anonymous){var c=g.getSignaturesOfType(l,m.SignatureKind.Call);return c.length?p(c[0]):"function () {}"}return"null"}):[];return e.name.getText()+"("+t.join(", ")+")"}function p(t){var e="",n=m.mapToDisplayParts(function(e){g.getSymbolDisplayBuilder().buildSignatureDisplay(t,e)}),o=g.getReturnTypeOfSignature(t);o.flags&m.TypeFlags.NumberLike?e="return 0;":o.flags&m.TypeFlags.StringLike?e='return "";':o.flags&(m.TypeFlags.Boolean|m.TypeFlags.BooleanLiteral)&&(e="return false;");var r=m.displayPartsToString(n);return"function "+r.substr(0,r.lastIndexOf(":"))+" {\n    "+e+"\n}"}}})((y=m.pxtc||(m.pxtc={})).service||(y.service={}))}(ts||(ts={})),function(e){var _;(function(e){var p=_.assembler.emitErr,d=p("opcode name doesn't match","<name>"),a=function(o){function e(e,t,n){return o.call(this,e,t,n,n,!1)||this}return __extends(e,o),e.prototype.emit=function(e){var t=e.words;if(t[0]!=this.name)return d;for(var n=this.opcode,o=1,r=[],i=null,a=null,s=0;s<this.args.length;++s){var l=this.args[s],c=t[o++];if("$"==l[0]){var u=this.ei.encoders[l],g=null;if(u.isImmediate){if(!c)return p("expecting number",c);if(c=c.replace(/^#/,""),null==(g=e.bin.parseOneInt(c)))return p("expecting number",c)}else _.oops();if(null==g)return p("didn't understand it",c);if(r.push(g),null==(g=u.encode(g)))return p("argument out of range or mis-aligned",c);"$i1"==l?(_.assert(0<=g&&g<=255),i=g):"$i2"==l?(i=255&g,a=g>>8&255):_.oops()}else if(l!=c)return p("expecting "+l,c)}return t[o]?p("trailing tokens",t[o]):("call"==this.name&&(n+=r[0]),{stack:0,opcode:n,opcode2:i,opcode3:a,numArgs:r,labelName:e.bin.normalizeExternalLabel(null)})},e}(_.assembler.Instruction);e.VmInstruction=a;var t=function(t){function e(e){var i=t.call(this)||this;return i.addEnc("$i1","#0-255",function(e){return i.inrange(255,e,e)}),i.addEnc("$i2","#0-65535",function(e){return i.inrange(65535,e,e)}),_.U.iterMap(e.vmOpCodes,function(e,t){var n=/(.*)_(\d+)/.exec(e),o="";"call"==n[1]?o="call $i1, $i2":"0"==n[2]?o=n[1]:"1"==n[2]?o=n[1]+" $i1":"2"==n[2]?o=n[1]+" $i2":_.oops();var r=new a(i,o,t);i.instructions.hasOwnProperty(r.name)||(i.instructions[r.name]=[]),i.instructions[r.name].push(r)}),i}return __extends(e,t),e.prototype.testAssembler=function(){},e.prototype.postProcessRelAddress=function(e,t){return t+e.baseOffset},e.prototype.postProcessAbsAddress=function(e,t){return t},e.prototype.getAddressFromLabel=function(e,t,n,o){void 0===o&&(o=!1);var r=e.lookupLabel(n);return null==r?null:t.is32bit?r:r-(e.pc()+2)},e.prototype.toFnPtr=function(e,t){return e},e.prototype.wordSize=function(){return 2},e.prototype.peephole=function(e,t,n){var o=e.getOp(),r="";if(t){var i=o+";"+(r=t.getOp()),a=this.file.peepCounts;a[i]=(a[i]||0)+1}"jmp"==o&&e.numArgs[0]==this.file.baseOffset+t.location?e.update(""):"push"!=o||"callproc"!=r&&"ldconst"!=r&&"stringlit"!=r&&"ldtmp"!=r?"push"!=o||"ldzero"!=r&&"ldone"!=r?"ldtmp"!=o||"incr"!=r&&"decr"!=r||(e.update("ldtmp_"+r+" "+e.words[1]),t.update("")):(e.update(""),t.update("push_"+r)):(e.update(""),t.update("push_"+r+" "+t.words[1]))},e}(_.assembler.AbstractProcessor);e.VmProcessor=t})((_=e.pxtc||(e.pxtc={})).vm||(_.vm={}))}(ts||(ts={}));var $jscomp=$jscomp||{};$jscomp.scope={};var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(e){return void 0!==e},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.exportPath_=function(e,t,n){e=e.split("."),n=n||goog.global,e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(var o;e.length&&(o=e.shift());)!e.length&&goog.isDef(t)?n[o]=t:n=n[o]&&n[o]!==Object.prototype[o]?n[o]:n[o]={}},goog.define=function(e,t){var n=t;if(!COMPILED){var o=goog.global.CLOSURE_UNCOMPILED_DEFINES,r=goog.global.CLOSURE_DEFINES;o&&void 0===o.nodeType&&Object.prototype.hasOwnProperty.call(o,e)?n=o[e]:r&&void 0===r.nodeType&&Object.prototype.hasOwnProperty.call(r,e)&&(n=r[e])}goog.exportPath_(e,n)},goog.DEBUG=!1,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var n=e;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(e,t)},goog.getScriptNonce=function(){return null===goog.cspNonce_&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)||""),goog.cspNonce_},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(e){return(e=e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(e)?e:null},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){if(!COMPILED&&e in goog.loadedModules_){if(goog.loadedModules_[e].type!=goog.ModuleType.GOOG)throw Error("Can only goog.module.get for goog.modules.");if(goog.loadedModules_[e].moduleId!=e)throw Error("Cannot goog.module.get by path.")}return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e].exports;if(!goog.implicitNamespaces_[e])return null!=(e=goog.getObjectByName(e))?e:null}return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var e=goog.global.$jscomp;return!!e&&("function"==typeof e.getCurrentModulePath&&!!e.getCurrentModulePath())},goog.getModulePath_=function(){return goog.moduleLoaderState_&&goog.moduleLoaderState_.path},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInGoogModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var n=e.split("."),o=t||goog.global,r=0;r<n.length;r++)if(o=o[n[r]],!goog.isDefAndNotNull(o))return null;return o},goog.globalize=function(e,t){var n,o=t||goog.global;for(n in e)o[n]=e[n]},goog.addDependency=function(e,t,n,o){!COMPILED&&goog.DEPENDENCIES_ENABLED&&goog.debugLoader_.addDependency(e,t,n,o)},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.isPath_=function(e){return 0==e.indexOf("./")||0==e.indexOf("../")},goog.require=function(e){if(goog.isPath_(e)){if(!goog.isInGoogModuleLoader_())throw Error("Cannot require by path outside of goog.modules.");if(!goog.getModulePath_())throw Error("Current module has no path information. Was it loaded via goog.loadModule without a path argument?");e=goog.normalizePath_(goog.getModulePath_()+"/../"+e)}if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_.requested(e),goog.isProvided_(e)){if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{goog.debugLoader_.load_(e)}finally{goog.moduleLoaderState_=t}}return null}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e,t){var n=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG,path:t},goog.isFunction(e))var o=e.call(void 0,{});else{if(!goog.isString(e))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),o=goog.loadModuleFromSource_.call(void 0,e)}var r=goog.moduleLoaderState_.moduleName;if(!goog.isString(r)||!r)throw Error('Invalid module name "'+r+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,o):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof o&&null!=o&&Object.seal(o);var i={exports:o,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};goog.loadedModules_[r]=i,t&&(goog.loadedModules_[t]=i)}finally{goog.moduleLoaderState_=n}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(a,b){var c=goog.global.$jscomp;c||(goog.global.$jscomp=c={});var d=c.transpile;if(!d){var e=goog.basePath+goog.TRANSPILER,f=goog.loadFileSync_(e);if(f){if(function(){eval(f+"\n//# sourceURL="+e)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,c=goog.global.$jscomp,d=c.transpile}}return d||(d=c.transpile=function(e,t){return goog.logToConsole_(t+" requires transpilation but no transpiler was found."),e}),d(a,b)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if("function"==typeof e.clone)return e.clone();for(var n in t="array"==t?[]:{},e)t[n]=goog.cloneObject(e[n]);return t}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(t,n,e){if(!t)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,o),t.apply(n,e)}}return function(){return t.apply(n,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,n=t.createElement("SCRIPT");n.type="text/javascript",n.defer=!1,n.appendChild(t.createTextNode(e)),t.head.appendChild(n),t.head.removeChild(n)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var o=function(e){return goog.cssNameMapping_[e]||e},n=function(e){e=e.split("-");for(var t=[],n=0;n<e.length;n++)t.push(o(e[n]));return t.join("-")};return n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?o:n:function(e){return e},n=t?e+"-"+n(t):n(e),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(n):n},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,n){return n&&(e=e.replace(/\{\$([^}]+)}/g,function(e,t){return null!=n&&t in n?n[t]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,i){function t(){}t.prototype=i.prototype,e.superClass_=i.prototype,e.prototype=new t,(e.prototype.constructor=e).base=function(e,t,n){for(var o=Array(arguments.length-2),r=2;r<arguments.length;r++)o[r-2]=arguments[r];return i.prototype[t].apply(e,o)}},goog.base=function(e,t,n){var o=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!o)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(void 0!==o.superClass_){for(var r=Array(arguments.length-1),i=1;i<arguments.length;i++)r[i-1]=arguments[i];return o.superClass_.constructor.apply(e,r)}if("string"!=typeof t&&"symbol"!=typeof t)throw Error("method names provided to goog.base must be a string or a symbol");for(r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];i=!1;for(var a=e.constructor;a;a=a.superClass_&&a.superClass_.constructor)if(a.prototype[t]===o)i=!0;else if(i)return a.prototype[t].apply(e,r);if(e[t]===o)return e.constructor.prototype[t].apply(e,r);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var n=t.constructor,o=t.statics;return n&&n!=Object.prototype.constructor||(n=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),n=goog.defineClass.createSealingConstructor_(n,e),e&&goog.inherits(n,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(n.prototype,t),null!=o&&(o instanceof Function?o(n):goog.defineClass.applyProperties_(n,o)),n},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(t,e){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return t;var n=!goog.defineClass.isUnsealable_(e),o=function(){var e=t.apply(this,arguments)||this;return e[goog.UID_PROPERTY_]=e[goog.UID_PROPERTY_],this.constructor===o&&n&&Object.seal instanceof Function&&Object.seal(e),e};return o},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);for(var o=0;o<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;o++)n=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",!COMPILED&&goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.isDocumentLoading_=function(){var e=goog.global.document;return e.attachEvent?"complete"!=e.readyState:"loading"==e.readyState},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)&&goog.isString(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var e=goog.global.document,t=e.currentScript;for(t=(e=t?[t]:e.getElementsByTagName("SCRIPT")).length-1;0<=t;--t){var n=e[t].src,o=n.lastIndexOf("?");if(o=-1==o?n.length:o,"base.js"==n.substr(o-7,7)){goog.basePath=n.substr(0,o-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(e,t){d?c[e]=!0:t()?c[e]=!1:d=c[e]=!0}function b(a){try{return!!eval(a)}catch(e){return!1}}var c={es3:!1},d=!1,e=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",function(){return b("[1,].length==1")}),a("es6",function(){var t=e.match(/Edge\/(\d+)(\.\d)*/i);return!(t&&Number(t[1])<15)&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')}),a("es6-impl",function(){return!0}),a("es7",function(){return b("2 ** 2 == 4")}),a("es8",function(){return b("async () => 1, true")}),a("es9",function(){return b("({...rest} = {}), true")}),a("es_next",function(){return!1}),c},goog.Transpiler.prototype.needsTranspile=function(e,t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(this.requiresTranspilation_||(this.requiresTranspilation_=this.createRequiresTranspilation_()),e in this.requiresTranspilation_)return!!this.requiresTranspilation_[e]||!(!goog.inHtmlDocument_()||"es6"!=t||"noModule"in goog.global.document.createElement("script"));throw Error("Unknown language mode: "+e)},goog.Transpiler.prototype.transpile=function(e,t){return goog.transpile_(e,t)},goog.transpiler_=new goog.Transpiler,goog.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.DebugLoader_=function(){this.dependencies_={},this.idToPath_={},this.written_={},this.loadingDeps_=[],this.depsToLoad_=[],this.paused_=!1,this.factory_=new goog.DependencyFactory(goog.transpiler_),this.deferredCallbacks_={},this.deferredQueue_=[]},goog.DebugLoader_.prototype.bootstrap=function(e,t){function n(){o&&(goog.global.setTimeout(o,0),o=null)}var o=t;if(e.length){for(var r=[],i=0;i<e.length;i++){var a=this.getPathFromDeps_(e[i]);if(!a)throw Error("Unregonized namespace: "+e[i]);r.push(this.dependencies_[a])}a=goog.require;var s=0;for(i=0;i<e.length;i++)a(e[i]),r[i].onLoad(function(){++s==e.length&&n()})}else n()},goog.DebugLoader_.prototype.loadClosureDeps=function(){this.depsToLoad_.push(this.factory_.createDependency(goog.normalizePath_(goog.basePath+"deps.js"),"deps.js",[],[],{},!1)),this.loadDeps_()},goog.DebugLoader_.prototype.requested=function(e,t){var n=this.getPathFromDeps_(e);if(n&&(t||this.areDepsLoaded_(this.dependencies_[n].requires))){var o=this.deferredCallbacks_[n];o&&(delete this.deferredCallbacks_[n],o())}},goog.DebugLoader_.prototype.setDependencyFactory=function(e){this.factory_=e},goog.DebugLoader_.prototype.load_=function(e){if(!this.getPathFromDeps_(e))throw e="goog.require could not find: "+e,goog.logToConsole_(e),Error(e);var n=this,o=[],r=function(e){var t=n.getPathFromDeps_(e);if(!t)throw Error("Bad dependency path or symbol: "+e);if(!n.written_[t]){for(n.written_[t]=!0,e=n.dependencies_[t],t=0;t<e.requires.length;t++)goog.isProvided_(e.requires[t])||r(e.requires[t]);o.push(e)}};r(e),e=!!this.depsToLoad_.length,this.depsToLoad_=this.depsToLoad_.concat(o),this.paused_||e||this.loadDeps_()},goog.DebugLoader_.prototype.loadDeps_=function(){for(var r=this,i=this.paused_;this.depsToLoad_.length&&!i;)!function(){var t=!1,n=r.depsToLoad_.shift(),e=!1;r.loading_(n);var o={pause:function(){if(t)throw Error("Cannot call pause after the call to load.");i=!0},resume:function(){t?r.resume_():i=!1},loaded:function(){if(e)throw Error("Double call to loaded.");e=!0,r.loaded_(n)},pending:function(){for(var e=[],t=0;t<r.loadingDeps_.length;t++)e.push(r.loadingDeps_[t]);return e},setModuleState:function(e,t){goog.moduleLoaderState_={path:e,type:t,moduleName:"",declareLegacyNamespace:!1}},registerEs6ModuleExports:function(e,t){goog.loadedModules_[e]={exports:t,type:goog.ModuleType.ES6,moduleId:""}},registerGoogModuleExports:function(e,t){goog.loadedModules_[e]={exports:t,type:goog.ModuleType.GOOG,moduleId:e}},clearModuleState:function(){goog.moduleLoaderState_=null},defer:function(e){if(t)throw Error("Cannot register with defer after the call to load.");r.defer_(n,e)},areDepsLoaded:function(){return r.areDepsLoaded_(n.requires)}};try{n.load(o)}finally{t=!0}}();i&&this.pause_()},goog.DebugLoader_.prototype.pause_=function(){this.paused_=!0},goog.DebugLoader_.prototype.resume_=function(){this.paused_&&(this.paused_=!1,this.loadDeps_())},goog.DebugLoader_.prototype.loading_=function(e){this.loadingDeps_.push(e)},goog.DebugLoader_.prototype.loaded_=function(e){for(var t=0;t<this.loadingDeps_.length;t++)if(this.loadingDeps_[t]==e){this.loadingDeps_.splice(t,1);break}for(t=0;t<this.deferredQueue_.length;t++)if(this.deferredQueue_[t]==e.path){this.deferredQueue_.splice(t,1);break}if(this.loadingDeps_.length==this.deferredQueue_.length&&!this.depsToLoad_.length)for(;this.deferredQueue_.length;)this.requested(this.deferredQueue_.shift(),!0);e.loaded()},goog.DebugLoader_.prototype.areDepsLoaded_=function(e){for(var t=0;t<e.length;t++){var n=this.getPathFromDeps_(e[t]);if(!n||!(n in this.deferredCallbacks_||goog.isProvided_(e[t])))return!1}return!0},goog.DebugLoader_.prototype.getPathFromDeps_=function(e){return e in this.idToPath_?this.idToPath_[e]:e in this.dependencies_?e:null},goog.DebugLoader_.prototype.defer_=function(e,t){this.deferredCallbacks_[e.path]=t,this.deferredQueue_.push(e.path)},goog.LoadController=function(){},goog.LoadController.prototype.pause=function(){},goog.LoadController.prototype.resume=function(){},goog.LoadController.prototype.loaded=function(){},goog.LoadController.prototype.pending=function(){},goog.LoadController.prototype.registerEs6ModuleExports=function(e,t){},goog.LoadController.prototype.setModuleState=function(e,t){},goog.LoadController.prototype.clearModuleState=function(){},goog.LoadController.prototype.defer=function(e){},goog.LoadController.prototype.areDepsLoaded=function(){},goog.Dependency=function(e,t,n,o,r){this.path=e,this.relativePath=t,this.provides=n,this.requires=o,this.loadFlags=r,this.loaded_=!1,this.loadCallbacks_=[]},goog.Dependency.prototype.onLoad=function(e){this.loaded_?e():this.loadCallbacks_.push(e)},goog.Dependency.prototype.loaded=function(){this.loaded_=!0;var e=this.loadCallbacks_;this.loadCallbacks_=[];for(var t=0;t<e.length;t++)e[t]()},goog.Dependency.defer_=!1,goog.Dependency.callbackMap_={},goog.Dependency.registerCallback_=function(e){var t=Math.random().toString(32);return goog.Dependency.callbackMap_[t]=e,t},goog.Dependency.unregisterCallback_=function(e){delete goog.Dependency.callbackMap_[e]},goog.Dependency.callback_=function(e,t){if(!(e in goog.Dependency.callbackMap_))throw Error("Callback key "+e+" does not exist (was base.js loaded more than once?).");for(var n=goog.Dependency.callbackMap_[e],o=[],r=1;r<arguments.length;r++)o.push(arguments[r]);n.apply(void 0,o)},goog.Dependency.prototype.load=function(t){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?t.loaded():t.pause();else if(goog.inHtmlDocument_()){var e=goog.global.document;if("complete"==e.readyState&&!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING){if(/\bdeps.js$/.test(this.path))return void t.loaded();throw Error('Cannot write "'+this.path+'" after document load')}if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&goog.isDocumentLoading_()){var n=goog.Dependency.registerCallback_(function(e){goog.DebugLoader_.IS_OLD_IE_&&"complete"!=e.readyState||(goog.Dependency.unregisterCallback_(n),t.loaded())});e.write('<script src="'+this.path+'" '+(goog.DebugLoader_.IS_OLD_IE_?"onreadystatechange":"onload")+"=\"goog.Dependency.callback_('"+n+'\', this)" type="text/javascript" '+(goog.Dependency.defer_?"defer":"")+"><\/script>")}else{var o=e.createElement("script");o.defer=goog.Dependency.defer_,o.async=!1,o.type="text/javascript";var r=goog.getScriptNonce();r&&(o.nonce=r),goog.DebugLoader_.IS_OLD_IE_?(t.pause(),o.onreadystatechange=function(){"loaded"!=o.readyState&&"complete"!=o.readyState||(t.loaded(),t.resume())}):o.onload=function(){o.onload=null,t.loaded()},o.src=this.path,e.head.appendChild(o)}}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),"deps.js"==this.relativePath?(goog.logToConsole_("Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, or seting CLOSURE_NO_DEPS to true."),t.loaded()):t.pause()},goog.Es6ModuleDependency=function(e,t,n,o,r){goog.Dependency.call(this,e,t,n,o,r)},goog.inherits(goog.Es6ModuleDependency,goog.Dependency),goog.Es6ModuleDependency.prototype.load=function(t){if(goog.global.CLOSURE_IMPORT_SCRIPT)goog.global.CLOSURE_IMPORT_SCRIPT(this.path)?t.loaded():t.pause();else if(goog.inHtmlDocument_()){var r=goog.global.document,n=this;if(goog.isDocumentLoading_()){var e=function(e,t){t?r.write('<script type="module" crossorigin>'+t+"<\/script>"):r.write('<script type="module" crossorigin src="'+e+'"><\/script>')};goog.Dependency.defer_=!0}else e=function(e,t){var n=r.createElement("script");n.defer=!0,n.async=!1,n.type="module",n.setAttribute("crossorigin",!0);var o=goog.getScriptNonce();o&&(n.nonce=o),t?n.textContent=t:n.src=e,r.head.appendChild(n)};var o=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(o),t.setModuleState(n.path,goog.ModuleType.ES6)});e(void 0,'goog.Dependency.callback_("'+o+'")'),e(this.path,void 0);var i=goog.Dependency.registerCallback_(function(e){goog.Dependency.unregisterCallback_(i),t.registerEs6ModuleExports(n.path,e)});e(void 0,'import * as m from "'+this.path+'"; goog.Dependency.callback_("'+i+'", m)');var a=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(a),t.clearModuleState(),t.loaded()});e(void 0,'goog.Dependency.callback_("'+a+'")')}else goog.logToConsole_("Cannot use default debug loader outside of HTML documents."),t.pause()},goog.TransformedDependency=function(e,t,n,o,r){goog.Dependency.call(this,e,t,n,o,r),this.contents_=null},goog.inherits(goog.TransformedDependency,goog.Dependency),goog.TransformedDependency.prototype.load=function(t){function n(){i.contents_=goog.loadFileSync_(i.path),i.contents_&&(i.contents_=i.transform(i.contents_),i.contents_&&(i.contents_+="\n//# sourceURL="+i.path))}function e(){if(n(),i.contents_){a&&t.setModuleState(i.path,goog.ModuleType.ES6);try{var e=i.contents_;i.contents_=null,goog.globalEval(e)}finally{a&&t.clearModuleState()}a&&goog.global.$jscomp.require.ensure([i.path],function(){t.registerEs6ModuleExports(i.path,goog.global.$jscomp.require(i.path))}),t.loaded()}}var o,r,i=this;if(goog.global.CLOSURE_IMPORT_SCRIPT)n(),this.contents_&&goog.global.CLOSURE_IMPORT_SCRIPT("",this.contents_)?(this.contents_=null,t.loaded()):t.pause();else{var a=this.loadFlags.module==goog.ModuleType.ES6;if(1<t.pending().length&&goog.DebugLoader_.IS_OLD_IE_||goog.Dependency.defer_&&goog.isDocumentLoading_())t.defer(function(){e()});else if(a&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()){goog.Dependency.defer_=!0;var s=goog.global.document;t.pause();var l=s.onreadystatechange;s.onreadystatechange=function(){(s.attachEvent?"complete"==s.readyState:"interactive"==s.readyState)&&(s.onreadystatechange=l,e(),t.resume()),goog.isFunction(l)&&l.apply(void 0,arguments)}}else!goog.DebugLoader_.IS_OLD_IE_&&goog.inHtmlDocument_()&&goog.isDocumentLoading_()?(o=goog.global.document,r=goog.Dependency.registerCallback_(function(){goog.Dependency.unregisterCallback_(r),e()}),o.write('<script type="text/javascript">'+goog.protectScriptTag_('goog.Dependency.callback_("'+r+'");')+"<\/script>")):e()}},goog.TransformedDependency.prototype.transform=function(e){},goog.TranspiledDependency=function(e,t,n,o,r,i){goog.TransformedDependency.call(this,e,t,n,o,r),this.transpiler=i},goog.inherits(goog.TranspiledDependency,goog.TransformedDependency),goog.TranspiledDependency.prototype.transform=function(e){return this.transpiler.transpile(e,this.path)},goog.GoogModuleDependency=function(e,t,n,o,r,i,a){goog.TransformedDependency.call(this,e,t,n,o,r),this.needsTranspile_=i,this.transpiler_=a},goog.inherits(goog.GoogModuleDependency,goog.TransformedDependency),goog.GoogModuleDependency.prototype.transform=function(e){return this.needsTranspile_&&(e=this.transpiler_.transpile(e,this.path)),goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+this.path+"\n")+', "'+this.path+'");':'goog.loadModule(function(exports) {"use strict";'+e+'\n;return exports}, "'+this.path+'");\n//# sourceURL='+this.path+"\n"},goog.DebugLoader_.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader_.prototype.addDependency=function(e,t,n,o){t=t||[],e=e.replace(/\\/g,"/");var r=goog.normalizePath_(goog.basePath+e);for(o&&"boolean"!=typeof o||(o=o?{module:goog.ModuleType.GOOG}:{}),n=this.factory_.createDependency(r,e,t,n,o,goog.transpiler_.needsTranspile(o.lang||"es3",o.module)),this.dependencies_[r]=n,n=0;n<t.length;n++)this.idToPath_[t[n]]=r;this.idToPath_[e]=r},goog.DependencyFactory=function(e){this.transpiler=e},goog.DependencyFactory.prototype.createDependency=function(e,t,n,o,r,i){return r.module==goog.ModuleType.GOOG?new goog.GoogModuleDependency(e,t,n,o,r,i,this.transpiler):i?new goog.TranspiledDependency(e,t,n,o,r,this.transpiler):r.module==goog.ModuleType.ES6?new goog.Es6ModuleDependency(e,t,n,o,r):new goog.Dependency(e,t,n,o,r)},goog.debugLoader_=new goog.DebugLoader_,goog.loadClosureDeps=function(){goog.debugLoader_.loadClosureDeps()},goog.setDependencyFactory=function(e){goog.debugLoader_.setDependencyFactory(e)},goog.global.CLOSURE_NO_DEPS||goog.debugLoader_.loadClosureDeps(),goog.bootstrap=function(e,t){goog.debugLoader_.bootstrap(e,t)}),goog.debug={},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(e,t){goog.debug.Error.call(this,goog.asserts.subs_(e,t)),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(e,t){for(var n=e.split("%s"),o="",r=n.length-1,i=0;i<r;i++)o+=n[i]+(i<t.length?t[i]:"%s");return o+n[r]},goog.asserts.doAssertFailure_=function(e,t,n,o){var r="Assertion failed";if(n){r+=": "+n;var i=o}else e&&(r+=": "+e,i=t);e=new goog.asserts.AssertionError(""+r,i||[]),goog.asserts.errorHandler_(e)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,n,o){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertFinite=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||"number"==typeof e&&isFinite(e)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=!1,goog.array.peek=function(e){return e[e.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.indexOf.call(e,t,n)}:function(e,t,n){if(n=null==n?0:n<0?Math.max(0,e.length+n):n,goog.isString(e))return goog.isString(t)&&1==t.length?e.indexOf(t,n):-1;for(;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.lastIndexOf.call(e,t,null==n?e.length-1:n)}:function(e,t,n){if((n=null==n?e.length-1:n)<0&&(n=Math.max(0,e.length+n)),goog.isString(e))return goog.isString(t)&&1==t.length?e.lastIndexOf(t,n):-1;for(;0<=n;n--)if(n in e&&e[n]===t)return n;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(e,t,n){goog.asserts.assert(null!=e.length),Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var o=e.length,r=goog.isString(e)?e.split(""):e,i=0;i<o;i++)i in r&&t.call(n,r[i],i,e)},goog.array.forEachRight=function(e,t,n){var o=e.length,r=goog.isString(e)?e.split(""):e;for(--o;0<=o;--o)o in r&&t.call(n,r[o],o,e)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.filter.call(e,t,n)}:function(e,t,n){for(var o=e.length,r=[],i=0,a=goog.isString(e)?e.split(""):e,s=0;s<o;s++)if(s in a){var l=a[s];t.call(n,l,s,e)&&(r[i++]=l)}return r},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.map.call(e,t,n)}:function(e,t,n){for(var o=e.length,r=Array(o),i=goog.isString(e)?e.split(""):e,a=0;a<o;a++)a in i&&(r[a]=t.call(n,i[a],a,e));return r},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(e,t,n,o){return goog.asserts.assert(null!=e.length),o&&(t=goog.bind(t,o)),Array.prototype.reduce.call(e,t,n)}:function(n,o,e,r){var i=e;return goog.array.forEach(n,function(e,t){i=o.call(r,i,e,t,n)}),i},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(e,t,n,o){return goog.asserts.assert(null!=e.length),goog.asserts.assert(null!=t),o&&(t=goog.bind(t,o)),Array.prototype.reduceRight.call(e,t,n)}:function(n,o,e,r){var i=e;return goog.array.forEachRight(n,function(e,t){i=o.call(r,i,e,t,n)}),i},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.some.call(e,t,n)}:function(e,t,n){for(var o=e.length,r=goog.isString(e)?e.split(""):e,i=0;i<o;i++)if(i in r&&t.call(n,r[i],i,e))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(e,t,n){return goog.asserts.assert(null!=e.length),Array.prototype.every.call(e,t,n)}:function(e,t,n){for(var o=e.length,r=goog.isString(e)?e.split(""):e,i=0;i<o;i++)if(i in r&&!t.call(n,r[i],i,e))return!1;return!0},goog.array.count=function(e,o,r){var i=0;return goog.array.forEach(e,function(e,t,n){o.call(r,e,t,n)&&++i},r),i},goog.array.find=function(e,t,n){return(t=goog.array.findIndex(e,t,n))<0?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndex=function(e,t,n){for(var o=e.length,r=goog.isString(e)?e.split(""):e,i=0;i<o;i++)if(i in r&&t.call(n,r[i],i,e))return i;return-1},goog.array.findRight=function(e,t,n){return(t=goog.array.findIndexRight(e,t,n))<0?null:goog.isString(e)?e.charAt(t):e[t]},goog.array.findIndexRight=function(e,t,n){var o=e.length,r=goog.isString(e)?e.split(""):e;for(--o;0<=o;o--)if(o in r&&t.call(n,r[o],o,e))return o;return-1},goog.array.contains=function(e,t){return 0<=goog.array.indexOf(e,t)},goog.array.isEmpty=function(e){return 0==e.length},goog.array.clear=function(e){if(!goog.isArray(e))for(var t=e.length-1;0<=t;t--)delete e[t];e.length=0},goog.array.insert=function(e,t){goog.array.contains(e,t)||e.push(t)},goog.array.insertAt=function(e,t,n){goog.array.splice(e,n,0,t)},goog.array.insertArrayAt=function(e,t,n){goog.partial(goog.array.splice,e,n,0).apply(null,t)},goog.array.insertBefore=function(e,t,n){var o;2==arguments.length||(o=goog.array.indexOf(e,n))<0?e.push(t):goog.array.insertAt(e,t,o)},goog.array.remove=function(e,t){var n,o=goog.array.indexOf(e,t);return(n=0<=o)&&goog.array.removeAt(e,o),n},goog.array.removeLast=function(e,t){var n=goog.array.lastIndexOf(e,t);return 0<=n&&(goog.array.removeAt(e,n),!0)},goog.array.removeAt=function(e,t){return goog.asserts.assert(null!=e.length),1==Array.prototype.splice.call(e,t,1).length},goog.array.removeIf=function(e,t,n){return 0<=(t=goog.array.findIndex(e,t,n))&&(goog.array.removeAt(e,t),!0)},goog.array.removeAllIf=function(n,o,r){var i=0;return goog.array.forEachRight(n,function(e,t){o.call(r,e,t,n)&&goog.array.removeAt(n,t)&&i++}),i},goog.array.concat=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(e){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(e){var t=e.length;if(0<t){for(var n=Array(t),o=0;o<t;o++)n[o]=e[o];return n}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(e,t){for(var n=1;n<arguments.length;n++){var o=arguments[n];if(goog.isArrayLike(o)){var r=e.length||0,i=o.length||0;e.length=r+i;for(var a=0;a<i;a++)e[r+a]=o[a]}else e.push(o)}},goog.array.splice=function(e,t,n,o){return goog.asserts.assert(null!=e.length),Array.prototype.splice.apply(e,goog.array.slice(arguments,1))},goog.array.slice=function(e,t,n){return goog.asserts.assert(null!=e.length),arguments.length<=2?Array.prototype.slice.call(e,t):Array.prototype.slice.call(e,t,n)},goog.array.removeDuplicates=function(e,t,n){t=t||e;var o=function(e){return goog.isObject(e)?"o"+goog.getUid(e):(typeof e).charAt(0)+e};n=n||o,o={};for(var r=0,i=0;i<e.length;){var a=e[i++],s=n(a);Object.prototype.hasOwnProperty.call(o,s)||(o[s]=!0,t[r++]=a)}t.length=r},goog.array.binarySearch=function(e,t,n){return goog.array.binarySearch_(e,n||goog.array.defaultCompare,!1,t)},goog.array.binarySelect=function(e,t,n){return goog.array.binarySearch_(e,t,!0,void 0,n)},goog.array.binarySearch_=function(e,t,n,o,r){for(var i,a=0,s=e.length;a<s;){var l=a+s>>1,c=n?t.call(r,e[l],l,e):t(o,e[l]);0<c?a=l+1:(s=l,i=!c)}return i?a:~a},goog.array.sort=function(e,t){e.sort(t||goog.array.defaultCompare)},goog.array.stableSort=function(e,t){for(var n=Array(e.length),o=0;o<e.length;o++)n[o]={index:o,value:e[o]};var r=t||goog.array.defaultCompare;for(goog.array.sort(n,function(e,t){return r(e.value,t.value)||e.index-t.index}),o=0;o<e.length;o++)e[o]=n[o].value},goog.array.sortByKey=function(e,n,t){var o=t||goog.array.defaultCompare;goog.array.sort(e,function(e,t){return o(n(e),n(t))})},goog.array.sortObjectsByKey=function(e,t,n){goog.array.sortByKey(e,function(e){return e[t]},n)},goog.array.isSorted=function(e,t,n){t=t||goog.array.defaultCompare;for(var o=1;o<e.length;o++){var r=t(e[o-1],e[o]);if(0<r||0==r&&n)return!1}return!0},goog.array.equals=function(e,t,n){if(!goog.isArrayLike(e)||!goog.isArrayLike(t)||e.length!=t.length)return!1;var o=e.length;n=n||goog.array.defaultCompareEquality;for(var r=0;r<o;r++)if(!n(e[r],t[r]))return!1;return!0},goog.array.compare3=function(e,t,n){n=n||goog.array.defaultCompare;for(var o=Math.min(e.length,t.length),r=0;r<o;r++){var i=n(e[r],t[r]);if(0!=i)return i}return goog.array.defaultCompare(e.length,t.length)},goog.array.defaultCompare=function(e,t){return t<e?1:e<t?-1:0},goog.array.inverseDefaultCompare=function(e,t){return-goog.array.defaultCompare(e,t)},goog.array.defaultCompareEquality=function(e,t){return e===t},goog.array.binaryInsert=function(e,t,n){return(n=goog.array.binarySearch(e,t,n))<0&&(goog.array.insertAt(e,t,-(n+1)),!0)},goog.array.binaryRemove=function(e,t,n){return 0<=(t=goog.array.binarySearch(e,t,n))&&goog.array.removeAt(e,t)},goog.array.bucket=function(e,t,n){for(var o={},r=0;r<e.length;r++){var i=e[r],a=t.call(n,i,r,e);goog.isDef(a)&&(o[a]||(o[a]=[])).push(i)}return o},goog.array.toObject=function(n,o,r){var i={};return goog.array.forEach(n,function(e,t){i[o.call(r,e,t,n)]=e}),i},goog.array.range=function(e,t,n){var o=[],r=0,i=e;if(void 0!==t&&(r=e,i=t),(n=n||1)*(i-r)<0)return[];if(0<n)for(e=r;e<i;e+=n)o.push(e);else for(e=r;i<e;e+=n)o.push(e);return o},goog.array.repeat=function(e,t){for(var n=[],o=0;o<t;o++)n[o]=e;return n},goog.array.flatten=function(e){for(var t=[],n=0;n<arguments.length;n++){var o=arguments[n];if(goog.isArray(o))for(var r=0;r<o.length;r+=8192){var i=goog.array.slice(o,r,r+8192);i=goog.array.flatten.apply(null,i);for(var a=0;a<i.length;a++)t.push(i[a])}else t.push(o)}return t},goog.array.rotate=function(e,t){return goog.asserts.assert(null!=e.length),e.length&&(0<(t%=e.length)?Array.prototype.unshift.apply(e,e.splice(-t,t)):t<0&&Array.prototype.push.apply(e,e.splice(0,-t))),e},goog.array.moveItem=function(e,t,n){goog.asserts.assert(0<=t&&t<e.length),goog.asserts.assert(0<=n&&n<e.length),t=Array.prototype.splice.call(e,t,1),Array.prototype.splice.call(e,n,0,t[0])},goog.array.zip=function(e){if(!arguments.length)return[];for(var t=[],n=e.length,o=1;o<arguments.length;o++)arguments[o].length<n&&(n=arguments[o].length);for(o=0;o<n;o++){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i][o]);t.push(r)}return t},goog.array.shuffle=function(e,t){for(var n=t||Math.random,o=e.length-1;0<o;o--){var r=Math.floor(n()*(o+1)),i=e[o];e[o]=e[r],e[r]=i}},goog.array.copyByIndex=function(t,e){var n=[];return goog.array.forEach(e,function(e){n.push(t[e])}),n},goog.array.concatMap=function(e,t,n){return goog.array.concat.apply([],goog.array.map(e,t,n))},goog.math={},goog.math.randomInt=function(e){return Math.floor(Math.random()*e)},goog.math.uniformRandom=function(e,t){return e+Math.random()*(t-e)},goog.math.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},goog.math.modulo=function(e,t){var n=e%t;return n*t<0?n+t:n},goog.math.lerp=function(e,t,n){return e+n*(t-e)},goog.math.nearlyEquals=function(e,t,n){return Math.abs(e-t)<=(n||1e-6)},goog.math.standardAngle=function(e){return goog.math.modulo(e,360)},goog.math.standardAngleInRadians=function(e){return goog.math.modulo(e,2*Math.PI)},goog.math.toRadians=function(e){return e*Math.PI/180},goog.math.toDegrees=function(e){return 180*e/Math.PI},goog.math.angleDx=function(e,t){return t*Math.cos(goog.math.toRadians(e))},goog.math.angleDy=function(e,t){return t*Math.sin(goog.math.toRadians(e))},goog.math.angle=function(e,t,n,o){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(o-t,n-e)))},goog.math.angleDifference=function(e,t){var n=goog.math.standardAngle(t)-goog.math.standardAngle(e);return 180<n?n-=360:n<=-180&&(n=360+n),n},goog.math.sign=function(e){return 0<e?1:e<0?-1:e},goog.math.longestCommonSubsequence=function(n,e,t,o){t=t||function(e,t){return e==t},o=o||function(e,t){return n[e]};for(var r=n.length,i=e.length,a=[],s=0;s<r+1;s++)a[s]=[],a[s][0]=0;for(var l=0;l<i+1;l++)a[0][l]=0;for(s=1;s<=r;s++)for(l=1;l<=i;l++)t(n[s-1],e[l-1])?a[s][l]=a[s-1][l-1]+1:a[s][l]=Math.max(a[s-1][l],a[s][l-1]);var c=[];for(s=r,l=i;0<s&&0<l;)t(n[s-1],e[l-1])?(c.unshift(o(s-1,l-1)),s--,l--):a[s-1][l]>a[s][l-1]?s--:l--;return c},goog.math.sum=function(e){return goog.array.reduce(arguments,function(e,t){return e+t},0)},goog.math.average=function(e){return goog.math.sum.apply(null,arguments)/arguments.length},goog.math.sampleVariance=function(e){var t=arguments.length;if(t<2)return 0;var n=goog.math.average.apply(null,arguments);return goog.math.sum.apply(null,goog.array.map(arguments,function(e){return Math.pow(e-n,2)}))/(t-1)},goog.math.standardDeviation=function(e){return Math.sqrt(goog.math.sampleVariance.apply(null,arguments))},goog.math.isInt=function(e){return isFinite(e)&&0==e%1},goog.math.isFiniteNumber=function(e){return isFinite(e)},goog.math.isNegativeZero=function(e){return 0==e&&1/e<0},goog.math.log10Floor=function(e){if(0<e){var t=Math.round(Math.log(e)*Math.LOG10E);return t-(parseFloat("1e"+t)>e?1:0)}return 0==e?-1/0:NaN},goog.math.safeFloor=function(e,t){return goog.asserts.assert(!goog.isDef(t)||0<t),Math.floor(e+(t||2e-15))},goog.math.safeCeil=function(e,t){return goog.asserts.assert(!goog.isDef(t)||0<t),Math.ceil(e-(t||2e-15))},goog.math.Coordinate=function(e,t){this.x=goog.isDef(e)?e:0,this.y=goog.isDef(t)?t:0},goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)},goog.DEBUG&&(goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"}),goog.math.Coordinate.prototype.equals=function(e){return e instanceof goog.math.Coordinate&&goog.math.Coordinate.equals(this,e)},goog.math.Coordinate.equals=function(e,t){return e==t||!(!e||!t)&&(e.x==t.x&&e.y==t.y)},goog.math.Coordinate.distance=function(e,t){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)},goog.math.Coordinate.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},goog.math.Coordinate.azimuth=function(e){return goog.math.angle(0,0,e.x,e.y)},goog.math.Coordinate.squaredDistance=function(e,t){var n=e.x-t.x,o=e.y-t.y;return n*n+o*o},goog.math.Coordinate.difference=function(e,t){return new goog.math.Coordinate(e.x-t.x,e.y-t.y)},goog.math.Coordinate.sum=function(e,t){return new goog.math.Coordinate(e.x+t.x,e.y+t.y)},goog.math.Coordinate.prototype.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},goog.math.Coordinate.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},goog.math.Coordinate.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},goog.math.Coordinate.prototype.translate=function(e,t){return e instanceof goog.math.Coordinate?(this.x+=e.x,this.y+=e.y):(this.x+=Number(e),goog.isNumber(t)&&(this.y+=t)),this},goog.math.Coordinate.prototype.scale=function(e,t){var n=goog.isNumber(t)?t:e;return this.x*=e,this.y*=n,this},goog.math.Coordinate.prototype.rotateRadians=function(e,t){var n=t||new goog.math.Coordinate(0,0),o=this.x,r=this.y,i=Math.cos(e),a=Math.sin(e);this.x=(o-n.x)*i-(r-n.y)*a+n.x,this.y=(o-n.x)*a+(r-n.y)*i+n.y},goog.math.Coordinate.prototype.rotateDegrees=function(e,t){this.rotateRadians(goog.math.toRadians(e),t)},goog.string={},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:""},goog.string.startsWith=function(e,t){return 0==e.lastIndexOf(t,0)},goog.string.endsWith=function(e,t){var n=e.length-t.length;return 0<=n&&e.indexOf(t,n)==n},goog.string.caseInsensitiveStartsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(0,t.length))},goog.string.caseInsensitiveEndsWith=function(e,t){return 0==goog.string.caseInsensitiveCompare(t,e.substr(e.length-t.length,t.length))},goog.string.caseInsensitiveEquals=function(e,t){return e.toLowerCase()==t.toLowerCase()},goog.string.subs=function(e,t){for(var n=e.split("%s"),o="",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)o+=n.shift()+r.shift();return o+n.join("%s")},goog.string.collapseWhitespace=function(e){return e.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=function(e){return/^[\s\xa0]*$/.test(e)},goog.string.isEmptyString=function(e){return 0==e.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(e){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(e))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},goog.string.isAlpha=function(e){return!/[^a-zA-Z]/.test(e)},goog.string.isNumeric=function(e){return!/[^0-9]/.test(e)},goog.string.isAlphaNumeric=function(e){return!/[^a-zA-Z0-9]/.test(e)},goog.string.isSpace=function(e){return" "==e},goog.string.isUnicodeChar=function(e){return 1==e.length&&" "<=e&&e<="~"||""<=e&&e<=""},goog.string.stripNewlines=function(e){return e.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(e){return e.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(e){return e.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(e){return e.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},goog.string.trimLeft=function(e){return e.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(e){return e.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(e,t){var n=String(e).toLowerCase(),o=String(t).toLowerCase();return n<o?-1:n==o?0:1},goog.string.numberAwareCompare_=function(e,t,n){if(e==t)return 0;if(!e)return-1;if(!t)return 1;for(var o=e.toLowerCase().match(n),r=t.toLowerCase().match(n),i=Math.min(o.length,r.length),a=0;a<i;a++){n=o[a];var s=r[a];if(n!=s)return e=parseInt(n,10),!isNaN(e)&&(t=parseInt(s,10),!isNaN(t)&&e-t)?e-t:n<s?-1:1}return o.length!=r.length?o.length-r.length:e<t?-1:1},goog.string.intAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\D+/g)},goog.string.floatAwareCompare=function(e,t){return goog.string.numberAwareCompare_(e,t,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(e){return encodeURIComponent(String(e))},goog.string.urlDecode=function(e){return decodeURIComponent(e.replace(/\+/g," "))},goog.string.newLineToBr=function(e,t){return e.replace(/(\r\n|\r|\n)/g,t?"<br />":"<br>")},goog.string.htmlEscape=function(e,t){if(t)e=e.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;"));else{if(!goog.string.ALL_RE_.test(e))return e;-1!=e.indexOf("&")&&(e=e.replace(goog.string.AMP_RE_,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(goog.string.LT_RE_,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(goog.string.GT_RE_,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(goog.string.QUOT_RE_,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&-1!=e.indexOf("e")&&(e=e.replace(goog.string.E_RE_,"&#101;"))}return e},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(e){return goog.string.contains(e,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(e):goog.string.unescapePureXmlEntities_(e):e},goog.string.unescapeEntitiesWithDocument=function(e,t){return goog.string.contains(e,"&")?goog.string.unescapeEntitiesUsingDom_(e,t):e},goog.string.unescapeEntitiesUsingDom_=function(e,t){var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},i=t?t.createElement("div"):goog.global.document.createElement("div");return e.replace(goog.string.HTML_ENTITY_PATTERN_,function(e,t){var n=r[e];if(n)return n;if("#"==t.charAt(0)){var o=Number("0"+t.substr(1));isNaN(o)||(n=String.fromCharCode(o))}return n||(i.innerHTML=e+" ",n=i.firstChild.nodeValue.slice(0,-1)),r[e]=n})},goog.string.unescapePureXmlEntities_=function(e){return e.replace(/&([^;]+);/g,function(e,t){switch(t){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==t.charAt(0)){var n=Number("0"+t.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return e}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(e,t){return goog.string.newLineToBr(e.replace(/  /g," &#160;"),t)},goog.string.preserveSpaces=function(e){return e.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(e,t){for(var n=t.length,o=0;o<n;o++){var r=1==n?t:t.charAt(o);if(e.charAt(0)==r&&e.charAt(e.length-1)==r)return e.substring(1,e.length-1)}return e},goog.string.truncate=function(e,t,n){return n&&(e=goog.string.unescapeEntities(e)),e.length>t&&(e=e.substring(0,t-3)+"..."),n&&(e=goog.string.htmlEscape(e)),e},goog.string.truncateMiddle=function(e,t,n,o){if(n&&(e=goog.string.unescapeEntities(e)),o&&e.length>t){t<o&&(o=t);var r=e.length-o;e=e.substring(0,t-o)+"..."+e.substring(r)}else e.length>t&&(o=Math.floor(t/2),r=e.length-o,e=e.substring(0,o+t%2)+"..."+e.substring(r));return n&&(e=goog.string.htmlEscape(e)),e},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(e){e=String(e);for(var t=['"'],n=0;n<e.length;n++){var o=e.charAt(n),r=o.charCodeAt(0);t[n+1]=goog.string.specialEscapeChars_[o]||(31<r&&r<127?o:goog.string.escapeChar(o))}return t.push('"'),t.join("")},goog.string.escapeString=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=goog.string.escapeChar(e.charAt(n));return t.join("")},goog.string.escapeChar=function(e){if(e in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[e];if(e in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[e]=goog.string.specialEscapeChars_[e];var t=e.charCodeAt(0);if(31<t&&t<127)var n=e;else t<256?(n="\\x",(t<16||256<t)&&(n+="0")):(n="\\u",t<4096&&(n+="0")),n+=t.toString(16).toUpperCase();return goog.string.jsEscapeCache_[e]=n},goog.string.contains=function(e,t){return-1!=e.indexOf(t)},goog.string.caseInsensitiveContains=function(e,t){return goog.string.contains(e.toLowerCase(),t.toLowerCase())},goog.string.countOf=function(e,t){return e&&t?e.split(t).length-1:0},goog.string.removeAt=function(e,t,n){var o=e;return 0<=t&&t<e.length&&0<n&&(o=e.substr(0,t)+e.substr(t+n,e.length-t-n)),o},goog.string.remove=function(e,t){return e.replace(t,"")},goog.string.removeAll=function(e,t){var n=new RegExp(goog.string.regExpEscape(t),"g");return e.replace(n,"")},goog.string.replaceAll=function(e,t,n){return t=new RegExp(goog.string.regExpEscape(t),"g"),e.replace(t,n.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(e,t){return e.repeat(t)}:function(e,t){return Array(t+1).join(e)},goog.string.padNumber=function(e,t,n){return-1==(n=(e=goog.isDef(n)?e.toFixed(n):String(e)).indexOf("."))&&(n=e.length),goog.string.repeat("0",Math.max(0,t-n))+e},goog.string.makeSafe=function(e){return null==e?"":String(e)},goog.string.buildString=function(e){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=function(e,t){for(var n=0,o=goog.string.trim(String(e)).split("."),r=goog.string.trim(String(t)).split("."),i=Math.max(o.length,r.length),a=0;0==n&&a<i;a++){var s=o[a]||"",l=r[a]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==s[0].length&&0==l[0].length)break;n=0==s[1].length?0:parseInt(s[1],10);var c=0==l[1].length?0:parseInt(l[1],10);n=goog.string.compareElements_(n,c)||goog.string.compareElements_(0==s[2].length,0==l[2].length)||goog.string.compareElements_(s[2],l[2]),s=s[3],l=l[3]}while(0==n)}return n},goog.string.compareElements_=function(e,t){return e<t?-1:t<e?1:0},goog.string.hashCode=function(e){for(var t=0,n=0;n<e.length;++n)t=31*t+e.charCodeAt(n)>>>0;return t},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(e){var t=Number(e);return 0==t&&goog.string.isEmptyOrWhitespace(e)?NaN:t},goog.string.isLowerCamelCase=function(e){return/^[a-z]+([A-Z][a-z]*)*$/.test(e)},goog.string.isUpperCamelCase=function(e){return/^([A-Z][a-z]*)+$/.test(e)},goog.string.toCamelCase=function(e){return String(e).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})},goog.string.toSelectorCase=function(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(e,t){var n=goog.isString(t)?goog.string.regExpEscape(t):"\\s";return e.replace(new RegExp("(^"+(n?"|["+n+"]+":"")+")([a-z])","g"),function(e,t,n){return t+n.toUpperCase()})},goog.string.capitalize=function(e){return String(e.charAt(0)).toUpperCase()+String(e.substr(1)).toLowerCase()},goog.string.parseInt=function(e){return isFinite(e)&&(e=String(e)),goog.isString(e)?/^\s*-?0x/i.test(e)?parseInt(e,16):parseInt(e,10):NaN},goog.string.splitLimit=function(e,t,n){e=e.split(t);for(var o=[];0<n&&e.length;)o.push(e.shift()),n--;return e.length&&o.push(e.join(t)),o},goog.string.lastComponent=function(e,t){if(!t)return e;"string"==typeof t&&(t=[t]);for(var n=-1,o=0;o<t.length;o++)if(""!=t[o]){var r=e.lastIndexOf(t[o]);n<r&&(n=r)}return-1==n?e:e.slice(n+1)},goog.string.editDistance=function(e,t){var n=[],o=[];if(e==t)return 0;if(!e.length||!t.length)return Math.max(e.length,t.length);for(var r=0;r<t.length+1;r++)n[r]=r;for(r=0;r<e.length;r++){o[0]=r+1;for(var i=0;i<t.length;i++)o[i+1]=Math.min(o[i]+1,n[i+1]+1,n[i]+Number(e[r]!=t[i]));for(i=0;i<n.length;i++)n[i]=o[i]}return o[t.length]},goog.Thenable=function(){},goog.Thenable.prototype.then=function(e,t,n){},goog.Thenable.IMPLEMENTED_BY_PROP="$goog_Thenable",goog.Thenable.addImplementation=function(e){e.prototype.then=e.prototype.then,COMPILED?e.prototype[goog.Thenable.IMPLEMENTED_BY_PROP]=!0:e.prototype.$goog_Thenable=!0},goog.Thenable.isImplementedBy=function(e){if(!e)return!1;try{return COMPILED?!!e[goog.Thenable.IMPLEMENTED_BY_PROP]:!!e.$goog_Thenable}catch(e){return!1}},goog.async={},goog.async.FreeList=function(e,t,n){this.limit_=n,this.create_=e,this.reset_=t,this.occupants_=0,this.head_=null},goog.async.FreeList.prototype.get=function(){if(0<this.occupants_){this.occupants_--;var e=this.head_;this.head_=e.next,e.next=null}else e=this.create_();return e},goog.async.FreeList.prototype.put=function(e){this.reset_(e),this.occupants_<this.limit_&&(this.occupants_++,e.next=this.head_,this.head_=e)},goog.async.FreeList.prototype.occupants=function(){return this.occupants_},goog.async.WorkQueue=function(){this.workTail_=this.workHead_=null},goog.async.WorkQueue.DEFAULT_MAX_UNUSED=100,goog.async.WorkQueue.freelist_=new goog.async.FreeList(function(){return new goog.async.WorkItem},function(e){e.reset()},goog.async.WorkQueue.DEFAULT_MAX_UNUSED),goog.async.WorkQueue.prototype.add=function(e,t){var n=this.getUnusedItem_();n.set(e,t),this.workTail_?this.workTail_.next=n:(goog.asserts.assert(!this.workHead_),this.workHead_=n),this.workTail_=n},goog.async.WorkQueue.prototype.remove=function(){var e=null;return this.workHead_&&(e=this.workHead_,this.workHead_=this.workHead_.next,this.workHead_||(this.workTail_=null),e.next=null),e},goog.async.WorkQueue.prototype.returnUnused=function(e){goog.async.WorkQueue.freelist_.put(e)},goog.async.WorkQueue.prototype.getUnusedItem_=function(){return goog.async.WorkQueue.freelist_.get()},goog.async.WorkItem=function(){this.next=this.scope=this.fn=null},goog.async.WorkItem.prototype.set=function(e,t){this.fn=e,this.scope=t,this.next=null},goog.async.WorkItem.prototype.reset=function(){this.next=this.scope=this.fn=null},goog.debug.entryPointRegistry={},goog.debug.EntryPointMonitor=function(){},goog.debug.entryPointRegistry.refList_=[],goog.debug.entryPointRegistry.monitors_=[],goog.debug.entryPointRegistry.monitorsMayExist_=!1,goog.debug.entryPointRegistry.register=function(e){if(goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=e,goog.debug.entryPointRegistry.monitorsMayExist_)for(var t=goog.debug.entryPointRegistry.monitors_,n=0;n<t.length;n++)e(goog.bind(t[n].wrap,t[n]))},goog.debug.entryPointRegistry.monitorAll=function(e){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var t=goog.bind(e.wrap,e),n=0;n<goog.debug.entryPointRegistry.refList_.length;n++)goog.debug.entryPointRegistry.refList_[n](t);goog.debug.entryPointRegistry.monitors_.push(e)},goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(e){var t=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(e==t[t.length-1],"Only the most recent monitor can be unwrapped."),e=goog.bind(e.unwrap,e);for(var n=0;n<goog.debug.entryPointRegistry.refList_.length;n++)goog.debug.entryPointRegistry.refList_[n](e);t.length--},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(e){this.tagName_=e},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.functions={},goog.functions.constant=function(e){return function(){return e}},goog.functions.FALSE=goog.functions.constant(!1),goog.functions.TRUE=goog.functions.constant(!0),goog.functions.NULL=goog.functions.constant(null),goog.functions.identity=function(e,t){return e},goog.functions.error=function(e){return function(){throw Error(e)}},goog.functions.fail=function(e){return function(){throw e}},goog.functions.lock=function(e,t){return t=t||0,function(){return e.apply(this,Array.prototype.slice.call(arguments,0,t))}},goog.functions.nth=function(e){return function(){return arguments[e]}},goog.functions.partialRight=function(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=Array.prototype.slice.call(arguments);return e.push.apply(e,n),t.apply(this,e)}},goog.functions.withReturnValue=function(e,t){return goog.functions.sequence(e,goog.functions.constant(t))},goog.functions.equalTo=function(t,n){return function(e){return n?t==e:t===e}},goog.functions.compose=function(e,t){var n=arguments,o=n.length;return function(){var e;o&&(e=n[o-1].apply(this,arguments));for(var t=o-2;0<=t;t--)e=n[t].call(this,e);return e}},goog.functions.sequence=function(e){var n=arguments,o=n.length;return function(){for(var e,t=0;t<o;t++)e=n[t].apply(this,arguments);return e}},goog.functions.and=function(e){var t=arguments,n=t.length;return function(){for(var e=0;e<n;e++)if(!t[e].apply(this,arguments))return!1;return!0}},goog.functions.or=function(e){var t=arguments,n=t.length;return function(){for(var e=0;e<n;e++)if(t[e].apply(this,arguments))return!0;return!1}},goog.functions.not=function(e){return function(){return!e.apply(this,arguments)}},goog.functions.create=function(e,t){var n=function(){};return n.prototype=e.prototype,n=new n,e.apply(n,Array.prototype.slice.call(arguments,1)),n},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(e){var t,n=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(n||(t=e(),n=!0),t):e()}},goog.functions.once=function(e){var t=e;return function(){if(t){var e=t;t=null,e()}}},goog.functions.debounce=function(n,o,r){var i=0;return function(e){goog.global.clearTimeout(i);var t=arguments;i=goog.global.setTimeout(function(){n.apply(r,t)},o)}},goog.functions.throttle=function(e,t,n){var o=0,r=!1,i=[],a=function(){o=0,r&&(r=!1,s())},s=function(){o=goog.global.setTimeout(a,t),e.apply(n,i)};return function(e){i=arguments,o?r=!0:s()}},goog.functions.rateLimit=function(t,n,o){var r=0,i=function(){r=0};return function(e){r||(r=goog.global.setTimeout(i,n),t.apply(o,arguments))}},goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var e=goog.labs.userAgent.util.getNavigator_();return e&&(e=e.userAgent)?e:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(e){goog.labs.userAgent.util.userAgent_=e||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(t,e)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(e){var t=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(t,e)},goog.labs.userAgent.util.extractVersionTuples=function(e){for(var t,n=RegExp("(\\w[\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g"),o=[];t=n.exec(e);)o.push([t[1],t[2],t[3]||void 0]);return o},goog.object={},goog.object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},goog.object.forEach=function(e,t,n){for(var o in e)t.call(n,e[o],o,e)},goog.object.filter=function(e,t,n){var o,r={};for(o in e)t.call(n,e[o],o,e)&&(r[o]=e[o]);return r},goog.object.map=function(e,t,n){var o,r={};for(o in e)r[o]=t.call(n,e[o],o,e);return r},goog.object.some=function(e,t,n){for(var o in e)if(t.call(n,e[o],o,e))return!0;return!1},goog.object.every=function(e,t,n){for(var o in e)if(!t.call(n,e[o],o,e))return!1;return!0},goog.object.getCount=function(e){var t,n=0;for(t in e)n++;return n},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,n=[],o=0;for(t in e)n[o++]=e[t];return n},goog.object.getKeys=function(e){var t,n=[],o=0;for(t in e)n[o++]=t;return n},goog.object.getValueByKeys=function(e,t){var n=goog.isArrayLike(t),o=n?t:arguments;for(n=n?0:1;n<o.length;n++){if(null==e)return;e=e[o[n]]}return e},goog.object.containsKey=function(e,t){return null!==e&&t in e},goog.object.containsValue=function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},goog.object.findKey=function(e,t,n){for(var o in e)if(t.call(n,e[o],o,e))return o},goog.object.findValue=function(e,t,n){return(t=goog.object.findKey(e,t,n))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var n;return(n=t in e)&&delete e[t],n},goog.object.add=function(e,t,n){if(null!==e&&t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,n)},goog.object.get=function(e,t,n){return null!==e&&t in e?e[t]:n},goog.object.set=function(e,t,n){e[t]=n},goog.object.setIfUndefined=function(e,t,n){return t in e?e[t]:e[t]=n},goog.object.setWithReturnValueIfNotSet=function(e,t,n){return t in e?e[t]:(n=n(),e[t]=n)},goog.object.equals=function(e,t){for(var n in e)if(!(n in t)||e[n]!==t[n])return!1;for(n in t)if(!(n in e))return!1;return!0},goog.object.clone=function(e){var t,n={};for(t in e)n[t]=e[t];return n},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(goog.isFunction(e.clone))return e.clone();for(var n in t="array"==t?[]:{},e)t[n]=goog.object.unsafeClone(e[n]);return t}return e},goog.object.transpose=function(e){var t,n={};for(t in e)n[e[t]]=t;return n},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var n,o,r=1;r<arguments.length;r++){for(n in o=arguments[r])e[n]=o[n];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)n=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(e))return goog.object.create.apply(null,e);if(t%2)throw Error("Uneven number of arguments");for(var n={},o=0;o<t;o+=2)n[arguments[o]]=arguments[o+1];return n},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(e))return goog.object.createSet.apply(null,e);for(var n={},o=0;o<t;o++)n[arguments[o]]=!0;return n},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)},goog.object.getAllPropertyNames=function(e,t,n){if(!e)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(e);for(var o={};e&&(e!==Object.prototype||t)&&(e!==Function.prototype||n);){for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++)o[r[i]]=!0;e=Object.getPrototypeOf(e)}return goog.object.getKeys(o)},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdge_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdge_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdge_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdge_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function e(e){return e=goog.array.find(e,o),n[e]||""}var t=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(t);t=goog.labs.userAgent.util.extractVersionTuples(t);var n={};goog.array.forEach(t,function(e){n[e[0]]=e[1]});var o=goog.partial(goog.object.containsKey,n);return goog.labs.userAgent.browser.isOpera()?e(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?e(["Edge"]):goog.labs.userAgent.browser.isChrome()?e(["Chrome","CriOS"]):(t=t[2])&&t[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),e)},goog.labs.userAgent.browser.getIEVersion_=function(e){var t=/rv: *([\d\.]*)/.exec(e);if(t&&t[1])return t[1];t="";var n=/MSIE +([\d\.]+)/.exec(e);if(n&&n[1])if(e=/Trident\/(\d.\d)/.exec(e),"7.0"==n[1])if(e&&e[1])switch(e[1]){case"4.0":t="8.0";break;case"5.0":t="9.0";break;case"6.0":t="10.0";break;case"7.0":t="11.0"}else t="7.0";else t=n[1];return t},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent();if(e){e=goog.labs.userAgent.util.extractVersionTuples(e);var t,n=goog.labs.userAgent.engine.getEngineTuple_(e);if(n)return"Gecko"==n[0]?goog.labs.userAgent.engine.getVersionForKey_(e,"Firefox"):n[1];if((e=e[0])&&(t=e[2])&&(t=/Trident\/([^\s;]+)/.exec(t)))return t[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(e){if(!goog.labs.userAgent.engine.isEdge())return e[1];for(var t=0;t<e.length;t++){var n=e[t];if("Edge"==n[0])return n}},goog.labs.userAgent.engine.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),e)},goog.labs.userAgent.engine.getVersionForKey_=function(e,t){var n=goog.array.find(e,function(e){return t==e[0]});return n&&n[1]||""},goog.async.throwException=function(e){goog.global.setTimeout(function(){throw e},0)},goog.async.nextTick=function(e,t,n){var o=e;t&&(o=goog.bind(e,t)),o=goog.async.nextTick.wrapCallback_(o),goog.isFunction(goog.global.setImmediate)&&(n||goog.async.nextTick.useSetImmediate_())?goog.global.setImmediate(o):(goog.async.nextTick.setImmediate_||(goog.async.nextTick.setImmediate_=goog.async.nextTick.getSetImmediateEmulator_()),goog.async.nextTick.setImmediate_(o))},goog.async.nextTick.useSetImmediate_=function(){return!(goog.global.Window&&goog.global.Window.prototype&&!goog.labs.userAgent.browser.isEdge()&&goog.global.Window.prototype.setImmediate==goog.global.setImmediate)},goog.async.nextTick.getSetImmediateEmulator_=function(){var e=goog.global.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!goog.labs.userAgent.engine.isPresto()&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(""),e.close();var n="callImmediate"+Math.random(),o="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=goog.bind(function(e){"*"!=o&&e.origin!=o||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,o)}}}),void 0!==e&&!goog.labs.userAgent.browser.isIE()){var t=new e,n={},o=n;return t.port1.onmessage=function(){if(goog.isDef(n.next)){var e=(n=n.next).cb;n.cb=null,e()}},function(e){o.next={cb:e},o=o.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){goog.global.setTimeout(e,0)}},goog.async.nextTick.wrapCallback_=goog.functions.identity,goog.debug.entryPointRegistry.register(function(e){goog.async.nextTick.wrapCallback_=e}),goog.async.run=function(e,t){goog.async.run.schedule_||goog.async.run.initializeRunner_(),goog.async.run.workQueueScheduled_||(goog.async.run.schedule_(),goog.async.run.workQueueScheduled_=!0),goog.async.run.workQueue_.add(e,t)},goog.async.run.initializeRunner_=function(){if(goog.global.Promise&&goog.global.Promise.resolve){var e=goog.global.Promise.resolve(void 0);goog.async.run.schedule_=function(){e.then(goog.async.run.processWorkQueue)}}else goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue)}},goog.async.run.forceNextTick=function(e){goog.async.run.schedule_=function(){goog.async.nextTick(goog.async.run.processWorkQueue),e&&e(goog.async.run.processWorkQueue)}},goog.async.run.workQueueScheduled_=!1,goog.async.run.workQueue_=new goog.async.WorkQueue,goog.DEBUG&&(goog.async.run.resetQueue=function(){goog.async.run.workQueueScheduled_=!1,goog.async.run.workQueue_=new goog.async.WorkQueue}),goog.async.run.processWorkQueue=function(){for(var e;e=goog.async.run.workQueue_.remove();){try{e.fn.call(e.scope)}catch(e){goog.async.throwException(e)}goog.async.run.workQueue_.returnUnused(e)}goog.async.run.workQueueScheduled_=!1},goog.promise={},goog.promise.Resolver=function(){},goog.Promise=function(e,t){if(this.state_=goog.Promise.State_.PENDING,this.result_=void 0,this.callbackEntriesTail_=this.callbackEntries_=this.parent_=null,this.executing_=!1,0<goog.Promise.UNHANDLED_REJECTION_DELAY?this.unhandledRejectionId_=0:0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1),goog.Promise.LONG_STACK_TRACES&&(this.stack_=[],this.addStackTrace_(Error("created")),this.currentStep_=0),e!=goog.nullFunction)try{var n=this;e.call(t,function(e){n.resolve_(goog.Promise.State_.FULFILLED,e)},function(e){if(goog.DEBUG&&!(e instanceof goog.Promise.CancellationError))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}n.resolve_(goog.Promise.State_.REJECTED,e)})}catch(e){this.resolve_(goog.Promise.State_.REJECTED,e)}},goog.Promise.LONG_STACK_TRACES=!1,goog.Promise.UNHANDLED_REJECTION_DELAY=0,goog.Promise.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3},goog.Promise.CallbackEntry_=function(){this.next=this.context=this.onRejected=this.onFulfilled=this.child=null,this.always=!1},goog.Promise.CallbackEntry_.prototype.reset=function(){this.context=this.onRejected=this.onFulfilled=this.child=null,this.always=!1},goog.Promise.DEFAULT_MAX_UNUSED=100,goog.Promise.freelist_=new goog.async.FreeList(function(){return new goog.Promise.CallbackEntry_},function(e){e.reset()},goog.Promise.DEFAULT_MAX_UNUSED),goog.Promise.getCallbackEntry_=function(e,t,n){var o=goog.Promise.freelist_.get();return o.onFulfilled=e,o.onRejected=t,o.context=n,o},goog.Promise.returnEntry_=function(e){goog.Promise.freelist_.put(e)},goog.Promise.resolve=function(e){if(e instanceof goog.Promise)return e;var t=new goog.Promise(goog.nullFunction);return t.resolve_(goog.Promise.State_.FULFILLED,e),t},goog.Promise.reject=function(n){return new goog.Promise(function(e,t){t(n)})},goog.Promise.resolveThen_=function(e,t,n){goog.Promise.maybeThen_(e,t,n,null)||goog.async.run(goog.partial(t,e))},goog.Promise.race=function(r){return new goog.Promise(function(e,t){r.length||e(void 0);for(var n,o=0;o<r.length;o++)n=r[o],goog.Promise.resolveThen_(n,e,t)})},goog.Promise.all=function(l){return new goog.Promise(function(n,t){var o=l.length,r=[];if(o)for(var e,i=function(e,t){o--,r[e]=t,0==o&&n(r)},a=function(e){t(e)},s=0;s<l.length;s++)e=l[s],goog.Promise.resolveThen_(e,goog.partial(i,s),a);else n(r)})},goog.Promise.allSettled=function(s){return new goog.Promise(function(o,e){var r=s.length,i=[];if(r)for(var t,n=function(e,t,n){r--,i[e]=t?{fulfilled:!0,value:n}:{fulfilled:!1,reason:n},0==r&&o(i)},a=0;a<s.length;a++)t=s[a],goog.Promise.resolveThen_(t,goog.partial(n,a,!0),goog.partial(n,a,!1));else o(i)})},goog.Promise.firstFulfilled=function(l){return new goog.Promise(function(t,n){var o=l.length,r=[];if(o)for(var e,i=function(e){t(e)},a=function(e,t){o--,r[e]=t,0==o&&n(r)},s=0;s<l.length;s++)e=l[s],goog.Promise.resolveThen_(e,i,goog.partial(a,s));else t(void 0)})},goog.Promise.withResolver=function(){var n,o,e=new goog.Promise(function(e,t){n=e,o=t});return new goog.Promise.Resolver_(e,n,o)},goog.Promise.prototype.then=function(e,t,n){return null!=e&&goog.asserts.assertFunction(e,"opt_onFulfilled should be a function."),null!=t&&goog.asserts.assertFunction(t,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then")),this.addChildPromise_(goog.isFunction(e)?e:null,goog.isFunction(t)?t:null,n)},goog.Thenable.addImplementation(goog.Promise),goog.Promise.prototype.thenVoid=function(e,t,n){null!=e&&goog.asserts.assertFunction(e,"opt_onFulfilled should be a function."),null!=t&&goog.asserts.assertFunction(t,"opt_onRejected should be a function. Did you pass opt_context as the second argument instead of the third?"),goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("then")),this.addCallbackEntry_(goog.Promise.getCallbackEntry_(e||goog.nullFunction,t||null,n))},goog.Promise.prototype.thenAlways=function(e,t){goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenAlways"));var n=goog.Promise.getCallbackEntry_(e,e,t);return n.always=!0,this.addCallbackEntry_(n),this},goog.Promise.prototype.thenCatch=function(e,t){return goog.Promise.LONG_STACK_TRACES&&this.addStackTrace_(Error("thenCatch")),this.addChildPromise_(null,e,t)},goog.Promise.prototype.cancel=function(t){this.state_==goog.Promise.State_.PENDING&&goog.async.run(function(){var e=new goog.Promise.CancellationError(t);this.cancelInternal_(e)},this)},goog.Promise.prototype.cancelInternal_=function(e){this.state_==goog.Promise.State_.PENDING&&(this.parent_?(this.parent_.cancelChild_(this,e),this.parent_=null):this.resolve_(goog.Promise.State_.REJECTED,e))},goog.Promise.prototype.cancelChild_=function(e,t){if(this.callbackEntries_){for(var n=0,o=null,r=null,i=this.callbackEntries_;i&&(i.always||(n++,i.child==e&&(o=i),!(o&&1<n)));i=i.next)o||(r=i);o&&(this.state_==goog.Promise.State_.PENDING&&1==n?this.cancelInternal_(t):(r?this.removeEntryAfter_(r):this.popEntry_(),this.executeCallback_(o,goog.Promise.State_.REJECTED,t)))}},goog.Promise.prototype.addCallbackEntry_=function(e){this.hasEntry_()||this.state_!=goog.Promise.State_.FULFILLED&&this.state_!=goog.Promise.State_.REJECTED||this.scheduleCallbacks_(),this.queueEntry_(e)},goog.Promise.prototype.addChildPromise_=function(r,i,a){var e=goog.Promise.getCallbackEntry_(null,null,null);return e.child=new goog.Promise(function(n,o){e.onFulfilled=r?function(e){try{var t=r.call(a,e);n(t)}catch(e){o(e)}}:n,e.onRejected=i?function(e){try{var t=i.call(a,e);!goog.isDef(t)&&e instanceof goog.Promise.CancellationError?o(e):n(t)}catch(e){o(e)}}:o}),(e.child.parent_=this).addCallbackEntry_(e),e.child},goog.Promise.prototype.unblockAndFulfill_=function(e){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED),this.state_=goog.Promise.State_.PENDING,this.resolve_(goog.Promise.State_.FULFILLED,e)},goog.Promise.prototype.unblockAndReject_=function(e){goog.asserts.assert(this.state_==goog.Promise.State_.BLOCKED),this.state_=goog.Promise.State_.PENDING,this.resolve_(goog.Promise.State_.REJECTED,e)},goog.Promise.prototype.resolve_=function(e,t){this.state_==goog.Promise.State_.PENDING&&(this===t&&(e=goog.Promise.State_.REJECTED,t=new TypeError("Promise cannot resolve to itself")),this.state_=goog.Promise.State_.BLOCKED,goog.Promise.maybeThen_(t,this.unblockAndFulfill_,this.unblockAndReject_,this)||(this.result_=t,this.state_=e,this.parent_=null,this.scheduleCallbacks_(),e!=goog.Promise.State_.REJECTED||t instanceof goog.Promise.CancellationError||goog.Promise.addUnhandledRejection_(this,t)))},goog.Promise.maybeThen_=function(e,t,n,o){if(e instanceof goog.Promise)return e.thenVoid(t,n,o),!0;if(goog.Thenable.isImplementedBy(e))return e.then(t,n,o),!0;if(goog.isObject(e))try{var r=e.then;if(goog.isFunction(r))return goog.Promise.tryThen_(e,r,t,n,o),!0}catch(e){return n.call(o,e),!0}return!1},goog.Promise.tryThen_=function(e,t,n,o,r){var i=!1,a=function(e){i||(i=!0,o.call(r,e))};try{t.call(e,function(e){i||(i=!0,n.call(r,e))},a)}catch(e){a(e)}},goog.Promise.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,goog.async.run(this.executeCallbacks_,this))},goog.Promise.prototype.hasEntry_=function(){return!!this.callbackEntries_},goog.Promise.prototype.queueEntry_=function(e){goog.asserts.assert(null!=e.onFulfilled),this.callbackEntriesTail_?this.callbackEntriesTail_.next=e:this.callbackEntries_=e,this.callbackEntriesTail_=e},goog.Promise.prototype.popEntry_=function(){var e=null;return this.callbackEntries_&&(e=this.callbackEntries_,this.callbackEntries_=e.next,e.next=null),this.callbackEntries_||(this.callbackEntriesTail_=null),null!=e&&goog.asserts.assert(null!=e.onFulfilled),e},goog.Promise.prototype.removeEntryAfter_=function(e){goog.asserts.assert(this.callbackEntries_),goog.asserts.assert(null!=e),e.next==this.callbackEntriesTail_&&(this.callbackEntriesTail_=e),e.next=e.next.next},goog.Promise.prototype.executeCallbacks_=function(){for(var e;e=this.popEntry_();)goog.Promise.LONG_STACK_TRACES&&this.currentStep_++,this.executeCallback_(e,this.state_,this.result_);this.executing_=!1},goog.Promise.prototype.executeCallback_=function(e,t,n){if(t==goog.Promise.State_.REJECTED&&e.onRejected&&!e.always&&this.removeUnhandledRejection_(),e.child)e.child.parent_=null,goog.Promise.invokeCallback_(e,t,n);else try{e.always?e.onFulfilled.call(e.context):goog.Promise.invokeCallback_(e,t,n)}catch(e){goog.Promise.handleRejection_.call(null,e)}goog.Promise.returnEntry_(e)},goog.Promise.invokeCallback_=function(e,t,n){t==goog.Promise.State_.FULFILLED?e.onFulfilled.call(e.context,n):e.onRejected&&e.onRejected.call(e.context,n)},goog.Promise.prototype.addStackTrace_=function(e){if(goog.Promise.LONG_STACK_TRACES&&goog.isString(e.stack)){var t=e.stack.split("\n",4)[3];e=e.message,e+=Array(11-e.length).join(" "),this.stack_.push(e+t)}},goog.Promise.prototype.appendLongStack_=function(e){if(goog.Promise.LONG_STACK_TRACES&&e&&goog.isString(e.stack)&&this.stack_.length){for(var t=["Promise trace:"],n=this;n;n=n.parent_){for(var o=this.currentStep_;0<=o;o--)t.push(n.stack_[o]);t.push("Value: ["+(n.state_==goog.Promise.State_.REJECTED?"REJECTED":"FULFILLED")+"] <"+String(n.result_)+">")}e.stack+="\n\n"+t.join("\n")}},goog.Promise.prototype.removeUnhandledRejection_=function(){if(0<goog.Promise.UNHANDLED_REJECTION_DELAY)for(var e=this;e&&e.unhandledRejectionId_;e=e.parent_)goog.global.clearTimeout(e.unhandledRejectionId_),e.unhandledRejectionId_=0;else if(0==goog.Promise.UNHANDLED_REJECTION_DELAY)for(e=this;e&&e.hadUnhandledRejection_;e=e.parent_)e.hadUnhandledRejection_=!1},goog.Promise.addUnhandledRejection_=function(e,t){0<goog.Promise.UNHANDLED_REJECTION_DELAY?e.unhandledRejectionId_=goog.global.setTimeout(function(){e.appendLongStack_(t),goog.Promise.handleRejection_.call(null,t)},goog.Promise.UNHANDLED_REJECTION_DELAY):0==goog.Promise.UNHANDLED_REJECTION_DELAY&&(e.hadUnhandledRejection_=!0,goog.async.run(function(){e.hadUnhandledRejection_&&(e.appendLongStack_(t),goog.Promise.handleRejection_.call(null,t))}))},goog.Promise.handleRejection_=goog.async.throwException,goog.Promise.setUnhandledRejectionHandler=function(e){goog.Promise.handleRejection_=e},goog.Promise.CancellationError=function(e){goog.debug.Error.call(this,e)},goog.inherits(goog.Promise.CancellationError,goog.debug.Error),goog.Promise.CancellationError.prototype.name="cancel",goog.Promise.Resolver_=function(e,t,n){this.promise=e,this.resolve=t,this.reject=n},goog.disposable={},goog.disposable.IDisposable=function(){},goog.disposable.IDisposable.prototype.dispose=goog.abstractMethod,goog.disposable.IDisposable.prototype.isDisposed=goog.abstractMethod,goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=Error().stack),goog.Disposable.instances_[goog.getUid(this)]=this),this.disposed_=this.disposed_,this.onDisposeCallbacks_=this.onDisposeCallbacks_},goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2},goog.Disposable.MONITORING_MODE=0,goog.Disposable.INCLUDE_STACK_ON_CREATION=!0,goog.Disposable.instances_={},goog.Disposable.getUndisposedObjects=function(){var e,t=[];for(e in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(e)&&t.push(goog.Disposable.instances_[Number(e)]);return t},goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}},goog.Disposable.prototype.disposed_=!1,goog.Disposable.prototype.isDisposed=function(){return this.disposed_},goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed,goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var e=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(e))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");if(goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&this.onDisposeCallbacks_&&0<this.onDisposeCallbacks_.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete goog.Disposable.instances_[e]}},goog.Disposable.prototype.registerDisposable=function(e){this.addOnDisposeCallback(goog.partial(goog.dispose,e))},goog.Disposable.prototype.addOnDisposeCallback=function(e,t){this.disposed_?goog.isDef(t)?e.call(t):e():(this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),this.onDisposeCallbacks_.push(goog.isDef(t)?goog.bind(e,t):e))},goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()},goog.Disposable.isDisposed=function(e){return!(!e||"function"!=typeof e.isDisposed)&&e.isDisposed()},goog.dispose=function(e){e&&"function"==typeof e.dispose&&e.dispose()},goog.disposeAll=function(e){for(var t=0,n=arguments.length;t<n;++t){var o=arguments[t];goog.isArrayLike(o)?goog.disposeAll.apply(null,o):goog.dispose(o)}},goog.debug.errorcontext={},goog.debug.errorcontext.addErrorContext=function(e,t,n){e[goog.debug.errorcontext.CONTEXT_KEY_]||(e[goog.debug.errorcontext.CONTEXT_KEY_]={}),e[goog.debug.errorcontext.CONTEXT_KEY_][t]=n},goog.debug.errorcontext.getErrorContext=function(e){return e[goog.debug.errorcontext.CONTEXT_KEY_]||{}},goog.debug.errorcontext.CONTEXT_KEY_="__closure__error__context__984382",goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.getVersion=function(){var e=goog.labs.userAgent.util.getUserAgent(),t="";return goog.labs.userAgent.platform.isWindows()?t=(e=(t=/Windows (?:NT|Phone) ([0-9.]+)/).exec(e))?e[1]:"0.0":goog.labs.userAgent.platform.isIos()?t=(e=(t=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(e))&&e[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?t=(e=(t=/Mac OS X ([0-9_.]+)/).exec(e))?e[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isAndroid()?t=(e=(t=/Android\s+([^\);]+)(\)|;)/).exec(e))&&e[1]:goog.labs.userAgent.platform.isChromeOS()&&(t=(e=(t=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(e))&&e[1]),t||""},goog.labs.userAgent.platform.isVersionOrHigher=function(e){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),e)},goog.reflect={},goog.reflect.object=function(e,t){return t},goog.reflect.objectProperty=function(e,t){return e},goog.reflect.sinkValue=function(e){return goog.reflect.sinkValue[" "](e),e},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(e,t){try{return goog.reflect.sinkValue(e[t]),!0}catch(e){}return!1},goog.reflect.cache=function(e,t,n,o){return o=o?o(t):t,Object.prototype.hasOwnProperty.call(e,o)?e[o]:e[o]=n(t)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var e=goog.userAgent.getNavigatorTyped();return e&&e.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var e=goog.userAgent.getNavigatorTyped();return!!e&&goog.string.contains(e.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.determineVersion_=function(){var e="",t=goog.userAgent.getVersionRegexResult_();return t&&(e=t?t[1]:""),goog.userAgent.IE&&(null!=(t=goog.userAgent.getDocumentMode_())&&t>parseFloat(e))?String(t):e},goog.userAgent.getVersionRegexResult_=function(){var e=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(e):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(e):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(e):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(e):void 0},goog.userAgent.getDocumentMode_=function(){var e=goog.global.document;return e?e.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(e,t){return goog.string.compareVersions(e,t)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(e){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,e,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,e)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(e){return Number(goog.userAgent.DOCUMENT_MODE)>=e},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){var e=goog.global.document,t=goog.userAgent.getDocumentMode_();if(e&&goog.userAgent.IE)return t||("CSS1Compat"==e.compatMode?parseInt(goog.userAgent.VERSION,10):5)}(),goog.debug.LOGGING_ENABLED=goog.DEBUG,goog.debug.FORCE_SLOPPY_STACKS=!1,goog.debug.catchErrors=function(i,e,t){var a=(t=t||goog.global).onerror,s=!!e;goog.userAgent.WEBKIT&&!goog.userAgent.isVersionOrHigher("535.3")&&(s=!s),t.onerror=function(e,t,n,o,r){return a&&a(e,t,n,o,r),i({message:e,fileName:t,line:n,lineNumber:n,col:o,error:r}),s}},goog.debug.expose=function(e,t){if(void 0===e)return"undefined";if(null==e)return"NULL";var n,o=[];for(n in e)if(t||!goog.isFunction(e[n])){var r=n+" = ";try{r+=e[n]}catch(e){r+="*** "+e+" ***"}o.push(r)}return o.join("\n")},goog.debug.deepExpose=function(e,i){var a=[],s=[],l={},c=function(e,t){var n=t+"  ";try{if(goog.isDef(e))if(goog.isNull(e))a.push("NULL");else if(goog.isString(e))a.push('"'+e.replace(/\n/g,"\n"+t)+'"');else if(goog.isFunction(e))a.push(String(e).replace(/\n/g,"\n"+t));else if(goog.isObject(e)){goog.hasUid(e)||s.push(e);var o=goog.getUid(e);if(l[o])a.push("*** reference loop detected (id="+o+") ***");else{for(var r in l[o]=!0,a.push("{"),e)!i&&goog.isFunction(e[r])||(a.push("\n"),a.push(n),a.push(r+" = "),c(e[r],n));a.push("\n"+t+"}"),delete l[o]}}else a.push(e);else a.push("undefined")}catch(e){a.push("*** "+e+" ***")}};c(e,"");for(var t=0;t<s.length;t++)goog.removeUid(s[t]);return a.join("")},goog.debug.exposeArray=function(e){for(var t=[],n=0;n<e.length;n++)goog.isArray(e[n])?t.push(goog.debug.exposeArray(e[n])):t.push(e[n]);return"[ "+t.join(", ")+" ]"},goog.debug.normalizeErrorObject=function(e){var t=goog.getObjectByName("window.location.href");if(goog.isString(e))return{message:e,name:"Unknown error",lineNumber:"Not available",fileName:t,stack:"Not available"};var n=!1;try{var o=e.lineNumber||e.line||"Not available"}catch(e){o="Not available",n=!0}try{var r=e.fileName||e.filename||e.sourceURL||goog.global.$googDebugFname||t}catch(e){r="Not available",n=!0}return!n&&e.lineNumber&&e.fileName&&e.stack&&e.message&&e.name?e:{message:e.message||"Not available",name:e.name||"UnknownError",lineNumber:o,fileName:r,stack:e.stack||"Not available"}},goog.debug.enhanceError=function(e,t){if(e instanceof Error)var n=e;else n=Error(e),Error.captureStackTrace&&Error.captureStackTrace(n,goog.debug.enhanceError);if(n.stack||(n.stack=goog.debug.getStacktrace(goog.debug.enhanceError)),t){for(var o=0;n["message"+o];)++o;n["message"+o]=String(t)}return n},goog.debug.enhanceErrorWithContext=function(e,t){var n=goog.debug.enhanceError(e);if(t)for(var o in t)goog.debug.errorcontext.addErrorContext(n,o,t[o]);return n},goog.debug.getStacktraceSimple=function(e){if(!goog.debug.FORCE_SLOPPY_STACKS){var t=goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);if(t)return t}t=[];for(var n=arguments.callee.caller,o=0;n&&(!e||o<e);){t.push(goog.debug.getFunctionName(n)),t.push("()\n");try{n=n.caller}catch(e){t.push("[exception trying to get caller]\n");break}if(++o>=goog.debug.MAX_STACK_DEPTH){t.push("[...long stack...]");break}}return e&&e<=o?t.push("[...reached max depth limit...]"):t.push("[end]"),t.join("")},goog.debug.MAX_STACK_DEPTH=50,goog.debug.getNativeStackTrace_=function(e){var t=Error();if(Error.captureStackTrace)return Error.captureStackTrace(t,e),String(t.stack);try{throw t}catch(e){t=e}return(e=t.stack)?String(e):null},goog.debug.getStacktrace=function(e){var t;return goog.debug.FORCE_SLOPPY_STACKS||(t=goog.debug.getNativeStackTrace_(e||goog.debug.getStacktrace)),t||(t=goog.debug.getStacktraceHelper_(e||arguments.callee.caller,[])),t},goog.debug.getStacktraceHelper_=function(e,t){var n=[];if(goog.array.contains(t,e))n.push("[...circular reference...]");else if(e&&t.length<goog.debug.MAX_STACK_DEPTH){n.push(goog.debug.getFunctionName(e)+"(");for(var o=e.arguments,r=0;o&&r<o.length;r++){0<r&&n.push(", ");var i=o[r];switch(typeof i){case"object":i=i?"object":"null";break;case"string":break;case"number":i=String(i);break;case"boolean":i=i?"true":"false";break;case"function":i=(i=goog.debug.getFunctionName(i))?i:"[fn]";break;default:i=typeof i}40<i.length&&(i=i.substr(0,40)+"..."),n.push(i)}t.push(e),n.push(")\n");try{n.push(goog.debug.getStacktraceHelper_(e.caller,t))}catch(e){n.push("[exception trying to get caller]\n")}}else e?n.push("[...long stack...]"):n.push("[end]");return n.join("")},goog.debug.setFunctionResolver=function(e){goog.debug.fnNameResolver_=e},goog.debug.getFunctionName=function(e){if(goog.debug.fnNameCache_[e])return goog.debug.fnNameCache_[e];if(goog.debug.fnNameResolver_){var t=goog.debug.fnNameResolver_(e);if(t)return goog.debug.fnNameCache_[e]=t}return e=String(e),goog.debug.fnNameCache_[e]||(t=/function ([^\(]+)/.exec(e),goog.debug.fnNameCache_[e]=t?t[1]:"[Anonymous]"),goog.debug.fnNameCache_[e]},goog.debug.makeWhitespaceVisible=function(e){return e.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")},goog.debug.runtimeType=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":typeof e},goog.debug.fnNameCache_={},goog.debug.freezeInternal_=goog.DEBUG&&Object.freeze||function(e){return e},goog.debug.freeze=function(e){return goog.debug.freezeInternal_(e)},goog.events={},$jscomp.scope.purify=function(e){return e()},goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.maxTouchPoints&&!goog.global.navigator.msMaxTouchPoints),POINTER_EVENTS:"PointerEvent"in goog.global,MSPOINTER_EVENTS:"MSPointerEvent"in goog.global&&!(!goog.global.navigator||!goog.global.navigator.msPointerEnabled),PASSIVE_EVENTS:(0,$jscomp.scope.purify)(function(){if(!goog.global.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});return goog.global.addEventListener("test",goog.nullFunction,t),goog.global.removeEventListener("test",goog.nullFunction,t),e})},goog.events.EventId=function(e){this.id=e},goog.events.EventId.prototype.toString=function(){return this.id},goog.events.Event=function(e,t){this.type=e instanceof goog.events.EventId?String(e):e,this.currentTarget=this.target=t,this.defaultPrevented=this.propagationStopped_=!1,this.returnValue_=!0},goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0},goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0,this.returnValue_=!1},goog.events.Event.stopPropagation=function(e){e.stopPropagation()},goog.events.Event.preventDefault=function(e){e.preventDefault()},goog.events.getVendorPrefixedName_=function(e){return goog.userAgent.WEBKIT?"webkit"+e:goog.userAgent.OPERA?"o"+e.toLowerCase():e.toLowerCase()},goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSECANCEL:"mousecancel",SELECTIONCHANGE:"selectionchange",SELECTSTART:"selectstart",WHEEL:"wheel",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:"focusin",FOCUSOUT:"focusout",CHANGE:"change",RESET:"reset",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DEVICECHANGE:"devicechange",DEVICEMOTION:"devicemotion",DEVICEORIENTATION:"deviceorientation",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",CANPLAY:"canplay",CANPLAYTHROUGH:"canplaythrough",DURATIONCHANGE:"durationchange",EMPTIED:"emptied",ENDED:"ended",LOADEDDATA:"loadeddata",LOADEDMETADATA:"loadedmetadata",PAUSE:"pause",PLAY:"play",PLAYING:"playing",RATECHANGE:"ratechange",SEEKED:"seeked",SEEKING:"seeking",STALLED:"stalled",SUSPEND:"suspend",TIMEUPDATE:"timeupdate",VOLUMECHANGE:"volumechange",WAITING:"waiting",SOURCEOPEN:"sourceopen",SOURCEENDED:"sourceended",SOURCECLOSED:"sourceclosed",ABORT:"abort",UPDATE:"update",UPDATESTART:"updatestart",UPDATEEND:"updateend",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",INSTALL:"install",ACTIVATE:"activate",FETCH:"fetch",FOREIGNFETCH:"foreignfetch",MESSAGEERROR:"messageerror",STATECHANGE:"statechange",UPDATEFOUND:"updatefound",CONTROLLERCHANGE:"controllerchange",ANIMATIONSTART:goog.events.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.getVendorPrefixedName_("AnimationIteration"),TRANSITIONEND:goog.events.getVendorPrefixedName_("TransitionEnd"),POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXT:"text",TEXTINPUT:goog.userAgent.IE?"textinput":"textInput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",BEFOREINPUT:"beforeinput",EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified",BEFOREPRINT:"beforeprint",AFTERPRINT:"afterprint",BEFOREINSTALLPROMPT:"beforeinstallprompt",APPINSTALLED:"appinstalled"},goog.events.getPointerFallbackEventName_=function(e,t,n){return goog.events.BrowserFeature.POINTER_EVENTS?e:goog.events.BrowserFeature.MSPOINTER_EVENTS?t:n};goog.events.PointerFallbackEventType={POINTERDOWN:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERDOWN,goog.events.EventType.MSPOINTERDOWN,goog.events.EventType.MOUSEDOWN),POINTERUP:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERUP,goog.events.EventType.MSPOINTERUP,goog.events.EventType.MOUSEUP),POINTERCANCEL:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERCANCEL,goog.events.EventType.MSPOINTERCANCEL,goog.events.EventType.MOUSECANCEL),POINTERMOVE:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERMOVE,goog.events.EventType.MSPOINTERMOVE,goog.events.EventType.MOUSEMOVE),POINTEROVER:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTEROVER,goog.events.EventType.MSPOINTEROVER,goog.events.EventType.MOUSEOVER),POINTEROUT:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTEROUT,goog.events.EventType.MSPOINTEROUT,goog.events.EventType.MOUSEOUT),POINTERENTER:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERENTER,goog.events.EventType.MSPOINTERENTER,goog.events.EventType.MOUSEENTER),POINTERLEAVE:goog.events.getPointerFallbackEventName_(goog.events.EventType.POINTERLEAVE,goog.events.EventType.MSPOINTERLEAVE,goog.events.EventType.MOUSELEAVE)},goog.events.PointerAsMouseEventType={MOUSEDOWN:goog.events.PointerFallbackEventType.POINTERDOWN,MOUSEUP:goog.events.PointerFallbackEventType.POINTERUP,MOUSECANCEL:goog.events.PointerFallbackEventType.POINTERCANCEL,MOUSEMOVE:goog.events.PointerFallbackEventType.POINTERMOVE,MOUSEOVER:goog.events.PointerFallbackEventType.POINTEROVER,MOUSEOUT:goog.events.PointerFallbackEventType.POINTEROUT,MOUSEENTER:goog.events.PointerFallbackEventType.POINTERENTER,MOUSELEAVE:goog.events.PointerFallbackEventType.POINTERLEAVE},goog.events.BrowserEvent=function(e,t){goog.events.Event.call(this,e?e.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.key="",this.charCode=this.keyCode=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.platformModifierKey=!1,this.pointerId=0,this.pointerType="",this.event_=null,e&&this.init(e,t)},goog.inherits(goog.events.BrowserEvent,goog.events.Event),goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2},goog.events.BrowserEvent.PointerType={MOUSE:"mouse",PEN:"pen",TOUCH:"touch"},goog.events.BrowserEvent.IEButtonMap=goog.debug.freeze([1,4,2]),goog.events.BrowserEvent.IE_BUTTON_MAP=goog.events.BrowserEvent.IEButtonMap,goog.events.BrowserEvent.IE_POINTER_TYPE_MAP=goog.debug.freeze({2:goog.events.BrowserEvent.PointerType.TOUCH,3:goog.events.BrowserEvent.PointerType.PEN,4:goog.events.BrowserEvent.PointerType.MOUSE}),goog.events.BrowserEvent.prototype.init=function(e,t){var n=this.type=e.type,o=e.changedTouches?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.currentTarget=t;var r=e.relatedTarget;r?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(r,"nodeName")||(r=null)):n==goog.events.EventType.MOUSEOVER?r=e.fromElement:n==goog.events.EventType.MOUSEOUT&&(r=e.toElement),this.relatedTarget=r,goog.isNull(o)?(this.offsetX=goog.userAgent.WEBKIT||void 0!==e.offsetX?e.offsetX:e.layerX,this.offsetY=goog.userAgent.WEBKIT||void 0!==e.offsetY?e.offsetY:e.layerY,this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0):(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=e.button,this.keyCode=e.keyCode||0,this.key=e.key||"",this.charCode=e.charCode||("keypress"==n?e.keyCode:0),this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.platformModifierKey=goog.userAgent.MAC?e.metaKey:e.ctrlKey,this.pointerId=e.pointerId||0,this.pointerType=goog.events.BrowserEvent.getPointerType_(e),this.state=e.state,(this.event_=e).defaultPrevented&&this.preventDefault()},goog.events.BrowserEvent.prototype.isButton=function(e){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==e:"click"==this.type?e==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IE_BUTTON_MAP[e])},goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)},goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this),this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0},goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var e=this.event_;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}},goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_},goog.events.BrowserEvent.getPointerType_=function(e){return goog.isString(e.pointerType)?e.pointerType:goog.events.BrowserEvent.IE_POINTER_TYPE_MAP[e.pointerType]||""},goog.events.Listenable=function(){},goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1e6*Math.random()|0),goog.events.Listenable.addImplementation=function(e){e.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0},goog.events.Listenable.isImplementedBy=function(e){return!(!e||!e[goog.events.Listenable.IMPLEMENTED_BY_PROP])},goog.events.ListenableKey=function(){},goog.events.ListenableKey.counter_=0,goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_},goog.events.Listener=function(e,t,n,o,r,i){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=Error().stack),this.listener=e,this.proxy=t,this.src=n,this.type=o,this.capture=!!r,this.handler=i,this.key=goog.events.ListenableKey.reserveKey(),this.removed=this.callOnce=!1},goog.events.Listener.ENABLE_MONITORING=!1,goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0,this.handler=this.src=this.proxy=this.listener=null},goog.events.ListenerMap=function(e){this.src=e,this.listeners={},this.typeCount_=0},goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_},goog.events.ListenerMap.prototype.getListenerCount=function(){var e,t=0;for(e in this.listeners)t+=this.listeners[e].length;return t},goog.events.ListenerMap.prototype.add=function(e,t,n,o,r){var i=e.toString();(e=this.listeners[i])||(e=this.listeners[i]=[],this.typeCount_++);var a=goog.events.ListenerMap.findListenerIndex_(e,t,o,r);return-1<a?(t=e[a],n||(t.callOnce=!1)):((t=new goog.events.Listener(t,null,this.src,i,!!o,r)).callOnce=n,e.push(t)),t},goog.events.ListenerMap.prototype.remove=function(e,t,n,o){if(!((e=e.toString())in this.listeners))return!1;var r=this.listeners[e];return-1<(t=goog.events.ListenerMap.findListenerIndex_(r,t,n,o))&&(r[t].markAsRemoved(),goog.array.removeAt(r,t),0==r.length&&(delete this.listeners[e],this.typeCount_--),!0)},goog.events.ListenerMap.prototype.removeByKey=function(e){var t=e.type;if(!(t in this.listeners))return!1;var n=goog.array.remove(this.listeners[t],e);return n&&(e.markAsRemoved(),0==this.listeners[t].length&&(delete this.listeners[t],this.typeCount_--)),n},goog.events.ListenerMap.prototype.removeAll=function(e){e=e&&e.toString();var t,n=0;for(t in this.listeners)if(!e||t==e){for(var o=this.listeners[t],r=0;r<o.length;r++)++n,o[r].markAsRemoved();delete this.listeners[t],this.typeCount_--}return n},goog.events.ListenerMap.prototype.getListeners=function(e,t){var n=this.listeners[e.toString()],o=[];if(n)for(var r=0;r<n.length;++r){var i=n[r];i.capture==t&&o.push(i)}return o},goog.events.ListenerMap.prototype.getListener=function(e,t,n,o){var r=-1;return(e=this.listeners[e.toString()])&&(r=goog.events.ListenerMap.findListenerIndex_(e,t,n,o)),-1<r?e[r]:null},goog.events.ListenerMap.prototype.hasListener=function(e,o){var r=goog.isDef(e),i=r?e.toString():"",a=goog.isDef(o);return goog.object.some(this.listeners,function(e,t){for(var n=0;n<e.length;++n)if(!(r&&e[n].type!=i||a&&e[n].capture!=o))return!0;return!1})},goog.events.ListenerMap.findListenerIndex_=function(e,t,n,o){for(var r=0;r<e.length;++r){var i=e[r];if(!i.removed&&i.listener==t&&i.capture==!!n&&i.handler==o)return r}return-1},goog.events.LISTENER_MAP_PROP_="closure_lm_"+(1e6*Math.random()|0),goog.events.onString_="on",goog.events.onStringMap_={},goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2},goog.events.CAPTURE_SIMULATION_MODE=2,goog.events.listenerCountEstimate_=0,goog.events.listen=function(e,t,n,o,r){if(o&&o.once)return goog.events.listenOnce(e,t,n,o,r);if(goog.isArray(t)){for(var i=0;i<t.length;i++)goog.events.listen(e,t[i],n,o,r);return null}return n=goog.events.wrapListener(n),goog.events.Listenable.isImplementedBy(e)?(o=goog.isObject(o)?!!o.capture:!!o,e.listen(t,n,o,r)):goog.events.listen_(e,t,n,!1,o,r)},goog.events.listen_=function(e,t,n,o,r,i){if(!t)throw Error("Invalid event type");var a=goog.isObject(r)?!!r.capture:!!r;if(a&&!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_FAIL)return goog.asserts.fail("Can not register capture listener in IE8-."),null;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_SILENT)return null}var s=goog.events.getListenerMap_(e);if(s||(e[goog.events.LISTENER_MAP_PROP_]=s=new goog.events.ListenerMap(e)),(n=s.add(t,n,o,a,i)).proxy)return n;if(o=goog.events.getProxy(),(n.proxy=o).src=e,o.listener=n,e.addEventListener)goog.events.BrowserFeature.PASSIVE_EVENTS||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),o,r);else if(e.attachEvent)e.attachEvent(goog.events.getOnString_(t.toString()),o);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");goog.asserts.assert("change"===t,"MediaQueryList only has a change event"),e.addListener(o)}return goog.events.listenerCountEstimate_++,n},goog.events.getProxy=function(){var t=goog.events.handleBrowserEvent_,n=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(e){return t.call(n.src,n.listener,e)}:function(e){if(!(e=t.call(n.src,n.listener,e)))return e};return n},goog.events.listenOnce=function(e,t,n,o,r){if(goog.isArray(t)){for(var i=0;i<t.length;i++)goog.events.listenOnce(e,t[i],n,o,r);return null}return n=goog.events.wrapListener(n),goog.events.Listenable.isImplementedBy(e)?(o=goog.isObject(o)?!!o.capture:!!o,e.listenOnce(t,n,o,r)):goog.events.listen_(e,t,n,!0,o,r)},goog.events.listenWithWrapper=function(e,t,n,o,r){t.listen(e,n,o,r)},goog.events.unlisten=function(e,t,n,o,r){if(goog.isArray(t)){for(var i=0;i<t.length;i++)goog.events.unlisten(e,t[i],n,o,r);return null}return o=goog.isObject(o)?!!o.capture:!!o,n=goog.events.wrapListener(n),goog.events.Listenable.isImplementedBy(e)?e.unlisten(t,n,o,r):!!e&&(!(!(e=goog.events.getListenerMap_(e))||!(t=e.getListener(t,n,o,r)))&&goog.events.unlistenByKey(t))},goog.events.unlistenByKey=function(e){if(goog.isNumber(e)||!e||e.removed)return!1;var t=e.src;if(goog.events.Listenable.isImplementedBy(t))return t.unlistenByKey(e);var n=e.type,o=e.proxy;return t.removeEventListener?t.removeEventListener(n,o,e.capture):t.detachEvent?t.detachEvent(goog.events.getOnString_(n),o):t.addListener&&t.removeListener&&t.removeListener(o),goog.events.listenerCountEstimate_--,(n=goog.events.getListenerMap_(t))?(n.removeByKey(e),0==n.getTypeCount()&&(n.src=null,t[goog.events.LISTENER_MAP_PROP_]=null)):e.markAsRemoved(),!0},goog.events.unlistenWithWrapper=function(e,t,n,o,r){t.unlisten(e,n,o,r)},goog.events.removeAll=function(e,t){if(!e)return 0;if(goog.events.Listenable.isImplementedBy(e))return e.removeAllListeners(t);var n=goog.events.getListenerMap_(e);if(!n)return 0;var o,r=0,i=t&&t.toString();for(o in n.listeners)if(!i||o==i)for(var a=n.listeners[o].concat(),s=0;s<a.length;++s)goog.events.unlistenByKey(a[s])&&++r;return r},goog.events.getListeners=function(e,t,n){return goog.events.Listenable.isImplementedBy(e)?e.getListeners(t,n):e&&(e=goog.events.getListenerMap_(e))?e.getListeners(t,n):[]},goog.events.getListener=function(e,t,n,o,r){return n=goog.events.wrapListener(n),o=!!o,goog.events.Listenable.isImplementedBy(e)?e.getListener(t,n,o,r):e&&(e=goog.events.getListenerMap_(e))?e.getListener(t,n,o,r):null},goog.events.hasListener=function(e,t,n){return goog.events.Listenable.isImplementedBy(e)?e.hasListener(t,n):!!(e=goog.events.getListenerMap_(e))&&e.hasListener(t,n)},goog.events.expose=function(e){var t,n=[];for(t in e)e[t]&&e[t].id?n.push(t+" = "+e[t]+" ("+e[t].id+")"):n.push(t+" = "+e[t]);return n.join("\n")},goog.events.getOnString_=function(e){return e in goog.events.onStringMap_?goog.events.onStringMap_[e]:goog.events.onStringMap_[e]=goog.events.onString_+e},goog.events.fireListeners=function(e,t,n,o){return goog.events.Listenable.isImplementedBy(e)?e.fireListeners(t,n,o):goog.events.fireListeners_(e,t,n,o)},goog.events.fireListeners_=function(e,t,n,o){var r=!0;if((e=goog.events.getListenerMap_(e))&&(t=e.listeners[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var i=t[e];i&&i.capture==n&&!i.removed&&(i=goog.events.fireListener(i,o),r=r&&!1!==i)}return r},goog.events.fireListener=function(e,t){var n=e.listener,o=e.handler||e.src;return e.callOnce&&goog.events.unlistenByKey(e),n.call(o,t)},goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_},goog.events.dispatchEvent=function(e,t){return goog.asserts.assert(goog.events.Listenable.isImplementedBy(e),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance."),e.dispatchEvent(t)},goog.events.protectBrowserEventEntryPoint=function(e){goog.events.handleBrowserEvent_=e.protectEntryPoint(goog.events.handleBrowserEvent_)},goog.events.handleBrowserEvent_=function(e,t){if(e.removed)return!0;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var n=t||goog.getObjectByName("window.event"),o=new goog.events.BrowserEvent(n,this),r=!0;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.ON){if(!goog.events.isMarkedIeEvent_(n)){goog.events.markIeEvent_(n),n=[];for(var i=o.currentTarget;i;i=i.parentNode)n.push(i);i=e.type;for(var a=n.length-1;!o.propagationStopped_&&0<=a;a--){o.currentTarget=n[a];var s=goog.events.fireListeners_(n[a],i,!0,o);r=r&&s}for(a=0;!o.propagationStopped_&&a<n.length;a++)o.currentTarget=n[a],s=goog.events.fireListeners_(n[a],i,!1,o),r=r&&s}}else r=goog.events.fireListener(e,o);return r}return goog.events.fireListener(e,new goog.events.BrowserEvent(t,this))},goog.events.markIeEvent_=function(e){var t=!1;if(0==e.keyCode)try{return void(e.keyCode=-1)}catch(e){t=!0}(t||null==e.returnValue)&&(e.returnValue=!0)},goog.events.isMarkedIeEvent_=function(e){return e.keyCode<0||null!=e.returnValue},goog.events.uniqueIdCounter_=0,goog.events.getUniqueId=function(e){return e+"_"+goog.events.uniqueIdCounter_++},goog.events.getListenerMap_=function(e){return(e=e[goog.events.LISTENER_MAP_PROP_])instanceof goog.events.ListenerMap?e:null},goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1e9*Math.random()>>>0),goog.events.wrapListener=function(t){return goog.asserts.assert(t,"Listener can not be null."),goog.isFunction(t)?t:(goog.asserts.assert(t.handleEvent,"An object listener must have handleEvent method."),t[goog.events.LISTENER_WRAPPER_PROP_]||(t[goog.events.LISTENER_WRAPPER_PROP_]=function(e){return t.handleEvent(e)}),t[goog.events.LISTENER_WRAPPER_PROP_])},goog.debug.entryPointRegistry.register(function(e){goog.events.handleBrowserEvent_=e(goog.events.handleBrowserEvent_)}),goog.events.EventTarget=function(){goog.Disposable.call(this),this.eventTargetListeners_=new goog.events.ListenerMap(this),(this.actualEventTarget_=this).parentEventTarget_=null},goog.inherits(goog.events.EventTarget,goog.Disposable),goog.events.Listenable.addImplementation(goog.events.EventTarget),goog.events.EventTarget.MAX_ANCESTORS_=1e3,goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_},goog.events.EventTarget.prototype.setParentEventTarget=function(e){this.parentEventTarget_=e},goog.events.EventTarget.prototype.addEventListener=function(e,t,n,o){goog.events.listen(this,e,t,n,o)},goog.events.EventTarget.prototype.removeEventListener=function(e,t,n,o){goog.events.unlisten(this,e,t,n,o)},goog.events.EventTarget.prototype.dispatchEvent=function(e){this.assertInitialized_();var t=this.getParentEventTarget();if(t)for(var n=[],o=1;t;t=t.getParentEventTarget())n.push(t),goog.asserts.assert(++o<goog.events.EventTarget.MAX_ANCESTORS_,"infinite loop");return goog.events.EventTarget.dispatchEventInternal_(this.actualEventTarget_,e,n)},goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this),this.removeAllListeners(),this.parentEventTarget_=null},goog.events.EventTarget.prototype.listen=function(e,t,n,o){return this.assertInitialized_(),this.eventTargetListeners_.add(String(e),t,!1,n,o)},goog.events.EventTarget.prototype.listenOnce=function(e,t,n,o){return this.eventTargetListeners_.add(String(e),t,!0,n,o)},goog.events.EventTarget.prototype.unlisten=function(e,t,n,o){return this.eventTargetListeners_.remove(String(e),t,n,o)},goog.events.EventTarget.prototype.unlistenByKey=function(e){return this.eventTargetListeners_.removeByKey(e)},goog.events.EventTarget.prototype.removeAllListeners=function(e){return this.eventTargetListeners_?this.eventTargetListeners_.removeAll(e):0},goog.events.EventTarget.prototype.fireListeners=function(e,t,n){if(!(e=this.eventTargetListeners_.listeners[String(e)]))return!0;e=e.concat();for(var o=!0,r=0;r<e.length;++r){var i=e[r];if(i&&!i.removed&&i.capture==t){var a=i.listener,s=i.handler||i.src;i.callOnce&&this.unlistenByKey(i),o=!1!==a.call(s,n)&&o}}return o&&0!=n.returnValue_},goog.events.EventTarget.prototype.getListeners=function(e,t){return this.eventTargetListeners_.getListeners(String(e),t)},goog.events.EventTarget.prototype.getListener=function(e,t,n,o){return this.eventTargetListeners_.getListener(String(e),t,n,o)},goog.events.EventTarget.prototype.hasListener=function(e,t){var n=goog.isDef(e)?String(e):void 0;return this.eventTargetListeners_.hasListener(n,t)},goog.events.EventTarget.prototype.setTargetForTesting=function(e){this.actualEventTarget_=e},goog.events.EventTarget.prototype.assertInitialized_=function(){goog.asserts.assert(this.eventTargetListeners_,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")},goog.events.EventTarget.dispatchEventInternal_=function(e,t,n){var o=t.type||t;if(goog.isString(t))t=new goog.events.Event(t,e);else if(t instanceof goog.events.Event)t.target=t.target||e;else{var r=t;t=new goog.events.Event(o,e),goog.object.extend(t,r)}if(r=!0,n)for(var i=n.length-1;!t.propagationStopped_&&0<=i;i--){var a=t.currentTarget=n[i];r=a.fireListeners(o,!0,t)&&r}if(t.propagationStopped_||(r=(a=t.currentTarget=e).fireListeners(o,!0,t)&&r,t.propagationStopped_||(r=a.fireListeners(o,!1,t)&&r)),n)for(i=0;!t.propagationStopped_&&i<n.length;i++)r=(a=t.currentTarget=n[i]).fireListeners(o,!1,t)&&r;return r},goog.Timer=function(e,t){goog.events.EventTarget.call(this),this.interval_=e||1,this.timerObject_=t||goog.Timer.defaultTimerObject,this.boundTick_=goog.bind(this.tick_,this),this.last_=goog.now()},goog.inherits(goog.Timer,goog.events.EventTarget),goog.Timer.MAX_TIMEOUT_=2147483647,goog.Timer.INVALID_TIMEOUT_ID_=-1,goog.Timer.prototype.enabled=!1,goog.Timer.defaultTimerObject=goog.global,goog.Timer.intervalScale=.8,goog.Timer.prototype.timer_=null,goog.Timer.prototype.getInterval=function(){return this.interval_},goog.Timer.prototype.setInterval=function(e){this.interval_=e,this.timer_&&this.enabled?(this.stop(),this.start()):this.timer_&&this.stop()},goog.Timer.prototype.tick_=function(){if(this.enabled){var e=goog.now()-this.last_;0<e&&e<this.interval_*goog.Timer.intervalScale?this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_-e):(this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null),this.dispatchTick(),this.enabled&&(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now()))}},goog.Timer.prototype.dispatchTick=function(){this.dispatchEvent(goog.Timer.TICK)},goog.Timer.prototype.start=function(){this.enabled=!0,this.timer_||(this.timer_=this.timerObject_.setTimeout(this.boundTick_,this.interval_),this.last_=goog.now())},goog.Timer.prototype.stop=function(){this.enabled=!1,this.timer_&&(this.timerObject_.clearTimeout(this.timer_),this.timer_=null)},goog.Timer.prototype.disposeInternal=function(){goog.Timer.superClass_.disposeInternal.call(this),this.stop(),delete this.timerObject_},goog.Timer.TICK="tick",goog.Timer.callOnce=function(e,t,n){if(goog.isFunction(e))n&&(e=goog.bind(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=goog.bind(e.handleEvent,e)}return Number(t)>goog.Timer.MAX_TIMEOUT_?goog.Timer.INVALID_TIMEOUT_ID_:goog.Timer.defaultTimerObject.setTimeout(e,t||0)},goog.Timer.clear=function(e){goog.Timer.defaultTimerObject.clearTimeout(e)},goog.Timer.promise=function(n,o){var r=null;return new goog.Promise(function(e,t){(r=goog.Timer.callOnce(function(){e(o)},n))==goog.Timer.INVALID_TIMEOUT_ID_&&t(Error("Failed to schedule timer."))}).thenCatch(function(e){throw goog.Timer.clear(r),e})},goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),CAN_USE_CHILDREN_ATTRIBUTE:!goog.userAgent.GECKO&&!goog.userAgent.IE||goog.userAgent.IE&&goog.userAgent.isDocumentModeOrHigher(9)||goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9.1"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),CAN_USE_PARENT_ELEMENT_PROPERTY:goog.userAgent.IE||goog.userAgent.OPERA||goog.userAgent.WEBKIT,INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE,LEGACY_IE_RANGES:goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(e){if(goog.asserts.ENABLE_ASSERTS){var t=goog.dom.asserts.getWindow_(e);void 0!==t.Location&&void 0!==t.Element&&goog.asserts.assert(e&&(e instanceof t.Location||!(e instanceof t.Element)),"Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(e))}return e},goog.dom.asserts.assertIsElementType_=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var n=goog.dom.asserts.getWindow_(e);void 0!==n[t]&&void 0!==n.Location&&void 0!==n.Element&&goog.asserts.assert(e&&(e instanceof n[t]||!(e instanceof n.Location||e instanceof n.Element)),"Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,goog.dom.asserts.debugStringForType_(e))}return e},goog.dom.asserts.assertIsHTMLAnchorElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(e){return goog.dom.asserts.assertIsElementType_(e,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(e){return goog.isObject(e)?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):void 0===e?"undefined":null===e?"null":typeof e},goog.dom.asserts.getWindow_=function(e){return(e=e&&e.ownerDocument)&&(e.defaultView||e.parentWindow)||goog.global},goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(e){return!0===goog.dom.tags.VOID_TAGS_[e]},goog.string.TypedString=function(){},goog.string.Const=function(){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_="",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"},goog.string.Const.unwrap=function(e){return e instanceof goog.string.Const&&e.constructor===goog.string.Const&&e.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?e.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+e+"'"),"type_error:Const")},goog.string.Const.from=function(e){return goog.string.Const.create__googStringSecurityPrivate_(e)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.create__googStringSecurityPrivate_=function(e){var t=new goog.string.Const;return t.stringConstValueWithSecurityContract__googStringSecurityPrivate_=e,t},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html={},goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeScript.fromConstantAndArgs=function(e,t){for(var n=[],o=1;o<arguments.length;o++)n.push(goog.html.SafeScript.stringify_(arguments[o]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(e)+")("+n.join(", ")+");")},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(e){return e instanceof goog.html.SafeScript&&e.constructor===goog.html.SafeScript&&e.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(e){return JSON.stringify(e).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeScript).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=e,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(e){return goog.fs.url.getUrlObject_().createObjectURL(e)},goog.fs.url.revokeObjectUrl=function(e){goog.fs.url.getUrlObject_().revokeObjectURL(e)},goog.fs.url.getUrlObject_=function(){var e=goog.fs.url.findUrlObject_();if(null!=e)return e;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.isDef(goog.global.URL)&&goog.isDef(goog.global.URL.createObjectURL)?goog.global.URL:goog.isDef(goog.global.webkitURL)&&goog.isDef(goog.global.webkitURL.createObjectURL)?goog.global.webkitURL:goog.isDef(goog.global.createObjectURL)?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return null!=goog.fs.url.findUrlObject_()},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||3<=goog.LOCALE.length&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4)),goog.i18n.bidi.Format={LRE:"",RLE:"",PDF:"",LRM:"",RLM:""},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?0<e?goog.i18n.bidi.Dir.LTR:e<0?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z--------",goog.i18n.bidi.rtlChars_="----",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){var n=(void 0===t?goog.i18n.bidi.hasAnyRtl(e):t)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return e.replace(goog.i18n.bidi.bracketGuardTextRe_,n+"$&"+n)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){for(var n=0,o=0,r=!1,i=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),a=0;a<i.length;a++){var s=i[a];goog.i18n.bidi.startsWithRtl(s)?(n++,o++):goog.i18n.bidi.isRequiredLtrRe_.test(s)?r=!0:goog.i18n.bidi.hasAnyLtr(s)?o++:goog.i18n.bidi.hasNumeralsRe_.test(s)&&(r=!0)}return 0==o?r?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:n/o>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t))&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_="",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(e){var t,n=goog.html.TrustedResourceUrl.unwrap(this),o=/\?/.test(n)?"&":"?";for(t in e)for(var r=goog.isArray(e[t])?e[t]:[e[t]],i=0;i<r.length;i++)null!=r[i]&&(n+=o+encodeURIComponent(t)+"="+encodeURIComponent(String(r[i])),o="&");return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(n)},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(e){return e instanceof goog.html.TrustedResourceUrl&&e.constructor===goog.html.TrustedResourceUrl&&e.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(e,o){var r=goog.string.Const.unwrap(e);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);var t=r.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(e,t){if(!Object.prototype.hasOwnProperty.call(o,t))throw Error('Found marker, "'+t+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(o));var n=o[t];return n instanceof goog.string.Const?goog.string.Const.unwrap(n):encodeURIComponent(String(n))});return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank#/i,goog.html.TrustedResourceUrl.formatWithParams=function(e,t,n){return goog.html.TrustedResourceUrl.format(e,t).cloneWithParams(n)},goog.html.TrustedResourceUrl.fromConstant=function(e){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.TrustedResourceUrl.fromConstants=function(e){for(var t="",n=0;n<e.length;n++)t+=goog.string.Const.unwrap(e[n]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(e){var t=new goog.html.TrustedResourceUrl;return t.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=e,t},goog.html.SafeUrl=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(e){return e instanceof goog.html.SafeUrl&&e.constructor===goog.html.SafeUrl&&e.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(e))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp|3gpp2|aac|midi|mp4|mpeg|ogg|x-m4a|x-wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime))$/i,goog.html.SafeUrl.fromBlob=function(e){return e=goog.html.SAFE_MIME_TYPE_PATTERN_.test(e.type)?goog.fs.url.createObjectUrl(e):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.DATA_URL_PATTERN_=/^data:([^;,]*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(e){var t=e.match(goog.html.DATA_URL_PATTERN_);return t=t&&goog.html.SAFE_MIME_TYPE_PATTERN_.test(t[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t?e:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(e){return goog.string.caseInsensitiveStartsWith(e,"tel:")||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e)},goog.html.SafeUrl.fromTrustedResourceUrl=function(e){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(e))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.sanitize=function(e){return e instanceof goog.html.SafeUrl?e:(e=e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SAFE_URL_PATTERN_.test(e)||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(e){return e instanceof goog.html.SafeUrl?e:(e=e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(e))||(e=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(e){var t=new goog.html.SafeUrl;return t.privateDoNotAccessOrElseSafeHtmlWrappedValue_=e,t},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyle.EMPTY:(goog.html.SafeStyle.checkStyle_(e),goog.asserts.assert(goog.string.endsWith(e,";"),"Last character of style string is not ';': "+e),goog.asserts.assert(goog.string.contains(e,":"),"Style string must contain at least one ':', to specify a \"name: value\" pair: "+e),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyle.checkStyle_=function(e){goog.asserts.assert(!/[<>]/.test(e),"Forbidden characters in style string: "+e)},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(e){return e instanceof goog.html.SafeStyle&&e.constructor===goog.html.SafeStyle&&e.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyle).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=e,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(e){var t,n="";for(t in e){if(!/^[-_a-zA-Z0-9]+$/.test(t))throw Error("Name allows only [-_a-zA-Z0-9], got: "+t);var o=e[t];null!=o&&(n+=t+":"+(o=goog.isArray(o)?goog.array.map(o,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(o))+";")}return n?(goog.html.SafeStyle.checkStyle_(n),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n)):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(e){return e instanceof goog.html.SafeUrl?'url("'+goog.html.SafeUrl.unwrap(e).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")':(e=e instanceof goog.string.Const?goog.string.Const.unwrap(e):goog.html.SafeStyle.sanitizePropertyValueString_(String(e)),goog.asserts.assert(!/[{;}]/.test(e),"Value does not allow [{;}]."),e)},goog.html.SafeStyle.sanitizePropertyValueString_=function(e){var t=e.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(t)?goog.html.SafeStyle.hasBalancedQuotes_(e)?goog.html.SafeStyle.sanitizeUrl_(e):(goog.asserts.fail("String value requires balanced quotes, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+e),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(e){for(var t=!0,n=!0,o=0;o<e.length;o++){var r=e.charAt(o);"'"==r&&n?t=!t:'"'==r&&t&&(n=!n)}return t&&n},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_="[-,.\"'%_!# a-zA-Z0-9]",goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=RegExp("\\b(url\\([ \t\n]*)('[ -&(-\\[\\]-~]*'|\"[ !#-\\[\\]-~]*\"|[!#-&*-\\[\\]-~]*)([ \t\n]*\\))","g"),goog.html.SafeStyle.FUNCTIONS_RE_=RegExp("\\b(hsl|hsla|rgb|rgba|matrix|(rotate|scale|translate)(X|Y|Z|3d)?)\\([-0-9a-z.%, ]+\\)","g"),goog.html.SafeStyle.sanitizeUrl_=function(e){return e.replace(goog.html.SafeStyle.URL_RE_,function(e,t,n,o){var r="";return n=n.replace(/^(['"])(.*)\1$/,function(e,t,n){return r=t,n}),e=goog.html.SafeUrl.sanitize(n).getTypedStringValue(),t+r+e+r+o})},goog.html.SafeStyle.concat=function(e){var t="",n=function(e){goog.isArray(e)?goog.array.forEach(e,n):t+=goog.html.SafeStyle.unwrap(e)};return goog.array.forEach(arguments,n),t?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(e,t){if(goog.string.contains(e,"<"))throw Error("Selector does not allow '<', got: "+e);var n=e.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(n))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+e);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(n))throw Error("() and [] in selector must be balanced, got: "+e);return t instanceof goog.html.SafeStyle||(t=goog.html.SafeStyle.create(t)),n=e+"{"+goog.html.SafeStyle.unwrap(t)+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(n)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(e){for(var t={"(":")","[":"]"},n=[],o=0;o<e.length;o++){var r=e[o];if(t[r])n.push(t[r]);else if(goog.object.contains(t,r)&&n.pop()!=r)return!1}return 0==n.length},goog.html.SafeStyleSheet.concat=function(e){var t="",n=function(e){goog.isArray(e)?goog.array.forEach(e,n):t+=goog.html.SafeStyleSheet.unwrap(e)};return goog.array.forEach(arguments,n),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.SafeStyleSheet.fromConstant=function(e){return 0===(e=goog.string.Const.unwrap(e)).length?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.contains(e,"<"),"Forbidden '<' character in style sheet string: "+e),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(e))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(e){return e instanceof goog.html.SafeStyleSheet&&e.constructor===goog.html.SafeStyleSheet&&e.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(e){return(new goog.html.SafeStyleSheet).initSecurityPrivateDoNotAccessOrElse_(e)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=e,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(e){return e instanceof goog.html.SafeHtml&&e.constructor===goog.html.SafeHtml&&e.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?e.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+e+"' of type "+goog.typeOf(e)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(e){if(e instanceof goog.html.SafeHtml)return e;var t=null;return e.implementsGoogI18nBidiDirectionalString&&(t=e.getDirection()),e=e.implementsGoogStringTypedString?e.getTypedStringValue():String(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.htmlEscape(e),t)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.newLineToBr(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(e){return e instanceof goog.html.SafeHtml?e:(e=goog.html.SafeHtml.htmlEscape(e),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.whitespaceEscape(goog.html.SafeHtml.unwrap(e)),e.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(e,t,n){return goog.html.SafeHtml.verifyTagName(String(e)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(e),t,n)},goog.html.SafeHtml.verifyTagName=function(e){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(e))throw Error("Invalid tag name <"+e+">.");if(e.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error("Tag name <"+e+"> is not allowed for SafeHtml.")},goog.html.SafeHtml.createIframe=function(e,t,n,o){e&&goog.html.TrustedResourceUrl.unwrap(e);var r={};return r.src=e||null,r.srcdoc=t&&goog.html.SafeHtml.unwrap(t),e=goog.html.SafeHtml.combineAttributes(r,{sandbox:""},n),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,o)},goog.html.SafeHtml.createSandboxIframe=function(e,t,n,o){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error("The browser does not support sandboxed iframes.");var r={};return r.src=e?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e)):null,r.srcdoc=t||null,r.sandbox="",e=goog.html.SafeHtml.combineAttributes(r,{},n),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",e,o)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(e,t){goog.html.TrustedResourceUrl.unwrap(e);var n=goog.html.SafeHtml.combineAttributes({src:e},{},t);return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",n)},goog.html.SafeHtml.createScript=function(e,t){for(var n in t){var o=n.toLowerCase();if("language"==o||"src"==o||"text"==o||"type"==o)throw Error('Cannot set "'+o+'" attribute')}for(n="",e=goog.array.concat(e),o=0;o<e.length;o++)n+=goog.html.SafeScript.unwrap(e[o]);return n=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",t,n)},goog.html.SafeHtml.createStyle=function(e,t){var n=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},t),o="";e=goog.array.concat(e);for(var r=0;r<e.length;r++)o+=goog.html.SafeStyleSheet.unwrap(e[r]);return o=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(o,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",n,o)},goog.html.SafeHtml.createMetaRefresh=function(e,t){var n=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(e));return(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.contains(n,";")&&(n="'"+n.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(t||0)+"; url="+n})},goog.html.SafeHtml.getAttrNameAndValue_=function(e,t,n){if(n instanceof goog.string.Const)n=goog.string.Const.unwrap(n);else if("style"==t.toLowerCase())n=goog.html.SafeHtml.getStyleValue_(n);else{if(/^on/i.test(t))throw Error('Attribute "'+t+'" requires goog.string.Const value, "'+n+'" given.');if(t.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(n instanceof goog.html.TrustedResourceUrl)n=goog.html.TrustedResourceUrl.unwrap(n);else if(n instanceof goog.html.SafeUrl)n=goog.html.SafeUrl.unwrap(n);else{if(!goog.isString(n))throw Error('Attribute "'+t+'" on tag "'+e+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+n+'" given.');n=goog.html.SafeUrl.sanitize(n).getTypedStringValue()}}return n.implementsGoogStringTypedString&&(n=n.getTypedStringValue()),goog.asserts.assert(goog.isString(n)||goog.isNumber(n),"String or number value expected, got "+typeof n+" with value: "+n),t+'="'+goog.string.htmlEscape(String(n))+'"'},goog.html.SafeHtml.getStyleValue_=function(e){if(!goog.isObject(e))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof e+" given: "+e);return e instanceof goog.html.SafeStyle||(e=goog.html.SafeStyle.create(e)),goog.html.SafeStyle.unwrap(e)},goog.html.SafeHtml.createWithDir=function(e,t,n,o){return(t=goog.html.SafeHtml.create(t,n,o)).dir_=e,t},goog.html.SafeHtml.concat=function(e){var t=goog.i18n.bidi.Dir.NEUTRAL,n="",o=function(e){goog.isArray(e)?goog.array.forEach(e,o):(e=goog.html.SafeHtml.htmlEscape(e),n+=goog.html.SafeHtml.unwrap(e),e=e.getDirection(),t==goog.i18n.bidi.Dir.NEUTRAL?t=e:e!=goog.i18n.bidi.Dir.NEUTRAL&&t!=e&&(t=null))};return goog.array.forEach(arguments,o),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,t)},goog.html.SafeHtml.concatWithDir=function(e,t){var n=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return n.dir_=e,n},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(e,t){return(new goog.html.SafeHtml).initSecurityPrivateDoNotAccessOrElse_(e,t)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(e,t){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=e,this.dir_=t,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(e,t,n){var o=null,r="<"+e+goog.html.SafeHtml.stringifyAttributes(e,t);return goog.isDefAndNotNull(n)?goog.isArray(n)||(n=[n]):n=[],goog.dom.tags.isVoidTag(e.toLowerCase())?(goog.asserts.assert(!n.length,"Void tag <"+e+"> does not allow content."),r+=">"):(o=goog.html.SafeHtml.concat(n),r+=">"+goog.html.SafeHtml.unwrap(o)+"</"+e+">",o=o.getDirection()),(e=t&&t.dir)&&(o=/^(ltr|rtl|auto)$/i.test(e)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(r,o)},goog.html.SafeHtml.stringifyAttributes=function(e,t){var n="";if(t)for(var o in t){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(o))throw Error('Invalid attribute name "'+o+'".');var r=t[o];goog.isDefAndNotNull(r)&&(n+=" "+goog.html.SafeHtml.getAttrNameAndValue_(e,o,r))}return n},goog.html.SafeHtml.combineAttributes=function(e,t,n){var o,r={};for(o in e)goog.asserts.assert(o.toLowerCase()==o,"Must be lower case"),r[o]=e[o];for(o in t)goog.asserts.assert(o.toLowerCase()==o,"Must be lower case"),r[o]=t[o];for(o in n){var i=o.toLowerCase();if(i in e)throw Error('Cannot override "'+i+'" attribute, got "'+o+'" with value "'+n[o]+'"');i in t&&delete r[i],r[o]=n[o]}return r},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(e,t,n){e.insertAdjacentHTML(t,goog.html.SafeHtml.unwrap(n))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.setInnerHtml=function(e,t){if(goog.asserts.ENABLE_ASSERTS){var n=e.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[n])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+e.tagName+".")}e.innerHTML=goog.html.SafeHtml.unwrap(t)},goog.dom.safe.setOuterHtml=function(e,t){e.outerHTML=goog.html.SafeHtml.unwrap(t)},goog.dom.safe.setFormElementAction=function(e,t){var n=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t);goog.dom.asserts.assertIsHTMLFormElement(e).action=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setButtonFormAction=function(e,t){var n=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t);goog.dom.asserts.assertIsHTMLButtonElement(e).formAction=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setInputFormAction=function(e,t){var n=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t);goog.dom.asserts.assertIsHTMLInputElement(e).formAction=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setStyle=function(e,t){e.style.cssText=goog.html.SafeStyle.unwrap(t)},goog.dom.safe.documentWrite=function(e,t){e.write(goog.html.SafeHtml.unwrap(t))},goog.dom.safe.setAnchorHref=function(e,t){goog.dom.asserts.assertIsHTMLAnchorElement(e);var n=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t);e.href=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setImageSrc=function(e,t){goog.dom.asserts.assertIsHTMLImageElement(e);var n=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t);e.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setVideoSrc=function(e,t){goog.dom.asserts.assertIsHTMLVideoElement(e);var n=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t);e.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setEmbedSrc=function(e,t){goog.dom.asserts.assertIsHTMLEmbedElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setFrameSrc=function(e,t){goog.dom.asserts.assertIsHTMLFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setIframeSrcdoc=function(e,t){goog.dom.asserts.assertIsHTMLIFrameElement(e),e.srcdoc=goog.html.SafeHtml.unwrap(t)},goog.dom.safe.setLinkHrefAndRel=function(e,t,n){goog.dom.asserts.assertIsHTMLLinkElement(e),e.rel=n,goog.string.caseInsensitiveContains(n,"stylesheet")?(goog.asserts.assert(t instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),e.href=goog.html.TrustedResourceUrl.unwrap(t)):e.href=t instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(t):t instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(t):goog.html.SafeUrl.sanitizeAssertUnchanged(t).getTypedStringValue()},goog.dom.safe.setObjectData=function(e,t){goog.dom.asserts.assertIsHTMLObjectElement(e),e.data=goog.html.TrustedResourceUrl.unwrap(t)},goog.dom.safe.setScriptSrc=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.src=goog.html.TrustedResourceUrl.unwrap(t);var n=goog.getScriptNonce();n&&(e.nonce=n)},goog.dom.safe.setScriptContent=function(e,t){goog.dom.asserts.assertIsHTMLScriptElement(e),e.text=goog.html.SafeScript.unwrap(t);var n=goog.getScriptNonce();n&&(e.nonce=n)},goog.dom.safe.setLocationHref=function(e,t){goog.dom.asserts.assertIsLocation(e);var n=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t);e.href=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.replaceLocation=function(e,t){goog.dom.asserts.assertIsLocation(e);var n=t instanceof goog.html.SafeUrl?t:goog.html.SafeUrl.sanitizeAssertUnchanged(t);e.replace(goog.html.SafeUrl.unwrap(n))},goog.dom.safe.openInWindow=function(e,t,n,o,r){return e=e instanceof goog.html.SafeUrl?e:goog.html.SafeUrl.sanitizeAssertUnchanged(e),(t||window).open(goog.html.SafeUrl.unwrap(e),n?goog.string.Const.unwrap(n):"",o,r)},goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(e,t,n){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(t,n||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(t)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(e,t){return goog.asserts.assertString(goog.string.Const.unwrap(e),"must provide justification"),goog.asserts.assert(!goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(e)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(t)},goog.math.Size=function(e,t){this.width=e,this.height=t},goog.math.Size.equals=function(e,t){return e==t||!(!e||!t)&&(e.width==t.width&&e.height==t.height)},goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)},goog.DEBUG&&(goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"}),goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)},goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)},goog.math.Size.prototype.area=function(){return this.width*this.height},goog.math.Size.prototype.perimeter=function(){return 2*(this.width+this.height)},goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height},goog.math.Size.prototype.isEmpty=function(){return!this.area()},goog.math.Size.prototype.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},goog.math.Size.prototype.fitsInside=function(e){return this.width<=e.width&&this.height<=e.height},goog.math.Size.prototype.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},goog.math.Size.prototype.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this},goog.math.Size.prototype.scale=function(e,t){var n=goog.isNumber(t)?t:e;return this.width*=e,this.height*=n,this},goog.math.Size.prototype.scaleToCover=function(e){return e=this.aspectRatio()<=e.aspectRatio()?e.width/this.width:e.height/this.height,this.scale(e)},goog.math.Size.prototype.scaleToFit=function(e){return e=this.aspectRatio()>e.aspectRatio()?e.width/this.width:e.height/this.height,this.scale(e)},goog.dom.ASSUME_QUIRKS_MODE=!1,goog.dom.ASSUME_STANDARDS_MODE=!1,goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE,goog.dom.getDomHelper=function(e){return e?new goog.dom.DomHelper(goog.dom.getOwnerDocument(e)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)},goog.dom.getDocument=function(){return document},goog.dom.getElement=function(e){return goog.dom.getElementHelper_(document,e)},goog.dom.getElementHelper_=function(e,t){return goog.isString(t)?e.getElementById(t):t},goog.dom.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(document,e)},goog.dom.getRequiredElementHelper_=function(e,t){goog.asserts.assertString(t);var n=goog.dom.getElementHelper_(e,t);return goog.asserts.assertElement(n,"No element found with id: "+t)},goog.dom.$=goog.dom.getElement,goog.dom.getElementsByTagName=function(e,t){return(t||document).getElementsByTagName(String(e))},goog.dom.getElementsByTagNameAndClass=function(e,t,n){return goog.dom.getElementsByTagNameAndClass_(document,e,t,n)},goog.dom.getElementByTagNameAndClass=function(e,t,n){return goog.dom.getElementByTagNameAndClass_(document,e,t,n)},goog.dom.getElementsByClass=function(e,t){var n=t||document;return goog.dom.canUseQuerySelector_(n)?n.querySelectorAll("."+e):goog.dom.getElementsByTagNameAndClass_(document,"*",e,t)},goog.dom.getElementByClass=function(e,t){var n=t||document;return(n.getElementsByClassName?n.getElementsByClassName(e)[0]:goog.dom.getElementByTagNameAndClass_(document,"*",e,t))||null},goog.dom.getRequiredElementByClass=function(e,t){var n=goog.dom.getElementByClass(e,t);return goog.asserts.assert(n,"No element found with className: "+e)},goog.dom.canUseQuerySelector_=function(e){return!(!e.querySelectorAll||!e.querySelector)},goog.dom.getElementsByTagNameAndClass_=function(e,t,n,o){if(e=o||e,t=t&&"*"!=t?String(t).toUpperCase():"",goog.dom.canUseQuerySelector_(e)&&(t||n))return e.querySelectorAll(t+(n?"."+n:""));if(n&&e.getElementsByClassName){if(e=e.getElementsByClassName(n),t){o={};for(var r,i=0,a=0;r=e[a];a++)t==r.nodeName&&(o[i++]=r);return o.length=i,o}return e}if(e=e.getElementsByTagName(t||"*"),n){for(o={},a=i=0;r=e[a];a++)"function"==typeof(t=r.className).split&&goog.array.contains(t.split(/\s+/),n)&&(o[i++]=r);return o.length=i,o}return e},goog.dom.getElementByTagNameAndClass_=function(e,t,n,o){var r=o||e,i=t&&"*"!=t?String(t).toUpperCase():"";return goog.dom.canUseQuerySelector_(r)&&(i||n)?r.querySelector(i+(n?"."+n:"")):goog.dom.getElementsByTagNameAndClass_(e,t,n,o)[0]||null},goog.dom.$$=goog.dom.getElementsByTagNameAndClass,goog.dom.setProperties=function(n,e){goog.object.forEach(e,function(e,t){e&&e.implementsGoogStringTypedString&&(e=e.getTypedStringValue()),"style"==t?n.style.cssText=e:"class"==t?n.className=e:"for"==t?n.htmlFor=e:goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(t)?n.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[t],e):goog.string.startsWith(t,"aria-")||goog.string.startsWith(t,"data-")?n.setAttribute(t,e):n[t]=e})},goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},goog.dom.getViewportSize=function(e){return goog.dom.getViewportSize_(e||window)},goog.dom.getViewportSize_=function(e){return e=e.document,e=goog.dom.isCss1CompatMode_(e)?e.documentElement:e.body,new goog.math.Size(e.clientWidth,e.clientHeight)},goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)},goog.dom.getDocumentHeightForWindow=function(e){return goog.dom.getDocumentHeight_(e)},goog.dom.getDocumentHeight_=function(e){var t=e.document,n=0;if(t){n=t.body;var o=t.documentElement;if(!o||!n)return 0;if(e=goog.dom.getViewportSize_(e).height,goog.dom.isCss1CompatMode_(t)&&o.scrollHeight)n=o.scrollHeight!=e?o.scrollHeight:o.offsetHeight;else{t=o.scrollHeight;var r=o.offsetHeight;o.clientHeight!=r&&(t=n.scrollHeight,r=n.offsetHeight),n=e<t?r<t?t:r:t<r?t:r}}return n},goog.dom.getPageScroll=function(e){return goog.dom.getDomHelper((e||goog.global||window).document).getDocumentScroll()},goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)},goog.dom.getDocumentScroll_=function(e){var t=goog.dom.getDocumentScrollElement_(e);return e=goog.dom.getWindow_(e),goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("10")&&e.pageYOffset!=t.scrollTop?new goog.math.Coordinate(t.scrollLeft,t.scrollTop):new goog.math.Coordinate(e.pageXOffset||t.scrollLeft,e.pageYOffset||t.scrollTop)},goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)},goog.dom.getDocumentScrollElement_=function(e){return e.scrollingElement?e.scrollingElement:!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(e)?e.documentElement:e.body||e.documentElement},goog.dom.getWindow=function(e){return e?goog.dom.getWindow_(e):window},goog.dom.getWindow_=function(e){return e.parentWindow||e.defaultView},goog.dom.createDom=function(e,t,n){return goog.dom.createDom_(document,arguments)},goog.dom.createDom_=function(e,t){var n=String(t[0]),o=t[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&o&&(o.name||o.type)){if(n=["<",n],o.name&&n.push(' name="',goog.string.htmlEscape(o.name),'"'),o.type){n.push(' type="',goog.string.htmlEscape(o.type),'"');var r={};goog.object.extend(r,o),delete r.type,o=r}n.push(">"),n=n.join("")}return n=e.createElement(n),o&&(goog.isString(o)?n.className=o:goog.isArray(o)?n.className=o.join(" "):goog.dom.setProperties(n,o)),2<t.length&&goog.dom.append_(e,n,t,2),n},goog.dom.append_=function(t,n,e,o){function r(e){e&&n.appendChild(goog.isString(e)?t.createTextNode(e):e)}for(;o<e.length;o++){var i=e[o];goog.isArrayLike(i)&&!goog.dom.isNodeLike(i)?goog.array.forEach(goog.dom.isNodeList(i)?goog.array.toArray(i):i,r):r(i)}},goog.dom.$dom=goog.dom.createDom,goog.dom.createElement=function(e){return goog.dom.createElement_(document,e)},goog.dom.createElement_=function(e,t){return e.createElement(String(t))},goog.dom.createTextNode=function(e){return document.createTextNode(String(e))},goog.dom.createTable=function(e,t,n){return goog.dom.createTable_(document,e,t,!!n)},goog.dom.createTable_=function(e,t,n,o){for(var r=goog.dom.createElement_(e,"TABLE"),i=r.appendChild(goog.dom.createElement_(e,"TBODY")),a=0;a<t;a++){for(var s=goog.dom.createElement_(e,"TR"),l=0;l<n;l++){var c=goog.dom.createElement_(e,"TD");o&&goog.dom.setTextContent(c,goog.string.Unicode.NBSP),s.appendChild(c)}i.appendChild(s)}return r},goog.dom.constHtmlToNode=function(e){var t=goog.array.map(arguments,goog.string.Const.unwrap);return t=goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Constant HTML string, that gets turned into a Node later, so it will be automatically balanced."),t.join("")),goog.dom.safeHtmlToNode(t)},goog.dom.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(document,e)},goog.dom.safeHtmlToNode_=function(e,t){var n=goog.dom.createElement_(e,"DIV");return goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT?(goog.dom.safe.setInnerHtml(n,goog.html.SafeHtml.concat(goog.html.SafeHtml.BR,t)),n.removeChild(n.firstChild)):goog.dom.safe.setInnerHtml(n,t),goog.dom.childrenToNode_(e,n)},goog.dom.childrenToNode_=function(e,t){if(1==t.childNodes.length)return t.removeChild(t.firstChild);for(var n=e.createDocumentFragment();t.firstChild;)n.appendChild(t.firstChild);return n},goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)},goog.dom.isCss1CompatMode_=function(e){return goog.dom.COMPAT_MODE_KNOWN_?goog.dom.ASSUME_STANDARDS_MODE:"CSS1Compat"==e.compatMode},goog.dom.canHaveChildren=function(e){if(e.nodeType!=goog.dom.NodeType.ELEMENT)return!1;switch(e.tagName){case"APPLET":case"AREA":case"BASE":case"BR":case"COL":case"COMMAND":case"EMBED":case"FRAME":case"HR":case"IMG":case"INPUT":case"IFRAME":case"ISINDEX":case"KEYGEN":case"LINK":case"NOFRAMES":case"NOSCRIPT":case"META":case"OBJECT":case"PARAM":case"SCRIPT":case"SOURCE":case"STYLE":case"TRACK":case"WBR":return!1}return!0},goog.dom.appendChild=function(e,t){e.appendChild(t)},goog.dom.append=function(e,t){goog.dom.append_(goog.dom.getOwnerDocument(e),e,arguments,1)},goog.dom.removeChildren=function(e){for(var t;t=e.firstChild;)e.removeChild(t)},goog.dom.insertSiblingBefore=function(e,t){t.parentNode&&t.parentNode.insertBefore(e,t)},goog.dom.insertSiblingAfter=function(e,t){t.parentNode&&t.parentNode.insertBefore(e,t.nextSibling)},goog.dom.insertChildAt=function(e,t,n){e.insertBefore(t,e.childNodes[n]||null)},goog.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},goog.dom.replaceNode=function(e,t){var n=t.parentNode;n&&n.replaceChild(e,t)},goog.dom.flattenElement=function(e){var t,n=e.parentNode;if(n&&n.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT){if(e.removeNode)return e.removeNode(!1);for(;t=e.firstChild;)n.insertBefore(t,e);return goog.dom.removeNode(e)}},goog.dom.getChildren=function(e){return goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE&&null!=e.children?e.children:goog.array.filter(e.childNodes,function(e){return e.nodeType==goog.dom.NodeType.ELEMENT})},goog.dom.getFirstElementChild=function(e){return goog.isDef(e.firstElementChild)?e.firstElementChild:goog.dom.getNextElementNode_(e.firstChild,!0)},goog.dom.getLastElementChild=function(e){return goog.isDef(e.lastElementChild)?e.lastElementChild:goog.dom.getNextElementNode_(e.lastChild,!1)},goog.dom.getNextElementSibling=function(e){return goog.isDef(e.nextElementSibling)?e.nextElementSibling:goog.dom.getNextElementNode_(e.nextSibling,!0)},goog.dom.getPreviousElementSibling=function(e){return goog.isDef(e.previousElementSibling)?e.previousElementSibling:goog.dom.getNextElementNode_(e.previousSibling,!1)},goog.dom.getNextElementNode_=function(e,t){for(;e&&e.nodeType!=goog.dom.NodeType.ELEMENT;)e=t?e.nextSibling:e.previousSibling;return e},goog.dom.getNextNode=function(e){if(!e)return null;if(e.firstChild)return e.firstChild;for(;e&&!e.nextSibling;)e=e.parentNode;return e?e.nextSibling:null},goog.dom.getPreviousNode=function(e){if(!e)return null;if(!e.previousSibling)return e.parentNode;for(e=e.previousSibling;e&&e.lastChild;)e=e.lastChild;return e},goog.dom.isNodeLike=function(e){return goog.isObject(e)&&0<e.nodeType},goog.dom.isElement=function(e){return goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT},goog.dom.isWindow=function(e){return goog.isObject(e)&&e.window==e},goog.dom.getParentElement=function(e){var t;return!goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("9")&&!goog.userAgent.isVersionOrHigher("10")&&goog.global.SVGElement&&e instanceof goog.global.SVGElement||!(t=e.parentElement)?(t=e.parentNode,goog.dom.isElement(t)?t:null):t},goog.dom.contains=function(e,t){if(!e||!t)return!1;if(e.contains&&t.nodeType==goog.dom.NodeType.ELEMENT)return e==t||e.contains(t);if(void 0!==e.compareDocumentPosition)return e==t||!!(16&e.compareDocumentPosition(t));for(;t&&e!=t;)t=t.parentNode;return t==e},goog.dom.compareNodeOrder=function(e,t){if(e==t)return 0;if(e.compareDocumentPosition)return 2&e.compareDocumentPosition(t)?1:-1;if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){if(e.nodeType==goog.dom.NodeType.DOCUMENT)return-1;if(t.nodeType==goog.dom.NodeType.DOCUMENT)return 1}if("sourceIndex"in e||e.parentNode&&"sourceIndex"in e.parentNode){var n=e.nodeType==goog.dom.NodeType.ELEMENT,o=t.nodeType==goog.dom.NodeType.ELEMENT;if(n&&o)return e.sourceIndex-t.sourceIndex;var r=e.parentNode,i=t.parentNode;return r==i?goog.dom.compareSiblingOrder_(e,t):!n&&goog.dom.contains(r,t)?-1*goog.dom.compareParentsDescendantNodeIe_(e,t):!o&&goog.dom.contains(i,e)?goog.dom.compareParentsDescendantNodeIe_(t,e):(n?e.sourceIndex:r.sourceIndex)-(o?t.sourceIndex:i.sourceIndex)}return(n=(o=goog.dom.getOwnerDocument(e)).createRange()).selectNode(e),n.collapse(!0),(o=o.createRange()).selectNode(t),o.collapse(!0),n.compareBoundaryPoints(goog.global.Range.START_TO_END,o)},goog.dom.compareParentsDescendantNodeIe_=function(e,t){var n=e.parentNode;if(n==t)return-1;for(var o=t;o.parentNode!=n;)o=o.parentNode;return goog.dom.compareSiblingOrder_(o,e)},goog.dom.compareSiblingOrder_=function(e,t){for(var n=t;n=n.previousSibling;)if(n==e)return-1;return 1},goog.dom.findCommonAncestor=function(e){var t,n=arguments.length;if(!n)return null;if(1==n)return e;var o=[],r=1/0;for(t=0;t<n;t++){for(var i=[],a=arguments[t];a;)i.unshift(a),a=a.parentNode;o.push(i),r=Math.min(r,i.length)}for(i=null,t=0;t<r;t++){a=o[0][t];for(var s=1;s<n;s++)if(a!=o[s][t])return i;i=a}return i},goog.dom.getOwnerDocument=function(e){return goog.asserts.assert(e,"Node cannot be null or undefined."),e.nodeType==goog.dom.NodeType.DOCUMENT?e:e.ownerDocument||e.document},goog.dom.getFrameContentDocument=function(e){return e.contentDocument||e.contentWindow.document},goog.dom.getFrameContentWindow=function(e){try{return e.contentWindow||(e.contentDocument?goog.dom.getWindow(e.contentDocument):null)}catch(e){}return null},goog.dom.setTextContent=function(e,t){if(goog.asserts.assert(null!=e,"goog.dom.setTextContent expects a non-null value for node"),"textContent"in e)e.textContent=t;else if(e.nodeType==goog.dom.NodeType.TEXT)e.data=String(t);else if(e.firstChild&&e.firstChild.nodeType==goog.dom.NodeType.TEXT){for(;e.lastChild!=e.firstChild;)e.removeChild(e.lastChild);e.firstChild.data=String(t)}else{goog.dom.removeChildren(e);var n=goog.dom.getOwnerDocument(e);e.appendChild(n.createTextNode(String(t)))}},goog.dom.getOuterHtml=function(e){if(goog.asserts.assert(null!==e,"goog.dom.getOuterHtml expects a non-null value for element"),"outerHTML"in e)return e.outerHTML;var t=goog.dom.getOwnerDocument(e);return(t=goog.dom.createElement_(t,"DIV")).appendChild(e.cloneNode(!0)),t.innerHTML},goog.dom.findNode=function(e,t){var n=[];return goog.dom.findNodes_(e,t,n,!0)?n[0]:void 0},goog.dom.findNodes=function(e,t){var n=[];return goog.dom.findNodes_(e,t,n,!1),n},goog.dom.findNodes_=function(e,t,n,o){if(null!=e)for(e=e.firstChild;e;){if(t(e)&&(n.push(e),o)||goog.dom.findNodes_(e,t,n,o))return!0;e=e.nextSibling}return!1},goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"},goog.dom.isFocusableTabIndex=function(e){return goog.dom.hasSpecifiedTabIndex_(e)&&goog.dom.isTabIndexFocusable_(e)},goog.dom.setFocusableTabIndex=function(e,t){t?e.tabIndex=0:(e.tabIndex=-1,e.removeAttribute("tabIndex"))},goog.dom.isFocusable=function(e){var t;return(t=goog.dom.nativelySupportsFocus_(e)?!e.disabled&&(!goog.dom.hasSpecifiedTabIndex_(e)||goog.dom.isTabIndexFocusable_(e)):goog.dom.isFocusableTabIndex(e))&&goog.userAgent.IE?goog.dom.hasNonZeroBoundingRect_(e):t},goog.dom.hasSpecifiedTabIndex_=function(e){return goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9")?(e=e.getAttributeNode("tabindex"),goog.isDefAndNotNull(e)&&e.specified):e.hasAttribute("tabindex")},goog.dom.isTabIndexFocusable_=function(e){return e=e.tabIndex,goog.isNumber(e)&&0<=e&&e<32768},goog.dom.nativelySupportsFocus_=function(e){return"A"==e.tagName||"INPUT"==e.tagName||"TEXTAREA"==e.tagName||"SELECT"==e.tagName||"BUTTON"==e.tagName},goog.dom.hasNonZeroBoundingRect_=function(e){return e=!goog.isFunction(e.getBoundingClientRect)||goog.userAgent.IE&&null==e.parentElement?{height:e.offsetHeight,width:e.offsetWidth}:e.getBoundingClientRect(),goog.isDefAndNotNull(e)&&0<e.height&&0<e.width},goog.dom.getTextContent=function(e){if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&null!==e&&"innerText"in e)e=goog.string.canonicalizeNewlines(e.innerText);else{var t=[];goog.dom.getTextContent_(e,t,!0),e=t.join("")}return e=(e=e.replace(/ \xAD /g," ").replace(/\xAD/g,"")).replace(/\u200B/g,""),goog.dom.BrowserFeature.CAN_USE_INNER_TEXT||(e=e.replace(/ +/g," "))," "!=e&&(e=e.replace(/^\s*/,"")),e},goog.dom.getRawTextContent=function(e){var t=[];return goog.dom.getTextContent_(e,t,!1),t.join("")},goog.dom.getTextContent_=function(e,t,n){if(!(e.nodeName in goog.dom.TAGS_TO_IGNORE_))if(e.nodeType==goog.dom.NodeType.TEXT)n?t.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(e.nodeValue);else if(e.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)t.push(goog.dom.PREDEFINED_TAG_VALUES_[e.nodeName]);else for(e=e.firstChild;e;)goog.dom.getTextContent_(e,t,n),e=e.nextSibling},goog.dom.getNodeTextLength=function(e){return goog.dom.getTextContent(e).length},goog.dom.getNodeTextOffset=function(e,t){for(var n=t||goog.dom.getOwnerDocument(e).body,o=[];e&&e!=n;){for(var r=e;r=r.previousSibling;)o.unshift(goog.dom.getTextContent(r));e=e.parentNode}return goog.string.trimLeft(o.join("")).replace(/ +/g," ").length},goog.dom.getNodeAtOffset=function(e,t,n){e=[e];for(var o=0,r=null;0<e.length&&o<t;)if(!((r=e.pop()).nodeName in goog.dom.TAGS_TO_IGNORE_))if(r.nodeType==goog.dom.NodeType.TEXT){var i=r.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");o+=i.length}else if(r.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)o+=goog.dom.PREDEFINED_TAG_VALUES_[r.nodeName].length;else for(i=r.childNodes.length-1;0<=i;i--)e.push(r.childNodes[i]);return goog.isObject(n)&&(n.remainder=r?r.nodeValue.length+t-o-1:0,n.node=r),r},goog.dom.isNodeList=function(e){if(e&&"number"==typeof e.length){if(goog.isObject(e))return"function"==typeof e.item||"string"==typeof e.item;if(goog.isFunction(e))return"function"==typeof e.item}return!1},goog.dom.getAncestorByTagNameAndClass=function(e,t,n,o){if(!t&&!n)return null;var r=t?String(t).toUpperCase():null;return goog.dom.getAncestor(e,function(e){return(!r||e.nodeName==r)&&(!n||goog.isString(e.className)&&goog.array.contains(e.className.split(/\s+/),n))},!0,o)},goog.dom.getAncestorByClass=function(e,t,n){return goog.dom.getAncestorByTagNameAndClass(e,null,t,n)},goog.dom.getAncestor=function(e,t,n,o){for(e&&!n&&(e=e.parentNode),n=0;e&&(null==o||n<=o);){if(goog.asserts.assert("parentNode"!=e.name),t(e))return e;e=e.parentNode,n++}return null},goog.dom.getActiveElement=function(e){try{var t=e&&e.activeElement;return t&&t.nodeName?t:null}catch(e){return null}},goog.dom.getPixelRatio=function(){var e=goog.dom.getWindow();return goog.isDef(e.devicePixelRatio)?e.devicePixelRatio:e.matchMedia?goog.dom.matchesPixelRatio_(3)||goog.dom.matchesPixelRatio_(2)||goog.dom.matchesPixelRatio_(1.5)||goog.dom.matchesPixelRatio_(1)||.75:1},goog.dom.matchesPixelRatio_=function(e){return goog.dom.getWindow().matchMedia("(min-resolution: "+e+"dppx),(min--moz-device-pixel-ratio: "+e+"),(min-resolution: "+96*e+"dpi)").matches?e:0},goog.dom.getCanvasContext2D=function(e){return e.getContext("2d")},goog.dom.DomHelper=function(e){this.document_=e||goog.global.document||document},goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper,goog.dom.DomHelper.prototype.setDocument=function(e){this.document_=e},goog.dom.DomHelper.prototype.getDocument=function(){return this.document_},goog.dom.DomHelper.prototype.getElement=function(e){return goog.dom.getElementHelper_(this.document_,e)},goog.dom.DomHelper.prototype.getRequiredElement=function(e){return goog.dom.getRequiredElementHelper_(this.document_,e)},goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement,goog.dom.DomHelper.prototype.getElementsByTagName=function(e,t){return(t||this.document_).getElementsByTagName(String(e))},goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(e,t,n){return goog.dom.getElementsByTagNameAndClass_(this.document_,e,t,n)},goog.dom.DomHelper.prototype.getElementByTagNameAndClass=function(e,t,n){return goog.dom.getElementByTagNameAndClass_(this.document_,e,t,n)},goog.dom.DomHelper.prototype.getElementsByClass=function(e,t){return goog.dom.getElementsByClass(e,t||this.document_)},goog.dom.DomHelper.prototype.getElementByClass=function(e,t){return goog.dom.getElementByClass(e,t||this.document_)},goog.dom.DomHelper.prototype.getRequiredElementByClass=function(e,t){return goog.dom.getRequiredElementByClass(e,t||this.document_)},goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass,goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties,goog.dom.DomHelper.prototype.getViewportSize=function(e){return goog.dom.getViewportSize(e||this.getWindow())},goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())},goog.dom.DomHelper.prototype.createDom=function(e,t,n){return goog.dom.createDom_(this.document_,arguments)},goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom,goog.dom.DomHelper.prototype.createElement=function(e){return goog.dom.createElement_(this.document_,e)},goog.dom.DomHelper.prototype.createTextNode=function(e){return this.document_.createTextNode(String(e))},goog.dom.DomHelper.prototype.createTable=function(e,t,n){return goog.dom.createTable_(this.document_,e,t,!!n)},goog.dom.DomHelper.prototype.safeHtmlToNode=function(e){return goog.dom.safeHtmlToNode_(this.document_,e)},goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)},goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)},goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)},goog.dom.DomHelper.prototype.getActiveElement=function(e){return goog.dom.getActiveElement(e||this.document_)},goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild,goog.dom.DomHelper.prototype.append=goog.dom.append,goog.dom.DomHelper.prototype.canHaveChildren=goog.dom.canHaveChildren,goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren,goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore,goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter,goog.dom.DomHelper.prototype.insertChildAt=goog.dom.insertChildAt,goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode,goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode,goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement,goog.dom.DomHelper.prototype.getChildren=goog.dom.getChildren,goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild,goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild,goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling,goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling,goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode,goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode,goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike,goog.dom.DomHelper.prototype.isElement=goog.dom.isElement,goog.dom.DomHelper.prototype.isWindow=goog.dom.isWindow,goog.dom.DomHelper.prototype.getParentElement=goog.dom.getParentElement,goog.dom.DomHelper.prototype.contains=goog.dom.contains,goog.dom.DomHelper.prototype.compareNodeOrder=goog.dom.compareNodeOrder,goog.dom.DomHelper.prototype.findCommonAncestor=goog.dom.findCommonAncestor,goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument,goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument,goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow,goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent,goog.dom.DomHelper.prototype.getOuterHtml=goog.dom.getOuterHtml,goog.dom.DomHelper.prototype.findNode=goog.dom.findNode,goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes,goog.dom.DomHelper.prototype.isFocusableTabIndex=goog.dom.isFocusableTabIndex,goog.dom.DomHelper.prototype.setFocusableTabIndex=goog.dom.setFocusableTabIndex,goog.dom.DomHelper.prototype.isFocusable=goog.dom.isFocusable,goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent,goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength,goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset,goog.dom.DomHelper.prototype.getNodeAtOffset=goog.dom.getNodeAtOffset,goog.dom.DomHelper.prototype.isNodeList=goog.dom.isNodeList,goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass,goog.dom.DomHelper.prototype.getAncestorByClass=goog.dom.getAncestorByClass,goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor,goog.dom.DomHelper.prototype.getCanvasContext2D=goog.dom.getCanvasContext2D,goog.color={},goog.color.names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},goog.color.parse=function(e){var t={};e=String(e);var n=goog.color.prependHashIfNecessaryHelper(e);if(goog.color.isValidHexColor_(n))return t.hex=goog.color.normalizeHex(n),t.type="hex",t;if((n=goog.color.isValidRgbColor_(e)).length)return t.hex=goog.color.rgbArrayToHex(n),t.type="rgb",t;if(goog.color.names&&(n=goog.color.names[e.toLowerCase()]))return t.hex=n,t.type="named",t;throw Error(e+" is not a valid color string")},goog.color.isValidColor=function(e){var t=goog.color.prependHashIfNecessaryHelper(e);return!!(goog.color.isValidHexColor_(t)||goog.color.isValidRgbColor_(e).length||goog.color.names&&goog.color.names[e.toLowerCase()])},goog.color.parseRgb=function(e){var t=goog.color.isValidRgbColor_(e);if(!t.length)throw Error(e+" is not a valid RGB color");return t},goog.color.hexToRgbStyle=function(e){return goog.color.rgbStyle_(goog.color.hexToRgb(e))},goog.color.hexTripletRe_=/#(.)(.)(.)/,goog.color.normalizeHex=function(e){if(!goog.color.isValidHexColor_(e))throw Error("'"+e+"' is not a valid hex color");return 4==e.length&&(e=e.replace(goog.color.hexTripletRe_,"#$1$1$2$2$3$3")),e.toLowerCase()},goog.color.hexToRgb=function(e){return e=goog.color.normalizeHex(e),[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),e=parseInt(e.substr(5,2),16)]},goog.color.rgbToHex=function(e,t,n){if(e=Number(e),t=Number(t),n=Number(n),e!=(255&e)||t!=(255&t)||n!=(255&n))throw Error('"('+e+","+t+","+n+'") is not a valid RGB color');return"#"+(e=goog.color.prependZeroIfNecessaryHelper(e.toString(16)))+(t=goog.color.prependZeroIfNecessaryHelper(t.toString(16)))+(n=goog.color.prependZeroIfNecessaryHelper(n.toString(16)))},goog.color.rgbArrayToHex=function(e){return goog.color.rgbToHex(e[0],e[1],e[2])},goog.color.rgbToHsl=function(e,t,n){e/=255,t/=255,n/=255;var o=Math.max(e,t,n),r=Math.min(e,t,n),i=0,a=0,s=.5*(o+r);return o!=r&&(o==e?i=60*(t-n)/(o-r):o==t?i=60*(n-e)/(o-r)+120:o==n&&(i=60*(e-t)/(o-r)+240),a=0<s&&s<=.5?(o-r)/(2*s):(o-r)/(2-2*s)),[Math.round(i+360)%360,a,s]},goog.color.rgbArrayToHsl=function(e){return goog.color.rgbToHsl(e[0],e[1],e[2])},goog.color.hueToRgb_=function(e,t,n){return n<0?n+=1:1<n&&--n,6*n<1?e+6*(t-e)*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e},goog.color.hslToRgb=function(e,t,n){if(e/=360,0==t)n=t=e=255*n;else{var o=n<.5?n*(1+t):n+t-t*n,r=2*n-o;n=255*goog.color.hueToRgb_(r,o,e+1/3),t=255*goog.color.hueToRgb_(r,o,e),e=255*goog.color.hueToRgb_(r,o,e-1/3)}return[Math.round(n),Math.round(t),Math.round(e)]},goog.color.hslArrayToRgb=function(e){return goog.color.hslToRgb(e[0],e[1],e[2])},goog.color.validHexColorRe_=/^#(?:[0-9a-f]{3}){1,2}$/i,goog.color.isValidHexColor_=function(e){return goog.color.validHexColorRe_.test(e)},goog.color.normalizedHexColorRe_=/^#[0-9a-f]{6}$/,goog.color.isNormalizedHexColor_=function(e){return goog.color.normalizedHexColorRe_.test(e)},goog.color.rgbColorRe_=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,goog.color.isValidRgbColor_=function(e){var t=e.match(goog.color.rgbColorRe_);if(t){e=Number(t[1]);var n=Number(t[2]);if(t=Number(t[3]),0<=e&&e<=255&&0<=n&&n<=255&&0<=t&&t<=255)return[e,n,t]}return[]},goog.color.prependZeroIfNecessaryHelper=function(e){return 1==e.length?"0"+e:e},goog.color.prependHashIfNecessaryHelper=function(e){return"#"==e.charAt(0)?e:"#"+e},goog.color.rgbStyle_=function(e){return"rgb("+e.join(",")+")"},goog.color.hsvToRgb=function(e,t,n){var o=0,r=0,i=0;if(0==t)i=r=o=n;else{var a=Math.floor(e/60),s=e/60-a;e=n*(1-t);var l=n*(1-t*s);switch(t=n*(1-t*(1-s)),a){case 1:o=l,r=n,i=e;break;case 2:o=e,r=n,i=t;break;case 3:o=e,r=l,i=n;break;case 4:o=t,r=e,i=n;break;case 5:o=n,r=e,i=l;break;case 6:case 0:o=n,r=t,i=e}}return[Math.floor(o),Math.floor(r),Math.floor(i)]},goog.color.rgbToHsv=function(e,t,n){var o=Math.max(Math.max(e,t),n),r=Math.min(Math.min(e,t),n);if(r==o)r=e=0;else{var i=o-r;r=i/o,(e=60*(e==o?(t-n)/i:t==o?2+(n-e)/i:4+(e-t)/i))<0&&(e+=360),360<e&&(e-=360)}return[e,r,o]},goog.color.rgbArrayToHsv=function(e){return goog.color.rgbToHsv(e[0],e[1],e[2])},goog.color.hsvArrayToRgb=function(e){return goog.color.hsvToRgb(e[0],e[1],e[2])},goog.color.hexToHsl=function(e){return e=goog.color.hexToRgb(e),goog.color.rgbToHsl(e[0],e[1],e[2])},goog.color.hslToHex=function(e,t,n){return goog.color.rgbArrayToHex(goog.color.hslToRgb(e,t,n))},goog.color.hslArrayToHex=function(e){return goog.color.rgbArrayToHex(goog.color.hslToRgb(e[0],e[1],e[2]))},goog.color.hexToHsv=function(e){return goog.color.rgbArrayToHsv(goog.color.hexToRgb(e))},goog.color.hsvToHex=function(e,t,n){return goog.color.rgbArrayToHex(goog.color.hsvToRgb(e,t,n))},goog.color.hsvArrayToHex=function(e){return goog.color.hsvToHex(e[0],e[1],e[2])},goog.color.hslDistance=function(e,t){var n=e[2]<=.5?e[1]*e[2]:e[1]*(1-e[2]),o=t[2]<=.5?t[1]*t[2]:t[1]*(1-t[2]);return(e[2]-t[2])*(e[2]-t[2])+n*n+o*o-2*n*o*Math.cos(2*(e[0]/360-t[0]/360)*Math.PI)},goog.color.blend=function(e,t,n){return n=goog.math.clamp(n,0,1),[Math.round(n*e[0]+(1-n)*t[0]),Math.round(n*e[1]+(1-n)*t[1]),Math.round(n*e[2]+(1-n)*t[2])]},goog.color.darken=function(e,t){return goog.color.blend([0,0,0],e,t)},goog.color.lighten=function(e,t){return goog.color.blend([255,255,255],e,t)},goog.color.highContrast=function(e,t){for(var n=[],o=0;o<t.length;o++)n.push({color:t[o],diff:goog.color.yiqBrightnessDiff_(t[o],e)+goog.color.colorDiff_(t[o],e)});return n.sort(function(e,t){return t.diff-e.diff}),n[0].color},goog.color.yiqBrightness_=function(e){return Math.round((299*e[0]+587*e[1]+114*e[2])/1e3)},goog.color.yiqBrightnessDiff_=function(e,t){return Math.abs(goog.color.yiqBrightness_(e)-goog.color.yiqBrightness_(t))},goog.color.colorDiff_=function(e,t){return Math.abs(e[0]-t[0])+Math.abs(e[1]-t[1])+Math.abs(e[2]-t[2])},goog.dom.vendor={},goog.dom.vendor.getVendorJsPrefix=function(){return goog.userAgent.WEBKIT?"Webkit":goog.userAgent.GECKO?"Moz":goog.userAgent.IE?"ms":goog.userAgent.OPERA?"O":null},goog.dom.vendor.getVendorPrefix=function(){return goog.userAgent.WEBKIT?"-webkit":goog.userAgent.GECKO?"-moz":goog.userAgent.IE?"-ms":goog.userAgent.OPERA?"-o":null},goog.dom.vendor.getPrefixedPropertyName=function(e,t){if(t&&e in t)return e;var n=goog.dom.vendor.getVendorJsPrefix();return n?(n=n.toLowerCase(),n+=goog.string.toTitleCase(e),!goog.isDef(t)||n in t?n:null):null},goog.dom.vendor.getPrefixedEventType=function(e){return((goog.dom.vendor.getVendorJsPrefix()||"")+e).toLowerCase()},goog.math.Box=function(e,t,n,o){this.top=e,this.right=t,this.bottom=n,this.left=o},goog.math.Box.boundingBox=function(e){for(var t=new goog.math.Box(e.y,e.x,e.y,e.x),n=1;n<arguments.length;n++)t.expandToIncludeCoordinate(arguments[n]);return t},goog.math.Box.prototype.getWidth=function(){return this.right-this.left},goog.math.Box.prototype.getHeight=function(){return this.bottom-this.top},goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)},goog.DEBUG&&(goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"}),goog.math.Box.prototype.contains=function(e){return goog.math.Box.contains(this,e)},goog.math.Box.prototype.expand=function(e,t,n,o){return goog.isObject(e)?(this.top-=e.top,this.right+=e.right,this.bottom+=e.bottom,this.left-=e.left):(this.top-=e,this.right+=Number(t),this.bottom+=Number(n),this.left-=Number(o)),this},goog.math.Box.prototype.expandToInclude=function(e){this.left=Math.min(this.left,e.left),this.top=Math.min(this.top,e.top),this.right=Math.max(this.right,e.right),this.bottom=Math.max(this.bottom,e.bottom)},goog.math.Box.prototype.expandToIncludeCoordinate=function(e){this.top=Math.min(this.top,e.y),this.right=Math.max(this.right,e.x),this.bottom=Math.max(this.bottom,e.y),this.left=Math.min(this.left,e.x)},goog.math.Box.equals=function(e,t){return e==t||!(!e||!t)&&(e.top==t.top&&e.right==t.right&&e.bottom==t.bottom&&e.left==t.left)},goog.math.Box.contains=function(e,t){return!(!e||!t)&&(t instanceof goog.math.Box?t.left>=e.left&&t.right<=e.right&&t.top>=e.top&&t.bottom<=e.bottom:t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom)},goog.math.Box.relativePositionX=function(e,t){return t.x<e.left?t.x-e.left:t.x>e.right?t.x-e.right:0},goog.math.Box.relativePositionY=function(e,t){return t.y<e.top?t.y-e.top:t.y>e.bottom?t.y-e.bottom:0},goog.math.Box.distance=function(e,t){var n=goog.math.Box.relativePositionX(e,t),o=goog.math.Box.relativePositionY(e,t);return Math.sqrt(n*n+o*o)},goog.math.Box.intersects=function(e,t){return e.left<=t.right&&t.left<=e.right&&e.top<=t.bottom&&t.top<=e.bottom},goog.math.Box.intersectsWithPadding=function(e,t,n){return e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},goog.math.Box.prototype.ceil=function(){return this.top=Math.ceil(this.top),this.right=Math.ceil(this.right),this.bottom=Math.ceil(this.bottom),this.left=Math.ceil(this.left),this},goog.math.Box.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},goog.math.Box.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this},goog.math.Box.prototype.translate=function(e,t){return e instanceof goog.math.Coordinate?(this.left+=e.x,this.right+=e.x,this.top+=e.y,this.bottom+=e.y):(goog.asserts.assertNumber(e),this.left+=e,this.right+=e,goog.isNumber(t)&&(this.top+=t,this.bottom+=t)),this},goog.math.Box.prototype.scale=function(e,t){var n=goog.isNumber(t)?t:e;return this.left*=e,this.right*=e,this.top*=n,this.bottom*=n,this},goog.math.IRect=function(){},goog.math.Rect=function(e,t,n,o){this.left=e,this.top=t,this.width=n,this.height=o},goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)},goog.math.Rect.prototype.toBox=function(){return new goog.math.Box(this.top,this.left+this.width,this.top+this.height,this.left)},goog.math.Rect.createFromPositionAndSize=function(e,t){return new goog.math.Rect(e.x,e.y,t.width,t.height)},goog.math.Rect.createFromBox=function(e){return new goog.math.Rect(e.left,e.top,e.right-e.left,e.bottom-e.top)},goog.DEBUG&&(goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"}),goog.math.Rect.equals=function(e,t){return e==t||!(!e||!t)&&(e.left==t.left&&e.width==t.width&&e.top==t.top&&e.height==t.height)},goog.math.Rect.prototype.intersection=function(e){var t=Math.max(this.left,e.left),n=Math.min(this.left+this.width,e.left+e.width);if(t<=n){var o=Math.max(this.top,e.top);if(o<=(e=Math.min(this.top+this.height,e.top+e.height)))return this.left=t,this.top=o,this.width=n-t,this.height=e-o,!0}return!1},goog.math.Rect.intersection=function(e,t){var n=Math.max(e.left,t.left),o=Math.min(e.left+e.width,t.left+t.width);if(n<=o){var r=Math.max(e.top,t.top),i=Math.min(e.top+e.height,t.top+t.height);if(r<=i)return new goog.math.Rect(n,r,o-n,i-r)}return null},goog.math.Rect.intersects=function(e,t){return e.left<=t.left+t.width&&t.left<=e.left+e.width&&e.top<=t.top+t.height&&t.top<=e.top+e.height},goog.math.Rect.prototype.intersects=function(e){return goog.math.Rect.intersects(this,e)},goog.math.Rect.difference=function(e,t){var n=goog.math.Rect.intersection(e,t);if(!n||!n.height||!n.width)return[e.clone()];n=[];var o=e.top,r=e.height,i=e.left+e.width,a=e.top+e.height,s=t.left+t.width,l=t.top+t.height;return t.top>e.top&&(n.push(new goog.math.Rect(e.left,e.top,e.width,t.top-e.top)),o=t.top,r-=t.top-e.top),l<a&&(n.push(new goog.math.Rect(e.left,l,e.width,a-l)),r=l-o),t.left>e.left&&n.push(new goog.math.Rect(e.left,o,t.left-e.left,r)),s<i&&n.push(new goog.math.Rect(s,o,i-s,r)),n},goog.math.Rect.prototype.difference=function(e){return goog.math.Rect.difference(this,e)},goog.math.Rect.prototype.boundingRect=function(e){var t=Math.max(this.left+this.width,e.left+e.width),n=Math.max(this.top+this.height,e.top+e.height);this.left=Math.min(this.left,e.left),this.top=Math.min(this.top,e.top),this.width=t-this.left,this.height=n-this.top},goog.math.Rect.boundingRect=function(e,t){if(!e||!t)return null;var n=new goog.math.Rect(e.left,e.top,e.width,e.height);return n.boundingRect(t),n},goog.math.Rect.prototype.contains=function(e){return e instanceof goog.math.Coordinate?e.x>=this.left&&e.x<=this.left+this.width&&e.y>=this.top&&e.y<=this.top+this.height:this.left<=e.left&&this.left+this.width>=e.left+e.width&&this.top<=e.top&&this.top+this.height>=e.top+e.height},goog.math.Rect.prototype.squaredDistance=function(e){var t=e.x<this.left?this.left-e.x:Math.max(e.x-(this.left+this.width),0);return t*t+(e=e.y<this.top?this.top-e.y:Math.max(e.y-(this.top+this.height),0))*e},goog.math.Rect.prototype.distance=function(e){return Math.sqrt(this.squaredDistance(e))},goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)},goog.math.Rect.prototype.getTopLeft=function(){return new goog.math.Coordinate(this.left,this.top)},goog.math.Rect.prototype.getCenter=function(){return new goog.math.Coordinate(this.left+this.width/2,this.top+this.height/2)},goog.math.Rect.prototype.getBottomRight=function(){return new goog.math.Coordinate(this.left+this.width,this.top+this.height)},goog.math.Rect.prototype.ceil=function(){return this.left=Math.ceil(this.left),this.top=Math.ceil(this.top),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},goog.math.Rect.prototype.floor=function(){return this.left=Math.floor(this.left),this.top=Math.floor(this.top),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},goog.math.Rect.prototype.round=function(){return this.left=Math.round(this.left),this.top=Math.round(this.top),this.width=Math.round(this.width),this.height=Math.round(this.height),this},goog.math.Rect.prototype.translate=function(e,t){return e instanceof goog.math.Coordinate?(this.left+=e.x,this.top+=e.y):(this.left+=goog.asserts.assertNumber(e),goog.isNumber(t)&&(this.top+=t)),this},goog.math.Rect.prototype.scale=function(e,t){var n=goog.isNumber(t)?t:e;return this.left*=e,this.width*=e,this.top*=n,this.height*=n,this},goog.style={},goog.style.setStyle=function(e,t,n){if(goog.isString(t))goog.style.setStyle_(e,n,t);else for(var o in t)goog.style.setStyle_(e,t[o],o)},goog.style.setStyle_=function(e,t,n){(n=goog.style.getVendorJsStyleName_(e,n))&&(e.style[n]=t)},goog.style.styleNameCache_={},goog.style.getVendorJsStyleName_=function(e,t){var n=goog.style.styleNameCache_[t];if(!n){var o=goog.string.toCamelCase(t);n=o,void 0===e.style[o]&&(o=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(o),void 0!==e.style[o]&&(n=o)),goog.style.styleNameCache_[t]=n}return n},goog.style.getVendorStyleName_=function(e,t){var n=goog.string.toCamelCase(t);return void 0===e.style[n]&&(n=goog.dom.vendor.getVendorJsPrefix()+goog.string.toTitleCase(n),void 0!==e.style[n])?goog.dom.vendor.getVendorPrefix()+"-"+t:t},goog.style.getStyle=function(e,t){var n=e.style[goog.string.toCamelCase(t)];return void 0!==n?n:e.style[goog.style.getVendorJsStyleName_(e,t)]||""},goog.style.getComputedStyle=function(e,t){var n=goog.dom.getOwnerDocument(e);return n.defaultView&&n.defaultView.getComputedStyle&&(n=n.defaultView.getComputedStyle(e,null))&&(n[t]||n.getPropertyValue(t))||""},goog.style.getCascadedStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:null},goog.style.getStyle_=function(e,t){return goog.style.getComputedStyle(e,t)||goog.style.getCascadedStyle(e,t)||e.style&&e.style[t]},goog.style.getComputedBoxSizing=function(e){return goog.style.getStyle_(e,"boxSizing")||goog.style.getStyle_(e,"MozBoxSizing")||goog.style.getStyle_(e,"WebkitBoxSizing")||null},goog.style.getComputedPosition=function(e){return goog.style.getStyle_(e,"position")},goog.style.getBackgroundColor=function(e){return goog.style.getStyle_(e,"backgroundColor")},goog.style.getComputedOverflowX=function(e){return goog.style.getStyle_(e,"overflowX")},goog.style.getComputedOverflowY=function(e){return goog.style.getStyle_(e,"overflowY")},goog.style.getComputedZIndex=function(e){return goog.style.getStyle_(e,"zIndex")},goog.style.getComputedTextAlign=function(e){return goog.style.getStyle_(e,"textAlign")},goog.style.getComputedCursor=function(e){return goog.style.getStyle_(e,"cursor")},goog.style.getComputedTransform=function(e){var t=goog.style.getVendorStyleName_(e,"transform");return goog.style.getStyle_(e,t)||goog.style.getStyle_(e,"transform")},goog.style.setPosition=function(e,t,n){if(t instanceof goog.math.Coordinate){var o=t.x;t=t.y}else o=t,t=n;e.style.left=goog.style.getPixelStyleValue_(o,!1),e.style.top=goog.style.getPixelStyleValue_(t,!1)},goog.style.getPosition=function(e){return new goog.math.Coordinate(e.offsetLeft,e.offsetTop)},goog.style.getClientViewportElement=function(e){return e=e?goog.dom.getOwnerDocument(e):goog.dom.getDocument(),!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||goog.dom.getDomHelper(e).isCss1CompatMode()?e.documentElement:e.body},goog.style.getViewportPageOffset=function(e){var t=e.body;return e=e.documentElement,new goog.math.Coordinate(t.scrollLeft||e.scrollLeft,t.scrollTop||e.scrollTop)},goog.style.getBoundingClientRect_=function(e){try{var t=e.getBoundingClientRect()}catch(e){return{left:0,top:0,right:0,bottom:0}}return goog.userAgent.IE&&e.ownerDocument.body&&(e=e.ownerDocument,t.left-=e.documentElement.clientLeft+e.body.clientLeft,t.top-=e.documentElement.clientTop+e.body.clientTop),t},goog.style.getOffsetParent=function(e){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(8))return goog.asserts.assert(e&&"offsetParent"in e),e.offsetParent;var t=goog.dom.getOwnerDocument(e),n=goog.style.getStyle_(e,"position"),o="fixed"==n||"absolute"==n;for(e=e.parentNode;e&&e!=t;e=e.parentNode)if(e.nodeType==goog.dom.NodeType.DOCUMENT_FRAGMENT&&e.host&&(e=e.host),n=goog.style.getStyle_(e,"position"),!(o=o&&"static"==n&&e!=t.documentElement&&e!=t.body)&&(e.scrollWidth>e.clientWidth||e.scrollHeight>e.clientHeight||"fixed"==n||"absolute"==n||"relative"==n))return e;return null},goog.style.getVisibleRectForElement=function(e){for(var t=new goog.math.Box(0,1/0,1/0,0),n=goog.dom.getDomHelper(e),o=n.getDocument().body,r=n.getDocument().documentElement,i=n.getDocumentScrollElement();e=goog.style.getOffsetParent(e);)if(!(goog.userAgent.IE&&0==e.clientWidth||goog.userAgent.WEBKIT&&0==e.clientHeight&&e==o)&&e!=o&&e!=r&&"visible"!=goog.style.getStyle_(e,"overflow")){var a=goog.style.getPageOffset(e),s=goog.style.getClientLeftTop(e);a.x+=s.x,a.y+=s.y,t.top=Math.max(t.top,a.y),t.right=Math.min(t.right,a.x+e.clientWidth),t.bottom=Math.min(t.bottom,a.y+e.clientHeight),t.left=Math.max(t.left,a.x)}return o=i.scrollLeft,i=i.scrollTop,t.left=Math.max(t.left,o),t.top=Math.max(t.top,i),n=n.getViewportSize(),t.right=Math.min(t.right,o+n.width),t.bottom=Math.min(t.bottom,i+n.height),0<=t.top&&0<=t.left&&t.bottom>t.top&&t.right>t.left?t:null},goog.style.getContainerOffsetToScrollInto=function(e,t,n){var o=t||goog.dom.getDocumentScrollElement(),r=goog.style.getPageOffset(e),i=goog.style.getPageOffset(o),a=goog.style.getBorderBox(o);return o==goog.dom.getDocumentScrollElement()?(t=r.x-o.scrollLeft,r=r.y-o.scrollTop,goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(10)&&(t+=a.left,r+=a.top)):(t=r.x-i.x-a.left,r=r.y-i.y-a.top),a=goog.style.getSizeWithDisplay_(e),e=o.clientWidth-a.width,a=o.clientHeight-a.height,i=o.scrollLeft,o=o.scrollTop,n?(i+=t-e/2,o+=r-a/2):(i+=Math.min(t,Math.max(t-e,0)),o+=Math.min(r,Math.max(r-a,0))),new goog.math.Coordinate(i,o)},goog.style.scrollIntoContainerView=function(e,t,n){t=t||goog.dom.getDocumentScrollElement(),e=goog.style.getContainerOffsetToScrollInto(e,t,n),t.scrollLeft=e.x,t.scrollTop=e.y},goog.style.getClientLeftTop=function(e){return new goog.math.Coordinate(e.clientLeft,e.clientTop)},goog.style.getPageOffset=function(e){var t=goog.dom.getOwnerDocument(e);goog.asserts.assertObject(e,"Parameter is required");var n=new goog.math.Coordinate(0,0);return e==goog.style.getClientViewportElement(t)||(e=goog.style.getBoundingClientRect_(e),t=goog.dom.getDomHelper(t).getDocumentScroll(),n.x=e.left+t.x,n.y=e.top+t.y),n},goog.style.getPageOffsetLeft=function(e){return goog.style.getPageOffset(e).x},goog.style.getPageOffsetTop=function(e){return goog.style.getPageOffset(e).y},goog.style.getFramedPageOffset=function(e,t){var n=new goog.math.Coordinate(0,0),o=goog.dom.getWindow(goog.dom.getOwnerDocument(e));if(!goog.reflect.canAccessProperty(o,"parent"))return n;var r=e;do{var i=o==t?goog.style.getPageOffset(r):goog.style.getClientPositionForElement_(goog.asserts.assert(r));n.x+=i.x,n.y+=i.y}while(o&&o!=t&&o!=o.parent&&(r=o.frameElement)&&(o=o.parent));return n},goog.style.translateRectForAnotherFrame=function(e,t,n){if(t.getDocument()!=n.getDocument()){var o=t.getDocument().body;n=goog.style.getFramedPageOffset(o,n.getWindow()),n=goog.math.Coordinate.difference(n,goog.style.getPageOffset(o)),!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9)||t.isCss1CompatMode()||(n=goog.math.Coordinate.difference(n,t.getDocumentScroll())),e.left+=n.x,e.top+=n.y}},goog.style.getRelativePosition=function(e,t){var n=goog.style.getClientPosition(e),o=goog.style.getClientPosition(t);return new goog.math.Coordinate(n.x-o.x,n.y-o.y)},goog.style.getClientPositionForElement_=function(e){return e=goog.style.getBoundingClientRect_(e),new goog.math.Coordinate(e.left,e.top)},goog.style.getClientPosition=function(e){return goog.asserts.assert(e),e.nodeType==goog.dom.NodeType.ELEMENT?goog.style.getClientPositionForElement_(e):(e=e.changedTouches?e.changedTouches[0]:e,new goog.math.Coordinate(e.clientX,e.clientY))},goog.style.setPageOffset=function(e,t,n){var o=goog.style.getPageOffset(e);t instanceof goog.math.Coordinate&&(n=t.y,t=t.x),t=goog.asserts.assertNumber(t)-o.x,goog.style.setPosition(e,e.offsetLeft+t,e.offsetTop+(Number(n)-o.y))},goog.style.setSize=function(e,t,n){if(t instanceof goog.math.Size)n=t.height,t=t.width;else if(null==n)throw Error("missing height argument");goog.style.setWidth(e,t),goog.style.setHeight(e,n)},goog.style.getPixelStyleValue_=function(e,t){return"number"==typeof e&&(e=(t?Math.round(e):e)+"px"),e},goog.style.setHeight=function(e,t){e.style.height=goog.style.getPixelStyleValue_(t,!0)},goog.style.setWidth=function(e,t){e.style.width=goog.style.getPixelStyleValue_(t,!0)},goog.style.getSize=function(e){return goog.style.evaluateWithTemporaryDisplay_(goog.style.getSizeWithDisplay_,e)},goog.style.evaluateWithTemporaryDisplay_=function(e,t){if("none"!=goog.style.getStyle_(t,"display"))return e(t);var n=t.style,o=n.display,r=n.visibility,i=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";var a=e(t);return n.display=o,n.position=i,n.visibility=r,a},goog.style.getSizeWithDisplay_=function(e){var t=e.offsetWidth,n=e.offsetHeight,o=goog.userAgent.WEBKIT&&!t&&!n;return goog.isDef(t)&&!o||!e.getBoundingClientRect?new goog.math.Size(t,n):(e=goog.style.getBoundingClientRect_(e),new goog.math.Size(e.right-e.left,e.bottom-e.top))},goog.style.getTransformedSize=function(e){return e.getBoundingClientRect?(e=goog.style.evaluateWithTemporaryDisplay_(goog.style.getBoundingClientRect_,e),new goog.math.Size(e.right-e.left,e.bottom-e.top)):null},goog.style.getBounds=function(e){var t=goog.style.getPageOffset(e);return e=goog.style.getSize(e),new goog.math.Rect(t.x,t.y,e.width,e.height)},goog.style.toCamelCase=function(e){return goog.string.toCamelCase(String(e))},goog.style.toSelectorCase=function(e){return goog.string.toSelectorCase(e)},goog.style.getOpacity=function(e){goog.asserts.assert(e);var t=e.style;return e="","opacity"in t?e=t.opacity:"MozOpacity"in t?e=t.MozOpacity:"filter"in t&&(t=t.filter.match(/alpha\(opacity=([\d.]+)\)/))&&(e=String(t[1]/100)),""==e?e:Number(e)},goog.style.setOpacity=function(e,t){goog.asserts.assert(e);var n=e.style;"opacity"in n?n.opacity=t:"MozOpacity"in n?n.MozOpacity=t:"filter"in n&&(n.filter=""===t?"":"alpha(opacity="+100*Number(t)+")")},goog.style.setTransparentBackgroundImage=function(e,t){var n=e.style;goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?n.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+t+'", sizingMethod="crop")':(n.backgroundImage="url("+t+")",n.backgroundPosition="top left",n.backgroundRepeat="no-repeat")},goog.style.clearTransparentBackgroundImage=function(e){"filter"in(e=e.style)?e.filter="":e.backgroundImage="none"},goog.style.showElement=function(e,t){goog.style.setElementShown(e,t)},goog.style.setElementShown=function(e,t){e.style.display=t?"":"none"},goog.style.isElementShown=function(e){return"none"!=e.style.display},goog.style.installSafeStyleSheet=function(e,t){var n=goog.dom.getDomHelper(t),o=n.getDocument();if(goog.userAgent.IE&&o.createStyleSheet)return n=o.createStyleSheet(),goog.style.setSafeStyleSheet(n,e),n;if(!(o=n.getElementsByTagNameAndClass("HEAD")[0])){var r=n.getElementsByTagNameAndClass("BODY")[0];o=n.createDom("HEAD"),r.parentNode.insertBefore(o,r)}return r=n.createDom("STYLE"),goog.style.setSafeStyleSheet(r,e),n.appendChild(o,r),r},goog.style.uninstallStyles=function(e){goog.dom.removeNode(e.ownerNode||e.owningElement||e)},goog.style.setSafeStyleSheet=function(e,t){var n=goog.html.SafeStyleSheet.unwrap(t);goog.userAgent.IE&&goog.isDef(e.cssText)?e.cssText=n:e.innerHTML=n},goog.style.setPreWrap=function(e){e=e.style,goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(e.whiteSpace="pre",e.wordWrap="break-word"):e.whiteSpace=goog.userAgent.GECKO?"-moz-pre-wrap":"pre-wrap"},goog.style.setInlineBlock=function(e){(e=e.style).position="relative",goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("8")?(e.zoom="1",e.display="inline"):e.display="inline-block"},goog.style.isRightToLeft=function(e){return"rtl"==goog.style.getStyle_(e,"direction")},goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT||goog.userAgent.EDGE?"WebkitUserSelect":null,goog.style.isUnselectable=function(e){return goog.style.unselectableStyle_?"none"==e.style[goog.style.unselectableStyle_].toLowerCase():!(!goog.userAgent.IE&&!goog.userAgent.OPERA)&&"on"==e.getAttribute("unselectable")},goog.style.setUnselectable=function(e,t,n){n=n?null:e.getElementsByTagName("*");var o=goog.style.unselectableStyle_;if(o){if(t=t?"none":"",e.style&&(e.style[o]=t),n){e=0;for(var r;r=n[e];e++)r.style&&(r.style[o]=t)}}else if((goog.userAgent.IE||goog.userAgent.OPERA)&&(t=t?"on":"",e.setAttribute("unselectable",t),n))for(e=0;r=n[e];e++)r.setAttribute("unselectable",t)},goog.style.getBorderBoxSize=function(e){return new goog.math.Size(e.offsetWidth,e.offsetHeight)},goog.style.setBorderBoxSize=function(e,t){var n=goog.dom.getOwnerDocument(e),o=goog.dom.getDomHelper(n).isCss1CompatMode();if(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||o&&goog.userAgent.isVersionOrHigher("8"))goog.style.setBoxSizingSize_(e,t,"border-box");else if(n=e.style,o){o=goog.style.getPaddingBox(e);var r=goog.style.getBorderBox(e);n.pixelWidth=t.width-r.left-o.left-o.right-r.right,n.pixelHeight=t.height-r.top-o.top-o.bottom-r.bottom}else n.pixelWidth=t.width,n.pixelHeight=t.height},goog.style.getContentBoxSize=function(e){var t=goog.dom.getOwnerDocument(e),n=goog.userAgent.IE&&e.currentStyle;return n&&goog.dom.getDomHelper(t).isCss1CompatMode()&&"auto"!=n.width&&"auto"!=n.height&&!n.boxSizing?(t=goog.style.getIePixelValue_(e,n.width,"width","pixelWidth"),e=goog.style.getIePixelValue_(e,n.height,"height","pixelHeight"),new goog.math.Size(t,e)):(n=goog.style.getBorderBoxSize(e),t=goog.style.getPaddingBox(e),e=goog.style.getBorderBox(e),new goog.math.Size(n.width-e.left-t.left-t.right-e.right,n.height-e.top-t.top-t.bottom-e.bottom))},goog.style.setContentBoxSize=function(e,t){var n=goog.dom.getOwnerDocument(e),o=goog.dom.getDomHelper(n).isCss1CompatMode();if(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10")||o&&goog.userAgent.isVersionOrHigher("8"))goog.style.setBoxSizingSize_(e,t,"content-box");else if(n=e.style,o)n.pixelWidth=t.width,n.pixelHeight=t.height;else{o=goog.style.getPaddingBox(e);var r=goog.style.getBorderBox(e);n.pixelWidth=t.width+r.left+o.left+o.right+r.right,n.pixelHeight=t.height+r.top+o.top+o.bottom+r.bottom}},goog.style.setBoxSizingSize_=function(e,t,n){e=e.style,goog.userAgent.GECKO?e.MozBoxSizing=n:goog.userAgent.WEBKIT?e.WebkitBoxSizing=n:e.boxSizing=n,e.width=Math.max(t.width,0)+"px",e.height=Math.max(t.height,0)+"px"},goog.style.getIePixelValue_=function(e,t,n,o){if(/^\d+px?$/.test(t))return parseInt(t,10);var r=e.style[n],i=e.runtimeStyle[n];return e.runtimeStyle[n]=e.currentStyle[n],e.style[n]=t,t=e.style[o],e.style[n]=r,e.runtimeStyle[n]=i,+t},goog.style.getIePixelDistance_=function(e,t){var n=goog.style.getCascadedStyle(e,t);return n?goog.style.getIePixelValue_(e,n,"left","pixelLeft"):0},goog.style.getBox_=function(e,t){if(goog.userAgent.IE){var n=goog.style.getIePixelDistance_(e,t+"Left"),o=goog.style.getIePixelDistance_(e,t+"Right"),r=goog.style.getIePixelDistance_(e,t+"Top"),i=goog.style.getIePixelDistance_(e,t+"Bottom");return new goog.math.Box(r,o,i,n)}return n=goog.style.getComputedStyle(e,t+"Left"),o=goog.style.getComputedStyle(e,t+"Right"),r=goog.style.getComputedStyle(e,t+"Top"),i=goog.style.getComputedStyle(e,t+"Bottom"),new goog.math.Box(parseFloat(r),parseFloat(o),parseFloat(i),parseFloat(n))},goog.style.getPaddingBox=function(e){return goog.style.getBox_(e,"padding")},goog.style.getMarginBox=function(e){return goog.style.getBox_(e,"margin")},goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6},goog.style.getIePixelBorder_=function(e,t){if("none"==goog.style.getCascadedStyle(e,t+"Style"))return 0;var n=goog.style.getCascadedStyle(e,t+"Width");return n in goog.style.ieBorderWidthKeywords_?goog.style.ieBorderWidthKeywords_[n]:goog.style.getIePixelValue_(e,n,"left","pixelLeft")},goog.style.getBorderBox=function(e){if(goog.userAgent.IE&&!goog.userAgent.isDocumentModeOrHigher(9)){var t=goog.style.getIePixelBorder_(e,"borderLeft"),n=goog.style.getIePixelBorder_(e,"borderRight"),o=goog.style.getIePixelBorder_(e,"borderTop");return e=goog.style.getIePixelBorder_(e,"borderBottom"),new goog.math.Box(o,n,e,t)}return t=goog.style.getComputedStyle(e,"borderLeftWidth"),n=goog.style.getComputedStyle(e,"borderRightWidth"),o=goog.style.getComputedStyle(e,"borderTopWidth"),e=goog.style.getComputedStyle(e,"borderBottomWidth"),new goog.math.Box(parseFloat(o),parseFloat(n),parseFloat(e),parseFloat(t))},goog.style.getFontFamily=function(e){var t=goog.dom.getOwnerDocument(e),n="";if(t.body.createTextRange&&goog.dom.contains(t,e)){(t=t.body.createTextRange()).moveToElementText(e);try{n=t.queryCommandValue("FontName")}catch(e){n=""}}return n||(n=goog.style.getStyle_(e,"fontFamily")),1<(e=n.split(",")).length&&(n=e[0]),goog.string.stripQuotes(n,"\"'")},goog.style.lengthUnitRegex_=/[^\d]+$/,goog.style.getLengthUnits=function(e){return(e=e.match(goog.style.lengthUnitRegex_))&&e[0]||null},goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,in:1,mm:1,pc:1,pt:1},goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1},goog.style.getFontSize=function(e){var t=goog.style.getStyle_(e,"fontSize"),n=goog.style.getLengthUnits(t);if(t&&"px"==n)return parseInt(t,10);if(goog.userAgent.IE){if(String(n)in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(e,t,"left","pixelLeft");if(e.parentNode&&e.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&String(n)in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_)return e=e.parentNode,n=goog.style.getStyle_(e,"fontSize"),goog.style.getIePixelValue_(e,t==n?"1em":t,"left","pixelLeft")}return n=goog.dom.createDom("SPAN",{style:"visibility:hidden;position:absolute;line-height:0;padding:0;margin:0;border:0;height:1em;"}),goog.dom.appendChild(e,n),t=n.offsetHeight,goog.dom.removeNode(n),t},goog.style.parseStyleAttribute=function(e){var n={};return goog.array.forEach(e.split(/\s*;\s*/),function(e){var t=e.match(/\s*([\w-]+)\s*:(.+)/);t&&(e=t[1],t=goog.string.trim(t[2]),n[goog.string.toCamelCase(e.toLowerCase())]=t)}),n},goog.style.toStyleAttribute=function(e){var n=[];return goog.object.forEach(e,function(e,t){n.push(goog.string.toSelectorCase(t),":",e,";")}),n.join("")},goog.style.setFloat=function(e,t){e.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=t},goog.style.getFloat=function(e){return e.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""},goog.style.getScrollbarWidth=function(e){var t=goog.dom.createElement("DIV");return e&&(t.className=e),t.style.cssText="overflow:auto;position:absolute;top:0;width:100px;height:100px",e=goog.dom.createElement("DIV"),goog.style.setSize(e,"200px","200px"),t.appendChild(e),goog.dom.appendChild(goog.dom.getDocument().body,t),e=t.offsetWidth-t.clientWidth,goog.dom.removeNode(t),e},goog.style.MATRIX_TRANSLATION_REGEX_=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/,goog.style.getCssTranslation=function(e){return(e=goog.style.getComputedTransform(e))&&(e=e.match(goog.style.MATRIX_TRANSLATION_REGEX_))?new goog.math.Coordinate(parseFloat(e[1]),parseFloat(e[2])):new goog.math.Coordinate(0,0)},goog.events.EventHandler=function(e){goog.Disposable.call(this),this.handler_=e,this.keys_={}},goog.inherits(goog.events.EventHandler,goog.Disposable),goog.events.EventHandler.typeArray_=[],goog.events.EventHandler.prototype.listen=function(e,t,n,o){return this.listen_(e,t,n,o)},goog.events.EventHandler.prototype.listenWithScope=function(e,t,n,o,r){return this.listen_(e,t,n,o,r)},goog.events.EventHandler.prototype.listen_=function(e,t,n,o,r){goog.isArray(t)||(t&&(goog.events.EventHandler.typeArray_[0]=t.toString()),t=goog.events.EventHandler.typeArray_);for(var i=0;i<t.length;i++){var a=goog.events.listen(e,t[i],n||this.handleEvent,o||!1,r||this.handler_||this);if(!a)break;this.keys_[a.key]=a}return this},goog.events.EventHandler.prototype.listenOnce=function(e,t,n,o){return this.listenOnce_(e,t,n,o)},goog.events.EventHandler.prototype.listenOnceWithScope=function(e,t,n,o,r){return this.listenOnce_(e,t,n,o,r)},goog.events.EventHandler.prototype.listenOnce_=function(e,t,n,o,r){if(goog.isArray(t))for(var i=0;i<t.length;i++)this.listenOnce_(e,t[i],n,o,r);else{if(!(e=goog.events.listenOnce(e,t,n||this.handleEvent,o,r||this.handler_||this)))return this;this.keys_[e.key]=e}return this},goog.events.EventHandler.prototype.listenWithWrapper=function(e,t,n,o){return this.listenWithWrapper_(e,t,n,o)},goog.events.EventHandler.prototype.listenWithWrapperAndScope=function(e,t,n,o,r){return this.listenWithWrapper_(e,t,n,o,r)},goog.events.EventHandler.prototype.listenWithWrapper_=function(e,t,n,o,r){return t.listen(e,n,o,r||this.handler_||this,this),this},goog.events.EventHandler.prototype.getListenerCount=function(){var e,t=0;for(e in this.keys_)Object.prototype.hasOwnProperty.call(this.keys_,e)&&t++;return t},goog.events.EventHandler.prototype.unlisten=function(e,t,n,o,r){if(goog.isArray(t))for(var i=0;i<t.length;i++)this.unlisten(e,t[i],n,o,r);else o=goog.isObject(o)?!!o.capture:!!o,(e=goog.events.getListener(e,t,n||this.handleEvent,o,r||this.handler_||this))&&(goog.events.unlistenByKey(e),delete this.keys_[e.key]);return this},goog.events.EventHandler.prototype.unlistenWithWrapper=function(e,t,n,o,r){return t.unlisten(e,n,o,r||this.handler_||this,this),this},goog.events.EventHandler.prototype.removeAll=function(){goog.object.forEach(this.keys_,function(e,t){this.keys_.hasOwnProperty(t)&&goog.events.unlistenByKey(e)},this),this.keys_={}},goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this),this.removeAll()},goog.events.EventHandler.prototype.handleEvent=function(e){throw Error("EventHandler.handleEvent not implemented")},goog.ui={},goog.ui.IdGenerator=function(){},goog.addSingletonGetter(goog.ui.IdGenerator),goog.ui.IdGenerator.prototype.nextId_=0,goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return":"+(this.nextId_++).toString(36)},goog.ui.Component=function(e){goog.events.EventTarget.call(this),this.dom_=e||goog.dom.getDomHelper(),this.rightToLeft_=goog.ui.Component.defaultRightToLeft_,this.id_=null,this.inDocument_=!1,this.element_=null,this.googUiComponentHandler_=void 0,this.childIndex_=this.children_=this.parent_=this.model_=null,this.pointerEventsEnabled_=this.wasDecorated_=!1},goog.inherits(goog.ui.Component,goog.events.EventTarget),goog.ui.Component.ALLOW_DETACHED_DECORATION=!1,goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance(),goog.ui.Component.DEFAULT_BIDI_DIR=0,goog.ui.Component.defaultRightToLeft_=1!=goog.ui.Component.DEFAULT_BIDI_DIR&&(-1==goog.ui.Component.DEFAULT_BIDI_DIR||null),goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"},goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"},goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64},goog.ui.Component.getStateTransitionEvent=function(e,t){switch(e){case goog.ui.Component.State.DISABLED:return t?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return t?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return t?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return t?goog.ui.Component.EventType.SELECT:goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return t?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return t?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return t?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE}throw Error(goog.ui.Component.Error.STATE_INVALID)},goog.ui.Component.setDefaultRightToLeft=function(e){goog.ui.Component.defaultRightToLeft_=e},goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())},goog.ui.Component.prototype.setId=function(e){this.parent_&&this.parent_.childIndex_&&(goog.object.remove(this.parent_.childIndex_,this.id_),goog.object.add(this.parent_.childIndex_,e,this)),this.id_=e},goog.ui.Component.prototype.getElement=function(){return this.element_},goog.ui.Component.prototype.getElementStrict=function(){var e=this.element_;return goog.asserts.assert(e,"Can not call getElementStrict before rendering/decorating."),e},goog.ui.Component.prototype.setElementInternal=function(e){this.element_=e},goog.ui.Component.prototype.getElementsByClass=function(e){return this.element_?this.dom_.getElementsByClass(e,this.element_):[]},goog.ui.Component.prototype.getElementByClass=function(e){return this.element_?this.dom_.getElementByClass(e,this.element_):null},goog.ui.Component.prototype.getRequiredElementByClass=function(e){var t=this.getElementByClass(e);return goog.asserts.assert(t,"Expected element in component with class: %s",e),t},goog.ui.Component.prototype.getHandler=function(){return this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this)),goog.asserts.assert(this.googUiComponentHandler_)},goog.ui.Component.prototype.setParent=function(e){if(this==e)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);if(e&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=e)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=e,goog.ui.Component.superClass_.setParentEventTarget.call(this,e)},goog.ui.Component.prototype.getParent=function(){return this.parent_},goog.ui.Component.prototype.setParentEventTarget=function(e){if(this.parent_&&this.parent_!=e)throw Error(goog.ui.Component.Error.NOT_SUPPORTED);goog.ui.Component.superClass_.setParentEventTarget.call(this,e)},goog.ui.Component.prototype.getDomHelper=function(){return this.dom_},goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_};goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement("DIV")},goog.ui.Component.prototype.render=function(e){this.render_(e)},goog.ui.Component.prototype.renderBefore=function(e){this.render_(e.parentNode,e)},goog.ui.Component.prototype.render_=function(e,t){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.element_||this.createDom(),e?e.insertBefore(this.element_,t||null):this.dom_.getDocument().body.appendChild(this.element_),this.parent_&&!this.parent_.isInDocument()||this.enterDocument()},goog.ui.Component.prototype.decorate=function(e){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(!e||!this.canDecorate(e))throw Error(goog.ui.Component.Error.DECORATE_INVALID);this.wasDecorated_=!0;var t=goog.dom.getOwnerDocument(e);this.dom_&&this.dom_.getDocument()==t||(this.dom_=goog.dom.getDomHelper(e)),this.decorateInternal(e),goog.ui.Component.ALLOW_DETACHED_DECORATION&&!goog.dom.contains(t,e)||this.enterDocument()},goog.ui.Component.prototype.canDecorate=function(e){return!0},goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_},goog.ui.Component.prototype.decorateInternal=function(e){this.element_=e},goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=!0,this.forEachChild(function(e){!e.isInDocument()&&e.getElement()&&e.enterDocument()})},goog.ui.Component.prototype.exitDocument=function(){this.forEachChild(function(e){e.isInDocument()&&e.exitDocument()}),this.googUiComponentHandler_&&this.googUiComponentHandler_.removeAll(),this.inDocument_=!1},goog.ui.Component.prototype.disposeInternal=function(){this.inDocument_&&this.exitDocument(),this.googUiComponentHandler_&&(this.googUiComponentHandler_.dispose(),delete this.googUiComponentHandler_),this.forEachChild(function(e){e.dispose()}),!this.wasDecorated_&&this.element_&&goog.dom.removeNode(this.element_),this.parent_=this.model_=this.element_=this.childIndex_=this.children_=null,goog.ui.Component.superClass_.disposeInternal.call(this)},goog.ui.Component.prototype.makeId=function(e){return this.getId()+"."+e},goog.ui.Component.prototype.makeIds=function(e){var t,n={};for(t in e)n[t]=this.makeId(e[t]);return n},goog.ui.Component.prototype.getModel=function(){return this.model_},goog.ui.Component.prototype.setModel=function(e){this.model_=e},goog.ui.Component.prototype.getFragmentFromId=function(e){return e.substring(this.getId().length+1)},goog.ui.Component.prototype.getElementByFragment=function(e){if(!this.inDocument_)throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);return this.dom_.getElement(this.makeId(e))},goog.ui.Component.prototype.addChild=function(e,t){this.addChildAt(e,this.getChildCount(),t)},goog.ui.Component.prototype.addChildAt=function(e,t,n){if(goog.asserts.assert(!!e,"Provided element must not be null."),e.inDocument_&&(n||!this.inDocument_))throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(t<0||t>this.getChildCount())throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);this.childIndex_&&this.children_||(this.childIndex_={},this.children_=[]),e.getParent()==this?(goog.object.set(this.childIndex_,e.getId(),e),goog.array.remove(this.children_,e)):goog.object.add(this.childIndex_,e.getId(),e),e.setParent(this),goog.array.insertAt(this.children_,e,t),e.inDocument_&&this.inDocument_&&e.getParent()==this?(t=(n=this.getContentElement()).childNodes[t]||null)!=e.getElement()&&n.insertBefore(e.getElement(),t):n?(this.element_||this.createDom(),t=this.getChildAt(t+1),e.render_(this.getContentElement(),t?t.element_:null)):this.inDocument_&&!e.inDocument_&&e.element_&&e.element_.parentNode&&e.element_.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&e.enterDocument()},goog.ui.Component.prototype.getContentElement=function(){return this.element_},goog.ui.Component.prototype.isRightToLeft=function(){return null==this.rightToLeft_&&(this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body)),this.rightToLeft_},goog.ui.Component.prototype.setRightToLeft=function(e){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.rightToLeft_=e},goog.ui.Component.prototype.hasChildren=function(){return!!this.children_&&0!=this.children_.length},goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0},goog.ui.Component.prototype.getChildIds=function(){var t=[];return this.forEachChild(function(e){t.push(e.getId())}),t},goog.ui.Component.prototype.getChild=function(e){return this.childIndex_&&e&&goog.object.get(this.childIndex_,e)||null},goog.ui.Component.prototype.getChildAt=function(e){return this.children_&&this.children_[e]||null},goog.ui.Component.prototype.forEachChild=function(e,t){this.children_&&goog.array.forEach(this.children_,e,t)},goog.ui.Component.prototype.indexOfChild=function(e){return this.children_&&e?goog.array.indexOf(this.children_,e):-1},goog.ui.Component.prototype.removeChild=function(e,t){if(e){var n=goog.isString(e)?e:e.getId();e=this.getChild(n),n&&e&&(goog.object.remove(this.childIndex_,n),goog.array.remove(this.children_,e),t&&(e.exitDocument(),e.element_&&goog.dom.removeNode(e.element_)),e.setParent(null))}if(!e)throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);return e},goog.ui.Component.prototype.removeChildAt=function(e,t){return this.removeChild(this.getChildAt(e),t)},goog.ui.Component.prototype.removeChildren=function(e){for(var t=[];this.hasChildren();)t.push(this.removeChildAt(0,e));return t},goog.ui.Component.prototype.pointerEventsEnabled=function(){return this.pointerEventsEnabled_},goog.ui.Component.prototype.setPointerEventsEnabled=function(e){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.pointerEventsEnabled_=e},goog.a11y={},goog.a11y.aria={},goog.a11y.aria.Role={ALERT:"alert",ALERTDIALOG:"alertdialog",APPLICATION:"application",ARTICLE:"article",BANNER:"banner",BUTTON:"button",CHECKBOX:"checkbox",COLUMNHEADER:"columnheader",COMBOBOX:"combobox",COMPLEMENTARY:"complementary",CONTENTINFO:"contentinfo",DEFINITION:"definition",DIALOG:"dialog",DIRECTORY:"directory",DOCUMENT:"document",FORM:"form",GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",HEADING:"heading",IMG:"img",LINK:"link",LIST:"list",LISTBOX:"listbox",LISTITEM:"listitem",LOG:"log",MAIN:"main",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",NOTE:"note",OPTION:"option",PRESENTATION:"presentation",PROGRESSBAR:"progressbar",RADIO:"radio",RADIOGROUP:"radiogroup",REGION:"region",ROW:"row",ROWGROUP:"rowgroup",ROWHEADER:"rowheader",SCROLLBAR:"scrollbar",SEARCH:"search",SEPARATOR:"separator",SLIDER:"slider",SPINBUTTON:"spinbutton",STATUS:"status",TAB:"tab",TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TEXTBOX:"textbox",TEXTINFO:"textinfo",TIMER:"timer",TOOLBAR:"toolbar",TOOLTIP:"tooltip",TREE:"tree",TREEGRID:"treegrid",TREEITEM:"treeitem"},goog.a11y.aria.State={ACTIVEDESCENDANT:"activedescendant",ATOMIC:"atomic",AUTOCOMPLETE:"autocomplete",BUSY:"busy",CHECKED:"checked",COLINDEX:"colindex",CONTROLS:"controls",DESCRIBEDBY:"describedby",DISABLED:"disabled",DROPEFFECT:"dropeffect",EXPANDED:"expanded",FLOWTO:"flowto",GRABBED:"grabbed",HASPOPUP:"haspopup",HIDDEN:"hidden",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",LIVE:"live",MULTILINE:"multiline",MULTISELECTABLE:"multiselectable",ORIENTATION:"orientation",OWNS:"owns",POSINSET:"posinset",PRESSED:"pressed",READONLY:"readonly",RELEVANT:"relevant",REQUIRED:"required",ROWINDEX:"rowindex",SELECTED:"selected",SETSIZE:"setsize",SORT:"sort",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"},goog.a11y.aria.AutoCompleteValues={INLINE:"inline",LIST:"list",BOTH:"both",NONE:"none"},goog.a11y.aria.DropEffectValues={COPY:"copy",MOVE:"move",LINK:"link",EXECUTE:"execute",POPUP:"popup",NONE:"none"},goog.a11y.aria.LivePriority={OFF:"off",POLITE:"polite",ASSERTIVE:"assertive"},goog.a11y.aria.OrientationValues={VERTICAL:"vertical",HORIZONTAL:"horizontal"},goog.a11y.aria.RelevantValues={ADDITIONS:"additions",REMOVALS:"removals",TEXT:"text",ALL:"all"},goog.a11y.aria.SortValues={ASCENDING:"ascending",DESCENDING:"descending",NONE:"none",OTHER:"other"},goog.a11y.aria.CheckedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"},goog.a11y.aria.ExpandedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"},goog.a11y.aria.GrabbedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"},goog.a11y.aria.InvalidValues={FALSE:"false",TRUE:"true",GRAMMAR:"grammar",SPELLING:"spelling"},goog.a11y.aria.PressedValues={TRUE:"true",FALSE:"false",MIXED:"mixed",UNDEFINED:"undefined"},goog.a11y.aria.SelectedValues={TRUE:"true",FALSE:"false",UNDEFINED:"undefined"},goog.a11y.aria.datatables={},goog.a11y.aria.datatables.getDefaultValuesMap=function(){return goog.a11y.aria.DefaultStateValueMap_||(goog.a11y.aria.DefaultStateValueMap_=goog.object.create(goog.a11y.aria.State.ATOMIC,!1,goog.a11y.aria.State.AUTOCOMPLETE,"none",goog.a11y.aria.State.DROPEFFECT,"none",goog.a11y.aria.State.HASPOPUP,!1,goog.a11y.aria.State.LIVE,"off",goog.a11y.aria.State.MULTILINE,!1,goog.a11y.aria.State.MULTISELECTABLE,!1,goog.a11y.aria.State.ORIENTATION,"vertical",goog.a11y.aria.State.READONLY,!1,goog.a11y.aria.State.RELEVANT,"additions text",goog.a11y.aria.State.REQUIRED,!1,goog.a11y.aria.State.SORT,"none",goog.a11y.aria.State.BUSY,!1,goog.a11y.aria.State.DISABLED,!1,goog.a11y.aria.State.HIDDEN,!1,goog.a11y.aria.State.INVALID,"false")),goog.a11y.aria.DefaultStateValueMap_},goog.a11y.aria.ARIA_PREFIX_="aria-",goog.a11y.aria.ROLE_ATTRIBUTE_="role",goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_=goog.object.createSet("A AREA BUTTON HEAD INPUT LINK MENU META OPTGROUP OPTION PROGRESS STYLE SELECT SOURCE TEXTAREA TITLE TRACK".split(" ")),goog.a11y.aria.CONTAINER_ROLES_=[goog.a11y.aria.Role.COMBOBOX,goog.a11y.aria.Role.GRID,goog.a11y.aria.Role.GROUP,goog.a11y.aria.Role.LISTBOX,goog.a11y.aria.Role.MENU,goog.a11y.aria.Role.MENUBAR,goog.a11y.aria.Role.RADIOGROUP,goog.a11y.aria.Role.ROW,goog.a11y.aria.Role.ROWGROUP,goog.a11y.aria.Role.TAB_LIST,goog.a11y.aria.Role.TEXTBOX,goog.a11y.aria.Role.TOOLBAR,goog.a11y.aria.Role.TREE,goog.a11y.aria.Role.TREEGRID],goog.a11y.aria.setRole=function(e,t){t?(goog.asserts.ENABLE_ASSERTS&&goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.Role,t),"No such ARIA role "+t),e.setAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_,t)):goog.a11y.aria.removeRole(e)},goog.a11y.aria.getRole=function(e){return e.getAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)||null},goog.a11y.aria.removeRole=function(e){e.removeAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_)},goog.a11y.aria.setState=function(e,t,n){goog.isArray(n)&&(n=n.join(" "));var o=goog.a11y.aria.getAriaAttributeName_(t);""===n||null==n?t in(n=goog.a11y.aria.datatables.getDefaultValuesMap())?e.setAttribute(o,n[t]):e.removeAttribute(o):e.setAttribute(o,n)},goog.a11y.aria.toggleState=function(e,t){var n=goog.a11y.aria.getState(e,t);goog.string.isEmptyOrWhitespace(goog.string.makeSafe(n))||"true"==n||"false"==n?goog.a11y.aria.setState(e,t,"true"==n?"false":"true"):goog.a11y.aria.removeState(e,t)},goog.a11y.aria.removeState=function(e,t){e.removeAttribute(goog.a11y.aria.getAriaAttributeName_(t))},goog.a11y.aria.getState=function(e,t){var n=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t));return null==n||null==n?"":String(n)},goog.a11y.aria.getActiveDescendant=function(e){var t=goog.a11y.aria.getState(e,goog.a11y.aria.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(e).getElementById(t)},goog.a11y.aria.setActiveDescendant=function(e,t){var n="";t&&(n=t.id,goog.asserts.assert(n,"The active element should have an id.")),goog.a11y.aria.setState(e,goog.a11y.aria.State.ACTIVEDESCENDANT,n)},goog.a11y.aria.getLabel=function(e){return goog.a11y.aria.getState(e,goog.a11y.aria.State.LABEL)},goog.a11y.aria.setLabel=function(e,t){goog.a11y.aria.setState(e,goog.a11y.aria.State.LABEL,t)},goog.a11y.aria.assertRoleIsSetInternalUtil=function(e,t){if(!goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_[e.tagName]){var n=goog.a11y.aria.getRole(e);goog.asserts.assert(null!=n,"The element ARIA role cannot be null."),goog.asserts.assert(goog.array.contains(t,n),'Non existing or incorrect role set for element.The role set is "'+n+'". The role should be any of "'+t+'". Check the ARIA specification for more details http://www.w3.org/TR/wai-aria/roles.')}},goog.a11y.aria.getStateBoolean=function(e,t){var n=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t));return goog.asserts.assert(goog.isBoolean(n)||null==n||"true"==n||"false"==n),null==n?n:goog.isBoolean(n)?n:"true"==n},goog.a11y.aria.getStateNumber=function(e,t){var n=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t));return goog.asserts.assert(!(null!=n&&isNaN(Number(n))||goog.isBoolean(n))),null==n?null:Number(n)},goog.a11y.aria.getStateString=function(e,t){var n=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t));return goog.asserts.assert((null==n||goog.isString(n))&&(""==n||isNaN(Number(n)))&&"true"!=n&&"false"!=n),null==n||""==n?null:n},goog.a11y.aria.getStringArrayStateInternalUtil=function(e,t){var n=e.getAttribute(goog.a11y.aria.getAriaAttributeName_(t));return goog.a11y.aria.splitStringOnWhitespace_(n)},goog.a11y.aria.hasState=function(e,t){return e.hasAttribute(goog.a11y.aria.getAriaAttributeName_(t))},goog.a11y.aria.isContainerRole=function(e){return e=goog.a11y.aria.getRole(e),goog.array.contains(goog.a11y.aria.CONTAINER_ROLES_,e)},goog.a11y.aria.splitStringOnWhitespace_=function(e){return e?e.split(/\s+/):[]},goog.a11y.aria.getAriaAttributeName_=function(e){return goog.asserts.ENABLE_ASSERTS&&(goog.asserts.assert(e,"ARIA attribute cannot be empty."),goog.asserts.assert(goog.object.containsValue(goog.a11y.aria.State,e),"No such ARIA attribute "+e)),goog.a11y.aria.ARIA_PREFIX_+e},goog.events.KeyCodes={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255},goog.events.KeyCodes.isTextModifyingKeyEvent=function(e){if(e.altKey&&!e.ctrlKey||e.metaKey||e.keyCode>=goog.events.KeyCodes.F1&&e.keyCode<=goog.events.KeyCodes.F12)return!1;switch(e.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SCROLL_LOCK:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.VK_NONAME:case goog.events.KeyCodes.WIN_KEY:case goog.events.KeyCodes.WIN_KEY_RIGHT:return!1;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return!goog.userAgent.GECKO;default:return e.keyCode<goog.events.KeyCodes.FIRST_MEDIA_KEY||e.keyCode>goog.events.KeyCodes.LAST_MEDIA_KEY}},goog.events.KeyCodes.firesKeyPressEvent=function(e,t,n,o,r,i){if(!(goog.userAgent.IE||goog.userAgent.EDGE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525")))return!0;if(goog.userAgent.MAC&&r)return goog.events.KeyCodes.isCharacterKey(e);if(r&&!o)return!1;if(goog.isNumber(t)&&(t=goog.events.KeyCodes.normalizeKeyCode(t)),r=t==goog.events.KeyCodes.CTRL||t==goog.events.KeyCodes.ALT||goog.userAgent.MAC&&t==goog.events.KeyCodes.META,i=t==goog.events.KeyCodes.SHIFT&&(o||i),(!n||goog.userAgent.MAC)&&r||goog.userAgent.MAC&&i)return!1;if((goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&o&&n)switch(e){case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:case goog.events.KeyCodes.TILDE:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:return!1}if(goog.userAgent.IE&&o&&t==e)return!1;switch(e){case goog.events.KeyCodes.ENTER:return!0;case goog.events.KeyCodes.ESC:return!(goog.userAgent.WEBKIT||goog.userAgent.EDGE)}return goog.events.KeyCodes.isCharacterKey(e)},goog.events.KeyCodes.isCharacterKey=function(e){if(e>=goog.events.KeyCodes.ZERO&&e<=goog.events.KeyCodes.NINE||e>=goog.events.KeyCodes.NUM_ZERO&&e<=goog.events.KeyCodes.NUM_MULTIPLY||e>=goog.events.KeyCodes.A&&e<=goog.events.KeyCodes.Z||(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&0==e)return!0;switch(e){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.PLUS_SIGN:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.AT_SIGN:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.FF_SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.FF_EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return!0;default:return!1}},goog.events.KeyCodes.normalizeKeyCode=function(e){return goog.userAgent.GECKO?goog.events.KeyCodes.normalizeGeckoKeyCode(e):goog.userAgent.MAC&&goog.userAgent.WEBKIT?goog.events.KeyCodes.normalizeMacWebKitKeyCode(e):e},goog.events.KeyCodes.normalizeGeckoKeyCode=function(e){switch(e){case goog.events.KeyCodes.FF_EQUALS:return goog.events.KeyCodes.EQUALS;case goog.events.KeyCodes.FF_SEMICOLON:return goog.events.KeyCodes.SEMICOLON;case goog.events.KeyCodes.FF_DASH:return goog.events.KeyCodes.DASH;case goog.events.KeyCodes.MAC_FF_META:return goog.events.KeyCodes.META;case goog.events.KeyCodes.WIN_KEY_FF_LINUX:return goog.events.KeyCodes.WIN_KEY;default:return e}},goog.events.KeyCodes.normalizeMacWebKitKeyCode=function(e){switch(e){case goog.events.KeyCodes.MAC_WK_CMD_RIGHT:return goog.events.KeyCodes.META;default:return e}},goog.events.KeyHandler=function(e,t){goog.events.EventTarget.call(this),e&&this.attach(e,t)},goog.inherits(goog.events.KeyHandler,goog.events.EventTarget),goog.events.KeyHandler.prototype.element_=null,goog.events.KeyHandler.prototype.keyPressKey_=null,goog.events.KeyHandler.prototype.keyDownKey_=null,goog.events.KeyHandler.prototype.keyUpKey_=null,goog.events.KeyHandler.prototype.lastKey_=-1,goog.events.KeyHandler.prototype.keyCode_=-1,goog.events.KeyHandler.prototype.altKey_=!1,goog.events.KeyHandler.EventType={KEY:"key"},goog.events.KeyHandler.safariKey_={3:goog.events.KeyCodes.ENTER,12:goog.events.KeyCodes.NUMLOCK,63232:goog.events.KeyCodes.UP,63233:goog.events.KeyCodes.DOWN,63234:goog.events.KeyCodes.LEFT,63235:goog.events.KeyCodes.RIGHT,63236:goog.events.KeyCodes.F1,63237:goog.events.KeyCodes.F2,63238:goog.events.KeyCodes.F3,63239:goog.events.KeyCodes.F4,63240:goog.events.KeyCodes.F5,63241:goog.events.KeyCodes.F6,63242:goog.events.KeyCodes.F7,63243:goog.events.KeyCodes.F8,63244:goog.events.KeyCodes.F9,63245:goog.events.KeyCodes.F10,63246:goog.events.KeyCodes.F11,63247:goog.events.KeyCodes.F12,63248:goog.events.KeyCodes.PRINT_SCREEN,63272:goog.events.KeyCodes.DELETE,63273:goog.events.KeyCodes.HOME,63275:goog.events.KeyCodes.END,63276:goog.events.KeyCodes.PAGE_UP,63277:goog.events.KeyCodes.PAGE_DOWN,63289:goog.events.KeyCodes.NUMLOCK,63302:goog.events.KeyCodes.INSERT},goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT},goog.events.KeyHandler.USES_KEYDOWN_=goog.userAgent.IE||goog.userAgent.EDGE||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("525"),goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_=goog.userAgent.MAC&&goog.userAgent.GECKO,goog.events.KeyHandler.prototype.handleKeyDown_=function(e){(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!e.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!e.altKey||goog.userAgent.MAC&&this.lastKey_==goog.events.KeyCodes.META&&!e.metaKey)&&this.resetState(),-1==this.lastKey_&&(e.ctrlKey&&e.keyCode!=goog.events.KeyCodes.CTRL?this.lastKey_=goog.events.KeyCodes.CTRL:e.altKey&&e.keyCode!=goog.events.KeyCodes.ALT?this.lastKey_=goog.events.KeyCodes.ALT:e.metaKey&&e.keyCode!=goog.events.KeyCodes.META&&(this.lastKey_=goog.events.KeyCodes.META)),goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(e.keyCode,this.lastKey_,e.shiftKey,e.ctrlKey,e.altKey,e.metaKey)?this.handleEvent(e):(this.keyCode_=goog.events.KeyCodes.normalizeKeyCode(e.keyCode),goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(this.altKey_=e.altKey))},goog.events.KeyHandler.prototype.resetState=function(){this.keyCode_=this.lastKey_=-1},goog.events.KeyHandler.prototype.handleKeyup_=function(e){this.resetState(),this.altKey_=e.altKey},goog.events.KeyHandler.prototype.handleEvent=function(e){var t=e.getBrowserEvent(),n=t.altKey;if(goog.userAgent.IE&&e.type==goog.events.EventType.KEYPRESS)var o=this.keyCode_,r=o!=goog.events.KeyCodes.ENTER&&o!=goog.events.KeyCodes.ESC?t.keyCode:0;else(goog.userAgent.WEBKIT||goog.userAgent.EDGE)&&e.type==goog.events.EventType.KEYPRESS?(o=this.keyCode_,r=0<=t.charCode&&t.charCode<63232&&goog.events.KeyCodes.isCharacterKey(o)?t.charCode:0):goog.userAgent.OPERA&&!goog.userAgent.WEBKIT?(o=this.keyCode_,r=goog.events.KeyCodes.isCharacterKey(o)?t.keyCode:0):(o=t.keyCode||this.keyCode_,r=t.charCode||0,goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_&&(n=this.altKey_),goog.userAgent.MAC&&r==goog.events.KeyCodes.QUESTION_MARK&&o==goog.events.KeyCodes.WIN_KEY&&(o=goog.events.KeyCodes.SLASH));var i=o=goog.events.KeyCodes.normalizeKeyCode(o);o?63232<=o&&o in goog.events.KeyHandler.safariKey_?i=goog.events.KeyHandler.safariKey_[o]:25==o&&e.shiftKey&&(i=9):t.keyIdentifier&&t.keyIdentifier in goog.events.KeyHandler.keyIdentifier_&&(i=goog.events.KeyHandler.keyIdentifier_[t.keyIdentifier]),e=i==this.lastKey_,this.lastKey_=i,(t=new goog.events.KeyEvent(i,r,e,t)).altKey=n,this.dispatchEvent(t)},goog.events.KeyHandler.prototype.getElement=function(){return this.element_},goog.events.KeyHandler.prototype.attach=function(e,t){this.keyUpKey_&&this.detach(),this.element_=e,this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,t),this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,t,this),this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,t,this)},goog.events.KeyHandler.prototype.detach=function(){this.keyPressKey_&&(goog.events.unlistenByKey(this.keyPressKey_),goog.events.unlistenByKey(this.keyDownKey_),goog.events.unlistenByKey(this.keyUpKey_),this.keyUpKey_=this.keyDownKey_=this.keyPressKey_=null),this.element_=null,this.keyCode_=this.lastKey_=-1},goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this),this.detach()},goog.events.KeyEvent=function(e,t,n,o){goog.events.BrowserEvent.call(this,o),this.type=goog.events.KeyHandler.EventType.KEY,this.keyCode=e,this.charCode=t,this.repeat=n},goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent),goog.ui.ComponentUtil={},goog.ui.ComponentUtil.getMouseEventType=function(e){return e.pointerEventsEnabled()?goog.events.PointerAsMouseEventType:goog.events.EventType},goog.dom.classlist={},goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST=!1,goog.dom.classlist.get=function(e){return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList:(e=e.className,goog.isString(e)&&e.match(/\S+/g)||[])},goog.dom.classlist.set=function(e,t){e.className=t},goog.dom.classlist.contains=function(e,t){return goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList.contains(t):goog.array.contains(goog.dom.classlist.get(e),t)},goog.dom.classlist.add=function(e,t){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList.add(t):goog.dom.classlist.contains(e,t)||(e.className+=0<e.className.length?" "+t:t)},goog.dom.classlist.addAll=function(t,e){if(goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||t.classList)goog.array.forEach(e,function(e){goog.dom.classlist.add(t,e)});else{var n={};for(var o in goog.array.forEach(goog.dom.classlist.get(t),function(e){n[e]=!0}),goog.array.forEach(e,function(e){n[e]=!0}),t.className="",n)t.className+=0<t.className.length?" "+o:o}},goog.dom.classlist.remove=function(e,t){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||e.classList?e.classList.remove(t):goog.dom.classlist.contains(e,t)&&(e.className=goog.array.filter(goog.dom.classlist.get(e),function(e){return e!=t}).join(" "))},goog.dom.classlist.removeAll=function(t,n){goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST||t.classList?goog.array.forEach(n,function(e){goog.dom.classlist.remove(t,e)}):t.className=goog.array.filter(goog.dom.classlist.get(t),function(e){return!goog.array.contains(n,e)}).join(" ")},goog.dom.classlist.enable=function(e,t,n){n?goog.dom.classlist.add(e,t):goog.dom.classlist.remove(e,t)},goog.dom.classlist.enableAll=function(e,t,n){(n?goog.dom.classlist.addAll:goog.dom.classlist.removeAll)(e,t)},goog.dom.classlist.swap=function(e,t,n){return!!goog.dom.classlist.contains(e,t)&&(goog.dom.classlist.remove(e,t),goog.dom.classlist.add(e,n),!0)},goog.dom.classlist.toggle=function(e,t){var n=!goog.dom.classlist.contains(e,t);return goog.dom.classlist.enable(e,t,n),n},goog.dom.classlist.addRemove=function(e,t,n){goog.dom.classlist.remove(e,t),goog.dom.classlist.add(e,n)},goog.ui.registry={},goog.ui.registry.getDefaultRenderer=function(e){for(var t;e&&(t=goog.getUid(e),!(t=goog.ui.registry.defaultRenderers_[t]));)e=e.superClass_?e.superClass_.constructor:null;return t?goog.isFunction(t.getInstance)?t.getInstance():new t:null},goog.ui.registry.setDefaultRenderer=function(e,t){if(!goog.isFunction(e))throw Error("Invalid component class "+e);if(!goog.isFunction(t))throw Error("Invalid renderer class "+t);var n=goog.getUid(e);goog.ui.registry.defaultRenderers_[n]=t},goog.ui.registry.getDecoratorByClassName=function(e){return e in goog.ui.registry.decoratorFunctions_?goog.ui.registry.decoratorFunctions_[e]():null},goog.ui.registry.setDecoratorByClassName=function(e,t){if(!e)throw Error("Invalid class name "+e);if(!goog.isFunction(t))throw Error("Invalid decorator function "+t);goog.ui.registry.decoratorFunctions_[e]=t},goog.ui.registry.getDecorator=function(e){goog.asserts.assert(e);for(var t=goog.dom.classlist.get(e),n=0,o=t.length;n<o;n++)if(e=goog.ui.registry.getDecoratorByClassName(t[n]))return e;return null},goog.ui.registry.reset=function(){goog.ui.registry.defaultRenderers_={},goog.ui.registry.decoratorFunctions_={}},goog.ui.registry.defaultRenderers_={},goog.ui.registry.decoratorFunctions_={},goog.ui.ContainerRenderer=function(e){this.ariaRole_=e},goog.addSingletonGetter(goog.ui.ContainerRenderer),goog.ui.ContainerRenderer.getCustomRenderer=function(e,t){var n=new e;return n.getCssClass=function(){return t},n},goog.ui.ContainerRenderer.CSS_CLASS="goog-container",goog.ui.ContainerRenderer.prototype.getAriaRole=function(){return this.ariaRole_},goog.ui.ContainerRenderer.prototype.enableTabIndex=function(e,t){e&&(e.tabIndex=t?0:-1)},goog.ui.ContainerRenderer.prototype.createDom=function(e){return e.getDomHelper().createDom("DIV",this.getClassNames(e).join(" "))},goog.ui.ContainerRenderer.prototype.getContentElement=function(e){return e},goog.ui.ContainerRenderer.prototype.canDecorate=function(e){return"DIV"==e.tagName},goog.ui.ContainerRenderer.prototype.decorate=function(t,e){e.id&&t.setId(e.id);var n=this.getCssClass(),o=!1,r=goog.dom.classlist.get(e);return r&&goog.array.forEach(r,function(e){e==n?o=!0:e&&this.setStateFromClassName(t,e,n)},this),o||goog.dom.classlist.add(e,n),this.decorateChildren(t,this.getContentElement(e)),e},goog.ui.ContainerRenderer.prototype.setStateFromClassName=function(e,t,n){t==n+"-disabled"?e.setEnabled(!1):t==n+"-horizontal"?e.setOrientation(goog.ui.Container.Orientation.HORIZONTAL):t==n+"-vertical"&&e.setOrientation(goog.ui.Container.Orientation.VERTICAL)},goog.ui.ContainerRenderer.prototype.decorateChildren=function(e,t,n){if(t){n=n||t.firstChild;for(var o;n&&n.parentNode==t;){if(o=n.nextSibling,n.nodeType==goog.dom.NodeType.ELEMENT){var r=this.getDecoratorForChild(n);r&&(r.setElementInternal(n),e.isEnabled()||r.setEnabled(!1),e.addChild(r),r.decorate(n))}else n.nodeValue&&""!=goog.string.trim(n.nodeValue)||t.removeChild(n);n=o}}},goog.ui.ContainerRenderer.prototype.getDecoratorForChild=function(e){return goog.ui.registry.getDecorator(e)},goog.ui.ContainerRenderer.prototype.initializeDom=function(e){e=e.getElement(),goog.asserts.assert(e,"The container DOM element cannot be null."),goog.style.setUnselectable(e,!0,goog.userAgent.GECKO),goog.userAgent.IE&&(e.hideFocus=!0);var t=this.getAriaRole();t&&goog.a11y.aria.setRole(e,t)},goog.ui.ContainerRenderer.prototype.getKeyEventTarget=function(e){return e.getElement()},goog.ui.ContainerRenderer.prototype.getCssClass=function(){return goog.ui.ContainerRenderer.CSS_CLASS},goog.ui.ContainerRenderer.prototype.getClassNames=function(e){var t=this.getCssClass(),n=e.getOrientation()==goog.ui.Container.Orientation.HORIZONTAL;return n=[t,n?t+"-horizontal":t+"-vertical"],e.isEnabled()||n.push(t+"-disabled"),n},goog.ui.ContainerRenderer.prototype.getDefaultOrientation=function(){return goog.ui.Container.Orientation.VERTICAL},goog.ui.ControlRenderer=function(){},goog.addSingletonGetter(goog.ui.ControlRenderer),goog.tagUnsealableClass(goog.ui.ControlRenderer),goog.ui.ControlRenderer.getCustomRenderer=function(e,t){var n=new e;return n.getCssClass=function(){return t},n},goog.ui.ControlRenderer.CSS_CLASS="goog-control",goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS=[],goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_=goog.object.create(goog.a11y.aria.Role.BUTTON,goog.a11y.aria.State.PRESSED,goog.a11y.aria.Role.CHECKBOX,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.MENU_ITEM,goog.a11y.aria.State.SELECTED,goog.a11y.aria.Role.MENU_ITEM_CHECKBOX,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.MENU_ITEM_RADIO,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.RADIO,goog.a11y.aria.State.CHECKED,goog.a11y.aria.Role.TAB,goog.a11y.aria.State.SELECTED,goog.a11y.aria.Role.TREEITEM,goog.a11y.aria.State.SELECTED),goog.ui.ControlRenderer.prototype.getAriaRole=function(){},goog.ui.ControlRenderer.prototype.createDom=function(e){return e.getDomHelper().createDom("DIV",this.getClassNames(e).join(" "),e.getContent())},goog.ui.ControlRenderer.prototype.getContentElement=function(e){return e},goog.ui.ControlRenderer.prototype.enableClassName=function(e,t,n){if(e=e.getElement?e.getElement():e){var o=[t];goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&(o=this.getAppliedCombinedClassNames_(goog.dom.classlist.get(e),t)).push(t),goog.dom.classlist.enableAll(e,o,n)}},goog.ui.ControlRenderer.prototype.enableExtraClassName=function(e,t,n){this.enableClassName(e,t,n)},goog.ui.ControlRenderer.prototype.canDecorate=function(e){return!0},goog.ui.ControlRenderer.prototype.decorate=function(e,t){t.id&&e.setId(t.id);var n=this.getContentElement(t);n&&n.firstChild?e.setContentInternal(n.firstChild.nextSibling?goog.array.clone(n.childNodes):n.firstChild):e.setContentInternal(null);var o=0,r=this.getCssClass(),i=this.getStructuralCssClass(),a=!1,s=!1,l=!1,c=goog.array.toArray(goog.dom.classlist.get(t));goog.array.forEach(c,function(e){a||e!=r?s||e!=i?o|=this.getStateFromClass(e):s=!0:(a=!0,i==r&&(s=!0)),this.getStateFromClass(e)==goog.ui.Component.State.DISABLED&&(goog.asserts.assertElement(n),goog.dom.isFocusableTabIndex(n)&&goog.dom.setFocusableTabIndex(n,!1))},this),e.setStateInternal(o),a||(c.push(r),i==r&&(s=!0)),s||c.push(i);var u=e.getExtraClassNames();if(u&&c.push.apply(c,u),goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")){var g=this.getAppliedCombinedClassNames_(c);0<g.length&&(c.push.apply(c,g),l=!0)}return a&&s&&!u&&!l||goog.dom.classlist.set(t,c.join(" ")),t},goog.ui.ControlRenderer.prototype.initializeDom=function(e){e.isRightToLeft()&&this.setRightToLeft(e.getElement(),!0),e.isEnabled()&&this.setFocusable(e,e.isVisible())},goog.ui.ControlRenderer.prototype.setAriaRole=function(e,t){var n=t||this.getAriaRole();n&&(goog.asserts.assert(e,"The element passed as a first parameter cannot be null."),n!=goog.a11y.aria.getRole(e)&&goog.a11y.aria.setRole(e,n))},goog.ui.ControlRenderer.prototype.setAriaStates=function(e,t){goog.asserts.assert(e),goog.asserts.assert(t);var n=e.getAriaLabel();goog.isDefAndNotNull(n)&&this.setAriaLabel(t,n),e.isVisible()||goog.a11y.aria.setState(t,goog.a11y.aria.State.HIDDEN,!e.isVisible()),e.isEnabled()||this.updateAriaState(t,goog.ui.Component.State.DISABLED,!e.isEnabled()),e.isSupportedState(goog.ui.Component.State.SELECTED)&&this.updateAriaState(t,goog.ui.Component.State.SELECTED,e.isSelected()),e.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(t,goog.ui.Component.State.CHECKED,e.isChecked()),e.isSupportedState(goog.ui.Component.State.OPENED)&&this.updateAriaState(t,goog.ui.Component.State.OPENED,e.isOpen())},goog.ui.ControlRenderer.prototype.setAriaLabel=function(e,t){goog.a11y.aria.setLabel(e,t)},goog.ui.ControlRenderer.prototype.setAllowTextSelection=function(e,t){goog.style.setUnselectable(e,!t,!goog.userAgent.IE&&!goog.userAgent.OPERA)},goog.ui.ControlRenderer.prototype.setRightToLeft=function(e,t){this.enableClassName(e,this.getStructuralCssClass()+"-rtl",t)},goog.ui.ControlRenderer.prototype.isFocusable=function(e){var t;return!(!e.isSupportedState(goog.ui.Component.State.FOCUSED)||!(t=e.getKeyEventTarget()))&&goog.dom.isFocusableTabIndex(t)},goog.ui.ControlRenderer.prototype.setFocusable=function(e,t){var n;if(e.isSupportedState(goog.ui.Component.State.FOCUSED)&&(n=e.getKeyEventTarget())){if(!t&&e.isFocused()){try{n.blur()}catch(e){}e.isFocused()&&e.handleBlur(null)}goog.dom.isFocusableTabIndex(n)!=t&&goog.dom.setFocusableTabIndex(n,t)}},goog.ui.ControlRenderer.prototype.setVisible=function(e,t){goog.style.setElementShown(e,t),e&&goog.a11y.aria.setState(e,goog.a11y.aria.State.HIDDEN,!t)},goog.ui.ControlRenderer.prototype.setState=function(e,t,n){var o=e.getElement();if(o){var r=this.getClassForState(t);r&&this.enableClassName(e,r,n),this.updateAriaState(o,t,n)}},goog.ui.ControlRenderer.prototype.updateAriaState=function(e,t,n){goog.ui.ControlRenderer.ariaAttributeMap_||(goog.ui.ControlRenderer.ariaAttributeMap_=goog.object.create(goog.ui.Component.State.DISABLED,goog.a11y.aria.State.DISABLED,goog.ui.Component.State.SELECTED,goog.a11y.aria.State.SELECTED,goog.ui.Component.State.CHECKED,goog.a11y.aria.State.CHECKED,goog.ui.Component.State.OPENED,goog.a11y.aria.State.EXPANDED)),goog.asserts.assert(e,"The element passed as a first parameter cannot be null."),(t=goog.ui.ControlRenderer.getAriaStateForAriaRole_(e,goog.ui.ControlRenderer.ariaAttributeMap_[t]))&&goog.a11y.aria.setState(e,t,n)},goog.ui.ControlRenderer.getAriaStateForAriaRole_=function(e,t){var n=goog.a11y.aria.getRole(e);return n?(n=goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_[n]||t,goog.ui.ControlRenderer.isAriaState_(t)?n:t):t},goog.ui.ControlRenderer.isAriaState_=function(e){return e==goog.a11y.aria.State.CHECKED||e==goog.a11y.aria.State.SELECTED},goog.ui.ControlRenderer.prototype.setContent=function(e,t){var n=this.getContentElement(e);if(n&&(goog.dom.removeChildren(n),t))if(goog.isString(t))goog.dom.setTextContent(n,t);else{var o=function(e){if(e){var t=goog.dom.getOwnerDocument(n);n.appendChild(goog.isString(e)?t.createTextNode(e):e)}};goog.isArray(t)?goog.array.forEach(t,o):!goog.isArrayLike(t)||"nodeType"in t?o(t):goog.array.forEach(goog.array.clone(t),o)}},goog.ui.ControlRenderer.prototype.getKeyEventTarget=function(e){return e.getElement()},goog.ui.ControlRenderer.prototype.getCssClass=function(){return goog.ui.ControlRenderer.CSS_CLASS},goog.ui.ControlRenderer.prototype.getIe6ClassCombinations=function(){return[]},goog.ui.ControlRenderer.prototype.getStructuralCssClass=function(){return this.getCssClass()},goog.ui.ControlRenderer.prototype.getClassNames=function(e){var t=this.getCssClass(),n=[t],o=this.getStructuralCssClass();return o!=t&&n.push(o),t=this.getClassNamesForState(e.getState()),n.push.apply(n,t),(e=e.getExtraClassNames())&&n.push.apply(n,e),goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("7")&&n.push.apply(n,this.getAppliedCombinedClassNames_(n)),n},goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_=function(t,n){var o=[];return n&&(t=goog.array.concat(t,[n])),goog.array.forEach(this.getIe6ClassCombinations(),function(e){!goog.array.every(e,goog.partial(goog.array.contains,t))||n&&!goog.array.contains(e,n)||o.push(e.join("_"))}),o},goog.ui.ControlRenderer.prototype.getClassNamesForState=function(e){for(var t=[];e;){var n=e&-e;t.push(this.getClassForState(n)),e&=~n}return t},goog.ui.ControlRenderer.prototype.getClassForState=function(e){return this.classByState_||this.createClassByStateMap_(),this.classByState_[e]},goog.ui.ControlRenderer.prototype.getStateFromClass=function(e){return this.stateByClass_||this.createStateByClassMap_(),e=parseInt(this.stateByClass_[e],10),isNaN(e)?0:e},goog.ui.ControlRenderer.prototype.createClassByStateMap_=function(){var e=this.getStructuralCssClass(),t=!goog.string.contains(goog.string.normalizeWhitespace(e)," ");goog.asserts.assert(t,"ControlRenderer has an invalid css class: '"+e+"'"),this.classByState_=goog.object.create(goog.ui.Component.State.DISABLED,e+"-disabled",goog.ui.Component.State.HOVER,e+"-hover",goog.ui.Component.State.ACTIVE,e+"-active",goog.ui.Component.State.SELECTED,e+"-selected",goog.ui.Component.State.CHECKED,e+"-checked",goog.ui.Component.State.FOCUSED,e+"-focused",goog.ui.Component.State.OPENED,e+"-open")},goog.ui.ControlRenderer.prototype.createStateByClassMap_=function(){this.classByState_||this.createClassByStateMap_(),this.stateByClass_=goog.object.transpose(this.classByState_)},goog.ui.Control=function(e,t,n){goog.ui.Component.call(this,n),this.renderer_=t||goog.ui.registry.getDefaultRenderer(this.constructor),this.setContentInternal(goog.isDef(e)?e:null),this.ariaLabel_=null},goog.inherits(goog.ui.Control,goog.ui.Component),goog.tagUnsealableClass(goog.ui.Control),goog.ui.Control.registerDecorator=goog.ui.registry.setDecoratorByClassName,goog.ui.Control.getDecorator=goog.ui.registry.getDecorator,goog.ui.Control.prototype.content_=null,goog.ui.Control.prototype.state_=0,goog.ui.Control.prototype.supportedStates_=goog.ui.Component.State.DISABLED|goog.ui.Component.State.HOVER|goog.ui.Component.State.ACTIVE|goog.ui.Component.State.FOCUSED,goog.ui.Control.prototype.autoStates_=goog.ui.Component.State.ALL,goog.ui.Control.prototype.statesWithTransitionEvents_=0,goog.ui.Control.prototype.visible_=!0,goog.ui.Control.prototype.extraClassNames_=null,goog.ui.Control.prototype.handleMouseEvents_=!0,goog.ui.Control.prototype.allowTextSelection_=!1,goog.ui.Control.prototype.preferredAriaRole_=null,goog.ui.Control.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_},goog.ui.Control.prototype.setHandleMouseEvents=function(e){this.isInDocument()&&e!=this.handleMouseEvents_&&this.enableMouseEventHandling_(e),this.handleMouseEvents_=e},goog.ui.Control.prototype.getKeyEventTarget=function(){return this.renderer_.getKeyEventTarget(this)},goog.ui.Control.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler)},goog.ui.Control.prototype.getRenderer=function(){return this.renderer_},goog.ui.Control.prototype.setRenderer=function(e){if(this.isInDocument())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.getElement()&&this.setElementInternal(null),this.renderer_=e},goog.ui.Control.prototype.getExtraClassNames=function(){return this.extraClassNames_},goog.ui.Control.prototype.addClassName=function(e){e&&(this.extraClassNames_?goog.array.contains(this.extraClassNames_,e)||this.extraClassNames_.push(e):this.extraClassNames_=[e],this.renderer_.enableExtraClassName(this,e,!0))},goog.ui.Control.prototype.removeClassName=function(e){e&&this.extraClassNames_&&goog.array.remove(this.extraClassNames_,e)&&(0==this.extraClassNames_.length&&(this.extraClassNames_=null),this.renderer_.enableExtraClassName(this,e,!1))},goog.ui.Control.prototype.enableClassName=function(e,t){t?this.addClassName(e):this.removeClassName(e)},goog.ui.Control.prototype.createDom=function(){var e=this.renderer_.createDom(this);this.setElementInternal(e),this.renderer_.setAriaRole(e,this.getPreferredAriaRole()),this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(e,!1),this.isVisible()||this.renderer_.setVisible(e,!1)},goog.ui.Control.prototype.getPreferredAriaRole=function(){return this.preferredAriaRole_},goog.ui.Control.prototype.setPreferredAriaRole=function(e){this.preferredAriaRole_=e},goog.ui.Control.prototype.getAriaLabel=function(){return this.ariaLabel_},goog.ui.Control.prototype.setAriaLabel=function(e){this.ariaLabel_=e;var t=this.getElement();t&&this.renderer_.setAriaLabel(t,e)},goog.ui.Control.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())},goog.ui.Control.prototype.canDecorate=function(e){return this.renderer_.canDecorate(e)},goog.ui.Control.prototype.decorateInternal=function(e){e=this.renderer_.decorate(this,e),this.setElementInternal(e),this.renderer_.setAriaRole(e,this.getPreferredAriaRole()),this.isAllowTextSelection()||this.renderer_.setAllowTextSelection(e,!1),this.visible_="none"!=e.style.display},goog.ui.Control.prototype.enterDocument=function(){if(goog.ui.Control.superClass_.enterDocument.call(this),this.renderer_.setAriaStates(this,this.getElementStrict()),this.renderer_.initializeDom(this),this.supportedStates_&~goog.ui.Component.State.DISABLED&&(this.isHandleMouseEvents()&&this.enableMouseEventHandling_(!0),this.isSupportedState(goog.ui.Component.State.FOCUSED))){var e=this.getKeyEventTarget();if(e){var t=this.getKeyHandler();t.attach(e),this.getHandler().listen(t,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(e,goog.events.EventType.FOCUS,this.handleFocus).listen(e,goog.events.EventType.BLUR,this.handleBlur)}}},goog.ui.Control.prototype.enableMouseEventHandling_=function(e){var t=goog.ui.ComponentUtil.getMouseEventType(this),n=this.getHandler(),o=this.getElement();e?(n.listen(o,t.MOUSEOVER,this.handleMouseOver).listen(o,t.MOUSEDOWN,this.handleMouseDown).listen(o,[t.MOUSEUP,t.MOUSECANCEL],this.handleMouseUp).listen(o,t.MOUSEOUT,this.handleMouseOut),this.pointerEventsEnabled()&&n.listen(o,goog.events.EventType.GOTPOINTERCAPTURE,this.preventPointerCapture_),this.handleContextMenu!=goog.nullFunction&&n.listen(o,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&(goog.userAgent.isVersionOrHigher(9)||n.listen(o,goog.events.EventType.DBLCLICK,this.handleDblClick),this.ieMouseEventSequenceSimulator_||(this.ieMouseEventSequenceSimulator_=new goog.ui.Control.IeMouseEventSequenceSimulator_(this),this.registerDisposable(this.ieMouseEventSequenceSimulator_)))):(n.unlisten(o,t.MOUSEOVER,this.handleMouseOver).unlisten(o,t.MOUSEDOWN,this.handleMouseDown).unlisten(o,[t.MOUSEUP,t.MOUSECANCEL],this.handleMouseUp).unlisten(o,t.MOUSEOUT,this.handleMouseOut),this.pointerEventsEnabled()&&n.unlisten(o,goog.events.EventType.GOTPOINTERCAPTURE,this.preventPointerCapture_),this.handleContextMenu!=goog.nullFunction&&n.unlisten(o,goog.events.EventType.CONTEXTMENU,this.handleContextMenu),goog.userAgent.IE&&(goog.userAgent.isVersionOrHigher(9)||n.unlisten(o,goog.events.EventType.DBLCLICK,this.handleDblClick),goog.dispose(this.ieMouseEventSequenceSimulator_),this.ieMouseEventSequenceSimulator_=null))},goog.ui.Control.prototype.exitDocument=function(){goog.ui.Control.superClass_.exitDocument.call(this),this.keyHandler_&&this.keyHandler_.detach(),this.isVisible()&&this.isEnabled()&&this.renderer_.setFocusable(this,!1)},goog.ui.Control.prototype.disposeInternal=function(){goog.ui.Control.superClass_.disposeInternal.call(this),this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_),delete this.renderer_,this.ieMouseEventSequenceSimulator_=this.extraClassNames_=this.content_=null},goog.ui.Control.prototype.getContent=function(){return this.content_},goog.ui.Control.prototype.setContent=function(e){this.renderer_.setContent(this.getElement(),e),this.setContentInternal(e)},goog.ui.Control.prototype.setContentInternal=function(e){this.content_=e},goog.ui.Control.prototype.getCaption=function(){var e=this.getContent();return e?(e=goog.isString(e)?e:goog.isArray(e)?goog.array.map(e,goog.dom.getRawTextContent).join(""):goog.dom.getTextContent(e),goog.string.collapseBreakingSpaces(e)):""},goog.ui.Control.prototype.setCaption=function(e){this.setContent(e)},goog.ui.Control.prototype.setRightToLeft=function(e){goog.ui.Control.superClass_.setRightToLeft.call(this,e);var t=this.getElement();t&&this.renderer_.setRightToLeft(t,e)},goog.ui.Control.prototype.isAllowTextSelection=function(){return this.allowTextSelection_},goog.ui.Control.prototype.setAllowTextSelection=function(e){this.allowTextSelection_=e;var t=this.getElement();t&&this.renderer_.setAllowTextSelection(t,e)},goog.ui.Control.prototype.isVisible=function(){return this.visible_},goog.ui.Control.prototype.setVisible=function(e,t){if(t||this.visible_!=e&&this.dispatchEvent(e?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){var n=this.getElement();return n&&this.renderer_.setVisible(n,e),this.isEnabled()&&this.renderer_.setFocusable(this,e),this.visible_=e,!0}return!1},goog.ui.Control.prototype.isEnabled=function(){return!this.hasState(goog.ui.Component.State.DISABLED)},goog.ui.Control.prototype.isParentDisabled_=function(){var e=this.getParent();return!!e&&"function"==typeof e.isEnabled&&!e.isEnabled()},goog.ui.Control.prototype.setEnabled=function(e){!this.isParentDisabled_()&&this.isTransitionAllowed(goog.ui.Component.State.DISABLED,!e)&&(e||(this.setActive(!1),this.setHighlighted(!1)),this.isVisible()&&this.renderer_.setFocusable(this,e),this.setState(goog.ui.Component.State.DISABLED,!e,!0))},goog.ui.Control.prototype.isHighlighted=function(){return this.hasState(goog.ui.Component.State.HOVER)},goog.ui.Control.prototype.setHighlighted=function(e){this.isTransitionAllowed(goog.ui.Component.State.HOVER,e)&&this.setState(goog.ui.Component.State.HOVER,e)},goog.ui.Control.prototype.isActive=function(){return this.hasState(goog.ui.Component.State.ACTIVE)},goog.ui.Control.prototype.setActive=function(e){this.isTransitionAllowed(goog.ui.Component.State.ACTIVE,e)&&this.setState(goog.ui.Component.State.ACTIVE,e)},goog.ui.Control.prototype.isSelected=function(){return this.hasState(goog.ui.Component.State.SELECTED)},goog.ui.Control.prototype.setSelected=function(e){this.isTransitionAllowed(goog.ui.Component.State.SELECTED,e)&&this.setState(goog.ui.Component.State.SELECTED,e)},goog.ui.Control.prototype.isChecked=function(){return this.hasState(goog.ui.Component.State.CHECKED)},goog.ui.Control.prototype.setChecked=function(e){this.isTransitionAllowed(goog.ui.Component.State.CHECKED,e)&&this.setState(goog.ui.Component.State.CHECKED,e)},goog.ui.Control.prototype.isFocused=function(){return this.hasState(goog.ui.Component.State.FOCUSED)},goog.ui.Control.prototype.setFocused=function(e){this.isTransitionAllowed(goog.ui.Component.State.FOCUSED,e)&&this.setState(goog.ui.Component.State.FOCUSED,e)},goog.ui.Control.prototype.isOpen=function(){return this.hasState(goog.ui.Component.State.OPENED)},goog.ui.Control.prototype.setOpen=function(e){this.isTransitionAllowed(goog.ui.Component.State.OPENED,e)&&this.setState(goog.ui.Component.State.OPENED,e)},goog.ui.Control.prototype.getState=function(){return this.state_},goog.ui.Control.prototype.hasState=function(e){return!!(this.state_&e)},goog.ui.Control.prototype.setState=function(e,t,n){n||e!=goog.ui.Component.State.DISABLED?this.isSupportedState(e)&&t!=this.hasState(e)&&(this.renderer_.setState(this,e,t),this.state_=t?this.state_|e:this.state_&~e):this.setEnabled(!t)},goog.ui.Control.prototype.setStateInternal=function(e){this.state_=e},goog.ui.Control.prototype.isSupportedState=function(e){return!!(this.supportedStates_&e)},goog.ui.Control.prototype.setSupportedState=function(e,t){if(this.isInDocument()&&this.hasState(e)&&!t)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);!t&&this.hasState(e)&&this.setState(e,!1),this.supportedStates_=t?this.supportedStates_|e:this.supportedStates_&~e},goog.ui.Control.prototype.isAutoState=function(e){return!!(this.autoStates_&e)&&this.isSupportedState(e)},goog.ui.Control.prototype.setAutoStates=function(e,t){this.autoStates_=t?this.autoStates_|e:this.autoStates_&~e},goog.ui.Control.prototype.isDispatchTransitionEvents=function(e){return!!(this.statesWithTransitionEvents_&e)&&this.isSupportedState(e)},goog.ui.Control.prototype.setDispatchTransitionEvents=function(e,t){this.statesWithTransitionEvents_=t?this.statesWithTransitionEvents_|e:this.statesWithTransitionEvents_&~e},goog.ui.Control.prototype.isTransitionAllowed=function(e,t){return this.isSupportedState(e)&&this.hasState(e)!=t&&(!(this.statesWithTransitionEvents_&e)||this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(e,t)))&&!this.isDisposed()},goog.ui.Control.prototype.handleMouseOver=function(e){!goog.ui.Control.isMouseEventWithinElement_(e,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.ENTER)&&this.isEnabled()&&this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0)},goog.ui.Control.prototype.handleMouseOut=function(e){!goog.ui.Control.isMouseEventWithinElement_(e,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.LEAVE)&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!1))},goog.ui.Control.prototype.preventPointerCapture_=function(e){var t=e.target;t.releasePointerCapture&&t.releasePointerCapture(e.pointerId)},goog.ui.Control.prototype.handleContextMenu=goog.nullFunction,goog.ui.Control.isMouseEventWithinElement_=function(e,t){return!!e.relatedTarget&&goog.dom.contains(t,e.relatedTarget)},goog.ui.Control.prototype.handleMouseDown=function(e){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),e.isMouseActionButton()&&(this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!0),this.renderer_&&this.renderer_.isFocusable(this)&&this.getKeyEventTarget().focus())),!this.isAllowTextSelection()&&e.isMouseActionButton()&&e.preventDefault()},goog.ui.Control.prototype.handleMouseUp=function(e){this.isEnabled()&&(this.isAutoState(goog.ui.Component.State.HOVER)&&this.setHighlighted(!0),this.isActive()&&this.performActionInternal(e)&&this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1))},goog.ui.Control.prototype.handleDblClick=function(e){this.isEnabled()&&this.performActionInternal(e)},goog.ui.Control.prototype.performActionInternal=function(e){this.isAutoState(goog.ui.Component.State.CHECKED)&&this.setChecked(!this.isChecked()),this.isAutoState(goog.ui.Component.State.SELECTED)&&this.setSelected(!0),this.isAutoState(goog.ui.Component.State.OPENED)&&this.setOpen(!this.isOpen());var t=new goog.events.Event(goog.ui.Component.EventType.ACTION,this);return e&&(t.altKey=e.altKey,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.platformModifierKey=e.platformModifierKey),this.dispatchEvent(t)},goog.ui.Control.prototype.handleFocus=function(e){this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!0)},goog.ui.Control.prototype.handleBlur=function(e){this.isAutoState(goog.ui.Component.State.ACTIVE)&&this.setActive(!1),this.isAutoState(goog.ui.Component.State.FOCUSED)&&this.setFocused(!1)},goog.ui.Control.prototype.handleKeyEvent=function(e){return!!(this.isVisible()&&this.isEnabled()&&this.handleKeyEventInternal(e))&&(e.preventDefault(),e.stopPropagation(),!0)},goog.ui.Control.prototype.handleKeyEventInternal=function(e){return e.keyCode==goog.events.KeyCodes.ENTER&&this.performActionInternal(e)},goog.ui.registry.setDefaultRenderer(goog.ui.Control,goog.ui.ControlRenderer),goog.ui.registry.setDecoratorByClassName(goog.ui.ControlRenderer.CSS_CLASS,function(){return new goog.ui.Control(null)}),goog.ui.Control.IeMouseEventSequenceSimulator_=function(e){goog.Disposable.call(this),this.control_=e,this.clickExpected_=!1,this.handler_=new goog.events.EventHandler(this),this.registerDisposable(this.handler_),e=this.control_.getElementStrict(),this.handler_.listen(e,goog.events.EventType.MOUSEDOWN,this.handleMouseDown_).listen(e,goog.events.EventType.MOUSEUP,this.handleMouseUp_).listen(e,goog.events.EventType.CLICK,this.handleClick_)},goog.inherits(goog.ui.Control.IeMouseEventSequenceSimulator_,goog.Disposable),goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_=!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseDown_=function(){this.clickExpected_=!1},goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseUp_=function(){this.clickExpected_=!0},goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_=function(e,t){if(!goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_)return e.button=goog.events.BrowserEvent.MouseButton.LEFT,e.type=t,e;var n=document.createEvent("MouseEvents");return n.initMouseEvent(t,e.bubbles,e.cancelable,e.view||null,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,goog.events.BrowserEvent.MouseButton.LEFT,e.relatedTarget||null),n},goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleClick_=function(e){if(this.clickExpected_)this.clickExpected_=!1;else{var t=e.getBrowserEvent(),n=t.button,o=t.type,r=goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(t,goog.events.EventType.MOUSEDOWN);this.control_.handleMouseDown(new goog.events.BrowserEvent(r,e.currentTarget)),r=goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(t,goog.events.EventType.MOUSEUP),this.control_.handleMouseUp(new goog.events.BrowserEvent(r,e.currentTarget)),goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_||(t.button=n,t.type=o)}},goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal=function(){this.control_=null,goog.ui.Control.IeMouseEventSequenceSimulator_.superClass_.disposeInternal.call(this)},goog.ui.Container=function(e,t,n){goog.ui.Component.call(this,n),this.renderer_=t||goog.ui.ContainerRenderer.getInstance(),this.orientation_=e||this.renderer_.getDefaultOrientation()},goog.inherits(goog.ui.Container,goog.ui.Component),goog.tagUnsealableClass(goog.ui.Container),goog.ui.Container.EventType={AFTER_SHOW:"aftershow",AFTER_HIDE:"afterhide"},goog.ui.Container.Orientation={HORIZONTAL:"horizontal",VERTICAL:"vertical"},goog.ui.Container.prototype.keyEventTarget_=null,goog.ui.Container.prototype.keyHandler_=null,goog.ui.Container.prototype.renderer_=null,goog.ui.Container.prototype.orientation_=null,goog.ui.Container.prototype.visible_=!0,goog.ui.Container.prototype.enabled_=!0,goog.ui.Container.prototype.focusable_=!0,goog.ui.Container.prototype.highlightedIndex_=-1,goog.ui.Container.prototype.openItem_=null,goog.ui.Container.prototype.mouseButtonPressed_=!1,goog.ui.Container.prototype.allowFocusableChildren_=!1,goog.ui.Container.prototype.openFollowsHighlight_=!0,goog.ui.Container.prototype.childElementIdMap_=null,goog.ui.Container.prototype.getKeyEventTarget=function(){return this.keyEventTarget_||this.renderer_.getKeyEventTarget(this)},goog.ui.Container.prototype.setKeyEventTarget=function(e){if(!this.focusable_)throw Error("Can't set key event target for container that doesn't support keyboard focus!");var t=this.getKeyEventTarget(),n=this.isInDocument();this.keyEventTarget_=e;var o=this.getKeyEventTarget();n&&(this.keyEventTarget_=t,this.enableFocusHandling_(!1),this.keyEventTarget_=e,this.getKeyHandler().attach(o),this.enableFocusHandling_(!0))},goog.ui.Container.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler(this.getKeyEventTarget()))},goog.ui.Container.prototype.getRenderer=function(){return this.renderer_},goog.ui.Container.prototype.setRenderer=function(e){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.renderer_=e},goog.ui.Container.prototype.createDom=function(){this.setElementInternal(this.renderer_.createDom(this))},goog.ui.Container.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())},goog.ui.Container.prototype.canDecorate=function(e){return this.renderer_.canDecorate(e)},goog.ui.Container.prototype.decorateInternal=function(e){this.setElementInternal(this.renderer_.decorate(this,e)),"none"==e.style.display&&(this.visible_=!1)},goog.ui.Container.prototype.enterDocument=function(){goog.ui.Container.superClass_.enterDocument.call(this),this.forEachChild(function(e){e.isInDocument()&&this.registerChildId_(e)},this);var e=this.getElement();this.renderer_.initializeDom(this),this.setVisible(this.visible_,!0);var t=goog.ui.ComponentUtil.getMouseEventType(this);this.getHandler().listen(this,goog.ui.Component.EventType.ENTER,this.handleEnterItem).listen(this,goog.ui.Component.EventType.HIGHLIGHT,this.handleHighlightItem).listen(this,goog.ui.Component.EventType.UNHIGHLIGHT,this.handleUnHighlightItem).listen(this,goog.ui.Component.EventType.OPEN,this.handleOpenItem).listen(this,goog.ui.Component.EventType.CLOSE,this.handleCloseItem).listen(e,t.MOUSEDOWN,this.handleMouseDown).listen(goog.dom.getOwnerDocument(e),[t.MOUSEUP,t.MOUSECANCEL],this.handleDocumentMouseUp).listen(e,[t.MOUSEDOWN,t.MOUSEUP,t.MOUSECANCEL,t.MOUSEOVER,t.MOUSEOUT,goog.events.EventType.CONTEXTMENU],this.handleChildMouseEvents),this.pointerEventsEnabled()&&this.getHandler().listen(e,goog.events.EventType.GOTPOINTERCAPTURE,this.preventPointerCapture_),this.isFocusable()&&this.enableFocusHandling_(!0)},goog.ui.Container.prototype.preventPointerCapture_=function(e){var t=e.target;t.releasePointerCapture&&t.releasePointerCapture(e.pointerId)},goog.ui.Container.prototype.enableFocusHandling_=function(e){var t=this.getHandler(),n=this.getKeyEventTarget();e?t.listen(n,goog.events.EventType.FOCUS,this.handleFocus).listen(n,goog.events.EventType.BLUR,this.handleBlur).listen(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent):t.unlisten(n,goog.events.EventType.FOCUS,this.handleFocus).unlisten(n,goog.events.EventType.BLUR,this.handleBlur).unlisten(this.getKeyHandler(),goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent)},goog.ui.Container.prototype.exitDocument=function(){this.setHighlightedIndex(-1),this.openItem_&&this.openItem_.setOpen(!1),this.mouseButtonPressed_=!1,goog.ui.Container.superClass_.exitDocument.call(this)},goog.ui.Container.prototype.disposeInternal=function(){goog.ui.Container.superClass_.disposeInternal.call(this),this.keyHandler_&&(this.keyHandler_.dispose(),this.keyHandler_=null),this.renderer_=this.openItem_=this.childElementIdMap_=this.keyEventTarget_=null},goog.ui.Container.prototype.handleEnterItem=function(e){return!0},goog.ui.Container.prototype.handleHighlightItem=function(e){var t=this.indexOfChild(e.target);if(-1<t&&t!=this.highlightedIndex_){var n=this.getHighlighted();n&&n.setHighlighted(!1),this.highlightedIndex_=t,n=this.getHighlighted(),this.isMouseButtonPressed()&&n.setActive(!0),this.openFollowsHighlight_&&this.openItem_&&n!=this.openItem_&&(n.isSupportedState(goog.ui.Component.State.OPENED)?n.setOpen(!0):this.openItem_.setOpen(!1))}t=this.getElement(),goog.asserts.assert(t,"The DOM element for the container cannot be null."),null!=e.target.getElement()&&goog.a11y.aria.setState(t,goog.a11y.aria.State.ACTIVEDESCENDANT,e.target.getElement().id)},goog.ui.Container.prototype.handleUnHighlightItem=function(e){e.target==this.getHighlighted()&&(this.highlightedIndex_=-1),e=this.getElement(),goog.asserts.assert(e,"The DOM element for the container cannot be null."),goog.a11y.aria.removeState(e,goog.a11y.aria.State.ACTIVEDESCENDANT)},goog.ui.Container.prototype.handleOpenItem=function(e){(e=e.target)&&e!=this.openItem_&&e.getParent()==this&&(this.openItem_&&this.openItem_.setOpen(!1),this.openItem_=e)},goog.ui.Container.prototype.handleCloseItem=function(e){e.target==this.openItem_&&(this.openItem_=null);var t=this.getElement(),n=e.target.getElement();t&&e.target.isHighlighted()&&n&&goog.a11y.aria.setActiveDescendant(t,n)},goog.ui.Container.prototype.handleMouseDown=function(e){this.enabled_&&this.setMouseButtonPressed(!0);var t=this.getKeyEventTarget();t&&goog.dom.isFocusableTabIndex(t)?t.focus():e.preventDefault()},goog.ui.Container.prototype.handleDocumentMouseUp=function(e){this.setMouseButtonPressed(!1)},goog.ui.Container.prototype.handleChildMouseEvents=function(e){var t=goog.ui.ComponentUtil.getMouseEventType(this),n=this.getOwnerControl(e.target);if(n)switch(e.type){case t.MOUSEDOWN:n.handleMouseDown(e);break;case t.MOUSEUP:case t.MOUSECANCEL:n.handleMouseUp(e);break;case t.MOUSEOVER:n.handleMouseOver(e);break;case t.MOUSEOUT:n.handleMouseOut(e);break;case goog.events.EventType.CONTEXTMENU:n.handleContextMenu(e)}},goog.ui.Container.prototype.getOwnerControl=function(e){if(this.childElementIdMap_)for(var t=this.getElement();e&&e!==t;){var n=e.id;if(n in this.childElementIdMap_)return this.childElementIdMap_[n];e=e.parentNode}return null},goog.ui.Container.prototype.handleFocus=function(e){},goog.ui.Container.prototype.handleBlur=function(e){this.setHighlightedIndex(-1),this.setMouseButtonPressed(!1),this.openItem_&&this.openItem_.setOpen(!1)},goog.ui.Container.prototype.handleKeyEvent=function(e){return!(!this.isEnabled()||!this.isVisible()||0==this.getChildCount()&&!this.keyEventTarget_||!this.handleKeyEventInternal(e))&&(e.preventDefault(),e.stopPropagation(),!0)},goog.ui.Container.prototype.handleKeyEventInternal=function(e){var t=this.getHighlighted();if(t&&"function"==typeof t.handleKeyEvent&&t.handleKeyEvent(e)||this.openItem_&&this.openItem_!=t&&"function"==typeof this.openItem_.handleKeyEvent&&this.openItem_.handleKeyEvent(e))return!0;if(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)return!1;switch(e.keyCode){case goog.events.KeyCodes.ESC:if(!this.isFocusable())return!1;this.getKeyEventTarget().blur();break;case goog.events.KeyCodes.HOME:this.highlightFirst();break;case goog.events.KeyCodes.END:this.highlightLast();break;case goog.events.KeyCodes.UP:if(this.orientation_!=goog.ui.Container.Orientation.VERTICAL)return!1;this.highlightPrevious();break;case goog.events.KeyCodes.LEFT:if(this.orientation_!=goog.ui.Container.Orientation.HORIZONTAL)return!1;this.isRightToLeft()?this.highlightNext():this.highlightPrevious();break;case goog.events.KeyCodes.DOWN:if(this.orientation_!=goog.ui.Container.Orientation.VERTICAL)return!1;this.highlightNext();break;case goog.events.KeyCodes.RIGHT:if(this.orientation_!=goog.ui.Container.Orientation.HORIZONTAL)return!1;this.isRightToLeft()?this.highlightPrevious():this.highlightNext();break;default:return!1}return!0},goog.ui.Container.prototype.registerChildId_=function(e){var t=e.getElement();t=t.id||(t.id=e.getId()),this.childElementIdMap_||(this.childElementIdMap_={}),this.childElementIdMap_[t]=e},goog.ui.Container.prototype.addChild=function(e,t){goog.asserts.assertInstanceof(e,goog.ui.Control,"The child of a container must be a control"),goog.ui.Container.superClass_.addChild.call(this,e,t)},goog.ui.Container.prototype.addChildAt=function(e,t,n){goog.asserts.assertInstanceof(e,goog.ui.Control),e.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0),e.setDispatchTransitionEvents(goog.ui.Component.State.OPENED,!0),!this.isFocusable()&&this.isFocusableChildrenAllowed()||e.setSupportedState(goog.ui.Component.State.FOCUSED,!1),e.setHandleMouseEvents(!1);var o=e.getParent()==this?this.indexOfChild(e):-1;goog.ui.Container.superClass_.addChildAt.call(this,e,t,n),e.isInDocument()&&this.isInDocument()&&this.registerChildId_(e),this.updateHighlightedIndex_(o,t)},goog.ui.Container.prototype.updateHighlightedIndex_=function(e,t){-1==e&&(e=this.getChildCount()),e==this.highlightedIndex_?this.highlightedIndex_=Math.min(this.getChildCount()-1,t):e>this.highlightedIndex_&&t<=this.highlightedIndex_?this.highlightedIndex_++:e<this.highlightedIndex_&&t>this.highlightedIndex_&&this.highlightedIndex_--},goog.ui.Container.prototype.removeChild=function(e,t){if(e=goog.isString(e)?this.getChild(e):e,goog.asserts.assertInstanceof(e,goog.ui.Control),e){var n=this.indexOfChild(e);-1!=n&&(n==this.highlightedIndex_?(e.setHighlighted(!1),this.highlightedIndex_=-1):n<this.highlightedIndex_&&this.highlightedIndex_--),(n=e.getElement())&&n.id&&this.childElementIdMap_&&goog.object.remove(this.childElementIdMap_,n.id)}return(e=goog.ui.Container.superClass_.removeChild.call(this,e,t)).setHandleMouseEvents(!0),e},goog.ui.Container.prototype.getOrientation=function(){return this.orientation_},goog.ui.Container.prototype.setOrientation=function(e){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.orientation_=e},goog.ui.Container.prototype.isVisible=function(){return this.visible_},goog.ui.Container.prototype.setVisible=function(e,t){if(t||this.visible_!=e&&this.dispatchEvent(e?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){this.visible_=e;var n=this.getElement();return n&&(goog.style.setElementShown(n,e),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),this.enabled_&&this.visible_),t||this.dispatchEvent(this.visible_?goog.ui.Container.EventType.AFTER_SHOW:goog.ui.Container.EventType.AFTER_HIDE)),!0}return!1},goog.ui.Container.prototype.isEnabled=function(){return this.enabled_},goog.ui.Container.prototype.setEnabled=function(e){this.enabled_!=e&&this.dispatchEvent(e?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE)&&(e?(this.enabled_=!0,this.forEachChild(function(e){e.wasDisabled?delete e.wasDisabled:e.setEnabled(!0)})):(this.forEachChild(function(e){e.isEnabled()?e.setEnabled(!1):e.wasDisabled=!0}),this.enabled_=!1,this.setMouseButtonPressed(!1)),this.isFocusable()&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),e&&this.visible_))},goog.ui.Container.prototype.isFocusable=function(){return this.focusable_},goog.ui.Container.prototype.setFocusable=function(e){e!=this.focusable_&&this.isInDocument()&&this.enableFocusHandling_(e),this.focusable_=e,this.enabled_&&this.visible_&&this.renderer_.enableTabIndex(this.getKeyEventTarget(),e)},goog.ui.Container.prototype.isFocusableChildrenAllowed=function(){return this.allowFocusableChildren_},goog.ui.Container.prototype.setFocusableChildrenAllowed=function(e){this.allowFocusableChildren_=e},goog.ui.Container.prototype.isOpenFollowsHighlight=function(){return this.openFollowsHighlight_},goog.ui.Container.prototype.setOpenFollowsHighlight=function(e){this.openFollowsHighlight_=e},goog.ui.Container.prototype.getHighlightedIndex=function(){return this.highlightedIndex_},goog.ui.Container.prototype.setHighlightedIndex=function(e){(e=this.getChildAt(e))?e.setHighlighted(!0):-1<this.highlightedIndex_&&this.getHighlighted().setHighlighted(!1)},goog.ui.Container.prototype.setHighlighted=function(e){this.setHighlightedIndex(this.indexOfChild(e))},goog.ui.Container.prototype.getHighlighted=function(){return this.getChildAt(this.highlightedIndex_)},goog.ui.Container.prototype.highlightFirst=function(){this.highlightHelper(function(e,t){return(e+1)%t},this.getChildCount()-1)},goog.ui.Container.prototype.highlightLast=function(){this.highlightHelper(function(e,t){return--e<0?t-1:e},0)},goog.ui.Container.prototype.highlightNext=function(){this.highlightHelper(function(e,t){return(e+1)%t},this.highlightedIndex_)},goog.ui.Container.prototype.highlightPrevious=function(){this.highlightHelper(function(e,t){return--e<0?t-1:e},this.highlightedIndex_)},goog.ui.Container.prototype.highlightHelper=function(e,t){var n=t<0?this.indexOfChild(this.openItem_):t,o=this.getChildCount();n=e.call(this,n,o);for(var r=0;r<=o;){var i=this.getChildAt(n);if(i&&this.canHighlightItem(i))return this.setHighlightedIndexFromKeyEvent(n),!0;r++,n=e.call(this,n,o)}return!1},goog.ui.Container.prototype.canHighlightItem=function(e){return e.isVisible()&&e.isEnabled()&&e.isSupportedState(goog.ui.Component.State.HOVER)},goog.ui.Container.prototype.setHighlightedIndexFromKeyEvent=function(e){this.setHighlightedIndex(e)},goog.ui.Container.prototype.getOpenItem=function(){return this.openItem_},goog.ui.Container.prototype.isMouseButtonPressed=function(){return this.mouseButtonPressed_},goog.ui.Container.prototype.setMouseButtonPressed=function(e){this.mouseButtonPressed_=e},goog.ui.MenuHeaderRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.MenuHeaderRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.MenuHeaderRenderer),goog.ui.MenuHeaderRenderer.CSS_CLASS="goog-menuheader",goog.ui.MenuHeaderRenderer.prototype.getCssClass=function(){return goog.ui.MenuHeaderRenderer.CSS_CLASS},goog.ui.MenuHeader=function(e,t,n){goog.ui.Control.call(this,e,n||goog.ui.MenuHeaderRenderer.getInstance(),t),this.setSupportedState(goog.ui.Component.State.DISABLED,!1),this.setSupportedState(goog.ui.Component.State.HOVER,!1),this.setSupportedState(goog.ui.Component.State.ACTIVE,!1),this.setSupportedState(goog.ui.Component.State.FOCUSED,!1),this.setStateInternal(goog.ui.Component.State.DISABLED)},goog.inherits(goog.ui.MenuHeader,goog.ui.Control),goog.ui.registry.setDecoratorByClassName(goog.ui.MenuHeaderRenderer.CSS_CLASS,function(){return new goog.ui.MenuHeader(null)}),goog.ui.MenuItemRenderer=function(){goog.ui.ControlRenderer.call(this),this.classNameCache_=[]},goog.inherits(goog.ui.MenuItemRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.MenuItemRenderer),goog.ui.MenuItemRenderer.CSS_CLASS="goog-menuitem",goog.ui.MenuItemRenderer.CompositeCssClassIndex_={HOVER:0,CHECKBOX:1,CONTENT:2},goog.ui.MenuItemRenderer.prototype.getCompositeCssClass_=function(e){var t=this.classNameCache_[e];if(!t){switch(e){case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER:t=this.getStructuralCssClass()+"-highlight";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX:t=this.getStructuralCssClass()+"-checkbox";break;case goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT:t=this.getStructuralCssClass()+"-content"}this.classNameCache_[e]=t}return t},goog.ui.MenuItemRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.MENU_ITEM},goog.ui.MenuItemRenderer.prototype.createDom=function(e){var t=e.getDomHelper().createDom("DIV",this.getClassNames(e).join(" "),this.createContent(e.getContent(),e.getDomHelper()));return this.setEnableCheckBoxStructure(e,t,e.isSupportedState(goog.ui.Component.State.SELECTED)||e.isSupportedState(goog.ui.Component.State.CHECKED)),t},goog.ui.MenuItemRenderer.prototype.getContentElement=function(e){return e&&e.firstChild},goog.ui.MenuItemRenderer.prototype.decorate=function(e,t){return goog.asserts.assert(t),this.hasContentStructure(t)||t.appendChild(this.createContent(t.childNodes,e.getDomHelper())),goog.dom.classlist.contains(t,"goog-option")&&(e.setCheckable(!0),this.setCheckable(e,t,!0)),goog.ui.MenuItemRenderer.superClass_.decorate.call(this,e,t)},goog.ui.MenuItemRenderer.prototype.setContent=function(e,t){var n=this.getContentElement(e),o=this.hasCheckBoxStructure(e)?n.firstChild:null;goog.ui.MenuItemRenderer.superClass_.setContent.call(this,e,t),o&&!this.hasCheckBoxStructure(e)&&n.insertBefore(o,n.firstChild||null)},goog.ui.MenuItemRenderer.prototype.hasContentStructure=function(e){e=goog.dom.getFirstElementChild(e);var t=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return!!e&&goog.dom.classlist.contains(e,t)},goog.ui.MenuItemRenderer.prototype.createContent=function(e,t){var n=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CONTENT);return t.createDom("DIV",n,e)},goog.ui.MenuItemRenderer.prototype.setSelectable=function(e,t,n){e&&t&&this.setEnableCheckBoxStructure(e,t,n)},goog.ui.MenuItemRenderer.prototype.setCheckable=function(e,t,n){e&&t&&this.setEnableCheckBoxStructure(e,t,n)},goog.ui.MenuItemRenderer.prototype.hasCheckBoxStructure=function(e){if(e=this.getContentElement(e)){e=e.firstChild;var t=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX);return!!e&&goog.dom.isElement(e)&&goog.dom.classlist.contains(e,t)}return!1},goog.ui.MenuItemRenderer.prototype.setEnableCheckBoxStructure=function(e,t,n){this.setAriaRole(t,e.getPreferredAriaRole()),this.setAriaStates(e,t),n!=this.hasCheckBoxStructure(t)&&(goog.dom.classlist.enable(t,"goog-option",n),t=this.getContentElement(t),n?(n=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.CHECKBOX),t.insertBefore(e.getDomHelper().createDom("DIV",n),t.firstChild||null)):t.removeChild(t.firstChild))},goog.ui.MenuItemRenderer.prototype.getClassForState=function(e){switch(e){case goog.ui.Component.State.HOVER:return this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);case goog.ui.Component.State.CHECKED:case goog.ui.Component.State.SELECTED:return"goog-option-selected";default:return goog.ui.MenuItemRenderer.superClass_.getClassForState.call(this,e)}},goog.ui.MenuItemRenderer.prototype.getStateFromClass=function(e){var t=this.getCompositeCssClass_(goog.ui.MenuItemRenderer.CompositeCssClassIndex_.HOVER);switch(e){case"goog-option-selected":return goog.ui.Component.State.CHECKED;case t:return goog.ui.Component.State.HOVER;default:return goog.ui.MenuItemRenderer.superClass_.getStateFromClass.call(this,e)}},goog.ui.MenuItemRenderer.prototype.getCssClass=function(){return goog.ui.MenuItemRenderer.CSS_CLASS},goog.ui.MenuItem=function(e,t,n,o){goog.ui.Control.call(this,e,o||goog.ui.MenuItemRenderer.getInstance(),n),this.setValue(t)},goog.inherits(goog.ui.MenuItem,goog.ui.Control),goog.tagUnsealableClass(goog.ui.MenuItem),goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_="goog-menuitem-mnemonic-separator",goog.ui.MenuItem.ACCELERATOR_CLASS="goog-menuitem-accel",goog.ui.MenuItem.prototype.getValue=function(){var e=this.getModel();return null!=e?e:this.getCaption()},goog.ui.MenuItem.prototype.setValue=function(e){this.setModel(e)},goog.ui.MenuItem.prototype.setSupportedState=function(e,t){switch(goog.ui.MenuItem.superClass_.setSupportedState.call(this,e,t),e){case goog.ui.Component.State.SELECTED:this.setSelectableInternal_(t);break;case goog.ui.Component.State.CHECKED:this.setCheckableInternal_(t)}},goog.ui.MenuItem.prototype.setSelectable=function(e){this.setSupportedState(goog.ui.Component.State.SELECTED,e)},goog.ui.MenuItem.prototype.setSelectableInternal_=function(e){this.isChecked()&&!e&&this.setChecked(!1);var t=this.getElement();t&&this.getRenderer().setSelectable(this,t,e)},goog.ui.MenuItem.prototype.setCheckable=function(e){this.setSupportedState(goog.ui.Component.State.CHECKED,e)},goog.ui.MenuItem.prototype.setCheckableInternal_=function(e){var t=this.getElement();t&&this.getRenderer().setCheckable(this,t,e)},goog.ui.MenuItem.prototype.getCaption=function(){var e=this.getContent();if(goog.isArray(e)){var t=goog.ui.MenuItem.ACCELERATOR_CLASS,n=goog.ui.MenuItem.MNEMONIC_WRAPPER_CLASS_;return e=goog.array.map(e,function(e){return goog.dom.isElement(e)&&(goog.dom.classlist.contains(e,t)||goog.dom.classlist.contains(e,n))?"":goog.dom.getRawTextContent(e)}).join(""),goog.string.collapseBreakingSpaces(e)}return goog.ui.MenuItem.superClass_.getCaption.call(this)},goog.ui.MenuItem.prototype.getAccelerator=function(){var e=this.getDomHelper(),t=this.getContent();return goog.isArray(t)&&(t=goog.array.find(t,function(e){return goog.dom.classlist.contains(e,goog.ui.MenuItem.ACCELERATOR_CLASS)}))?e.getTextContent(t):null},goog.ui.MenuItem.prototype.handleMouseUp=function(e){var t=this.getParent();if(t){var n=t.openingCoords;if(t.openingCoords=null,n&&goog.isNumber(e.clientX)&&(t=new goog.math.Coordinate(e.clientX,e.clientY),goog.math.Coordinate.equals(n,t)))return}goog.ui.MenuItem.superClass_.handleMouseUp.call(this,e)},goog.ui.MenuItem.prototype.handleKeyEventInternal=function(e){return!(e.keyCode!=this.getMnemonic()||!this.performActionInternal(e))||goog.ui.MenuItem.superClass_.handleKeyEventInternal.call(this,e)},goog.ui.MenuItem.prototype.setMnemonic=function(e){this.mnemonicKey_=e},goog.ui.MenuItem.prototype.getMnemonic=function(){return this.mnemonicKey_},goog.ui.registry.setDecoratorByClassName(goog.ui.MenuItemRenderer.CSS_CLASS,function(){return new goog.ui.MenuItem(null)}),goog.ui.MenuItem.prototype.getPreferredAriaRole=function(){return this.isSupportedState(goog.ui.Component.State.CHECKED)?goog.a11y.aria.Role.MENU_ITEM_CHECKBOX:this.isSupportedState(goog.ui.Component.State.SELECTED)?goog.a11y.aria.Role.MENU_ITEM_RADIO:goog.ui.MenuItem.superClass_.getPreferredAriaRole.call(this)},goog.ui.MenuItem.prototype.getParent=function(){return goog.ui.Control.prototype.getParent.call(this)},goog.ui.MenuItem.prototype.getParentEventTarget=function(){return goog.ui.Control.prototype.getParentEventTarget.call(this)},goog.ui.MenuSeparatorRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.MenuSeparatorRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.MenuSeparatorRenderer),goog.ui.MenuSeparatorRenderer.CSS_CLASS="goog-menuseparator",goog.ui.MenuSeparatorRenderer.prototype.createDom=function(e){return e.getDomHelper().createDom("DIV",this.getCssClass())},goog.ui.MenuSeparatorRenderer.prototype.decorate=function(e,t){if(t.id&&e.setId(t.id),"HR"==t.tagName){var n=t;t=this.createDom(e),goog.dom.insertSiblingBefore(t,n),goog.dom.removeNode(n)}else goog.dom.classlist.add(t,this.getCssClass());return t},goog.ui.MenuSeparatorRenderer.prototype.setContent=function(e,t){},goog.ui.MenuSeparatorRenderer.prototype.getCssClass=function(){return goog.ui.MenuSeparatorRenderer.CSS_CLASS},goog.ui.Separator=function(e,t){goog.ui.Control.call(this,null,e||goog.ui.MenuSeparatorRenderer.getInstance(),t),this.setSupportedState(goog.ui.Component.State.DISABLED,!1),this.setSupportedState(goog.ui.Component.State.HOVER,!1),this.setSupportedState(goog.ui.Component.State.ACTIVE,!1),this.setSupportedState(goog.ui.Component.State.FOCUSED,!1),this.setStateInternal(goog.ui.Component.State.DISABLED)},goog.inherits(goog.ui.Separator,goog.ui.Control),goog.ui.Separator.prototype.enterDocument=function(){goog.ui.Separator.superClass_.enterDocument.call(this);var e=this.getElement();goog.asserts.assert(e,"The DOM element for the separator cannot be null."),goog.a11y.aria.setRole(e,"separator")},goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator}),goog.ui.MenuRenderer=function(e){goog.ui.ContainerRenderer.call(this,e||goog.a11y.aria.Role.MENU)},goog.inherits(goog.ui.MenuRenderer,goog.ui.ContainerRenderer),goog.addSingletonGetter(goog.ui.MenuRenderer),goog.ui.MenuRenderer.CSS_CLASS="goog-menu",goog.ui.MenuRenderer.prototype.canDecorate=function(e){return"UL"==e.tagName||goog.ui.MenuRenderer.superClass_.canDecorate.call(this,e)},goog.ui.MenuRenderer.prototype.getDecoratorForChild=function(e){return"HR"==e.tagName?new goog.ui.Separator:goog.ui.MenuRenderer.superClass_.getDecoratorForChild.call(this,e)},goog.ui.MenuRenderer.prototype.containsElement=function(e,t){return goog.dom.contains(e.getElement(),t)},goog.ui.MenuRenderer.prototype.getCssClass=function(){return goog.ui.MenuRenderer.CSS_CLASS},goog.ui.MenuRenderer.prototype.initializeDom=function(e){goog.ui.MenuRenderer.superClass_.initializeDom.call(this,e),e=e.getElement(),goog.asserts.assert(e,"The menu DOM element cannot be null."),goog.a11y.aria.setState(e,goog.a11y.aria.State.HASPOPUP,"true")},goog.ui.MenuSeparator=function(e){goog.ui.Separator.call(this,goog.ui.MenuSeparatorRenderer.getInstance(),e)},goog.inherits(goog.ui.MenuSeparator,goog.ui.Separator),goog.ui.registry.setDecoratorByClassName(goog.ui.MenuSeparatorRenderer.CSS_CLASS,function(){return new goog.ui.Separator}),goog.ui.Menu=function(e,t){goog.ui.Container.call(this,goog.ui.Container.Orientation.VERTICAL,t||goog.ui.MenuRenderer.getInstance(),e),this.setFocusable(!1)},goog.inherits(goog.ui.Menu,goog.ui.Container),goog.tagUnsealableClass(goog.ui.Menu),goog.ui.Menu.EventType={BEFORE_SHOW:goog.ui.Component.EventType.BEFORE_SHOW,SHOW:goog.ui.Component.EventType.SHOW,BEFORE_HIDE:goog.ui.Component.EventType.HIDE,HIDE:goog.ui.Component.EventType.HIDE},goog.ui.Menu.CSS_CLASS=goog.ui.MenuRenderer.CSS_CLASS,goog.ui.Menu.prototype.allowAutoFocus_=!0,goog.ui.Menu.prototype.allowHighlightDisabled_=!1,goog.ui.Menu.prototype.getCssClass=function(){return this.getRenderer().getCssClass()},goog.ui.Menu.prototype.containsElement=function(e){if(this.getRenderer().containsElement(this,e))return!0;for(var t=0,n=this.getChildCount();t<n;t++){var o=this.getChildAt(t);if("function"==typeof o.containsElement&&o.containsElement(e))return!0}return!1},goog.ui.Menu.prototype.addItem=function(e){this.addChild(e,!0)},goog.ui.Menu.prototype.addItemAt=function(e,t){this.addChildAt(e,t,!0)},goog.ui.Menu.prototype.removeItem=function(e){(e=this.removeChild(e,!0))&&e.dispose()},goog.ui.Menu.prototype.removeItemAt=function(e){(e=this.removeChildAt(e,!0))&&e.dispose()},goog.ui.Menu.prototype.getItemAt=function(e){return this.getChildAt(e)},goog.ui.Menu.prototype.getItemCount=function(){return this.getChildCount()},goog.ui.Menu.prototype.getItems=function(){var t=[];return this.forEachChild(function(e){t.push(e)}),t},goog.ui.Menu.prototype.setPosition=function(e,t){var n=this.isVisible();n||goog.style.setElementShown(this.getElement(),!0),goog.style.setPageOffset(this.getElement(),e,t),n||goog.style.setElementShown(this.getElement(),!1)},goog.ui.Menu.prototype.getPosition=function(){return this.isVisible()?goog.style.getPageOffset(this.getElement()):null},goog.ui.Menu.prototype.setAllowAutoFocus=function(e){(this.allowAutoFocus_=e)&&this.setFocusable(!0)},goog.ui.Menu.prototype.getAllowAutoFocus=function(){return this.allowAutoFocus_},goog.ui.Menu.prototype.setAllowHighlightDisabled=function(e){this.allowHighlightDisabled_=e},goog.ui.Menu.prototype.getAllowHighlightDisabled=function(){return this.allowHighlightDisabled_},goog.ui.Menu.prototype.setVisible=function(e,t,n){return(t=goog.ui.Menu.superClass_.setVisible.call(this,e,t))&&e&&this.isInDocument()&&this.allowAutoFocus_&&this.getKeyEventTarget().focus(),e&&n&&goog.isNumber(n.clientX)?this.openingCoords=new goog.math.Coordinate(n.clientX,n.clientY):this.openingCoords=null,t},goog.ui.Menu.prototype.handleEnterItem=function(e){return this.allowAutoFocus_&&this.getKeyEventTarget().focus(),goog.ui.Menu.superClass_.handleEnterItem.call(this,e)},goog.ui.Menu.prototype.highlightNextPrefix=function(e){var i=new RegExp("^"+goog.string.regExpEscape(e),"i");return this.highlightHelper(function(e,t){var n=e<0?0:e,o=!1;do{++e==t&&(o=!(e=0));var r=this.getChildAt(e).getCaption();if(r&&r.match(i))return e}while(!o||e!=n);return this.getHighlightedIndex()},this.getHighlightedIndex())},goog.ui.Menu.prototype.canHighlightItem=function(e){return(this.allowHighlightDisabled_||e.isEnabled())&&e.isVisible()&&e.isSupportedState(goog.ui.Component.State.HOVER)},goog.ui.Menu.prototype.decorateInternal=function(e){this.decorateContent(e),goog.ui.Menu.superClass_.decorateInternal.call(this,e)},goog.ui.Menu.prototype.handleKeyEventInternal=function(t){var n=goog.ui.Menu.superClass_.handleKeyEventInternal.call(this,t);return n||this.forEachChild(function(e){!n&&e.getMnemonic&&e.getMnemonic()==t.keyCode&&(this.isEnabled()&&this.setHighlighted(e),n=e.handleKeyEvent(t))},this),n},goog.ui.Menu.prototype.setHighlightedIndex=function(e){goog.ui.Menu.superClass_.setHighlightedIndex.call(this,e),(e=this.getChildAt(e))&&goog.style.scrollIntoContainerView(e.getElement(),this.getElement())},goog.ui.Menu.prototype.decorateContent=function(e){for(var t=this.getRenderer(),n=(e=this.getDomHelper().getElementsByTagNameAndClass("DIV",t.getCssClass()+"-content",e)).length,o=0;o<n;o++)t.decorateChildren(this,e[o])},goog.iter={},goog.iter.StopIteration="StopIteration"in goog.global?goog.global.StopIteration:{message:"StopIteration",stack:""},goog.iter.Iterator=function(){},goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration},goog.iter.Iterator.prototype.__iterator__=function(e){return this},goog.iter.toIterator=function(e){if(e instanceof goog.iter.Iterator)return e;if("function"==typeof e.__iterator__)return e.__iterator__(!1);if(goog.isArrayLike(e)){var t=0,n=new goog.iter.Iterator;return n.next=function(){for(;;){if(t>=e.length)throw goog.iter.StopIteration;if(t in e)return e[t++];t++}},n}throw Error("Not implemented")},goog.iter.forEach=function(e,t,n){if(goog.isArrayLike(e))try{goog.array.forEach(e,t,n)}catch(e){if(e!==goog.iter.StopIteration)throw e}else{e=goog.iter.toIterator(e);try{for(;;)t.call(n,e.next(),void 0,e)}catch(e){if(e!==goog.iter.StopIteration)throw e}}},goog.iter.filter=function(e,t,n){var o=goog.iter.toIterator(e);return(e=new goog.iter.Iterator).next=function(){for(;;){var e=o.next();if(t.call(n,e,void 0,o))return e}},e},goog.iter.filterFalse=function(e,t,n){return goog.iter.filter(e,goog.functions.not(t),n)},goog.iter.range=function(e,t,n){var o=0,r=e,i=n||1;if(1<arguments.length&&(o=e,r=+t),0==i)throw Error("Range step argument must not be zero");var a=new goog.iter.Iterator;return a.next=function(){if(0<i&&r<=o||i<0&&o<=r)throw goog.iter.StopIteration;var e=o;return o+=i,e},a},goog.iter.join=function(e,t){return goog.iter.toArray(e).join(t)},goog.iter.map=function(e,t,n){var o=goog.iter.toIterator(e);return(e=new goog.iter.Iterator).next=function(){var e=o.next();return t.call(n,e,void 0,o)},e},goog.iter.reduce=function(e,t,n,o){var r=n;return goog.iter.forEach(e,function(e){r=t.call(o,r,e)}),r},goog.iter.some=function(e,t,n){e=goog.iter.toIterator(e);try{for(;;)if(t.call(n,e.next(),void 0,e))return!0}catch(e){if(e!==goog.iter.StopIteration)throw e}return!1},goog.iter.every=function(e,t,n){e=goog.iter.toIterator(e);try{for(;;)if(!t.call(n,e.next(),void 0,e))return!1}catch(e){if(e!==goog.iter.StopIteration)throw e}return!0},goog.iter.chain=function(e){return goog.iter.chainFromIterable(arguments)},goog.iter.chainFromIterable=function(e){var t=goog.iter.toIterator(e);e=new goog.iter.Iterator;var n=null;return e.next=function(){for(;;){if(null==n){var e=t.next();n=goog.iter.toIterator(e)}try{return n.next()}catch(e){if(e!==goog.iter.StopIteration)throw e;n=null}}},e},goog.iter.dropWhile=function(e,t,n){var o=goog.iter.toIterator(e);e=new goog.iter.Iterator;var r=!0;return e.next=function(){for(;;){var e=o.next();if(!r||!t.call(n,e,void 0,o))return r=!1,e}},e},goog.iter.takeWhile=function(e,t,n){var o=goog.iter.toIterator(e);return(e=new goog.iter.Iterator).next=function(){var e=o.next();if(t.call(n,e,void 0,o))return e;throw goog.iter.StopIteration},e},goog.iter.toArray=function(e){if(goog.isArrayLike(e))return goog.array.toArray(e);e=goog.iter.toIterator(e);var t=[];return goog.iter.forEach(e,function(e){t.push(e)}),t},goog.iter.equals=function(e,t,n){e=goog.iter.zipLongest({},e,t);var o=n||goog.array.defaultCompareEquality;return goog.iter.every(e,function(e){return o(e[0],e[1])})},goog.iter.nextOrValue=function(e,t){try{return goog.iter.toIterator(e).next()}catch(e){if(e!=goog.iter.StopIteration)throw e;return t}},goog.iter.product=function(e){if(goog.array.some(arguments,function(e){return!e.length})||!arguments.length)return new goog.iter.Iterator;var t=new goog.iter.Iterator,n=arguments,o=goog.array.repeat(0,n.length);return t.next=function(){if(o){for(var e=goog.array.map(o,function(e,t){return n[t][e]}),t=o.length-1;0<=t;t--){if(goog.asserts.assert(o),o[t]<n[t].length-1){o[t]++;break}if(0==t){o=null;break}o[t]=0}return e}throw goog.iter.StopIteration},t},goog.iter.cycle=function(e){var t=goog.iter.toIterator(e),n=[],o=0;e=new goog.iter.Iterator;var r=!1;return e.next=function(){var e=null;if(!r)try{return e=t.next(),n.push(e),e}catch(e){if(e!=goog.iter.StopIteration||goog.array.isEmpty(n))throw e;r=!0}return e=n[o],o=(o+1)%n.length,e},e},goog.iter.count=function(e,t){var n=e||0,o=goog.isDef(t)?t:1,r=new goog.iter.Iterator;return r.next=function(){var e=n;return n+=o,e},r},goog.iter.repeat=function(e){var t=new goog.iter.Iterator;return t.next=goog.functions.constant(e),t},goog.iter.accumulate=function(e){var t=goog.iter.toIterator(e),n=0;return(e=new goog.iter.Iterator).next=function(){return n+=t.next()},e},goog.iter.zip=function(e){var t=arguments,n=new goog.iter.Iterator;if(0<t.length){var o=goog.array.map(t,goog.iter.toIterator);n.next=function(){return goog.array.map(o,function(e){return e.next()})}}return n},goog.iter.zipLongest=function(o,e){var t=goog.array.slice(arguments,1),n=new goog.iter.Iterator;if(0<t.length){var r=goog.array.map(t,goog.iter.toIterator);n.next=function(){var n=!1,e=goog.array.map(r,function(e){try{var t=e.next();n=!0}catch(e){if(e!==goog.iter.StopIteration)throw e;t=o}return t});if(!n)throw goog.iter.StopIteration;return e}}return n},goog.iter.compress=function(e,t){var n=goog.iter.toIterator(t);return goog.iter.filter(e,function(){return!!n.next()})},goog.iter.GroupByIterator_=function(e,t){this.iterator=goog.iter.toIterator(e),this.keyFunc=t||goog.functions.identity},goog.inherits(goog.iter.GroupByIterator_,goog.iter.Iterator),goog.iter.GroupByIterator_.prototype.next=function(){for(;this.currentKey==this.targetKey;)this.currentValue=this.iterator.next(),this.currentKey=this.keyFunc(this.currentValue);return this.targetKey=this.currentKey,[this.currentKey,this.groupItems_(this.targetKey)]},goog.iter.GroupByIterator_.prototype.groupItems_=function(e){for(var t=[];this.currentKey==e;){t.push(this.currentValue);try{this.currentValue=this.iterator.next()}catch(e){if(e!==goog.iter.StopIteration)throw e;break}this.currentKey=this.keyFunc(this.currentValue)}return t},goog.iter.groupBy=function(e,t){return new goog.iter.GroupByIterator_(e,t)},goog.iter.starMap=function(e,t,n){var o=goog.iter.toIterator(e);return(e=new goog.iter.Iterator).next=function(){var e=goog.iter.toArray(o.next());return t.apply(n,goog.array.concat(e,void 0,o))},e},goog.iter.tee=function(e,t){var n=goog.iter.toIterator(e),o=goog.isNumber(t)?t:2,r=goog.array.map(goog.array.range(o),function(){return[]});return goog.array.map(r,function(e){var t=new goog.iter.Iterator;return t.next=function(){var t;return goog.array.isEmpty(e)&&(t=n.next(),goog.array.forEach(r,function(e){e.push(t)})),goog.asserts.assert(!goog.array.isEmpty(e)),e.shift()},t})},goog.iter.enumerate=function(e,t){return goog.iter.zip(goog.iter.count(t),e)},goog.iter.limit=function(e,t){goog.asserts.assert(goog.math.isInt(t)&&0<=t);var n=goog.iter.toIterator(e),o=new goog.iter.Iterator,r=t;return o.next=function(){if(0<r--)return n.next();throw goog.iter.StopIteration},o},goog.iter.consume=function(e,t){goog.asserts.assert(goog.math.isInt(t)&&0<=t);for(var n=goog.iter.toIterator(e);0<t--;)goog.iter.nextOrValue(n,null);return n},goog.iter.slice=function(e,t,n){return goog.asserts.assert(goog.math.isInt(t)&&0<=t),e=goog.iter.consume(e,t),goog.isNumber(n)&&(goog.asserts.assert(goog.math.isInt(n)&&t<=n),e=goog.iter.limit(e,n-t)),e},goog.iter.hasDuplicates_=function(e){var t=[];return goog.array.removeDuplicates(e,t),e.length!=t.length},goog.iter.permutations=function(e,t){var n=goog.iter.toArray(e),o=goog.isNumber(t)?t:n.length;return n=goog.array.repeat(n,o),n=goog.iter.product.apply(void 0,n),goog.iter.filter(n,function(e){return!goog.iter.hasDuplicates_(e)})},goog.iter.combinations=function(e,t){function n(e){return o[e]}var o=goog.iter.toArray(e),r=goog.iter.range(o.length);r=goog.iter.permutations(r,t);var i=goog.iter.filter(r,function(e){return goog.array.isSorted(e)});return(r=new goog.iter.Iterator).next=function(){return goog.array.map(i.next(),n)},r},goog.iter.combinationsWithReplacement=function(e,t){function n(e){return o[e]}var o=goog.iter.toArray(e),r=goog.array.range(o.length);r=goog.array.repeat(r,t),r=goog.iter.product.apply(void 0,r);var i=goog.iter.filter(r,function(e){return goog.array.isSorted(e)});return(r=new goog.iter.Iterator).next=function(){return goog.array.map(i.next(),n)},r},goog.dom.TagWalkType={START_TAG:1,OTHER:0,END_TAG:-1},goog.dom.TagIterator=function(e,t,n,o,r){this.reversed=!!t,this.node=null,this.tagType=goog.dom.TagWalkType.OTHER,this.started_=!1,this.constrained=!n,e&&this.setPosition(e,o),this.depth=null!=r?r:this.tagType||0,this.reversed&&(this.depth*=-1)},goog.inherits(goog.dom.TagIterator,goog.iter.Iterator),goog.dom.TagIterator.prototype.setPosition=function(e,t,n){(this.node=e)&&(goog.isNumber(t)?this.tagType=t:this.tagType=this.node.nodeType!=goog.dom.NodeType.ELEMENT?goog.dom.TagWalkType.OTHER:this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG),goog.isNumber(n)&&(this.depth=n)},goog.dom.TagIterator.prototype.copyFrom=function(e){this.node=e.node,this.tagType=e.tagType,this.depth=e.depth,this.reversed=e.reversed,this.constrained=e.constrained},goog.dom.TagIterator.prototype.clone=function(){return new goog.dom.TagIterator(this.node,this.reversed,!this.constrained,this.tagType,this.depth)},goog.dom.TagIterator.prototype.skipTag=function(){var e=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;this.tagType==e&&(this.tagType=-1*e,this.depth+=this.tagType*(this.reversed?-1:1))},goog.dom.TagIterator.prototype.restartTag=function(){var e=this.reversed?goog.dom.TagWalkType.START_TAG:goog.dom.TagWalkType.END_TAG;this.tagType==e&&(this.tagType=-1*e,this.depth+=this.tagType*(this.reversed?-1:1))},goog.dom.TagIterator.prototype.next=function(){if(this.started_){if(!this.node||this.constrained&&0==this.depth)throw goog.iter.StopIteration;var e=this.node,t=this.reversed?goog.dom.TagWalkType.END_TAG:goog.dom.TagWalkType.START_TAG;if(this.tagType==t){var n=this.reversed?e.lastChild:e.firstChild;n?this.setPosition(n):this.setPosition(e,-1*t)}else(n=this.reversed?e.previousSibling:e.nextSibling)?this.setPosition(n):this.setPosition(e.parentNode,-1*t);this.depth+=this.tagType*(this.reversed?-1:1)}else this.started_=!0;if(e=this.node,!this.node)throw goog.iter.StopIteration;return e},goog.dom.TagIterator.prototype.isStarted=function(){return this.started_},goog.dom.TagIterator.prototype.isStartTag=function(){return this.tagType==goog.dom.TagWalkType.START_TAG},goog.dom.TagIterator.prototype.isEndTag=function(){return this.tagType==goog.dom.TagWalkType.END_TAG},goog.dom.TagIterator.prototype.isNonElement=function(){return this.tagType==goog.dom.TagWalkType.OTHER},goog.dom.TagIterator.prototype.equals=function(e){return e.node==this.node&&(!this.node||e.tagType==this.tagType)},goog.dom.TagIterator.prototype.splice=function(e){var t=this.node;this.restartTag(),this.reversed=!this.reversed,goog.dom.TagIterator.prototype.next.call(this),this.reversed=!this.reversed;for(var n=goog.isArrayLike(e)?e:arguments,o=n.length-1;0<=o;o--)goog.dom.insertSiblingAfter(n[o],t);goog.dom.removeNode(t)},goog.dom.NodeIterator=function(e,t,n,o){goog.dom.TagIterator.call(this,e,t,n,null,o)},goog.inherits(goog.dom.NodeIterator,goog.dom.TagIterator),goog.dom.NodeIterator.prototype.next=function(){for(;goog.dom.NodeIterator.superClass_.next.call(this),this.isEndTag(););return this.node},goog.ui.PaletteRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.PaletteRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.PaletteRenderer),goog.ui.PaletteRenderer.cellId_=0,goog.ui.PaletteRenderer.CSS_CLASS="goog-palette",goog.ui.PaletteRenderer.prototype.createDom=function(e){var t=this.getClassNames(e);return e=e.getDomHelper().createDom("DIV",t,this.createGrid(e.getContent(),e.getSize(),e.getDomHelper())),goog.a11y.aria.setRole(e,goog.a11y.aria.Role.GRID),e},goog.ui.PaletteRenderer.prototype.createGrid=function(e,t,n){for(var o=[],r=0,i=0;r<t.height;r++){for(var a=[],s=0;s<t.width;s++){var l=e&&e[i++];a.push(this.createCell(l,n))}o.push(this.createRow(a,n))}return this.createTable(o,n)},goog.ui.PaletteRenderer.prototype.createTable=function(e,t){var n=t.createDom("TABLE",this.getCssClass()+"-table",t.createDom("TBODY",this.getCssClass()+"-body",e));return n.cellSpacing="0",n.cellPadding="0",n},goog.ui.PaletteRenderer.prototype.createRow=function(e,t){var n=t.createDom("TR",this.getCssClass()+"-row",e);return goog.a11y.aria.setRole(n,goog.a11y.aria.Role.ROW),n},goog.ui.PaletteRenderer.prototype.createCell=function(e,t){var n=t.createDom("TD",{class:this.getCssClass()+"-cell",id:this.getCssClass()+"-cell-"+goog.ui.PaletteRenderer.cellId_++},e);if(goog.a11y.aria.setRole(n,goog.a11y.aria.Role.GRIDCELL),goog.a11y.aria.setState(n,goog.a11y.aria.State.SELECTED,!1),!goog.dom.getTextContent(n)&&!goog.a11y.aria.getLabel(n)){var o=this.findAriaLabelForCell_(n);o&&goog.a11y.aria.setLabel(n,o)}return n},goog.ui.PaletteRenderer.prototype.findAriaLabelForCell_=function(e){e=new goog.dom.NodeIterator(e);for(var t,n="";!n&&(t=goog.iter.nextOrValue(e,null));)t.nodeType==goog.dom.NodeType.ELEMENT&&(n=goog.a11y.aria.getLabel(t)||t.title);return n},goog.ui.PaletteRenderer.prototype.canDecorate=function(e){return!1},goog.ui.PaletteRenderer.prototype.decorate=function(e,t){return null},goog.ui.PaletteRenderer.prototype.setContent=function(e,n){if(e){var t=goog.dom.getElementsByTagNameAndClass("TBODY",this.getCssClass()+"-body",e)[0];if(t){var o=0;if(goog.array.forEach(t.rows,function(e){goog.array.forEach(e.cells,function(e){if(goog.dom.removeChildren(e),n){var t=n[o++];t&&goog.dom.appendChild(e,t)}})}),o<n.length){for(var r=[],i=goog.dom.getDomHelper(e),a=t.rows[0].cells.length;o<n.length;){var s=n[o++];r.push(this.createCell(s,i)),r.length==a&&(s=this.createRow(r,i),goog.dom.appendChild(t,s),r.length=0)}if(0<r.length){for(;r.length<a;)r.push(this.createCell("",i));s=this.createRow(r,i),goog.dom.appendChild(t,s)}}}goog.style.setUnselectable(e,!0,goog.userAgent.GECKO)}},goog.ui.PaletteRenderer.prototype.getContainingItem=function(e,t){for(var n=e.getElement();t&&t.nodeType==goog.dom.NodeType.ELEMENT&&t!=n;){if("TD"==t.tagName&&goog.dom.classlist.contains(t,this.getCssClass()+"-cell"))return t.firstChild;t=t.parentNode}return null},goog.ui.PaletteRenderer.prototype.highlightCell=function(e,t,n){t&&(t=this.getCellForItem(t),goog.asserts.assert(t),goog.dom.classlist.enable(t,this.getCssClass()+"-cell-hover",n),n?goog.a11y.aria.setState(e.getElementStrict(),goog.a11y.aria.State.ACTIVEDESCENDANT,t.id):t.id==goog.a11y.aria.getState(e.getElementStrict(),goog.a11y.aria.State.ACTIVEDESCENDANT)&&goog.a11y.aria.removeState(e.getElementStrict(),goog.a11y.aria.State.ACTIVEDESCENDANT))},goog.ui.PaletteRenderer.prototype.getCellForItem=function(e){return e?e.parentNode:null},goog.ui.PaletteRenderer.prototype.selectCell=function(e,t,n){t&&(e=t.parentNode,goog.dom.classlist.enable(e,this.getCssClass()+"-cell-selected",n),goog.a11y.aria.setState(e,goog.a11y.aria.State.SELECTED,n))},goog.ui.PaletteRenderer.prototype.getCssClass=function(){return goog.ui.PaletteRenderer.CSS_CLASS},goog.ui.SelectionModel=function(e){goog.events.EventTarget.call(this),this.items_=[],this.addItems(e)},goog.inherits(goog.ui.SelectionModel,goog.events.EventTarget),goog.tagUnsealableClass(goog.ui.SelectionModel),goog.ui.SelectionModel.prototype.selectedItem_=null,goog.ui.SelectionModel.prototype.selectionHandler_=null,goog.ui.SelectionModel.prototype.getSelectionHandler=function(){return this.selectionHandler_},goog.ui.SelectionModel.prototype.setSelectionHandler=function(e){this.selectionHandler_=e},goog.ui.SelectionModel.prototype.getItemCount=function(){return this.items_.length},goog.ui.SelectionModel.prototype.indexOfItem=function(e){return e?goog.array.indexOf(this.items_,e):-1},goog.ui.SelectionModel.prototype.getFirst=function(){return this.items_[0]},goog.ui.SelectionModel.prototype.getLast=function(){return this.items_[this.items_.length-1]},goog.ui.SelectionModel.prototype.getItemAt=function(e){return this.items_[e]||null},goog.ui.SelectionModel.prototype.addItems=function(e){e&&(goog.array.forEach(e,function(e){this.selectItem_(e,!1)},this),goog.array.extend(this.items_,e))},goog.ui.SelectionModel.prototype.addItem=function(e){this.addItemAt(e,this.getItemCount())},goog.ui.SelectionModel.prototype.addItemAt=function(e,t){e&&(this.selectItem_(e,!1),goog.array.insertAt(this.items_,e,t))},goog.ui.SelectionModel.prototype.removeItem=function(e){e&&goog.array.remove(this.items_,e)&&e==this.selectedItem_&&(this.selectedItem_=null,this.dispatchEvent(goog.events.EventType.SELECT))},goog.ui.SelectionModel.prototype.removeItemAt=function(e){this.removeItem(this.getItemAt(e))},goog.ui.SelectionModel.prototype.getSelectedItem=function(){return this.selectedItem_},goog.ui.SelectionModel.prototype.getItems=function(){return goog.array.clone(this.items_)},goog.ui.SelectionModel.prototype.setSelectedItem=function(e){e!=this.selectedItem_&&(this.selectItem_(this.selectedItem_,!1),this.selectedItem_=e,this.selectItem_(e,!0)),this.dispatchEvent(goog.events.EventType.SELECT)},goog.ui.SelectionModel.prototype.getSelectedIndex=function(){return this.indexOfItem(this.selectedItem_)},goog.ui.SelectionModel.prototype.setSelectedIndex=function(e){this.setSelectedItem(this.getItemAt(e))},goog.ui.SelectionModel.prototype.clear=function(){goog.array.clear(this.items_),this.selectedItem_=null},goog.ui.SelectionModel.prototype.disposeInternal=function(){goog.ui.SelectionModel.superClass_.disposeInternal.call(this),delete this.items_,this.selectedItem_=null},goog.ui.SelectionModel.prototype.selectItem_=function(e,t){e&&("function"==typeof this.selectionHandler_?this.selectionHandler_(e,t):"function"==typeof e.setSelected&&e.setSelected(t))},goog.ui.Palette=function(e,t,n){goog.ui.Control.call(this,e,t||goog.ui.PaletteRenderer.getInstance(),n),this.setAutoStates(goog.ui.Component.State.CHECKED|goog.ui.Component.State.SELECTED|goog.ui.Component.State.OPENED,!1),this.currentCellControl_=new goog.ui.Palette.CurrentCell_,this.currentCellControl_.setParentEventTarget(this),this.lastHighlightedIndex_=-1},goog.inherits(goog.ui.Palette,goog.ui.Control),goog.tagUnsealableClass(goog.ui.Palette),goog.ui.Palette.EventType={AFTER_HIGHLIGHT:goog.events.getUniqueId("afterhighlight")},goog.ui.Palette.prototype.size_=null,goog.ui.Palette.prototype.highlightedIndex_=-1,goog.ui.Palette.prototype.selectionModel_=null,goog.ui.Palette.prototype.disposeInternal=function(){goog.ui.Palette.superClass_.disposeInternal.call(this),this.selectionModel_&&(this.selectionModel_.dispose(),this.selectionModel_=null),this.size_=null,this.currentCellControl_.dispose()},goog.ui.Palette.prototype.setContentInternal=function(e){goog.ui.Palette.superClass_.setContentInternal.call(this,e),this.adjustSize_(),this.selectionModel_?(this.selectionModel_.clear(),this.selectionModel_.addItems(e)):(this.selectionModel_=new goog.ui.SelectionModel(e),this.selectionModel_.setSelectionHandler(goog.bind(this.selectItem_,this)),this.getHandler().listen(this.selectionModel_,goog.events.EventType.SELECT,this.handleSelectionChange)),this.highlightedIndex_=-1},goog.ui.Palette.prototype.getCaption=function(){return""},goog.ui.Palette.prototype.setCaption=function(e){},goog.ui.Palette.prototype.handleMouseOver=function(e){goog.ui.Palette.superClass_.handleMouseOver.call(this,e);var t=this.getRenderer().getContainingItem(this,e.target);t&&e.relatedTarget&&goog.dom.contains(t,e.relatedTarget)||t!=this.getHighlightedItem()&&this.setHighlightedItem(t)},goog.ui.Palette.prototype.handleMouseDown=function(e){goog.ui.Palette.superClass_.handleMouseDown.call(this,e),this.isActive()&&((e=this.getRenderer().getContainingItem(this,e.target))!=this.getHighlightedItem()&&this.setHighlightedItem(e))},goog.ui.Palette.prototype.performActionInternal=function(e){var t=this.getHighlightedItem();return!!t&&(e&&this.shouldSelectHighlightedItem_(e)&&this.setSelectedItem(t),goog.ui.Palette.superClass_.performActionInternal.call(this,e))},goog.ui.Palette.prototype.shouldSelectHighlightedItem_=function(e){return!this.getSelectedItem()||("mouseup"!=e.type||!!this.getRenderer().getContainingItem(this,e.target))},goog.ui.Palette.prototype.handleKeyEvent=function(e){var t=this.getContent();t=t?t.length:0;var n=this.size_.width;if(0==t||!this.isEnabled())return!1;if(e.keyCode==goog.events.KeyCodes.ENTER||e.keyCode==goog.events.KeyCodes.SPACE)return this.performActionInternal(e);if(e.keyCode==goog.events.KeyCodes.HOME)return this.setHighlightedIndex(0),!0;if(e.keyCode==goog.events.KeyCodes.END)return this.setHighlightedIndex(t-1),!0;var o=this.highlightedIndex_<0?this.getSelectedIndex():this.highlightedIndex_;switch(e.keyCode){case goog.events.KeyCodes.LEFT:return-1!=o&&0!=o||(o=t),this.setHighlightedIndex(o-1),e.preventDefault(),!0;case goog.events.KeyCodes.RIGHT:return o==t-1&&(o=-1),this.setHighlightedIndex(o+1),e.preventDefault(),!0;case goog.events.KeyCodes.UP:if(-1==o&&(o=t+n-1),n<=o)return this.setHighlightedIndex(o-n),e.preventDefault(),!0;break;case goog.events.KeyCodes.DOWN:if(-1==o&&(o=-n),o<t-n)return this.setHighlightedIndex(o+n),e.preventDefault(),!0}return!1},goog.ui.Palette.prototype.handleSelectionChange=function(e){},goog.ui.Palette.prototype.getSize=function(){return this.size_},goog.ui.Palette.prototype.setSize=function(e,t){if(this.getElement())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.size_=goog.isNumber(e)?new goog.math.Size(e,t):e,this.adjustSize_()},goog.ui.Palette.prototype.getHighlightedIndex=function(){return this.highlightedIndex_},goog.ui.Palette.prototype.getHighlightedItem=function(){var e=this.getContent();return e&&e[this.highlightedIndex_]},goog.ui.Palette.prototype.getHighlightedCellElement_=function(){return this.getRenderer().getCellForItem(this.getHighlightedItem())},goog.ui.Palette.prototype.setHighlightedIndex=function(e){e!=this.highlightedIndex_&&(this.highlightIndex_(this.highlightedIndex_,!1),this.lastHighlightedIndex_=this.highlightedIndex_,this.highlightedIndex_=e,this.highlightIndex_(e,!0),this.dispatchEvent(goog.ui.Palette.EventType.AFTER_HIGHLIGHT))},goog.ui.Palette.prototype.setHighlightedItem=function(e){var t=this.getContent();this.setHighlightedIndex(t&&e?goog.array.indexOf(t,e):-1)},goog.ui.Palette.prototype.getSelectedIndex=function(){return this.selectionModel_?this.selectionModel_.getSelectedIndex():-1},goog.ui.Palette.prototype.getSelectedItem=function(){return this.selectionModel_?this.selectionModel_.getSelectedItem():null},goog.ui.Palette.prototype.setSelectedIndex=function(e){this.selectionModel_&&this.selectionModel_.setSelectedIndex(e)},goog.ui.Palette.prototype.setSelectedItem=function(e){this.selectionModel_&&this.selectionModel_.setSelectedItem(e)},goog.ui.Palette.prototype.highlightIndex_=function(e,t){if(this.getElement()){var n=this.getContent();if(n&&0<=e&&e<n.length){var o=this.getHighlightedCellElement_();this.currentCellControl_.getElement()!=o&&this.currentCellControl_.setElementInternal(o),this.currentCellControl_.tryHighlight(t)&&this.getRenderer().highlightCell(this,n[e],t)}}},goog.ui.Palette.prototype.setHighlighted=function(e){e&&-1==this.highlightedIndex_?this.setHighlightedIndex(-1<this.lastHighlightedIndex_?this.lastHighlightedIndex_:0):e||this.setHighlightedIndex(-1),goog.ui.Palette.superClass_.setHighlighted.call(this,e)},goog.ui.Palette.prototype.selectItem_=function(e,t){this.getElement()&&this.getRenderer().selectCell(this,e,t)},goog.ui.Palette.prototype.adjustSize_=function(){var e=this.getContent();e?this.size_&&this.size_.width?(e=Math.ceil(e.length/this.size_.width),(!goog.isNumber(this.size_.height)||this.size_.height<e)&&(this.size_.height=e)):(e=Math.ceil(Math.sqrt(e.length)),this.size_=new goog.math.Size(e,e)):this.size_=new goog.math.Size(0,0)},goog.ui.Palette.CurrentCell_=function(){goog.ui.Control.call(this,null),this.setDispatchTransitionEvents(goog.ui.Component.State.HOVER,!0)},goog.inherits(goog.ui.Palette.CurrentCell_,goog.ui.Control),goog.ui.Palette.CurrentCell_.prototype.tryHighlight=function(e){return this.setHighlighted(e),this.isHighlighted()==e},goog.ui.ColorPalette=function(e,t,n){this.colors_=e||[],goog.ui.Palette.call(this,null,t||goog.ui.PaletteRenderer.getInstance(),n),this.setColors(this.colors_)},goog.inherits(goog.ui.ColorPalette,goog.ui.Palette),goog.tagUnsealableClass(goog.ui.ColorPalette),goog.ui.ColorPalette.prototype.normalizedColors_=null,goog.ui.ColorPalette.prototype.labels_=null,goog.ui.ColorPalette.prototype.getColors=function(){return this.colors_},goog.ui.ColorPalette.prototype.setColors=function(e,t){this.colors_=e,this.labels_=t||null,this.normalizedColors_=null,this.setContent(this.createColorNodes())},goog.ui.ColorPalette.prototype.getSelectedColor=function(){var e=this.getSelectedItem();return e?(e=goog.style.getStyle(e,"background-color"),goog.ui.ColorPalette.parseColor_(e)):null},goog.ui.ColorPalette.prototype.setSelectedColor=function(e){e=goog.ui.ColorPalette.parseColor_(e),this.normalizedColors_||(this.normalizedColors_=goog.array.map(this.colors_,function(e){return goog.ui.ColorPalette.parseColor_(e)})),this.setSelectedIndex(e?goog.array.indexOf(this.normalizedColors_,e):-1)},goog.ui.ColorPalette.prototype.createColorNodes=function(){return goog.array.map(this.colors_,function(e,t){var n=this.getDomHelper().createDom("DIV",{class:this.getRenderer().getCssClass()+"-colorswatch",style:"background-color:"+e});return n.title=this.labels_&&this.labels_[t]?this.labels_[t]:"#"==e.charAt(0)?"RGB ("+goog.color.hexToRgb(e).join(", ")+")":e,n},this)},goog.ui.ColorPalette.parseColor_=function(e){if(e)try{return goog.color.parse(e).hex}catch(e){}return null},goog.ui.ColorPicker=function(e,t){goog.ui.Component.call(this,e),this.colorPalette_=t||null,this.getHandler().listen(this,goog.ui.Component.EventType.ACTION,this.onColorPaletteAction_)},goog.inherits(goog.ui.ColorPicker,goog.ui.Component),goog.ui.ColorPicker.DEFAULT_NUM_COLS=5,goog.ui.ColorPicker.EventType={CHANGE:"change"},goog.ui.ColorPicker.prototype.focusable_=!0,goog.ui.ColorPicker.prototype.getColors=function(){return this.colorPalette_?this.colorPalette_.getColors():null},goog.ui.ColorPicker.prototype.setColors=function(e){this.colorPalette_?this.colorPalette_.setColors(e):this.createColorPalette_(e)},goog.ui.ColorPicker.prototype.addColors=function(e){this.setColors(e)},goog.ui.ColorPicker.prototype.setSize=function(e){this.colorPalette_||this.createColorPalette_([]),this.colorPalette_.setSize(e)},goog.ui.ColorPicker.prototype.getSize=function(){return this.colorPalette_?this.colorPalette_.getSize():null},goog.ui.ColorPicker.prototype.setColumnCount=function(e){this.setSize(e)},goog.ui.ColorPicker.prototype.getSelectedIndex=function(){return this.colorPalette_?this.colorPalette_.getSelectedIndex():-1},goog.ui.ColorPicker.prototype.setSelectedIndex=function(e){this.colorPalette_&&this.colorPalette_.setSelectedIndex(e)},goog.ui.ColorPicker.prototype.getSelectedColor=function(){return this.colorPalette_?this.colorPalette_.getSelectedColor():null},goog.ui.ColorPicker.prototype.setSelectedColor=function(e){this.colorPalette_&&this.colorPalette_.setSelectedColor(e)},goog.ui.ColorPicker.prototype.isFocusable=function(){return this.focusable_},goog.ui.ColorPicker.prototype.setFocusable=function(e){this.focusable_=e,this.colorPalette_&&this.colorPalette_.setSupportedState(goog.ui.Component.State.FOCUSED,e)},goog.ui.ColorPicker.prototype.canDecorate=function(e){return!1},goog.ui.ColorPicker.prototype.enterDocument=function(){goog.ui.ColorPicker.superClass_.enterDocument.call(this),this.colorPalette_&&this.colorPalette_.render(this.getElement()),this.getElement().unselectable="on"},goog.ui.ColorPicker.prototype.disposeInternal=function(){goog.ui.ColorPicker.superClass_.disposeInternal.call(this),this.colorPalette_&&(this.colorPalette_.dispose(),this.colorPalette_=null)},goog.ui.ColorPicker.prototype.focus=function(){this.colorPalette_&&this.colorPalette_.getElement().focus()},goog.ui.ColorPicker.prototype.onColorPaletteAction_=function(e){e.stopPropagation(),this.dispatchEvent(goog.ui.ColorPicker.EventType.CHANGE)},goog.ui.ColorPicker.prototype.createColorPalette_=function(e){(e=new goog.ui.ColorPalette(e,null,this.getDomHelper())).setSize(goog.ui.ColorPicker.DEFAULT_NUM_COLS),e.setSupportedState(goog.ui.Component.State.FOCUSED,this.focusable_),this.addChild(e),this.colorPalette_=e,this.isInDocument()&&this.colorPalette_.render(this.getElement())},goog.ui.ColorPicker.createSimpleColorGrid=function(e){return(e=new goog.ui.ColorPicker(e)).setSize(7),e.setColors(goog.ui.ColorPicker.SIMPLE_GRID_COLORS),e},goog.ui.ColorPicker.SIMPLE_GRID_COLORS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),goog.events.MouseWheelHandler=function(e,t){goog.events.EventTarget.call(this),this.element_=e;var n=goog.dom.isElement(this.element_)?this.element_:this.element_?this.element_.body:null;this.isRtl_=!!n&&goog.style.isRightToLeft(n),this.listenKey_=goog.events.listen(this.element_,goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel",this,t)},goog.inherits(goog.events.MouseWheelHandler,goog.events.EventTarget),goog.events.MouseWheelHandler.EventType={MOUSEWHEEL:"mousewheel"},goog.events.MouseWheelHandler.prototype.setMaxDeltaX=function(e){this.maxDeltaX_=e},goog.events.MouseWheelHandler.prototype.setMaxDeltaY=function(e){this.maxDeltaY_=e},goog.events.MouseWheelHandler.prototype.handleEvent=function(e){var t=0,n=0,o=e.getBrowserEvent();"mousewheel"==o.type?(e=goog.events.MouseWheelHandler.smartScale_(-o.wheelDelta,40),goog.isDef(o.wheelDeltaX)?(t=goog.events.MouseWheelHandler.smartScale_(-o.wheelDeltaX,40),n=goog.events.MouseWheelHandler.smartScale_(-o.wheelDeltaY,40)):n=e):(100<(e=o.detail)?e=3:e<-100&&(e=-3),goog.isDef(o.axis)&&o.axis===o.HORIZONTAL_AXIS?t=e:n=e),goog.isNumber(this.maxDeltaX_)&&(t=goog.math.clamp(t,-this.maxDeltaX_,this.maxDeltaX_)),goog.isNumber(this.maxDeltaY_)&&(n=goog.math.clamp(n,-this.maxDeltaY_,this.maxDeltaY_)),this.isRtl_&&(t=-t),t=new goog.events.MouseWheelEvent(e,o,t,n),this.dispatchEvent(t)},goog.events.MouseWheelHandler.smartScale_=function(e,t){return goog.userAgent.WEBKIT&&(goog.userAgent.MAC||goog.userAgent.LINUX)&&0!=e%t?e:e/t},goog.events.MouseWheelHandler.prototype.disposeInternal=function(){goog.events.MouseWheelHandler.superClass_.disposeInternal.call(this),goog.events.unlistenByKey(this.listenKey_),this.listenKey_=null},goog.events.MouseWheelEvent=function(e,t,n,o){goog.events.BrowserEvent.call(this,t),this.type=goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.detail=e,this.deltaX=n,this.deltaY=o},goog.inherits(goog.events.MouseWheelEvent,goog.events.BrowserEvent),goog.fx={},goog.fx.Transition=function(){},goog.fx.Transition.EventType={PLAY:"play",BEGIN:"begin",RESUME:"resume",END:"end",STOP:"stop",FINISH:"finish",PAUSE:"pause"},goog.fx.TransitionBase=function(){goog.events.EventTarget.call(this),this.state_=goog.fx.TransitionBase.State.STOPPED,this.endTime=this.startTime=null},goog.inherits(goog.fx.TransitionBase,goog.events.EventTarget),goog.fx.TransitionBase.State={STOPPED:0,PAUSED:-1,PLAYING:1},goog.fx.TransitionBase.prototype.play=goog.abstractMethod,goog.fx.TransitionBase.prototype.stop=goog.abstractMethod,goog.fx.TransitionBase.prototype.pause=goog.abstractMethod,goog.fx.TransitionBase.prototype.getStateInternal=function(){return this.state_},goog.fx.TransitionBase.prototype.setStatePlaying=function(){this.state_=goog.fx.TransitionBase.State.PLAYING},goog.fx.TransitionBase.prototype.setStatePaused=function(){this.state_=goog.fx.TransitionBase.State.PAUSED},goog.fx.TransitionBase.prototype.setStateStopped=function(){this.state_=goog.fx.TransitionBase.State.STOPPED},goog.fx.TransitionBase.prototype.isPlaying=function(){return this.state_==goog.fx.TransitionBase.State.PLAYING},goog.fx.TransitionBase.prototype.isPaused=function(){return this.state_==goog.fx.TransitionBase.State.PAUSED},goog.fx.TransitionBase.prototype.isStopped=function(){return this.state_==goog.fx.TransitionBase.State.STOPPED},goog.fx.TransitionBase.prototype.onBegin=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.BEGIN)},goog.fx.TransitionBase.prototype.onEnd=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.END)},goog.fx.TransitionBase.prototype.onFinish=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.FINISH)},goog.fx.TransitionBase.prototype.onPause=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PAUSE)},goog.fx.TransitionBase.prototype.onPlay=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.PLAY)},goog.fx.TransitionBase.prototype.onResume=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.RESUME)},goog.fx.TransitionBase.prototype.onStop=function(){this.dispatchAnimationEvent(goog.fx.Transition.EventType.STOP)},goog.fx.TransitionBase.prototype.dispatchAnimationEvent=function(e){this.dispatchEvent(e)},goog.async.AnimationDelay=function(e,t,n){goog.Disposable.call(this),this.id_=null,this.usingListeners_=!1,this.listener_=e,this.handler_=n,this.win_=t||window,this.callback_=goog.bind(this.doAction_,this)},goog.inherits(goog.async.AnimationDelay,goog.Disposable),goog.async.AnimationDelay.TIMEOUT=20,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_="MozBeforePaint",goog.async.AnimationDelay.prototype.start=function(){this.stop(),this.usingListeners_=!1;var e=this.getRaf_(),t=this.getCancelRaf_();e&&!t&&this.win_.mozRequestAnimationFrame?(this.id_=goog.events.listen(this.win_,goog.async.AnimationDelay.MOZ_BEFORE_PAINT_EVENT_,this.callback_),this.win_.mozRequestAnimationFrame(null),this.usingListeners_=!0):this.id_=e&&t?e.call(this.win_,this.callback_):this.win_.setTimeout(goog.functions.lock(this.callback_),goog.async.AnimationDelay.TIMEOUT)},goog.async.AnimationDelay.prototype.startIfNotActive=function(){this.isActive()||this.start()},goog.async.AnimationDelay.prototype.stop=function(){if(this.isActive()){var e=this.getRaf_(),t=this.getCancelRaf_();e&&!t&&this.win_.mozRequestAnimationFrame?goog.events.unlistenByKey(this.id_):e&&t?t.call(this.win_,this.id_):this.win_.clearTimeout(this.id_)}this.id_=null},goog.async.AnimationDelay.prototype.fire=function(){this.stop(),this.doAction_()},goog.async.AnimationDelay.prototype.fireIfActive=function(){this.isActive()&&this.fire()},goog.async.AnimationDelay.prototype.isActive=function(){return null!=this.id_},goog.async.AnimationDelay.prototype.doAction_=function(){this.usingListeners_&&this.id_&&goog.events.unlistenByKey(this.id_),this.id_=null,this.listener_.call(this.handler_,goog.now())},goog.async.AnimationDelay.prototype.disposeInternal=function(){this.stop(),goog.async.AnimationDelay.superClass_.disposeInternal.call(this)},goog.async.AnimationDelay.prototype.getRaf_=function(){var e=this.win_;return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||null},goog.async.AnimationDelay.prototype.getCancelRaf_=function(){var e=this.win_;return e.cancelAnimationFrame||e.cancelRequestAnimationFrame||e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||null},goog.async.Delay=function(e,t,n){goog.Disposable.call(this),this.listener_=e,this.interval_=t||0,this.handler_=n,this.callback_=goog.bind(this.doAction_,this)},goog.inherits(goog.async.Delay,goog.Disposable),goog.Delay=goog.async.Delay,goog.async.Delay.prototype.id_=0,goog.async.Delay.prototype.disposeInternal=function(){goog.async.Delay.superClass_.disposeInternal.call(this),this.stop(),delete this.listener_,delete this.handler_},goog.async.Delay.prototype.start=function(e){this.stop(),this.id_=goog.Timer.callOnce(this.callback_,goog.isDef(e)?e:this.interval_)},goog.async.Delay.prototype.startIfNotActive=function(e){this.isActive()||this.start(e)},goog.async.Delay.prototype.stop=function(){this.isActive()&&goog.Timer.clear(this.id_),this.id_=0},goog.async.Delay.prototype.fire=function(){this.stop(),this.doAction_()},goog.async.Delay.prototype.fireIfActive=function(){this.isActive()&&this.fire()},goog.async.Delay.prototype.isActive=function(){return 0!=this.id_},goog.async.Delay.prototype.doAction_=function(){this.id_=0,this.listener_&&this.listener_.call(this.handler_)},goog.fx.anim={},goog.fx.anim.Animated=function(){},goog.fx.anim.TIMEOUT=goog.async.AnimationDelay.TIMEOUT,goog.fx.anim.activeAnimations_={},goog.fx.anim.animationWindow_=null,goog.fx.anim.animationDelay_=null,goog.fx.anim.registerAnimation=function(e){var t=goog.getUid(e);t in goog.fx.anim.activeAnimations_||(goog.fx.anim.activeAnimations_[t]=e),goog.fx.anim.requestAnimationFrame_()},goog.fx.anim.unregisterAnimation=function(e){e=goog.getUid(e),delete goog.fx.anim.activeAnimations_[e],goog.object.isEmpty(goog.fx.anim.activeAnimations_)&&goog.fx.anim.cancelAnimationFrame_()},goog.fx.anim.tearDown=function(){goog.fx.anim.animationWindow_=null,goog.dispose(goog.fx.anim.animationDelay_),goog.fx.anim.animationDelay_=null,goog.fx.anim.activeAnimations_={}},goog.fx.anim.setAnimationWindow=function(e){var t=goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.isActive();goog.dispose(goog.fx.anim.animationDelay_),goog.fx.anim.animationDelay_=null,goog.fx.anim.animationWindow_=e,t&&goog.fx.anim.requestAnimationFrame_()},goog.fx.anim.requestAnimationFrame_=function(){goog.fx.anim.animationDelay_||(goog.fx.anim.animationDelay_=goog.fx.anim.animationWindow_?new goog.async.AnimationDelay(function(e){goog.fx.anim.cycleAnimations_(e)},goog.fx.anim.animationWindow_):new goog.async.Delay(function(){goog.fx.anim.cycleAnimations_(goog.now())},goog.fx.anim.TIMEOUT));var e=goog.fx.anim.animationDelay_;e.isActive()||e.start()},goog.fx.anim.cancelAnimationFrame_=function(){goog.fx.anim.animationDelay_&&goog.fx.anim.animationDelay_.stop()},goog.fx.anim.cycleAnimations_=function(t){goog.object.forEach(goog.fx.anim.activeAnimations_,function(e){e.onAnimationFrame(t)}),goog.object.isEmpty(goog.fx.anim.activeAnimations_)||goog.fx.anim.requestAnimationFrame_()},goog.fx.Animation=function(e,t,n,o){if(goog.fx.TransitionBase.call(this),!goog.isArray(e)||!goog.isArray(t))throw Error("Start and end parameters must be arrays");if(e.length!=t.length)throw Error("Start and end points must be the same length");this.startPoint=e,this.endPoint=t,this.duration=n,this.accel_=o,this.coords=[],this.useRightPositioningForRtl_=!1,this.progress=this.fps_=0,this.lastFrame=null},goog.inherits(goog.fx.Animation,goog.fx.TransitionBase),goog.fx.Animation.prototype.getDuration=function(){return this.duration},goog.fx.Animation.prototype.enableRightPositioningForRtl=function(e){this.useRightPositioningForRtl_=e},goog.fx.Animation.prototype.isRightPositioningForRtlEnabled=function(){return this.useRightPositioningForRtl_},goog.fx.Animation.EventType={PLAY:goog.fx.Transition.EventType.PLAY,BEGIN:goog.fx.Transition.EventType.BEGIN,RESUME:goog.fx.Transition.EventType.RESUME,END:goog.fx.Transition.EventType.END,STOP:goog.fx.Transition.EventType.STOP,FINISH:goog.fx.Transition.EventType.FINISH,PAUSE:goog.fx.Transition.EventType.PAUSE,ANIMATE:"animate",DESTROY:"destroy"},goog.fx.Animation.TIMEOUT=goog.fx.anim.TIMEOUT,goog.fx.Animation.State=goog.fx.TransitionBase.State,goog.fx.Animation.setAnimationWindow=function(e){goog.fx.anim.setAnimationWindow(e)},goog.fx.Animation.prototype.play=function(e){if(e||this.isStopped())this.progress=0,this.coords=this.startPoint;else if(this.isPlaying())return!1;return goog.fx.anim.unregisterAnimation(this),this.startTime=e=goog.now(),this.isPaused()&&(this.startTime-=this.duration*this.progress),this.endTime=this.startTime+this.duration,this.lastFrame=this.startTime,this.progress||this.onBegin(),this.onPlay(),this.isPaused()&&this.onResume(),this.setStatePlaying(),goog.fx.anim.registerAnimation(this),this.cycle(e),!0},goog.fx.Animation.prototype.stop=function(e){goog.fx.anim.unregisterAnimation(this),this.setStateStopped(),e&&(this.progress=1),this.updateCoords_(this.progress),this.onStop(),this.onEnd()},goog.fx.Animation.prototype.pause=function(){this.isPlaying()&&(goog.fx.anim.unregisterAnimation(this),this.setStatePaused(),this.onPause())},goog.fx.Animation.prototype.getProgress=function(){return this.progress},goog.fx.Animation.prototype.setProgress=function(e){this.progress=e,this.isPlaying()&&(this.startTime=goog.now()-this.duration*this.progress,this.endTime=this.startTime+this.duration)},goog.fx.Animation.prototype.disposeInternal=function(){this.isStopped()||this.stop(!1),this.onDestroy(),goog.fx.Animation.superClass_.disposeInternal.call(this)},goog.fx.Animation.prototype.destroy=function(){this.dispose()},goog.fx.Animation.prototype.onAnimationFrame=function(e){this.cycle(e)},goog.fx.Animation.prototype.cycle=function(e){goog.asserts.assertNumber(this.startTime),goog.asserts.assertNumber(this.endTime),goog.asserts.assertNumber(this.lastFrame),e<this.startTime&&(this.endTime=e+this.endTime-this.startTime,this.startTime=e),this.progress=(e-this.startTime)/(this.endTime-this.startTime),1<this.progress&&(this.progress=1),this.fps_=1e3/(e-this.lastFrame),this.lastFrame=e,this.updateCoords_(this.progress),1==this.progress?(this.setStateStopped(),goog.fx.anim.unregisterAnimation(this),this.onFinish(),this.onEnd()):this.isPlaying()&&this.onAnimate()},goog.fx.Animation.prototype.updateCoords_=function(e){goog.isFunction(this.accel_)&&(e=this.accel_(e)),this.coords=Array(this.startPoint.length);for(var t=0;t<this.startPoint.length;t++)this.coords[t]=(this.endPoint[t]-this.startPoint[t])*e+this.startPoint[t]},goog.fx.Animation.prototype.onAnimate=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.ANIMATE)},goog.fx.Animation.prototype.onDestroy=function(){this.dispatchAnimationEvent(goog.fx.Animation.EventType.DESTROY)},goog.fx.Animation.prototype.dispatchAnimationEvent=function(e){this.dispatchEvent(new goog.fx.AnimationEvent(e,this))},goog.fx.AnimationEvent=function(e,t){goog.events.Event.call(this,e),this.coords=t.coords,this.x=t.coords[0],this.y=t.coords[1],this.z=t.coords[2],this.duration=t.duration,this.progress=t.getProgress(),this.fps=t.fps_,this.state=t.getStateInternal(),this.anim=t},goog.inherits(goog.fx.AnimationEvent,goog.events.Event),goog.fx.AnimationEvent.prototype.coordsAsInts=function(){return goog.array.map(this.coords,Math.round)},goog.fx.AnimationQueue=function(){goog.fx.TransitionBase.call(this),this.queue=[]},goog.inherits(goog.fx.AnimationQueue,goog.fx.TransitionBase),goog.fx.AnimationQueue.prototype.add=function(e){goog.asserts.assert(this.isStopped(),"Not allowed to add animations to a running animation queue."),goog.array.contains(this.queue,e)||(this.queue.push(e),goog.events.listen(e,goog.fx.Transition.EventType.FINISH,this.onAnimationFinish,!1,this))},goog.fx.AnimationQueue.prototype.remove=function(e){goog.asserts.assert(this.isStopped(),"Not allowed to remove animations from a running animation queue."),goog.array.remove(this.queue,e)&&goog.events.unlisten(e,goog.fx.Transition.EventType.FINISH,this.onAnimationFinish,!1,this)},goog.fx.AnimationQueue.prototype.onAnimationFinish=goog.abstractMethod,goog.fx.AnimationQueue.prototype.disposeInternal=function(){goog.array.forEach(this.queue,function(e){e.dispose()}),this.queue.length=0,goog.fx.AnimationQueue.superClass_.disposeInternal.call(this)},goog.fx.AnimationParallelQueue=function(){goog.fx.AnimationQueue.call(this),this.finishedCounter_=0},goog.inherits(goog.fx.AnimationParallelQueue,goog.fx.AnimationQueue),goog.fx.AnimationParallelQueue.prototype.play=function(t){if(0==this.queue.length)return!1;if(t||this.isStopped())this.finishedCounter_=0,this.onBegin();else if(this.isPlaying())return!1;this.onPlay(),this.isPaused()&&this.onResume();var n=this.isPaused()&&!t;return this.startTime=goog.now(),this.endTime=null,this.setStatePlaying(),goog.array.forEach(this.queue,function(e){n&&!e.isPaused()||e.play(t)}),!0},goog.fx.AnimationParallelQueue.prototype.pause=function(){this.isPlaying()&&(goog.array.forEach(this.queue,function(e){e.isPlaying()&&e.pause()}),this.setStatePaused(),this.onPause())},goog.fx.AnimationParallelQueue.prototype.stop=function(t){goog.array.forEach(this.queue,function(e){e.isStopped()||e.stop(t)}),this.setStateStopped(),this.endTime=goog.now(),this.onStop(),this.onEnd()},goog.fx.AnimationParallelQueue.prototype.onAnimationFinish=function(e){this.finishedCounter_++,this.finishedCounter_==this.queue.length&&(this.endTime=goog.now(),this.setStateStopped(),this.onFinish(),this.onEnd())},goog.fx.AnimationSerialQueue=function(){goog.fx.AnimationQueue.call(this),this.current_=0},goog.inherits(goog.fx.AnimationSerialQueue,goog.fx.AnimationQueue),goog.fx.AnimationSerialQueue.prototype.play=function(e){if(0==this.queue.length)return!1;if(e||this.isStopped())this.current_<this.queue.length&&!this.queue[this.current_].isStopped()&&this.queue[this.current_].stop(!1),this.current_=0,this.onBegin();else if(this.isPlaying())return!1;return this.onPlay(),this.isPaused()&&this.onResume(),this.startTime=goog.now(),this.endTime=null,this.setStatePlaying(),this.queue[this.current_].play(e),!0},goog.fx.AnimationSerialQueue.prototype.pause=function(){this.isPlaying()&&(this.queue[this.current_].pause(),this.setStatePaused(),this.onPause())},goog.fx.AnimationSerialQueue.prototype.stop=function(e){if(this.setStateStopped(),this.endTime=goog.now(),e)for(e=this.current_;e<this.queue.length;++e){var t=this.queue[e];t.isStopped()&&t.play(),t.isStopped()||t.stop(!0)}else this.current_<this.queue.length&&this.queue[this.current_].stop(!1);this.onStop(),this.onEnd()},goog.fx.AnimationSerialQueue.prototype.onAnimationFinish=function(e){this.isPlaying()&&(this.current_++,this.current_<this.queue.length?this.queue[this.current_].play():(this.endTime=goog.now(),this.setStateStopped(),this.onFinish(),this.onEnd()))},goog.userAgent.platform={},goog.userAgent.platform.determineVersion_=function(){if(goog.userAgent.WINDOWS){var e=/Windows NT ([0-9.]+)/;return(e=e.exec(goog.userAgent.getUserAgentString()))?e[1]:"0"}return goog.userAgent.MAC?(e=(e=/10[_.][0-9_.]+/).exec(goog.userAgent.getUserAgentString()))?e[0].replace(/_/g,"."):"10":goog.userAgent.ANDROID?(e=(e=/Android\s+([^\);]+)(\)|;)/).exec(goog.userAgent.getUserAgentString()))?e[1]:"":goog.userAgent.IPHONE||goog.userAgent.IPAD||goog.userAgent.IPOD?(e=(e=/(?:iPhone|CPU)\s+OS\s+(\S+)/).exec(goog.userAgent.getUserAgentString()))?e[1].replace(/_/g,"."):"":""},goog.userAgent.platform.VERSION=goog.userAgent.platform.determineVersion_(),goog.userAgent.platform.isVersion=function(e){return 0<=goog.string.compareVersions(goog.userAgent.platform.VERSION,e)},goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.userAgent.product.determineVersion_=function(){if(goog.userAgent.product.FIREFOX)return goog.userAgent.product.getFirstRegExpGroup_(/Firefox\/([0-9.]+)/);if(goog.userAgent.product.IE||goog.userAgent.product.EDGE||goog.userAgent.product.OPERA)return goog.userAgent.VERSION;if(goog.userAgent.product.CHROME)return goog.labs.userAgent.platform.isIos()?goog.userAgent.product.getFirstRegExpGroup_(/CriOS\/([0-9.]+)/):goog.userAgent.product.getFirstRegExpGroup_(/Chrome\/([0-9.]+)/);if(goog.userAgent.product.SAFARI&&!goog.labs.userAgent.platform.isIos())return goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);if(goog.userAgent.product.IPHONE||goog.userAgent.product.IPAD){var e=goog.userAgent.product.execRegExp_(/Version\/(\S+).*Mobile\/(\S+)/);if(e)return e[1]+"."+e[2]}else if(goog.userAgent.product.ANDROID)return(e=goog.userAgent.product.getFirstRegExpGroup_(/Android\s+([0-9.]+)/))?e:goog.userAgent.product.getFirstRegExpGroup_(/Version\/([0-9.]+)/);return""},goog.userAgent.product.getFirstRegExpGroup_=function(e){return(e=goog.userAgent.product.execRegExp_(e))?e[1]:""},goog.userAgent.product.execRegExp_=function(e){return e.exec(goog.userAgent.getUserAgentString())},goog.userAgent.product.VERSION=goog.userAgent.product.determineVersion_(),goog.userAgent.product.isVersion=function(e){return 0<=goog.string.compareVersions(goog.userAgent.product.VERSION,e)},goog.style.bidi={},goog.style.bidi.getScrollLeft=function(e){var t=goog.style.isRightToLeft(e);return t&&goog.style.bidi.usesNegativeScrollLeftInRtl_()?-e.scrollLeft:!t||goog.userAgent.EDGE_OR_IE&&goog.userAgent.isVersionOrHigher("8")||"visible"==goog.style.getComputedOverflowX(e)?e.scrollLeft:e.scrollWidth-e.clientWidth-e.scrollLeft},goog.style.bidi.getOffsetStart=function(e){var t=e.offsetLeft,n=e.offsetParent;if(n||"fixed"!=goog.style.getComputedPosition(e)||(n=goog.dom.getOwnerDocument(e).documentElement),!n)return t;if(goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher(58)){var o=goog.style.getBorderBox(n);t+=o.left}else goog.userAgent.isDocumentModeOrHigher(8)&&!goog.userAgent.isDocumentModeOrHigher(9)&&(t-=(o=goog.style.getBorderBox(n)).left);return goog.style.isRightToLeft(n)?n.clientWidth-(t+e.offsetWidth):t},goog.style.bidi.setScrollOffset=function(e,t){t=Math.max(t,0),goog.style.isRightToLeft(e)?goog.style.bidi.usesNegativeScrollLeftInRtl_()?e.scrollLeft=-t:goog.userAgent.EDGE_OR_IE&&goog.userAgent.isVersionOrHigher("8")?e.scrollLeft=t:e.scrollLeft=e.scrollWidth-t-e.clientWidth:e.scrollLeft=t},goog.style.bidi.usesNegativeScrollLeftInRtl_=function(){var e=goog.userAgent.product.SAFARI&&goog.userAgent.product.isVersion(10),t=goog.userAgent.IOS&&goog.userAgent.platform.isVersion(10);return goog.userAgent.GECKO||e||t},goog.style.bidi.setPosition=function(e,t,n,o){goog.isNull(n)||(e.style.top=n+"px"),o?(e.style.right=t+"px",e.style.left=""):(e.style.left=t+"px",e.style.right="")},goog.fx.Dragger=function(e,t,n){goog.events.EventTarget.call(this),this.target=e,this.handle=t||e,this.limits=n||new goog.math.Rect(NaN,NaN,NaN,NaN),this.document_=goog.dom.getOwnerDocument(e),this.eventHandler_=new goog.events.EventHandler(this),this.registerDisposable(this.eventHandler_),this.deltaY=this.deltaX=this.startY=this.startX=this.screenY=this.screenX=this.clientY=this.clientX=0,this.enabled_=!0,this.dragging_=!1,this.preventMouseDown_=!0,this.hysteresisDistanceSquared_=0,this.useRightPositioningForRtl_=this.ieDragStartCancellingOn_=!1,goog.events.listen(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this),this.useSetCapture_=goog.fx.Dragger.HAS_SET_CAPTURE_},goog.inherits(goog.fx.Dragger,goog.events.EventTarget),goog.tagUnsealableClass(goog.fx.Dragger),goog.fx.Dragger.HAS_SET_CAPTURE_=goog.global.document&&goog.global.document.documentElement&&!!goog.global.document.documentElement.setCapture&&!!goog.global.document.releaseCapture,goog.fx.Dragger.cloneNode=function(e){for(var t=e.cloneNode(!0),n=goog.dom.getElementsByTagName("TEXTAREA",e),o=goog.dom.getElementsByTagName("TEXTAREA",t),r=0;r<n.length;r++)o[r].value=n[r].value;switch(e.tagName){case"TR":return goog.dom.createDom("TABLE",null,goog.dom.createDom("TBODY",null,t));case"TD":case"TH":return goog.dom.createDom("TABLE",null,goog.dom.createDom("TBODY",null,goog.dom.createDom("TR",null,t)));case"TEXTAREA":t.value=e.value;default:return t}},goog.fx.Dragger.EventType={EARLY_CANCEL:"earlycancel",START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"},goog.fx.Dragger.prototype.setAllowSetCapture=function(e){this.useSetCapture_=e&&goog.fx.Dragger.HAS_SET_CAPTURE_};goog.fx.Dragger.prototype.enableRightPositioningForRtl=function(e){this.useRightPositioningForRtl_=e},goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_},goog.fx.Dragger.prototype.setLimits=function(e){this.limits=e||new goog.math.Rect(NaN,NaN,NaN,NaN)},goog.fx.Dragger.prototype.setHysteresis=function(e){this.hysteresisDistanceSquared_=Math.pow(e,2)},goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)},goog.fx.Dragger.prototype.setScrollTarget=function(e){this.scrollTarget_=e},goog.fx.Dragger.prototype.setCancelIeDragStart=function(e){this.ieDragStartCancellingOn_=e},goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_},goog.fx.Dragger.prototype.setEnabled=function(e){this.enabled_=e},goog.fx.Dragger.prototype.setPreventMouseDown=function(e){this.preventMouseDown_=e},goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this),goog.events.unlisten(this.handle,[goog.events.EventType.TOUCHSTART,goog.events.EventType.MOUSEDOWN],this.startDrag,!1,this),this.cleanUpAfterDragging_(),this.handle=this.target=null},goog.fx.Dragger.prototype.isRightToLeft_=function(){return goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.target)),this.rightToLeft_},goog.fx.Dragger.prototype.startDrag=function(e){var t=e.type==goog.events.EventType.MOUSEDOWN;if(!this.enabled_||this.dragging_||t&&!e.isMouseActionButton())this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);else{if(0==this.hysteresisDistanceSquared_){if(!this.fireDragStart_(e))return;this.dragging_=!0,this.preventMouseDown_&&t&&e.preventDefault()}else this.preventMouseDown_&&t&&e.preventDefault();this.setupDragHandlers(),this.clientX=this.startX=e.clientX,this.clientY=this.startY=e.clientY,this.screenX=e.screenX,this.screenY=e.screenY,this.computeInitialPosition(),this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll()}},goog.fx.Dragger.prototype.setupDragHandlers=function(){var e=this.document_,t=e.documentElement,n=!this.useSetCapture_;this.eventHandler_.listen(e,[goog.events.EventType.TOUCHMOVE,goog.events.EventType.MOUSEMOVE],this.handleMove_,{capture:n,passive:!1}),this.eventHandler_.listen(e,[goog.events.EventType.TOUCHEND,goog.events.EventType.MOUSEUP],this.endDrag,n),this.useSetCapture_?(t.setCapture(!1),this.eventHandler_.listen(t,goog.events.EventType.LOSECAPTURE,this.endDrag)):this.eventHandler_.listen(goog.dom.getWindow(e),goog.events.EventType.BLUR,this.endDrag),goog.userAgent.IE&&this.ieDragStartCancellingOn_&&this.eventHandler_.listen(e,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault),this.scrollTarget_&&this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,n)},goog.fx.Dragger.prototype.fireDragStart_=function(e){return this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,e.clientX,e.clientY,e))},goog.fx.Dragger.prototype.cleanUpAfterDragging_=function(){this.eventHandler_.removeAll(),this.useSetCapture_&&this.document_.releaseCapture()},goog.fx.Dragger.prototype.endDrag=function(e,t){if(this.cleanUpAfterDragging_(),this.dragging_){this.dragging_=!1;var n=this.limitX(this.deltaX),o=this.limitY(this.deltaY);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,e.clientX,e.clientY,e,n,o,t||e.type==goog.events.EventType.TOUCHCANCEL))}else this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL)},goog.fx.Dragger.prototype.endDragCancel=function(e){this.endDrag(e,!0)},goog.fx.Dragger.prototype.handleMove_=function(e){if(this.enabled_){var t=(this.useRightPositioningForRtl_&&this.isRightToLeft_()?-1:1)*(e.clientX-this.clientX),n=e.clientY-this.clientY;if(this.clientX=e.clientX,this.clientY=e.clientY,this.screenX=e.screenX,this.screenY=e.screenY,!this.dragging_){var o=this.startX-this.clientX,r=this.startY-this.clientY;if(o*o+r*r>this.hysteresisDistanceSquared_){if(!this.fireDragStart_(e))return void(this.isDisposed()||this.endDrag(e));this.dragging_=!0}}t=(n=this.calculatePosition_(t,n)).x,n=n.y,this.dragging_&&this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,e.clientX,e.clientY,e,t,n))&&(this.doDrag(e,t,n,!1),e.preventDefault())}},goog.fx.Dragger.prototype.calculatePosition_=function(e,t){var n=goog.dom.getDomHelper(this.document_).getDocumentScroll();e+=n.x-this.pageScroll.x,t+=n.y-this.pageScroll.y,this.pageScroll=n,this.deltaX+=e,this.deltaY+=t,n=this.limitX(this.deltaX);var o=this.limitY(this.deltaY);return new goog.math.Coordinate(n,o)},goog.fx.Dragger.prototype.onScroll_=function(e){var t=this.calculatePosition_(0,0);e.clientX=this.clientX,e.clientY=this.clientY,this.doDrag(e,t.x,t.y,!0)},goog.fx.Dragger.prototype.doDrag=function(e,t,n,o){this.defaultAction(t,n),this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,e.clientX,e.clientY,e,t,n))},goog.fx.Dragger.prototype.limitX=function(e){var t=this.limits,n=isNaN(t.left)?null:t.left;return t=isNaN(t.width)?0:t.width,Math.min(null!=n?n+t:1/0,Math.max(null!=n?n:-1/0,e))},goog.fx.Dragger.prototype.limitY=function(e){var t=this.limits,n=isNaN(t.top)?null:t.top;return t=isNaN(t.height)?0:t.height,Math.min(null!=n?n+t:1/0,Math.max(null!=n?n:-1/0,e))},goog.fx.Dragger.prototype.computeInitialPosition=function(){this.deltaX=this.useRightPositioningForRtl_?goog.style.bidi.getOffsetStart(this.target):this.target.offsetLeft,this.deltaY=this.target.offsetTop},goog.fx.Dragger.prototype.defaultAction=function(e,t){this.useRightPositioningForRtl_&&this.isRightToLeft_()?this.target.style.right=e+"px":this.target.style.left=e+"px",this.target.style.top=t+"px"},goog.fx.Dragger.prototype.isDragging=function(){return this.dragging_},goog.fx.DragEvent=function(e,t,n,o,r,i,a,s){goog.events.Event.call(this,e),this.clientX=n,this.clientY=o,this.browserEvent=r,this.left=goog.isDef(i)?i:t.deltaX,this.top=goog.isDef(a)?a:t.deltaY,this.dragger=t,this.dragCanceled=!!s},goog.inherits(goog.fx.DragEvent,goog.events.Event),goog.fx.dom={},goog.fx.dom.PredefinedEffect=function(e,t,n,o,r){goog.fx.Animation.call(this,t,n,o,r),this.element=e},goog.inherits(goog.fx.dom.PredefinedEffect,goog.fx.Animation),goog.fx.dom.PredefinedEffect.prototype.updateStyle=goog.nullFunction,goog.fx.dom.PredefinedEffect.prototype.isRightToLeft=function(){return goog.isDef(this.rightToLeft_)||(this.rightToLeft_=goog.style.isRightToLeft(this.element)),this.rightToLeft_},goog.fx.dom.PredefinedEffect.prototype.onAnimate=function(){this.updateStyle(),goog.fx.dom.PredefinedEffect.superClass_.onAnimate.call(this)},goog.fx.dom.PredefinedEffect.prototype.onEnd=function(){this.updateStyle(),goog.fx.dom.PredefinedEffect.superClass_.onEnd.call(this)},goog.fx.dom.PredefinedEffect.prototype.onBegin=function(){this.updateStyle(),goog.fx.dom.PredefinedEffect.superClass_.onBegin.call(this)},goog.fx.dom.Slide=function(e,t,n,o,r){if(2!=t.length||2!=n.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments)},goog.inherits(goog.fx.dom.Slide,goog.fx.dom.PredefinedEffect),goog.fx.dom.Slide.prototype.updateStyle=function(){var e=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"right":"left";this.element.style[e]=Math.round(this.coords[0])+"px",this.element.style.top=Math.round(this.coords[1])+"px"},goog.fx.dom.SlideFrom=function(e,t,n,o){var r=[this.isRightPositioningForRtlEnabled()?goog.style.bidi.getOffsetStart(e):e.offsetLeft,e.offsetTop];goog.fx.dom.Slide.call(this,e,r,t,n,o)},goog.inherits(goog.fx.dom.SlideFrom,goog.fx.dom.Slide),goog.fx.dom.SlideFrom.prototype.onBegin=function(){this.startPoint=[this.isRightPositioningForRtlEnabled()?goog.style.bidi.getOffsetStart(this.element):this.element.offsetLeft,this.element.offsetTop],goog.fx.dom.SlideFrom.superClass_.onBegin.call(this)},goog.fx.dom.Swipe=function(e,t,n,o,r){if(2!=t.length||2!=n.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments),this.maxWidth_=Math.max(this.endPoint[0],this.startPoint[0]),this.maxHeight_=Math.max(this.endPoint[1],this.startPoint[1])},goog.inherits(goog.fx.dom.Swipe,goog.fx.dom.PredefinedEffect),goog.fx.dom.Swipe.prototype.updateStyle=function(){var e=this.coords[0],t=this.coords[1];this.clip_(Math.round(e),Math.round(t),this.maxWidth_,this.maxHeight_),this.element.style.width=Math.round(e)+"px";var n=this.isRightPositioningForRtlEnabled()&&this.isRightToLeft()?"marginRight":"marginLeft";this.element.style[n]=Math.round(e)-this.maxWidth_+"px",this.element.style.marginTop=Math.round(t)-this.maxHeight_+"px"},goog.fx.dom.Swipe.prototype.clip_=function(e,t,n,o){this.element.style.clip="rect("+(o-t)+"px "+n+"px "+o+"px "+(n-e)+"px)"},goog.fx.dom.Scroll=function(e,t,n,o,r){if(2!=t.length||2!=n.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments)},goog.inherits(goog.fx.dom.Scroll,goog.fx.dom.PredefinedEffect),goog.fx.dom.Scroll.prototype.updateStyle=function(){this.isRightPositioningForRtlEnabled()?goog.style.bidi.setScrollOffset(this.element,Math.round(this.coords[0])):this.element.scrollLeft=Math.round(this.coords[0]),this.element.scrollTop=Math.round(this.coords[1])},goog.fx.dom.Resize=function(e,t,n,o,r){if(2!=t.length||2!=n.length)throw Error("Start and end points must be 2D");goog.fx.dom.PredefinedEffect.apply(this,arguments)},goog.inherits(goog.fx.dom.Resize,goog.fx.dom.PredefinedEffect),goog.fx.dom.Resize.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px",this.element.style.height=Math.round(this.coords[1])+"px"},goog.fx.dom.ResizeWidth=function(e,t,n,o,r){goog.fx.dom.PredefinedEffect.call(this,e,[t],[n],o,r)},goog.inherits(goog.fx.dom.ResizeWidth,goog.fx.dom.PredefinedEffect),goog.fx.dom.ResizeWidth.prototype.updateStyle=function(){this.element.style.width=Math.round(this.coords[0])+"px"},goog.fx.dom.ResizeHeight=function(e,t,n,o,r){goog.fx.dom.PredefinedEffect.call(this,e,[t],[n],o,r)},goog.inherits(goog.fx.dom.ResizeHeight,goog.fx.dom.PredefinedEffect),goog.fx.dom.ResizeHeight.prototype.updateStyle=function(){this.element.style.height=Math.round(this.coords[0])+"px"},goog.fx.dom.Fade=function(e,t,n,o,r){if(goog.isNumber(t)&&(t=[t]),goog.isNumber(n)&&(n=[n]),goog.fx.dom.PredefinedEffect.call(this,e,t,n,o,r),1!=t.length||1!=n.length)throw Error("Start and end points must be 1D");this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_},goog.inherits(goog.fx.dom.Fade,goog.fx.dom.PredefinedEffect),goog.fx.dom.Fade.TOLERANCE_=1/1024,goog.fx.dom.Fade.OPACITY_UNSET_=-1,goog.fx.dom.Fade.prototype.updateStyle=function(){var e=this.coords[0];Math.abs(e-this.lastOpacityUpdate_)>=goog.fx.dom.Fade.TOLERANCE_&&(goog.style.setOpacity(this.element,e),this.lastOpacityUpdate_=e)},goog.fx.dom.Fade.prototype.onBegin=function(){this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_,goog.fx.dom.Fade.superClass_.onBegin.call(this)},goog.fx.dom.Fade.prototype.onEnd=function(){this.lastOpacityUpdate_=goog.fx.dom.Fade.OPACITY_UNSET_,goog.fx.dom.Fade.superClass_.onEnd.call(this)},goog.fx.dom.Fade.prototype.show=function(){this.element.style.display=""},goog.fx.dom.Fade.prototype.hide=function(){this.element.style.display="none"},goog.fx.dom.FadeOut=function(e,t,n){goog.fx.dom.Fade.call(this,e,1,0,t,n)},goog.inherits(goog.fx.dom.FadeOut,goog.fx.dom.Fade),goog.fx.dom.FadeIn=function(e,t,n){goog.fx.dom.Fade.call(this,e,0,1,t,n)},goog.inherits(goog.fx.dom.FadeIn,goog.fx.dom.Fade),goog.fx.dom.FadeOutAndHide=function(e,t,n){goog.fx.dom.Fade.call(this,e,1,0,t,n)},goog.inherits(goog.fx.dom.FadeOutAndHide,goog.fx.dom.Fade),goog.fx.dom.FadeOutAndHide.prototype.onBegin=function(){this.show(),goog.fx.dom.FadeOutAndHide.superClass_.onBegin.call(this)},goog.fx.dom.FadeOutAndHide.prototype.onEnd=function(){this.hide(),goog.fx.dom.FadeOutAndHide.superClass_.onEnd.call(this)},goog.fx.dom.FadeInAndShow=function(e,t,n){goog.fx.dom.Fade.call(this,e,0,1,t,n)},goog.inherits(goog.fx.dom.FadeInAndShow,goog.fx.dom.Fade),goog.fx.dom.FadeInAndShow.prototype.onBegin=function(){this.show(),goog.fx.dom.FadeInAndShow.superClass_.onBegin.call(this)},goog.fx.dom.BgColorTransform=function(e,t,n,o,r){if(3!=t.length||3!=n.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.apply(this,arguments)},goog.inherits(goog.fx.dom.BgColorTransform,goog.fx.dom.PredefinedEffect),goog.fx.dom.BgColorTransform.prototype.setColor=function(){for(var e=[],t=0;t<this.coords.length;t++)e[t]=Math.round(this.coords[t]);e="rgb("+e.join(",")+")",this.element.style.backgroundColor=e},goog.fx.dom.BgColorTransform.prototype.updateStyle=function(){this.setColor()},goog.fx.dom.bgColorFadeIn=function(e,t,n,o){function r(){e.style.backgroundColor=i}var i=e.style.backgroundColor||"",a=goog.style.getBackgroundColor(e);a=a&&"transparent"!=a&&"rgba(0, 0, 0, 0)"!=a?goog.color.hexToRgb(goog.color.parse(a).hex):[255,255,255],t=new goog.fx.dom.BgColorTransform(e,t,a,n),o?o.listen(t,goog.fx.Transition.EventType.END,r):goog.events.listen(t,goog.fx.Transition.EventType.END,r),t.play()},goog.fx.dom.ColorTransform=function(e,t,n,o,r){if(3!=t.length||3!=n.length)throw Error("Start and end points must be 3D");goog.fx.dom.PredefinedEffect.apply(this,arguments)},goog.inherits(goog.fx.dom.ColorTransform,goog.fx.dom.PredefinedEffect),goog.fx.dom.ColorTransform.prototype.updateStyle=function(){for(var e=[],t=0;t<this.coords.length;t++)e[t]=Math.round(this.coords[t]);e="rgb("+e.join(",")+")",this.element.style.color=e},goog.ui.RangeModel=function(){goog.events.EventTarget.call(this)},goog.inherits(goog.ui.RangeModel,goog.events.EventTarget),goog.tagUnsealableClass(goog.ui.RangeModel),goog.ui.RangeModel.prototype.value_=0,goog.ui.RangeModel.prototype.minimum_=0,goog.ui.RangeModel.prototype.maximum_=100,goog.ui.RangeModel.prototype.extent_=0,goog.ui.RangeModel.prototype.step_=1,goog.ui.RangeModel.prototype.isChanging_=!1,goog.ui.RangeModel.prototype.mute_=!1,goog.ui.RangeModel.prototype.setMute=function(e){this.mute_=e},goog.ui.RangeModel.prototype.setValue=function(e){e=this.roundToStepWithMin(e),this.value_!=e&&(this.value_=e+this.extent_>this.maximum_?this.maximum_-this.extent_:e<this.minimum_?this.minimum_:e,this.isChanging_||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))},goog.ui.RangeModel.prototype.getValue=function(){return this.roundToStepWithMin(this.value_)},goog.ui.RangeModel.prototype.setExtent=function(e){e=this.roundToStepWithMin(e),this.extent_!=e&&(this.extent_=e<0?0:this.value_+e>this.maximum_?this.maximum_-this.value_:e,this.isChanging_||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))},goog.ui.RangeModel.prototype.getExtent=function(){return this.roundToStep(this.extent_)},goog.ui.RangeModel.prototype.setMinimum=function(e){if(this.minimum_!=e){var t=this.isChanging_;this.isChanging_=!0,(this.minimum_=e)+this.extent_>this.maximum_&&(this.extent_=this.maximum_-this.minimum_),e>this.value_&&this.setValue(e),e>this.maximum_&&(this.extent_=0,this.setMaximum(e),this.setValue(e)),(this.isChanging_=t)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE)}},goog.ui.RangeModel.prototype.getMinimum=function(){return this.roundToStepWithMin(this.minimum_)},goog.ui.RangeModel.prototype.setMaximum=function(e){if(e=this.roundToStepWithMin(e),this.maximum_!=e){var t=this.isChanging_;this.isChanging_=!0,(this.maximum_=e)<this.value_+this.extent_&&this.setValue(e-this.extent_),e<this.minimum_&&(this.extent_=0,this.setMinimum(e),this.setValue(this.maximum_)),e<this.minimum_+this.extent_&&(this.extent_=this.maximum_-this.minimum_),(this.isChanging_=t)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE)}},goog.ui.RangeModel.prototype.getMaximum=function(){return this.roundToStepWithMin(this.maximum_)},goog.ui.RangeModel.prototype.getStep=function(){return this.step_},goog.ui.RangeModel.prototype.setStep=function(e){this.step_!=e&&(this.step_=e,e=this.isChanging_,this.isChanging_=!0,this.setMaximum(this.getMaximum()),this.setExtent(this.getExtent()),this.setValue(this.getValue()),(this.isChanging_=e)||this.mute_||this.dispatchEvent(goog.ui.Component.EventType.CHANGE))},goog.ui.RangeModel.prototype.roundToStepWithMin=function(e){return null==this.step_?e:this.minimum_+Math.round((e-this.minimum_)/this.step_)*this.step_},goog.ui.RangeModel.prototype.roundToStep=function(e){return null==this.step_?e:Math.round(e/this.step_)*this.step_},goog.ui.SliderBase=function(e,t){goog.ui.Component.call(this,e),this.additionalAnimations_=null,this.rangeModel=new goog.ui.RangeModel,this.labelFn_=t||goog.functions.NULL,this.focusElementOnSliderDrag_=!0,goog.events.listen(this.rangeModel,goog.ui.Component.EventType.CHANGE,this.handleRangeModelChange,!1,this)},goog.inherits(goog.ui.SliderBase,goog.ui.Component),goog.tagUnsealableClass(goog.ui.SliderBase),goog.ui.SliderBase.EventType={DRAG_VALUE_START:goog.events.getUniqueId("dragvaluestart"),DRAG_VALUE_END:goog.events.getUniqueId("dragvalueend"),DRAG_EXTENT_START:goog.events.getUniqueId("dragextentstart"),DRAG_EXTENT_END:goog.events.getUniqueId("dragextentend"),DRAG_START:goog.events.getUniqueId("dragstart"),DRAG_END:goog.events.getUniqueId("dragend"),ANIMATION_END:goog.events.getUniqueId("animationend")},goog.ui.SliderBase.Orientation={VERTICAL:"vertical",HORIZONTAL:"horizontal"},goog.ui.SliderBase.prototype.orientation_=goog.ui.SliderBase.Orientation.HORIZONTAL,goog.ui.SliderBase.MOUSE_DOWN_INCREMENT_INTERVAL_=200,goog.ui.SliderBase.ANIMATION_INTERVAL_=100,goog.ui.SliderBase.prototype.isAnimating_=!1,goog.ui.SliderBase.prototype.moveToPointEnabled_=!1,goog.ui.SliderBase.prototype.blockIncrement_=10,goog.ui.SliderBase.prototype.minExtent_=0,goog.ui.SliderBase.prototype.isHandleMouseWheel_=!0,goog.ui.SliderBase.prototype.mouseDownTime_=0,goog.ui.SliderBase.prototype.MOUSE_DOWN_DELAY_=1e3,goog.ui.SliderBase.prototype.enabled_=!0,goog.ui.SliderBase.prototype.flipForRtl_=!1,goog.ui.SliderBase.prototype.enableFlipForRtl=function(e){this.flipForRtl_=e},goog.ui.SliderBase.prototype.getCssClass=goog.abstractMethod,goog.ui.SliderBase.prototype.createDom=function(){goog.ui.SliderBase.superClass_.createDom.call(this);var e=this.getDomHelper().createDom("DIV",this.getCssClass(this.orientation_));this.decorateInternal(e)},goog.ui.SliderBase.prototype.createThumbs=goog.abstractMethod,goog.ui.SliderBase.SLIDER_DRAGGING_CSS_CLASS_="goog-slider-dragging",goog.ui.SliderBase.THUMB_DRAGGING_CSS_CLASS_="goog-slider-thumb-dragging",goog.ui.SliderBase.DISABLED_CSS_CLASS_="goog-slider-disabled",goog.ui.SliderBase.prototype.decorateInternal=function(e){goog.ui.SliderBase.superClass_.decorateInternal.call(this,e),goog.asserts.assert(e),goog.dom.classlist.add(e,this.getCssClass(this.orientation_)),this.createThumbs(),this.setAriaRoles()},goog.ui.SliderBase.prototype.enterDocument=function(){goog.ui.SliderBase.superClass_.enterDocument.call(this),this.valueDragger_=new goog.fx.Dragger(this.valueThumb),this.extentDragger_=new goog.fx.Dragger(this.extentThumb),this.valueDragger_.enableRightPositioningForRtl(this.flipForRtl_),this.extentDragger_.enableRightPositioningForRtl(this.flipForRtl_),this.valueDragger_.defaultAction=this.extentDragger_.defaultAction=goog.nullFunction,this.keyHandler_=new goog.events.KeyHandler(this.getElement()),this.enableEventHandlers_(!0),this.getElement().tabIndex=0,this.updateUi_()},goog.ui.SliderBase.prototype.enableEventHandlers_=function(e){e?(this.getHandler().listen(this.valueDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).listen(this.extentDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).listen(this.valueDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).listen(this.extentDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).listen(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.handleKeyDown_).listen(this.getElement(),goog.events.EventType.CLICK,this.handleMouseDownAndClick_).listen(this.getElement(),goog.events.EventType.MOUSEDOWN,this.handleMouseDownAndClick_),this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(!0)):(this.getHandler().unlisten(this.valueDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).unlisten(this.extentDragger_,goog.fx.Dragger.EventType.BEFOREDRAG,this.handleBeforeDrag_).unlisten(this.valueDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).unlisten(this.extentDragger_,[goog.fx.Dragger.EventType.START,goog.fx.Dragger.EventType.END],this.handleThumbDragStartEnd_).unlisten(this.keyHandler_,goog.events.KeyHandler.EventType.KEY,this.handleKeyDown_).unlisten(this.getElement(),goog.events.EventType.CLICK,this.handleMouseDownAndClick_).unlisten(this.getElement(),goog.events.EventType.MOUSEDOWN,this.handleMouseDownAndClick_),this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(!1))},goog.ui.SliderBase.prototype.exitDocument=function(){goog.ui.SliderBase.superClass_.exitDocument.call(this),goog.disposeAll(this.valueDragger_,this.extentDragger_,this.keyHandler_,this.mouseWheelHandler_)},goog.ui.SliderBase.prototype.handleBeforeDrag_=function(e){var t=e.dragger==this.valueDragger_?this.valueThumb:this.extentThumb;if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL){var n=this.getElement().clientHeight-t.offsetHeight;n=(n-e.top)/n*(this.getMaximum()-this.getMinimum())+this.getMinimum()}else n=this.getElement().clientWidth-t.offsetWidth,n=e.left/n*(this.getMaximum()-this.getMinimum())+this.getMinimum();n=e.dragger==this.valueDragger_?Math.min(Math.max(n,this.getMinimum()),this.getValue()+this.getExtent()):Math.min(Math.max(n,this.getValue()),this.getMaximum()),this.setThumbPosition_(t,n)},goog.ui.SliderBase.prototype.handleThumbDragStartEnd_=function(e){var t=e.type==goog.fx.Dragger.EventType.START;goog.dom.classlist.enable(goog.asserts.assertElement(this.getElement()),goog.ui.SliderBase.SLIDER_DRAGGING_CSS_CLASS_,t),goog.dom.classlist.enable(goog.asserts.assertElement(e.target.handle),goog.ui.SliderBase.THUMB_DRAGGING_CSS_CLASS_,t),e=e.dragger==this.valueDragger_,t?(this.dispatchEvent(goog.ui.SliderBase.EventType.DRAG_START),this.dispatchEvent(e?goog.ui.SliderBase.EventType.DRAG_VALUE_START:goog.ui.SliderBase.EventType.DRAG_EXTENT_START)):(this.dispatchEvent(goog.ui.SliderBase.EventType.DRAG_END),this.dispatchEvent(e?goog.ui.SliderBase.EventType.DRAG_VALUE_END:goog.ui.SliderBase.EventType.DRAG_EXTENT_END))},goog.ui.SliderBase.prototype.handleKeyDown_=function(e){var t=!0;switch(e.keyCode){case goog.events.KeyCodes.HOME:this.animatedSetValue(this.getMinimum());break;case goog.events.KeyCodes.END:this.animatedSetValue(this.getMaximum());break;case goog.events.KeyCodes.PAGE_UP:this.moveThumbs(this.getBlockIncrement());break;case goog.events.KeyCodes.PAGE_DOWN:this.moveThumbs(-this.getBlockIncrement());break;case goog.events.KeyCodes.LEFT:var n=this.flipForRtl_&&this.isRightToLeft()?1:-1;this.moveThumbs(e.shiftKey?n*this.getBlockIncrement():n*this.getUnitIncrement());break;case goog.events.KeyCodes.DOWN:this.moveThumbs(e.shiftKey?-this.getBlockIncrement():-this.getUnitIncrement());break;case goog.events.KeyCodes.RIGHT:n=this.flipForRtl_&&this.isRightToLeft()?-1:1,this.moveThumbs(e.shiftKey?n*this.getBlockIncrement():n*this.getUnitIncrement());break;case goog.events.KeyCodes.UP:this.moveThumbs(e.shiftKey?this.getBlockIncrement():this.getUnitIncrement());break;default:t=!1}t&&e.preventDefault()},goog.ui.SliderBase.prototype.handleMouseDownAndClick_=function(e){this.focusElementOnSliderDrag_&&this.getElement().focus&&this.getElement().focus();var t=e.target;goog.dom.contains(this.valueThumb,t)||goog.dom.contains(this.extentThumb,t)||((t=e.type==goog.events.EventType.CLICK)&&goog.now()<this.mouseDownTime_+this.MOUSE_DOWN_DELAY_||(t||(this.mouseDownTime_=goog.now()),this.moveToPointEnabled_?this.animatedSetValue(this.getValueFromMousePosition(e)):this.startBlockIncrementing_(e)))},goog.ui.SliderBase.prototype.handleMouseWheel_=function(e){this.moveThumbs((0<e.detail?-1:1)*this.getUnitIncrement()),e.preventDefault()},goog.ui.SliderBase.prototype.startBlockIncrementing_=function(e){this.storeMousePos_(e),this.thumbToMove_=this.getClosestThumb_(this.getValueFromMousePosition(e)),this.incrementing_=this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?this.lastMousePosition_<this.thumbToMove_.offsetTop:this.lastMousePosition_>this.getOffsetStart_(this.thumbToMove_)+this.thumbToMove_.offsetWidth,e=goog.dom.getOwnerDocument(this.getElement()),this.getHandler().listen(e,goog.events.EventType.MOUSEUP,this.stopBlockIncrementing_,!0).listen(this.getElement(),goog.events.EventType.MOUSEMOVE,this.storeMousePos_),this.incTimer_||(this.incTimer_=new goog.Timer(goog.ui.SliderBase.MOUSE_DOWN_INCREMENT_INTERVAL_),this.getHandler().listen(this.incTimer_,goog.Timer.TICK,this.handleTimerTick_)),this.handleTimerTick_(),this.incTimer_.start()},goog.ui.SliderBase.prototype.handleTimerTick_=function(){var e;if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL){var t=this.lastMousePosition_,n=this.thumbToMove_.offsetTop;this.incrementing_?t<n&&(e=this.getThumbPosition_(this.thumbToMove_)+this.getBlockIncrement()):t>n+this.thumbToMove_.offsetHeight&&(e=this.getThumbPosition_(this.thumbToMove_)-this.getBlockIncrement())}else t=this.lastMousePosition_,n=this.getOffsetStart_(this.thumbToMove_),this.incrementing_?t>n+this.thumbToMove_.offsetWidth&&(e=this.getThumbPosition_(this.thumbToMove_)+this.getBlockIncrement()):t<n&&(e=this.getThumbPosition_(this.thumbToMove_)-this.getBlockIncrement());goog.isDef(e)&&this.setThumbPosition_(this.thumbToMove_,e)},goog.ui.SliderBase.prototype.stopBlockIncrementing_=function(){this.incTimer_&&this.incTimer_.stop();var e=goog.dom.getOwnerDocument(this.getElement());this.getHandler().unlisten(e,goog.events.EventType.MOUSEUP,this.stopBlockIncrementing_,!0).unlisten(this.getElement(),goog.events.EventType.MOUSEMOVE,this.storeMousePos_)},goog.ui.SliderBase.prototype.getRelativeMousePos_=function(e){return e=goog.style.getRelativePosition(e,this.getElement()),this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?e.y:this.flipForRtl_&&this.isRightToLeft()?this.getElement().clientWidth-e.x:e.x},goog.ui.SliderBase.prototype.storeMousePos_=function(e){this.lastMousePosition_=this.getRelativeMousePos_(e)},goog.ui.SliderBase.prototype.getValueFromMousePosition=function(e){var t=this.getMinimum(),n=this.getMaximum();if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL){var o=this.valueThumb.offsetHeight,r=this.getElement().clientHeight-o;return(n-t)*(r-(e=this.getRelativeMousePos_(e)-o/2))/r+t}return o=this.valueThumb.offsetWidth,r=this.getElement().clientWidth-o,(n-t)*(e=this.getRelativeMousePos_(e)-o/2)/r+t},goog.ui.SliderBase.prototype.getThumbPosition_=function(e){if(e==this.valueThumb)return this.rangeModel.getValue();if(e==this.extentThumb)return this.rangeModel.getValue()+this.rangeModel.getExtent();throw Error("Illegal thumb element. Neither minThumb nor maxThumb")},goog.ui.SliderBase.prototype.isDragging=function(){return this.valueDragger_.isDragging()||this.extentDragger_.isDragging()},goog.ui.SliderBase.prototype.moveThumbs=function(e){Math.abs(e)<this.getStep()&&(e=goog.math.sign(e)*this.getStep());var t=this.getThumbPosition_(this.valueThumb)+e;e=this.getThumbPosition_(this.extentThumb)+e,t=goog.math.clamp(t,this.getMinimum(),this.getMaximum()-this.minExtent_),e=goog.math.clamp(e,this.getMinimum()+this.minExtent_,this.getMaximum()),this.setValueAndExtent(t,e-t)},goog.ui.SliderBase.prototype.setThumbPosition_=function(e,t){var n=this.rangeModel.roundToStepWithMin(t),o=e==this.valueThumb?n:this.rangeModel.getValue();n=e==this.extentThumb?n:this.rangeModel.getValue()+this.rangeModel.getExtent(),o>=this.getMinimum()&&n>=o+this.minExtent_&&this.getMaximum()>=n&&this.setValueAndExtent(o,n-o)},goog.ui.SliderBase.prototype.setValueAndExtent=function(e,t){this.getMinimum()<=e&&e<=this.getMaximum()-t&&this.minExtent_<=t&&t<=this.getMaximum()-e&&(e!=this.getValue()||t!=this.getExtent())&&(this.rangeModel.setMute(!0),this.rangeModel.setExtent(0),this.rangeModel.setValue(e),this.rangeModel.setExtent(t),this.rangeModel.setMute(!1),this.handleRangeModelChange(null))},goog.ui.SliderBase.prototype.getMinimum=function(){return this.rangeModel.getMinimum()},goog.ui.SliderBase.prototype.setMinimum=function(e){this.rangeModel.setMinimum(e)},goog.ui.SliderBase.prototype.getMaximum=function(){return this.rangeModel.getMaximum()},goog.ui.SliderBase.prototype.setMaximum=function(e){this.rangeModel.setMaximum(e)},goog.ui.SliderBase.prototype.getValueThumb=function(){return this.valueThumb},goog.ui.SliderBase.prototype.getExtentThumb=function(){return this.extentThumb},goog.ui.SliderBase.prototype.getClosestThumb_=function(e){return e<=this.rangeModel.getValue()+this.rangeModel.getExtent()/2?this.valueThumb:this.extentThumb},goog.ui.SliderBase.prototype.handleRangeModelChange=function(e){this.updateUi_(),this.updateAriaStates(),this.dispatchEvent(goog.ui.Component.EventType.CHANGE)},goog.ui.SliderBase.prototype.updateUi_=function(){if(this.valueThumb&&!this.isAnimating_){var e=this.getThumbCoordinateForValue(this.getThumbPosition_(this.valueThumb)),t=this.getThumbCoordinateForValue(this.getThumbPosition_(this.extentThumb));if(this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL)this.valueThumb.style.top=e.y+"px",this.extentThumb.style.top=t.y+"px",this.rangeHighlight&&(e=this.calculateRangeHighlightPositioning_(t.y,e.y,this.valueThumb.offsetHeight),this.rangeHighlight.style.top=e.offset+"px",this.rangeHighlight.style.height=e.size+"px");else{var n=this.flipForRtl_&&this.isRightToLeft()?"right":"left";this.valueThumb.style[n]=e.x+"px",this.extentThumb.style[n]=t.x+"px",this.rangeHighlight&&(e=this.calculateRangeHighlightPositioning_(e.x,t.x,this.valueThumb.offsetWidth),this.rangeHighlight.style[n]=e.offset+"px",this.rangeHighlight.style.width=e.size+"px")}}},goog.ui.SliderBase.prototype.calculateRangeHighlightPositioning_=function(e,t,n){var o=Math.ceil(n/2);return{offset:e+o,size:Math.max(t-e+n-2*o,0)}},goog.ui.SliderBase.prototype.getThumbCoordinateForValue=function(e){var t=new goog.math.Coordinate;if(this.valueThumb){var n=this.getMinimum(),o=this.getMaximum();e=e==n&&n==o?0:(e-n)/(o-n),this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(n=this.valueThumb.offsetHeight,n=this.getElement().clientHeight-n,e=Math.round(e*n),t.x=this.getOffsetStart_(this.valueThumb),t.y=n-e):(n=this.getElement().clientWidth-this.valueThumb.offsetWidth,t.x=Math.round(e*n),t.y=this.valueThumb.offsetTop)}return t},goog.ui.SliderBase.prototype.animatedSetValue=function(e){e=goog.math.clamp(e,this.getMinimum(),this.getMaximum()),this.isAnimating_&&(this.currentAnimation_.stop(!0),this.currentAnimation_.dispose());var t=new goog.fx.AnimationParallelQueue,n=this.getClosestThumb_(e),o=this.getValue(),r=this.getExtent(),i=this.getThumbPosition_(n),a=this.getThumbCoordinateForValue(i),s=this.getStep();Math.abs(e-i)<s&&(e=goog.math.clamp(i+(i<e?s:-s),this.getMinimum(),this.getMaximum())),this.setThumbPosition_(n,e),i=this.getThumbCoordinateForValue(this.getThumbPosition_(n)),s=this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?[this.getOffsetStart_(n),i.y]:[i.x,n.offsetTop],(a=new goog.fx.dom.Slide(n,[a.x,a.y],s,goog.ui.SliderBase.ANIMATION_INTERVAL_)).enableRightPositioningForRtl(this.flipForRtl_),t.add(a),this.rangeHighlight&&this.addRangeHighlightAnimations_(n,o,r,i,t),this.additionalAnimations_&&(e=this.additionalAnimations_.createAnimations(o,e,goog.ui.SliderBase.ANIMATION_INTERVAL_),goog.array.forEach(e,function(e){t.add(e)})),this.currentAnimation_=t,this.getHandler().listen(t,goog.fx.Transition.EventType.END,this.endAnimation_),this.isAnimating_=!0,t.play(!1)},goog.ui.SliderBase.prototype.isAnimating=function(){return this.isAnimating_},goog.ui.SliderBase.prototype.setAdditionalAnimations=function(e){this.additionalAnimations_=e},goog.ui.SliderBase.prototype.addRangeHighlightAnimations_=function(e,t,n,o,r){var i=this.getThumbCoordinateForValue(t),a=this.getThumbCoordinateForValue(t+n);t=i,n=a,e==this.valueThumb?t=o:n=o,this.orientation_==goog.ui.SliderBase.Orientation.VERTICAL?(e=this.calculateRangeHighlightPositioning_(a.y,i.y,this.valueThumb.offsetHeight),i=this.calculateRangeHighlightPositioning_(n.y,t.y,this.valueThumb.offsetHeight),o=new goog.fx.dom.Slide(this.rangeHighlight,[this.getOffsetStart_(this.rangeHighlight),e.offset],[this.getOffsetStart_(this.rangeHighlight),i.offset],goog.ui.SliderBase.ANIMATION_INTERVAL_),e=new goog.fx.dom.ResizeHeight(this.rangeHighlight,e.size,i.size,goog.ui.SliderBase.ANIMATION_INTERVAL_)):(e=this.calculateRangeHighlightPositioning_(i.x,a.x,this.valueThumb.offsetWidth),i=this.calculateRangeHighlightPositioning_(t.x,n.x,this.valueThumb.offsetWidth),o=new goog.fx.dom.Slide(this.rangeHighlight,[e.offset,this.rangeHighlight.offsetTop],[i.offset,this.rangeHighlight.offsetTop],goog.ui.SliderBase.ANIMATION_INTERVAL_),e=new goog.fx.dom.ResizeWidth(this.rangeHighlight,e.size,i.size,goog.ui.SliderBase.ANIMATION_INTERVAL_)),o.enableRightPositioningForRtl(this.flipForRtl_),e.enableRightPositioningForRtl(this.flipForRtl_),r.add(o),r.add(e)},goog.ui.SliderBase.prototype.endAnimation_=function(e){this.isAnimating_=!1,this.dispatchEvent(goog.ui.SliderBase.EventType.ANIMATION_END)},goog.ui.SliderBase.prototype.setOrientation=function(e){if(this.orientation_!=e){var t=this.getCssClass(this.orientation_),n=this.getCssClass(e);this.orientation_=e,this.getElement()&&(goog.dom.classlist.swap(goog.asserts.assert(this.getElement()),t,n),e=this.flipForRtl_&&this.isRightToLeft()?"right":"left",this.valueThumb.style[e]=this.valueThumb.style.top="",this.extentThumb.style[e]=this.extentThumb.style.top="",this.rangeHighlight&&(this.rangeHighlight.style[e]=this.rangeHighlight.style.top="",this.rangeHighlight.style.width=this.rangeHighlight.style.height=""),this.updateUi_())}},goog.ui.SliderBase.prototype.getOrientation=function(){return this.orientation_},goog.ui.SliderBase.prototype.disposeInternal=function(){goog.ui.SliderBase.superClass_.disposeInternal.call(this),this.incTimer_&&this.incTimer_.dispose(),delete this.incTimer_,this.currentAnimation_&&this.currentAnimation_.dispose(),delete this.currentAnimation_,delete this.valueThumb,delete this.extentThumb,this.rangeHighlight&&delete this.rangeHighlight,this.rangeModel.dispose(),delete this.rangeModel,this.keyHandler_&&(this.keyHandler_.dispose(),delete this.keyHandler_),this.mouseWheelHandler_&&(this.mouseWheelHandler_.dispose(),delete this.mouseWheelHandler_),this.valueDragger_&&(this.valueDragger_.dispose(),delete this.valueDragger_),this.extentDragger_&&(this.extentDragger_.dispose(),delete this.extentDragger_)},goog.ui.SliderBase.prototype.getBlockIncrement=function(){return this.blockIncrement_},goog.ui.SliderBase.prototype.setBlockIncrement=function(e){this.blockIncrement_=e},goog.ui.SliderBase.prototype.setMinExtent=function(e){this.minExtent_=e},goog.ui.SliderBase.prototype.unitIncrement_=1,goog.ui.SliderBase.prototype.getUnitIncrement=function(){return this.unitIncrement_},goog.ui.SliderBase.prototype.setUnitIncrement=function(e){this.unitIncrement_=e},goog.ui.SliderBase.prototype.getStep=function(){return this.rangeModel.getStep()},goog.ui.SliderBase.prototype.setStep=function(e){this.rangeModel.setStep(e)},goog.ui.SliderBase.prototype.getMoveToPointEnabled=function(){return this.moveToPointEnabled_},goog.ui.SliderBase.prototype.setMoveToPointEnabled=function(e){this.moveToPointEnabled_=e},goog.ui.SliderBase.prototype.getValue=function(){return this.rangeModel.getValue()},goog.ui.SliderBase.prototype.setValue=function(e){this.setThumbPosition_(this.valueThumb,e)},goog.ui.SliderBase.prototype.getExtent=function(){return this.rangeModel.getExtent()},goog.ui.SliderBase.prototype.setExtent=function(e){this.setThumbPosition_(this.extentThumb,this.rangeModel.getValue()+e)},goog.ui.SliderBase.prototype.setVisible=function(e){goog.style.setElementShown(this.getElement(),e),e&&this.updateUi_()},goog.ui.SliderBase.prototype.setAriaRoles=function(){var e=this.getElement();goog.asserts.assert(e,"The DOM element for the slider base cannot be null."),goog.a11y.aria.setRole(e,goog.a11y.aria.Role.SLIDER),this.updateAriaStates()},goog.ui.SliderBase.prototype.updateAriaStates=function(){var e=this.getElement();e&&(goog.a11y.aria.setState(e,goog.a11y.aria.State.VALUEMIN,this.getMinimum()),goog.a11y.aria.setState(e,goog.a11y.aria.State.VALUEMAX,this.getMaximum()),goog.a11y.aria.setState(e,goog.a11y.aria.State.VALUENOW,this.getValue()),goog.a11y.aria.setState(e,goog.a11y.aria.State.VALUETEXT,this.getTextValue()||""))},goog.ui.SliderBase.prototype.setHandleMouseWheel=function(e){this.isInDocument()&&e!=this.isHandleMouseWheel()&&this.enableMouseWheelHandling_(e),this.isHandleMouseWheel_=e},goog.ui.SliderBase.prototype.isHandleMouseWheel=function(){return this.isHandleMouseWheel_},goog.ui.SliderBase.prototype.enableMouseWheelHandling_=function(e){e?(this.mouseWheelHandler_||(this.mouseWheelHandler_=new goog.events.MouseWheelHandler(this.getElement())),this.getHandler().listen(this.mouseWheelHandler_,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.handleMouseWheel_)):this.getHandler().unlisten(this.mouseWheelHandler_,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.handleMouseWheel_)},goog.ui.SliderBase.prototype.setEnabled=function(e){this.enabled_!=e&&this.dispatchEvent(e?goog.ui.Component.EventType.ENABLE:goog.ui.Component.EventType.DISABLE)&&(this.enabled_=e,this.enableEventHandlers_(e),e||this.stopBlockIncrementing_(),goog.dom.classlist.enable(goog.asserts.assert(this.getElement()),goog.ui.SliderBase.DISABLED_CSS_CLASS_,!e))},goog.ui.SliderBase.prototype.isEnabled=function(){return this.enabled_},goog.ui.SliderBase.prototype.getOffsetStart_=function(e){return this.flipForRtl_?goog.style.bidi.getOffsetStart(e):e.offsetLeft},goog.ui.SliderBase.prototype.getTextValue=function(){return this.labelFn_(this.getValue())},goog.ui.SliderBase.prototype.setFocusElementOnSliderDrag=function(e){this.focusElementOnSliderDrag_=e},goog.ui.SliderBase.AnimationFactory=function(){},goog.ui.Slider=function(e,t){goog.ui.SliderBase.call(this,e,t),this.rangeModel.setExtent(0)},goog.inherits(goog.ui.Slider,goog.ui.SliderBase),goog.tagUnsealableClass(goog.ui.Slider),goog.ui.Slider.Orientation=goog.ui.SliderBase.Orientation,goog.ui.Slider.CSS_CLASS_PREFIX="goog-slider",goog.ui.Slider.THUMB_CSS_CLASS=goog.ui.Slider.CSS_CLASS_PREFIX+"-thumb",goog.ui.Slider.prototype.getCssClass=function(e){return e==goog.ui.SliderBase.Orientation.VERTICAL?goog.ui.Slider.CSS_CLASS_PREFIX+"-vertical":goog.ui.Slider.CSS_CLASS_PREFIX+"-horizontal"},goog.ui.Slider.prototype.getThumbCssClass=function(){return goog.ui.Slider.THUMB_CSS_CLASS},goog.ui.Slider.prototype.createThumbs=function(){var e=this.getElement(),t=goog.dom.getElementsByTagNameAndClass(null,this.getThumbCssClass(),e)[0];t||(t=this.createThumb_(),e.appendChild(t)),this.valueThumb=this.extentThumb=t},goog.ui.Slider.prototype.createThumb_=function(){var e=this.getDomHelper().createDom("DIV",this.getThumbCssClass());return goog.a11y.aria.setRole(e,goog.a11y.aria.Role.BUTTON),e},goog.positioning={},goog.positioning.CornerBit={BOTTOM:1,CENTER:2,RIGHT:4,FLIP_RTL:8},goog.positioning.Corner={TOP_LEFT:0,TOP_RIGHT:goog.positioning.CornerBit.RIGHT,BOTTOM_LEFT:goog.positioning.CornerBit.BOTTOM,BOTTOM_RIGHT:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.RIGHT,TOP_START:goog.positioning.CornerBit.FLIP_RTL,TOP_END:goog.positioning.CornerBit.FLIP_RTL|goog.positioning.CornerBit.RIGHT,BOTTOM_START:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.FLIP_RTL,BOTTOM_END:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.RIGHT|goog.positioning.CornerBit.FLIP_RTL,TOP_CENTER:goog.positioning.CornerBit.CENTER,BOTTOM_CENTER:goog.positioning.CornerBit.BOTTOM|goog.positioning.CornerBit.CENTER},goog.positioning.Overflow={IGNORE:0,ADJUST_X:1,FAIL_X:2,ADJUST_Y:4,FAIL_Y:8,RESIZE_WIDTH:16,RESIZE_HEIGHT:32,ADJUST_X_EXCEPT_OFFSCREEN:65,ADJUST_Y_EXCEPT_OFFSCREEN:132},goog.positioning.OverflowStatus={NONE:0,ADJUSTED_X:1,ADJUSTED_Y:2,WIDTH_ADJUSTED:4,HEIGHT_ADJUSTED:8,FAILED_LEFT:16,FAILED_RIGHT:32,FAILED_TOP:64,FAILED_BOTTOM:128,FAILED_OUTSIDE_VIEWPORT:256},goog.positioning.OverflowStatus.FAILED=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT|goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM|goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT,goog.positioning.OverflowStatus.FAILED_HORIZONTAL=goog.positioning.OverflowStatus.FAILED_LEFT|goog.positioning.OverflowStatus.FAILED_RIGHT,goog.positioning.OverflowStatus.FAILED_VERTICAL=goog.positioning.OverflowStatus.FAILED_TOP|goog.positioning.OverflowStatus.FAILED_BOTTOM,goog.positioning.positionAtAnchor=function(e,t,n,o,r,i,a,s,l){goog.asserts.assert(n);var c=goog.positioning.getOffsetParentPageOffset(n),u=goog.positioning.getVisiblePart_(e);if(goog.style.translateRectForAnotherFrame(u,goog.dom.getDomHelper(e),goog.dom.getDomHelper(n)),e=goog.positioning.getEffectiveCorner(e,t),t=u.left,e&goog.positioning.CornerBit.RIGHT?t+=u.width:e&goog.positioning.CornerBit.CENTER&&(t+=u.width/2),u=new goog.math.Coordinate(t,u.top+(e&goog.positioning.CornerBit.BOTTOM?u.height:0)),u=goog.math.Coordinate.difference(u,c),r&&(u.x+=(e&goog.positioning.CornerBit.RIGHT?-1:1)*r.x,u.y+=(e&goog.positioning.CornerBit.BOTTOM?-1:1)*r.y),a)if(l)var g=l;else(g=goog.style.getVisibleRectForElement(n))&&(g.top-=c.y,g.right-=c.x,g.bottom-=c.y,g.left-=c.x);return goog.positioning.positionAtCoordinate(u,n,o,i,g,a,s)},goog.positioning.getOffsetParentPageOffset=function(e){if(e=e.offsetParent){var t="HTML"==e.tagName||"BODY"==e.tagName;if(!t||"static"!=goog.style.getComputedPosition(e)){var n=goog.style.getPageOffset(e);t||(n=goog.math.Coordinate.difference(n,new goog.math.Coordinate(goog.style.bidi.getScrollLeft(e),e.scrollTop)))}}return n||new goog.math.Coordinate},goog.positioning.getVisiblePart_=function(e){var t=goog.style.getBounds(e);return(e=goog.style.getVisibleRectForElement(e))&&t.intersection(goog.math.Rect.createFromBox(e)),t},goog.positioning.positionAtCoordinate=function(e,t,n,o,r,i,a){e=e.clone();var s=goog.positioning.getEffectiveCorner(t,n);return n=goog.style.getSize(t),a=a?a.clone():n.clone(),(e=goog.positioning.getPositionAtCoordinate(e,a,s,o,r,i)).status&goog.positioning.OverflowStatus.FAILED||(goog.style.setPosition(t,e.rect.getTopLeft()),a=e.rect.getSize(),goog.math.Size.equals(n,a)||goog.style.setBorderBoxSize(t,a)),e.status},goog.positioning.getPositionAtCoordinate=function(e,t,n,o,r,i){e=e.clone(),t=t.clone();var a=goog.positioning.OverflowStatus.NONE;return(o||n!=goog.positioning.Corner.TOP_LEFT)&&(n&goog.positioning.CornerBit.RIGHT?e.x-=t.width+(o?o.right:0):n&goog.positioning.CornerBit.CENTER?e.x-=t.width/2:o&&(e.x+=o.left),n&goog.positioning.CornerBit.BOTTOM?e.y-=t.height+(o?o.bottom:0):o&&(e.y+=o.top)),i&&(a=r?goog.positioning.adjustForViewport_(e,t,r,i):goog.positioning.OverflowStatus.FAILED_OUTSIDE_VIEWPORT),(n=new goog.math.Rect(0,0,0,0)).left=e.x,n.top=e.y,n.width=t.width,n.height=t.height,{rect:n,status:a}},goog.positioning.adjustForViewport_=function(e,t,n,o){var r=goog.positioning.OverflowStatus.NONE,i=goog.positioning.Overflow.ADJUST_X_EXCEPT_OFFSCREEN,a=goog.positioning.Overflow.ADJUST_Y_EXCEPT_OFFSCREEN;return(o&i)==i&&(e.x<n.left||e.x>=n.right)&&(o&=~goog.positioning.Overflow.ADJUST_X),(o&a)==a&&(e.y<n.top||e.y>=n.bottom)&&(o&=~goog.positioning.Overflow.ADJUST_Y),e.x<n.left&&o&goog.positioning.Overflow.ADJUST_X&&(e.x=n.left,r|=goog.positioning.OverflowStatus.ADJUSTED_X),o&goog.positioning.Overflow.RESIZE_WIDTH&&(i=e.x,e.x<n.left&&(e.x=n.left,r|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED),e.x+t.width>n.right&&(t.width=Math.min(n.right-e.x,i+t.width-n.left),t.width=Math.max(t.width,0),r|=goog.positioning.OverflowStatus.WIDTH_ADJUSTED)),e.x+t.width>n.right&&o&goog.positioning.Overflow.ADJUST_X&&(e.x=Math.max(n.right-t.width,n.left),r|=goog.positioning.OverflowStatus.ADJUSTED_X),o&goog.positioning.Overflow.FAIL_X&&(r|=(e.x<n.left?goog.positioning.OverflowStatus.FAILED_LEFT:0)|(e.x+t.width>n.right?goog.positioning.OverflowStatus.FAILED_RIGHT:0)),e.y<n.top&&o&goog.positioning.Overflow.ADJUST_Y&&(e.y=n.top,r|=goog.positioning.OverflowStatus.ADJUSTED_Y),o&goog.positioning.Overflow.RESIZE_HEIGHT&&(i=e.y,e.y<n.top&&(e.y=n.top,r|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED),e.y+t.height>n.bottom&&(t.height=Math.min(n.bottom-e.y,i+t.height-n.top),t.height=Math.max(t.height,0),r|=goog.positioning.OverflowStatus.HEIGHT_ADJUSTED)),e.y+t.height>n.bottom&&o&goog.positioning.Overflow.ADJUST_Y&&(e.y=Math.max(n.bottom-t.height,n.top),r|=goog.positioning.OverflowStatus.ADJUSTED_Y),o&goog.positioning.Overflow.FAIL_Y&&(r|=(e.y<n.top?goog.positioning.OverflowStatus.FAILED_TOP:0)|(e.y+t.height>n.bottom?goog.positioning.OverflowStatus.FAILED_BOTTOM:0)),r},goog.positioning.getEffectiveCorner=function(e,t){return(t&goog.positioning.CornerBit.FLIP_RTL&&goog.style.isRightToLeft(e)?t^goog.positioning.CornerBit.RIGHT:t)&~goog.positioning.CornerBit.FLIP_RTL},goog.positioning.flipCornerHorizontal=function(e){return e^goog.positioning.CornerBit.RIGHT},goog.positioning.flipCornerVertical=function(e){return e^goog.positioning.CornerBit.BOTTOM},goog.positioning.flipCorner=function(e){return e^goog.positioning.CornerBit.BOTTOM^goog.positioning.CornerBit.RIGHT},goog.positioning.AbstractPosition=function(){},goog.positioning.AbstractPosition.prototype.reposition=function(e,t,n,o){},goog.positioning.ClientPosition=function(e,t){this.coordinate=e instanceof goog.math.Coordinate?e:new goog.math.Coordinate(e,t)},goog.inherits(goog.positioning.ClientPosition,goog.positioning.AbstractPosition),goog.positioning.ClientPosition.prototype.reposition=function(e,t,n,o){goog.asserts.assert(e);var r=goog.style.getViewportPageOffset(goog.dom.getOwnerDocument(e)),i=this.coordinate.x+r.x;r=this.coordinate.y+r.y;var a=goog.positioning.getOffsetParentPageOffset(e);i-=a.x,r-=a.y,goog.positioning.positionAtCoordinate(new goog.math.Coordinate(i,r),e,t,n,null,null,o)},goog.events.FocusHandler=function(e){goog.events.EventTarget.call(this),this.element_=e,e=goog.userAgent.IE?"focusout":"blur",this.listenKeyIn_=goog.events.listen(this.element_,goog.userAgent.IE?"focusin":"focus",this,!goog.userAgent.IE),this.listenKeyOut_=goog.events.listen(this.element_,e,this,!goog.userAgent.IE)},goog.inherits(goog.events.FocusHandler,goog.events.EventTarget),goog.events.FocusHandler.EventType={FOCUSIN:"focusin",FOCUSOUT:"focusout"},goog.events.FocusHandler.prototype.handleEvent=function(e){var t=e.getBrowserEvent();(t=new goog.events.BrowserEvent(t)).type="focusin"==e.type||"focus"==e.type?goog.events.FocusHandler.EventType.FOCUSIN:goog.events.FocusHandler.EventType.FOCUSOUT,this.dispatchEvent(t)},goog.events.FocusHandler.prototype.disposeInternal=function(){goog.events.FocusHandler.superClass_.disposeInternal.call(this),goog.events.unlistenByKey(this.listenKeyIn_),goog.events.unlistenByKey(this.listenKeyOut_),delete this.element_},goog.positioning.AnchoredPosition=function(e,t,n){this.element=e,this.corner=t,this.overflow_=n},goog.inherits(goog.positioning.AnchoredPosition,goog.positioning.AbstractPosition),goog.positioning.AnchoredPosition.prototype.reposition=function(e,t,n,o){goog.positioning.positionAtAnchor(this.element,this.corner,e,t,void 0,n,this.overflow_)},goog.positioning.ViewportPosition=function(e,t){this.coordinate=e instanceof goog.math.Coordinate?e:new goog.math.Coordinate(e,t)},goog.inherits(goog.positioning.ViewportPosition,goog.positioning.AbstractPosition),goog.positioning.ViewportPosition.prototype.reposition=function(e,t,n,o){goog.positioning.positionAtAnchor(goog.style.getClientViewportElement(e),goog.positioning.Corner.TOP_LEFT,e,t,this.coordinate,n,null,o)},goog.structs={},goog.structs.getCount=function(e){return e.getCount&&"function"==typeof e.getCount?e.getCount():goog.isArrayLike(e)||goog.isString(e)?e.length:goog.object.getCount(e)},goog.structs.getValues=function(e){if(e.getValues&&"function"==typeof e.getValues)return e.getValues();if(goog.isString(e))return e.split("");if(goog.isArrayLike(e)){for(var t=[],n=e.length,o=0;o<n;o++)t.push(e[o]);return t}return goog.object.getValues(e)},goog.structs.getKeys=function(e){if(e.getKeys&&"function"==typeof e.getKeys)return e.getKeys();if(!e.getValues||"function"!=typeof e.getValues){if(goog.isArrayLike(e)||goog.isString(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}return goog.object.getKeys(e)}},goog.structs.contains=function(e,t){return e.contains&&"function"==typeof e.contains?e.contains(t):e.containsValue&&"function"==typeof e.containsValue?e.containsValue(t):goog.isArrayLike(e)||goog.isString(e)?goog.array.contains(e,t):goog.object.containsValue(e,t)},goog.structs.isEmpty=function(e){return e.isEmpty&&"function"==typeof e.isEmpty?e.isEmpty():goog.isArrayLike(e)||goog.isString(e)?goog.array.isEmpty(e):goog.object.isEmpty(e)},goog.structs.clear=function(e){e.clear&&"function"==typeof e.clear?e.clear():goog.isArrayLike(e)?goog.array.clear(e):goog.object.clear(e)},goog.structs.forEach=function(e,t,n){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,n);else if(goog.isArrayLike(e)||goog.isString(e))goog.array.forEach(e,t,n);else for(var o=goog.structs.getKeys(e),r=goog.structs.getValues(e),i=r.length,a=0;a<i;a++)t.call(n,r[a],o&&o[a],e)},goog.structs.filter=function(e,t,n){if("function"==typeof e.filter)return e.filter(t,n);if(goog.isArrayLike(e)||goog.isString(e))return goog.array.filter(e,t,n);var o=goog.structs.getKeys(e),r=goog.structs.getValues(e),i=r.length;if(o)for(var a={},s=0;s<i;s++)t.call(n,r[s],o[s],e)&&(a[o[s]]=r[s]);else for(a=[],s=0;s<i;s++)t.call(n,r[s],void 0,e)&&a.push(r[s]);return a},goog.structs.map=function(e,t,n){if("function"==typeof e.map)return e.map(t,n);if(goog.isArrayLike(e)||goog.isString(e))return goog.array.map(e,t,n);var o=goog.structs.getKeys(e),r=goog.structs.getValues(e),i=r.length;if(o)for(var a={},s=0;s<i;s++)a[o[s]]=t.call(n,r[s],o[s],e);else for(a=[],s=0;s<i;s++)a[s]=t.call(n,r[s],void 0,e);return a},goog.structs.some=function(e,t,n){if("function"==typeof e.some)return e.some(t,n);if(goog.isArrayLike(e)||goog.isString(e))return goog.array.some(e,t,n);for(var o=goog.structs.getKeys(e),r=goog.structs.getValues(e),i=r.length,a=0;a<i;a++)if(t.call(n,r[a],o&&o[a],e))return!0;return!1},goog.structs.every=function(e,t,n){if("function"==typeof e.every)return e.every(t,n);if(goog.isArrayLike(e)||goog.isString(e))return goog.array.every(e,t,n);for(var o=goog.structs.getKeys(e),r=goog.structs.getValues(e),i=r.length,a=0;a<i;a++)if(!t.call(n,r[a],o&&o[a],e))return!1;return!0},goog.structs.Collection=function(){},goog.structs.Map=function(e,t){this.map_={},this.keys_=[],this.version_=this.count_=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var o=0;o<n;o+=2)this.set(arguments[o],arguments[o+1])}else e&&this.addAll(e)},goog.structs.Map.prototype.getCount=function(){return this.count_},goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();for(var e=[],t=0;t<this.keys_.length;t++)e.push(this.map_[this.keys_[t]]);return e},goog.structs.Map.prototype.getKeys=function(){return this.cleanupKeysArray_(),this.keys_.concat()},goog.structs.Map.prototype.containsKey=function(e){return goog.structs.Map.hasKey_(this.map_,e)},goog.structs.Map.prototype.containsValue=function(e){for(var t=0;t<this.keys_.length;t++){var n=this.keys_[t];if(goog.structs.Map.hasKey_(this.map_,n)&&this.map_[n]==e)return!0}return!1},goog.structs.Map.prototype.equals=function(e,t){if(this===e)return!0;if(this.count_!=e.getCount())return!1;var n=t||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var o,r=0;o=this.keys_[r];r++)if(!n(this.get(o),e.get(o)))return!1;return!0},goog.structs.Map.defaultEquals=function(e,t){return e===t},goog.structs.Map.prototype.isEmpty=function(){return 0==this.count_},goog.structs.Map.prototype.clear=function(){this.map_={},this.version_=this.count_=this.keys_.length=0},goog.structs.Map.prototype.remove=function(e){return!!goog.structs.Map.hasKey_(this.map_,e)&&(delete this.map_[e],this.count_--,this.version_++,this.keys_.length>2*this.count_&&this.cleanupKeysArray_(),!0)},goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){for(var e=0,t=0;e<this.keys_.length;){var n=this.keys_[e];goog.structs.Map.hasKey_(this.map_,n)&&(this.keys_[t++]=n),e++}this.keys_.length=t}if(this.count_!=this.keys_.length){var o={};for(t=e=0;e<this.keys_.length;)n=this.keys_[e],goog.structs.Map.hasKey_(o,n)||(o[this.keys_[t++]=n]=1),e++;this.keys_.length=t}},goog.structs.Map.prototype.get=function(e,t){return goog.structs.Map.hasKey_(this.map_,e)?this.map_[e]:t},goog.structs.Map.prototype.set=function(e,t){goog.structs.Map.hasKey_(this.map_,e)||(this.count_++,this.keys_.push(e),this.version_++),this.map_[e]=t},goog.structs.Map.prototype.addAll=function(e){if(e instanceof goog.structs.Map)for(var t=e.getKeys(),n=0;n<t.length;n++)this.set(t[n],e.get(t[n]));else for(t in e)this.set(t,e[t])},goog.structs.Map.prototype.forEach=function(e,t){for(var n=this.getKeys(),o=0;o<n.length;o++){var r=n[o],i=this.get(r);e.call(t,i,r,this)}},goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)},goog.structs.Map.prototype.transpose=function(){for(var e=new goog.structs.Map,t=0;t<this.keys_.length;t++){var n=this.keys_[t];e.set(this.map_[n],n)}return e},goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();for(var e={},t=0;t<this.keys_.length;t++){var n=this.keys_[t];e[n]=this.map_[n]}return e},goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(!0)},goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(!1)},goog.structs.Map.prototype.__iterator__=function(t){this.cleanupKeysArray_();var n=0,o=this.version_,r=this,e=new goog.iter.Iterator;return e.next=function(){if(o!=r.version_)throw Error("The map has changed since the iterator was created");if(n>=r.keys_.length)throw goog.iter.StopIteration;var e=r.keys_[n++];return t?e:r.map_[e]},e},goog.structs.Map.hasKey_=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},goog.structs.Set=function(e){this.map_=new goog.structs.Map,e&&this.addAll(e)},goog.structs.Set.getKey_=function(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+goog.getUid(e):t.substr(0,1)+e},goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()},goog.structs.Set.prototype.add=function(e){this.map_.set(goog.structs.Set.getKey_(e),e)},goog.structs.Set.prototype.addAll=function(e){for(var t=(e=goog.structs.getValues(e)).length,n=0;n<t;n++)this.add(e[n])},goog.structs.Set.prototype.removeAll=function(e){for(var t=(e=goog.structs.getValues(e)).length,n=0;n<t;n++)this.remove(e[n])},goog.structs.Set.prototype.remove=function(e){return this.map_.remove(goog.structs.Set.getKey_(e))},goog.structs.Set.prototype.clear=function(){this.map_.clear()},goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()},goog.structs.Set.prototype.contains=function(e){return this.map_.containsKey(goog.structs.Set.getKey_(e))},goog.structs.Set.prototype.containsAll=function(e){return goog.structs.every(e,this.contains,this)},goog.structs.Set.prototype.intersection=function(e){var t=new goog.structs.Set;e=goog.structs.getValues(e);for(var n=0;n<e.length;n++){var o=e[n];this.contains(o)&&t.add(o)}return t},goog.structs.Set.prototype.difference=function(e){var t=this.clone();return t.removeAll(e),t},goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()},goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)},goog.structs.Set.prototype.equals=function(e){return this.getCount()==goog.structs.getCount(e)&&this.isSubsetOf(e)},goog.structs.Set.prototype.isSubsetOf=function(t){var e=goog.structs.getCount(t);return!(this.getCount()>e)&&(!(t instanceof goog.structs.Set)&&5<e&&(t=new goog.structs.Set(t)),goog.structs.every(this,function(e){return goog.structs.contains(t,e)}))},goog.structs.Set.prototype.__iterator__=function(e){return this.map_.__iterator__(!1)},goog.ui.PopupBase=function(e,t){goog.events.EventTarget.call(this),this.handler_=new goog.events.EventHandler(this),this.setElement(e||null),t&&this.setType(t)},goog.inherits(goog.ui.PopupBase,goog.events.EventTarget),goog.tagUnsealableClass(goog.ui.PopupBase),goog.ui.PopupBase.Type={TOGGLE_DISPLAY:"toggle_display",MOVE_OFFSCREEN:"move_offscreen"},goog.ui.PopupBase.prototype.element_=null,goog.ui.PopupBase.prototype.autoHide_=!0,goog.ui.PopupBase.prototype.autoHidePartners_=null,goog.ui.PopupBase.prototype.autoHideRegion_=null,goog.ui.PopupBase.prototype.isVisible_=!1,goog.ui.PopupBase.prototype.shouldHideAsync_=!1,goog.ui.PopupBase.prototype.lastShowTime_=-1,goog.ui.PopupBase.prototype.lastHideTime_=-1,goog.ui.PopupBase.prototype.hideOnEscape_=!1,goog.ui.PopupBase.prototype.enableCrossIframeDismissal_=!0,goog.ui.PopupBase.prototype.type_=goog.ui.PopupBase.Type.TOGGLE_DISPLAY,goog.ui.PopupBase.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",BEFORE_HIDE:"beforehide",HIDE:"hide"},goog.ui.PopupBase.DEBOUNCE_DELAY_MS=150,goog.ui.PopupBase.prototype.getType=function(){return this.type_},goog.ui.PopupBase.prototype.setType=function(e){this.type_=e},goog.ui.PopupBase.prototype.shouldHideAsync=function(){return this.shouldHideAsync_},goog.ui.PopupBase.prototype.setShouldHideAsync=function(e){this.shouldHideAsync_=e},goog.ui.PopupBase.prototype.getElement=function(){return this.element_},goog.ui.PopupBase.prototype.setElement=function(e){this.ensureNotVisible_(),this.element_=e},goog.ui.PopupBase.prototype.getAutoHide=function(){return this.autoHide_},goog.ui.PopupBase.prototype.setAutoHide=function(e){this.ensureNotVisible_(),this.autoHide_=e},goog.ui.PopupBase.prototype.addAutoHidePartner=function(e){this.autoHidePartners_||(this.autoHidePartners_=[]),goog.array.insert(this.autoHidePartners_,e)},goog.ui.PopupBase.prototype.removeAutoHidePartner=function(e){this.autoHidePartners_&&goog.array.remove(this.autoHidePartners_,e)},goog.ui.PopupBase.prototype.getHideOnEscape=function(){return this.hideOnEscape_},goog.ui.PopupBase.prototype.setHideOnEscape=function(e){this.ensureNotVisible_(),this.hideOnEscape_=e},goog.ui.PopupBase.prototype.getEnableCrossIframeDismissal=function(){return this.enableCrossIframeDismissal_},goog.ui.PopupBase.prototype.setEnableCrossIframeDismissal=function(e){this.enableCrossIframeDismissal_=e},goog.ui.PopupBase.prototype.getAutoHideRegion=function(){return this.autoHideRegion_},goog.ui.PopupBase.prototype.setAutoHideRegion=function(e){this.autoHideRegion_=e},goog.ui.PopupBase.prototype.setTransition=function(e,t){this.showTransition_=e,this.hideTransition_=t},goog.ui.PopupBase.prototype.getLastShowTime=function(){return this.lastShowTime_},goog.ui.PopupBase.prototype.getLastHideTime=function(){return this.lastHideTime_},goog.ui.PopupBase.prototype.getHandler=function(){return this.handler_},goog.ui.PopupBase.prototype.ensureNotVisible_=function(){if(this.isVisible_)throw Error("Can not change this state of the popup while showing.")},goog.ui.PopupBase.prototype.isVisible=function(){return this.isVisible_},goog.ui.PopupBase.prototype.isOrWasRecentlyVisible=function(){return this.isVisible_||goog.now()-this.lastHideTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS},goog.ui.PopupBase.prototype.setVisible=function(e){this.showTransition_&&this.showTransition_.stop(),this.hideTransition_&&this.hideTransition_.stop(),e?this.show_():this.hide_()},goog.ui.PopupBase.prototype.reposition=goog.nullFunction,goog.ui.PopupBase.prototype.show_=function(){if(!this.isVisible_&&this.onBeforeShow()){if(!this.element_)throw Error("Caller must call setElement before trying to show the popup");this.reposition();var e=goog.dom.getOwnerDocument(this.element_);if(this.hideOnEscape_&&this.handler_.listen(e,goog.events.EventType.KEYDOWN,this.onDocumentKeyDown_,!0),this.autoHide_)if(this.handler_.listen(e,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0),goog.userAgent.IE){try{var t=e.activeElement}catch(e){}for(;t&&"IFRAME"==t.nodeName;){try{var n=goog.dom.getFrameContentDocument(t)}catch(e){break}t=(e=n).activeElement}this.handler_.listen(e,goog.events.EventType.MOUSEDOWN,this.onDocumentMouseDown_,!0),this.handler_.listen(e,goog.events.EventType.DEACTIVATE,this.onDocumentBlur_)}else this.handler_.listen(e,goog.events.EventType.BLUR,this.onDocumentBlur_);this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.showPopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.reposition(),this.isVisible_=!0,this.lastShowTime_=goog.now(),this.lastHideTime_=-1,this.showTransition_?(goog.events.listenOnce(this.showTransition_,goog.fx.Transition.EventType.END,this.onShow,!1,this),this.showTransition_.play()):this.onShow()}},goog.ui.PopupBase.prototype.hide_=function(e){return!(!this.isVisible_||!this.onBeforeHide(e))&&(this.handler_&&this.handler_.removeAll(),this.isVisible_=!1,this.lastHideTime_=goog.now(),this.hideTransition_?(goog.events.listenOnce(this.hideTransition_,goog.fx.Transition.EventType.END,goog.partial(this.continueHidingPopup_,e),!1,this),this.hideTransition_.play()):this.continueHidingPopup_(e),!0)},goog.ui.PopupBase.prototype.continueHidingPopup_=function(e){this.type_==goog.ui.PopupBase.Type.TOGGLE_DISPLAY?this.shouldHideAsync_?goog.Timer.callOnce(this.hidePopupElement,0,this):this.hidePopupElement():this.type_==goog.ui.PopupBase.Type.MOVE_OFFSCREEN&&this.moveOffscreen_(),this.onHide(e)},goog.ui.PopupBase.prototype.showPopupElement=function(){this.element_.style.visibility="visible",goog.style.setElementShown(this.element_,!0)},goog.ui.PopupBase.prototype.hidePopupElement=function(){this.element_.style.visibility="hidden",goog.style.setElementShown(this.element_,!1)},goog.ui.PopupBase.prototype.moveOffscreen_=function(){this.element_.style.top="-10000px"},goog.ui.PopupBase.prototype.onBeforeShow=function(){return this.dispatchEvent(goog.ui.PopupBase.EventType.BEFORE_SHOW)},goog.ui.PopupBase.prototype.onShow=function(){this.dispatchEvent(goog.ui.PopupBase.EventType.SHOW)},goog.ui.PopupBase.prototype.onBeforeHide=function(e){return this.dispatchEvent({type:goog.ui.PopupBase.EventType.BEFORE_HIDE,target:e})},goog.ui.PopupBase.prototype.onHide=function(e){this.dispatchEvent({type:goog.ui.PopupBase.EventType.HIDE,target:e})},goog.ui.PopupBase.prototype.onDocumentMouseDown_=function(e){e=e.target,goog.dom.contains(this.element_,e)||this.isOrWithinAutoHidePartner_(e)||!this.isWithinAutoHideRegion_(e)||this.shouldDebounce_()||this.hide_(e)},goog.ui.PopupBase.prototype.onDocumentKeyDown_=function(e){e.keyCode==goog.events.KeyCodes.ESC&&this.hide_(e.target)&&(e.preventDefault(),e.stopPropagation())},goog.ui.PopupBase.prototype.onDocumentBlur_=function(e){if(this.enableCrossIframeDismissal_){var t=goog.dom.getOwnerDocument(this.element_);if(void 0!==document.activeElement){if(!(e=t.activeElement)||goog.dom.contains(this.element_,e)||"BODY"==e.tagName)return}else if(e.target!=t)return;this.shouldDebounce_()||this.hide_()}},goog.ui.PopupBase.prototype.isOrWithinAutoHidePartner_=function(t){return goog.array.some(this.autoHidePartners_||[],function(e){return t===e||goog.dom.contains(e,t)})},goog.ui.PopupBase.prototype.isWithinAutoHideRegion_=function(e){return!this.autoHideRegion_||goog.dom.contains(this.autoHideRegion_,e)},goog.ui.PopupBase.prototype.shouldDebounce_=function(){return goog.now()-this.lastShowTime_<goog.ui.PopupBase.DEBOUNCE_DELAY_MS},goog.ui.PopupBase.prototype.disposeInternal=function(){goog.ui.PopupBase.superClass_.disposeInternal.call(this),this.handler_.dispose(),goog.dispose(this.showTransition_),goog.dispose(this.hideTransition_),delete this.element_,delete this.handler_,delete this.autoHidePartners_},goog.ui.Popup=function(e,t){this.popupCorner_=goog.positioning.Corner.TOP_START,this.position_=t||void 0,goog.ui.PopupBase.call(this,e)},goog.inherits(goog.ui.Popup,goog.ui.PopupBase),goog.tagUnsealableClass(goog.ui.Popup),goog.ui.Popup.prototype.getPinnedCorner=function(){return this.popupCorner_},goog.ui.Popup.prototype.setPinnedCorner=function(e){this.popupCorner_=e,this.isVisible()&&this.reposition()},goog.ui.Popup.prototype.getPosition=function(){return this.position_||null},goog.ui.Popup.prototype.setPosition=function(e){this.position_=e||void 0,this.isVisible()&&this.reposition()},goog.ui.Popup.prototype.getMargin=function(){return this.margin_||null},goog.ui.Popup.prototype.setMargin=function(e,t,n,o){this.margin_=null==e||e instanceof goog.math.Box?e:new goog.math.Box(e,t,n,o),this.isVisible()&&this.reposition()},goog.ui.Popup.prototype.reposition=function(){if(this.position_){var e=!this.isVisible()&&this.getType()!=goog.ui.PopupBase.Type.MOVE_OFFSCREEN,t=this.getElement();e&&(t.style.visibility="hidden",goog.style.setElementShown(t,!0)),this.position_.reposition(t,this.popupCorner_,this.margin_),e&&goog.style.setElementShown(t,!1)}},goog.ui.Tooltip=function(e,t,n){this.dom_=n||(e?goog.dom.getDomHelper(goog.dom.getElement(e)):goog.dom.getDomHelper()),goog.ui.Popup.call(this,this.dom_.createDom("DIV",{style:"position:absolute;display:none;"})),this.cursorPosition=new goog.math.Coordinate(1,1),this.elements_=new goog.structs.Set,this.tooltipFocusHandler_=null,e&&this.attach(e),null!=t&&this.setText(t)},goog.inherits(goog.ui.Tooltip,goog.ui.Popup),goog.tagUnsealableClass(goog.ui.Tooltip),goog.ui.Tooltip.activeInstances_=[],goog.ui.Tooltip.prototype.activeEl_=null,goog.ui.Tooltip.prototype.className="goog-tooltip",goog.ui.Tooltip.prototype.showDelayMs_=500,goog.ui.Tooltip.prototype.hideDelayMs_=0,goog.ui.Tooltip.State={INACTIVE:0,WAITING_TO_SHOW:1,SHOWING:2,WAITING_TO_HIDE:3,UPDATING:4},goog.ui.Tooltip.Activation={CURSOR:0,FOCUS:1},goog.ui.Tooltip.prototype.getDomHelper=function(){return this.dom_},goog.ui.Tooltip.prototype.getChildTooltip=function(){return this.childTooltip_},goog.ui.Tooltip.prototype.attach=function(e){e=goog.dom.getElement(e),this.elements_.add(e),goog.events.listen(e,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this),goog.events.listen(e,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this),goog.events.listen(e,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this),goog.events.listen(e,goog.events.EventType.FOCUS,this.handleFocus,!1,this),goog.events.listen(e,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)},goog.ui.Tooltip.prototype.detach=function(e){if(e)e=goog.dom.getElement(e),this.detachElement_(e),this.elements_.remove(e);else{for(var t=this.elements_.getValues(),n=0;e=t[n];n++)this.detachElement_(e);this.elements_.clear()}},goog.ui.Tooltip.prototype.detachElement_=function(e){goog.events.unlisten(e,goog.events.EventType.MOUSEOVER,this.handleMouseOver,!1,this),goog.events.unlisten(e,goog.events.EventType.MOUSEOUT,this.handleMouseOutAndBlur,!1,this),goog.events.unlisten(e,goog.events.EventType.MOUSEMOVE,this.handleMouseMove,!1,this),goog.events.unlisten(e,goog.events.EventType.FOCUS,this.handleFocus,!1,this),goog.events.unlisten(e,goog.events.EventType.BLUR,this.handleMouseOutAndBlur,!1,this)},goog.ui.Tooltip.prototype.setShowDelayMs=function(e){this.showDelayMs_=e},goog.ui.Tooltip.prototype.getShowDelayMs=function(){return this.showDelayMs_},goog.ui.Tooltip.prototype.setHideDelayMs=function(e){this.hideDelayMs_=e},goog.ui.Tooltip.prototype.getHideDelayMs=function(){return this.hideDelayMs_},goog.ui.Tooltip.prototype.setText=function(e){goog.dom.setTextContent(this.getElement(),e)},goog.ui.Tooltip.prototype.setSafeHtml=function(e){var t=this.getElement();t&&goog.dom.safe.setInnerHtml(t,e)},goog.ui.Tooltip.prototype.setElement=function(e){var t=this.getElement();t&&goog.dom.removeNode(t),goog.ui.Tooltip.superClass_.setElement.call(this,e),e?((t=this.dom_.getDocument().body).insertBefore(e,t.lastChild),this.registerContentFocusEvents_()):(goog.dispose(this.tooltipFocusHandler_),this.tooltipFocusHandler_=null)},goog.ui.Tooltip.prototype.registerContentFocusEvents_=function(){goog.dispose(this.tooltipFocusHandler_),this.tooltipFocusHandler_=new goog.events.FocusHandler(goog.asserts.assert(this.getElement())),this.registerDisposable(this.tooltipFocusHandler_),goog.events.listen(this.tooltipFocusHandler_,goog.events.FocusHandler.EventType.FOCUSIN,this.clearHideTimer,void 0,this),goog.events.listen(this.tooltipFocusHandler_,goog.events.FocusHandler.EventType.FOCUSOUT,this.startHideTimer,void 0,this)},goog.ui.Tooltip.prototype.getText=function(){return goog.dom.getTextContent(this.getElement())},goog.ui.Tooltip.prototype.getHtml=function(){return this.getElement().innerHTML},goog.ui.Tooltip.prototype.getState=function(){return this.showTimer?this.isVisible()?goog.ui.Tooltip.State.UPDATING:goog.ui.Tooltip.State.WAITING_TO_SHOW:this.hideTimer?goog.ui.Tooltip.State.WAITING_TO_HIDE:this.isVisible()?goog.ui.Tooltip.State.SHOWING:goog.ui.Tooltip.State.INACTIVE},goog.ui.Tooltip.prototype.setRequireInteraction=function(e){this.requireInteraction_=e},goog.ui.Tooltip.prototype.isCoordinateInTooltip=function(e){if(!this.isVisible())return!1;var t=goog.style.getPageOffset(this.getElement()),n=goog.style.getSize(this.getElement());return t.x<=e.x&&e.x<=t.x+n.width&&t.y<=e.y&&e.y<=t.y+n.height},goog.ui.Tooltip.prototype.onBeforeShow=function(){if(!goog.ui.PopupBase.prototype.onBeforeShow.call(this))return!1;if(this.anchor)for(var e,t=0;e=goog.ui.Tooltip.activeInstances_[t];t++)goog.dom.contains(e.getElement(),this.anchor)||e.setVisible(!1);return goog.array.insert(goog.ui.Tooltip.activeInstances_,this),(e=this.getElement()).className=this.className,this.clearHideTimer(),goog.events.listen(e,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this),goog.events.listen(e,goog.events.EventType.MOUSEOUT,this.handleTooltipMouseOut,!1,this),this.clearShowTimer(),!0},goog.ui.Tooltip.prototype.onHide=function(){goog.array.remove(goog.ui.Tooltip.activeInstances_,this);for(var e,t=this.getElement(),n=0;e=goog.ui.Tooltip.activeInstances_[n];n++)e.anchor&&goog.dom.contains(t,e.anchor)&&e.setVisible(!1);this.parentTooltip_&&this.parentTooltip_.startHideTimer(),goog.events.unlisten(t,goog.events.EventType.MOUSEOVER,this.handleTooltipMouseOver,!1,this),goog.events.unlisten(t,goog.events.EventType.MOUSEOUT,this.handleTooltipMouseOut,!1,this),this.anchor=void 0,this.getState()==goog.ui.Tooltip.State.INACTIVE&&(this.seenInteraction_=!1),goog.ui.PopupBase.prototype.onHide.call(this)},goog.ui.Tooltip.prototype.maybeShow=function(e,t){this.anchor==e&&this.elements_.contains(this.anchor)&&(this.seenInteraction_||!this.requireInteraction_?(this.setVisible(!1),this.isVisible()||this.positionAndShow_(e,t)):this.anchor=void 0),this.showTimer=void 0},goog.ui.Tooltip.prototype.getElements=function(){return this.elements_},goog.ui.Tooltip.prototype.getActiveElement=function(){return this.activeEl_},goog.ui.Tooltip.prototype.setActiveElement=function(e){this.activeEl_=e},goog.ui.Tooltip.prototype.showForElement=function(e,t){this.attach(e),this.activeEl_=e,this.positionAndShow_(e,t)},goog.ui.Tooltip.prototype.positionAndShow_=function(e,t){this.anchor=e,this.setPosition(t||this.getPositioningStrategy(goog.ui.Tooltip.Activation.CURSOR)),this.setVisible(!0)},goog.ui.Tooltip.prototype.maybeHide=function(e){if(this.hideTimer=void 0,e==this.anchor){var t=(e=this.getDomHelper()).getActiveElement();e=t&&this.getElement()&&e.contains(this.getElement(),t),null!=this.activeEl_&&(this.activeEl_==this.getElement()||this.elements_.contains(this.activeEl_))||e||this.hasActiveChild()||this.setVisible(!1)}},goog.ui.Tooltip.prototype.hasActiveChild=function(){return!(!this.childTooltip_||!this.childTooltip_.activeEl_)},goog.ui.Tooltip.prototype.saveCursorPosition_=function(e){var t=this.dom_.getDocumentScroll();this.cursorPosition.x=e.clientX+t.x,this.cursorPosition.y=e.clientY+t.y},goog.ui.Tooltip.prototype.handleMouseOver=function(e){var t=this.getAnchorFromElement(e.target);this.activeEl_=t,this.clearHideTimer(),t!=this.anchor&&(this.anchor=t,this.startShowTimer(t),this.checkForParentTooltip_(),this.saveCursorPosition_(e))},goog.ui.Tooltip.prototype.getAnchorFromElement=function(e){try{for(;e&&!this.elements_.contains(e);)e=e.parentNode;return e}catch(e){return null}},goog.ui.Tooltip.prototype.handleMouseMove=function(e){this.saveCursorPosition_(e),this.seenInteraction_=!0},goog.ui.Tooltip.prototype.handleFocus=function(e){if(this.activeEl_=e=this.getAnchorFromElement(e.target),this.seenInteraction_=!0,this.anchor!=e){this.anchor=e;var t=this.getPositioningStrategy(goog.ui.Tooltip.Activation.FOCUS);this.clearHideTimer(),this.startShowTimer(e,t),this.checkForParentTooltip_()}},goog.ui.Tooltip.prototype.getPositioningStrategy=function(e){return e==goog.ui.Tooltip.Activation.CURSOR?(e=this.cursorPosition.clone(),new goog.ui.Tooltip.CursorTooltipPosition(e)):new goog.ui.Tooltip.ElementTooltipPosition(this.activeEl_)},goog.ui.Tooltip.prototype.checkForParentTooltip_=function(){if(this.anchor)for(var e,t=0;e=goog.ui.Tooltip.activeInstances_[t];t++)goog.dom.contains(e.getElement(),this.anchor)&&((e.childTooltip_=this).parentTooltip_=e)},goog.ui.Tooltip.prototype.handleMouseOutAndBlur=function(e){var t=this.getAnchorFromElement(e.target);t!=this.getAnchorFromElement(e.relatedTarget)&&(t==this.activeEl_&&(this.activeEl_=null),this.clearShowTimer(),this.seenInteraction_=!1,!this.isVisible()||e.relatedTarget&&goog.dom.contains(this.getElement(),e.relatedTarget)?this.anchor=void 0:this.startHideTimer())},goog.ui.Tooltip.prototype.handleTooltipMouseOver=function(e){e=this.getElement(),this.activeEl_!=e&&(this.clearHideTimer(),this.activeEl_=e)},goog.ui.Tooltip.prototype.handleTooltipMouseOut=function(e){var t=this.getElement();this.activeEl_!=t||e.relatedTarget&&goog.dom.contains(t,e.relatedTarget)||(this.activeEl_=null,this.startHideTimer())},goog.ui.Tooltip.prototype.startShowTimer=function(e,t){this.showTimer||(this.showTimer=goog.Timer.callOnce(goog.bind(this.maybeShow,this,e,t),this.showDelayMs_))},goog.ui.Tooltip.prototype.clearShowTimer=function(){this.showTimer&&(goog.Timer.clear(this.showTimer),this.showTimer=void 0)},goog.ui.Tooltip.prototype.startHideTimer=function(){this.getState()==goog.ui.Tooltip.State.SHOWING&&(this.hideTimer=goog.Timer.callOnce(goog.bind(this.maybeHide,this,this.anchor),this.getHideDelayMs()))},goog.ui.Tooltip.prototype.clearHideTimer=function(){this.hideTimer&&(goog.Timer.clear(this.hideTimer),this.hideTimer=void 0)},goog.ui.Tooltip.prototype.disposeInternal=function(){this.setVisible(!1),this.clearShowTimer(),this.detach(),this.getElement()&&goog.dom.removeNode(this.getElement()),this.activeEl_=null,delete this.dom_,goog.ui.Tooltip.superClass_.disposeInternal.call(this)},goog.ui.Tooltip.CursorTooltipPosition=function(e,t){goog.positioning.ViewportPosition.call(this,e,t)},goog.inherits(goog.ui.Tooltip.CursorTooltipPosition,goog.positioning.ViewportPosition),goog.ui.Tooltip.CursorTooltipPosition.prototype.reposition=function(e,t,n){t=goog.style.getClientViewportElement(e),t=goog.style.getVisibleRectForElement(t),n=n?new goog.math.Box(n.top+10,n.right,n.bottom,n.left+10):new goog.math.Box(10,0,0,10),goog.positioning.positionAtCoordinate(this.coordinate,e,goog.positioning.Corner.TOP_START,n,t,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtCoordinate(this.coordinate,e,goog.positioning.Corner.TOP_START,n,t,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)},goog.ui.Tooltip.ElementTooltipPosition=function(e){goog.positioning.AnchoredPosition.call(this,e,goog.positioning.Corner.BOTTOM_RIGHT)},goog.inherits(goog.ui.Tooltip.ElementTooltipPosition,goog.positioning.AnchoredPosition),goog.ui.Tooltip.ElementTooltipPosition.prototype.reposition=function(e,t,n){var o=new goog.math.Coordinate(10,0);goog.positioning.positionAtAnchor(this.element,this.corner,e,t,o,n,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.FAIL_Y)&goog.positioning.OverflowStatus.FAILED&&goog.positioning.positionAtAnchor(this.element,goog.positioning.Corner.TOP_RIGHT,e,goog.positioning.Corner.BOTTOM_LEFT,o,n,goog.positioning.Overflow.ADJUST_X|goog.positioning.Overflow.ADJUST_Y)},goog.ui.ButtonSide={NONE:0,START:1,END:2,BOTH:3},goog.ui.ButtonRenderer=function(){goog.ui.ControlRenderer.call(this)},goog.inherits(goog.ui.ButtonRenderer,goog.ui.ControlRenderer),goog.addSingletonGetter(goog.ui.ButtonRenderer),goog.ui.ButtonRenderer.CSS_CLASS="goog-button",goog.ui.ButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON},goog.ui.ButtonRenderer.prototype.updateAriaState=function(e,t,n){switch(t){case goog.ui.Component.State.SELECTED:case goog.ui.Component.State.CHECKED:goog.asserts.assert(e,"The button DOM element cannot be null."),goog.a11y.aria.setState(e,goog.a11y.aria.State.PRESSED,n);break;default:case goog.ui.Component.State.OPENED:case goog.ui.Component.State.DISABLED:goog.ui.ButtonRenderer.superClass_.updateAriaState.call(this,e,t,n)}},goog.ui.ButtonRenderer.prototype.createDom=function(e){var t=goog.ui.ButtonRenderer.superClass_.createDom.call(this,e);this.setTooltip(t,e.getTooltip());var n=e.getValue();return n&&this.setValue(t,n),e.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(t,goog.ui.Component.State.CHECKED,e.isChecked()),t},goog.ui.ButtonRenderer.prototype.decorate=function(e,t){return t=goog.ui.ButtonRenderer.superClass_.decorate.call(this,e,t),e.setValueInternal(this.getValue(t)),e.setTooltipInternal(this.getTooltip(t)),e.isSupportedState(goog.ui.Component.State.CHECKED)&&this.updateAriaState(t,goog.ui.Component.State.CHECKED,e.isChecked()),t},goog.ui.ButtonRenderer.prototype.getValue=goog.nullFunction,goog.ui.ButtonRenderer.prototype.setValue=goog.nullFunction,goog.ui.ButtonRenderer.prototype.getTooltip=function(e){return e.title},goog.ui.ButtonRenderer.prototype.setTooltip=function(e,t){e&&(t?e.title=t:e.removeAttribute("title"))},goog.ui.ButtonRenderer.prototype.setCollapsed=function(e,t){var n=e.isRightToLeft(),o=this.getStructuralCssClass()+"-collapse-left",r=this.getStructuralCssClass()+"-collapse-right";e.enableClassName(n?r:o,!!(t&goog.ui.ButtonSide.START)),e.enableClassName(n?o:r,!!(t&goog.ui.ButtonSide.END))},goog.ui.ButtonRenderer.prototype.getCssClass=function(){return goog.ui.ButtonRenderer.CSS_CLASS},goog.dom.InputType={BUTTON:"button",CHECKBOX:"checkbox",COLOR:"color",DATE:"date",DATETIME:"datetime",DATETIME_LOCAL:"datetime-local",EMAIL:"email",FILE:"file",HIDDEN:"hidden",IMAGE:"image",MENU:"menu",MONTH:"month",NUMBER:"number",PASSWORD:"password",RADIO:"radio",RANGE:"range",RESET:"reset",SEARCH:"search",SELECT_MULTIPLE:"select-multiple",SELECT_ONE:"select-one",SUBMIT:"submit",TEL:"tel",TEXT:"text",TEXTAREA:"textarea",TIME:"time",URL:"url",WEEK:"week"},goog.ui.NativeButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)},goog.inherits(goog.ui.NativeButtonRenderer,goog.ui.ButtonRenderer),goog.addSingletonGetter(goog.ui.NativeButtonRenderer),goog.ui.NativeButtonRenderer.prototype.getAriaRole=function(){},goog.ui.NativeButtonRenderer.prototype.createDom=function(e){return this.setUpNativeButton_(e),e.getDomHelper().createDom("BUTTON",{class:this.getClassNames(e).join(" "),disabled:!e.isEnabled(),title:e.getTooltip()||"",value:e.getValue()||""},e.getCaption()||"")},goog.ui.NativeButtonRenderer.prototype.canDecorate=function(e){return"BUTTON"==e.tagName||"INPUT"==e.tagName&&(e.type==goog.dom.InputType.BUTTON||e.type==goog.dom.InputType.SUBMIT||e.type==goog.dom.InputType.RESET)},goog.ui.NativeButtonRenderer.prototype.decorate=function(e,t){if(this.setUpNativeButton_(e),t.disabled){var n=goog.asserts.assertString(this.getClassForState(goog.ui.Component.State.DISABLED));goog.dom.classlist.add(t,n)}return goog.ui.NativeButtonRenderer.superClass_.decorate.call(this,e,t)},goog.ui.NativeButtonRenderer.prototype.initializeDom=function(e){e.getHandler().listen(e.getElement(),goog.events.EventType.CLICK,e.performActionInternal)},goog.ui.NativeButtonRenderer.prototype.setAllowTextSelection=goog.nullFunction,goog.ui.NativeButtonRenderer.prototype.setRightToLeft=goog.nullFunction,goog.ui.NativeButtonRenderer.prototype.isFocusable=function(e){return e.isEnabled()},goog.ui.NativeButtonRenderer.prototype.setFocusable=goog.nullFunction,goog.ui.NativeButtonRenderer.prototype.setState=function(e,t,n){goog.ui.NativeButtonRenderer.superClass_.setState.call(this,e,t,n),(e=e.getElement())&&t==goog.ui.Component.State.DISABLED&&(e.disabled=n)},goog.ui.NativeButtonRenderer.prototype.getValue=function(e){return e.value},goog.ui.NativeButtonRenderer.prototype.setValue=function(e,t){e&&(e.value=t)},goog.ui.NativeButtonRenderer.prototype.updateAriaState=goog.nullFunction,goog.ui.NativeButtonRenderer.prototype.setUpNativeButton_=function(e){e.setHandleMouseEvents(!1),e.setAutoStates(goog.ui.Component.State.ALL,!1),e.setSupportedState(goog.ui.Component.State.FOCUSED,!1)},goog.ui.Button=function(e,t,n){goog.ui.Control.call(this,e,t||goog.ui.NativeButtonRenderer.getInstance(),n)},goog.inherits(goog.ui.Button,goog.ui.Control),goog.tagUnsealableClass(goog.ui.Button),goog.ui.Button.Side=goog.ui.ButtonSide,goog.ui.Button.prototype.getValue=function(){return this.value_},goog.ui.Button.prototype.setValue=function(e){this.value_=e,this.getRenderer().setValue(this.getElement(),e)},goog.ui.Button.prototype.setValueInternal=function(e){this.value_=e},goog.ui.Button.prototype.getTooltip=function(){return this.tooltip_},goog.ui.Button.prototype.setTooltip=function(e){this.tooltip_=e,this.getRenderer().setTooltip(this.getElement(),e)},goog.ui.Button.prototype.setTooltipInternal=function(e){this.tooltip_=e},goog.ui.Button.prototype.setCollapsed=function(e){this.getRenderer().setCollapsed(this,e)},goog.ui.Button.prototype.disposeInternal=function(){goog.ui.Button.superClass_.disposeInternal.call(this),delete this.value_,delete this.tooltip_},goog.ui.Button.prototype.enterDocument=function(){if(goog.ui.Button.superClass_.enterDocument.call(this),this.isSupportedState(goog.ui.Component.State.FOCUSED)){var e=this.getKeyEventTarget();e&&this.getHandler().listen(e,goog.events.EventType.KEYUP,this.handleKeyEventInternal)}},goog.ui.Button.prototype.handleKeyEventInternal=function(e){return e.keyCode==goog.events.KeyCodes.ENTER&&e.type==goog.events.KeyHandler.EventType.KEY||e.keyCode==goog.events.KeyCodes.SPACE&&e.type==goog.events.EventType.KEYUP?this.performActionInternal(e):e.keyCode==goog.events.KeyCodes.SPACE},goog.ui.registry.setDecoratorByClassName(goog.ui.ButtonRenderer.CSS_CLASS,function(){return new goog.ui.Button(null)}),goog.ui.INLINE_BLOCK_CLASSNAME="goog-inline-block",goog.ui.CustomButtonRenderer=function(){goog.ui.ButtonRenderer.call(this)},goog.inherits(goog.ui.CustomButtonRenderer,goog.ui.ButtonRenderer),goog.addSingletonGetter(goog.ui.CustomButtonRenderer),goog.ui.CustomButtonRenderer.CSS_CLASS="goog-custom-button",goog.ui.CustomButtonRenderer.prototype.createDom=function(e){var t=this.getClassNames(e);return t=e.getDomHelper().createDom("DIV",goog.ui.INLINE_BLOCK_CLASSNAME+" "+t.join(" "),this.createButton(e.getContent(),e.getDomHelper())),this.setTooltip(t,e.getTooltip()),t},goog.ui.CustomButtonRenderer.prototype.getAriaRole=function(){return goog.a11y.aria.Role.BUTTON},goog.ui.CustomButtonRenderer.prototype.getContentElement=function(e){return e&&e.firstChild&&e.firstChild.firstChild},goog.ui.CustomButtonRenderer.prototype.createButton=function(e,t){return t.createDom("DIV",goog.ui.INLINE_BLOCK_CLASSNAME+" "+this.getCssClass()+"-outer-box",t.createDom("DIV",goog.ui.INLINE_BLOCK_CLASSNAME+" "+this.getCssClass()+"-inner-box",e))},goog.ui.CustomButtonRenderer.prototype.canDecorate=function(e){return"DIV"==e.tagName},goog.ui.CustomButtonRenderer.prototype.hasBoxStructure=function(e,t){var n=e.getDomHelper().getFirstElementChild(t),o=this.getCssClass()+"-outer-box";return!!(n&&goog.dom.classlist.contains(n,o)&&(n=e.getDomHelper().getFirstElementChild(n),o=this.getCssClass()+"-inner-box",n&&goog.dom.classlist.contains(n,o)))},goog.ui.CustomButtonRenderer.prototype.decorate=function(e,t){return goog.asserts.assert(t),goog.ui.CustomButtonRenderer.trimTextNodes_(t,!0),goog.ui.CustomButtonRenderer.trimTextNodes_(t,!1),this.hasBoxStructure(e,t)||t.appendChild(this.createButton(t.childNodes,e.getDomHelper())),goog.dom.classlist.addAll(t,[goog.ui.INLINE_BLOCK_CLASSNAME,this.getCssClass()]),goog.ui.CustomButtonRenderer.superClass_.decorate.call(this,e,t)},goog.ui.CustomButtonRenderer.prototype.getCssClass=function(){return goog.ui.CustomButtonRenderer.CSS_CLASS},goog.ui.CustomButtonRenderer.trimTextNodes_=function(e,t){if(e)for(var n,o=t?e.firstChild:e.lastChild;o&&o.parentNode==e&&(n=t?o.nextSibling:o.previousSibling,o.nodeType==goog.dom.NodeType.TEXT);){var r=o.nodeValue;if(""!=goog.string.trim(r)){o.nodeValue=t?goog.string.trimLeft(r):goog.string.trimRight(r);break}e.removeChild(o),o=n}},goog.ui.CustomButton=function(e,t,n){goog.ui.Button.call(this,e,t||goog.ui.CustomButtonRenderer.getInstance(),n)},goog.inherits(goog.ui.CustomButton,goog.ui.Button),goog.ui.registry.setDecoratorByClassName(goog.ui.CustomButtonRenderer.CSS_CLASS,function(){return new goog.ui.CustomButton(null)}),goog.debug.LogRecord=function(e,t,n,o,r){this.reset(e,t,n,o,r)},goog.debug.LogRecord.prototype.sequenceNumber_=0,goog.debug.LogRecord.prototype.exception_=null,goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS=!0,goog.debug.LogRecord.nextSequenceNumber_=0,goog.debug.LogRecord.prototype.reset=function(e,t,n,o,r){goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS&&(this.sequenceNumber_="number"==typeof r?r:goog.debug.LogRecord.nextSequenceNumber_++),this.time_=o||goog.now(),this.level_=e,this.msg_=t,this.loggerName_=n,delete this.exception_},goog.debug.LogRecord.prototype.getLoggerName=function(){return this.loggerName_},goog.debug.LogRecord.prototype.getException=function(){return this.exception_},goog.debug.LogRecord.prototype.setException=function(e){this.exception_=e},goog.debug.LogRecord.prototype.setLoggerName=function(e){this.loggerName_=e},goog.debug.LogRecord.prototype.getLevel=function(){return this.level_},goog.debug.LogRecord.prototype.setLevel=function(e){this.level_=e},goog.debug.LogRecord.prototype.getMessage=function(){return this.msg_},goog.debug.LogRecord.prototype.setMessage=function(e){this.msg_=e},goog.debug.LogRecord.prototype.getMillis=function(){return this.time_},goog.debug.LogRecord.prototype.setMillis=function(e){this.time_=e},goog.debug.LogRecord.prototype.getSequenceNumber=function(){return this.sequenceNumber_},goog.debug.LogBuffer=function(){goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(),"Cannot use goog.debug.LogBuffer without defining goog.debug.LogBuffer.CAPACITY."),this.clear()},goog.debug.LogBuffer.getInstance=function(){return goog.debug.LogBuffer.instance_||(goog.debug.LogBuffer.instance_=new goog.debug.LogBuffer),goog.debug.LogBuffer.instance_},goog.debug.LogBuffer.CAPACITY=0,goog.debug.LogBuffer.prototype.addRecord=function(e,t,n){var o=(this.curIndex_+1)%goog.debug.LogBuffer.CAPACITY;return this.curIndex_=o,this.isFull_?((o=this.buffer_[o]).reset(e,t,n),o):(this.isFull_=o==goog.debug.LogBuffer.CAPACITY-1,this.buffer_[o]=new goog.debug.LogRecord(e,t,n))},goog.debug.LogBuffer.isBufferingEnabled=function(){return 0<goog.debug.LogBuffer.CAPACITY},goog.debug.LogBuffer.prototype.clear=function(){this.buffer_=Array(goog.debug.LogBuffer.CAPACITY),this.curIndex_=-1,this.isFull_=!1},goog.debug.LogBuffer.prototype.forEachRecord=function(e){var t=this.buffer_;if(t[0])for(var n=this.curIndex_,o=this.isFull_?n:-1;e(t[o=(o+1)%goog.debug.LogBuffer.CAPACITY]),o!=n;);},goog.debug.Logger=function(e){this.name_=e,this.handlers_=this.children_=this.level_=this.parent_=null},goog.debug.Logger.ROOT_LOGGER_NAME="",goog.debug.Logger.ENABLE_HIERARCHY=!0,goog.debug.Logger.ENABLE_PROFILER_LOGGING=!1,goog.debug.Logger.ENABLE_HIERARCHY||(goog.debug.Logger.rootHandlers_=[]),goog.debug.Logger.Level=function(e,t){this.name=e,this.value=t},goog.debug.Logger.Level.prototype.toString=function(){return this.name},goog.debug.Logger.Level.OFF=new goog.debug.Logger.Level("OFF",1/0),goog.debug.Logger.Level.SHOUT=new goog.debug.Logger.Level("SHOUT",1200),goog.debug.Logger.Level.SEVERE=new goog.debug.Logger.Level("SEVERE",1e3),goog.debug.Logger.Level.WARNING=new goog.debug.Logger.Level("WARNING",900),goog.debug.Logger.Level.INFO=new goog.debug.Logger.Level("INFO",800),goog.debug.Logger.Level.CONFIG=new goog.debug.Logger.Level("CONFIG",700),goog.debug.Logger.Level.FINE=new goog.debug.Logger.Level("FINE",500),goog.debug.Logger.Level.FINER=new goog.debug.Logger.Level("FINER",400),goog.debug.Logger.Level.FINEST=new goog.debug.Logger.Level("FINEST",300),goog.debug.Logger.Level.ALL=new goog.debug.Logger.Level("ALL",0),goog.debug.Logger.Level.PREDEFINED_LEVELS=[goog.debug.Logger.Level.OFF,goog.debug.Logger.Level.SHOUT,goog.debug.Logger.Level.SEVERE,goog.debug.Logger.Level.WARNING,goog.debug.Logger.Level.INFO,goog.debug.Logger.Level.CONFIG,goog.debug.Logger.Level.FINE,goog.debug.Logger.Level.FINER,goog.debug.Logger.Level.FINEST,goog.debug.Logger.Level.ALL],goog.debug.Logger.Level.predefinedLevelsCache_=null,goog.debug.Logger.Level.createPredefinedLevelsCache_=function(){goog.debug.Logger.Level.predefinedLevelsCache_={};for(var e,t=0;e=goog.debug.Logger.Level.PREDEFINED_LEVELS[t];t++)goog.debug.Logger.Level.predefinedLevelsCache_[e.value]=e,goog.debug.Logger.Level.predefinedLevelsCache_[e.name]=e},goog.debug.Logger.Level.getPredefinedLevel=function(e){return goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_(),goog.debug.Logger.Level.predefinedLevelsCache_[e]||null},goog.debug.Logger.Level.getPredefinedLevelByValue=function(e){if(goog.debug.Logger.Level.predefinedLevelsCache_||goog.debug.Logger.Level.createPredefinedLevelsCache_(),e in goog.debug.Logger.Level.predefinedLevelsCache_)return goog.debug.Logger.Level.predefinedLevelsCache_[e];for(var t=0;t<goog.debug.Logger.Level.PREDEFINED_LEVELS.length;++t){var n=goog.debug.Logger.Level.PREDEFINED_LEVELS[t];if(n.value<=e)return n}return null},goog.debug.Logger.getLogger=function(e){return goog.debug.LogManager.getLogger(e)},goog.debug.Logger.logToProfilers=function(e){if(goog.debug.Logger.ENABLE_PROFILER_LOGGING){var t=goog.global.msWriteProfilerMark;t?t(e):(t=goog.global.console)&&t.timeStamp&&t.timeStamp(e)}},goog.debug.Logger.prototype.getName=function(){return this.name_},goog.debug.Logger.prototype.addHandler=function(e){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?(this.handlers_||(this.handlers_=[]),this.handlers_.push(e)):(goog.asserts.assert(!this.name_,"Cannot call addHandler on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootHandlers_.push(e)))},goog.debug.Logger.prototype.removeHandler=function(e){if(goog.debug.LOGGING_ENABLED){var t=goog.debug.Logger.ENABLE_HIERARCHY?this.handlers_:goog.debug.Logger.rootHandlers_;return!!t&&goog.array.remove(t,e)}return!1},goog.debug.Logger.prototype.getParent=function(){return this.parent_},goog.debug.Logger.prototype.getChildren=function(){return this.children_||(this.children_={}),this.children_},goog.debug.Logger.prototype.setLevel=function(e){goog.debug.LOGGING_ENABLED&&(goog.debug.Logger.ENABLE_HIERARCHY?this.level_=e:(goog.asserts.assert(!this.name_,"Cannot call setLevel() on a non-root logger when goog.debug.Logger.ENABLE_HIERARCHY is false."),goog.debug.Logger.rootLevel_=e))},goog.debug.Logger.prototype.getLevel=function(){return goog.debug.LOGGING_ENABLED?this.level_:goog.debug.Logger.Level.OFF},goog.debug.Logger.prototype.getEffectiveLevel=function(){return goog.debug.LOGGING_ENABLED?goog.debug.Logger.ENABLE_HIERARCHY?this.level_?this.level_:this.parent_?this.parent_.getEffectiveLevel():(goog.asserts.fail("Root logger has no level set."),null):goog.debug.Logger.rootLevel_:goog.debug.Logger.Level.OFF},goog.debug.Logger.prototype.isLoggable=function(e){return goog.debug.LOGGING_ENABLED&&e.value>=this.getEffectiveLevel().value},goog.debug.Logger.prototype.log=function(e,t,n){goog.debug.LOGGING_ENABLED&&this.isLoggable(e)&&(goog.isFunction(t)&&(t=t()),this.doLogRecord_(this.getLogRecord(e,t,n)))},goog.debug.Logger.prototype.getLogRecord=function(e,t,n){return e=goog.debug.LogBuffer.isBufferingEnabled()?goog.debug.LogBuffer.getInstance().addRecord(e,t,this.name_):new goog.debug.LogRecord(e,String(t),this.name_),n&&e.setException(n),e},goog.debug.Logger.prototype.shout=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SHOUT,e,t)},goog.debug.Logger.prototype.severe=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.SEVERE,e,t)},goog.debug.Logger.prototype.warning=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.WARNING,e,t)},goog.debug.Logger.prototype.info=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.INFO,e,t)},goog.debug.Logger.prototype.config=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.CONFIG,e,t)},goog.debug.Logger.prototype.fine=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINE,e,t)},goog.debug.Logger.prototype.finer=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINER,e,t)},goog.debug.Logger.prototype.finest=function(e,t){goog.debug.LOGGING_ENABLED&&this.log(goog.debug.Logger.Level.FINEST,e,t)},goog.debug.Logger.prototype.logRecord=function(e){goog.debug.LOGGING_ENABLED&&this.isLoggable(e.getLevel())&&this.doLogRecord_(e)},goog.debug.Logger.prototype.doLogRecord_=function(e){if(goog.debug.Logger.ENABLE_PROFILER_LOGGING&&goog.debug.Logger.logToProfilers("log:"+e.getMessage()),goog.debug.Logger.ENABLE_HIERARCHY)for(var t=this;t;)t.callPublish_(e),t=t.getParent();else{t=0;for(var n;n=goog.debug.Logger.rootHandlers_[t++];)n(e)}},goog.debug.Logger.prototype.callPublish_=function(e){if(this.handlers_)for(var t,n=0;t=this.handlers_[n];n++)t(e)},goog.debug.Logger.prototype.setParent_=function(e){this.parent_=e},goog.debug.Logger.prototype.addChild_=function(e,t){this.getChildren()[e]=t},goog.debug.LogManager={},goog.debug.LogManager.loggers_={},goog.debug.LogManager.rootLogger_=null,goog.debug.LogManager.initialize=function(){goog.debug.LogManager.rootLogger_||(goog.debug.LogManager.rootLogger_=new goog.debug.Logger(goog.debug.Logger.ROOT_LOGGER_NAME),goog.debug.LogManager.loggers_[goog.debug.Logger.ROOT_LOGGER_NAME]=goog.debug.LogManager.rootLogger_,goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG))},goog.debug.LogManager.getLoggers=function(){return goog.debug.LogManager.loggers_},goog.debug.LogManager.getRoot=function(){return goog.debug.LogManager.initialize(),goog.debug.LogManager.rootLogger_},goog.debug.LogManager.getLogger=function(e){return goog.debug.LogManager.initialize(),goog.debug.LogManager.loggers_[e]||goog.debug.LogManager.createLogger_(e)},goog.debug.LogManager.createFunctionForCatchErrors=function(t){return function(e){(t||goog.debug.LogManager.getRoot()).severe("Error: "+e.message+" ("+e.fileName+" @ Line: "+e.line+")")}},goog.debug.LogManager.createLogger_=function(e){var t=new goog.debug.Logger(e);if(goog.debug.Logger.ENABLE_HIERARCHY){var n=e.lastIndexOf("."),o=e.substr(0,n);n=e.substr(n+1),(o=goog.debug.LogManager.getLogger(o)).addChild_(n,t),t.setParent_(o)}return goog.debug.LogManager.loggers_[e]=t},goog.log={},goog.log.ENABLED=goog.debug.LOGGING_ENABLED,goog.log.ROOT_LOGGER_NAME=goog.debug.Logger.ROOT_LOGGER_NAME,goog.log.Logger=goog.debug.Logger,goog.log.Level=goog.debug.Logger.Level,goog.log.LogRecord=goog.debug.LogRecord,goog.log.getLogger=function(e,t){if(goog.log.ENABLED){var n=goog.debug.LogManager.getLogger(e);return t&&n&&n.setLevel(t),n}return null},goog.log.addHandler=function(e,t){goog.log.ENABLED&&e&&e.addHandler(t)},goog.log.removeHandler=function(e,t){return!(!goog.log.ENABLED||!e)&&e.removeHandler(t)},goog.log.log=function(e,t,n,o){goog.log.ENABLED&&e&&e.log(t,n,o)},goog.log.error=function(e,t,n){goog.log.ENABLED&&e&&e.severe(t,n)},goog.log.warning=function(e,t,n){goog.log.ENABLED&&e&&e.warning(t,n)},goog.log.info=function(e,t,n){goog.log.ENABLED&&e&&e.info(t,n)},goog.log.fine=function(e,t,n){goog.log.ENABLED&&e&&e.fine(t,n)},goog.string.StringBuffer=function(e,t){null!=e&&this.append.apply(this,arguments)},goog.string.StringBuffer.prototype.buffer_="",goog.string.StringBuffer.prototype.set=function(e){this.buffer_=""+e},goog.string.StringBuffer.prototype.append=function(e,t,n){if(this.buffer_+=String(e),null!=t)for(var o=1;o<arguments.length;o++)this.buffer_+=arguments[o];return this},goog.string.StringBuffer.prototype.clear=function(){this.buffer_=""},goog.string.StringBuffer.prototype.getLength=function(){return this.buffer_.length},goog.string.StringBuffer.prototype.toString=function(){return this.buffer_},goog.ui.tree={},goog.ui.tree.BaseNode=function(e,t,n){goog.ui.Component.call(this,n),this.config_=t||goog.ui.tree.BaseNode.defaultConfig,this.html_=goog.html.SafeHtml.htmlEscapePreservingNewlines(e),this.expanded_=this.selected_=!1,this.toolTip_=null,this.afterLabelHtml_=goog.html.SafeHtml.EMPTY,this.isUserCollapsible_=!0,this.depth_=-1},goog.inherits(goog.ui.tree.BaseNode,goog.ui.Component),goog.ui.tree.BaseNode.EventType={BEFORE_EXPAND:"beforeexpand",EXPAND:"expand",BEFORE_COLLAPSE:"beforecollapse",COLLAPSE:"collapse"},goog.ui.tree.BaseNode.allNodes={},goog.ui.tree.BaseNode.prototype.disposeInternal=function(){goog.ui.tree.BaseNode.superClass_.disposeInternal.call(this),this.tree&&(this.tree.removeNode(this),this.tree=null),this.setElementInternal(null)},goog.ui.tree.BaseNode.prototype.initAccessibility=function(){var e=this.getElement();if(e){var t=this.getLabelElement();if(t&&!t.id&&(t.id=this.getId()+".label"),goog.a11y.aria.setRole(e,"treeitem"),goog.a11y.aria.setState(e,"selected",!1),goog.a11y.aria.setState(e,"level",this.getDepth()),t&&goog.a11y.aria.setState(e,"labelledby",t.id),(t=this.getIconElement())&&goog.a11y.aria.setRole(t,"presentation"),(t=this.getExpandIconElement())&&goog.a11y.aria.setRole(t,"presentation"),(t=this.getChildrenElement())&&(goog.a11y.aria.setRole(t,"group"),t.hasChildNodes()))for(goog.a11y.aria.setState(e,goog.a11y.aria.State.EXPANDED,!1),e=this.getChildCount(),t=1;t<=e;t++){var n=this.getChildAt(t-1).getElement();goog.asserts.assert(n,"The child element cannot be null"),goog.a11y.aria.setState(n,"setsize",e),goog.a11y.aria.setState(n,"posinset",t)}}},goog.ui.tree.BaseNode.prototype.createDom=function(){var e=this.getDomHelper().safeHtmlToNode(this.toSafeHtml());this.setElementInternal(e)},goog.ui.tree.BaseNode.prototype.enterDocument=function(){goog.ui.tree.BaseNode.superClass_.enterDocument.call(this),(goog.ui.tree.BaseNode.allNodes[this.getId()]=this).initAccessibility()},goog.ui.tree.BaseNode.prototype.exitDocument=function(){goog.ui.tree.BaseNode.superClass_.exitDocument.call(this),delete goog.ui.tree.BaseNode.allNodes[this.getId()]},goog.ui.tree.BaseNode.prototype.addChildAt=function(e,t,n){goog.asserts.assert(!e.getParent()),goog.asserts.assertInstanceof(e,goog.ui.tree.BaseNode),n=this.getChildAt(t-1);var o=this.getChildAt(t);if(goog.ui.tree.BaseNode.superClass_.addChildAt.call(this,e,t),e.previousSibling_=n,e.nextSibling_=o,n?n.nextSibling_=e:this.firstChild_=e,o?o.previousSibling_=e:this.lastChild_=e,(t=this.getTree())&&e.setTreeInternal(t),e.setDepth_(this.getDepth()+1),(t=this.getElement())&&(this.updateExpandIcon(),goog.a11y.aria.setState(t,goog.a11y.aria.State.EXPANDED,this.getExpanded()),this.getExpanded())){t=this.getChildrenElement(),e.getElement()||e.createDom();var r=e.getElement(),i=o&&o.getElement();t.insertBefore(r,i),this.isInDocument()&&e.enterDocument(),o||(n?n.updateExpandIcon():(goog.style.setElementShown(t,!0),this.setExpanded(this.getExpanded())))}},goog.ui.tree.BaseNode.prototype.add=function(e,t){return goog.asserts.assert(!t||t.getParent()==this,"Can only add nodes before siblings"),e.getParent()&&e.getParent().removeChild(e),this.addChildAt(e,t?this.indexOfChild(t):this.getChildCount()),e},goog.ui.tree.BaseNode.prototype.removeChild=function(e,t){var n=this.getTree(),o=n?n.getSelectedItem():null;if((o==e||e.contains(o))&&(n.hasFocus()?(this.select(),goog.Timer.callOnce(this.onTimeoutSelect_,10,this)):this.select()),goog.ui.tree.BaseNode.superClass_.removeChild.call(this,e),this.lastChild_==e&&(this.lastChild_=e.previousSibling_),this.firstChild_==e&&(this.firstChild_=e.nextSibling_),e.previousSibling_&&(e.previousSibling_.nextSibling_=e.nextSibling_),e.nextSibling_&&(e.nextSibling_.previousSibling_=e.previousSibling_),o=e.isLastSibling(),e.tree=null,e.depth_=-1,n&&(n.removeNode(e),this.isInDocument())){if(n=this.getChildrenElement(),e.isInDocument()){var r=e.getElement();n.removeChild(r),e.exitDocument()}o&&(o=this.getLastChild())&&o.updateExpandIcon(),this.hasChildren()||(n.style.display="none",this.updateExpandIcon(),this.updateIcon_(),(o=this.getElement())&&goog.a11y.aria.removeState(o,goog.a11y.aria.State.EXPANDED))}return e},goog.ui.tree.BaseNode.prototype.remove=goog.ui.tree.BaseNode.prototype.removeChild,goog.ui.tree.BaseNode.prototype.onTimeoutSelect_=function(){this.select()},goog.ui.tree.BaseNode.prototype.getTree=goog.abstractMethod,goog.ui.tree.BaseNode.prototype.getDepth=function(){var e=this.depth_;return e<0&&(e=this.computeDepth_(),this.setDepth_(e)),e},goog.ui.tree.BaseNode.prototype.computeDepth_=function(){var e=this.getParent();return e?e.getDepth()+1:0},goog.ui.tree.BaseNode.prototype.setDepth_=function(t){if(t!=this.depth_){this.depth_=t;var e=this.getRowElement();if(e){var n=this.getPixelIndent_()+"px";this.isRightToLeft()?e.style.paddingRight=n:e.style.paddingLeft=n}this.forEachChild(function(e){e.setDepth_(t+1)})}},goog.ui.tree.BaseNode.prototype.contains=function(e){for(;e;){if(e==this)return!0;e=e.getParent()}return!1},goog.ui.tree.BaseNode.EMPTY_CHILDREN_=[],goog.ui.tree.BaseNode.prototype.getChildren=function(){var t=[];return this.forEachChild(function(e){t.push(e)}),t},goog.ui.tree.BaseNode.prototype.getFirstChild=function(){return this.getChildAt(0)},goog.ui.tree.BaseNode.prototype.getLastChild=function(){return this.getChildAt(this.getChildCount()-1)},goog.ui.tree.BaseNode.prototype.getPreviousSibling=function(){return this.previousSibling_},goog.ui.tree.BaseNode.prototype.getNextSibling=function(){return this.nextSibling_},goog.ui.tree.BaseNode.prototype.isLastSibling=function(){return!this.nextSibling_},goog.ui.tree.BaseNode.prototype.isSelected=function(){return this.selected_},goog.ui.tree.BaseNode.prototype.select=function(){var e=this.getTree();e&&e.setSelectedItem(this)},goog.ui.tree.BaseNode.prototype.deselect=goog.nullFunction,goog.ui.tree.BaseNode.prototype.setSelectedInternal=function(e){if(this.selected_!=e){this.selected_=e,this.updateRow();var t=this.getElement();t&&(goog.a11y.aria.setState(t,"selected",e),e&&(e=this.getTree().getElement(),goog.asserts.assert(e,"The DOM element for the tree cannot be null"),goog.a11y.aria.setState(e,"activedescendant",this.getId())))}},goog.ui.tree.BaseNode.prototype.getExpanded=function(){return this.expanded_},goog.ui.tree.BaseNode.prototype.setExpandedInternal=function(e){this.expanded_=e},goog.ui.tree.BaseNode.prototype.setExpanded=function(e){var t=e!=this.expanded_;if(!t||this.dispatchEvent(e?goog.ui.tree.BaseNode.EventType.BEFORE_EXPAND:goog.ui.tree.BaseNode.EventType.BEFORE_COLLAPSE)){this.expanded_=e;var n=this.getTree(),o=this.getElement();if(this.hasChildren()){if(!e&&n&&this.contains(n.getSelectedItem())&&this.select(),o){if((n=this.getChildrenElement())&&(goog.style.setElementShown(n,e),goog.a11y.aria.setState(o,goog.a11y.aria.State.EXPANDED,e),e&&this.isInDocument()&&!n.hasChildNodes())){var r=[];this.forEachChild(function(e){r.push(e.toSafeHtml())}),goog.dom.safe.setInnerHtml(n,goog.html.SafeHtml.concat(r)),this.forEachChild(function(e){e.enterDocument()})}this.updateExpandIcon()}}else(n=this.getChildrenElement())&&goog.style.setElementShown(n,!1);o&&this.updateIcon_(),t&&this.dispatchEvent(e?goog.ui.tree.BaseNode.EventType.EXPAND:goog.ui.tree.BaseNode.EventType.COLLAPSE)}},goog.ui.tree.BaseNode.prototype.toggle=function(){this.setExpanded(!this.getExpanded())},goog.ui.tree.BaseNode.prototype.expand=function(){this.setExpanded(!0)},goog.ui.tree.BaseNode.prototype.collapse=function(){this.setExpanded(!1)},goog.ui.tree.BaseNode.prototype.collapseChildren=function(){this.forEachChild(function(e){e.collapseAll()})},goog.ui.tree.BaseNode.prototype.collapseAll=function(){this.collapseChildren(),this.collapse()},goog.ui.tree.BaseNode.prototype.expandChildren=function(){this.forEachChild(function(e){e.expandAll()})},goog.ui.tree.BaseNode.prototype.expandAll=function(){this.expandChildren(),this.expand()},goog.ui.tree.BaseNode.prototype.reveal=function(){var e=this.getParent();e&&(e.setExpanded(!0),e.reveal())},goog.ui.tree.BaseNode.prototype.setIsUserCollapsible=function(e){(this.isUserCollapsible_=e)||this.expand(),this.getElement()&&this.updateExpandIcon()},goog.ui.tree.BaseNode.prototype.isUserCollapsible=function(){return this.isUserCollapsible_},goog.ui.tree.BaseNode.prototype.toSafeHtml=function(){var e=this.getTree(),t=!e.getShowLines()||e==this.getParent()&&!e.getShowRootLines()?this.config_.cssChildrenNoLines:this.config_.cssChildren;e=this.getExpanded()&&this.hasChildren(),t={class:t,style:this.getLineStyle()};var n=[];return e&&this.forEachChild(function(e){n.push(e.toSafeHtml())}),e=goog.html.SafeHtml.create("div",t,n),goog.html.SafeHtml.create("div",{class:this.config_.cssItem,id:this.getId()},[this.getRowSafeHtml(),e])},goog.ui.tree.BaseNode.prototype.getPixelIndent_=function(){return Math.max(0,(this.getDepth()-1)*this.config_.indentWidth)},goog.ui.tree.BaseNode.prototype.getRowSafeHtml=function(){var e={};e["padding-"+(this.isRightToLeft()?"right":"left")]=this.getPixelIndent_()+"px",e={class:this.getRowClassName(),style:e};var t=[this.getExpandIconSafeHtml(),this.getIconSafeHtml(),this.getLabelSafeHtml()];return goog.html.SafeHtml.create("div",e,t)},goog.ui.tree.BaseNode.prototype.getRowClassName=function(){var e=this.isSelected()?" "+this.config_.cssSelectedRow:"";return this.config_.cssTreeRow+e},goog.ui.tree.BaseNode.prototype.getLabelSafeHtml=function(){var e=goog.html.SafeHtml.create("span",{class:this.config_.cssItemLabel,title:this.getToolTip()||null},this.getSafeHtml());return goog.html.SafeHtml.concat(e,goog.html.SafeHtml.create("span",{},this.getAfterLabelSafeHtml()))},goog.ui.tree.BaseNode.prototype.getAfterLabelHtml=function(){return goog.html.SafeHtml.unwrap(this.getAfterLabelSafeHtml())},goog.ui.tree.BaseNode.prototype.getAfterLabelSafeHtml=function(){return this.afterLabelHtml_},goog.ui.tree.BaseNode.prototype.setAfterLabelSafeHtml=function(e){this.afterLabelHtml_=e;var t=this.getAfterLabelElement();t&&goog.dom.safe.setInnerHtml(t,e)},goog.ui.tree.BaseNode.prototype.getIconSafeHtml=function(){return goog.html.SafeHtml.create("span",{style:{display:"inline-block"},class:this.getCalculatedIconClass()})},goog.ui.tree.BaseNode.prototype.getCalculatedIconClass=goog.abstractMethod,goog.ui.tree.BaseNode.prototype.getExpandIconSafeHtml=function(){return goog.html.SafeHtml.create("span",{type:"expand",style:{display:"inline-block"},class:this.getExpandIconClass()})},goog.ui.tree.BaseNode.prototype.getExpandIconClass=function(){var e=this.getTree(),t=!e.getShowLines()||e==this.getParent()&&!e.getShowRootLines(),n=this.config_,o=new goog.string.StringBuffer;if(o.append(n.cssTreeIcon," ",n.cssExpandTreeIcon," "),this.hasChildren()){var r=0;switch(e.getShowExpandIcons()&&this.isUserCollapsible_&&(r=this.getExpanded()?2:1),t||(r=this.isLastSibling()?r+4:r+8),r){case 1:o.append(n.cssExpandTreeIconPlus);break;case 2:o.append(n.cssExpandTreeIconMinus);break;case 4:o.append(n.cssExpandTreeIconL);break;case 5:o.append(n.cssExpandTreeIconLPlus);break;case 6:o.append(n.cssExpandTreeIconLMinus);break;case 8:o.append(n.cssExpandTreeIconT);break;case 9:o.append(n.cssExpandTreeIconTPlus);break;case 10:o.append(n.cssExpandTreeIconTMinus);break;default:o.append(n.cssExpandTreeIconBlank)}}else t?o.append(n.cssExpandTreeIconBlank):this.isLastSibling()?o.append(n.cssExpandTreeIconL):o.append(n.cssExpandTreeIconT);return o.toString()},goog.ui.tree.BaseNode.prototype.getLineStyle=function(){var e=this.getExpanded()&&this.hasChildren();return goog.html.SafeStyle.create({"background-position":this.getBackgroundPosition(),display:e?null:"none"})},goog.ui.tree.BaseNode.prototype.getBackgroundPosition=function(){return(this.isLastSibling()?"-100":(this.getDepth()-1)*this.config_.indentWidth)+"px 0"},goog.ui.tree.BaseNode.prototype.getElement=function(){var e=goog.ui.tree.BaseNode.superClass_.getElement.call(this);return e||(e=this.getDomHelper().getElement(this.getId()),this.setElementInternal(e)),e},goog.ui.tree.BaseNode.prototype.getRowElement=function(){var e=this.getElement();return e?e.firstChild:null},goog.ui.tree.BaseNode.prototype.getExpandIconElement=function(){var e=this.getRowElement();return e?e.firstChild:null},goog.ui.tree.BaseNode.prototype.getIconElement=function(){var e=this.getRowElement();return e?e.childNodes[1]:null},goog.ui.tree.BaseNode.prototype.getLabelElement=function(){var e=this.getRowElement();return e&&e.lastChild?e.lastChild.previousSibling:null},goog.ui.tree.BaseNode.prototype.getAfterLabelElement=function(){var e=this.getRowElement();return e?e.lastChild:null},goog.ui.tree.BaseNode.prototype.getChildrenElement=function(){var e=this.getElement();return e?e.lastChild:null},goog.ui.tree.BaseNode.prototype.setIconClass=function(e){this.iconClass_=e,this.isInDocument()&&this.updateIcon_()},goog.ui.tree.BaseNode.prototype.getIconClass=function(){return this.iconClass_},goog.ui.tree.BaseNode.prototype.setExpandedIconClass=function(e){this.expandedIconClass_=e,this.isInDocument()&&this.updateIcon_()},goog.ui.tree.BaseNode.prototype.getExpandedIconClass=function(){return this.expandedIconClass_},goog.ui.tree.BaseNode.prototype.setText=function(e){this.setSafeHtml(goog.html.SafeHtml.htmlEscape(e))},goog.ui.tree.BaseNode.prototype.getText=function(){return goog.string.unescapeEntities(goog.html.SafeHtml.unwrap(this.html_))},goog.ui.tree.BaseNode.prototype.setSafeHtml=function(e){this.html_=e;var t=this.getLabelElement();t&&goog.dom.safe.setInnerHtml(t,e),(e=this.getTree())&&e.setNode(this)},goog.ui.tree.BaseNode.prototype.getHtml=function(){return goog.html.SafeHtml.unwrap(this.getSafeHtml())},goog.ui.tree.BaseNode.prototype.getSafeHtml=function(){return this.html_},goog.ui.tree.BaseNode.prototype.setToolTip=function(e){this.toolTip_=e;var t=this.getLabelElement();t&&(t.title=e)},goog.ui.tree.BaseNode.prototype.getToolTip=function(){return this.toolTip_},goog.ui.tree.BaseNode.prototype.updateRow=function(){var e=this.getRowElement();e&&(e.className=this.getRowClassName())},goog.ui.tree.BaseNode.prototype.updateExpandIcon=function(){var e=this.getExpandIconElement();e&&(e.className=this.getExpandIconClass()),(e=this.getChildrenElement())&&(e.style.backgroundPosition=this.getBackgroundPosition())},goog.ui.tree.BaseNode.prototype.updateIcon_=function(){this.getIconElement().className=this.getCalculatedIconClass()},goog.ui.tree.BaseNode.prototype.onMouseDown=function(e){"expand"==e.target.getAttribute("type")&&this.hasChildren()?this.isUserCollapsible_&&this.toggle():(this.select(),this.updateRow())},goog.ui.tree.BaseNode.prototype.onClick_=goog.events.Event.preventDefault,goog.ui.tree.BaseNode.prototype.onDoubleClick_=function(e){"expand"==e.target.getAttribute("type")&&this.hasChildren()||this.isUserCollapsible_&&this.toggle()},goog.ui.tree.BaseNode.prototype.onKeyDown=function(e){var t=!0;switch(e.keyCode){case goog.events.KeyCodes.RIGHT:if(e.altKey)break;this.hasChildren()&&(this.getExpanded()?this.getFirstChild().select():this.setExpanded(!0));break;case goog.events.KeyCodes.LEFT:if(e.altKey)break;if(this.hasChildren()&&this.getExpanded()&&this.isUserCollapsible_)this.setExpanded(!1);else{var n=this.getParent(),o=this.getTree();n&&(o.getShowRootNode()||n!=o)&&n.select()}break;case goog.events.KeyCodes.DOWN:(n=this.getNextShownNode())&&n.select();break;case goog.events.KeyCodes.UP:(n=this.getPreviousShownNode())&&n.select();break;default:t=!1}return t&&(e.preventDefault(),(o=this.getTree())&&o.clearTypeAhead()),t},goog.ui.tree.BaseNode.prototype.getLastShownDescendant=function(){return this.getExpanded()&&this.hasChildren()?this.getLastChild().getLastShownDescendant():this},goog.ui.tree.BaseNode.prototype.getNextShownNode=function(){if(this.hasChildren()&&this.getExpanded())return this.getFirstChild();for(var e,t=this;t!=this.getTree();){if(null!=(e=t.getNextSibling()))return e;t=t.getParent()}return null},goog.ui.tree.BaseNode.prototype.getPreviousShownNode=function(){var e=this.getPreviousSibling();if(null!=e)return e.getLastShownDescendant();e=this.getParent();var t=this.getTree();return!t.getShowRootNode()&&e==t||this==t?null:e},goog.ui.tree.BaseNode.prototype.getClientData=goog.ui.tree.BaseNode.prototype.getModel,goog.ui.tree.BaseNode.prototype.setClientData=goog.ui.tree.BaseNode.prototype.setModel,goog.ui.tree.BaseNode.prototype.getConfig=function(){return this.config_},goog.ui.tree.BaseNode.prototype.setTreeInternal=function(t){this.tree!=t&&((this.tree=t).setNode(this),this.forEachChild(function(e){e.setTreeInternal(t)}))},goog.ui.tree.BaseNode.defaultConfig={indentWidth:19,cssRoot:"goog-tree-root goog-tree-item",cssHideRoot:"goog-tree-hide-root",cssItem:"goog-tree-item",cssChildren:"goog-tree-children",cssChildrenNoLines:"goog-tree-children-nolines",cssTreeRow:"goog-tree-row",cssItemLabel:"goog-tree-item-label",cssTreeIcon:"goog-tree-icon",cssExpandTreeIcon:"goog-tree-expand-icon",cssExpandTreeIconPlus:"goog-tree-expand-icon-plus",cssExpandTreeIconMinus:"goog-tree-expand-icon-minus",cssExpandTreeIconTPlus:"goog-tree-expand-icon-tplus",cssExpandTreeIconTMinus:"goog-tree-expand-icon-tminus",cssExpandTreeIconLPlus:"goog-tree-expand-icon-lplus",cssExpandTreeIconLMinus:"goog-tree-expand-icon-lminus",cssExpandTreeIconT:"goog-tree-expand-icon-t",cssExpandTreeIconL:"goog-tree-expand-icon-l",cssExpandTreeIconBlank:"goog-tree-expand-icon-blank",cssExpandedFolderIcon:"goog-tree-expanded-folder-icon",cssCollapsedFolderIcon:"goog-tree-collapsed-folder-icon",cssFileIcon:"goog-tree-file-icon",cssExpandedRootIcon:"goog-tree-expanded-folder-icon",cssCollapsedRootIcon:"goog-tree-collapsed-folder-icon",cssSelectedRow:"selected"},goog.ui.tree.TreeNode=function(e,t,n){goog.ui.tree.BaseNode.call(this,e,t,n)},goog.inherits(goog.ui.tree.TreeNode,goog.ui.tree.BaseNode),goog.ui.tree.TreeNode.prototype.getTree=function(){if(this.tree)return this.tree;var e=this.getParent();return e&&(e=e.getTree())?(this.setTreeInternal(e),e):null},goog.ui.tree.TreeNode.prototype.getCalculatedIconClass=function(){var e=this.getExpanded(),t=this.getExpandedIconClass();if(e&&t)return t;if(t=this.getIconClass(),!e&&t)return t;if(t=this.getConfig(),this.hasChildren()){if(e&&t.cssExpandedFolderIcon)return t.cssTreeIcon+" "+t.cssExpandedFolderIcon;if(!e&&t.cssCollapsedFolderIcon)return t.cssTreeIcon+" "+t.cssCollapsedFolderIcon}else if(t.cssFileIcon)return t.cssTreeIcon+" "+t.cssFileIcon;return""},goog.structs.Trie=function(e){this.value_=void 0,this.childNodes_={},e&&this.setAll(e)},goog.structs.Trie.prototype.set=function(e,t){this.setOrAdd_(e,t,!1)},goog.structs.Trie.prototype.add=function(e,t){this.setOrAdd_(e,t,!0)},goog.structs.Trie.prototype.setOrAdd_=function(e,t,n){for(var o=this,r=0;r<e.length;r++){var i=e.charAt(r);o.childNodes_[i]||(o.childNodes_[i]=new goog.structs.Trie),o=o.childNodes_[i]}if(n&&void 0!==o.value_)throw Error('The collection already contains the key "'+e+'"');o.value_=t},goog.structs.Trie.prototype.setAll=function(e){var t=goog.structs.getKeys(e);e=goog.structs.getValues(e);for(var n=0;n<t.length;n++)this.set(t[n],e[n])},goog.structs.Trie.prototype.getChildNode_=function(e){for(var t=this,n=0;n<e.length;n++){var o=e.charAt(n);if(!(t=t.childNodes_[o]))return}return t},goog.structs.Trie.prototype.get=function(e){return(e=this.getChildNode_(e))?e.value_:void 0},goog.structs.Trie.prototype.getKeyAndPrefixes=function(e,t){var n=this,o={},r=t||0;for(void 0!==n.value_&&(o[r]=n.value_);r<e.length;r++){var i=e.charAt(r);if(!(i in n.childNodes_))break;void 0!==(n=n.childNodes_[i]).value_&&(o[r]=n.value_)}return o},goog.structs.Trie.prototype.getValues=function(){var e=[];return this.getValuesInternal_(e),e},goog.structs.Trie.prototype.getValuesInternal_=function(e){for(var t in void 0!==this.value_&&e.push(this.value_),this.childNodes_)this.childNodes_[t].getValuesInternal_(e)},goog.structs.Trie.prototype.getKeys=function(e){var t=[];if(e){for(var n=this,o=0;o<e.length;o++){var r=e.charAt(o);if(!n.childNodes_[r])return[];n=n.childNodes_[r]}n.getKeysInternal_(e,t)}else this.getKeysInternal_("",t);return t},goog.structs.Trie.prototype.getKeysInternal_=function(e,t){for(var n in void 0!==this.value_&&t.push(e),this.childNodes_)this.childNodes_[n].getKeysInternal_(e+n,t)},goog.structs.Trie.prototype.containsKey=function(e){return void 0!==this.get(e)},goog.structs.Trie.prototype.containsPrefix=function(e){return 0==e.length?!this.isEmpty():!!this.getChildNode_(e)},goog.structs.Trie.prototype.containsValue=function(e){if(this.value_===e)return!0;for(var t in this.childNodes_)if(this.childNodes_[t].containsValue(e))return!0;return!1},goog.structs.Trie.prototype.clear=function(){this.childNodes_={},this.value_=void 0},goog.structs.Trie.prototype.remove=function(e){for(var t=this,n=[],o=0;o<e.length;o++){var r=e.charAt(o);if(!t.childNodes_[r])throw Error('The collection does not have the key "'+e+'"');n.push([t,r]),t=t.childNodes_[r]}for(e=t.value_,delete t.value_;0<n.length&&(t=(r=n.pop())[0],r=r[1],t.childNodes_[r].isEmpty());)delete t.childNodes_[r];return e},goog.structs.Trie.prototype.clone=function(){return new goog.structs.Trie(this)},goog.structs.Trie.prototype.getCount=function(){return goog.structs.getCount(this.getValues())},goog.structs.Trie.prototype.isEmpty=function(){return void 0===this.value_&&goog.object.isEmpty(this.childNodes_)},goog.ui.tree.TypeAhead=function(){this.nodeMap_=new goog.structs.Trie,this.buffer_="",this.matchingNodes_=this.matchingLabels_=null,this.matchingNodeIndex_=this.matchingLabelIndex_=0},goog.ui.tree.TypeAhead.Offset={DOWN:1,UP:-1},goog.ui.tree.TypeAhead.prototype.handleNavigation=function(e){var t=!1;switch(e.keyCode){case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.UP:e.ctrlKey&&(this.jumpTo_(e.keyCode==goog.events.KeyCodes.DOWN?goog.ui.tree.TypeAhead.Offset.DOWN:goog.ui.tree.TypeAhead.Offset.UP),t=!0);break;case goog.events.KeyCodes.BACKSPACE:t=!0,0<(e=this.buffer_.length-1)?(this.buffer_=this.buffer_.substring(0,e),this.jumpToLabel_(this.buffer_)):0==e?this.buffer_="":t=!1;break;case goog.events.KeyCodes.ESC:t=!(this.buffer_="")}return t},goog.ui.tree.TypeAhead.prototype.handleTypeAheadChar=function(e){var t=!1;return e.ctrlKey||e.altKey||(e=String.fromCharCode(e.charCode||e.keyCode).toLowerCase(),goog.string.isUnicodeChar(e)&&(" "!=e||this.buffer_)&&(this.buffer_+=e,t=this.jumpToLabel_(this.buffer_))),t},goog.ui.tree.TypeAhead.prototype.setNodeInMap=function(e){var t=e.getText();if(t&&!goog.string.isEmptyOrWhitespace(goog.string.makeSafe(t))){t=t.toLowerCase();var n=this.nodeMap_.get(t);n?n.push(e):this.nodeMap_.set(t,[e])}},goog.ui.tree.TypeAhead.prototype.removeNodeFromMap=function(e){var t=e.getText();if(t&&!goog.string.isEmptyOrWhitespace(goog.string.makeSafe(t))){t=t.toLowerCase();var n=this.nodeMap_.get(t);if(n){for(var o=e.getChildCount(),r=0;r<o;r++)this.removeNodeFromMap(e.getChildAt(r));goog.array.remove(n,e),n.length||this.nodeMap_.remove(t)}}},goog.ui.tree.TypeAhead.prototype.jumpToLabel_=function(e){var t=!1;return(e=this.nodeMap_.getKeys(e))&&e.length&&(this.matchingLabelIndex_=this.matchingNodeIndex_=0,t=this.nodeMap_.get(e[0]),t=this.selectMatchingNode_(t))&&(this.matchingLabels_=e),t},goog.ui.tree.TypeAhead.prototype.jumpTo_=function(e){var t=!1,n=this.matchingLabels_;if(n){t=null;var o=!1;if(this.matchingNodes_){var r=this.matchingNodeIndex_+e;0<=r&&r<this.matchingNodes_.length?(this.matchingNodeIndex_=r,t=this.matchingNodes_):o=!0}t||(0<=(r=this.matchingLabelIndex_+e)&&r<n.length&&(this.matchingLabelIndex_=r),n.length>this.matchingLabelIndex_&&(t=this.nodeMap_.get(n[this.matchingLabelIndex_])),t&&t.length&&o&&(this.matchingNodeIndex_=e==goog.ui.tree.TypeAhead.Offset.UP?t.length-1:0)),(t=this.selectMatchingNode_(t))&&(this.matchingLabels_=n)}return t},goog.ui.tree.TypeAhead.prototype.selectMatchingNode_=function(e){if(e){if(this.matchingNodeIndex_<e.length){var t=e[this.matchingNodeIndex_];this.matchingNodes_=e}t&&(t.reveal(),t.select())}return!!t},goog.ui.tree.TypeAhead.prototype.clear=function(){this.buffer_=""},goog.ui.tree.TreeControl=function(e,t,n){if(goog.ui.tree.BaseNode.call(this,e,t,n),this.setExpandedInternal(!0),this.setSelectedInternal(!0),(this.selectedItem_=this).typeAhead_=new goog.ui.tree.TypeAhead,this.focusHandler_=this.keyHandler_=null,this.logger_=goog.log.getLogger("this"),this.focused_=!1,this.focusedNode_=null,this.showRootLines_=this.showRootNode_=this.showExpandIcons_=this.showLines_=!0,goog.userAgent.IE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){goog.log.warning(this.logger_,"Failed to enable background image cache")}},goog.inherits(goog.ui.tree.TreeControl,goog.ui.tree.BaseNode),goog.ui.tree.TreeControl.prototype.getTree=function(){return this},goog.ui.tree.TreeControl.prototype.getDepth=function(){return 0},goog.ui.tree.TreeControl.prototype.reveal=function(){},goog.ui.tree.TreeControl.prototype.handleFocus_=function(e){this.focused_=!0,goog.dom.classlist.add(goog.asserts.assert(this.getElement()),"focused"),this.selectedItem_&&this.selectedItem_.select()},goog.ui.tree.TreeControl.prototype.handleBlur_=function(e){this.focused_=!1,goog.dom.classlist.remove(goog.asserts.assert(this.getElement()),"focused")},goog.ui.tree.TreeControl.prototype.hasFocus=function(){return this.focused_},goog.ui.tree.TreeControl.prototype.getExpanded=function(){return!this.showRootNode_||goog.ui.tree.TreeControl.superClass_.getExpanded.call(this)},goog.ui.tree.TreeControl.prototype.setExpanded=function(e){this.showRootNode_?goog.ui.tree.TreeControl.superClass_.setExpanded.call(this,e):this.setExpandedInternal(e)},goog.ui.tree.TreeControl.prototype.getExpandIconSafeHtml=function(){return goog.html.SafeHtml.EMPTY},goog.ui.tree.TreeControl.prototype.getIconElement=function(){var e=this.getRowElement();return e?e.firstChild:null},goog.ui.tree.TreeControl.prototype.getExpandIconElement=function(){return null},goog.ui.tree.TreeControl.prototype.updateExpandIcon=function(){},goog.ui.tree.TreeControl.prototype.getRowClassName=function(){return goog.ui.tree.TreeControl.superClass_.getRowClassName.call(this)+(this.showRootNode_?"":" "+this.getConfig().cssHideRoot)},goog.ui.tree.TreeControl.prototype.getCalculatedIconClass=function(){var e=this.getExpanded(),t=this.getExpandedIconClass();return e&&t?t:(t=this.getIconClass(),!e&&t?t:(t=this.getConfig(),e&&t.cssExpandedRootIcon?t.cssTreeIcon+" "+t.cssExpandedRootIcon:!e&&t.cssCollapsedRootIcon?t.cssTreeIcon+" "+t.cssCollapsedRootIcon:""))},goog.ui.tree.TreeControl.prototype.setSelectedItem=function(e){if(this.selectedItem_!=e){var t=!1;this.selectedItem_&&(t=this.selectedItem_==this.focusedNode_,this.selectedItem_.setSelectedInternal(!1)),(this.selectedItem_=e)&&(e.setSelectedInternal(!0),t&&e.select()),this.dispatchEvent(goog.events.EventType.CHANGE)}},goog.ui.tree.TreeControl.prototype.getSelectedItem=function(){return this.selectedItem_},goog.ui.tree.TreeControl.prototype.setShowLines=function(e){this.showLines_!=e&&(this.showLines_=e,this.isInDocument()&&this.updateLinesAndExpandIcons_())},goog.ui.tree.TreeControl.prototype.getShowLines=function(){return this.showLines_},goog.ui.tree.TreeControl.prototype.updateLinesAndExpandIcons_=function(){var r=this,i=r.getShowLines(),a=r.getShowRootLines();!function e(t){var n=t.getChildrenElement();if(n){var o=!i||r==t.getParent()&&!a?t.getConfig().cssChildrenNoLines:t.getConfig().cssChildren;n.className=o,(n=t.getExpandIconElement())&&(n.className=t.getExpandIconClass())}t.forEachChild(e)}(this)},goog.ui.tree.TreeControl.prototype.setShowRootLines=function(e){this.showRootLines_!=e&&(this.showRootLines_=e,this.isInDocument()&&this.updateLinesAndExpandIcons_())},goog.ui.tree.TreeControl.prototype.getShowRootLines=function(){return this.showRootLines_},goog.ui.tree.TreeControl.prototype.setShowExpandIcons=function(e){this.showExpandIcons_!=e&&(this.showExpandIcons_=e,this.isInDocument()&&this.updateLinesAndExpandIcons_())},goog.ui.tree.TreeControl.prototype.getShowExpandIcons=function(){return this.showExpandIcons_},goog.ui.tree.TreeControl.prototype.setShowRootNode=function(e){if(this.showRootNode_!=e){if(this.showRootNode_=e,this.isInDocument()){var t=this.getRowElement();t&&(t.className=this.getRowClassName())}!e&&this.getSelectedItem()==this&&this.getFirstChild()&&this.setSelectedItem(this.getFirstChild())}},goog.ui.tree.TreeControl.prototype.getShowRootNode=function(){return this.showRootNode_},goog.ui.tree.TreeControl.prototype.initAccessibility=function(){goog.ui.tree.TreeControl.superClass_.initAccessibility.call(this);var e=this.getElement();goog.asserts.assert(e,"The DOM element for the tree cannot be null."),goog.a11y.aria.setRole(e,"tree"),goog.a11y.aria.setState(e,"labelledby",this.getLabelElement().id)},goog.ui.tree.TreeControl.prototype.enterDocument=function(){goog.ui.tree.TreeControl.superClass_.enterDocument.call(this);var e=this.getElement();e.className=this.getConfig().cssRoot,e.setAttribute("hideFocus","true"),this.attachEvents_(),this.initAccessibility()},goog.ui.tree.TreeControl.prototype.exitDocument=function(){goog.ui.tree.TreeControl.superClass_.exitDocument.call(this),this.detachEvents_()},goog.ui.tree.TreeControl.prototype.attachEvents_=function(){var e=this.getElement();e.tabIndex=0;var t=this.keyHandler_=new goog.events.KeyHandler(e),n=this.focusHandler_=new goog.events.FocusHandler(e);this.getHandler().listen(n,goog.events.FocusHandler.EventType.FOCUSOUT,this.handleBlur_).listen(n,goog.events.FocusHandler.EventType.FOCUSIN,this.handleFocus_).listen(t,goog.events.KeyHandler.EventType.KEY,this.handleKeyEvent).listen(e,goog.events.EventType.MOUSEDOWN,this.handleMouseEvent_).listen(e,goog.events.EventType.CLICK,this.handleMouseEvent_).listen(e,goog.events.EventType.DBLCLICK,this.handleMouseEvent_)},goog.ui.tree.TreeControl.prototype.detachEvents_=function(){this.keyHandler_.dispose(),this.keyHandler_=null,this.focusHandler_.dispose(),this.focusHandler_=null},goog.ui.tree.TreeControl.prototype.handleMouseEvent_=function(e){goog.log.fine(this.logger_,"Received event "+e.type);var t=this.getNodeFromEvent_(e);if(t)switch(e.type){case goog.events.EventType.MOUSEDOWN:t.onMouseDown(e);break;case goog.events.EventType.CLICK:t.onClick_(e);break;case goog.events.EventType.DBLCLICK:t.onDoubleClick_(e)}},goog.ui.tree.TreeControl.prototype.handleKeyEvent=function(e){var t;return(t=this.typeAhead_.handleNavigation(e)||this.selectedItem_&&this.selectedItem_.onKeyDown(e)||this.typeAhead_.handleTypeAheadChar(e))&&e.preventDefault(),t},goog.ui.tree.TreeControl.prototype.getNodeFromEvent_=function(e){for(var t=e.target;null!=t;){if(e=goog.ui.tree.BaseNode.allNodes[t.id])return e;if(t==this.getElement())break;t=t.parentNode}return null},goog.ui.tree.TreeControl.prototype.createNode=function(e){return new goog.ui.tree.TreeNode(e||goog.html.SafeHtml.EMPTY,this.getConfig(),this.getDomHelper())},goog.ui.tree.TreeControl.prototype.setNode=function(e){this.typeAhead_.setNodeInMap(e)},goog.ui.tree.TreeControl.prototype.removeNode=function(e){this.typeAhead_.removeNodeFromMap(e)},goog.ui.tree.TreeControl.prototype.clearTypeAhead=function(){this.typeAhead_.clear()},goog.ui.tree.TreeControl.defaultConfig=goog.ui.tree.BaseNode.defaultConfig;var Blockly={};Blockly.Blocks=Object(null),Blockly.Colours={text:"#575E75",workspace:"#F9F9F9",toolboxHover:"#4C97FF",toolboxSelected:"#e9eef2",toolboxText:"#575E75",toolbox:"#FFFFFF",flyout:"#444",scrollbar:"#CECDCE",scrollbarHover:"#CECDCE",textField:"#FFFFFF",insertionMarker:"#000000",insertionMarkerOpacity:.2,dragShadowOpacity:.4,stackGlow:"#FFF200",stackGlowSize:4,stackGlowOpacity:1,replacementGlow:"#FFFFFF",replacementGlowSize:2,replacementGlowOpacity:1,highlightGlow:"#FFF200",highlightGlowSize:1.1,highlightGlowOpacity:1,warningGlow:"#E53D00",warningGlowSize:1.1,warningGlowOpacity:1,colourPickerStroke:"#FFFFFF",fieldShadow:"rgba(255, 255, 255, 0.2)",dropDownShadow:"rgba(0, 0, 0, .3)",numPadBackground:"#547AB2",numPadBorder:"#435F91",numPadActiveBackground:"#435F91",numPadText:"#FFFFFF",valueReportBackground:"#FFFFFF",valueReportBorder:"#AAAAAA"},Blockly.Touch={},Blockly.Touch.touchIdentifier_=null,Blockly.Touch.TOUCH_MAP={},window&&window.PointerEvent?Blockly.Touch.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:goog.events.BrowserFeature.TOUCH_ENABLED&&(Blockly.Touch.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]}),Blockly.longPid_=0,Blockly.longStart_=function(e,t){Blockly.longStop_(),e.changedTouches&&1!=e.changedTouches.length||(Blockly.longPid_=setTimeout(function(){e.changedTouches&&(e.button=2,e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),t&&t.handleRightClick(e)},Blockly.LONGPRESS))},Blockly.longStop_=function(){Blockly.longPid_&&(clearTimeout(Blockly.longPid_),Blockly.longPid_=0)},Blockly.Touch.clearTouchIdentifier=function(){Blockly.Touch.touchIdentifier_=null},Blockly.Touch.shouldHandleEvent=function(e){return!Blockly.Touch.isMouseOrTouchEvent(e)||Blockly.Touch.checkTouchIdentifier(e)},Blockly.Touch.getTouchIdentifierFromEvent=function(e){return null!=e.pointerId?e.pointerId:e.changedTouches&&e.changedTouches[0]&&null!=e.changedTouches[0].identifier&&null!=e.changedTouches[0].identifier?e.changedTouches[0].identifier:"mouse"},Blockly.Touch.checkTouchIdentifier=function(e){var t=Blockly.Touch.getTouchIdentifierFromEvent(e);return null!=Blockly.Touch.touchIdentifier_&&null!=Blockly.Touch.touchIdentifier_?Blockly.Touch.touchIdentifier_==t:("mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type)&&(Blockly.Touch.touchIdentifier_=t,!0)},Blockly.Touch.setClientFromTouch=function(e){if(goog.string.startsWith(e.type,"touch")){var t=e.changedTouches[0];e.clientX=t.clientX,e.clientY=t.clientY}},Blockly.Touch.isMouseOrTouchEvent=function(e){return goog.string.startsWith(e.type,"touch")||goog.string.startsWith(e.type,"mouse")||goog.string.startsWith(e.type,"pointer")},Blockly.Touch.isTouchEvent=function(e){return goog.string.startsWith(e.type,"touch")||goog.string.startsWith(e.type,"pointer")},Blockly.Touch.splitEventByTouches=function(e){var t=[];if(e.changedTouches)for(var n=0;n<e.changedTouches.length;n++)t[n]={type:e.type,changedTouches:[e.changedTouches[n]],target:e.target,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()}};else t.push(e);return t},Blockly.Events={},Blockly.Events.group_="",Blockly.Events.recordUndo=!0,Blockly.Events.disabled_=0,Blockly.Events.CREATE="create",Blockly.Events.BLOCK_CREATE=Blockly.Events.CREATE,Blockly.Events.DELETE="delete",Blockly.Events.BLOCK_DELETE=Blockly.Events.DELETE,Blockly.Events.CHANGE="change",Blockly.Events.BLOCK_CHANGE=Blockly.Events.CHANGE,Blockly.Events.MOVE="move",Blockly.Events.BLOCK_MOVE=Blockly.Events.MOVE,Blockly.Events.VAR_CREATE="var_create",Blockly.Events.VAR_DELETE="var_delete",Blockly.Events.VAR_RENAME="var_rename",Blockly.Events.COMMENT_CREATE="comment_create",Blockly.Events.COMMENT_DELETE="comment_delete",Blockly.Events.COMMENT_CHANGE="comment_change",Blockly.Events.COMMENT_MOVE="comment_move",Blockly.Events.UI="ui",Blockly.Events.FIRE_QUEUE_=[],Blockly.Events.fire=function(e){Blockly.Events.isEnabled()&&(Blockly.Events.FIRE_QUEUE_.length||setTimeout(Blockly.Events.fireNow_,0),Blockly.Events.FIRE_QUEUE_.push(e))},Blockly.Events.fireNow_=function(){for(var e,t=Blockly.Events.filter(Blockly.Events.FIRE_QUEUE_,!0),n=Blockly.Events.FIRE_QUEUE_.length=0;e=t[n];n++){var o=Blockly.Workspace.getById(e.workspaceId);o&&o.fireChangeListener(e)}},Blockly.Events.filter=function(e,t){var n=goog.array.clone(e);t||n.reverse();for(var o,r=[],i=Object.create(null),a=0;o=n[a];a++)if(!o.isNull()){var s=[o.type,o.blockId,o.workspaceId].join(" "),l=i[s];l?o.type==Blockly.Events.MOVE?(l.newParentId=o.newParentId,l.newInputName=o.newInputName,l.newCoordinate=o.newCoordinate):o.type==Blockly.Events.CHANGE&&o.element==l.element&&o.name==l.name?l.newValue=o.newValue:o.type!=Blockly.Events.UI||"click"!=o.element||"commentOpen"!=l.element&&"mutatorOpen"!=l.element&&"warningOpen"!=l.element?(i[s]=o,r.push(o)):l.newValue=o.newValue:(i[s]=o,r.push(o))}for(n=r.filter(function(e){return!e.isNull()}),t||n.reverse(),a=1;o=n[a];a++)o.type==Blockly.Events.CHANGE&&"mutation"==o.element&&n.unshift(n.splice(a,1)[0]);return n},Blockly.Events.clearPendingUndo=function(){for(var e,t=0;e=Blockly.Events.FIRE_QUEUE_[t];t++)e.recordUndo=!1},Blockly.Events.disable=function(){Blockly.Events.disabled_++},Blockly.Events.enable=function(){Blockly.Events.disabled_--},Blockly.Events.isEnabled=function(){return 0==Blockly.Events.disabled_},Blockly.Events.getGroup=function(){return Blockly.Events.group_},Blockly.Events.setGroup=function(e){Blockly.Events.group_="boolean"==typeof e?e?Blockly.utils.genUid():"":e},Blockly.Events.getDescendantIds_=function(e){var t=[];e=e.getDescendants(!1);for(var n,o=0;n=e[o];o++)t[o]=n.id;return t},Blockly.Events.fromJson=function(e,t){switch(e.type){case Blockly.Events.CREATE:var n=new Blockly.Events.Create(null);break;case Blockly.Events.DELETE:n=new Blockly.Events.Delete(null);break;case Blockly.Events.CHANGE:n=new Blockly.Events.Change(null,"","","","");break;case Blockly.Events.MOVE:n=new Blockly.Events.Move(null);break;case Blockly.Events.VAR_CREATE:n=new Blockly.Events.VarCreate(null);break;case Blockly.Events.VAR_DELETE:n=new Blockly.Events.VarDelete(null);break;case Blockly.Events.VAR_RENAME:n=new Blockly.Events.VarRename(null,"");break;case Blockly.Events.UI:n=new Blockly.Events.Ui(null);break;case Blockly.Events.COMMENT_CREATE:n=new Blockly.Events.CommentCreate(null);break;case Blockly.Events.COMMENT_DELETE:n=new Blockly.Events.CommentDelete(null);break;case Blockly.Events.COMMENT_CHANGE:n=new Blockly.Events.CommentChange(null,"");break;case Blockly.Events.COMMENT_MOVE:n=new Blockly.Events.CommentMove(null,"");break;default:throw"Unknown event type."}return n.fromJson(e),n.workspaceId=t.id,n},Blockly.Events.disableOrphans=function(e){if(e.type==Blockly.Events.MOVE||e.type==Blockly.Events.CREATE){var t=Blockly.Workspace.getById(e.workspaceId);if(e=t.getBlockById(e.blockId))if(e.getParent()&&!e.getParent().disabled){t=e.getDescendants(!1),e=0;for(var n;n=t[e];e++)n.setDisabled(!1)}else if((e.outputConnection||e.previousConnection)&&!t.isDragging())for(;e.setDisabled(!0),e=e.getNextBlock(););}},Blockly.Events.Abstract=function(){this.workspaceId=void 0,this.group=Blockly.Events.group_,this.recordUndo=Blockly.Events.recordUndo},Blockly.Events.Abstract.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),e},Blockly.Events.Abstract.prototype.fromJson=function(e){this.group=e.group},Blockly.Events.Abstract.prototype.isNull=function(){return!1},Blockly.Events.Abstract.prototype.run=function(e){},Blockly.Events.Abstract.prototype.getEventWorkspace_=function(){var e=Blockly.Workspace.getById(this.workspaceId);if(!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e},Blockly.Events.VarBase=function(e){Blockly.Events.VarBase.superClass_.constructor.call(this),this.varId=e.getId(),this.workspaceId=e.workspace.id},goog.inherits(Blockly.Events.VarBase,Blockly.Events.Abstract),Blockly.Events.VarBase.prototype.toJson=function(){var e=Blockly.Events.VarBase.superClass_.toJson.call(this);return e.varId=this.varId,e},Blockly.Events.VarBase.prototype.fromJson=function(e){Blockly.Events.VarBase.superClass_.toJson.call(this),this.varId=e.varId},Blockly.Events.VarCreate=function(e){e&&(Blockly.Events.VarCreate.superClass_.constructor.call(this,e),this.varType=e.type,this.varName=e.name)},goog.inherits(Blockly.Events.VarCreate,Blockly.Events.VarBase),Blockly.Events.VarCreate.prototype.type=Blockly.Events.VAR_CREATE,Blockly.Events.VarCreate.prototype.toJson=function(){var e=Blockly.Events.VarCreate.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},Blockly.Events.VarCreate.prototype.fromJson=function(e){Blockly.Events.VarCreate.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},Blockly.Events.VarCreate.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.createVariable(this.varName,this.varType,this.varId):t.deleteVariableById(this.varId)},Blockly.Events.VarDelete=function(e){e&&(Blockly.Events.VarDelete.superClass_.constructor.call(this,e),this.varType=e.type,this.varName=e.name)},goog.inherits(Blockly.Events.VarDelete,Blockly.Events.VarBase),Blockly.Events.VarDelete.prototype.type=Blockly.Events.VAR_DELETE,Blockly.Events.VarDelete.prototype.toJson=function(){var e=Blockly.Events.VarDelete.superClass_.toJson.call(this);return e.varType=this.varType,e.varName=this.varName,e},Blockly.Events.VarDelete.prototype.fromJson=function(e){Blockly.Events.VarDelete.superClass_.fromJson.call(this,e),this.varType=e.varType,this.varName=e.varName},Blockly.Events.VarDelete.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.deleteVariableById(this.varId):t.createVariable(this.varName,this.varType,this.varId)},Blockly.Events.VarRename=function(e,t){e&&(Blockly.Events.VarRename.superClass_.constructor.call(this,e),this.oldName=e.name,this.newName=t)},goog.inherits(Blockly.Events.VarRename,Blockly.Events.VarBase),Blockly.Events.VarRename.prototype.type=Blockly.Events.VAR_RENAME,Blockly.Events.VarRename.prototype.toJson=function(){var e=Blockly.Events.VarRename.superClass_.toJson.call(this);return e.oldName=this.oldName,e.newName=this.newName,e},Blockly.Events.VarRename.prototype.fromJson=function(e){Blockly.Events.VarRename.superClass_.fromJson.call(this,e),this.oldName=e.oldName,this.newName=e.newName},Blockly.Events.VarRename.prototype.run=function(e){var t=this.getEventWorkspace_();e?t.renameVariableById(this.varId,this.newName):t.renameVariableById(this.varId,this.oldName)},Blockly.VariableMap=function(e){this.variableMap_={},this.workspace=e},Blockly.VariableMap.prototype.clear=function(){this.variableMap_=Object(null)},Blockly.VariableMap.prototype.renameVariable=function(e,t){var n=this.getVariable(t,e.type),o=this.workspace.getAllBlocks();Blockly.Events.setGroup(!0);try{n&&n.getId()!=e.getId()?this.renameVariableWithConflict_(e,t,n,o):this.renameVariableAndUses_(e,t,o)}finally{Blockly.Events.setGroup(!1)}},Blockly.VariableMap.prototype.renameVariableById=function(e,t){var n=this.getVariableById(e);if(!n)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(n,t)},Blockly.VariableMap.prototype.renameVariableAndUses_=function(e,t,n){for(Blockly.Events.fire(new Blockly.Events.VarRename(e,t)),e.name=t,t=0;t<n.length;t++)n[t].updateVarName(e)},Blockly.VariableMap.prototype.renameVariableWithConflict_=function(e,t,n,o){var r=e.type;for(t!=n.name&&this.renameVariableAndUses_(n,t,o),t=0;t<o.length;t++)o[t].renameVarById(e.getId(),n.getId());Blockly.Events.fire(new Blockly.Events.VarDelete(e)),e=this.getVariablesOfType(r).indexOf(e),this.variableMap_[r].splice(e,1)},Blockly.VariableMap.prototype.createVariable=function(e,t,n){var o=this.getVariable(e,t);if(o){if(n&&o.getId()!=n)throw Error('Variable "'+e+'" is already in use and its id is "'+o.getId()+'" which conflicts with the passed in id, "'+n+'".');return o}if(n&&this.getVariableById(n))throw Error('Variable id, "'+n+'", is already in use.');return n=n||Blockly.utils.genUid(),t=t||"",o=new Blockly.VariableModel(this.workspace,e,t,n),this.variableMap_[t]?this.variableMap_[t].push(o):this.variableMap_[t]=[o],o},Blockly.VariableMap.prototype.deleteVariable=function(e){for(var t,n=this.variableMap_[e.type],o=0;t=n[o];o++)if(t.getId()==e.getId()){n.splice(o,1),Blockly.Events.fire(new Blockly.Events.VarDelete(e));break}},Blockly.VariableMap.prototype.deleteVariableById=function(e){var t=this.getVariableById(e);if(t){var n,o=t.name,r=this.getVariableUsesById(e);for(e=0;n=r[e];e++)if("procedures_defnoreturn"==n.type||"procedures_defreturn"==n.type)return e=n.getFieldValue("NAME"),o=Blockly.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",e),void Blockly.alert(o);var i=this;1<r.length?(o=Blockly.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(r.length)).replace("%2",o),Blockly.confirm(o,function(e){e&&i.deleteVariableInternal_(t,r)})):i.deleteVariableInternal_(t,r)}else console.warn("Can't delete non-existent variable: "+e)},Blockly.VariableMap.prototype.deleteVariableInternal_=function(e,t){var n=Blockly.Events.getGroup();n||Blockly.Events.setGroup(!0);try{for(var o=0;o<t.length;o++)t[o].dispose(!0,!1);this.deleteVariable(e)}finally{n||Blockly.Events.setGroup(!1)}},Blockly.VariableMap.prototype.getVariable=function(e,t){var n=this.variableMap_[t||""];if(n)for(var o,r=0;o=n[r];r++)if(Blockly.Names.equals(o.name,e))return o;return null},Blockly.VariableMap.prototype.getVariableById=function(e){for(var t=Object.keys(this.variableMap_),n=0;n<t.length;n++)for(var o,r=t[n],i=0;o=this.variableMap_[r][i];i++)if(o.getId()==e)return o;return null},Blockly.VariableMap.prototype.getVariablesOfType=function(e){return(e=this.variableMap_[e||""])?e.slice():[]},Blockly.VariableMap.prototype.getVariableTypes=function(){for(var e=Object.keys(this.variableMap_),t=!1,n=0;n<e.length;n++)""==e[n]&&(t=!0);return t||e.push(""),e},Blockly.VariableMap.prototype.getAllVariables=function(){for(var e=[],t=Object.keys(this.variableMap_),n=0;n<t.length;n++)e=e.concat(this.variableMap_[t[n]]);return e},Blockly.VariableMap.prototype.getVariableUsesById=function(e){for(var t=[],n=this.workspace.getAllBlocks(),o=0;o<n.length;o++){var r=n[o].getVarModels();if(r)for(var i=0;i<r.length;i++)r[i].getId()==e&&t.push(n[o])}return t},Blockly.Events.BlockBase=function(e){Blockly.Events.BlockBase.superClass_.constructor.call(this),this.blockId=e.id,this.workspaceId=e.workspace.id},goog.inherits(Blockly.Events.BlockBase,Blockly.Events.Abstract),Blockly.Events.BlockBase.prototype.toJson=function(){var e=Blockly.Events.BlockBase.superClass_.toJson.call(this);return e.blockId=this.blockId,e},Blockly.Events.BlockBase.prototype.fromJson=function(e){Blockly.Events.BlockBase.superClass_.toJson.call(this),this.blockId=e.blockId},Blockly.Events.Change=function(e,t,n,o,r){e&&(Blockly.Events.Change.superClass_.constructor.call(this,e),this.element=t,this.name=n,this.oldValue=o,this.newValue=r)},goog.inherits(Blockly.Events.Change,Blockly.Events.BlockBase),Blockly.Events.BlockChange=Blockly.Events.Change,Blockly.Events.Change.prototype.type=Blockly.Events.CHANGE,Blockly.Events.Change.prototype.toJson=function(){var e=Blockly.Events.Change.superClass_.toJson.call(this);return e.element=this.element,this.name&&(e.name=this.name),e.newValue=this.newValue,e},Blockly.Events.Change.prototype.fromJson=function(e){Blockly.Events.Change.superClass_.fromJson.call(this,e),this.element=e.element,this.name=e.name,this.newValue=e.newValue},Blockly.Events.Change.prototype.isNull=function(){return this.oldValue==this.newValue},Blockly.Events.Change.prototype.run=function(e){var t=this.getEventWorkspace_().getBlockById(this.blockId);if(t)switch(t.mutator&&t.mutator.setVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(t=t.getField(this.name))?(t.callValidator(e),t.setValue(e)):console.warn("Can't set non-existent field: "+this.name);break;case"comment":t.setCommentText(e||null);break;case"collapsed":t.setCollapsed(e);break;case"disabled":t.setDisabled(e);break;case"inline":t.setInputsInline(e);break;case"mutation":var n="";if(t.mutationToDom&&(n=(n=t.mutationToDom())&&Blockly.Xml.domToText(n)),t.domToMutation){e=e||"<mutation></mutation>";var o=Blockly.Xml.textToDom("<xml>"+e+"</xml>");t.domToMutation(o.firstChild)}Blockly.Events.fire(new Blockly.Events.Change(t,"mutation",null,n,e));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},Blockly.Events.Create=function(e){e&&(Blockly.Events.Create.superClass_.constructor.call(this,e),this.xml=e.workspace.rendered?Blockly.Xml.blockToDomWithXY(e):Blockly.Xml.blockToDom(e),this.ids=Blockly.Events.getDescendantIds_(e))},goog.inherits(Blockly.Events.Create,Blockly.Events.BlockBase),Blockly.Events.BlockCreate=Blockly.Events.Create,Blockly.Events.Create.prototype.type=Blockly.Events.CREATE,Blockly.Events.Create.prototype.toJson=function(){var e=Blockly.Events.Create.superClass_.toJson.call(this);return e.xml=Blockly.Xml.domToText(this.xml),e.ids=this.ids,e},Blockly.Events.Create.prototype.fromJson=function(e){Blockly.Events.Create.superClass_.fromJson.call(this,e),this.xml=Blockly.Xml.textToDom("<xml>"+e.xml+"</xml>").firstChild,this.ids=e.ids},Blockly.Events.Create.prototype.run=function(e){var t=this.getEventWorkspace_();if(e)(e=goog.dom.createDom("xml")).appendChild(this.xml),Blockly.Xml.domToWorkspace(e,t);else{e=0;for(var n;n=this.ids[e];e++){var o=t.getBlockById(n);o?o.dispose(!1,!1):n==this.blockId&&console.warn("Can't uncreate non-existent block: "+n)}}},Blockly.Events.Delete=function(e){if(e){if(e.getParent())throw"Connected blocks cannot be deleted.";Blockly.Events.Delete.superClass_.constructor.call(this,e),this.oldXml=e.workspace.rendered?Blockly.Xml.blockToDomWithXY(e):Blockly.Xml.blockToDom(e),this.ids=Blockly.Events.getDescendantIds_(e)}},goog.inherits(Blockly.Events.Delete,Blockly.Events.BlockBase),Blockly.Events.BlockDelete=Blockly.Events.Delete,Blockly.Events.Delete.prototype.type=Blockly.Events.DELETE,Blockly.Events.Delete.prototype.toJson=function(){var e=Blockly.Events.Delete.superClass_.toJson.call(this);return e.ids=this.ids,e},Blockly.Events.Delete.prototype.fromJson=function(e){Blockly.Events.Delete.superClass_.fromJson.call(this,e),this.ids=e.ids},Blockly.Events.Delete.prototype.run=function(e){var t=this.getEventWorkspace_();if(e){e=0;for(var n;n=this.ids[e];e++){var o=t.getBlockById(n);o?o.dispose(!1,!1):n==this.blockId&&console.warn("Can't delete non-existent block: "+n)}}else(e=goog.dom.createDom("xml")).appendChild(this.oldXml),Blockly.Xml.domToWorkspace(e,t)},Blockly.Events.Move=function(e){e&&(Blockly.Events.Move.superClass_.constructor.call(this,e),e=this.currentLocation_(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)},goog.inherits(Blockly.Events.Move,Blockly.Events.BlockBase),Blockly.Events.BlockMove=Blockly.Events.Move,Blockly.Events.Move.prototype.type=Blockly.Events.MOVE,Blockly.Events.Move.prototype.toJson=function(){var e=Blockly.Events.Move.superClass_.toJson.call(this);return this.newParentId&&(e.newParentId=this.newParentId),this.newInputName&&(e.newInputName=this.newInputName),this.newCoordinate&&(e.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),e},Blockly.Events.Move.prototype.fromJson=function(e){Blockly.Events.Move.superClass_.fromJson.call(this,e),this.newParentId=e.newParentId,this.newInputName=e.newInputName,e.newCoordinate&&(e=e.newCoordinate.split(","),this.newCoordinate=new goog.math.Coordinate(parseFloat(e[0]),parseFloat(e[1])))},Blockly.Events.Move.prototype.recordNew=function(){var e=this.currentLocation_();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate},Blockly.Events.Move.prototype.currentLocation_=function(){var e=Blockly.Workspace.getById(this.workspaceId).getBlockById(this.blockId),t={},n=e.getParent();return n?(t.parentId=n.id,(e=n.getInputWithBlock(e))&&(t.inputName=e.name)):t.coordinate=e.getRelativeToSurfaceXY(),t},Blockly.Events.Move.prototype.isNull=function(){return this.oldParentId==this.newParentId&&this.oldInputName==this.newInputName&&goog.math.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},Blockly.Events.Move.prototype.run=function(e){var t=this.getEventWorkspace_(),n=t.getBlockById(this.blockId);if(n){var o=e?this.newParentId:this.oldParentId,r=e?this.newInputName:this.oldInputName;e=e?this.newCoordinate:this.oldCoordinate;var i=null;if(o&&!(i=t.getBlockById(o)))return void console.warn("Can't connect to non-existent block: "+o);if(n.getParent()&&n.unplug(),e)r=n.getRelativeToSurfaceXY(),n.moveBy(e.x-r.x,e.y-r.y);else{if(n=n.outputConnection||n.previousConnection,r){if(t=i.getInput(r))var a=t.connection}else n.type==Blockly.PREVIOUS_STATEMENT&&(a=i.nextConnection);a?n.connect(a):console.warn("Can't connect to non-existent input: "+r)}}else console.warn("Can't move non-existent block: "+this.blockId)},Blockly.Events.CommentBase=function(e){this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=Blockly.Events.group_,this.recordUndo=Blockly.Events.recordUndo},goog.inherits(Blockly.Events.CommentBase,Blockly.Events.Abstract),Blockly.Events.CommentBase.prototype.toJson=function(){var e={type:this.type};return this.group&&(e.group=this.group),this.commentId&&(e.commentId=this.commentId),e},Blockly.Events.CommentBase.prototype.fromJson=function(e){this.commentId=e.commentId,this.group=e.group},Blockly.Events.CommentChange=function(e,t,n){e&&(Blockly.Events.CommentChange.superClass_.constructor.call(this,e),this.oldContents_=t,this.newContents_=n)},goog.inherits(Blockly.Events.CommentChange,Blockly.Events.CommentBase),Blockly.Events.CommentChange.prototype.type=Blockly.Events.COMMENT_CHANGE,Blockly.Events.CommentChange.prototype.toJson=function(){var e=Blockly.Events.CommentChange.superClass_.toJson.call(this);return e.newContents=this.newContents_,e},Blockly.Events.CommentChange.prototype.fromJson=function(e){Blockly.Events.CommentChange.superClass_.fromJson.call(this,e),this.newContents_=e.newValue},Blockly.Events.CommentChange.prototype.isNull=function(){return this.oldContents_==this.newContents_},Blockly.Events.CommentChange.prototype.run=function(e){var t=this.getEventWorkspace_().getCommentById(this.commentId);t?t.setContent(e?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},Blockly.Events.CommentCreate=function(e){e&&(Blockly.Events.CommentCreate.superClass_.constructor.call(this,e),this.xml=e.toXmlWithXY())},goog.inherits(Blockly.Events.CommentCreate,Blockly.Events.CommentBase),Blockly.Events.CommentCreate.prototype.type=Blockly.Events.COMMENT_CREATE,Blockly.Events.CommentCreate.prototype.toJson=function(){var e=Blockly.Events.CommentCreate.superClass_.toJson.call(this);return e.xml=Blockly.Xml.domToText(this.xml),e},Blockly.Events.CommentCreate.prototype.fromJson=function(e){Blockly.Events.CommentCreate.superClass_.fromJson.call(this,e),this.xml=Blockly.Xml.textToDom("<xml>"+e.xml+"</xml>").firstChild},Blockly.Events.CommentCreate.prototype.run=function(e){var t=this.getEventWorkspace_();e?((e=goog.dom.createDom("xml")).appendChild(this.xml),Blockly.Xml.domToWorkspace(e,t)):(t=t.getCommentById(this.commentId))?t.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+this.commentId)},Blockly.Events.CommentDelete=function(e){e&&(Blockly.Events.CommentDelete.superClass_.constructor.call(this,e),this.xml=e.toXmlWithXY())},goog.inherits(Blockly.Events.CommentDelete,Blockly.Events.CommentBase),Blockly.Events.CommentDelete.prototype.type=Blockly.Events.COMMENT_DELETE,Blockly.Events.CommentDelete.prototype.toJson=function(){return Blockly.Events.CommentDelete.superClass_.toJson.call(this)},Blockly.Events.CommentDelete.prototype.fromJson=function(e){Blockly.Events.CommentDelete.superClass_.fromJson.call(this,e)},Blockly.Events.CommentDelete.prototype.run=function(e){var t=this.getEventWorkspace_();e?(t=t.getCommentById(this.commentId))?t.dispose(!1,!1):console.warn("Can't uncreate non-existent comment: "+this.commentId):((e=goog.dom.createDom("xml")).appendChild(this.xml),Blockly.Xml.domToWorkspace(e,t))},Blockly.Events.CommentMove=function(e){e&&(Blockly.Events.Move.superClass_.constructor.call(this,e),this.comment_=e,this.oldCoordinate_=e.getXY(),this.newCoordinate_=null)},goog.inherits(Blockly.Events.CommentMove,Blockly.Events.CommentBase),Blockly.Events.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},Blockly.Events.CommentMove.prototype.type=Blockly.Events.COMMENT_MOVE,Blockly.Events.CommentMove.prototype.setOldCoordinate=function(e){this.oldCoordinate_=e},Blockly.Events.CommentMove.prototype.toJson=function(){var e=Blockly.Events.CommentMove.superClass_.toJson.call(this);return this.newCoordinate_&&(e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),e},Blockly.Events.CommentMove.prototype.fromJson=function(e){Blockly.Events.CommentMove.superClass_.fromJson.call(this,e),e.newCoordinate&&(e=e.newCoordinate.split(","),this.newCoordinate_=new goog.math.Coordinate(parseFloat(e[0]),parseFloat(e[1])))},Blockly.Events.CommentMove.prototype.isNull=function(){return goog.math.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},Blockly.Events.CommentMove.prototype.run=function(e){var t=this.getEventWorkspace_().getCommentById(this.commentId);if(t){e=e?this.newCoordinate_:this.oldCoordinate_;var n=t.getXY();t.moveBy(e.x-n.x,e.y-n.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},Blockly.WorkspaceComment=function(e,t,n,o,r){this.id=r&&!e.getCommentById(r)?r:Blockly.utils.genUid(),e.addCommentById(this),e.addTopComment(this),this.xy_=new goog.math.Coordinate(0,0),this.height_=n,this.width_=o,this.workspace=e,this.RTL=e.RTL,this.editable_=this.movable_=this.deletable_=!0,this.content_=t,this.isComment=!0,Blockly.WorkspaceComment.fireCreateEvent(this)},Blockly.WorkspaceComment.prototype.data=null,Blockly.WorkspaceComment.prototype.dispose=function(){this.workspace&&(Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.CommentDelete(this)),this.workspace.removeTopComment(this),this.workspace.removeCommentById(this.id),this.workspace=null)},Blockly.WorkspaceComment.prototype.getHeight=function(){return this.height_},Blockly.WorkspaceComment.prototype.setHeight=function(e){this.height_=e},Blockly.WorkspaceComment.prototype.getWidth=function(){return this.width_},Blockly.WorkspaceComment.prototype.setWidth=function(e){this.width_=e},Blockly.WorkspaceComment.prototype.getXY=function(){return this.xy_.clone()},Blockly.WorkspaceComment.prototype.moveBy=function(e,t){var n=new Blockly.Events.CommentMove(this);this.xy_.translate(e,t),n.recordNew(),Blockly.Events.fire(n)},Blockly.WorkspaceComment.prototype.getHeight=function(){return this.height_},Blockly.WorkspaceComment.prototype.setHeight=function(e){this.height_=e},Blockly.WorkspaceComment.prototype.getWidth=function(){return this.width_},Blockly.WorkspaceComment.prototype.setWidth=function(e){this.width_=e},Blockly.WorkspaceComment.prototype.isDeletable=function(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.WorkspaceComment.prototype.setDeletable=function(e){this.deletable_=e},Blockly.WorkspaceComment.prototype.isMovable=function(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.WorkspaceComment.prototype.setMovable=function(e){this.movable_=e},Blockly.WorkspaceComment.prototype.isEditable=function(){return this.editable_},Blockly.WorkspaceComment.prototype.setEditable=function(e){this.editable_=e},Blockly.WorkspaceComment.prototype.getContent=function(){return this.content_},Blockly.WorkspaceComment.prototype.setContent=function(e){this.content_!=e&&(Blockly.Events.fire(new Blockly.Events.CommentChange(this,this.content_,e)),this.content_=e)},Blockly.WorkspaceComment.prototype.getRelativeToSurfaceXY=function(){return this.xy_},Blockly.WorkspaceComment.prototype.toXmlWithXY=function(e){return(e=this.toXml(e)).setAttribute("x",Math.round(this.xy_.x)),e.setAttribute("y",Math.round(this.xy_.y)),e.setAttribute("h",this.height_),e.setAttribute("w",this.width_),e},Blockly.WorkspaceComment.prototype.toXml=function(e){var t=goog.dom.createDom("comment");return e||t.setAttribute("id",this.id),t.textContent=this.getContent(),this.data&&t.setAttribute("data",this.data),t},Blockly.WorkspaceComment.fireCreateEvent=function(e){if(Blockly.Events.isEnabled()){var t=Blockly.Events.getGroup();t||Blockly.Events.setGroup(!0);try{Blockly.Events.fire(new Blockly.Events.CommentCreate(e))}finally{t||Blockly.Events.setGroup(!1)}}},Blockly.WorkspaceComment.fromXml=function(e,t){var n=Blockly.WorkspaceComment.parseAttributes(e);(n=new Blockly.WorkspaceComment(t,n.content,n.h,n.w,n.id)).data=e.getAttribute("data");var o=parseInt(e.getAttribute("x"),10),r=parseInt(e.getAttribute("y"),10);return isNaN(o)||isNaN(r)||n.moveBy(o,r),Blockly.WorkspaceComment.fireCreateEvent(n),n},Blockly.WorkspaceComment.parseAttributes=function(e){var t=e.getAttribute("h"),n=e.getAttribute("w");return{id:e.getAttribute("id"),h:t?parseInt(t,10):100,w:n?parseInt(n,10):100,x:parseInt(e.getAttribute("x"),10),y:parseInt(e.getAttribute("y"),10),content:e.textContent}},Blockly.Workspace=function(e){this.id=Blockly.utils.genUid(),(Blockly.Workspace.WorkspaceDB_[this.id]=this).options=e||{},this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.tapListeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.variableMap_=new Blockly.VariableMap(this),this.potentialVariableMap_=null},Blockly.Workspace.prototype.rendered=!1,Blockly.Workspace.prototype.MAX_UNDO=1024,Blockly.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete Blockly.Workspace.WorkspaceDB_[this.id]},Blockly.Workspace.SCAN_ANGLE=3,Blockly.Workspace.prototype.addTopBlock=function(e){this.topBlocks_.push(e)},Blockly.Workspace.prototype.removeTopBlock=function(e){if(!goog.array.remove(this.topBlocks_,e))throw"Block not present in workspace's list of top-most blocks."},Blockly.Workspace.prototype.getTopBlocks=function(e){var t=[].concat(this.topBlocks_);if(e&&1<t.length){var r=Math.sin(goog.math.toRadians(Blockly.Workspace.SCAN_ANGLE));this.RTL&&(r*=-1),t.sort(function(e,t){var n=e.getRelativeToSurfaceXY(),o=t.getRelativeToSurfaceXY();return n.y+r*n.x-(o.y+r*o.x)})}return t},Blockly.Workspace.prototype.addTopComment=function(e){this.topComments_.push(e)},Blockly.Workspace.prototype.removeTopComment=function(e){if(!goog.array.remove(this.topComments_,e))throw"Comment not present in workspace's list of top-most comments."},Blockly.Workspace.prototype.getTopComments=function(e){var t=[].concat(this.topComments_);if(e&&1<t.length){var r=Math.sin(goog.math.toRadians(Blockly.Workspace.SCAN_ANGLE));this.RTL&&(r*=-1),t.sort(function(e,t){var n=e.getRelativeToSurfaceXY(),o=t.getRelativeToSurfaceXY();return n.y+r*n.x-(o.y+r*o.x)})}return t},Blockly.Workspace.prototype.getAllBlocks=function(e){if(e){e=this.getTopBlocks(!0);for(var t=[],n=0;n<e.length;n++)t.push.apply(t,e[n].getDescendants(!0))}else for(t=this.getTopBlocks(!1),n=0;n<t.length;n++)t.push.apply(t,t[n].getChildren(!1));return t},Blockly.Workspace.prototype.clear=function(){var e=Blockly.Events.getGroup();for(e||Blockly.Events.setGroup(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose();for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose();e||Blockly.Events.setGroup(!1),this.variableMap_.clear(),Blockly.DropDownDiv&&Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.WidgetDiv&&Blockly.WidgetDiv.hide(!0),this.potentialVariableMap_&&this.potentialVariableMap_.clear()},Blockly.Workspace.prototype.renameVariableById=function(e,t){this.variableMap_.renameVariableById(e,t)},Blockly.Workspace.prototype.createVariable=function(e,t,n){return this.variableMap_.createVariable(e,t,n)},Blockly.Workspace.prototype.getVariableUsesById=function(e){return this.variableMap_.getVariableUsesById(e)},Blockly.Workspace.prototype.deleteVariableById=function(e){this.variableMap_.deleteVariableById(e)},Blockly.Workspace.prototype.deleteVariableInternal_=function(e,t){this.variableMap_.deleteVariableInternal_(e,t)},Blockly.Workspace.prototype.variableIndexOf=function(e){return console.warn("Deprecated call to Blockly.Workspace.prototype.variableIndexOf"),-1},Blockly.Workspace.prototype.getVariable=function(e,t){return this.variableMap_.getVariable(e,t)},Blockly.Workspace.prototype.getVariableById=function(e){return this.variableMap_.getVariableById(e)},Blockly.Workspace.prototype.getVariablesOfType=function(e){return this.variableMap_.getVariablesOfType(e)},Blockly.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes()},Blockly.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},Blockly.Workspace.prototype.getWidth=function(){return 0},Blockly.Workspace.prototype.newBlock=function(e,t){return new Blockly.Block(this,e,t)},Blockly.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks().length},Blockly.Workspace.prototype.undo=function(e){var t=e?this.redoStack_:this.undoStack_,n=e?this.undoStack_:this.redoStack_,o=t.pop();if(o){for(var r=[o];t.length&&o.group&&o.group==t[t.length-1].group;)r.push(t.pop());for(t=0;o=r[t];t++)n.push(o);r=Blockly.Events.filter(r,e),Blockly.Events.recordUndo=!1;try{for(t=0;o=r[t];t++)o.run(e)}finally{Blockly.Events.recordUndo=!0}}},Blockly.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,Blockly.Events.clearPendingUndo()},Blockly.Workspace.prototype.hasRedoStack=function(){return 0!=this.redoStack_.length},Blockly.Workspace.prototype.hasUndoStack=function(){return 0!=this.undoStack_.length},Blockly.Workspace.prototype.addChangeListener=function(e){return this.listeners_.push(e),e},Blockly.Workspace.prototype.removeChangeListener=function(e){goog.array.remove(this.listeners_,e)},Blockly.Workspace.prototype.fireChangeListener=function(e){e.recordUndo&&(this.undoStack_.push(e),this.redoStack_.length=0,this.undoStack_.length>this.MAX_UNDO&&this.undoStack_.unshift());for(var t,n=this.listeners_.slice(),o=0;t=n[o];o++)t(e)},Blockly.Workspace.prototype.getBlockById=function(e){var t=this.blockDB_[e];return!t&&this.getFlyout()&&this.getFlyout().getWorkspace()&&(t=this.getFlyout().getWorkspace().blockDB_[e]),t||null},Blockly.Workspace.prototype.getFlyout=function(){return null},Blockly.Workspace.prototype.getCommentById=function(e){return this.commentDB_[e]||null},Blockly.Workspace.prototype.addCommentById=function(e){this.commentDB_[e.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB_[e.id]=e},Blockly.Workspace.prototype.removeCommentById=function(e){delete this.commentDB_[e]},Blockly.Workspace.prototype.allInputsFilled=function(e){for(var t,n=this.getTopBlocks(!1),o=0;t=n[o];o++)if(!t.allInputsFilled(e))return!1;return!0},Blockly.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},Blockly.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new Blockly.VariableMap(this)},Blockly.Workspace.prototype.getVariableMap=function(){return this.variableMap_},Blockly.Workspace.WorkspaceDB_=Object.create(null),Blockly.Workspace.getById=function(e){return Blockly.Workspace.WorkspaceDB_[e]||null},Blockly.Workspace.prototype.clear=Blockly.Workspace.prototype.clear,Blockly.Workspace.prototype.clearUndo=Blockly.Workspace.prototype.clearUndo,Blockly.Workspace.prototype.addChangeListener=Blockly.Workspace.prototype.addChangeListener,Blockly.Workspace.prototype.removeChangeListener=Blockly.Workspace.prototype.removeChangeListener,Blockly.Bubble=function(e,t,n,o,r,i){this.workspace_=e,this.content_=t,this.shape_=n,n=Blockly.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(n=-n),this.arrow_radians_=goog.math.toRadians(n),e.getBubbleCanvas().appendChild(this.createDom_(t,!(!r||!i))),this.setAnchorLocation(o),r&&i||(r=(t=this.content_.getBBox()).width+2*Blockly.Bubble.BORDER_WIDTH,i=t.height+2*Blockly.Bubble.BORDER_WIDTH),this.setBubbleSize(r,i),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0,e.options.readOnly||(Blockly.bindEventWithChecks_(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&Blockly.bindEventWithChecks_(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))},Blockly.Bubble.BORDER_WIDTH=6,Blockly.Bubble.BORDER_RADIUS=0,Blockly.Bubble.ARROW_THICKNESS=5,Blockly.Bubble.ARROW_ANGLE=20,Blockly.Bubble.ARROW_BEND=4,Blockly.Bubble.ANCHOR_RADIUS=8,Blockly.Bubble.onMouseUpWrapper_=null,Blockly.Bubble.onMouseMoveWrapper_=null,Blockly.Bubble.prototype.resizeCallback_=null,Blockly.Bubble.unbindDragEvents_=function(){Blockly.Bubble.onMouseUpWrapper_&&(Blockly.unbindEvent_(Blockly.Bubble.onMouseUpWrapper_),Blockly.Bubble.onMouseUpWrapper_=null),Blockly.Bubble.onMouseMoveWrapper_&&(Blockly.unbindEvent_(Blockly.Bubble.onMouseMoveWrapper_),Blockly.Bubble.onMouseMoveWrapper_=null)},Blockly.Bubble.bubbleMouseUp_=function(){Blockly.Touch.clearTouchIdentifier(),Blockly.Bubble.unbindDragEvents_()},Blockly.Bubble.prototype.rendered_=!1,Blockly.Bubble.prototype.anchorXY_=null,Blockly.Bubble.prototype.relativeLeft_=0,Blockly.Bubble.prototype.relativeTop_=0,Blockly.Bubble.prototype.width_=0,Blockly.Bubble.prototype.height_=0,Blockly.Bubble.prototype.autoLayout_=!0,Blockly.Bubble.prototype.createDom_=function(e,t){this.bubbleGroup_=Blockly.utils.createSvgElement("g",{},null);var n={filter:"url(#"+this.workspace_.options.embossFilterId+")"};return-1!=goog.userAgent.getUserAgentString().indexOf("JavaFX")&&(n={}),n=Blockly.utils.createSvgElement("g",n,this.bubbleGroup_),this.bubbleArrow_=Blockly.utils.createSvgElement("path",{},n),this.bubbleBack_=Blockly.utils.createSvgElement("rect",{class:"blocklyDraggable",x:0,y:0,rx:Blockly.Bubble.BORDER_RADIUS,ry:Blockly.Bubble.BORDER_RADIUS},n),this.bubbleGroup_.appendChild(e),t?(this.resizeGroup_=Blockly.utils.createSvgElement("g",{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),n=2*Blockly.Bubble.BORDER_WIDTH,Blockly.utils.createSvgElement("polygon",{points:"0,x x,x x,0".replace(/x/g,n.toString())},this.resizeGroup_),Blockly.utils.createSvgElement("line",{class:"blocklyResizeLine",x1:n/3,y1:n-1,x2:n-1,y2:n/3},this.resizeGroup_),Blockly.utils.createSvgElement("line",{class:"blocklyResizeLine",x1:2*n/3,y1:n-1,x2:n-1,y2:2*n/3},this.resizeGroup_)):this.resizeGroup_=null,this.bubbleGroup_},Blockly.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},Blockly.Bubble.prototype.setSvgId=function(e){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=e)},Blockly.Bubble.prototype.bubbleMouseDown_=function(e){var t=this.workspace_.getGesture(e);t&&t.handleBubbleStart(e,this)},Blockly.Bubble.prototype.showContextMenu_=function(){},Blockly.Bubble.prototype.isDeletable=function(){return!1},Blockly.Bubble.prototype.resizeMouseDown_=function(e){this.promote_(),Blockly.Bubble.unbindDragEvents_(),Blockly.utils.isRightButton(e)||(this.workspace_.startDrag(e,new goog.math.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),Blockly.Bubble.onMouseUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",this,Blockly.Bubble.bubbleMouseUp_),Blockly.Bubble.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",this,this.resizeMouseMove_),Blockly.hideChaff()),e.stopPropagation()},Blockly.Bubble.prototype.resizeMouseMove_=function(e){this.autoLayout_=!1,e=this.workspace_.moveDrag(e),this.setBubbleSize(this.workspace_.RTL?-e.x:e.x,e.y),this.workspace_.RTL&&this.positionBubble_()},Blockly.Bubble.prototype.registerResizeEvent=function(e){this.resizeCallback_=e},Blockly.Bubble.prototype.promote_=function(){var e=this.bubbleGroup_.parentNode;return e.lastChild!==this.bubbleGroup_&&(e.appendChild(this.bubbleGroup_),!0)},Blockly.Bubble.prototype.setAnchorLocation=function(e){this.anchorXY_=e,this.rendered_&&this.positionBubble_()},Blockly.Bubble.prototype.layoutBubble_=function(){var e=-this.width_/4,t=-this.height_-Blockly.BlockSvg.MIN_BLOCK_Y,n=this.workspace_.getMetrics();n.viewWidth/=this.workspace_.scale,n.viewLeft/=this.workspace_.scale;var o=this.anchorXY_.x;this.workspace_.RTL?o-n.viewLeft-e-this.width_<Blockly.Scrollbar.scrollbarThickness?e=o-n.viewLeft-this.width_-Blockly.Scrollbar.scrollbarThickness:o-n.viewLeft-e>n.viewWidth&&(e=o-n.viewLeft-n.viewWidth):o+e<n.viewLeft?e=n.viewLeft-o:n.viewLeft+n.viewWidth<o+e+this.width_+Blockly.BlockSvg.SEP_SPACE_X+Blockly.Scrollbar.scrollbarThickness&&(e=n.viewLeft+n.viewWidth-o-this.width_-Blockly.Scrollbar.scrollbarThickness),this.anchorXY_.y+t<n.viewTop&&(t=this.shape_.getBBox().height),this.relativeLeft_=e,this.relativeTop_=t},Blockly.Bubble.prototype.positionBubble_=function(){var e=this.anchorXY_.x;e=this.workspace_.RTL?e-(this.relativeLeft_+this.width_):e+this.relativeLeft_,this.moveTo(e,this.relativeTop_+this.anchorXY_.y)},Blockly.Bubble.prototype.moveTo=function(e,t){this.bubbleGroup_.setAttribute("transform","translate("+e+","+t+")")},Blockly.Bubble.prototype.getBubbleSize=function(){return{width:this.width_,height:this.height_}},Blockly.Bubble.prototype.setBubbleSize=function(e,t){var n=2*Blockly.Bubble.BORDER_WIDTH;e=Math.max(e,n+45),t=Math.max(t,n+20),this.width_=e,this.height_=t,this.bubbleBack_.setAttribute("width",e),this.bubbleBack_.setAttribute("height",t),this.resizeGroup_&&(this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+2*Blockly.Bubble.BORDER_WIDTH+","+(t-n)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(e-n)+","+(t-n)+")")),this.rendered_&&(this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_()),this.resizeCallback_&&this.resizeCallback_()},Blockly.Bubble.prototype.renderArrow_=function(){var e=[],t=this.width_/2,n=this.height_/2,o=-this.relativeLeft_,r=-this.relativeTop_;if(t==o&&n==r)e.push("M "+t+","+n);else{r-=n,o-=t,this.workspace_.RTL&&(o*=-1);var i=Math.sqrt(r*r+o*o),a=Math.acos(o/i);r<0&&(a=2*Math.PI-a);var s=a+Math.PI/2;s>2*Math.PI&&(s-=2*Math.PI);var l=Math.sin(s),c=Math.cos(s),u=this.getBubbleSize();s=(u.width+u.height)/Blockly.Bubble.ARROW_THICKNESS,s=Math.min(s,u.width,u.height)/4,o=t+(u=1-Blockly.Bubble.ANCHOR_RADIUS/i)*o,r=n+u*r,u=t+s*c;var g=n+s*l;t-=s*c,n-=s*l,(l=a+this.arrow_radians_)>2*Math.PI&&(l-=2*Math.PI),a=Math.sin(l)*i/Blockly.Bubble.ARROW_BEND,i=Math.cos(l)*i/Blockly.Bubble.ARROW_BEND,e.push("M"+u+","+g),e.push("C"+(u+i)+","+(g+a)+" "+o+","+r+" "+o+","+r),e.push("C"+o+","+r+" "+(t+i)+","+(n+a)+" "+t+","+n)}e.push("z"),this.bubbleArrow_.setAttribute("d",e.join(" "))},Blockly.Bubble.prototype.setColour=function(e){this.bubbleBack_.setAttribute("fill",e),this.bubbleArrow_.setAttribute("fill",e)},Blockly.Bubble.prototype.dispose=function(){Blockly.Bubble.unbindDragEvents_(),goog.dom.removeNode(this.bubbleGroup_),this.shape_=this.content_=this.workspace_=this.resizeGroup_=this.bubbleBack_=this.bubbleArrow_=this.bubbleGroup_=null},Blockly.Bubble.prototype.moveDuringDrag=function(e,t){e?e.translateSurface(t.x,t.y):this.moveTo(t.x,t.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x-this.anchorXY_.x,this.relativeTop_=t.y-this.anchorXY_.y,this.renderArrow_()},Blockly.Bubble.prototype.getRelativeToSurfaceXY=function(){return new goog.math.Coordinate(this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},Blockly.Bubble.prototype.setAutoLayout=function(e){this.autoLayout_=e},Blockly.Events.Ui=function(e,t,n,o){e&&(Blockly.Events.Ui.superClass_.constructor.call(this),this.blockId=e.id,this.workspaceId=e.workspace.id,this.element=t,this.oldValue=n,this.newValue=o,this.recordUndo=!1)},goog.inherits(Blockly.Events.Ui,Blockly.Events.Abstract),Blockly.Events.Ui.prototype.type=Blockly.Events.UI,Blockly.Events.Ui.prototype.toJson=function(){var e=Blockly.Events.Ui.superClass_.toJson.call(this);return e.element=this.element,void 0!==this.newValue&&(e.newValue=this.newValue),this.blockId&&(e.blockId=this.blockId),e},Blockly.Events.Ui.prototype.fromJson=function(e){Blockly.Events.Ui.superClass_.fromJson.call(this,e),this.element=e.element,this.newValue=e.newValue,this.blockId=e.blockId},Blockly.Icon=function(e){this.block_=e},Blockly.Icon.prototype.collapseHidden=!0,Blockly.Icon.prototype.SIZE=25,Blockly.Icon.prototype.bubble_=null,Blockly.Icon.prototype.iconXY_=null,Blockly.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&Blockly.utils.addClass(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),Blockly.bindEventWithChecks_(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},Blockly.Icon.prototype.dispose=function(){goog.dom.removeNode(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},Blockly.Icon.prototype.updateEditable=function(){},Blockly.Icon.prototype.isVisible=function(){return!!this.bubble_},Blockly.Icon.prototype.iconClick_=function(e){this.block_.workspace.isDragging()||this.block_.isInFlyout||Blockly.utils.isRightButton(e)||this.setVisible(!this.isVisible())},Blockly.Icon.prototype.updateColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.getColour())},Blockly.Icon.prototype.renderIcon=function(e){if(this.collapseHidden&&this.block_.isCollapsed())return this.iconGroup_.setAttribute("display","none"),e;this.iconGroup_.setAttribute("display","block");var t=this.SIZE;return this.block_.RTL&&(e-=t),this.iconGroup_.setAttribute("transform","translate("+e+",9),scale(1.4)"),this.computeIconLocation(),this.block_.RTL?e-Blockly.BlockSvg.SEP_SPACE_X:e+(t+Blockly.BlockSvg.SEP_SPACE_X)},Blockly.Icon.prototype.setIconLocation=function(e){this.iconXY_=e,this.isVisible()&&this.bubble_.setAnchorLocation(e)},Blockly.Icon.prototype.computeIconLocation=function(){var e=this.block_.getRelativeToSurfaceXY(),t=Blockly.utils.getRelativeXY(this.iconGroup_);e=new goog.math.Coordinate(e.x+t.x+this.SIZE/2,e.y+t.y+this.SIZE/2),goog.math.Coordinate.equals(this.getIconLocation(),e)||this.setIconLocation(e)},Blockly.Icon.prototype.getIconLocation=function(){return this.iconXY_},Blockly.Comment=function(e){Blockly.Comment.superClass_.constructor.call(this,e),this.createIcon()},goog.inherits(Blockly.Comment,Blockly.Icon),Blockly.Comment.prototype.text_="",Blockly.Comment.prototype.width_=160,Blockly.Comment.prototype.height_=120,Blockly.Comment.prototype.drawIcon_=function(e){Blockly.utils.createSvgElement("path",{class:"blocklyIconShape",d:"m 2,2 0,9.2211 3.0026599,0 1.6008929,1.5989 1.8138195,-1.5989 6.6046683,0 0,-9.2211 -13.0220406,0 z",style:"fill: #fff;"},e),Blockly.utils.createSvgElement("rect",{class:"blocklyIconSymbol",x:"4",y:"8",height:"1",width:"6",style:"fill: #575E75;"},e),Blockly.utils.createSvgElement("rect",{class:"blocklyIconSymbol",x:"4",y:"6",height:"1",width:"6",style:"fill: #575E75;"},e),Blockly.utils.createSvgElement("rect",{class:"blocklyIconSymbol",x:"4",y:"4",height:"1",width:"8",style:"fill: #575E75;"},e)},Blockly.Comment.prototype.createEditor_=function(){return this.svgGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyCommentBubble"},null),this.svgGroup_.translate_="",this.createTextEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.addDeleteDom_(),Blockly.bindEventWithChecks_(this.deleteGroup_,"mousedown",this,this.deleteMouseDown_),Blockly.bindEventWithChecks_(this.deleteGroup_,"mouseout",this,this.deleteMouseOut_),Blockly.bindEventWithChecks_(this.deleteGroup_,"mouseup",this,this.deleteMouseUp_),this.addMinimizeDom_(),Blockly.bindEventWithChecks_(this.minimizeGroup_,"mousedown",this,this.minimizeMouseUp_),this.svgGroup_},Blockly.Comment.prototype.createTextEditor_=function(){this.foreignObject_=Blockly.utils.createSvgElement("foreignObject",{x:Blockly.WorkspaceCommentSvg.BORDER_WIDTH,y:Blockly.WorkspaceCommentSvg.BORDER_WIDTH+Blockly.WorkspaceCommentSvg.TOP_OFFSET},null);var e=document.createElementNS(Blockly.HTML_NS,"body");e.setAttribute("xmlns",Blockly.HTML_NS),e.className="blocklyMinimalBody";var t=document.createElementNS(Blockly.HTML_NS,"textarea");return t.className="blocklyCommentTextarea",t.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),e.appendChild(t),this.textarea_=t,this.foreignObject_.appendChild(e),Blockly.bindEventWithChecks_(t,"mouseup",this,this.textareaFocus_,!0,!0),Blockly.bindEventWithChecks_(t,"blur",this,this.textareaBlur_),Blockly.bindEventWithChecks_(t,"wheel",this,function(e){e.stopPropagation()}),Blockly.bindEventWithChecks_(t,"change",this,function(e){this.text_!=t.value&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this.block_,"comment",null,this.text_,t.value)),this.text_=t.value)}),setTimeout(function(){t.focus()},0),this.addFocus(),this.foreignObject_},Blockly.Comment.prototype.addDeleteDom_=function(){this.deleteGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=Blockly.utils.createSvgElement("rect",{x:"-12.5",y:"1",width:"27.5",height:"27.5",fill:"transparent",class:"blocklyDeleteIconShape"},this.deleteGroup_),Blockly.WorkspaceCommentSvg.drawDeleteIcon(this.deleteGroup_)},Blockly.Comment.prototype.deleteMouseDown_=function(e){Blockly.utils.addClass(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),e.stopPropagation()},Blockly.Comment.prototype.deleteMouseOut_=function(){Blockly.utils.removeClass(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")},Blockly.Comment.prototype.deleteMouseUp_=function(e){this.block_.setCommentText(null),e.stopPropagation()},Blockly.Comment.prototype.addMinimizeDom_=function(){this.minimizeGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyCommentMinimizeIcon"},this.svgGroup_),Blockly.utils.createSvgElement("rect",{x:"2",y:"2",width:"27.5",height:"27.5",class:"blocklyIconShape",style:"fill: transparent; stroke-width: 0px;"},this.minimizeGroup_),Blockly.utils.createSvgElement("path",{d:"m 15,17 c -2.0186301,-1.7939 -4.0372859,-3.5877 -6.0559675,-5.3815 4.0751576,0.011 8.1503148,0.023 12.2254728,0.034 -2.056269,1.7828 -4.112771,3.5653 -6.1695053,5.3475 z",style:"fill: #fff"},this.minimizeGroup_)},Blockly.Comment.prototype.minimizeMouseUp_=function(e){this.block_.comment.setVisible(!1),e.stopPropagation()},Blockly.Comment.prototype.updateEditable=function(){this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)),Blockly.Icon.prototype.updateEditable.call(this)},Blockly.Comment.prototype.resizeBubble_=function(){if(this.isVisible()){var e=this.bubble_.getBubbleSize(),t=2*Blockly.WorkspaceCommentSvg.BORDER_WIDTH,n=Blockly.WorkspaceCommentSvg.TOP_OFFSET;this.foreignObject_.setAttribute("width",e.width-t),this.foreignObject_.setAttribute("height",e.height-t-n),this.textarea_.style.width=e.width-t-4+"px",this.textarea_.style.height=e.height-t-n-4+"px",this.deleteGroup_&&(this.block_.RTL?this.deleteGroup_.setAttribute("transform","translate("+(Blockly.WorkspaceCommentSvg.DELETE_ICON_PADDING+Blockly.WorkspaceCommentSvg.BORDER_WIDTH)+","+Blockly.WorkspaceCommentSvg.BORDER_WIDTH+") scale(-1 1)"):this.deleteGroup_.setAttribute("transform","translate("+(e.width-Blockly.WorkspaceCommentSvg.DELETE_ICON_PADDING-Blockly.WorkspaceCommentSvg.BORDER_WIDTH)+","+Blockly.WorkspaceCommentSvg.BORDER_WIDTH+")"))}},Blockly.Comment.prototype.setVisible=function(e){if(e!=this.isVisible())if(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,"commentOpen",!e,e)),!this.block_.isEditable()&&!this.textarea_||goog.userAgent.IE)Blockly.Warning.prototype.setVisible.call(this,e);else{var t=this.getText(),n=this.getBubbleSize();e?(this.bubble_=new Blockly.Bubble(this.block_.workspace,this.createEditor_(),this.block_.svgPath_,this.iconXY_,this.width_,this.height_),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.resizeBubble_.bind(this)),this.updateColour()):(this.bubble_.dispose(),this.foreignObject_=this.textarea_=this.bubble_=null),this.setText(t),this.setBubbleSize(n.width,n.height)}},Blockly.Comment.prototype.addFocus=function(){Blockly.utils.addClass(this.svgGroup_,"blocklyFocused")},Blockly.Comment.prototype.removeFocus=function(){Blockly.utils.removeClass(this.svgGroup_,"blocklyFocused")},Blockly.Comment.prototype.textareaFocus_=function(e){this.bubble_.promote_()&&this.textarea_.focus(),this.addFocus()},Blockly.Comment.prototype.textareaBlur_=function(e){this.removeFocus()},Blockly.Comment.prototype.getBubbleSize=function(){return this.isVisible()?this.bubble_.getBubbleSize():{width:this.width_,height:this.height_}},Blockly.Comment.prototype.setBubbleSize=function(e,t){this.textarea_?this.bubble_.setBubbleSize(e,t):(this.width_=e,this.height_=t)},Blockly.Comment.prototype.getText=function(){return this.textarea_?this.textarea_.value:this.text_},Blockly.Comment.prototype.setText=function(e){this.text_!=e&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this.block_,"comment",null,this.text_,e)),this.text_=e),this.textarea_&&(this.textarea_.value=e)},Blockly.Comment.prototype.dispose=function(){Blockly.Events.isEnabled()&&this.setText(""),this.block_.comment=null,Blockly.Icon.prototype.dispose.call(this)},Blockly.Connection=function(e,t){this.sourceBlock_=e,this.type=t,e.workspace.connectionDBList&&(this.db_=e.workspace.connectionDBList[t],this.dbOpposite_=e.workspace.connectionDBList[Blockly.OPPOSITE_TYPE[t]],this.hidden_=!this.db_)},Blockly.Connection.CAN_CONNECT=0,Blockly.Connection.REASON_SELF_CONNECTION=1,Blockly.Connection.REASON_WRONG_TYPE=2,Blockly.Connection.REASON_TARGET_NULL=3,Blockly.Connection.REASON_CHECKS_FAILED=4,Blockly.Connection.REASON_DIFFERENT_WORKSPACES=5,Blockly.Connection.REASON_SHADOW_PARENT=6,Blockly.Connection.REASON_CUSTOM_PROCEDURE=7,Blockly.Connection.prototype.targetConnection=null,Blockly.Connection.prototype.check_=null,Blockly.Connection.prototype.shadowDom_=null,Blockly.Connection.prototype.x_=0,Blockly.Connection.prototype.y_=0,Blockly.Connection.prototype.inDB_=!1,Blockly.Connection.prototype.db_=null,Blockly.Connection.prototype.dbOpposite_=null,Blockly.Connection.prototype.hidden_=null,Blockly.Connection.prototype.connect_=function(e){var t,n=this,o=n.getSourceBlock(),r=e.getSourceBlock(),i=!1;if(n==o.getFirstStatementConnection()&&(i=!0),e.isConnected()){if(i)var a=e.targetConnection;e.disconnect()}if(n.isConnected()){var s=n.targetBlock(),l=n.getShadowDom();if(n.setShadowDom(null),s.isShadow())l=Blockly.Xml.blockToDom(s),s.dispose(),s=null;else if(n.type==Blockly.NEXT_STATEMENT){if(!s.previousConnection)throw"Orphan block does not have a previous connection.";for(var c=r;c.nextConnection;){var u=c.getNextBlock();if(!u||u.isShadow()){s.previousConnection.checkType_(c.nextConnection)&&(c.nextConnection.connect(s.previousConnection),s=null);break}c=u}}if(s&&(n.disconnect(),Blockly.Events.recordUndo)){var g=Blockly.Events.getGroup();setTimeout(function(){s.workspace&&!s.getParent()&&(Blockly.Events.setGroup(g),s.outputConnection?s.outputConnection.bumpAwayFrom_(n):s.previousConnection&&s.previousConnection.bumpAwayFrom_(n),Blockly.Events.setGroup(!1))},Blockly.BUMP_DELAY)}n.setShadowDom(l)}i&&a&&a.connect(o.previousConnection),Blockly.Events.isEnabled()&&(t=new Blockly.Events.BlockMove(r)),Blockly.Connection.connectReciprocally_(n,e),r.setParent(o),t&&(t.recordNew(),Blockly.Events.fire(t))},Blockly.Connection.prototype.dispose=function(){if(this.isConnected())throw"Disconnect connection before disposing of it.";this.inDB_&&this.db_.removeConnection_(this),this.dbOpposite_=this.db_=null},Blockly.Connection.prototype.isConnectedToNonInsertionMarker=function(){return this.targetConnection&&!this.targetBlock().isInsertionMarker()},Blockly.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},Blockly.Connection.prototype.isSuperior=function(){return this.type==Blockly.INPUT_VALUE||this.type==Blockly.NEXT_STATEMENT},Blockly.Connection.prototype.isConnected=function(){return!!this.targetConnection},Blockly.Connection.prototype.canConnectWithReason_=function(e){if(!e)return Blockly.Connection.REASON_TARGET_NULL;if(this.isSuperior())var t=this.sourceBlock_,n=e.getSourceBlock();else n=this.sourceBlock_,t=e.getSourceBlock();return t&&t==n?Blockly.Connection.REASON_SELF_CONNECTION:e.type!=Blockly.OPPOSITE_TYPE[this.type]?Blockly.Connection.REASON_WRONG_TYPE:t&&n&&t.workspace!==n.workspace?Blockly.Connection.REASON_DIFFERENT_WORKSPACES:this.checkType_(e)?Blockly.Connection.CAN_CONNECT:Blockly.Connection.REASON_CHECKS_FAILED},Blockly.Connection.prototype.checkConnection_=function(e){switch(this.canConnectWithReason_(e)){case Blockly.Connection.CAN_CONNECT:break;case Blockly.Connection.REASON_SELF_CONNECTION:throw"Attempted to connect a block to itself.";case Blockly.Connection.REASON_DIFFERENT_WORKSPACES:throw"Blocks not on same workspace.";case Blockly.Connection.REASON_WRONG_TYPE:throw"Attempt to connect incompatible types.";case Blockly.Connection.REASON_TARGET_NULL:throw"Target connection is null.";case Blockly.Connection.REASON_CHECKS_FAILED:throw"Connection checks failed. "+this+" expected "+this.check_+", found "+e.check_;case Blockly.Connection.REASON_SHADOW_PARENT:throw"Connecting non-shadow to shadow block.";case Blockly.Connection.REASON_CUSTOM_PROCEDURE:throw"Trying to replace a shadow on a custom procedure definition.";default:throw"Unknown connection failure: this should never happen!"}},Blockly.Connection.prototype.canConnectToPrevious_=function(e){if(this.targetConnection||-1!=Blockly.draggingConnections_.indexOf(e))return!1;var t=this.sourceBlock_.getFirstStatementConnection(),n=this==t,o=this==this.sourceBlock_.nextConnection;return!(null!=t&&!n&&!o)&&(t=null!=this.sourceBlock_.previousConnection,!(!n||!t)||(o||n&&!t?!e.targetConnection||!!(e=e.targetBlock()).isInsertionMarker()&&!e.getPreviousBlock():void 0))},Blockly.Connection.prototype.isConnectionAllowed=function(e){if(e.sourceBlock_.isInsertionMarker()||this.canConnectWithReason_(e)!=Blockly.Connection.CAN_CONNECT)return!1;var t=this.sourceBlock_.getFirstStatementConnection();switch(e.type){case Blockly.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e);case Blockly.OUTPUT_VALUE:return!1;case Blockly.INPUT_VALUE:if(e.targetConnection&&!e.targetBlock().isMovable()&&!e.targetBlock().isShadow())return!1;break;case Blockly.NEXT_STATEMENT:if(t&&this==this.sourceBlock_.previousConnection&&e.isConnectedToNonInsertionMarker()&&!t.targetConnection||e.isConnectedToNonInsertionMarker()&&!this.sourceBlock_.nextConnection&&!e.targetBlock().isShadow()&&e.targetBlock().nextConnection)return!1;break;default:throw"Unknown connection type in isConnectionAllowed"}return-1==Blockly.draggingConnections_.indexOf(e)},Blockly.Connection.prototype.connect=function(e){this.targetConnection!=e&&(this.checkConnection_(e),this.isSuperior()?this.connect_(e):e.connect_(this))},Blockly.Connection.connectReciprocally_=function(e,t){goog.asserts.assert(e&&t,"Cannot connect null connections."),(e.targetConnection=t).targetConnection=e},Blockly.Connection.singleConnection_=function(e,t){for(var n=!1,o=0;o<e.inputList.length;o++){var r=e.inputList[o].connection;if(r&&r.type==Blockly.INPUT_VALUE&&t.outputConnection.checkType_(r)){if(n)return null;n=r}}return n},Blockly.Connection.lastConnectionInRow_=function(e,t){for(var n,o=e;n=Blockly.Connection.singleConnection_(o,t);)if(!(o=n.targetBlock())||o.isShadow())return n;return null},Blockly.Connection.prototype.disconnect=function(){var e=this.targetConnection;if(goog.asserts.assert(e,"Source connection not connected."),goog.asserts.assert(e.targetConnection==this,"Target connection not connected to source connection."),this.isSuperior()){var t=this.sourceBlock_,n=e.getSourceBlock();e=this}else t=e.getSourceBlock(),n=this.sourceBlock_;this.disconnectInternal_(t,n),e.respawnShadow_()},Blockly.Connection.prototype.disconnectInternal_=function(e,t){var n;Blockly.Events.isEnabled()&&(n=new Blockly.Events.BlockMove(t)),this.targetConnection=this.targetConnection.targetConnection=null,t.setParent(null),n&&(n.recordNew(),Blockly.Events.fire(n))},Blockly.Connection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),t=this.getShadowDom();if(e.workspace&&t&&Blockly.Events.recordUndo)if((e=Blockly.Xml.domToBlock(t,e.workspace)).outputConnection)this.connect(e.outputConnection);else{if(!e.previousConnection)throw"Child block does not have output or previous statement.";this.connect(e.previousConnection)}},Blockly.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},Blockly.Connection.prototype.checkType_=function(e){if(!this.check_||!e.check_)return!0;for(var t=0;t<this.check_.length;t++)if(-1!=e.check_.indexOf(this.check_[t]))return!0;return!1},Blockly.Connection.prototype.onCheckChanged_=function(){this.isConnected()&&!this.checkType_(this.targetConnection)&&(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},Blockly.Connection.prototype.setCheck=function(e){return e?(goog.isArray(e)||(e=[e]),this.check_=e,this.onCheckChanged_()):this.check_=null,this},Blockly.Connection.prototype.getOutputShape=function(){return this.check_?-1!==this.check_.indexOf("Boolean")?Blockly.OUTPUT_SHAPE_HEXAGONAL:(-1!==this.check_.indexOf("Number")||this.check_.indexOf("String"),Blockly.OUTPUT_SHAPE_ROUND):Blockly.OUTPUT_SHAPE_ROUND},Blockly.Connection.prototype.setShadowDom=function(e){this.shadowDom_=e},Blockly.Connection.prototype.getShadowDom=function(){return this.shadowDom_},Blockly.Connection.prototype.neighbours_=function(){return[]},Blockly.Connection.prototype.toString=function(){var e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection==this)var t="Output Connection of ";else if(e.previousConnection==this)t="Previous Connection of ";else if(e.nextConnection==this)t="Next Connection of ";else{if(!(t=goog.array.find(e.inputList,function(e){return e.connection==this},this)))return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";t='Input "'+t.name+'" connection on '}return t+e.toDevString()},Blockly.ConnectionDB=function(){},Blockly.ConnectionDB.prototype=[],Blockly.ConnectionDB.constructor=Blockly.ConnectionDB,Blockly.ConnectionDB.prototype.addConnection=function(e){if(e.inDB_)throw"Connection already in database.";if(!e.getSourceBlock().isInFlyout){var t=this.findPositionForConnection_(e);this.splice(t,0,e),e.inDB_=!0}},Blockly.ConnectionDB.prototype.findConnection=function(e){if(!this.length)return-1;var t=this.findPositionForConnection_(e);if(t>=this.length)return-1;for(var n=e.y_,o=t;0<=o&&this[o].y_==n;){if(this[o]==e)return o;o--}for(;t<this.length&&this[t].y_==n;){if(this[t]==e)return t;t++}return-1},Blockly.ConnectionDB.prototype.findPositionForConnection_=function(e){if(!this.length)return 0;for(var t=0,n=this.length;t<n;){var o=Math.floor((t+n)/2);if(this[o].y_<e.y_)t=o+1;else{if(!(this[o].y_>e.y_)){t=o;break}n=o}}return t},Blockly.ConnectionDB.prototype.removeConnection_=function(e){if(!e.inDB_)throw"Connection not in database.";var t=this.findConnection(e);if(-1==t)throw"Unable to find connection in connectionDB.";e.inDB_=!1,this.splice(t,1)},Blockly.ConnectionDB.prototype.getNeighbours=function(e,o){function t(e){var t=i-r[e].x_,n=a-r[e].y_;return Math.sqrt(t*t+n*n)<=o&&c.push(r[e]),n<o}for(var r=this,i=e.x_,a=e.y_,n=0,s=r.length-2,l=s;n<l;)r[l].y_<a?n=l:s=l,l=Math.floor((n+s)/2);var c=[];if(s=n=l,r.length){for(;0<=n&&t(n);)n--;for(;++s<r.length&&t(s););}return c},Blockly.ConnectionDB.prototype.isInYRange_=function(e,t,n){return Math.abs(this[e].y_-t)<=n},Blockly.ConnectionDB.prototype.searchForClosest=function(e,t,n){if(!this.length)return{connection:null,radius:t};var o=e.y_,r=e.x_;e.x_=r+n.x,e.y_=o+n.y;var i=this.findPositionForConnection_(e);n=null;for(var a,s=t,l=i-1;0<=l&&this.isInYRange_(l,e.y_,t);)a=this[l],e.isConnectionAllowed(a,s)&&(s=(n=a).distanceFrom(e)),l--;for(;i<this.length&&this.isInYRange_(i,e.y_,t);)a=this[i],e.isConnectionAllowed(a,s)&&(s=(n=a).distanceFrom(e)),i++;return e.x_=r,e.y_=o,{connection:n,radius:s}},Blockly.ConnectionDB.init=function(e){var t=[];t[Blockly.INPUT_VALUE]=new Blockly.ConnectionDB,t[Blockly.OUTPUT_VALUE]=new Blockly.ConnectionDB,t[Blockly.NEXT_STATEMENT]=new Blockly.ConnectionDB,t[Blockly.PREVIOUS_STATEMENT]=new Blockly.ConnectionDB,e.connectionDBList=t},Blockly.constants={},Blockly.DRAG_RADIUS=3,Blockly.FLYOUT_DRAG_RADIUS=10,Blockly.SNAP_RADIUS=48,Blockly.CONNECTING_SNAP_RADIUS=96,Blockly.CURRENT_CONNECTION_PREFERENCE=20,Blockly.BUMP_DELAY=0,Blockly.COLLAPSE_CHARS=30,Blockly.LONGPRESS=750,Blockly.SOUND_LIMIT=100,Blockly.DRAG_STACK=!0,Blockly.HSV_SATURATION=.45,Blockly.HSV_VALUE=.65,Blockly.SPRITE={width:96,height:124,url:"sprites.png"},Blockly.SVG_NS="http://www.w3.org/2000/svg",Blockly.HTML_NS="http://www.w3.org/1999/xhtml",Blockly.INPUT_VALUE=1,Blockly.OUTPUT_VALUE=2,Blockly.NEXT_STATEMENT=3,Blockly.PREVIOUS_STATEMENT=4,Blockly.DUMMY_INPUT=5,Blockly.ALIGN_LEFT=-1,Blockly.ALIGN_CENTRE=0,Blockly.ALIGN_RIGHT=1,Blockly.DRAG_NONE=0,Blockly.DRAG_STICKY=1,Blockly.DRAG_BEGIN=1,Blockly.DRAG_FREE=2,Blockly.OPPOSITE_TYPE=[],Blockly.OPPOSITE_TYPE[Blockly.INPUT_VALUE]=Blockly.OUTPUT_VALUE,Blockly.OPPOSITE_TYPE[Blockly.OUTPUT_VALUE]=Blockly.INPUT_VALUE,Blockly.OPPOSITE_TYPE[Blockly.NEXT_STATEMENT]=Blockly.PREVIOUS_STATEMENT,Blockly.OPPOSITE_TYPE[Blockly.PREVIOUS_STATEMENT]=Blockly.NEXT_STATEMENT,Blockly.TOOLBOX_AT_TOP=0,Blockly.TOOLBOX_AT_BOTTOM=1,Blockly.TOOLBOX_AT_LEFT=2,Blockly.TOOLBOX_AT_RIGHT=3,Blockly.OUTPUT_SHAPE_HEXAGONAL=1,Blockly.OUTPUT_SHAPE_ROUND=2,Blockly.OUTPUT_SHAPE_SQUARE=3,Blockly.DELETE_AREA_NONE=null,Blockly.DELETE_AREA_TRASH=1,Blockly.DELETE_AREA_TOOLBOX=2,Blockly.VARIABLE_CATEGORY_NAME="VARIABLE",Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",Blockly.PROCEDURE_CATEGORY_NAME="PROCEDURE",Blockly.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",Blockly.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",Blockly.DropDownDiv=function(){},Blockly.DropDownDiv.DIV_=null,Blockly.DropDownDiv.boundsElement_=null,Blockly.DropDownDiv.owner_=null,Blockly.DropDownDiv.ARROW_SIZE=16,Blockly.DropDownDiv.BORDER_SIZE=1,Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING=12,Blockly.DropDownDiv.PADDING_Y=20,Blockly.DropDownDiv.ANIMATION_TIME=.25,Blockly.DropDownDiv.animateOutTimer_=null,Blockly.DropDownDiv.onHide_=0,Blockly.DropDownDiv.createDom=function(){Blockly.DropDownDiv.DIV_||(Blockly.DropDownDiv.DIV_=goog.dom.createDom("div","blocklyDropDownDiv"),document.body.appendChild(Blockly.DropDownDiv.DIV_),Blockly.DropDownDiv.content_=goog.dom.createDom("div","blocklyDropDownContent"),Blockly.DropDownDiv.DIV_.appendChild(Blockly.DropDownDiv.content_),Blockly.DropDownDiv.arrow_=goog.dom.createDom("div","blocklyDropDownArrow"),Blockly.DropDownDiv.DIV_.appendChild(Blockly.DropDownDiv.arrow_),Blockly.DropDownDiv.DIV_.style.transition="transform "+Blockly.DropDownDiv.ANIMATION_TIME+"s, opacity "+Blockly.DropDownDiv.ANIMATION_TIME+"s")},Blockly.DropDownDiv.setBoundsElement=function(e){Blockly.DropDownDiv.boundsElement_=e},Blockly.DropDownDiv.getContentDiv=function(){return Blockly.DropDownDiv.content_},Blockly.DropDownDiv.clearContent=function(){Blockly.DropDownDiv.content_.innerHTML=""},Blockly.DropDownDiv.setColour=function(e,t){Blockly.DropDownDiv.DIV_.style.backgroundColor=e,Blockly.DropDownDiv.DIV_.style.borderColor=t},Blockly.DropDownDiv.setCategory=function(e){Blockly.DropDownDiv.DIV_.setAttribute("data-category",e)},Blockly.DropDownDiv.showPositionedByBlock=function(e,t,n,o){var r=t.workspace.scale,i=t.width;return e=t.height,i*=r,e*=r,i=(r=t.getSvgRoot().getBoundingClientRect()).left+i/2,e=r.top+e,r=r.top,o&&(r+=o),Blockly.DropDownDiv.setBoundsElement(t.workspace.getParentSvg().parentNode),Blockly.DropDownDiv.show(this,i,e,i,r,n)},Blockly.DropDownDiv.show=function(e,t,n,o,r,i){return Blockly.DropDownDiv.owner_=e,Blockly.DropDownDiv.onHide_=i,e=Blockly.DropDownDiv.DIV_,t=Blockly.DropDownDiv.getPositionMetrics(t,n,o,r),Blockly.DropDownDiv.arrow_.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",Blockly.DropDownDiv.arrow_.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow arrowTop":"blocklyDropDownArrow arrowBottom"),e.style.left=t.initialX+"px",e.style.top=t.initialY+"px",e.style.display="block",e.style.opacity=1,e.style.transform="translate("+(t.finalX-t.initialX)+"px,"+(t.finalY-t.initialY)+"px)",t.arrowAtTop},Blockly.DropDownDiv.getPositionMetrics=function(e,t,n,o){var r=Blockly.DropDownDiv.DIV_,i=Blockly.DropDownDiv.boundsElement_.getBoundingClientRect(),a=goog.style.getSize(Blockly.DropDownDiv.boundsElement_);if(t+(r=goog.style.getSize(r)).height>i.top+a.height)if(o-r.height<i.top){n=t+Blockly.DropDownDiv.PADDING_Y;var s=!1}else e=n,n=o-r.height-Blockly.DropDownDiv.PADDING_Y,s=!0;else n=t+Blockly.DropDownDiv.PADDING_Y,s=!1;var l=e-Blockly.DropDownDiv.ARROW_SIZE/2;return l=Math.max(i.left,Math.min(l,i.left+a.width)),e=Math.max(i.left,Math.min(e-r.width/2,i.left+a.width-r.width)),l=Math.max(Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING,Math.min(l-e,r.width-Blockly.DropDownDiv.ARROW_HORIZONTAL_PADDING-Blockly.DropDownDiv.ARROW_SIZE)),i=s?r.height-Blockly.DropDownDiv.BORDER_SIZE:0,i-=Blockly.DropDownDiv.ARROW_SIZE/2+Blockly.DropDownDiv.BORDER_SIZE,{initialX:e,initialY:s?o-r.height:t,finalX:e,finalY:n,arrowX:l,arrowY:i,arrowAtTop:!s}},Blockly.DropDownDiv.isVisible=function(){return!!Blockly.DropDownDiv.owner_},Blockly.DropDownDiv.hideIfOwner=function(e){return Blockly.DropDownDiv.owner_===e&&(Blockly.DropDownDiv.hide(),!0)},Blockly.DropDownDiv.hide=function(){var e=Blockly.DropDownDiv.DIV_;e.style.transform="translate(0px, 0px)",e.style.opacity=0,Blockly.DropDownDiv.animateOutTimer_=setTimeout(function(){Blockly.DropDownDiv.hideWithoutAnimation()},1e3*Blockly.DropDownDiv.ANIMATION_TIME),Blockly.DropDownDiv.onHide_&&(Blockly.DropDownDiv.onHide_(),Blockly.DropDownDiv.onHide_=null)},Blockly.DropDownDiv.hideWithoutAnimation=function(){if(Blockly.DropDownDiv.isVisible()){var e=Blockly.DropDownDiv.DIV_;Blockly.DropDownDiv.animateOutTimer_&&window.clearTimeout(Blockly.DropDownDiv.animateOutTimer_),e.style.transform="",e.style.top="",e.style.left="",e.style.display="none",Blockly.DropDownDiv.clearContent(),Blockly.DropDownDiv.owner_=null,Blockly.DropDownDiv.onHide_&&(Blockly.DropDownDiv.onHide_(),Blockly.DropDownDiv.onHide_=null)}},Blockly.BlockAnimations={},Blockly.BlockAnimations.disconnectPid_=0,Blockly.BlockAnimations.disconnectGroup_=null,Blockly.BlockAnimations.disposeUiEffect=function(e){var t=e.workspace,n=e.getSvgRoot();t.getAudioManager().play("delete"),e=t.getSvgXY(n),(n=n.cloneNode(!0)).translateX_=e.x,n.translateY_=e.y,n.setAttribute("transform","translate("+e.x+","+e.y+")"),t.getParentSvg().appendChild(n),n.bBox_=n.getBBox(),Blockly.BlockAnimations.disposeUiStep_(n,t.RTL,new Date,t.scale)},Blockly.BlockAnimations.disposeUiStep_=function(e,t,n,o){var r=(new Date-n)/150;1<r?goog.dom.removeNode(e):(e.setAttribute("transform","translate("+(e.translateX_+(t?-1:1)*e.bBox_.width*o/2*r)+","+(e.translateY_+e.bBox_.height*o*r)+") scale("+(1-r)*o+")"),setTimeout(Blockly.BlockAnimations.disposeUiStep_,10,e,t,n,o))},Blockly.BlockAnimations.connectionUiEffect=function(e){e.workspace.getAudioManager().play("click")},Blockly.BlockAnimations.connectionUiStep_=function(e,t,n){var o=(new Date-t)/150;1<o?goog.dom.removeNode(e):(e.setAttribute("r",25*o*n),e.style.opacity=1-o,Blockly.BlockAnimations.disconnectPid_=setTimeout(Blockly.BlockAnimations.connectionUiStep_,10,e,t,n))},Blockly.BlockAnimations.disconnectUiEffect=function(e){e.workspace.getAudioManager().play("disconnect")},Blockly.BlockAnimations.disconnectUiStop=function(){},Blockly.RenderedConnection=function(e,t){Blockly.RenderedConnection.superClass_.constructor.call(this,e,t),this.offsetInBlock_=new goog.math.Coordinate(0,0)},goog.inherits(Blockly.RenderedConnection,Blockly.Connection),Blockly.RenderedConnection.prototype.distanceFrom=function(e){var t=this.x_-e.x_;return e=this.y_-e.y_,Math.sqrt(t*t+e*e)},Blockly.RenderedConnection.prototype.bumpAwayFrom_=function(e){if(!this.sourceBlock_.workspace.isDragging()){var t=this.sourceBlock_.getRootBlock();if(!t.isInFlyout){var n=!1;if(!t.isMovable()){if(!(t=e.getSourceBlock().getRootBlock()).isMovable())return;e=this,n=!0}var o=Blockly.selected==t;o||t.addSelect();var r=e.x_+Blockly.SNAP_RADIUS-this.x_;e=e.y_+Blockly.SNAP_RADIUS-this.y_,n&&(e=-e),t.RTL&&(r=-r),t.moveBy(r,e),o||t.removeSelect()}}},Blockly.RenderedConnection.prototype.moveTo=function(e,t){this.inDB_&&this.db_.removeConnection_(this),this.x_=e,this.y_=t,this.hidden_||this.db_.addConnection(this)},Blockly.RenderedConnection.prototype.moveBy=function(e,t){this.moveTo(this.x_+e,this.y_+t)},Blockly.RenderedConnection.prototype.moveToOffset=function(e){this.moveTo(e.x+this.offsetInBlock_.x,e.y+this.offsetInBlock_.y)},Blockly.RenderedConnection.prototype.setOffsetInBlock=function(e,t){this.offsetInBlock_.x=e,this.offsetInBlock_.y=t},Blockly.RenderedConnection.prototype.tighten_=function(){var e=this.targetConnection.x_-this.x_,t=this.targetConnection.y_-this.y_;if(0!=e||0!=t){var n=this.targetBlock(),o=n.getSvgRoot();if(!o)throw"block is not rendered.";n.rendered&&(o=Blockly.utils.getRelativeXY(o),n.getSvgRoot().setAttribute("transform","translate("+(o.x-e)+","+(o.y-t)+")"),n.moveConnections_(-e,-t))}},Blockly.RenderedConnection.prototype.closest=function(e,t){return this.dbOpposite_.searchForClosest(this,e,t)},Blockly.RenderedConnection.prototype.highlight=function(){var e="m -24,0 h 5 "+Blockly.BlockSvg.NOTCH_PATH_LEFT+" h 5",t=this.sourceBlock_.getRelativeToSurfaceXY();Blockly.Connection.highlightedPath_=Blockly.utils.createSvgElement("path",{class:"blocklyHighlightedConnectionPath",d:e,transform:"translate("+(this.x_-t.x)+","+(this.y_-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},Blockly.RenderedConnection.prototype.unhideAll=function(){this.setHidden(!1);var e=[];if(this.type!=Blockly.INPUT_VALUE&&this.type!=Blockly.NEXT_STATEMENT)return e;var t=this.targetBlock();if(t){if(t.isCollapsed()){var n=[];t.outputConnection&&n.push(t.outputConnection),t.nextConnection&&n.push(t.nextConnection),t.previousConnection&&n.push(t.previousConnection)}else n=t.getConnections_(!0);for(var o=0;o<n.length;o++)e.push.apply(e,n[o].unhideAll());e.length||(e[0]=t)}return e},Blockly.RenderedConnection.prototype.unhighlight=function(){goog.dom.removeNode(Blockly.Connection.highlightedPath_),delete Blockly.Connection.highlightedPath_},Blockly.RenderedConnection.prototype.setHidden=function(e){(this.hidden_=e)&&this.inDB_?this.db_.removeConnection_(this):e||this.inDB_||this.db_.addConnection(this)},Blockly.RenderedConnection.prototype.hideAll=function(){if(this.setHidden(!0),this.targetConnection)for(var e=this.targetBlock().getDescendants(!1),t=0;t<e.length;t++){for(var n=e[t],o=n.getConnections_(!0),r=0;r<o.length;r++)o[r].setHidden(!0);for(n=n.getIcons(),r=0;r<n.length;r++)n[r].setVisible(!1)}},Blockly.RenderedConnection.prototype.isConnectionAllowed=function(e,t){return!(this.distanceFrom(e)>t)&&Blockly.RenderedConnection.superClass_.isConnectionAllowed.call(this,e)},Blockly.RenderedConnection.prototype.disconnectInternal_=function(e,t){Blockly.RenderedConnection.superClass_.disconnectInternal_.call(this,e,t),e.rendered&&e.render(),t.rendered&&(t.updateDisabled(),t.render())},Blockly.RenderedConnection.prototype.respawnShadow_=function(){var e=this.getSourceBlock(),t=this.getShadowDom();if(e.workspace&&t&&Blockly.Events.recordUndo){if(Blockly.RenderedConnection.superClass_.respawnShadow_.call(this),!(t=this.targetBlock()))throw"Couldn't respawn the shadow block that should exist here.";t.initSvg(),t.render(!1),e.rendered&&e.render()}},Blockly.RenderedConnection.prototype.neighbours_=function(e){return this.dbOpposite_.getNeighbours(this,e)},Blockly.RenderedConnection.prototype.connect_=function(e){Blockly.RenderedConnection.superClass_.connect_.call(this,e);var t=this.getSourceBlock();e=e.getSourceBlock(),t.rendered&&t.updateDisabled(),e.rendered&&e.updateDisabled(),t.rendered&&e.rendered&&(this.type==Blockly.NEXT_STATEMENT||this.type==Blockly.PREVIOUS_STATEMENT?e.render():t.render())},Blockly.RenderedConnection.prototype.onCheckChanged_=function(){this.isConnected()&&!this.checkType_(this.targetConnection)&&((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours_())},Blockly.InsertionMarkerManager=function(e){this.topBlock_=Blockly.selected=e,this.workspace_=e.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.markerConnection_=null,this.highlightingBlock_=!1,this.highlightedBlock_=null,this.availableConnections_=this.initAvailableConnections_()},Blockly.InsertionMarkerManager.prototype.dispose=function(){this.workspace_=this.topBlock_=null,this.availableConnections_.length=0,this.localConnection_=this.closestConnection_=null,Blockly.Events.disable();try{this.firstMarker_&&(this.firstMarker_.dispose(),this.firstMarker_=null),this.lastMarker_&&(this.lastMarker_.dispose(),this.lastMarker_=null)}finally{Blockly.Events.enable()}this.highlightedBlock_=null},Blockly.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},Blockly.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&(Blockly.Events.disable(),this.hidePreview_(),Blockly.Events.enable(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var e=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;Blockly.BlockAnimations.connectionUiEffect(e.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},Blockly.InsertionMarkerManager.prototype.update=function(e,t){var n=this.getCandidate_(e);((this.wouldDeleteBlock_=this.shouldDelete_(n,t))||this.shouldUpdatePreviews_(n,e))&&(Blockly.Events.disable(),this.maybeHidePreview_(n),this.maybeShowPreview_(n),Blockly.Events.enable())},Blockly.InsertionMarkerManager.prototype.removeHighlighting_=function(){this.closestConnection_&&this.closestConnection_.unhighlight()},Blockly.InsertionMarkerManager.prototype.addHighlighting_=function(){this.closestConnection_&&this.closestConnection_.highlight()},Blockly.InsertionMarkerManager.prototype.createMarkerBlock_=function(e){var t=e.type;Blockly.Events.disable();try{var n=this.workspace_.newBlock(t);if(e.mutationToDom){var o=e.mutationToDom();n.domToMutation(o)}n.setInsertionMarker(!0,e.width),n.initSvg()}finally{Blockly.Events.enable()}return n},Blockly.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var e=this.topBlock_.getConnections_(!1),t=this.topBlock_.lastConnectionInStack();return t&&t!=this.topBlock_.nextConnection&&(e.push(t),this.lastOnStack_=t,this.lastMarker_=this.createMarkerBlock_(t.sourceBlock_)),e},Blockly.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(e,t){var n=e.local,o=e.closest,r=e.radius;if(!n||!o)return!(!this.localConnection_||!this.closestConnection_);if(n.type==Blockly.OUTPUT_VALUE)return!0;if(this.localConnection_&&this.closestConnection_){if(this.closestConnection_==o)return!1;n=this.localConnection_.x_+t.x-this.closestConnection_.x_;var i=this.localConnection_.y_+t.y-this.closestConnection_.y_;return n=Math.sqrt(n*n+i*i),!(o&&r>n-Blockly.CURRENT_CONNECTION_PREFERENCE)}return(this.localConnection_||this.closestConnection_)&&(console.error("Only one of localConnection_ and closestConnection_ was set."),console.error("Returning true from shouldUpdatePreviews, but it's not clear why.")),!0},Blockly.InsertionMarkerManager.prototype.getCandidate_=function(e){for(var t=this.getStartRadius_(),n=null,o=null,r=0;r<this.availableConnections_.length;r++){var i=this.availableConnections_[r],a=i.closest(t,e);a.connection&&(n=a.connection,o=i,t=a.radius)}return{closest:n,local:o,radius:t}},Blockly.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?Blockly.CONNECTING_SNAP_RADIUS:Blockly.SNAP_RADIUS},Blockly.InsertionMarkerManager.prototype.shouldReplace_=function(){var e=this.closestConnection_,t=this.localConnection_;return t.type==Blockly.OUTPUT_VALUE||t!=t.sourceBlock_.getFirstStatementConnection()&&!(this.topBlock_.nextConnection||t.type!=Blockly.PREVIOUS_STATEMENT||!e.isConnected())},Blockly.InsertionMarkerManager.prototype.shouldDelete_=function(e,t){var n=e&&!!e.closest&&t!=Blockly.DELETE_AREA_TOOLBOX;return!!t&&!this.topBlock_.getParent()&&this.topBlock_.isDeletable()&&!n},Blockly.InsertionMarkerManager.prototype.maybeShowPreview_=function(e){if(!this.wouldDeleteBlock_){var t=e.closest;e=e.local,t&&t!=this.closestConnection_&&!t.sourceBlock_.isInsertionMarker()&&(this.closestConnection_=t,this.localConnection_=e,this.showPreview_())}},Blockly.InsertionMarkerManager.prototype.showPreview_=function(){this.shouldReplace_()?this.highlightBlock_():this.connectMarker_()},Blockly.InsertionMarkerManager.prototype.maybeHidePreview_=function(e){e.closest||this.hidePreview_();var t=this.closestConnection_!=e.closest;e=this.localConnection_!=e.local,this.closestConnection_&&this.localConnection_&&(t||e||this.wouldDeleteBlock_)&&this.hidePreview_(),this.localConnection_=this.closestConnection_=this.markerConnection_=null},Blockly.InsertionMarkerManager.prototype.hidePreview_=function(){this.highlightingBlock_?this.unhighlightBlock_():this.markerConnection_&&this.disconnectMarker_()},Blockly.InsertionMarkerManager.prototype.highlightBlock_=function(){var e=this.closestConnection_,t=this.localConnection_;e.targetBlock()?(this.highlightedBlock_=e.targetBlock(),e.targetBlock().highlightForReplacement(!0)):t.type==Blockly.OUTPUT_VALUE&&(this.highlightedBlock_=e.sourceBlock_,e.sourceBlock_.highlightShapeForInput(e,!0)),this.highlightingBlock_=!0},Blockly.InsertionMarkerManager.prototype.unhighlightBlock_=function(){var e=this.closestConnection_;e.type!=Blockly.INPUT_VALUE||e.isConnected()?this.highlightedBlock_.highlightForReplacement(!1):this.highlightedBlock_.highlightShapeForInput(e,!1),this.highlightedBlock_=null,this.highlightingBlock_=!1},Blockly.InsertionMarkerManager.prototype.disconnectMarker_=function(){if(this.markerConnection_){var e=this.markerConnection_,t=e.sourceBlock_,n=t.nextConnection,o=t.previousConnection;if(e!=n||o&&o.targetConnection?e.type==Blockly.NEXT_STATEMENT&&e!=n?((n=e.targetConnection).sourceBlock_.unplug(!1),o=o?o.targetConnection:null,t.unplug(!0),o&&o.connect(n)):t.unplug(!0):e.targetBlock().unplug(!1),e.targetConnection)throw"markerConnection_ still connected at the end of disconnectInsertionMarker";this.markerConnection_=null,t.getSvgRoot().setAttribute("visibility","hidden"),this.removeHighlighting_()}else console.log("No insertion marker connection to disconnect")},Blockly.InsertionMarkerManager.prototype.connectMarker_=function(){var e=this.localConnection_,t=this.closestConnection_,n=this.lastOnStack_&&e==this.lastOnStack_?this.lastMarker_:this.firstMarker_;e=n.getMatchingConnection(e.sourceBlock_,e),goog.asserts.assert(e!=this.markerConnection_,"Made it to connectMarker_ even though the marker isn't changing"),n.render(),n.rendered=!0,n.getSvgRoot().setAttribute("visibility","visible"),n.positionNewBlock(n,e,t),e.connect(t),this.markerConnection_=e,this.addHighlighting_()},Blockly.BlockDragger=function(e,t){this.draggingBlock_=e,this.workspace_=t,this.draggedConnectionManager_=new Blockly.InsertionMarkerManager(this.draggingBlock_),this.deleteArea_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=Blockly.BlockDragger.initIconData_(e)},Blockly.BlockDragger.prototype.dispose=function(){this.startWorkspace_=this.workspace_=this.draggingBlock_=null,this.dragIconData_.length=0,this.draggedConnectionManager_&&(this.draggedConnectionManager_.dispose(),this.draggedConnectionManager_=null)},Blockly.BlockDragger.initIconData_=function(e){var t=[];e=e.getDescendants(!1);for(var n,o=0;n=e[o];o++){n=n.getIcons();for(var r=0;r<n.length;r++){var i={location:n[r].getIconLocation(),icon:n[r]};t.push(i)}}return t},Blockly.BlockDragger.prototype.startBlockDrag=function(e,t){if(Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),Blockly.BlockAnimations.disconnectUiStop(),this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock()){this.draggingBlock_.unplug(t);var n=this.pixelsToWorkspaceUnits_(e);n=goog.math.Coordinate.sum(this.startXY_,n),this.draggingBlock_.translate(n.x,n.y),Blockly.BlockAnimations.disconnectUiEffect(this.draggingBlock_)}if(this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface_(),n=this.workspace_.getToolbox()){var o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";n.addStyle(o)}},Blockly.BlockDragger.prototype.dragBlock=function(e,t){var n=this.pixelsToWorkspaceUnits_(t),o=goog.math.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(n),this.deleteArea_=this.workspace_.isDeleteArea(e),this.draggedConnectionManager_.update(n,this.deleteArea_),this.updateCursorDuringBlockDrag_()},Blockly.BlockDragger.prototype.endBlockDrag=function(e,t){this.dragBlock(e,t),this.dragIconData_=[],Blockly.BlockAnimations.disconnectUiStop();var n=this.pixelsToWorkspaceUnits_(t),o=goog.math.Coordinate.sum(this.startXY_,n);this.draggingBlock_.moveOffDragSurface_(o),this.maybeDeleteBlock_()||(this.draggingBlock_.moveConnections_(n.x,n.y),this.draggingBlock_.setDragging(!1),this.draggedConnectionManager_.applyConnections(),this.draggingBlock_.render(),this.fireMoveEvent_(),this.draggingBlock_.scheduleSnapAndBump()),this.workspace_.setResizesEnabled(!0),(n=this.workspace_.getToolbox())&&(o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",n.removeStyle(o)),Blockly.Events.setGroup(!1)},Blockly.BlockDragger.prototype.fireMoveEvent_=function(){var e=new Blockly.Events.BlockMove(this.draggingBlock_);e.oldCoordinate=this.startXY_,e.recordNew(),Blockly.Events.fire(e)},Blockly.BlockDragger.prototype.maybeDeleteBlock_=function(){var e=this.workspace_.trashcan;return this.wouldDeleteBlock_?(e&&goog.Timer.callOnce(e.close,100,e),this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0)):e&&e.close(),this.wouldDeleteBlock_},Blockly.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock();var e=this.workspace_.trashcan;this.wouldDeleteBlock_?(this.draggingBlock_.setDeleteStyle(!0),this.deleteArea_==Blockly.DELETE_AREA_TRASH&&e&&e.setOpen_(!0)):(this.draggingBlock_.setDeleteStyle(!1),e&&e.setOpen_(!1))},Blockly.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new goog.math.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&(e=e.scale(1/this.workspace_.options.parentWorkspace.scale)),e},Blockly.BlockDragger.prototype.dragIcons_=function(e){for(var t=0;t<this.dragIconData_.length;t++){var n=this.dragIconData_[t];n.icon.setIconLocation(goog.math.Coordinate.sum(n.location,e))}},Blockly.WorkspaceCommentSvg=function(e,t,n,o,r){this.svgGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyComment"},null),this.svgGroup_.translate_="",this.svgRect_=Blockly.utils.createSvgElement("rect",{class:"blocklyCommentRect",x:0,y:0,rx:Blockly.WorkspaceCommentSvg.BORDER_RADIUS,ry:Blockly.WorkspaceCommentSvg.BORDER_RADIUS}),this.svgGroup_.appendChild(this.svgRect_),this.rendered_=!1,this.useDragSurface_=Blockly.utils.is3dSupported()&&!!e.blockDragSurface_,Blockly.WorkspaceCommentSvg.superClass_.constructor.call(this,e,t,n,o,r),this.render()},goog.inherits(Blockly.WorkspaceCommentSvg,Blockly.WorkspaceComment),Blockly.WorkspaceCommentSvg.prototype.dispose=function(){this.workspace&&(Blockly.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.CommentDelete(this)),goog.dom.removeNode(this.svgGroup_),this.svgRect_=this.svgGroup_=null,this.disposeInternal_(),Blockly.Events.disable(),Blockly.WorkspaceCommentSvg.superClass_.dispose.call(this),Blockly.Events.enable())},Blockly.WorkspaceCommentSvg.prototype.initSvg=function(){goog.asserts.assert(this.workspace.rendered,"Workspace is headless."),this.workspace.options.readOnly||this.eventsInit_||(Blockly.bindEventWithChecks_(this.svgRectTarget_,"mousedown",this,this.pathMouseDown_),Blockly.bindEventWithChecks_(this.svgHandleTarget_,"mousedown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot())},Blockly.WorkspaceCommentSvg.prototype.pathMouseDown_=function(e){var t=this.workspace.getGesture(e);t&&t.handleBubbleStart(e,this)},Blockly.WorkspaceCommentSvg.prototype.showContextMenu_=function(e){if(!this.workspace.options.readOnly){var t=[];this.isDeletable()&&this.isMovable()&&(t.push(Blockly.ContextMenu.commentDuplicateOption(this)),t.push(Blockly.ContextMenu.commentDeleteOption(this))),Blockly.ContextMenu.show(e,t,this.RTL)}},Blockly.WorkspaceCommentSvg.prototype.promote_=function(){var e=this.svgGroup_.parentNode;return e.lastChild!==this.svgGroup_&&(e.appendChild(this.svgGroup_),!0)},Blockly.WorkspaceCommentSvg.prototype.select=function(){if(Blockly.selected!=this){var e=null;if(Blockly.selected){e=Blockly.selected.id,Blockly.Events.disable();try{Blockly.selected.unselect()}finally{Blockly.Events.enable()}}(e=new Blockly.Events.Ui(null,"selected",e,this.id)).workspaceId=this.workspace.id,Blockly.Events.fire(e),(Blockly.selected=this).promote_(),this.addSelect()}},Blockly.WorkspaceCommentSvg.prototype.unselect=function(){if(Blockly.selected==this){var e=new Blockly.Events.Ui(null,"selected",this.id,null);e.workspaceId=this.workspace.id,Blockly.Events.fire(e),Blockly.selected=null,this.removeSelect(),this.blurFocus()}},Blockly.WorkspaceCommentSvg.prototype.addSelect=function(){Blockly.utils.addClass(this.svgGroup_,"blocklySelected"),this.setFocus()},Blockly.WorkspaceCommentSvg.prototype.removeSelect=function(){Blockly.utils.removeClass(this.svgGroup_,"blocklySelected"),this.blurFocus()},Blockly.WorkspaceCommentSvg.prototype.addFocus=function(){Blockly.utils.addClass(this.svgGroup_,"blocklyFocused")},Blockly.WorkspaceCommentSvg.prototype.removeFocus=function(){Blockly.utils.removeClass(this.svgGroup_,"blocklyFocused")},Blockly.WorkspaceCommentSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,t=0,n=this.useDragSurface_?this.workspace.blockDragSurface_.getGroup():null,o=this.getSvgRoot();if(o)do{var r=Blockly.utils.getRelativeXY(o);e+=r.x,t+=r.y,this.useDragSurface_&&this.workspace.blockDragSurface_.getCurrentBlock()==o&&(e+=(r=this.workspace.blockDragSurface_.getSurfaceTranslation()).x,t+=r.y),o=o.parentNode}while(o&&o!=this.workspace.getBubbleCanvas()&&o!=n);return this.xy_=new goog.math.Coordinate(e,t)},Blockly.WorkspaceCommentSvg.prototype.moveBy=function(e,t){var n=new Blockly.Events.CommentMove(this),o=this.getRelativeToSurfaceXY();this.translate(o.x+e,o.y+t),this.xy_=new goog.math.Coordinate(o.x+e,o.y+t),n.recordNew(),Blockly.Events.fire(n),this.workspace.resizeContents()},Blockly.WorkspaceCommentSvg.prototype.translate=function(e,t){this.xy_=new goog.math.Coordinate(e,t),this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")},Blockly.WorkspaceCommentSvg.prototype.moveToDragSurface_=function(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.blockDragSurface_.translateSurface(e.x,e.y),this.workspace.blockDragSurface_.setBlocksAndShow(this.getSvgRoot())}},Blockly.WorkspaceCommentSvg.prototype.moveOffDragSurface_=function(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.blockDragSurface_.clearAndHide(this.workspace.getCanvas()))},Blockly.WorkspaceCommentSvg.prototype.moveDuringDrag=function(e,t){e?e.translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},Blockly.WorkspaceCommentSvg.prototype.moveTo=function(e,t){this.translate(e,t)},Blockly.WorkspaceCommentSvg.prototype.clearTransformAttributes_=function(){Blockly.utils.removeAttribute(this.getSvgRoot(),"transform")},Blockly.WorkspaceCommentSvg.prototype.getBoundingRectangle=function(){var e=this.getRelativeToSurfaceXY(),t=this.getHeightWidth();if(this.RTL){var n=new goog.math.Coordinate(e.x-t.width,e.y);e=new goog.math.Coordinate(e.x,e.y+t.height)}else n=new goog.math.Coordinate(e.x,e.y),e=new goog.math.Coordinate(e.x+t.width,e.y+t.height);return{topLeft:n,bottomRight:e}},Blockly.WorkspaceCommentSvg.prototype.updateMovable=function(){this.isMovable()?Blockly.utils.addClass(this.svgGroup_,"blocklyDraggable"):Blockly.utils.removeClass(this.svgGroup_,"blocklyDraggable")},Blockly.WorkspaceCommentSvg.prototype.setMovable=function(e){Blockly.WorkspaceCommentSvg.superClass_.setMovable.call(this,e),this.updateMovable()},Blockly.WorkspaceCommentSvg.prototype.setDragging=function(e){e?((e=this.getSvgRoot()).translate_="",e.skew_="",Blockly.utils.addClass(this.svgGroup_,"blocklyDragging")):Blockly.utils.removeClass(this.svgGroup_,"blocklyDragging")},Blockly.WorkspaceCommentSvg.prototype.getSvgRoot=function(){return this.svgGroup_},Blockly.WorkspaceCommentSvg.prototype.getContent=function(){return this.textarea_?this.textarea_.value:this.content_},Blockly.WorkspaceCommentSvg.prototype.setContent=function(e){Blockly.WorkspaceCommentSvg.superClass_.setContent.call(this,e),this.textarea_&&(this.textarea_.value=e)},Blockly.WorkspaceCommentSvg.prototype.setDeleteStyle=function(e){e?Blockly.utils.addClass(this.svgGroup_,"blocklyDraggingDelete"):Blockly.utils.removeClass(this.svgGroup_,"blocklyDraggingDelete")},Blockly.WorkspaceCommentSvg.prototype.setAutoLayout=function(){},Blockly.WorkspaceCommentSvg.fromXml=function(e,t,n){Blockly.Events.disable();try{var o=Blockly.WorkspaceComment.parseAttributes(e),r=new Blockly.WorkspaceCommentSvg(t,o.content,o.h,o.w,o.id);if(r.data=e.getAttribute("data"),t.rendered&&(r.initSvg(),r.render(!1)),!isNaN(o.x)&&!isNaN(o.y))if(t.RTL){var i=n||t.getWidth();r.moveBy(i-o.x,o.y)}else r.moveBy(o.x,o.y)}finally{Blockly.Events.enable()}return Blockly.WorkspaceComment.fireCreateEvent(r),r},Blockly.WorkspaceCommentSvg.prototype.toXmlWithXY=function(e){var t;this.workspace.RTL&&(t=this.workspace.getWidth()),e=this.toXml(e);var n=this.getRelativeToSurfaceXY();return e.setAttribute("x",Math.round(this.workspace.RTL?t-n.x:n.x)),e.setAttribute("y",Math.round(n.y)),e.setAttribute("h",this.getHeight()),e.setAttribute("w",this.getWidth()),e},Blockly.BubbleDragger=function(e,t){this.draggingBubble_=e,this.workspace_=t,this.deleteArea_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=Blockly.utils.is3dSupported()&&t.getBlockDragSurface()?t.getBlockDragSurface():null},Blockly.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},Blockly.BubbleDragger.prototype.startBubbleDrag=function(){Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0);var e=this.workspace_.getToolbox();if(e){var t=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";e.addStyle(t)}},Blockly.BubbleDragger.prototype.dragBubble=function(e,t){var n=this.pixelsToWorkspaceUnits_(t);n=goog.math.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveDuringDrag(this.dragSurface_,n),this.draggingBubble_.isDeletable()&&(this.deleteArea_=this.workspace_.isDeleteArea(e),this.updateCursorDuringBubbleDrag_())},Blockly.BubbleDragger.prototype.maybeDeleteBubble_=function(){var e=this.workspace_.trashcan;return this.wouldDeleteBubble_?(e&&goog.Timer.callOnce(e.close,100,e),this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):e&&e.close(),this.wouldDeleteBubble_},Blockly.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.wouldDeleteBubble_=this.deleteArea_!=Blockly.DELETE_AREA_NONE;var e=this.workspace_.trashcan;this.wouldDeleteBubble_?(this.draggingBubble_.setDeleteStyle(!0),this.deleteArea_==Blockly.DELETE_AREA_TRASH&&e&&e.setOpen_(!0)):(this.draggingBubble_.setDeleteStyle(!1),e&&e.setOpen_(!1))},Blockly.BubbleDragger.prototype.endBubbleDrag=function(e,t){this.dragBubble(e,t);var n=this.pixelsToWorkspaceUnits_(t);n=goog.math.Coordinate.sum(this.startXY_,n),this.draggingBubble_.moveTo(n.x,n.y),this.maybeDeleteBubble_()||(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),this.workspace_.toolbox_&&(n=this.draggingBubble_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab",this.workspace_.toolbox_.removeStyle(n)),Blockly.Events.setGroup(!1)},Blockly.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var e=new Blockly.Events.CommentMove(this.draggingBubble_);e.setOldCoordinate(this.startXY_),e.recordNew(),Blockly.Events.fire(e)}},Blockly.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(e){return e=new goog.math.Coordinate(e.x/this.workspace_.scale,e.y/this.workspace_.scale),this.workspace_.isMutator&&(e=e.scale(1/this.workspace_.options.parentWorkspace.scale)),e},Blockly.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())},Blockly.WorkspaceDragger=function(e){this.workspace_=e,this.startDragMetrics_=e.getMetrics(),this.startScrollXY_=new goog.math.Coordinate(e.scrollX,e.scrollY)},Blockly.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},Blockly.WorkspaceDragger.prototype.startDrag=function(){Blockly.selected&&Blockly.selected.unselect(),this.workspace_.setupDragSurface()},Blockly.WorkspaceDragger.prototype.endDrag=function(e){this.drag(e),this.workspace_.resetDragSurface()},Blockly.WorkspaceDragger.prototype.drag=function(e){var t=this.startDragMetrics_,n=goog.math.Coordinate.sum(this.startScrollXY_,e);e=Math.min(n.x,-t.contentLeft),n=Math.min(n.y,-t.contentTop),e=Math.max(e,t.viewWidth-t.contentLeft-t.contentWidth),n=Math.max(n,t.viewHeight-t.contentTop-t.contentHeight),e=-e-t.contentLeft,n=-n-t.contentTop,this.updateScroll_(e,n)},Blockly.WorkspaceDragger.prototype.updateScroll_=function(e,t){this.workspace_.scrollbar.set(e,t)},Blockly.FlyoutDragger=function(e){Blockly.FlyoutDragger.superClass_.constructor.call(this,e.getWorkspace()),this.scrollbar_=e.scrollbar_,this.horizontalLayout_=e.horizontalLayout_},goog.inherits(Blockly.FlyoutDragger,Blockly.WorkspaceDragger),Blockly.FlyoutDragger.prototype.updateScroll_=function(e,t){this.horizontalLayout_?this.scrollbar_.set(e):this.scrollbar_.set(t)},Blockly.Tooltip={},Blockly.Tooltip.visible=!1,Blockly.Tooltip.blocked_=!1,Blockly.Tooltip.LIMIT=50,Blockly.Tooltip.mouseOutPid_=0,Blockly.Tooltip.showPid_=0,Blockly.Tooltip.lastX_=0,Blockly.Tooltip.lastY_=0,Blockly.Tooltip.element_=null,Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.OFFSET_X=0,Blockly.Tooltip.OFFSET_Y=10,Blockly.Tooltip.RADIUS_OK=10,Blockly.Tooltip.HOVER_MS=750,Blockly.Tooltip.MARGINS=5,Blockly.Tooltip.DIV=null,Blockly.Tooltip.createDom=function(){Blockly.Tooltip.DIV||(Blockly.Tooltip.DIV=goog.dom.createDom("DIV","blocklyTooltipDiv"),document.body.appendChild(Blockly.Tooltip.DIV))},Blockly.Tooltip.bindMouseEvents=function(e){Blockly.bindEvent_(e,"mouseover",null,Blockly.Tooltip.onMouseOver_),Blockly.bindEvent_(e,"mouseout",null,Blockly.Tooltip.onMouseOut_),e.addEventListener("mousemove",Blockly.Tooltip.onMouseMove_,!1)},Blockly.Tooltip.onMouseOver_=function(e){if(!Blockly.Tooltip.blocked_){for(e=e.target;!goog.isString(e.tooltip)&&!goog.isFunction(e.tooltip);)e=e.tooltip;Blockly.Tooltip.element_!=e&&(Blockly.Tooltip.hide(),Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.element_=e),clearTimeout(Blockly.Tooltip.mouseOutPid_)}},Blockly.Tooltip.onMouseOut_=function(e){Blockly.Tooltip.blocked_||(Blockly.Tooltip.mouseOutPid_=setTimeout(function(){Blockly.Tooltip.element_=null,Blockly.Tooltip.poisonedElement_=null,Blockly.Tooltip.hide()},1),clearTimeout(Blockly.Tooltip.showPid_))},Blockly.Tooltip.onMouseMove_=function(e){if(Blockly.Tooltip.element_&&Blockly.Tooltip.element_.tooltip&&!Blockly.WidgetDiv.isVisible()&&!Blockly.Tooltip.blocked_)if(Blockly.Tooltip.visible){var t=Blockly.Tooltip.lastX_-e.pageX;e=Blockly.Tooltip.lastY_-e.pageY,Math.sqrt(t*t+e*e)>Blockly.Tooltip.RADIUS_OK&&Blockly.Tooltip.hide()}else Blockly.Tooltip.poisonedElement_!=Blockly.Tooltip.element_&&(clearTimeout(Blockly.Tooltip.showPid_),Blockly.Tooltip.lastX_=e.pageX,Blockly.Tooltip.lastY_=e.pageY,Blockly.Tooltip.showPid_=setTimeout(Blockly.Tooltip.show_,Blockly.Tooltip.HOVER_MS))},Blockly.Tooltip.hide=function(){Blockly.Tooltip.visible&&(Blockly.Tooltip.visible=!1,Blockly.Tooltip.DIV&&(Blockly.Tooltip.DIV.style.display="none")),Blockly.Tooltip.showPid_&&clearTimeout(Blockly.Tooltip.showPid_)},Blockly.Tooltip.block=function(){Blockly.Tooltip.hide(),Blockly.Tooltip.blocked_=!0},Blockly.Tooltip.unblock=function(){Blockly.Tooltip.blocked_=!1},Blockly.Tooltip.show_=function(){if(!Blockly.Tooltip.blocked_&&(Blockly.Tooltip.poisonedElement_=Blockly.Tooltip.element_,Blockly.Tooltip.DIV)){goog.dom.removeChildren(Blockly.Tooltip.DIV);for(var e=Blockly.Tooltip.element_.tooltip;goog.isFunction(e);)e=e();e=(e=Blockly.utils.wrap(e,Blockly.Tooltip.LIMIT)).split("\n");for(var t=0;t<e.length;t++){var n=document.createElement("div");n.appendChild(document.createTextNode(e[t])),Blockly.Tooltip.DIV.appendChild(n)}e=Blockly.Tooltip.element_.RTL,t=goog.dom.getViewportSize(),Blockly.Tooltip.DIV.style.direction=e?"rtl":"ltr",Blockly.Tooltip.DIV.style.display="block",Blockly.Tooltip.visible=!0,n=Blockly.Tooltip.lastX_,n=e?n-(Blockly.Tooltip.OFFSET_X+Blockly.Tooltip.DIV.offsetWidth):n+Blockly.Tooltip.OFFSET_X;var o=Blockly.Tooltip.lastY_+Blockly.Tooltip.OFFSET_Y;o+Blockly.Tooltip.DIV.offsetHeight>t.height+window.scrollY&&(o-=Blockly.Tooltip.DIV.offsetHeight+2*Blockly.Tooltip.OFFSET_Y),e?n=Math.max(Blockly.Tooltip.MARGINS-window.scrollX,n):n+Blockly.Tooltip.DIV.offsetWidth>t.width+window.scrollX-2*Blockly.Tooltip.MARGINS&&(n=t.width-Blockly.Tooltip.DIV.offsetWidth-2*Blockly.Tooltip.MARGINS),Blockly.Tooltip.DIV.style.top=o+"px",Blockly.Tooltip.DIV.style.left=n+"px"}},Blockly.Gesture=function(e,t){this.mouseDownXY_=null,this.currentDragDeltaXY_=new goog.math.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=t,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=e,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.shouldDuplicateOnDrag_=this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!Blockly.DRAG_STACK},Blockly.Gesture.prototype.dispose=function(){Blockly.Touch.clearTouchIdentifier(),Blockly.Tooltip.unblock(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&Blockly.unbindEvent_(this.onMoveWrapper_),this.onUpWrapper_&&Blockly.unbindEvent_(this.onUpWrapper_),this.flyout_=this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=null,this.blockDragger_&&(this.blockDragger_.dispose(),this.blockDragger_=null),this.workspaceDragger_&&(this.workspaceDragger_.dispose(),this.workspaceDragger_=null),this.bubbleDragger_&&(this.bubbleDragger_.dispose(),this.bubbleDragger_=null)},Blockly.Gesture.prototype.updateFromEvent_=function(e){var t=new goog.math.Coordinate(e.clientX,e.clientY);this.updateDragDelta_(t)&&(this.updateIsDragging_(),Blockly.longStop_()),this.mostRecentEvent_=e},Blockly.Gesture.prototype.updateDragDelta_=function(e){return this.currentDragDeltaXY_=goog.math.Coordinate.difference(e,this.mouseDownXY_),!this.hasExceededDragRadius_&&(this.hasExceededDragRadius_=goog.math.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?Blockly.FLYOUT_DRAG_RADIUS:Blockly.DRAG_RADIUS))},Blockly.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!this.targetBlock_.disabled&&(!(this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_))&&(this.startWorkspace_=this.flyout_.targetWorkspace_,this.startWorkspace_.updateScreenCalculationsIfScrolled(),Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0))},Blockly.Gesture.prototype.updateIsDraggingBubble_=function(){return!!this.startBubble_&&(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0)},Blockly.Gesture.prototype.updateIsDraggingBlock_=function(){return!!this.targetBlock_&&(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():(this.targetBlock_.isMovable()||this.shouldDuplicateOnDrag_)&&(this.isDraggingBlock_=!0),!!this.isDraggingBlock_&&(this.startDraggingBlock_(),!0))},Blockly.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=this.flyout_?new Blockly.FlyoutDragger(this.flyout_):new Blockly.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},Blockly.Gesture.prototype.updateIsDragging_=function(){goog.asserts.assert(!this.calledUpdateIsDragging_,"updateIsDragging_ should only be called once per gesture."),this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},Blockly.Gesture.prototype.startDraggingBlock_=function(){this.shouldDuplicateOnDrag_&&this.duplicateOnDrag_(),this.blockDragger_=new Blockly.BlockDragger(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startBlockDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_)},Blockly.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new Blockly.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},Blockly.Gesture.prototype.doStart=function(e){Blockly.utils.isTargetInput(e)?this.cancel():(this.hasStarted_=!0,Blockly.BlockAnimations.disconnectUiStop(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.startWorkspace_.markFocused(),this.mostRecentEvent_=e,Blockly.hideChaff(!!this.flyout_),Blockly.Tooltip.block(),this.targetBlock_&&this.targetBlock_.select(),Blockly.utils.isRightButton(e)?this.handleRightClick(e):((goog.string.caseInsensitiveEquals(e.type,"touchstart")||goog.string.caseInsensitiveEquals(e.type,"pointerdown")&&"mouse"!=e.pointerType)&&Blockly.longStart_(e,this),this.mouseDownXY_=new goog.math.Coordinate(e.clientX,e.clientY),this.healStack_=e.altKey||e.ctrlKey||e.metaKey,this.bindMouseEvents(e)))},Blockly.Gesture.prototype.bindMouseEvents=function(e){this.onMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this)),e.preventDefault(),e.stopPropagation()},Blockly.Gesture.prototype.handleMove=function(e){this.updateFromEvent_(e),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.dragBlock(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),e.preventDefault(),e.stopPropagation()},Blockly.Gesture.prototype.handleUp=function(e){this.updateFromEvent_(e),Blockly.longStop_(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(e,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(e,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_(e):this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(),e.preventDefault(),e.stopPropagation(),this.dispose())},Blockly.Gesture.prototype.cancel=function(){this.isEnding_||(this.isEnding_=!0,Blockly.longStop_(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endBlockDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},Blockly.Gesture.prototype.handleRightClick=function(e){this.targetBlock_?(this.bringBlockToFront_(),Blockly.hideChaff(this.flyout_),this.targetBlock_.showContextMenu_(e)):this.startBubble_?this.startBubble_.showContextMenu_(e):this.startWorkspace_&&!this.flyout_&&(Blockly.hideChaff(),this.startWorkspace_.showContextMenu_(e)),e.preventDefault(),e.stopPropagation(),this.dispose()},Blockly.Gesture.prototype.handleWsStart=function(e,t){goog.asserts.assert(!this.hasStarted_,"Tried to call gesture.handleWsStart, but the gesture had already been started."),this.setStartWorkspace_(t),this.mostRecentEvent_=e,this.doStart(e)},Blockly.Gesture.prototype.handleFlyoutStart=function(e,t){goog.asserts.assert(!this.hasStarted_,"Tried to call gesture.handleFlyoutStart, but the gesture had already been started."),this.setStartFlyout_(t),this.handleWsStart(e,t.getWorkspace())},Blockly.Gesture.prototype.handleBlockStart=function(e,t){goog.asserts.assert(!this.hasStarted_,"Tried to call gesture.handleBlockStart, but the gesture had already been started."),this.setStartBlock(t),this.mostRecentEvent_=e},Blockly.Gesture.prototype.handleBubbleStart=function(e,t){goog.asserts.assert(!this.hasStarted_,"Tried to call gesture.handleBubbleStart, but the gesture had already been started."),this.setStartBubble(t),this.mostRecentEvent_=e},Blockly.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},Blockly.Gesture.prototype.doFieldClick_=function(e){this.startField_.showEditor_(e),this.bringBlockToFront_()},Blockly.Gesture.prototype.doBlockClick_=function(){this.flyout_&&this.flyout_.autoClose?this.targetBlock_.disabled||(Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump()):Blockly.WidgetDiv.isVisible()||Blockly.DropDownDiv.isVisible()||Blockly.Events.fire(new Blockly.Events.Ui(this.startBlock_,"click",void 0,void 0)),this.bringBlockToFront_(),Blockly.Events.setGroup(!1)},Blockly.Gesture.prototype.doWorkspaceClick_=function(){Blockly.selected&&Blockly.selected.unselect()},Blockly.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},Blockly.Gesture.prototype.setStartField=function(e){goog.asserts.assert(!this.hasStarted_,"Tried to call gesture.setStartField, but the gesture had already been started."),this.startField_||(this.startField_=e)},Blockly.Gesture.prototype.setStartBubble=function(e){this.startBubble_||(this.startBubble_=e)},Blockly.Gesture.prototype.setStartBlock=function(e){this.startBlock_||this.startBubble_||(this.startBlock_=e,this.shouldDuplicateOnDrag_=!e.disabled&&!e.getInheritedDisabled()&&Blockly.utils.isShadowArgumentReporter(e),e.isInFlyout&&e!=e.getRootBlock()?this.setTargetBlock_(e.getRootBlock()):this.setTargetBlock_(e))},Blockly.Gesture.prototype.setTargetBlock_=function(e){e.isShadow()&&!this.shouldDuplicateOnDrag_?this.setTargetBlock_(e.getParent()):this.targetBlock_=e},Blockly.Gesture.prototype.setStartWorkspace_=function(e){this.startWorkspace_||(this.startWorkspace_=e)},Blockly.Gesture.prototype.setStartFlyout_=function(e){this.flyout_||(this.flyout_=e)},Blockly.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},Blockly.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},Blockly.Gesture.prototype.isFieldClick_=function(){return!!this.startField_&&this.startField_.isCurrentlyEditable()&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},Blockly.Gesture.prototype.isWorkspaceClick_=function(){return!(this.startBlock_||this.startBubble_||this.startField_||this.hasExceededDragRadius_)},Blockly.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},Blockly.Gesture.prototype.hasStarted=function(){return this.hasStarted_},Blockly.Gesture.prototype.forceStartBlockDrag=function(e,t){this.handleBlockStart(e,t),this.handleWsStart(e,t.workspace),this.hasExceededDragRadius_=this.isDraggingBlock_=!0,this.startDraggingBlock_()},Blockly.Gesture.prototype.duplicateOnDrag_=function(){var e=null;Blockly.Events.disable();try{this.startWorkspace_.setResizesEnabled(!1);var t=Blockly.Xml.blockToDom(this.targetBlock_);if("variables_get_reporter"==t.getAttribute("type")){var n=t.firstChild;if(!n)throw"unable to create a variable_get block from a variables_get_reporter block, block has no VAR field";var o=document.createElement("block");o.setAttribute("type","variables_get");var r=document.createElement("field");r.setAttribute("name",n.getAttribute("name")),r.setAttribute("id",n.getAttribute("id")),r.textContent=n.textContent,o.appendChild(r),t=o}e=Blockly.Xml.domToBlock(t,this.startWorkspace_);var i=this.targetBlock_.getRelativeToSurfaceXY();e.moveBy(i.x,i.y),e.setShadow(!1)}finally{Blockly.Events.enable()}e?(Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(e)),e.select(),this.targetBlock_=e):console.error("Something went wrong while duplicating a block.")},Blockly.TouchGesture=function(e,t){Blockly.TouchGesture.superClass_.constructor.call(this,e,t),this.isMultiTouch_=!1,this.cachedPoints_={},this.startDistance_=this.previousScale_=0,this.onStartWrapper_=null},goog.inherits(Blockly.TouchGesture,Blockly.Gesture),Blockly.TouchGesture.ZOOM_IN_MULTIPLIER=5,Blockly.TouchGesture.ZOOM_OUT_MULTIPLIER=6,Blockly.TouchGesture.prototype.doStart=function(e){Blockly.TouchGesture.superClass_.doStart.call(this,e),!this.isEnding_&&Blockly.Touch.isTouchEvent(e)&&this.handleTouchStart(e)},Blockly.TouchGesture.prototype.bindMouseEvents=function(e){this.onStartWrapper_=Blockly.bindEventWithChecks_(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",null,this.handleUp.bind(this),!0),e.preventDefault(),e.stopPropagation()},Blockly.TouchGesture.prototype.handleStart=function(e){!this.isDragging()&&Blockly.Touch.isTouchEvent(e)&&(this.handleTouchStart(e),this.isMultiTouch()&&Blockly.longStop_())},Blockly.TouchGesture.prototype.handleMove=function(e){this.isDragging()?Blockly.Touch.shouldHandleEvent(e)&&Blockly.TouchGesture.superClass_.handleMove.call(this,e):this.isMultiTouch()?(Blockly.Touch.isTouchEvent(e)&&this.handleTouchMove(e),Blockly.longStop_()):Blockly.TouchGesture.superClass_.handleMove.call(this,e)},Blockly.TouchGesture.prototype.handleUp=function(e){Blockly.Touch.isTouchEvent(e)&&!this.isDragging()&&this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()?Blockly.Touch.shouldHandleEvent(e)&&Blockly.TouchGesture.superClass_.handleUp.call(this,e):(e.preventDefault(),e.stopPropagation(),this.dispose())},Blockly.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},Blockly.TouchGesture.prototype.dispose=function(){Blockly.TouchGesture.superClass_.dispose.call(this),this.onStartWrapper_&&Blockly.unbindEvent_(this.onStartWrapper_)},Blockly.TouchGesture.prototype.handleTouchStart=function(e){var t=Blockly.Touch.getTouchIdentifierFromEvent(e);this.cachedPoints_[t]=this.getTouchPoint(e),2==(t=Object.keys(this.cachedPoints_)).length&&(this.startDistance_=goog.math.Coordinate.distance(this.cachedPoints_[t[0]],this.cachedPoints_[t[1]]),this.isMultiTouch_=!0,e.preventDefault())},Blockly.TouchGesture.prototype.handleTouchMove=function(e){var t=Blockly.Touch.getTouchIdentifierFromEvent(e);if(this.cachedPoints_[t]=this.getTouchPoint(e),2==(t=Object.keys(this.cachedPoints_)).length){if(t=this.touchScale_=goog.math.Coordinate.distance(this.cachedPoints_[t[0]],this.cachedPoints_[t[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var n=t-this.previousScale_;n=0<n?n*Blockly.TouchGesture.ZOOM_IN_MULTIPLIER:n*Blockly.TouchGesture.ZOOM_OUT_MULTIPLIER;var o=this.startWorkspace_,r=Blockly.utils.mouseToSvg(e,o.getParentSvg(),o.getInverseScreenCTM());o.zoom(r.x,r.y,n)}this.previousScale_=t,e.preventDefault()}},Blockly.TouchGesture.prototype.handleTouchEnd=function(e){e=Blockly.Touch.getTouchIdentifierFromEvent(e),this.cachedPoints_[e]&&delete this.cachedPoints_[e],Object.keys(this.cachedPoints_).length<2&&(this.cachedPoints_={},this.previousScale_=0)},Blockly.TouchGesture.prototype.getTouchPoint=function(e){return this.startWorkspace_?new goog.math.Coordinate(e.pageX?e.pageX:e.changedTouches[0].pageX,e.pageY?e.pageY:e.changedTouches[0].pageY):null},Blockly.utils={},Blockly.utils.getMessageArray_=function(){return goog.global.Blockly.Msg},Blockly.utils.removeAttribute=function(e,t){goog.userAgent.IE&&goog.userAgent.isVersion("10.0")?e.setAttribute(t,null):e.removeAttribute(t)},Blockly.utils.addClass=function(e,t){var n=e.getAttribute("class")||"";return-1==(" "+n+" ").indexOf(" "+t+" ")&&(n&&(n+=" "),e.setAttribute("class",n+t),!0)},Blockly.utils.removeClass=function(e,t){var n=e.getAttribute("class");if(-1==(" "+n+" ").indexOf(" "+t+" "))return!1;n=n.split(/\s+/);for(var o=0;o<n.length;o++)n[o]&&n[o]!=t||(n.splice(o,1),o--);return n.length?e.setAttribute("class",n.join(" ")):Blockly.utils.removeAttribute(e,"class"),!0},Blockly.utils.hasClass=function(e,t){return-1!=(" "+e.getAttribute("class")+" ").indexOf(" "+t+" ")},Blockly.utils.noEvent=function(e){e.preventDefault(),e.stopPropagation()},Blockly.utils.isTargetInput=function(e){return"textarea"==e.target.type||"text"==e.target.type||"number"==e.target.type||"email"==e.target.type||"password"==e.target.type||"search"==e.target.type||"tel"==e.target.type||"url"==e.target.type||e.target.isContentEditable},Blockly.utils.getRelativeXY=function(e){var t=new goog.math.Coordinate(0,0),n=e.getAttribute("x");return n&&(t.x=parseInt(n,10)),(n=e.getAttribute("y"))&&(t.y=parseInt(n,10)),(n=(n=e.getAttribute("transform"))&&n.match(Blockly.utils.getRelativeXY.XY_REGEX_))&&(t.x+=parseFloat(n[1]),n[3]&&(t.y+=parseFloat(n[3]))),(e=e.getAttribute("style"))&&-1<e.indexOf("translate")&&((n=e.match(Blockly.utils.getRelativeXY.XY_2D_REGEX_))||(n=e.match(Blockly.utils.getRelativeXY.XY_3D_REGEX_)),n&&(t.x+=parseFloat(n[1]),n[3]&&(t.y+=parseFloat(n[3])))),t},Blockly.utils.getInjectionDivXY_=function(e){for(var t=0,n=0;e;){var o=Blockly.utils.getRelativeXY(e),r=Blockly.utils.getScale_(e);if(t=t*r+o.x,n=n*r+o.y,-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv "))break;e=e.parentNode}return new goog.math.Coordinate(t,n)},Blockly.utils.getScale_=function(e){var t=1;return(e=e.getAttribute("transform"))&&(e=e.match(Blockly.utils.getScale_.REGEXP_))&&e[0]&&(t=parseFloat(e[0])),t},Blockly.utils.getRelativeXY.XY_REGEX_=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*\))?/,Blockly.utils.getScale_REGEXP_=/scale\(\s*([-+\d.e]+)\s*\)/,Blockly.utils.getRelativeXY.XY_3D_REGEX_=/transform:\s*translate3d\(\s*([-+\d.e]+)px([ ,]\s*([-+\d.e]+)\s*)px([ ,]\s*([-+\d.e]+)\s*)px\)?/,Blockly.utils.getRelativeXY.XY_2D_REGEX_=/transform:\s*translate\(\s*([-+\d.e]+)px([ ,]\s*([-+\d.e]+)\s*)px\)?/,Blockly.utils.createSvgElement=function(e,t,n){for(var o in e=document.createElementNS(Blockly.SVG_NS,e),t)e.setAttribute(o,t[o]);return document.body.runtimeStyle&&(e.runtimeStyle=e.currentStyle=e.style),n&&n.appendChild(e),e},Blockly.utils.isRightButton=function(e){return!(!e.ctrlKey||!goog.userAgent.MAC)||2==e.button},Blockly.utils.mouseToSvg=function(e,t,n){var o=t.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,n||(n=t.getScreenCTM().inverse()),o.matrixTransform(n)},Blockly.utils.shortestStringLength=function(e){return e.length?e.reduce(function(e,t){return e.length<t.length?e:t}).length:0},Blockly.utils.commonWordPrefix=function(e,t){if(!e.length)return 0;if(1==e.length)return e[0].length;for(var n=0,o=t||Blockly.utils.shortestStringLength(e),r=0;r<o;r++){for(var i=e[0][r],a=1;a<e.length;a++)if(i!=e[a][r])return n;" "==i&&(n=r+1)}for(a=1;a<e.length;a++)if((i=e[a][r])&&" "!=i)return n;return o},Blockly.utils.commonWordSuffix=function(e,t){if(!e.length)return 0;if(1==e.length)return e[0].length;for(var n=0,o=t||Blockly.utils.shortestStringLength(e),r=0;r<o;r++){for(var i=e[0].substr(-r-1,1),a=1;a<e.length;a++)if(i!=e[a].substr(-r-1,1))return n;" "==i&&(n=r+1)}for(a=1;a<e.length;a++)if((i=e[a].charAt(e[a].length-r-1))&&" "!=i)return n;return o},Blockly.utils.tokenizeInterpolation=function(e){return Blockly.utils.tokenizeInterpolation_(e,!0)},Blockly.utils.replaceMessageReferences=function(e){return goog.isString(e)?(e=Blockly.utils.tokenizeInterpolation_(e,!1)).length?e[0]:"":e},Blockly.utils.checkMessageReferences=function(e){for(var t=!0,n=/%{BKY_([a-zA-Z][a-zA-Z0-9_]*)}/g,o=n.exec(e);o;){var r=o[1];null==Blockly.utils.getMessageArray_()[r]&&(t=!1),e=e.substring(o.index+r.length+1),o=n.exec(e)}return t},Blockly.utils.tokenizeInterpolation_=function(e,t){var n=[],o=e.split("");o.push("");for(var r=0,i=[],a=null,s=0;s<o.length;s++){var l=o[s];0==r?"%"==l?((l=i.join(""))&&n.push(l),i.length=0,r=1):i.push(l):1==r?"%"==l?(i.push(l),r=0):t&&"0"<=l&&l<="9"?(r=2,a=l,(l=i.join(""))&&n.push(l),i.length=0):"{"==l?r=3:(i.push("%",l),r=0):2==r?"0"<=l&&l<="9"?a+=l:(n.push(parseInt(a,10)),s--,r=0):3==r&&(""==l?(i.splice(0,0,"%{"),s--,r=0):"}"!=l?i.push(l):(r=i.join(""),/[a-zA-Z][a-zA-Z0-9_]*/.test(r)?(l=r.toUpperCase(),(l=goog.string.startsWith(l,"BKY_")?l.substring(4):null)&&l in Blockly.utils.getMessageArray_()?(r=Blockly.utils.getMessageArray_()[l],goog.isString(r)?Array.prototype.push.apply(n,Blockly.utils.tokenizeInterpolation_(r,t)):t?n.push(String(r)):n.push(r)):n.push("%{"+r+"}")):n.push("%{"+r+"}"),r=i.length=0))}for((l=i.join(""))&&n.push(l),o=[],s=i.length=0;s<n.length;++s)"string"==typeof n[s]?i.push(n[s]):((l=i.join(""))&&o.push(l),i.length=0,o.push(n[s]));return(l=i.join(""))&&o.push(l),i.length=0,o},Blockly.utils.genUid=function(){for(var e=Blockly.utils.genUid.soup_.length,t=[],n=0;n<20;n++)t[n]=Blockly.utils.genUid.soup_.charAt(Math.random()*e);return t.join("")},Blockly.utils.genUid.soup_="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Blockly.utils.wrap=function(e,t){for(var n=e.split("\n"),o=0;o<n.length;o++)n[o]=Blockly.utils.wrapLine_(n[o],t);return n.join("\n")},Blockly.utils.wrapLine_=function(e,t){if(e.length<=t)return e;for(var n=e.trim().split(/\s+/),o=0;o<n.length;o++)n[o].length>t&&(t=n[o].length);o=-1/0;var r=1;do{var i=o,a=e,s=[],l=n.length/r,c=1;for(o=0;o<n.length-1;o++)c<(o+1.5)/l?(c++,s[o]=!0):s[o]=!1;s=Blockly.utils.wrapMutate_(n,s,t),o=Blockly.utils.wrapScore_(n,s,t),e=Blockly.utils.wrapToText_(n,s),r++}while(i<o);return a},Blockly.utils.wrapScore_=function(e,t,n){for(var o=[0],r=[],i=0;i<e.length;i++)o[o.length-1]+=e[i].length,!0===t[i]?(o.push(0),r.push(e[i].charAt(e[i].length-1))):!1===t[i]&&o[o.length-1]++;for(e=Math.max.apply(Math,o),i=t=0;i<o.length;i++)t-=2*Math.pow(Math.abs(n-o[i]),1.5),t-=Math.pow(e-o[i],1.5),-1!=".?!".indexOf(r[i])?t+=n/3:-1!=",;)]}".indexOf(r[i])&&(t+=n/4);return 1<o.length&&o[o.length-1]<=o[o.length-2]&&(t+=.5),t},Blockly.utils.wrapMutate_=function(e,t,n){for(var o,r=Blockly.utils.wrapScore_(e,t,n),i=0;i<t.length-1;i++)if(t[i]!=t[i+1]){var a=[].concat(t);a[i]=!a[i],a[i+1]=!a[i+1];var s=Blockly.utils.wrapScore_(e,a,n);r<s&&(r=s,o=a)}return o?Blockly.utils.wrapMutate_(e,o,n):t},Blockly.utils.wrapToText_=function(e,t){for(var n=[],o=0;o<e.length;o++)n.push(e[o]),void 0!==t[o]&&n.push(t[o]?"\n":" ");return n.join("")},Blockly.utils.measureText=function(e,t,n,o){var r=document.createElement("canvas").getContext("2d");return r.font=n+" "+e+" "+t,r.measureText(o).width},Blockly.utils.encodeEntities=function(e){return e.replace(/[\u00A0-\u9999<>&]/gim,function(e){return"&#"+e.charCodeAt(0)+";"})},Blockly.utils.is3dSupported=function(){if(void 0!==Blockly.utils.is3dSupported.cached_)return Blockly.utils.is3dSupported.cached_;if(!goog.global.getComputedStyle)return!1;var e=document.createElement("p"),t="none",n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var o in document.body.insertBefore(e,null),n)if(void 0!==e.style[o]){if(e.style[o]="translate3d(1px,1px,1px)",!(t=goog.global.getComputedStyle(e)))return document.body.removeChild(e),!1;t=t.getPropertyValue(n[o])}return document.body.removeChild(e),Blockly.utils.is3dSupported.cached_="none"!==t,Blockly.utils.is3dSupported.cached_},Blockly.utils.insertAfter_=function(e,t){var n=t.nextSibling,o=t.parentNode;if(!o)throw"Reference node has no parent.";n?o.insertBefore(e,n):o.appendChild(e)},Blockly.utils.runAfterPageLoad=function(e){if("object"!=typeof document)throw Error("Blockly.utils.runAfterPageLoad() requires browser document.");if("complete"===document.readyState)e();else var t=setInterval(function(){"complete"===document.readyState&&(clearInterval(t),e())},10)},Blockly.utils.setCssTransform=function(e,t){e.style.transform=t,e.style["-webkit-transform"]=t},Blockly.utils.changeObscuredShadowIds=function(e){for(var t=(e=e.getDescendants()).length-1;0<=t;t--)for(var n=e[t],o=0;o<n.inputList.length;o++){var r=n.inputList[o].connection;if(r){var i=r.getShadowDom();i&&(i.setAttribute("id",Blockly.utils.genUid()),r.setShadowDom(i))}}},Blockly.utils.isShadowArgumentReporter=function(e){return"variables_get_reporter"==e.type},Blockly.utils.getViewportBBox=function(){var e=goog.dom.getViewportSize(),t=goog.style.getViewportPageOffset(document);return{right:e.width+t.x,bottom:e.height+t.y,top:t.y,left:t.x}},Blockly.Grid=function(e,t){this.gridPattern_=e,this.spacing_=t.spacing,this.length_=t.length,this.line2_=(this.line1_=e.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=t.snap},Blockly.Grid.prototype.scale_=1,Blockly.Grid.prototype.dispose=function(){this.gridPattern_=null},Blockly.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},Blockly.Grid.prototype.getSpacing=function(){return this.spacing_},Blockly.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},Blockly.Grid.prototype.update=function(e){this.scale_=e;var t=this.spacing_*e||100;this.gridPattern_.setAttribute("width",t),this.gridPattern_.setAttribute("height",t);var n=(t=Math.floor(this.spacing_/2)+.5)-this.length_/2,o=t+this.length_/2;t*=e,n*=e,o*=e,this.setLineAttributes_(this.line1_,e,n,o,t,t),this.setLineAttributes_(this.line2_,e,t,t,n,o)},Blockly.Grid.prototype.setLineAttributes_=function(e,t,n,o,r,i){e&&(e.setAttribute("stroke-width",t),e.setAttribute("x1",n),e.setAttribute("y1",r),e.setAttribute("x2",o),e.setAttribute("y2",i))},Blockly.Grid.prototype.moveTo=function(e,t){this.gridPattern_.setAttribute("x",e),this.gridPattern_.setAttribute("y",t),(goog.userAgent.IE||goog.userAgent.EDGE)&&this.update(this.scale_)},Blockly.Grid.createDom=function(e,t,n){return e=Blockly.utils.createSvgElement("pattern",{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},n),0<t.length&&0<t.spacing?(Blockly.utils.createSvgElement("line",{stroke:t.colour},e),1<t.length&&Blockly.utils.createSvgElement("line",{stroke:t.colour},e)):Blockly.utils.createSvgElement("line",{},e),e},Blockly.Options=function(e){var t=!!e.readOnly;if(t)var n=null,o=!1,r=!1,i=!1,a=!1,s=!1,l=!1;else o=!(!(n=Blockly.Options.parseToolboxTree(e.toolbox))||!n.getElementsByTagName("category").length),void 0===(r=e.trashcan)&&(r=o),void 0===(i=e.collapse)&&(i=o),void 0===(a=e.comments)&&(a=o),void 0===(s=e.disable)&&(s=o),void 0===(l=e.sounds)&&(l=!0);var c=!!e.rtl,u=e.horizontalLayout;void 0===u&&(u=!1);var g=e.toolboxPosition;g="end"!==g,g=u?g?Blockly.TOOLBOX_AT_TOP:Blockly.TOOLBOX_AT_BOTTOM:g==c?Blockly.TOOLBOX_AT_RIGHT:Blockly.TOOLBOX_AT_LEFT;var p=e.scrollbars;void 0===p&&(p=o);var d=e.css;void 0===d&&(d=!0);var _="https://blockly-demo.appspot.com/static/media/";e.media?_=e.media:e.path&&(_=e.path+"media/");var f=void 0===e.oneBasedIndex||!!e.oneBasedIndex,h=e.colours;if(h)for(var m in h)h.hasOwnProperty(m)&&Blockly.Colours.hasOwnProperty(m)&&(Blockly.Colours[m]=h[m]);this.RTL=c,this.oneBasedIndex=f,this.collapse=i,this.comments=a,this.disable=s,this.readOnly=t,this.maxBlocks=e.maxBlocks||1/0,this.pathToMedia=_,this.hasCategories=o,this.hasScrollbars=p,this.hasTrashcan=r,this.hasSounds=l,this.hasCss=d,this.horizontalLayout=u,this.languageTree=n,this.gridOptions=Blockly.Options.parseGridOptions_(e),this.zoomOptions=Blockly.Options.parseZoomOptions_(e),this.toolboxPosition=g,e=e.toolboxOptions||{},this.toolboxOptions={},null==e.border&&(e.border=!0),null==e.colour&&(e.colour=!1),null==e.inverted&&(e.inverted=!1),null==e.invertedMultiplier&&(e.invertedMultiplier=.3),null==e.disabledOpacity&&(e.disabledOpacity=.4),this.toolboxOptions.border=e.border,this.toolboxOptions.colour=e.colour,this.toolboxOptions.inverted=e.inverted,this.toolboxOptions.invertedMultiplier=e.invertedMultiplier,this.toolboxOptions.disabledOpacity=e.disabledOpacity},Blockly.Options.prototype.parentWorkspace=null,Blockly.Options.prototype.setMetrics=null,Blockly.Options.prototype.getMetrics=null,Blockly.Options.parseZoomOptions_=function(e){e=e.zoom||{};var t={};return t.controls=void 0!==e.controls&&!!e.controls,t.wheel=void 0!==e.wheel&&!!e.wheel,t.startScale=void 0===e.startScale?1:parseFloat(e.startScale),t.maxScale=void 0===e.maxScale?3:parseFloat(e.maxScale),t.minScale=void 0===e.minScale?.3:parseFloat(e.minScale),t.scaleSpeed=void 0===e.scaleSpeed?1.2:parseFloat(e.scaleSpeed),t},Blockly.Options.parseGridOptions_=function(e){e=e.grid||{};var t={};return t.spacing=parseFloat(e.spacing)||0,t.colour=e.colour||"#888",t.length=parseFloat(e.length)||1,t.snap=0<t.spacing&&!!e.snap,t},Blockly.Options.parseToolboxTree=function(e){return e?("string"!=typeof e&&("undefined"==typeof XSLTProcessor&&e.outerHTML?e=e.outerHTML:e instanceof Element||(e=null)),"string"==typeof e&&(e=Blockly.Xml.textToDom(e))):e=null,e},Blockly.ScrollbarPair=function(e){this.workspace_=e,this.hScroll=new Blockly.Scrollbar(e,!0,!0,"blocklyMainWorkspaceScrollbar"),this.vScroll=new Blockly.Scrollbar(e,!1,!0,"blocklyMainWorkspaceScrollbar"),this.corner_=Blockly.utils.createSvgElement("rect",{height:Blockly.Scrollbar.scrollbarThickness,width:Blockly.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),Blockly.utils.insertAfter_(this.corner_,e.getBubbleCanvas())},Blockly.ScrollbarPair.prototype.oldHostMetrics_=null,Blockly.ScrollbarPair.prototype.dispose=function(){goog.dom.removeNode(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll.dispose(),this.hScroll=null,this.vScroll.dispose(),this.vScroll=null},Blockly.ScrollbarPair.prototype.resize=function(){var e=this.workspace_.getMetrics();if(e){var t=!1,n=!1;this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.contentWidth==e.contentWidth&&this.oldHostMetrics_.viewLeft==e.viewLeft&&this.oldHostMetrics_.contentLeft==e.contentLeft||(t=!0),this.oldHostMetrics_&&this.oldHostMetrics_.contentHeight==e.contentHeight&&this.oldHostMetrics_.viewTop==e.viewTop&&this.oldHostMetrics_.contentTop==e.contentTop||(n=!0)):n=t=!0,t&&this.hScroll.resize(e),n&&this.vScroll.resize(e),this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth==e.viewWidth&&this.oldHostMetrics_.absoluteLeft==e.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position_.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight==e.viewHeight&&this.oldHostMetrics_.absoluteTop==e.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position_.y),this.oldHostMetrics_=e}},Blockly.ScrollbarPair.prototype.set=function(e,t){var n={},o=e*this.hScroll.ratio_,r=t*this.vScroll.ratio_,i=this.vScroll.scrollViewSize_;n.x=this.getRatio_(o,this.hScroll.scrollViewSize_),n.y=this.getRatio_(r,i),this.workspace_.setMetrics(n),this.hScroll.setHandlePosition(o),this.vScroll.setHandlePosition(r)},Blockly.ScrollbarPair.prototype.getRatio_=function(e,t){var n=e/t;return isNaN(n)?0:n},Blockly.Scrollbar=function(e,t,n,o){this.workspace_=e,this.pair_=n||!1,this.horizontal_=t,this.oldHostMetrics_=null,this.createDom_(o),this.position_=new goog.math.Coordinate(0,0),e=Blockly.Scrollbar.scrollbarThickness,t?(this.svgBackground_.setAttribute("height",e),this.outerSvg_.setAttribute("height",e),this.svgHandle_.setAttribute("height",e-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",e),this.outerSvg_.setAttribute("width",e),this.svgHandle_.setAttribute("width",e-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=Blockly.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=Blockly.bindEventWithChecks_(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)},Blockly.Scrollbar.prototype.origin_=new goog.math.Coordinate(0,0),Blockly.Scrollbar.prototype.originHasChanged_=!0,Blockly.Scrollbar.prototype.startDragMouse_=0,Blockly.Scrollbar.prototype.scrollViewSize_=0,Blockly.Scrollbar.prototype.handleLength_=0,Blockly.Scrollbar.prototype.handlePosition_=0,Blockly.Scrollbar.prototype.isVisible_=!0,Blockly.Scrollbar.prototype.containerVisible_=!0,Blockly.Scrollbar.scrollbarThickness=11,goog.events.BrowserFeature.TOUCH_ENABLED&&(Blockly.Scrollbar.scrollbarThickness=14),Blockly.Scrollbar.metricsAreEquivalent_=function(e,t){return!(!e||!t||e.viewWidth!=t.viewWidth||e.viewHeight!=t.viewHeight||e.viewLeft!=t.viewLeft||e.viewTop!=t.viewTop||e.absoluteTop!=t.absoluteTop||e.absoluteLeft!=t.absoluteLeft||e.contentWidth!=t.contentWidth||e.contentHeight!=t.contentHeight||e.contentLeft!=t.contentLeft||e.contentTop!=t.contentTop)},Blockly.Scrollbar.prototype.dispose=function(){this.cleanUp_(),Blockly.unbindEvent_(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,Blockly.unbindEvent_(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,goog.dom.removeNode(this.outerSvg_),this.workspace_=this.svgHandle_=this.svgBackground_=this.svgGroup_=this.outerSvg_=null},Blockly.Scrollbar.prototype.setHandleLength_=function(e){this.handleLength_=e,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},Blockly.Scrollbar.prototype.setHandlePosition=function(e){this.handlePosition_=e,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},Blockly.Scrollbar.prototype.setScrollViewSize_=function(e){this.scrollViewSize_=e,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollViewSize_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollViewSize_)},Blockly.ScrollbarPair.prototype.setContainerVisible=function(e){this.hScroll.setContainerVisible(e),this.vScroll.setContainerVisible(e)},Blockly.Scrollbar.prototype.setPosition_=function(e,t){this.position_.x=e,this.position_.y=t,Blockly.utils.setCssTransform(this.outerSvg_,"translate("+(this.position_.x+this.origin_.x)+"px,"+(this.position_.y+this.origin_.y)+"px)")},Blockly.Scrollbar.prototype.resize=function(e){if(e||(e=this.workspace_.getMetrics())){if(this.originHasChanged_)this.originHasChanged_=!1;else if(Blockly.Scrollbar.metricsAreEquivalent_(e,this.oldHostMetrics_))return;this.oldHostMetrics_=e,this.horizontal_?this.resizeHorizontal_(e):this.resizeVertical_(e),this.onScroll_()}},Blockly.Scrollbar.prototype.resizeHorizontal_=function(e){this.resizeViewHorizontal(e)},Blockly.Scrollbar.prototype.resizeViewHorizontal=function(e){var t=e.viewWidth-1;this.pair_&&(t-=Blockly.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,t)),t=e.absoluteLeft+.5,this.pair_&&this.workspace_.RTL&&(t+=Blockly.Scrollbar.scrollbarThickness),this.setPosition_(t,e.absoluteTop+e.viewHeight-Blockly.Scrollbar.scrollbarThickness-.5),this.resizeContentHorizontal(e)},Blockly.Scrollbar.prototype.resizeContentHorizontal=function(e){this.pair_||this.setVisible(this.scrollViewSize_<e.contentWidth),this.ratio_=this.scrollViewSize_/e.contentWidth,(-1/0==this.ratio_||1/0==this.ratio_||isNaN(this.ratio_))&&(this.ratio_=0),this.setHandleLength_(Math.max(0,e.viewWidth*this.ratio_)),this.setHandlePosition(this.constrainHandle_((e.viewLeft-e.contentLeft)*this.ratio_))},Blockly.Scrollbar.prototype.resizeVertical_=function(e){this.resizeViewVertical(e)},Blockly.Scrollbar.prototype.resizeViewVertical=function(e){var t=e.viewHeight-1;this.pair_&&(t-=Blockly.Scrollbar.scrollbarThickness),this.setScrollViewSize_(Math.max(0,t)),t=e.absoluteLeft+.5,this.workspace_.RTL||(t+=e.viewWidth-Blockly.Scrollbar.scrollbarThickness-1),this.setPosition_(t,e.absoluteTop+.5),this.resizeContentVertical(e)},Blockly.Scrollbar.prototype.resizeContentVertical=function(e){this.pair_||this.setVisible(this.scrollViewSize_<e.contentHeight),this.ratio_=this.scrollViewSize_/e.contentHeight,(-1/0==this.ratio_||1/0==this.ratio_||isNaN(this.ratio_))&&(this.ratio_=0),this.setHandleLength_(Math.max(0,e.viewHeight*this.ratio_)),this.setHandlePosition(this.constrainHandle_((e.viewTop-e.contentTop)*this.ratio_))},Blockly.Scrollbar.prototype.createDom_=function(e){var t="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");e&&(t+=" "+e),this.outerSvg_=Blockly.utils.createSvgElement("svg",{class:t},null),this.svgGroup_=Blockly.utils.createSvgElement("g",{},this.outerSvg_),this.svgBackground_=Blockly.utils.createSvgElement("rect",{class:"blocklyScrollbarBackground"},this.svgGroup_),e=Math.floor((Blockly.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=Blockly.utils.createSvgElement("rect",{class:"blocklyScrollbarHandle",rx:e,ry:e},this.svgGroup_),Blockly.utils.insertAfter_(this.outerSvg_,this.workspace_.getParentSvg())},Blockly.Scrollbar.prototype.isVisible=function(){return this.isVisible_},Blockly.Scrollbar.prototype.setContainerVisible=function(e){var t=e!=this.containerVisible_;this.containerVisible_=e,t&&this.updateDisplay_()},Blockly.Scrollbar.prototype.setVisible=function(e){var t=e!=this.isVisible();if(this.pair_)throw"Unable to toggle visibility of paired scrollbars.";this.isVisible_=e,t&&this.updateDisplay_()},Blockly.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},Blockly.Scrollbar.prototype.onMouseDownBar_=function(e){if(this.workspace_.markFocused(),Blockly.Touch.clearTouchIdentifier(),this.cleanUp_(),Blockly.utils.isRightButton(e))e.stopPropagation();else{var t=Blockly.utils.mouseToSvg(e,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());t=this.horizontal_?t.x:t.y;var n=Blockly.utils.getInjectionDivXY_(this.svgHandle_);n=this.horizontal_?n.x:n.y;var o=this.handlePosition_,r=.95*this.handleLength_;t<=n?o-=r:t>=n+this.handleLength_&&(o+=r),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),this.setHandlePosition(this.constrainHandle_(o)),this.onScroll_(),e.stopPropagation(),e.preventDefault()}},Blockly.Scrollbar.prototype.onMouseDownHandle_=function(e){this.workspace_.markFocused(),this.cleanUp_(),Blockly.utils.isRightButton(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?e.clientX:e.clientY,Blockly.Scrollbar.onMouseUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",this,this.onMouseUpHandle_),Blockly.Scrollbar.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",this,this.onMouseMoveHandle_),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),e.stopPropagation(),e.preventDefault())},Blockly.Scrollbar.prototype.onMouseMoveHandle_=function(e){this.setHandlePosition(this.constrainHandle_(this.startDragHandle+((this.horizontal_?e.clientX:e.clientY)-this.startDragMouse_))),this.onScroll_()},Blockly.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),Blockly.Touch.clearTouchIdentifier(),this.cleanUp_()},Blockly.Scrollbar.prototype.cleanUp_=function(){Blockly.hideChaff(!0),Blockly.Scrollbar.onMouseUpWrapper_&&(Blockly.unbindEvent_(Blockly.Scrollbar.onMouseUpWrapper_),Blockly.Scrollbar.onMouseUpWrapper_=null),Blockly.Scrollbar.onMouseMoveWrapper_&&(Blockly.unbindEvent_(Blockly.Scrollbar.onMouseMoveWrapper_),Blockly.Scrollbar.onMouseMoveWrapper_=null)},Blockly.Scrollbar.prototype.constrainHandle_=function(e){return e<=0||isNaN(e)||this.scrollViewSize_<this.handleLength_?0:Math.min(e,this.scrollViewSize_-this.handleLength_)},Blockly.Scrollbar.prototype.onScroll_=function(){var e=this.handlePosition_/this.scrollViewSize_;isNaN(e)&&(e=0);var t={};this.horizontal_?t.x=e:t.y=e,this.workspace_.setMetrics(t)},Blockly.Scrollbar.prototype.set=function(e){this.setHandlePosition(this.constrainHandle_(e*this.ratio_)),this.onScroll_()},Blockly.Scrollbar.prototype.setOrigin=function(e,t){e==this.origin_.x&&t==this.origin_.y||(this.origin_=new goog.math.Coordinate(e,t),this.originHasChanged_=!0)},Blockly.Trashcan=function(e){this.workspace_=e},Blockly.Trashcan.prototype.WIDTH_=47,Blockly.Trashcan.prototype.BODY_HEIGHT_=44,Blockly.Trashcan.prototype.LID_HEIGHT_=16,Blockly.Trashcan.prototype.MARGIN_BOTTOM_=20,Blockly.Trashcan.prototype.MARGIN_SIDE_=20,Blockly.Trashcan.prototype.MARGIN_HOTSPOT_=10,Blockly.Trashcan.prototype.SPRITE_LEFT_=0,Blockly.Trashcan.prototype.SPRITE_TOP_=32,Blockly.Trashcan.prototype.isOpen=!1,Blockly.Trashcan.prototype.svgGroup_=null,Blockly.Trashcan.prototype.svgLid_=null,Blockly.Trashcan.prototype.lidTask_=0,Blockly.Trashcan.prototype.lidOpen_=0,Blockly.Trashcan.prototype.left_=0,Blockly.Trashcan.prototype.top_=0,Blockly.Trashcan.prototype.createDom=function(){this.svgGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyTrash"},null);var e=String(Math.random()).substring(2),t=Blockly.utils.createSvgElement("clipPath",{id:"blocklyTrashBodyClipPath"+e},this.svgGroup_);return Blockly.utils.createSvgElement("rect",{width:this.WIDTH_,height:this.BODY_HEIGHT_,y:this.LID_HEIGHT_},t),Blockly.utils.createSvgElement("image",{width:Blockly.SPRITE.width,x:-this.SPRITE_LEFT_,height:Blockly.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashBodyClipPath"+e+")"},this.svgGroup_).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.workspace_.options.pathToMedia+Blockly.SPRITE.url),t=Blockly.utils.createSvgElement("clipPath",{id:"blocklyTrashLidClipPath"+e},this.svgGroup_),Blockly.utils.createSvgElement("rect",{width:this.WIDTH_,height:this.LID_HEIGHT_},t),this.svgLid_=Blockly.utils.createSvgElement("image",{width:Blockly.SPRITE.width,x:-this.SPRITE_LEFT_,height:Blockly.SPRITE.height,y:-this.SPRITE_TOP_,"clip-path":"url(#blocklyTrashLidClipPath"+e+")"},this.svgGroup_),this.svgLid_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.workspace_.options.pathToMedia+Blockly.SPRITE.url),Blockly.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.click),this.animateLid_(),this.svgGroup_},Blockly.Trashcan.prototype.init=function(e){return this.bottom_=this.MARGIN_BOTTOM_+e,this.setOpen_(!1),this.bottom_+this.BODY_HEIGHT_+this.LID_HEIGHT_},Blockly.Trashcan.prototype.dispose=function(){this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,goog.Timer.clear(this.lidTask_)},Blockly.Trashcan.prototype.position=function(){var e=this.workspace_.getMetrics();e&&(this.workspace_.RTL?(this.left_=this.MARGIN_SIDE_+Blockly.Scrollbar.scrollbarThickness,e.toolboxPosition==Blockly.TOOLBOX_AT_LEFT&&(this.left_+=e.flyoutWidth,this.workspace_.toolbox_&&(this.left_+=e.absoluteLeft))):(this.left_=e.viewWidth+e.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-Blockly.Scrollbar.scrollbarThickness,e.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT&&(this.left_-=e.flyoutWidth)),this.top_=e.viewHeight+e.absoluteTop-(this.BODY_HEIGHT_+this.LID_HEIGHT_)-this.bottom_,e.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM&&(this.top_-=e.flyoutHeight),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))},Blockly.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect();return new goog.math.Rect(e.left+this.SPRITE_LEFT_-this.MARGIN_HOTSPOT_,e.top+this.SPRITE_TOP_-this.MARGIN_HOTSPOT_,this.WIDTH_+2*this.MARGIN_HOTSPOT_,this.LID_HEIGHT_+this.BODY_HEIGHT_+2*this.MARGIN_HOTSPOT_)},Blockly.Trashcan.prototype.setOpen_=function(e){this.isOpen!=e&&(goog.Timer.clear(this.lidTask_),this.isOpen=e,this.animateLid_())},Blockly.Trashcan.prototype.animateLid_=function(){this.lidOpen_+=this.isOpen?.2:-.2,this.lidOpen_=goog.math.clamp(this.lidOpen_,0,1);var e=45*this.lidOpen_;this.svgLid_.setAttribute("transform","rotate("+(this.workspace_.RTL?-e:e)+","+(this.workspace_.RTL?4:this.WIDTH_-4)+","+(this.LID_HEIGHT_-2)+")"),e=goog.math.lerp(.4,.8,this.lidOpen_),this.svgGroup_.style.opacity=e,0<this.lidOpen_&&this.lidOpen_<1&&(this.lidTask_=goog.Timer.callOnce(this.animateLid_,20,this))},Blockly.Trashcan.prototype.close=function(){this.setOpen_(!1)},Blockly.Trashcan.prototype.click=function(){var e=this.workspace_.startScrollX-this.workspace_.scrollX,t=this.workspace_.startScrollY-this.workspace_.scrollY;Math.sqrt(e*e+t*t)>Blockly.DRAG_RADIUS||console.log("TODO: Inspect trash.")},Blockly.VariableModel=function(e,t,n,o){this.workspace=e,this.name=t,this.type=n||"",this.id_=o||Blockly.utils.genUid(),Blockly.Events.fire(new Blockly.Events.VarCreate(this))},Blockly.VariableModel.prototype.getId=function(){return this.id_},Blockly.VariableModel.compareByName=function(e,t){return goog.string.caseInsensitiveCompare(e.name,t.name)},Blockly.Variables={},Blockly.Variables.NAME_TYPE=Blockly.VARIABLE_CATEGORY_NAME,Blockly.Variables.allUsedVarModels=function(e){var t=e.getAllBlocks();e=Object.create(null);for(var n=0;n<t.length;n++){var o=t[n].getVarModels();if(o)for(var r=0;r<o.length;r++){var i=o[r];i.getId()&&(e[i.getId()]=i)}}for(var a in t=[],e)t.push(e[a]);return t},Blockly.Variables.allUsedVariables=function(){console.warn("Deprecated call to Blockly.Variables.allUsedVariables. Use Blockly.Variables.allUsedVarModels instead.\nIf this is a major issue please file a bug on GitHub.")},Blockly.Variables.allDeveloperVariables=function(e){var t=e.getAllBlocks();e={};for(var n=0;n<t.length;n++){var o=t[n];if(o.getDeveloperVars){o=o.getDeveloperVars();for(var r=0;r<o.length;r++)e[o[r]]=o[r]}}for(var i in t=[],e)t.push(e[i]);return t},Blockly.Variables.flyoutCategory=function(e){var t=[],n=goog.dom.createDom("button");return n.setAttribute("text",Blockly.Msg.NEW_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(e){Blockly.Variables.createVariableButtonHandler(e.getTargetWorkspace())}),t.push(n),e=Blockly.Variables.flyoutCategoryBlocks(e),t.concat(e)},Blockly.Variables.flyoutCategoryBlocks=function(e){(e=e.getVariablesOfType("")).sort(Blockly.VariableModel.compareByName);var t=[];if(0<e.length){var n=e[0];if(Blockly.Blocks.variables_set){var o=Blockly.Blocks.math_change?8:24;o='<xml><block type="variables_set" gap="'+o+'">'+Blockly.Variables.generateVariableFieldXmlString(n)+"</block></xml>",o=Blockly.Xml.textToDom(o).firstChild,t.push(o)}for(Blockly.Blocks.math_change&&(o='<xml><block type="math_change" gap="'+(o=Blockly.Blocks.variables_get?20:8)+'">'+Blockly.Variables.generateVariableFieldXmlString(n)+'<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block></xml>',o=Blockly.Xml.textToDom(o).firstChild,t.push(o)),n=0;o=e[n];n++)Blockly.Blocks.variables_get&&(o='<xml><block type="variables_get" gap="8">'+Blockly.Variables.generateVariableFieldXmlString(o)+"</block></xml>",o=Blockly.Xml.textToDom(o).firstChild,t.push(o))}return t},Blockly.Variables.generateUniqueName=function(e){var t="";if((e=e.getAllVariables()).length)for(var n=1,o=0,r="ijkmnopqrstuvwxyzabcdefgh".charAt(o);!t;){for(var i=!1,a=0;a<e.length;a++)if(e[a].name.toLowerCase()==r){i=!0;break}i?(25==++o&&(o=0,n++),r="ijkmnopqrstuvwxyzabcdefgh".charAt(o),1<n&&(r+=n)):t=r}else t="i";return t},Blockly.Variables.createVariableButtonHandler=function(r,i,e){var a=e||"",s=function(e){Blockly.Variables.promptName(Blockly.Msg.NEW_VARIABLE_TITLE,e,function(e){if(e){var t=Blockly.Variables.nameUsedWithAnyType_(e,r);if(t){var n=e.toLowerCase();if(t.type==a)var o=Blockly.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",n);else o=(o=Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",n).replace("%2",t.type);Blockly.alert(o,function(){s(e)})}else r.createVariable(e,a),i&&i(e)}else i&&i(null)})};s("")},goog.exportSymbol("Blockly.Variables.createVariableButtonHandler",Blockly.Variables.createVariableButtonHandler),Blockly.Variables.createVariable=Blockly.Variables.createVariableButtonHandler,goog.exportSymbol("Blockly.Variables.createVariable",Blockly.Variables.createVariable),Blockly.Variables.renameVariable=function(n,o,r){var i=function(e){var t=Blockly.Msg.RENAME_VARIABLE_TITLE.replace("%1",o.name);Blockly.Variables.promptName(t,e,function(e){if(e){var t=Blockly.Variables.nameUsedWithOtherType_(e,o.type,n);t?(t=Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",e.toLowerCase()).replace("%2",t.type),Blockly.alert(t,function(){i(e)})):(n.renameVariableById(o.getId(),e),r&&r(e))}else r&&r(null)})};i("")},Blockly.Variables.promptName=function(e,t,n){Blockly.prompt(e,t,function(e){e&&((e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""))==Blockly.Msg.RENAME_VARIABLE||e==Blockly.Msg.NEW_VARIABLE)&&(e=null),n(e)})},Blockly.Variables.nameUsedWithOtherType_=function(e,t,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(var o,r=0;o=n[r];r++)if(o.name.toLowerCase()==e&&o.type!=t)return o;return null},Blockly.Variables.nameUsedWithAnyType_=function(e,t){var n=t.getVariableMap().getAllVariables();e=e.toLowerCase();for(var o,r=0;o=n[r];r++)if(o.name.toLowerCase()==e)return o;return null},Blockly.Variables.generateVariableFieldXmlString=function(e){var t=e.type;return""==t&&(t="''"),'<field name="VAR" id="'+e.getId()+'" variabletype="'+goog.string.htmlEscape(t)+'">'+goog.string.htmlEscape(e.name)+"</field>"},Blockly.Variables.generateVariableFieldDom=function(e){return e=Blockly.Variables.generateVariableFieldXmlString(e),Blockly.Xml.textToDom("<xml>"+e+"</xml>").firstChild},Blockly.Variables.getOrCreateVariablePackage=function(e,t,n,o){var r=Blockly.Variables.getVariable(e,t,n,o);return r||(r=Blockly.Variables.createVariable_(e,t,n,o)),r},Blockly.Variables.getVariable=function(e,t,n,o){var r=e.getPotentialVariableMap();if(t){var i=e.getVariableById(t);!i&&r&&(i=r.getVariableById(t))}else if(n){if(null==o)throw Error("Tried to look up a variable by name without a type");!(i=e.getVariable(n,o))&&r&&(i=r.getVariable(n,o))}return i},Blockly.Variables.createVariable_=function(e,t,n,o){var r=e.getPotentialVariableMap();return n||(n=Blockly.Variables.generateUniqueName(e.isFlyout?e.targetWorkspace:e)),r?r.createVariable(n,o,t):e.createVariable(n,o,t)},Blockly.Variables.getAddedVariables=function(e,t){var n=e.getAllVariables(),o=[];if(t.length!=n.length)for(var r=0;r<n.length;r++){var i=n[r];-1==t.indexOf(i)&&o.push(i)}return o},Blockly.VariablesDynamic={};Blockly.VariablesDynamic.onCreateVariableButtonClick_String=function(e){Blockly.Variables.createVariableButtonHandler(e.getTargetWorkspace(),null,"String")},Blockly.VariablesDynamic.onCreateVariableButtonClick_Number=function(e){Blockly.Variables.createVariableButtonHandler(e.getTargetWorkspace(),null,"Number")},Blockly.VariablesDynamic.onCreateVariableButtonClick_Colour=function(e){Blockly.Variables.createVariableButtonHandler(e.getTargetWorkspace(),null,"Colour")},Blockly.VariablesDynamic.flyoutCategory=function(e){var t=[],n=goog.dom.createDom("button");return n.setAttribute("text",Blockly.Msg.NEW_STRING_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),t.push(n),(n=goog.dom.createDom("button")).setAttribute("text",Blockly.Msg.NEW_NUMBER_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),t.push(n),(n=goog.dom.createDom("button")).setAttribute("text",Blockly.Msg.NEW_COLOUR_VARIABLE),n.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),t.push(n),e.registerButtonCallback("CREATE_VARIABLE_STRING",Blockly.VariablesDynamic.onCreateVariableButtonClick_String),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",Blockly.VariablesDynamic.onCreateVariableButtonClick_Number),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",Blockly.VariablesDynamic.onCreateVariableButtonClick_Colour),e=Blockly.VariablesDynamic.flyoutCategoryBlocks(e),t.concat(e)},Blockly.VariablesDynamic.flyoutCategoryBlocks=function(e){(e=e.getAllVariables()).sort(Blockly.VariableModel.compareByName);var t=[];if(0<e.length){if(Blockly.Blocks.variables_set_dynamic){var n='<xml><block type="variables_set_dynamic" gap="24">'+Blockly.Variables.generateVariableFieldXmlString(e[0])+"</block></xml>";n=Blockly.Xml.textToDom(n).firstChild,t.push(n)}if(Blockly.Blocks.variables_get_dynamic)for(var o=0;n=e[o];o++)n='<xml><block type="variables_get_dynamic" gap="8">'+Blockly.Variables.generateVariableFieldXmlString(n)+"</block></xml>",n=Blockly.Xml.textToDom(n).firstChild,t.push(n)}return t},Blockly.WorkspaceAudio=function(e){this.parentWorkspace_=e,this.SOUNDS_=Object.create(null)},Blockly.WorkspaceAudio.prototype.lastSound_=null,Blockly.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},Blockly.WorkspaceAudio.prototype.load=function(e,t){if(e.length){try{var n=new window.Audio}catch(e){return}for(var o,r=0;r<e.length;r++){var i=e[r],a=i.match(/\.(\w+)$/);if(a&&n.canPlayType("audio/"+a[1])){o=new window.Audio(i);break}}o&&o.play&&(this.SOUNDS_[t]=o)}},Blockly.WorkspaceAudio.prototype.preload=function(){for(var e in this.SOUNDS_){var t=this.SOUNDS_[e];if(t.volume=.01,t.play(),t.pause(),goog.userAgent.IPAD||goog.userAgent.IPHONE)break}},Blockly.WorkspaceAudio.prototype.play=function(e,t){var n=this.SOUNDS_[e];if(n){var o=new Date;null!=this.lastSound_&&o-this.lastSound_<Blockly.SOUND_LIMIT||(this.lastSound_=o,(n=goog.userAgent.DOCUMENT_MODE&&9===goog.userAgent.DOCUMENT_MODE||goog.userAgent.IPAD||goog.userAgent.ANDROID?n:n.cloneNode()).volume=void 0===t?1:t,n.play())}else this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(e,t)},Blockly.WorkspaceDragSurfaceSvg=function(e){this.container_=e,this.createDom()},Blockly.WorkspaceDragSurfaceSvg.prototype.SVG_=null,Blockly.WorkspaceDragSurfaceSvg.prototype.dragGroup_=null,Blockly.WorkspaceDragSurfaceSvg.prototype.container_=null,Blockly.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=Blockly.utils.createSvgElement("svg",{xmlns:Blockly.SVG_NS,"xmlns:html":Blockly.HTML_NS,"xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},Blockly.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(e,t){var n=e.toFixed(0),o=t.toFixed(0);this.SVG_.style.display="block",Blockly.utils.setCssTransform(this.SVG_,"translate3d("+n+"px, "+o+"px, 0px)")},Blockly.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return Blockly.utils.getRelativeXY(this.SVG_)},Blockly.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(e){if(!e)throw"Couldn't clear and hide the drag surface: missing new surface.";var t=this.SVG_.childNodes[0],n=this.SVG_.childNodes[1];if(!(t&&n&&Blockly.utils.hasClass(t,"blocklyBlockCanvas")&&Blockly.utils.hasClass(n,"blocklyBubbleCanvas")))throw"Couldn't clear and hide the drag surface.  A node was missing.";null!=this.previousSibling_?Blockly.utils.insertAfter_(t,this.previousSibling_):e.insertBefore(t,e.firstChild),Blockly.utils.insertAfter_(n,t),this.SVG_.style.display="none",goog.asserts.assert(0==this.SVG_.childNodes.length,"Drag surface was not cleared."),Blockly.utils.setCssTransform(this.SVG_,""),this.previousSibling_=null},Blockly.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(e,t,n,o,r,i){goog.asserts.assert(0==this.SVG_.childNodes.length,"Already dragging a block."),this.previousSibling_=n,e.setAttribute("transform","translate(0, 0) scale("+i+")"),t.setAttribute("transform","translate(0, 0) scale("+i+")"),this.SVG_.setAttribute("width",o),this.SVG_.setAttribute("height",r),this.SVG_.appendChild(e),this.SVG_.appendChild(t),this.SVG_.style.display="block"},Blockly.Xml={},Blockly.Xml.workspaceToDom=function(e,t){var n=goog.dom.createDom("xml");n.appendChild(Blockly.Xml.variablesToDom(Blockly.Variables.allUsedVarModels(e)));for(var o,r=e.getTopComments(!0),i=0;o=r[i];i++)n.appendChild(o.toXmlWithXY(t));for(r=e.getTopBlocks(!0),i=0;o=r[i];i++)n.appendChild(Blockly.Xml.blockToDomWithXY(o,t));return n},Blockly.Xml.variablesToDom=function(e){for(var t,n=goog.dom.createDom("variables"),o=0;t=e[o];o++){var r=goog.dom.createDom("variable",null,t.name);r.setAttribute("type",t.type),r.setAttribute("id",t.getId()),n.appendChild(r)}return n},Blockly.Xml.blockToDomWithXY=function(e,t){var n;e.workspace.RTL&&(n=e.workspace.getWidth());var o=Blockly.Xml.blockToDom(e,t),r=e.getRelativeToSurfaceXY();return o.setAttribute("x",Math.round(e.workspace.RTL?n-r.x:r.x)),o.setAttribute("y",Math.round(r.y)),o},Blockly.Xml.fieldToDomVariable_=function(e){null==e.getValue()&&(e.initModel(),e.getValue());var t=e.getVariable();if(!t)throw Error("Tried to serialize a variable field with no variable.");var n=goog.dom.createDom("field",null,t.name);return n.setAttribute("name",e.name),n.setAttribute("id",t.getId()),n.setAttribute("variabletype",t.type),n},Blockly.Xml.fieldToDom_=function(e){if(e.name){if(e instanceof Blockly.FieldVariable||e instanceof Blockly.FieldVariableGetter)return Blockly.Xml.fieldToDomVariable_(e);var t=goog.dom.createDom("field",null,e.getValue());return t.setAttribute("name",e.name),t}return null},Blockly.Xml.allFieldsToDom_=function(e,t){for(var n,o=0;n=e.inputList[o];o++)for(var r,i=0;r=n.fieldRow[i];i++)(r=Blockly.Xml.fieldToDom_(r))&&t.appendChild(r)},Blockly.Xml.blockToDom=function(e,t){var n,o=goog.dom.createDom(e.isShadow()?"shadow":"block");if(o.setAttribute("type",e.type),t||o.setAttribute("id",e.id),e.mutationToDom){var r=e.mutationToDom();r&&(r.hasChildNodes()||r.hasAttributes())&&o.appendChild(r)}if(Blockly.Xml.allFieldsToDom_(e,o),r=e.getCommentText()){if(r=goog.dom.createDom("comment",null,r),"object"==typeof e.comment){r.setAttribute("pinned",e.comment.isVisible());var i=e.comment.getBubbleSize();r.setAttribute("h",i.height),r.setAttribute("w",i.width)}o.appendChild(r)}for(e.data&&(r=goog.dom.createDom("data",null,e.data),o.appendChild(r)),i=0;n=e.inputList[i];i++){var a,s=!0;if(n.type!=Blockly.DUMMY_INPUT){var l=n.connection.targetBlock();n.type==Blockly.INPUT_VALUE?a=goog.dom.createDom("value"):n.type==Blockly.NEXT_STATEMENT&&(a=goog.dom.createDom("statement")),!(r=n.connection.getShadowDom())||l&&l.isShadow()||a.appendChild(Blockly.Xml.cloneShadow_(r)),l&&(a.appendChild(Blockly.Xml.blockToDom(l,t)),s=!1),a.setAttribute("name",n.name),s||o.appendChild(a)}}return e.inputsInlineDefault!=e.inputsInline&&o.setAttribute("inline",e.inputsInline),e.isCollapsed()&&o.setAttribute("collapsed",!0),e.disabled&&o.setAttribute("disabled",!0),e.isDeletable()||e.isShadow()||o.setAttribute("deletable",!1),e.isMovable()||e.isShadow()||o.setAttribute("movable",!1),e.isEditable()||o.setAttribute("editable",!1),(i=e.getNextBlock())&&(a=goog.dom.createDom("next",null,Blockly.Xml.blockToDom(i,t)),o.appendChild(a)),!(r=e.nextConnection&&e.nextConnection.getShadowDom())||i&&i.isShadow()||a.appendChild(Blockly.Xml.cloneShadow_(r)),o},Blockly.Xml.cloneShadow_=function(e){for(var t,n=e=e.cloneNode(!0);n;)if(n.firstChild)n=n.firstChild;else{for(;n&&!n.nextSibling;)n=(t=n).parentNode,3==t.nodeType&&""==t.data.trim()&&n.firstChild!=t&&goog.dom.removeNode(t);n&&(n=(t=n).nextSibling,3==t.nodeType&&""==t.data.trim()&&goog.dom.removeNode(t))}return e},Blockly.Xml.domToText=function(e){return(new XMLSerializer).serializeToString(e)},Blockly.Xml.domToPrettyText=function(e){e=Blockly.Xml.domToText(e).split("<");for(var t="",n=1;n<e.length;n++){var o=e[n];"/"==o[0]&&(t=t.substring(2)),e[n]=t+"<"+o,"/"!=o[0]&&"/>"!=o.slice(-2)&&(t+="  ")}return(e=(e=e.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},Blockly.Xml.textToDom=function(e){return(e=(new DOMParser).parseFromString(e,"text/xml"))&&e.firstChild&&"xml"==e.firstChild.nodeName.toLowerCase()&&e.firstChild===e.lastChild||goog.asserts.fail("Blockly.Xml.textToDom did not obtain a valid XML tree."),e.firstChild},Blockly.Xml.domToWorkspace=function(e,t){if(e instanceof Blockly.Workspace){var n=e;e=t,t=n,console.warn("Deprecated call to Blockly.Xml.domToWorkspace, swap the arguments.")}var o;t.RTL&&(o=t.getWidth()),n=[],Blockly.Field.startCache();var r=e.childNodes.length,i=Blockly.Events.getGroup();i||Blockly.Events.setGroup(!0),t.setResizesEnabled&&t.setResizesEnabled(!1);var a=!0;try{for(var s=0;s<r;s++){var l=e.childNodes[s],c=l.nodeName.toLowerCase();if("block"==c||"shadow"==c&&!Blockly.Events.recordUndo){var u=Blockly.Xml.domToBlock(l,t);n.push(u.id);var g=l.hasAttribute("x")?parseInt(l.getAttribute("x"),10):10,p=l.hasAttribute("y")?parseInt(l.getAttribute("y"),10):10;isNaN(g)||isNaN(p)||u.moveBy(t.RTL?o-g:g,p),a=!1}else if("shadow"==c)goog.asserts.fail("Shadow block cannot be a top-level block."),a=!1;else if("comment"==c)t.rendered?Blockly.WorkspaceCommentSvg.fromXml(l,t,o):Blockly.WorkspaceComment.fromXml(l,t);else if("variables"==c){if(!a)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");Blockly.Xml.domToVariables(l,t),a=!1}}}finally{i||Blockly.Events.setGroup(!1),Blockly.Field.stopCache()}return t.setResizesEnabled&&t.setResizesEnabled(!0),n},Blockly.Xml.appendDomToWorkspace=function(e,t){if(t.hasOwnProperty("scale")){var n=Blockly.BlockSvg.TAB_WIDTH;try{Blockly.BlockSvg.TAB_WIDTH=0;var o=t.getBlocksBoundingBox()}finally{Blockly.BlockSvg.TAB_WIDTH=n}}if(n=Blockly.Xml.domToWorkspace(e,t),o&&o.height){var r,i=o.y+o.height,a=o.x,s=1/0,l=1/0;for(o=0;o<n.length;o++){var c=t.getBlockById(n[o]).getRelativeToSurfaceXY();c.y<l&&(l=c.y),c.x<s&&(s=c.x)}for(i=i-l+Blockly.BlockSvg.SEP_SPACE_Y,a-=s,t.RTL&&(r=t.getWidth()),o=0;o<n.length;o++)t.getBlockById(n[o]).moveBy(t.RTL?r-a:a,i)}return n},Blockly.Xml.domToBlock=function(e,t){if(e instanceof Blockly.Workspace){var n=e;e=t,t=n,console.warn("Deprecated call to Blockly.Xml.domToBlock, swap the arguments.")}Blockly.Events.disable(),n=t.getAllVariables();try{var o=Blockly.Xml.domToBlockHeadless_(e,t),r=o.getDescendants(!1);if(t.rendered){o.setConnectionsHidden(!0);for(var i=r.length-1;0<=i;i--)r[i].initSvg();for(i=r.length-1;0<=i;i--)r[i].render(!1);setTimeout(function(){o.workspace&&o.setConnectionsHidden(!1)},1),o.updateDisabled(),t.resizeContents()}else for(i=r.length-1;0<=i;i--)r[i].initModel()}finally{Blockly.Events.enable()}if(Blockly.Events.isEnabled()){for(r=Blockly.Variables.getAddedVariables(t,n),i=0;i<r.length;i++)Blockly.Events.fire(new Blockly.Events.VarCreate(r[i]));Blockly.Events.fire(new Blockly.Events.BlockCreate(o))}return o},Blockly.Xml.domToVariables=function(e,t){for(var n,o=0;n=e.children[o];o++){var r=n.getAttribute("type"),i=n.getAttribute("id");if(n=n.textContent,null==r)throw Error("Variable with id, "+i+" is without a type");t.createVariable(n,r,i)}},Blockly.Xml.domToBlockHeadless_=function(e,t){var n=null,o=e.getAttribute("type");goog.asserts.assert(o,"Block type unspecified: %s",e.outerHTML);var r=e.getAttribute("id");n=t.newBlock(o,r);var i=null;for(o=0;r=e.childNodes[o];o++)if(3!=r.nodeType){for(var a,s=i=null,l=0;a=r.childNodes[l];l++)1==a.nodeType&&("block"==a.nodeName.toLowerCase()?i=a:"shadow"==a.nodeName.toLowerCase()&&(s=a));switch(!i&&s&&(i=s),l=r.getAttribute("name"),r.nodeName.toLowerCase()){case"mutation":n.domToMutation&&(n.domToMutation(r),n.initSvg&&n.initSvg());break;case"comment":n.setCommentText(r.textContent);var c=r.getAttribute("pinned");c&&!n.isInFlyout&&setTimeout(function(){n.comment&&n.comment.setVisible&&n.comment.setVisible("true"==c)},1),i=parseInt(r.getAttribute("w"),10),r=parseInt(r.getAttribute("h"),10),!isNaN(i)&&!isNaN(r)&&n.comment&&n.comment.setVisible&&n.comment.setBubbleSize(i,r);break;case"data":n.data=r.textContent;break;case"title":case"field":Blockly.Xml.domToField_(n,l,r);break;case"value":case"statement":if(!(r=n.getInput(l)))break;s&&r.connection.setShadowDom(s),i&&((i=Blockly.Xml.domToBlockHeadless_(i,t)).outputConnection?r.connection.connect(i.outputConnection):i.previousConnection?r.connection.connect(i.previousConnection):goog.asserts.fail("Child block does not have output or previous statement."));break;case"next":s&&n.nextConnection&&n.nextConnection.setShadowDom(s),i&&(goog.asserts.assert(n.nextConnection,"Next statement does not exist."),goog.asserts.assert(!n.nextConnection.isConnected(),"Next statement is already connected."),i=Blockly.Xml.domToBlockHeadless_(i,t),goog.asserts.assert(i.previousConnection,"Next block does not have previous statement."),n.nextConnection.connect(i.previousConnection));break;default:console.warn("Ignoring unknown tag: "+r.nodeName)}}if((o=e.getAttribute("inline"))&&n.setInputsInline("true"==o),(o=e.getAttribute("disabled"))&&n.setDisabled("true"==o||"disabled"==o),(o=e.getAttribute("deletable"))&&n.setDeletable("true"==o),(o=e.getAttribute("movable"))&&n.setMovable("true"==o),(o=e.getAttribute("editable"))&&n.setEditable("true"==o),(o=e.getAttribute("collapsed"))&&n.setCollapsed("true"==o),"shadow"==e.nodeName.toLowerCase()){for(r=n.getChildren(!1),o=0;i=r[o];o++)goog.asserts.assert(i.isShadow(),"Shadow block not allowed non-shadow child.");n.setShadow(!0)}return n},Blockly.Xml.domToFieldVariable_=function(e,t,n,o){var r=t.getAttribute("variabletype")||"";if("''"==r&&(r=""),e=Blockly.Variables.getOrCreateVariablePackage(e,t.id,n,r),null!=r&&r!==e.type)throw Error("Serialized variable type with id '"+e.getId()+"' had type "+e.type+", and does not match variable field that references it: "+Blockly.Xml.domToText(t)+".");o.setValue(e.getId())},Blockly.Xml.domToField_=function(e,t,n){if(t=e.getField(t)){e=e.workspace;var o=n.textContent;t instanceof Blockly.FieldVariable||t instanceof Blockly.FieldVariableGetter?Blockly.Xml.domToFieldVariable_(e,n,o,t):t.setValue(o)}},Blockly.Xml.deleteNext=function(e){for(var t,n=0;t=e.childNodes[n];n++)if("next"==t.nodeName.toLowerCase()){e.removeChild(t);break}},goog.global.Blockly||(goog.global.Blockly={}),goog.global.Blockly.Xml||(goog.global.Blockly.Xml={}),goog.global.Blockly.Xml.domToText=Blockly.Xml.domToText,goog.global.Blockly.Xml.domToWorkspace=Blockly.Xml.domToWorkspace,goog.global.Blockly.Xml.textToDom=Blockly.Xml.textToDom,goog.global.Blockly.Xml.workspaceToDom=Blockly.Xml.workspaceToDom,Blockly.ZoomControls=function(e){this.workspace_=e},Blockly.ZoomControls.prototype.WIDTH_=32,Blockly.ZoomControls.prototype.HEIGHT_=110,Blockly.ZoomControls.prototype.MARGIN_BOTTOM_=20,Blockly.ZoomControls.prototype.MARGIN_SIDE_=20,Blockly.ZoomControls.prototype.svgGroup_=null,Blockly.ZoomControls.prototype.left_=0,Blockly.ZoomControls.prototype.top_=0,Blockly.ZoomControls.prototype.createDom=function(){var t=this.workspace_;this.svgGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyZoom"},null);var e=String(Math.random()).substring(2),n=Blockly.utils.createSvgElement("clipPath",{id:"blocklyZoomoutClipPath"+e},this.svgGroup_);Blockly.utils.createSvgElement("rect",{width:32,height:32,y:77},n);var o=Blockly.utils.createSvgElement("image",{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,x:-64,y:-15,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.svgGroup_);o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.options.pathToMedia+Blockly.SPRITE.url),n=Blockly.utils.createSvgElement("clipPath",{id:"blocklyZoominClipPath"+e},this.svgGroup_),Blockly.utils.createSvgElement("rect",{width:32,height:32,y:43},n);var r=Blockly.utils.createSvgElement("image",{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,x:-32,y:-49,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.svgGroup_);return r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.options.pathToMedia+Blockly.SPRITE.url),n=Blockly.utils.createSvgElement("clipPath",{id:"blocklyZoomresetClipPath"+e},this.svgGroup_),Blockly.utils.createSvgElement("rect",{width:32,height:32},n),(n=Blockly.utils.createSvgElement("image",{width:Blockly.SPRITE.width,height:Blockly.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.svgGroup_)).setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.options.pathToMedia+Blockly.SPRITE.url),Blockly.bindEventWithChecks_(n,"mousedown",null,function(e){t.markFocused(),t.setScale(t.options.zoomOptions.startScale),t.scrollCenter(),Blockly.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()}),Blockly.bindEventWithChecks_(r,"mousedown",null,function(e){t.markFocused(),t.zoomCenter(1),Blockly.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()}),Blockly.bindEventWithChecks_(o,"mousedown",null,function(e){t.markFocused(),t.zoomCenter(-1),Blockly.Touch.clearTouchIdentifier(),e.stopPropagation(),e.preventDefault()}),this.svgGroup_},Blockly.ZoomControls.prototype.init=function(e){return this.bottom_=this.MARGIN_BOTTOM_+e,this.bottom_+this.HEIGHT_},Blockly.ZoomControls.prototype.dispose=function(){this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.workspace_=null},Blockly.ZoomControls.prototype.position=function(){var e=this.workspace_.getMetrics();e&&(this.workspace_.RTL?(this.left_=this.MARGIN_SIDE_+Blockly.Scrollbar.scrollbarThickness,e.toolboxPosition==Blockly.TOOLBOX_AT_LEFT&&(this.left_+=e.flyoutWidth,this.workspace_.toolbox_&&(this.left_+=e.absoluteLeft))):(this.left_=e.viewWidth+e.absoluteLeft-this.WIDTH_-this.MARGIN_SIDE_-Blockly.Scrollbar.scrollbarThickness,e.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT&&(this.left_-=e.flyoutWidth)),this.top_=e.viewHeight+e.absoluteTop-this.HEIGHT_-this.bottom_,e.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM&&(this.top_-=e.flyoutHeight),this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")"))},Blockly.WorkspaceSvg=function(e,t,n){Blockly.WorkspaceSvg.superClass_.constructor.call(this,e),this.getMetrics=e.getMetrics||Blockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_,this.setMetrics=e.setMetrics||Blockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_,Blockly.ConnectionDB.init(this),t&&(this.blockDragSurface_=t),n&&(this.workspaceDragSurface_=n),this.useWorkspaceDragSurface_=this.workspaceDragSurface_&&Blockly.utils.is3dSupported(),this.highlightedBlocks_=[],this.audioManager_=new Blockly.WorkspaceAudio(e.parentWorkspace),this.grid_=this.options.gridPattern?new Blockly.Grid(e.gridPattern,e.gridOptions):null,Blockly.Variables&&Blockly.Variables.flyoutCategory&&this.registerToolboxCategoryCallback(Blockly.VARIABLE_CATEGORY_NAME,Blockly.Variables.flyoutCategory),Blockly.VariablesDynamic&&Blockly.VariablesDynamic.flyoutCategory&&this.registerToolboxCategoryCallback(Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME,Blockly.VariablesDynamic.flyoutCategory),Blockly.Procedures&&Blockly.Procedures.flyoutCategory&&this.registerToolboxCategoryCallback(Blockly.PROCEDURE_CATEGORY_NAME,Blockly.Procedures.flyoutCategory)},goog.inherits(Blockly.WorkspaceSvg,Blockly.Workspace),Blockly.WorkspaceSvg.prototype.resizeHandlerWrapper_=null,Blockly.WorkspaceSvg.prototype.rendered=!0,Blockly.WorkspaceSvg.prototype.isFlyout=!1,Blockly.WorkspaceSvg.prototype.isMutator=!1,Blockly.WorkspaceSvg.prototype.resizesEnabled_=!0,Blockly.WorkspaceSvg.prototype.scrollX=0,Blockly.WorkspaceSvg.prototype.scrollY=0,Blockly.WorkspaceSvg.prototype.startScrollX=0,Blockly.WorkspaceSvg.prototype.startScrollY=0,Blockly.WorkspaceSvg.prototype.dragDeltaXY_=null,Blockly.WorkspaceSvg.prototype.scale=1,Blockly.WorkspaceSvg.prototype.trashcan=null,Blockly.WorkspaceSvg.prototype.scrollbar=null,Blockly.WorkspaceSvg.prototype.currentGesture_=null,Blockly.WorkspaceSvg.prototype.blockDragSurface_=null,Blockly.WorkspaceSvg.prototype.workspaceDragSurface_=null,Blockly.WorkspaceSvg.prototype.useWorkspaceDragSurface_=!1,Blockly.WorkspaceSvg.prototype.isDragSurfaceActive_=!1,Blockly.WorkspaceSvg.prototype.injectionDiv_=null,Blockly.WorkspaceSvg.prototype.lastRecordedPageScroll_=null,Blockly.WorkspaceSvg.prototype.injectionDiv_=null,Blockly.WorkspaceSvg.prototype.flyoutButtonCallbacks_={},Blockly.WorkspaceSvg.prototype.toolboxCategoryCallbacks_={},Blockly.WorkspaceSvg.prototype.configureContextMenu=null,Blockly.WorkspaceSvg.prototype.targetWorkspace=null,Blockly.WorkspaceSvg.prototype.inverseScreenCTM_=null,Blockly.WorkspaceSvg.prototype.getInverseScreenCTM=function(){return this.inverseScreenCTM_},Blockly.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){var e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM_=e.inverse())},Blockly.WorkspaceSvg.prototype.getSvgXY=function(e){var t=0,n=0,o=1;(goog.dom.contains(this.getCanvas(),e)||goog.dom.contains(this.getBubbleCanvas(),e))&&(o=this.scale);do{var r=Blockly.utils.getRelativeXY(e);e!=this.getCanvas()&&e!=this.getBubbleCanvas()||(o=1),t+=r.x*o,n+=r.y*o,e=e.parentNode}while(e&&e!=this.getParentSvg());return new goog.math.Coordinate(t,n)},Blockly.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return Blockly.utils.getInjectionDivXY_(this.svgBlockCanvas_)},Blockly.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var e=this.svgGroup_;e;){if(-1!=(" "+(e.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")){this.injectionDiv_=e;break}e=e.parentNode}return this.injectionDiv_},Blockly.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(e){this.resizeHandlerWrapper_=e},Blockly.WorkspaceSvg.prototype.createDom=function(e){return this.svgGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyWorkspace"},null),e&&(this.svgBackground_=Blockly.utils.createSvgElement("rect",{height:"100%",width:"100%",class:e},this.svgGroup_),"blocklyMainBackground"==e&&this.grid_&&(this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")")),this.svgBlockCanvas_=Blockly.utils.createSvgElement("g",{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=Blockly.utils.createSvgElement("g",{class:"blocklyBubbleCanvas"},this.svgGroup_),e=Blockly.Scrollbar.scrollbarThickness,this.options.hasTrashcan&&(e=this.addTrashcan_(e)),this.options.zoomOptions&&this.options.zoomOptions.controls&&this.addZoomControls_(e),this.isFlyout||(Blockly.bindEventWithChecks_(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),this.options.zoomOptions&&this.options.zoomOptions.wheel&&Blockly.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new Blockly.Toolbox(this)),this.grid_&&this.grid_.update(this.scale),this.recordDeleteAreas(),this.svgGroup_},Blockly.WorkspaceSvg.prototype.dispose=function(){this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),Blockly.WorkspaceSvg.superClass_.dispose.call(this),this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.toolboxCategoryCallbacks_&&(this.toolboxCategoryCallbacks_=null),this.flyoutButtonCallbacks_&&(this.flyoutButtonCallbacks_=null),this.options.parentWorkspace||goog.dom.removeNode(this.getParentSvg().parentNode),this.resizeHandlerWrapper_&&(Blockly.unbindEvent_(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},Blockly.WorkspaceSvg.prototype.newBlock=function(e,t){return new Blockly.BlockSvg(this,e,t)},Blockly.WorkspaceSvg.prototype.addTrashcan_=function(e){this.trashcan=new Blockly.Trashcan(this);var t=this.trashcan.createDom();return this.svgGroup_.insertBefore(t,this.svgBlockCanvas_),this.trashcan.init(e)},Blockly.WorkspaceSvg.prototype.addZoomControls_=function(e){this.zoomControls_=new Blockly.ZoomControls(this);var t=this.zoomControls_.createDom();return this.svgGroup_.appendChild(t),this.zoomControls_.init(e)},Blockly.WorkspaceSvg.prototype.addFlyout_=function(e){var t={disabledPatternId:this.options.disabledPatternId,parentWorkspace:this,RTL:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,toolboxPosition:this.options.toolboxPosition};return this.flyout_=this.horizontalLayout?new Blockly.HorizontalFlyout(t):new Blockly.VerticalFlyout(t),this.flyout_.autoClose=!1,this.flyout_.createDom(e)},Blockly.WorkspaceSvg.prototype.getFlyout=function(){return this.flyout_?this.flyout_:this.toolbox_?this.toolbox_.flyout_:null},Blockly.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},Blockly.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDeleteAreas()},Blockly.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},Blockly.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position(),this.trashcan&&this.trashcan.position(),this.zoomControls_&&this.zoomControls_.position(),this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},Blockly.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var e=goog.dom.getDocumentScroll();goog.math.Coordinate.equals(this.lastRecordedPageScroll_,e)||(this.lastRecordedPageScroll_=e,this.updateScreenCalculations_())},Blockly.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},Blockly.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},Blockly.WorkspaceSvg.prototype.getParentSvg=function(){if(this.cachedParentSvg_)return this.cachedParentSvg_;for(var e=this.svgGroup_;e;){if("svg"==e.tagName)return this.cachedParentSvg_=e;e=e.parentNode}return null},Blockly.WorkspaceSvg.prototype.translate=function(e,t){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(e,t);else{var n="translate("+e+","+t+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",n),this.svgBubbleCanvas_.setAttribute("transform",n)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(e,t,this.scale)},Blockly.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var e=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),e="translate("+e.x+","+e.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",e),this.svgBubbleCanvas_.setAttribute("transform",e)}},Blockly.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var e=this.svgBlockCanvas_.previousSibling,t=parseInt(this.getParentSvg().getAttribute("width"),10),n=parseInt(this.getParentSvg().getAttribute("height"),10),o=Blockly.utils.getRelativeXY(this.svgBlockCanvas_);this.workspaceDragSurface_.setContentsAndShow(this.svgBlockCanvas_,this.svgBubbleCanvas_,e,t,n,this.scale),this.workspaceDragSurface_.translateSurface(o.x,o.y)}},Blockly.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},Blockly.WorkspaceSvg.prototype.getWidth=function(){var e=this.getMetrics();return e?e.viewWidth/this.scale:0},Blockly.WorkspaceSvg.prototype.setVisible=function(e){this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox_&&(this.toolbox_.HtmlDiv.style.display=e?"block":"none"),e?(this.render(),this.resize()):(Blockly.hideChaff(!0),Blockly.DropDownDiv.hideWithoutAnimation())},Blockly.WorkspaceSvg.prototype.render=function(){for(var e=this.getAllBlocks(),t=e.length-1;0<=t;t--)e[t].render(!1)},Blockly.WorkspaceSvg.prototype.traceOn=function(){console.warn("Deprecated call to traceOn, delete this.")},Blockly.WorkspaceSvg.prototype.highlightBlock=function(e,t){if(void 0===t){for(var n,o=0;n=this.highlightedBlocks_[o];o++)n.setHighlightBlock(!1);this.highlightedBlocks_.length=0}(n=e?this.getBlockById(e):null)&&((o=void 0===t||t)?-1==this.highlightedBlocks_.indexOf(n)&&this.highlightedBlocks_.push(n):goog.array.remove(this.highlightedBlocks_,n),n.setHighlightBlock(o))},Blockly.WorkspaceSvg.prototype.glowBlock=function(e,t){var n=null;if(e&&!(n=this.getBlockById(e)))throw"Tried to glow block that does not exist.";n.setGlowBlock(t)},Blockly.WorkspaceSvg.prototype.glowStack=function(e,t){var n=null;if(e&&!(n=this.getBlockById(e)))throw"Tried to glow stack on block that does not exist.";n.setGlowStack(t)},Blockly.WorkspaceSvg.prototype.reportValue=function(e,t){var n=this.getBlockById(e);if(!n)throw"Tried to report value on block that does not exist.";Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var o=Blockly.DropDownDiv.getContentDiv(),r=goog.dom.createElement("div");r.setAttribute("class","valueReportBox"),r.innerHTML=Blockly.utils.encodeEntities(t),o.appendChild(r),Blockly.DropDownDiv.setColour(Blockly.Colours.valueReportBackground,Blockly.Colours.valueReportBorder),Blockly.DropDownDiv.showPositionedByBlock(this,n)},Blockly.WorkspaceSvg.prototype.centerOnBlock=function(e){if(this.scrollbar){if(e=this.getBlockById(e)){var t=e.getRelativeToSurfaceXY(),n=e.getHeightWidth(),o=this.scale;e=(t.x+n.width/2)*o,t=(t.y+n.height/2)*o,e=e-(n=this.getMetrics()).contentLeft-n.viewWidth/2,t=t-n.contentTop-n.viewHeight/2,Blockly.hideChaff(),this.scrollbar.set(e,t)}}else console.warn("Tried to scroll a non-scrollable workspace.")},Blockly.WorkspaceSvg.prototype.paste=function(e){this.rendered&&(this.currentGesture_&&this.currentGesture_.cancel(),"comment"==e.tagName.toLowerCase()?this.pasteWorkspaceComment_(e):this.pasteBlock_(e))},Blockly.WorkspaceSvg.prototype.pasteBlock_=function(e){Blockly.Events.disable();try{var t=Blockly.Xml.domToBlock(e,this),n=parseInt(e.getAttribute("x"),10),o=parseInt(e.getAttribute("y"),10);if(!isNaN(n)&&!isNaN(o)){this.RTL&&(n=-n);do{e=!1;for(var r,i=this.getAllBlocks(),a=0;r=i[a];a++){var s=r.getRelativeToSurfaceXY();if(Math.abs(n-s.x)<=1&&Math.abs(o-s.y)<=1){e=!0;break}}if(!e){var l,c=t.getConnections_(!1);for(a=0;l=c[a];a++)if(l.closest(Blockly.SNAP_RADIUS,new goog.math.Coordinate(n,o)).connection){e=!0;break}}e&&(n=this.RTL?n-Blockly.SNAP_RADIUS:n+Blockly.SNAP_RADIUS,o+=2*Blockly.SNAP_RADIUS)}while(e);t.moveBy(n,o)}}finally{Blockly.Events.enable()}Blockly.Events.isEnabled()&&!t.isShadow()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(t)),t.select()},Blockly.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(e){Blockly.Events.disable();try{var t=Blockly.WorkspaceCommentSvg.fromXml(e,this),n=parseInt(e.getAttribute("x"),10),o=parseInt(e.getAttribute("y"),10);isNaN(n)||isNaN(o)||(this.RTL&&(n=-n),t.moveBy(n+50,o+50))}finally{Blockly.Events.enable()}Blockly.Events.isEnabled(),t.select()},Blockly.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox_&&e.toolbox_.flyout_&&e.toolbox_.refreshSelection()},Blockly.WorkspaceSvg.prototype.renameVariableById=function(e,t){Blockly.WorkspaceSvg.superClass_.renameVariableById.call(this,e,t),this.refreshToolboxSelection()},Blockly.WorkspaceSvg.prototype.deleteVariableById=function(e){Blockly.WorkspaceSvg.superClass_.deleteVariableById.call(this,e),this.refreshToolboxSelection()},Blockly.WorkspaceSvg.prototype.createVariable=function(e,t,n){return e=Blockly.WorkspaceSvg.superClass_.createVariable.call(this,e,t,n),this.refreshToolboxSelection(),e},Blockly.WorkspaceSvg.prototype.recordDeleteAreas=function(){this.deleteAreaTrash_=this.trashcan&&this.svgGroup_.parentNode?this.trashcan.getClientRect():null,this.deleteAreaToolbox_=this.flyout_?this.flyout_.getClientRect():this.toolbox_?this.toolbox_.getClientRect():null},Blockly.WorkspaceSvg.prototype.isDeleteArea=function(e){return e=new goog.math.Coordinate(e.clientX,e.clientY),this.deleteAreaTrash_&&this.deleteAreaTrash_.contains(e)?Blockly.DELETE_AREA_TRASH:this.deleteAreaToolbox_&&this.deleteAreaToolbox_.contains(e)?Blockly.DELETE_AREA_TOOLBOX:Blockly.DELETE_AREA_NONE},Blockly.WorkspaceSvg.prototype.onMouseDown_=function(e){var t=this.getGesture(e);t&&t.handleWsStart(e,this)},Blockly.WorkspaceSvg.prototype.startDrag=function(e,t){var n=Blockly.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM());n.x/=this.scale,n.y/=this.scale,this.dragDeltaXY_=goog.math.Coordinate.difference(t,n)},Blockly.WorkspaceSvg.prototype.moveDrag=function(e){return(e=Blockly.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,e.y/=this.scale,goog.math.Coordinate.sum(this.dragDeltaXY_,e)},Blockly.WorkspaceSvg.prototype.isDragging=function(){return null!=this.currentGesture_&&this.currentGesture_.isDragging()},Blockly.WorkspaceSvg.prototype.isDraggable=function(){return!!this.scrollbar},Blockly.WorkspaceSvg.prototype.onMouseWheel_=function(e){if(this.currentGesture_&&this.currentGesture_.cancel(),e.ctrlKey||e.metaKey){var t=-e.deltaY/50,n=Blockly.utils.mouseToSvg(e,this.getParentSvg(),this.getInverseScreenCTM());this.zoom(n.x,n.y,t)}else Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),t=this.scrollX-e.deltaX,n=this.scrollY-e.deltaY,this.startDragMetrics=this.getMetrics(),this.scroll(t,n);e.preventDefault()},Blockly.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var e=this.getTopBlocks(!1),t=this.getTopComments(!1);if(!(e=e.concat(t)).length)return{x:0,y:0,width:0,height:0};t=e[0].getBoundingRectangle();for(var n=1;n<e.length;n++){var o=e[n].getBoundingRectangle();o.topLeft.x<t.topLeft.x&&(t.topLeft.x=o.topLeft.x),o.bottomRight.x>t.bottomRight.x&&(t.bottomRight.x=o.bottomRight.x),o.topLeft.y<t.topLeft.y&&(t.topLeft.y=o.topLeft.y),o.bottomRight.y>t.bottomRight.y&&(t.bottomRight.y=o.bottomRight.y)}return{x:t.topLeft.x,y:t.topLeft.y,width:t.bottomRight.x-t.topLeft.x,height:t.bottomRight.y-t.topLeft.y}},Blockly.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),Blockly.Events.setGroup(!0);for(var e,t=this.getTopBlocks(!0),n=0,o=0;e=t[o];o++){var r=e.getRelativeToSurfaceXY();e.moveBy(-r.x,n-r.y),e.snapToGrid(),n=e.getRelativeToSurfaceXY().y+e.getHeightWidth().height+Blockly.BlockSvg.MIN_BLOCK_Y}Blockly.Events.setGroup(!1),this.setResizesEnabled(!0)},Blockly.WorkspaceSvg.prototype.showContextMenu_=function(e){function t(){Blockly.Events.setGroup(r);var e=u.shift();e&&(e.workspace?(e.dispose(!1,!0),setTimeout(t,10)):t()),Blockly.Events.setGroup(!1)}if(!this.options.readOnly&&!this.isFlyout){var n=[],o=this.getTopBlocks(!0),r=Blockly.utils.genUid(),i=this;if(n.push(Blockly.ContextMenu.wsUndoOption(this)),n.push(Blockly.ContextMenu.wsRedoOption(this)),this.options.comments&&n.push(Blockly.ContextMenu.workspaceCommentOption(i,e)),this.scrollbar&&n.push(Blockly.ContextMenu.wsCleanupOption(this,o.length)),this.options.collapse){for(var a=!1,s=!1,l=0;l<o.length;l++)for(var c=o[l];c;)c.isCollapsed()?a=!0:s=!0,c=c.getNextBlock();n.push(Blockly.ContextMenu.wsCollapseOption(s,o)),n.push(Blockly.ContextMenu.wsExpandOption(a,o))}var u=Blockly.WorkspaceSvg.buildDeleteList_(o);for(l=o=0;l<u.length;l++)u[l].isShadow()||o++;l={text:1==o?Blockly.Msg.DELETE_BLOCK:Blockly.Msg.DELETE_X_BLOCKS.replace("%1",String(o)),enabled:0<o,callback:function(){i.currentGesture_&&i.currentGesture_.cancel(),u.length<2?t():Blockly.confirm(Blockly.Msg.DELETE_ALL_BLOCKS.replace("%1",u.length),function(e){e&&t()})}},n.push(l),this.configureContextMenu&&this.configureContextMenu(n),Blockly.ContextMenu.show(e,n,this.RTL)}},Blockly.WorkspaceSvg.buildDeleteList_=function(e){function n(e){if(e.isDeletable())o=o.concat(e.getDescendants());else{e=e.getChildren();for(var t=0;t<e.length;t++)n(e[t])}}for(var o=[],t=0;t<e.length;t++)n(e[t]);return o},Blockly.WorkspaceSvg.prototype.updateToolbox=function(e){if(e=Blockly.Options.parseToolboxTree(e)){if(!this.options.languageTree)throw"Existing toolbox is null.  Can't create new toolbox.";if(e.getElementsByTagName("category").length){if(!this.toolbox_)throw"Existing toolbox has no categories.  Can't change mode.";this.options.languageTree=e;var t=this.toolbox_.populate_(e);t?this.toolbox_.tree_.setSelectedItem(t):this.toolbox_.flyout_.hide(),this.toolbox_.populate_(e),this.toolbox_.addColour_()}else{if(!this.flyout_)throw"Existing toolbox has categories.  Can't change mode.";this.options.languageTree=e,this.flyout_.show(e.childNodes)}}else if(this.options.languageTree)throw"Can't nullify an existing toolbox."},Blockly.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(Blockly.mainWorkspace=this).setBrowserFocus()},Blockly.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur();try{this.getParentSvg().focus()}catch(e){try{this.getParentSvg().parentNode.setActive()}catch(e){this.getParentSvg().parentNode.focus()}}},Blockly.WorkspaceSvg.prototype.zoom=function(e,t,n){var o=this.options.zoomOptions.scaleSpeed,r=this.getMetrics(),i=this.getParentSvg().createSVGPoint();i.x=e,i.y=t,e=(i=i.matrixTransform(this.getCanvas().getCTM().inverse())).x,t=i.y,i=this.getCanvas(),o=Math.pow(o,n),(n=this.scale*o)>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale/this.scale:n<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale/this.scale),this.scale!=n&&(this.scrollbar&&(e=i.getCTM().translate(e*(1-o),t*(1-o)).scale(o),this.scrollX=e.e-r.absoluteLeft,this.scrollY=e.f-r.absoluteTop),this.setScale(n),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation())},Blockly.WorkspaceSvg.prototype.zoomCenter=function(e){var t=this.getMetrics();this.zoom(t.viewWidth/2,t.viewHeight/2,e)},Blockly.WorkspaceSvg.prototype.zoomToFit=function(){var e=this.getMetrics(),t=this.getBlocksBoundingBox(),n=t.width;if(t=t.height,n){var o=e.viewWidth,r=e.viewHeight;this.flyout_&&(o-=this.flyout_.width_),this.scrollbar||(n+=e.contentLeft,t+=e.contentTop),this.setScale(Math.min(o/n,r/t)),this.scrollCenter()}},Blockly.WorkspaceSvg.prototype.scrollCenter=function(){if(this.scrollbar){var e=this.getMetrics(),t=(e.contentWidth-e.viewWidth)/2;this.flyout_&&(t-=this.flyout_.width_/2),this.scrollbar.set(t,(e.contentHeight-e.viewHeight)/2)}else console.warn("Tried to scroll a non-scrollable workspace.")},Blockly.WorkspaceSvg.prototype.centerOnBlock=function(e){if(this.scrollbar){if(e=this.getBlockById(e)){var t=e.getRelativeToSurfaceXY(),n=e.getHeightWidth(),o=this.scale;e=(t.x+(this.RTL?-1:1)*n.width/2)*o,t=(t.y+n.height/2)*o,e=e-(n=this.getMetrics()).contentLeft-n.viewWidth/2,t=t-n.contentTop-n.viewHeight/2,Blockly.hideChaff(),this.scrollbar.set(e,t)}}else console.warn("Tried to scroll a non-scrollable workspace.")},Blockly.WorkspaceSvg.prototype.setScale=function(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.grid_&&this.grid_.update(this.scale),this.scrollbar?this.scrollbar.resize():this.translate(this.scrollX,this.scrollY),Blockly.hideChaff(!1),this.flyout_&&this.flyout_.reflow()},Blockly.WorkspaceSvg.prototype.scroll=function(e,t){var n=this.startDragMetrics;e=Math.min(e,-n.contentLeft),t=Math.min(t,-n.contentTop),e=Math.max(e,n.viewWidth-n.contentLeft-n.contentWidth),t=Math.max(t,n.viewHeight-n.contentTop-n.contentHeight),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),this.scrollbar.set(-e-n.contentLeft,-t-n.contentTop)},Blockly.WorkspaceSvg.prototype.updateStackGlowScale_=function(){this.options.stackGlowBlur&&this.options.stackGlowBlur.setAttribute("stdDeviation",Blockly.STACK_GLOW_RADIUS/this.scale)},Blockly.WorkspaceSvg.getDimensionsPx_=function(e){var t=0,n=0;return e&&(t=e.getWidth(),n=e.getHeight()),{width:t,height:n}},Blockly.WorkspaceSvg.getContentDimensions_=function(e,t){return e.scrollbar?Blockly.WorkspaceSvg.getContentDimensionsBounded_(e,t):Blockly.WorkspaceSvg.getContentDimensionsExact_(e)},Blockly.WorkspaceSvg.getContentDimensionsExact_=function(e){var t=e.getBlocksBoundingBox(),n=e.scale;e=t.width*n;var o=t.height*n,r=t.x*n;return{left:r,top:t=t.y*n,right:r+e,bottom:t+o,width:e,height:o}},Blockly.WorkspaceSvg.getContentDimensionsBounded_=function(e,t){var n=Blockly.WorkspaceSvg.getContentDimensionsExact_(e),o=t.width,r=t.height,i=o/2,a=r/2,s=Math.min(n.left-i,n.right-o),l=Math.min(n.top-a,n.bottom-r);return{left:s,top:l,height:Math.max(n.bottom+a,n.top+r)-l,width:Math.max(n.right+i,n.left+o)-s}},Blockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_=function(){var e=Blockly.WorkspaceSvg.getDimensionsPx_(this.toolbox_),t=Blockly.WorkspaceSvg.getDimensionsPx_(this.flyout_),n=Blockly.svgSize(this.getParentSvg());this.toolbox_&&(this.toolboxPosition==Blockly.TOOLBOX_AT_TOP||this.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM?n.height-=e.height:this.toolboxPosition!=Blockly.TOOLBOX_AT_LEFT&&this.toolboxPosition!=Blockly.TOOLBOX_AT_RIGHT||(n.width-=e.width));var o=Blockly.WorkspaceSvg.getContentDimensions_(this,n),r=0;this.toolbox_&&this.toolboxPosition==Blockly.TOOLBOX_AT_LEFT&&(r=e.width);var i=0;return this.toolbox_&&this.toolboxPosition==Blockly.TOOLBOX_AT_TOP&&(i=e.height),{contentHeight:o.height,contentWidth:o.width,contentTop:o.top,contentLeft:o.left,viewHeight:n.height,viewWidth:n.width,viewTop:-this.scrollY,viewLeft:-this.scrollX,absoluteTop:i,absoluteLeft:r,toolboxWidth:e.width,toolboxHeight:e.height,flyoutWidth:t.width,flyoutHeight:t.height,toolboxPosition:this.toolboxPosition}},Blockly.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(e){if(!this.scrollbar)throw"Attempt to set top level workspace scroll without scrollbars.";var t=this.getMetrics();goog.isNumber(e.x)&&(this.scrollX=-t.contentWidth*e.x-t.contentLeft),goog.isNumber(e.y)&&(this.scrollY=-t.contentHeight*e.y-t.contentTop),e=this.scrollX+t.absoluteLeft,t=this.scrollY+t.absoluteTop,this.translate(e,t),this.grid_&&this.grid_.moveTo(e,t)},Blockly.WorkspaceSvg.prototype.setResizesEnabled=function(e){var t=!this.resizesEnabled_&&e;this.resizesEnabled_=e,t&&this.resizeContents()},Blockly.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),Blockly.WorkspaceSvg.superClass_.clear.call(this),this.setResizesEnabled(!0)},Blockly.WorkspaceSvg.prototype.registerButtonCallback=function(e,t){goog.asserts.assert(goog.isFunction(t),"Button callbacks must be functions."),this.flyoutButtonCallbacks_[e]=t},Blockly.WorkspaceSvg.prototype.getButtonCallback=function(e){return(e=this.flyoutButtonCallbacks_[e])?e:null},Blockly.WorkspaceSvg.prototype.removeButtonCallback=function(e){this.flyoutButtonCallbacks_[e]=null},Blockly.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(e,t){goog.asserts.assert(goog.isFunction(t),"Toolbox category callbacks must be functions."),this.toolboxCategoryCallbacks_[e]=t},Blockly.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(e){return(e=this.toolboxCategoryCallbacks_[e])?e:null},Blockly.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(e){this.toolboxCategoryCallbacks_[e]=null},Blockly.WorkspaceSvg.prototype.getGesture=function(e){var t="mousedown"==e.type||"touchstart"==e.type||"pointerdown"==e.type,n=this.currentGesture_;return n?t&&n.hasStarted()?(console.warn("tried to start the same gesture twice"),n.cancel(),null):n:t?this.currentGesture_=new Blockly.TouchGesture(e,this):null},Blockly.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},Blockly.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},Blockly.WorkspaceSvg.prototype.startDragWithFakeEvent=function(e,t){Blockly.Touch.clearTouchIdentifier(),Blockly.Touch.checkTouchIdentifier(e),t.workspace.getGesture(e).forceStartBlockDrag(e,t)},Blockly.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},Blockly.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},Blockly.WorkspaceSvg.prototype.setVisible=Blockly.WorkspaceSvg.prototype.setVisible,Blockly.Mutator=function(e){Blockly.Mutator.superClass_.constructor.call(this,null),this.quarkNames_=e},goog.inherits(Blockly.Mutator,Blockly.Icon),Blockly.Mutator.prototype.workspaceWidth_=0,Blockly.Mutator.prototype.workspaceHeight_=0,Blockly.Mutator.prototype.drawIcon_=function(e){Blockly.utils.createSvgElement("rect",{class:"blocklyIconShape",rx:"10",ry:"10",height:"16",width:"16"},e),Blockly.utils.createSvgElement("path",{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},e),Blockly.utils.createSvgElement("circle",{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},e)},Blockly.Mutator.prototype.iconClick_=function(e){this.block_.isEditable()&&Blockly.Icon.prototype.iconClick_.call(this,e)},Blockly.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=Blockly.utils.createSvgElement("svg",{x:Blockly.Bubble.BORDER_WIDTH,y:Blockly.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var e,t=goog.dom.createDom("xml"),n=0;e=this.quarkNames_[n];n++)t.appendChild(goog.dom.createDom("block",{type:e}));else t=null;return t={languageTree:t,parentWorkspace:this.block_.workspace,pathToMedia:this.block_.workspace.options.pathToMedia,RTL:this.block_.RTL,toolboxPosition:this.block_.RTL?Blockly.TOOLBOX_AT_RIGHT:Blockly.TOOLBOX_AT_LEFT,horizontalLayout:!1,getMetrics:this.getFlyoutMetrics_.bind(this),setMetrics:null},this.workspace_=new Blockly.WorkspaceSvg(t,this.block_.workspace.dragSurface),this.workspace_.isMutator=!0,t=this.workspace_.addFlyout_("g"),(n=this.workspace_.createDom("blocklyMutatorBackground")).insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(n),this.svgDialog_},Blockly.Mutator.prototype.updateEditable=function(){this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&Blockly.utils.removeClass(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&Blockly.utils.addClass(this.iconGroup_,"blocklyIconGroupReadonly"))),Blockly.Icon.prototype.updateEditable.call(this)},Blockly.Mutator.prototype.resizeBubble_=function(){var e=2*Blockly.Bubble.BORDER_WIDTH,t=this.workspace_.getCanvas().getBBox(),n=this.block_.RTL?-t.x:t.width+t.x;if(t=t.height+3*e,this.workspace_.flyout_){var o=this.workspace_.flyout_.getMetrics_();t=Math.max(t,o.contentHeight+20)}n+=3*e,(Math.abs(this.workspaceWidth_-n)>e||Math.abs(this.workspaceHeight_-t)>e)&&(this.workspaceWidth_=n,this.workspaceHeight_=t,this.bubble_.setBubbleSize(n+e,t+e),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_)),this.block_.RTL&&(e="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",e)),this.workspace_.resize()},Blockly.Mutator.prototype.setVisible=function(e){if(e!=this.isVisible())if(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,"mutatorOpen",!e,e)),e){this.bubble_=new Blockly.Bubble(this.block_.workspace,this.createEditor_(),this.block_.svgPath_,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),(e=this.workspace_.options.languageTree)&&(this.workspace_.flyout_.init(this.workspace_),this.workspace_.flyout_.show(e.childNodes)),this.rootBlock_=this.block_.decompose(this.workspace_),e=this.rootBlock_.getDescendants(!1);for(var t,n=0;t=e[n];n++)t.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),this.workspace_.flyout_?(e=2*this.workspace_.flyout_.CORNER_RADIUS,n=this.workspace_.flyout_.width_+e):n=e=16,this.block_.RTL&&(n=-n),this.rootBlock_.moveBy(n,e),this.block_.saveConnections){var o=this;this.block_.saveConnections(this.rootBlock_),this.sourceListener_=function(){o.block_.saveConnections(o.rootBlock_)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.updateColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},Blockly.Mutator.prototype.workspaceChanged_=function(){if(!this.workspace_.isDragging())for(var e,t=this.workspace_.getTopBlocks(!1),n=0;e=t[n];n++){var o=e.getRelativeToSurfaceXY(),r=e.getHeightWidth();o.y+r.height<20&&e.moveBy(0,20-r.height-o.y)}if(this.rootBlock_.workspace==this.workspace_){if(Blockly.Events.setGroup(!0),t=(t=(e=this.block_).mutationToDom())&&Blockly.Xml.domToText(t),n=e.rendered,e.rendered=!1,e.compose(this.rootBlock_),e.rendered=n,e.initSvg(),t!=(n=(n=e.mutationToDom())&&Blockly.Xml.domToText(n))){Blockly.Events.fire(new Blockly.Events.BlockChange(e,"mutation",null,t,n));var i=Blockly.Events.getGroup();setTimeout(function(){Blockly.Events.setGroup(i),e.bumpNeighbours_(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)}e.rendered&&e.render(),this.workspace_.isDragging()||this.resizeBubble_(),Blockly.Events.setGroup(!1)}},Blockly.Mutator.prototype.getFlyoutMetrics_=function(){return{viewHeight:this.workspaceHeight_,viewWidth:this.workspaceWidth_,absoluteTop:0,absoluteLeft:0}},Blockly.Mutator.prototype.dispose=function(){this.block_.mutator=null,Blockly.Icon.prototype.dispose.call(this)},Blockly.Mutator.reconnect=function(e,t,n){if(!e||!e.getSourceBlock().workspace)return!1;n=t.getInput(n).connection;var o=e.targetBlock();return!(o&&o!=t||n.targetConnection==e)&&(n.isConnected()&&n.disconnect(),n.connect(e),!0)},Blockly.Mutator.findParentWs=function(e){var t=null;if(e&&e.options){var n=e.options.parentWorkspace;e.isFlyout?n&&n.options&&(t=n.options.parentWorkspace):n&&(t=n)}return t},goog.global.Blockly||(goog.global.Blockly={}),goog.global.Blockly.Mutator||(goog.global.Blockly.Mutator={}),goog.global.Blockly.Mutator.reconnect=Blockly.Mutator.reconnect,Blockly.Extensions={},Blockly.Extensions.ALL_={},Blockly.Extensions.register=function(e,t){if(!goog.isString(e)||goog.string.isEmptyOrWhitespace(e))throw Error('Error: Invalid extension name "'+e+'"');if(Blockly.Extensions.ALL_[e])throw Error('Error: Extension "'+e+'" is already registered.');if(!goog.isFunction(t))throw Error('Error: Extension "'+e+'" must be a function');Blockly.Extensions.ALL_[e]=t},Blockly.Extensions.registerMixin=function(e,t){if(!goog.isObject(t))throw Error('Error: Mixin "'+e+'" must be a object');Blockly.Extensions.register(e,function(){this.mixin(t)})},Blockly.Extensions.registerMutator=function(e,t,n,o){var r='Error when registering mutator "'+e+'": ';Blockly.Extensions.checkHasFunction_(r,t.domToMutation,"domToMutation"),Blockly.Extensions.checkHasFunction_(r,t.mutationToDom,"mutationToDom");var i=Blockly.Extensions.checkMutatorDialog_(t,r);if(n&&!goog.isFunction(n))throw Error('Extension "'+e+'" is not a function');Blockly.Extensions.register(e,function(){i&&this.setMutator(new Blockly.Mutator(o)),this.mixin(t),n&&n.apply(this)})},Blockly.Extensions.apply=function(e,t,n){var o=Blockly.Extensions.ALL_[e];if(!goog.isFunction(o))throw Error('Error: Extension "'+e+'" not found.');if(n)Blockly.Extensions.checkNoMutatorProperties_(e,t);else var r=Blockly.Extensions.getMutatorProperties_(t);if(o.apply(t),n)Blockly.Extensions.checkBlockHasMutatorProperties_('Error after applying mutator "'+e+'": ',t);else if(!Blockly.Extensions.mutatorPropertiesMatch_(r,t))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},Blockly.Extensions.checkHasFunction_=function(e,t,n){if(!t)throw Error(e+'missing required property "'+n+'"');if("function"!=typeof t)throw Error(e+'" required property "'+n+'" must be a function')},Blockly.Extensions.checkNoMutatorProperties_=function(e,t){if(Blockly.Extensions.getMutatorProperties_(t).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+t.id)},Blockly.Extensions.checkMutatorDialog_=function(e,t){var n=void 0!==e.compose,o=void 0!==e.decompose;if(n&&o){if("function"!=typeof e.compose)throw Error(t+"compose must be a function.");if("function"!=typeof e.decompose)throw Error(t+"decompose must be a function.");return!0}if(n||o)throw Error(t+'Must have both or neither of "compose" and "decompose"');return!1},Blockly.Extensions.checkBlockHasMutatorProperties_=function(e,t){if("function"!=typeof t.domToMutation)throw Error(e+'Applying a mutator didn\'t add "domToMutation"');if("function"!=typeof t.mutationToDom)throw Error(e+'Applying a mutator didn\'t add "mutationToDom"');Blockly.Extensions.checkMutatorDialog_(t,e)},Blockly.Extensions.getMutatorProperties_=function(e){var t=[];return void 0!==e.domToMutation&&t.push(e.domToMutation),void 0!==e.mutationToDom&&t.push(e.mutationToDom),void 0!==e.compose&&t.push(e.compose),void 0!==e.decompose&&t.push(e.decompose),t},Blockly.Extensions.mutatorPropertiesMatch_=function(e,t){var n=Blockly.Extensions.getMutatorProperties_(t);if(n.length!=e.length)return!1;for(var o=0;o<n.length;o++)if(e[o]!=n[o])return!1;return!0},Blockly.Extensions.buildTooltipForDropdown=function(n,o){var r=[];return"object"==typeof document&&Blockly.utils.runAfterPageLoad(function(){for(var e in o)Blockly.utils.checkMessageReferences(o[e])}),function(){this.type&&-1===r.indexOf(this.type)&&(Blockly.Extensions.checkDropdownOptionsInTable_(this,n,o),r.push(this.type)),this.setTooltip(function(){var e=this.getFieldValue(n),t=o[e];return null==t?-1===r.indexOf(this.type)&&(e="No tooltip mapping for value "+e+" of field "+n,null!=this.type&&(e+=" of block type "+this.type),console.warn(e+".")):t=Blockly.utils.replaceMessageReferences(t),t}.bind(this))}},Blockly.Extensions.checkDropdownOptionsInTable_=function(e,t,n){var o=e.getField(t);if(!o.isOptionListDynamic()){o=o.getOptions();for(var r=0;r<o.length;++r){var i=o[r][1];null==n[i]&&console.warn("No tooltip mapping for value "+i+" of field "+t+" of block type "+e.type)}}},Blockly.Extensions.buildTooltipWithFieldText=function(t,n){return"object"==typeof document&&Blockly.utils.runAfterPageLoad(function(){Blockly.utils.checkMessageReferences(t)}),function(){this.setTooltip(function(){var e=this.getField(n);return Blockly.utils.replaceMessageReferences(t).replace("%1",e?e.getText():"")}.bind(this))}},Blockly.Extensions.extensionParentTooltip_=function(){this.tooltipWhenNotConnected_=this.tooltip,this.setTooltip(function(){var e=this.getParent();return e&&e.getInputsInline()&&e.tooltip||this.tooltipWhenNotConnected_}.bind(this))},Blockly.Extensions.register("parent_tooltip_when_inline",Blockly.Extensions.extensionParentTooltip_),Blockly.Field=function(e,t){this.size_=new goog.math.Size(Blockly.BlockSvg.FIELD_WIDTH,Blockly.BlockSvg.FIELD_HEIGHT),this.setValue(e),this.setValidator(t),this.maxDisplayLength=Blockly.BlockSvg.MAX_DISPLAY_LENGTH},Blockly.Field.TYPE_MAP_={},Blockly.Field.register=function(e,t){if(!goog.isString(e)||goog.string.isEmptyOrWhitespace(e))throw Error('Invalid field type "'+e+'"');if(!goog.isObject(t)||!goog.isFunction(t.fromJson))throw Error('Field "'+t+'" must have a fromJson function');Blockly.Field.TYPE_MAP_[e]=t},Blockly.Field.fromJson=function(e){var t=Blockly.Field.TYPE_MAP_[e.type];return t?t.fromJson(e):null},Blockly.Field.cacheWidths_=null,Blockly.Field.cacheReference_=0,Blockly.Field.prototype.name=void 0,Blockly.Field.prototype.className_="blocklyText",Blockly.Field.prototype.text_="",Blockly.Field.prototype.sourceBlock_=null,Blockly.Field.prototype.visible_=!0,Blockly.Field.prototype.argType_=null,Blockly.Field.prototype.validator_=null,Blockly.Field.NBSP="",Blockly.Field.IE_TEXT_OFFSET="0.3em",Blockly.Field.prototype.EDITABLE=!0,Blockly.Field.prototype.SERIALIZABLE=!0,Blockly.Field.prototype.setSourceBlock=function(e){goog.asserts.assert(!this.sourceBlock_,"Field already bound to a block."),this.sourceBlock_=e},Blockly.Field.prototype.init=function(){if(!this.fieldGroup_){this.fieldGroup_=Blockly.utils.createSvgElement("g",{},null),this.visible_||(this.fieldGroup_.style.display="none"),null!==this.getArgTypes()&&(this.sourceBlock_.isShadow()?this.sourceBlock_.svgGroup_.setAttribute("data-argument-type",this.getArgTypes()):this.fieldGroup_.setAttribute("data-argument-type",this.getArgTypes()));var e=this.getSize();this.textElement_=Blockly.utils.createSvgElement("text",{class:this.className_,x:this.sourceBlock_.RTL?-e.width/2:e.width/2,y:e.height/2+Blockly.BlockSvg.FIELD_TOP_PADDING,"dominant-baseline":"middle",dy:goog.userAgent.EDGE_OR_IE?Blockly.Field.IE_TEXT_OFFSET:"0","text-anchor":"middle"},this.fieldGroup_),this.updateEditable(),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.render_(),this.size_.width=0,this.mouseDownWrapper_=Blockly.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)}},Blockly.Field.prototype.initModel=function(){},Blockly.Field.prototype.dispose=function(){this.mouseDownWrapper_&&(Blockly.unbindEvent_(this.mouseDownWrapper_),this.mouseDownWrapper_=null),this.sourceBlock_=null,goog.dom.removeNode(this.fieldGroup_),this.validator_=this.textElement_=this.fieldGroup_=null},Blockly.Field.prototype.updateEditable=function(){var e=this.fieldGroup_;this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(Blockly.utils.addClass(e,"blocklyEditableText"),Blockly.utils.removeClass(e,"blocklyNonEditableText"),this.fieldGroup_.style.cursor=this.CURSOR):(Blockly.utils.addClass(e,"blocklyNonEditableText"),Blockly.utils.removeClass(e,"blocklyEditableText"),this.fieldGroup_.style.cursor=""))},Blockly.Field.prototype.isCurrentlyEditable=function(){return this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},Blockly.Field.prototype.isVisible=function(){return this.visible_},Blockly.Field.prototype.setVisible=function(e){if(this.visible_!=e){this.visible_=e;var t=this.getSvgRoot();t&&(t.style.display=e?"block":"none",this.render_())}},Blockly.Field.prototype.addArgType=function(e){null==this.argType_&&(this.argType_=[]),this.argType_.push(e)},Blockly.Field.prototype.getArgTypes=function(){return null===this.argType_||0===this.argType_.length?null:this.argType_.join(" ")},Blockly.Field.prototype.setValidator=function(e){this.validator_=e},Blockly.Field.prototype.getValidator=function(){return this.validator_},Blockly.Field.prototype.classValidator=function(e){return e},Blockly.Field.prototype.callValidator=function(e){var t=this.classValidator(e);if(null===t)return null;if(void 0!==t&&(e=t),t=this.getValidator()){if(null===(t=t.call(this,e)))return null;void 0!==t&&(e=t)}return e},Blockly.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},Blockly.Field.prototype.render_=function(){if(this.visible_&&this.textElement_){goog.dom.removeChildren(this.textElement_);var e=document.createTextNode(this.getDisplayText_());this.textElement_.appendChild(e),this.updateWidth();var t=this.leftMargin_||0;e=(this.size_.width+t-this.arrowWidth_)/2,this.sourceBlock_.RTL&&(e+=this.arrowWidth_,e-=t),this.sourceBlock_.isShadow()&&!this.positionArrow&&(t=Blockly.BlockSvg.FIELD_WIDTH/2,e=this.sourceBlock_.RTL?Math.min(this.size_.width-t,e):Math.max(t,e)),this.textElement_.setAttribute("x",e)}this.box_&&(this.box_.setAttribute("width",this.size_.width),this.box_.setAttribute("height",this.size_.height))},Blockly.Field.prototype.updateWidth=function(){var e=Blockly.Field.getCachedWidth(this.textElement_);this.EDITABLE&&(e+=Blockly.BlockSvg.EDITABLE_FIELD_PADDING),this.leftMargin_=0,this.positionLeft&&(this.leftMargin_=this.positionLeft(e),e+=this.leftMargin_),this.arrowWidth_=0,this.positionArrow&&(this.arrowWidth_=this.positionArrow(e),e+=this.arrowWidth_),this.box_&&(e+=2*Blockly.BlockSvg.BOX_FIELD_PADDING),this.size_.width=e},Blockly.Field.getCachedWidth=function(t){var e,n=t.textContent+"\n"+t.className.baseVal;if(Blockly.Field.cacheWidths_&&(e=Blockly.Field.cacheWidths_[n]))return e;try{e=goog.userAgent.IE||goog.userAgent.EDGE?t.getBBox().width:t.getComputedTextLength()}catch(e){return 8*t.textContent.length}return Blockly.Field.cacheWidths_&&(Blockly.Field.cacheWidths_[n]=e),e},Blockly.Field.startCache=function(){Blockly.Field.cacheReference_++,Blockly.Field.cacheWidths_||(Blockly.Field.cacheWidths_={})},Blockly.Field.stopCache=function(){Blockly.Field.cacheReference_--,Blockly.Field.cacheReference_||(Blockly.Field.cacheWidths_=null)},Blockly.Field.prototype.getSize=function(){return this.size_.width||this.render_(),this.size_},Blockly.Field.prototype.getScaledBBox_=function(){var e=this.getSize(),t=e.height*this.sourceBlock_.workspace.scale;e=e.width*this.sourceBlock_.workspace.scale;var n=this.getAbsoluteXY_();return{top:n.y,bottom:n.y+t,left:n.x,right:n.x+e}},Blockly.Field.prototype.getDisplayText_=function(){var e=this.text_;return e?(e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+""),e=e.replace(/\s/g,Blockly.Field.NBSP),this.sourceBlock_.RTL&&(e+=""),e):Blockly.Field.NBSP},Blockly.Field.prototype.getText=function(){return this.text_},Blockly.Field.prototype.setText=function(e){null!==e&&((e=String(e))!==this.text_&&(this.text_=e,this.forceRerender()))},Blockly.Field.prototype.forceRerender=function(){this.size_.width=0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_())},Blockly.Field.prototype.updateTextNode_=function(){if(this.textElement_){var e=this.text_;e.length>this.maxDisplayLength?(e=e.substring(0,this.maxDisplayLength-2)+"",this.textElement_.setAttribute("class",this.className_+" blocklyTextTruncated")):this.textElement_.setAttribute("class",this.className_),goog.dom.removeChildren(this.textElement_),e=e.replace(/\s/g,Blockly.Field.NBSP),this.sourceBlock_.RTL&&e&&(e+=""),e||(e=Blockly.Field.NBSP),e=document.createTextNode(e),this.textElement_.appendChild(e),this.size_.width=0}},Blockly.Field.prototype.getValue=function(){return this.getText()},Blockly.Field.prototype.setValue=function(e){if(null!==e){var t=this.getValue();t!=e&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,t,e)),this.setText(e))}},Blockly.Field.prototype.onMouseDown_=function(e){this.sourceBlock_&&this.sourceBlock_.workspace&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)},Blockly.Field.prototype.setTooltip=function(e){},Blockly.Field.prototype.getClickTarget_=function(){for(var e,t=0,n=-1,o=0;e=this.sourceBlock_.inputList[o];o++){for(var r=0;r<e.fieldRow.length;r++)n<0&&e.fieldRow[r]instanceof Blockly.FieldDropdown?n=1:e.fieldRow[r]instanceof Blockly.FieldLabel||(n=0);t+=e.fieldRow.length}return(t<=1||n)&&this.sourceBlock_.outputConnection?this.sourceBlock_.getSvgRoot():this.getSvgRoot()},Blockly.Field.prototype.getAbsoluteXY_=function(){return goog.style.getPageOffset(this.getClickTarget_())},Blockly.FieldLabel=function(e,t){this.size_=new goog.math.Size(0,0),this.class_=t,this.setValue(e)},goog.inherits(Blockly.FieldLabel,Blockly.Field),Blockly.FieldLabel.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return new Blockly.FieldLabel(t,e.class)},Blockly.FieldLabel.prototype.EDITABLE=!1,Blockly.FieldLabel.prototype.SERIALIZABLE=!1,Blockly.FieldLabel.prototype.init=function(){this.textElement_||(this.textElement_=Blockly.utils.createSvgElement("text",{class:this.className_,y:Blockly.BlockSvg.FIELD_TOP_PADDING,"text-anchor":"middle","dominant-baseline":"middle",dy:goog.userAgent.EDGE_OR_IE?Blockly.Field.IE_TEXT_OFFSET:"0"},null),this.class_&&Blockly.utils.addClass(this.textElement_,this.class_),this.visible_||(this.textElement_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.textElement_),this.textElement_.tooltip=this.sourceBlock_,Blockly.Tooltip.bindMouseEvents(this.textElement_),this.render_())},Blockly.FieldLabel.prototype.dispose=function(){goog.dom.removeNode(this.textElement_),this.textElement_=null},Blockly.FieldLabel.prototype.getSvgRoot=function(){return this.textElement_},Blockly.FieldLabel.prototype.setTooltip=function(e){this.textElement_.tooltip=e},Blockly.Field.register("field_label",Blockly.FieldLabel),Blockly.FieldLabelSerializable=function(e,t){Blockly.FieldLabelSerializable.superClass_.constructor.call(this,e,t),this.arrowWidth_=0},goog.inherits(Blockly.FieldLabelSerializable,Blockly.FieldLabel),Blockly.FieldLabelSerializable.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return new Blockly.FieldLabelSerializable(t,e.class)},Blockly.FieldLabelSerializable.prototype.EDITABLE=!1,Blockly.FieldLabelSerializable.prototype.SERIALIZABLE=!0,Blockly.FieldLabelSerializable.prototype.updateWidth=function(){this.size_.width=Blockly.Field.getCachedWidth(this.textElement_)},Blockly.FieldLabelSerializable.prototype.render_=function(){if(this.visible_&&this.textElement_){goog.dom.removeChildren(this.textElement_);var e=document.createTextNode(this.getDisplayText_());this.textElement_.appendChild(e),this.updateWidth(),e=this.size_.width/2;var t=Blockly.BlockSvg.FIELD_WIDTH/2;e=this.sourceBlock_.RTL?Math.min(this.size_.width-t,e):Math.max(t,e),this.textElement_.setAttribute("x",e)}},Blockly.Field.register("field_label_serializable",Blockly.FieldLabelSerializable),Blockly.FieldVariableGetter=function(e,t,n,o){this.size_=new goog.math.Size(Blockly.BlockSvg.FIELD_WIDTH,Blockly.BlockSvg.FIELD_HEIGHT),this.setValidator(t),this.defaultVariableName=e||"",this.setTypes_(n,o),this.value_=null},goog.inherits(Blockly.FieldVariableGetter,Blockly.Field),Blockly.FieldVariableGetter.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.variable);return new Blockly.FieldVariableGetter(t,null,e.variableTypes,e.defaultType)},Blockly.FieldVariableGetter.prototype.EDITABLE=!1,Blockly.FieldVariableGetter.prototype.SERIALIZABLE=!0,Blockly.FieldVariableGetter.prototype.init=function(){this.fieldGroup_||(Blockly.FieldVariableGetter.superClass_.init.call(this),this.initModel())},Blockly.FieldVariableGetter.prototype.initModel=function(){if(!this.variable_){this.workspace_=this.sourceBlock_.workspace;var e=Blockly.Variables.getOrCreateVariablePackage(this.workspace_,null,this.defaultVariableName,this.defaultType_);Blockly.Events.disable();try{this.setValue(e.getId())}finally{Blockly.Events.enable()}}},Blockly.FieldVariableGetter.dispose=function(){Blockly.FieldVariableGetter.superClass_.dispose.call(this),this.variableMap_=this.workspace_=null},Blockly.FieldVariableGetter.prototype.setSourceBlock=function(e){goog.asserts.assert(!e.isShadow(),"Variable fields are not allowed to exist on shadow blocks."),Blockly.FieldVariableGetter.superClass_.setSourceBlock.call(this,e)},Blockly.FieldVariableGetter.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},Blockly.FieldVariableGetter.prototype.getText=function(){return this.variable_?this.variable_.name:""},Blockly.FieldVariableGetter.prototype.getVariable=function(){return this.variable_},Blockly.FieldVariableGetter.prototype.setValue=function(e){var t=Blockly.Variables.getVariable(this.sourceBlock_.workspace,e);if(!t)throw Error("Variable id doesn't point to a real variable!  ID was "+e);var n=t.type;if(!this.typeIsAllowed_(n))throw Error("Variable type doesn't match this field!  Type was "+n);this.sourceBlock_&&Blockly.Events.isEnabled()&&(n=this.variable_?this.variable_.getId():null,Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,n,e))),this.variable_=t,this.value_=e,this.setText(t.name)},Blockly.FieldVariableGetter.prototype.typeIsAllowed_=function(e){var t=this.getVariableTypes_();if(!t)return!0;for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1},Blockly.FieldVariableGetter.prototype.getVariableTypes_=function(){var e=this.variableTypes;if(null===e&&this.sourceBlock_)return this.sourceBlock_.workspace.getVariableTypes();if(0==(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e},Blockly.FieldVariableGetter.prototype.setTypes_=function(e,t){var n=t||"";if(null==e||null==e)var o=null;else{if(!Array.isArray(e))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");o=e;for(var r=!1,i=0;i<o.length;i++)o[i]==n&&(r=!0);if(!r)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=o},Blockly.FieldVariableGetter.prototype.showEditor_=function(){},Blockly.FieldVariableGetter.prototype.updateEditable=function(){},Blockly.Field.register("field_variable_getter",Blockly.FieldVariableGetter),Blockly.Input=function(e,t,n,o){if(e!=Blockly.DUMMY_INPUT&&!t)throw"Value inputs and statement inputs must have non-empty name.";this.type=e,this.name=t,this.sourceBlock_=n,this.connection=o,this.fieldRow=[],this.outlinePath=null},Blockly.Input.prototype.align=Blockly.ALIGN_LEFT,Blockly.Input.prototype.visible_=!0,Blockly.Input.prototype.appendField=function(e,t){return this.insertFieldAt(this.fieldRow.length,e,t),this},Blockly.Input.prototype.insertFieldAt=function(e,t,n){if(e<0||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(t||n)&&(goog.isString(t)&&(t=new Blockly.FieldLabel(t)),t.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&t.init(),t.name=n,t.prefixField&&(e=this.insertFieldAt(e,t.prefixField)),this.fieldRow.splice(e,0,t),++e,t.suffixField&&(e=this.insertFieldAt(e,t.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_())),e},Blockly.Input.prototype.removeField=function(e){for(var t,n=0;t=this.fieldRow[n];n++)if(t.name===e)return t.dispose(),this.fieldRow.splice(n,1),void(this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_()));goog.asserts.fail('Field "%s" not found.',e)},Blockly.Input.prototype.isVisible=function(){return this.visible_},Blockly.Input.prototype.setVisible=function(e){var t=[];if(this.visible_==e)return t;!(this.visible_=e)&&this.outlinePath&&this.outlinePath.setAttribute("style","visibility: hidden");for(var n,o=e?"block":"none",r=0;n=this.fieldRow[r];r++)n.setVisible(e);return this.connection&&(e?t=this.connection.unhideAll():this.connection.hideAll(),r=this.connection.targetBlock())&&(r.getSvgRoot().style.display=o,e||(r.rendered=!1)),t},Blockly.Input.prototype.setCheck=function(e){if(!this.connection)throw"This input does not have a connection.";return this.connection.setCheck(e),this},Blockly.Input.prototype.setAlign=function(e){return this.align=e,this.sourceBlock_.rendered&&this.sourceBlock_.render(),this},Blockly.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var e=0;e<this.fieldRow.length;e++)this.fieldRow[e].init(this.sourceBlock_)},Blockly.Input.prototype.dispose=function(){this.outlinePath&&goog.dom.removeNode(this.outlinePath);for(var e,t=0;e=this.fieldRow[t];t++)e.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},Blockly.Input.prototype.initOutlinePath=function(e){this.sourceBlock_.workspace.rendered&&!this.outlinePath&&this.type==Blockly.INPUT_VALUE&&(this.outlinePath=Blockly.utils.createSvgElement("path",{class:"blocklyPath",style:"visibility: hidden",d:""},e))},Blockly.Warning=function(e){Blockly.Warning.superClass_.constructor.call(this,e),this.createIcon(),this.text_={}},goog.inherits(Blockly.Warning,Blockly.Icon),Blockly.Warning.prototype.collapseHidden=!1,Blockly.Warning.prototype.drawIcon_=function(e){Blockly.utils.createSvgElement("path",{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},e),Blockly.utils.createSvgElement("path",{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},e),Blockly.utils.createSvgElement("rect",{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},e)},Blockly.Warning.textToDom_=function(e){var t=Blockly.utils.createSvgElement("text",{class:"blocklyText blocklyBubbleText",y:Blockly.Bubble.BORDER_WIDTH},null);e=e.split("\n");for(var n=0;n<e.length;n++){var o=Blockly.utils.createSvgElement("tspan",{dy:"1em",x:Blockly.Bubble.BORDER_WIDTH},t),r=document.createTextNode(e[n]);o.appendChild(r)}return t},Blockly.Warning.prototype.setVisible=function(e){if(e!=this.isVisible())if(Blockly.Events.fire(new Blockly.Events.Ui(this.block_,"warningOpen",!e,e)),e){if(e=Blockly.Warning.textToDom_(this.getText()),this.bubble_=new Blockly.Bubble(this.block_.workspace,e,this.block_.svgPath_,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.block_.RTL)for(var t,n=e.getBBox().width,o=0;t=e.childNodes[o];o++)t.setAttribute("text-anchor","end"),t.setAttribute("x",n+Blockly.Bubble.BORDER_WIDTH);this.updateColour(),e=this.bubble_.getBubbleSize(),this.bubble_.setBubbleSize(e.width,e.height)}else this.bubble_.dispose(),this.body_=this.bubble_=null},Blockly.Warning.prototype.bodyFocus_=function(e){this.bubble_.promote_()},Blockly.Warning.prototype.setText=function(e,t){this.text_[t]!=e&&(e?this.text_[t]=e:delete this.text_[t],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},Blockly.Warning.prototype.getText=function(){var e,t=[];for(e in this.text_)t.push(this.text_[e]);return t.join("\n")},Blockly.Warning.prototype.dispose=function(){this.block_.warning=null,Blockly.Icon.prototype.dispose.call(this)},Blockly.Block=function(e,t,n){void 0!==Blockly.Generator.prototype[t]&&console.warn('FUTURE ERROR: Block prototypeName "'+t+'" conflicts with Blockly.Generator members. Registering Generators for this block type will incur errors.\nThis name will be DISALLOWED (throwing an error) in future versions of Blockly.');var o=e&&e.getFlyout&&e.getFlyout()?e.getFlyout().getWorkspace():null;if(this.id=!n||e.getBlockById(n)||o&&o.getBlockById(n)?Blockly.utils.genUid():n,(e.blockDB_[this.id]=this).previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=!0,this.disabled=this.startHat=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.category_=this.outputShape_=this.comment=null,this.xy_=new goog.math.Coordinate(0,0),this.workspace=e,this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,this.isInsertionMarker_=!1,t&&(this.type=t,n=Blockly.Blocks[t],goog.asserts.assertObject(n,'Error: Unknown block type "%s".',t),goog.mixin(this,n)),e.addTopBlock(this),goog.isFunction(this.init)&&this.init(),this.inputsInlineDefault=this.inputsInline,Blockly.Events.isEnabled()){(e=Blockly.Events.getGroup())||Blockly.Events.setGroup(!0);try{Blockly.Events.fire(new Blockly.Events.BlockCreate(this))}finally{e||Blockly.Events.setGroup(!1)}}goog.isFunction(this.onchange)&&this.setOnChange(this.onchange)},Blockly.Block.obtain=function(e,t){return console.warn("Deprecated call to Blockly.Block.obtain, use workspace.newBlock instead."),e.newBlock(t)},Blockly.Block.prototype.data=null,Blockly.Block.prototype.colour_="#FF0000",Blockly.Block.prototype.colourSecondary_="#FF0000",Blockly.Block.prototype.colourTertiary_="#FF0000",Blockly.Block.prototype.hue_=null,Blockly.Block.prototype.dispose=function(e){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(e),Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockDelete(this)),Blockly.Events.disable();try{this.workspace&&(this.workspace.removeTopBlock(this),delete this.workspace.blockDB_[this.id],this.workspace=null),Blockly.selected==this&&(Blockly.selected=null);for(var t=this.childBlocks_.length-1;0<=t;t--)this.childBlocks_[t].dispose(!1);t=0;for(var n;n=this.inputList[t];t++)n.dispose();this.inputList.length=0;var o=this.getConnections_(!0);for(t=0;t<o.length;t++){var r=o[t];r.isConnected()&&r.disconnect(),o[t].dispose()}}finally{Blockly.Events.enable()}}},Blockly.Block.prototype.initModel=function(){for(var e,t=0;e=this.inputList[t];t++)for(var n,o=0;n=e.fieldRow[o];o++)n.initModel&&n.initModel()},Blockly.Block.prototype.unplug=function(e){if(this.outputConnection)this.outputConnection.isConnected()&&this.outputConnection.disconnect();else if(this.previousConnection){var t=null;this.previousConnection.isConnected()&&(t=this.previousConnection.targetConnection,this.previousConnection.disconnect());var n=this.getNextBlock();e&&n&&((e=this.nextConnection.targetConnection).disconnect(),t&&t.checkType_(e)&&t.connect(e))}},Blockly.Block.prototype.getConnections_=function(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(var t,n=0;t=this.inputList[n];n++)t.connection&&e.push(t.connection);return e},Blockly.Block.prototype.lastConnectionInStack=function(){for(var e=this.nextConnection;e;){var t=e.targetBlock();if(!t)return e;e=t.nextConnection}return null},Blockly.Block.prototype.bumpNeighbours_=function(){console.warn("Not expected to reach this bumpNeighbours_ function. The BlockSvg function for bumpNeighbours_ was expected to be called instead.")},Blockly.Block.prototype.getParent=function(){return this.parentBlock_},Blockly.Block.prototype.getInputWithBlock=function(e){for(var t,n=0;t=this.inputList[n];n++)if(t.connection&&t.connection.targetBlock()==e)return t;return null},Blockly.Block.prototype.getInputWithConnection=function(e){for(var t,n=0;t=this.inputList[n];n++)if(t.connection==e)return t;return null},Blockly.Block.prototype.getSurroundParent=function(){var e=this;do{var t=e;if(!(e=e.getParent()))return null}while(e.getNextBlock()==t);return e},Blockly.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},Blockly.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},Blockly.Block.prototype.getFirstStatementConnection=function(){for(var e,t=0;e=this.inputList[t];t++)if(e.connection&&e.connection.type==Blockly.NEXT_STATEMENT)return e.connection;return null},Blockly.Block.prototype.getRootBlock=function(){var e=this;do{var t=e;e=t.parentBlock_}while(e);return t},Blockly.Block.prototype.getChildren=function(e){if(!e)return this.childBlocks_;e=[];for(var t,n=0;t=this.inputList[n];n++)t.connection&&(t=t.connection.targetBlock())&&e.push(t);return(n=this.getNextBlock())&&e.push(n),e},Blockly.Block.prototype.setParent=function(e){if(e!=this.parentBlock_){if(this.parentBlock_){if(goog.array.remove(this.parentBlock_.childBlocks_,this),this.previousConnection&&this.previousConnection.isConnected())throw"Still connected to previous block.";if(this.outputConnection&&this.outputConnection.isConnected())throw"Still connected to parent block.";this.parentBlock_=null}else this.workspace.removeTopBlock(this);(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}},Blockly.Block.prototype.getDescendants=function(e){for(var t,n=[this],o=this.getChildren(e),r=0;t=o[r];r++)n.push.apply(n,t.getDescendants(e));return n},Blockly.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.Block.prototype.setDeletable=function(e){this.deletable_=e},Blockly.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.Block.prototype.setMovable=function(e){this.movable_=e},Blockly.Block.prototype.isShadow=function(){return this.isShadow_},Blockly.Block.prototype.setShadow=function(e){this.isShadow_=e},Blockly.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},Blockly.Block.prototype.setInsertionMarker=function(e){this.isInsertionMarker_!=e&&(this.isInsertionMarker_=e)&&(this.setColour(Blockly.Colours.insertionMarker),this.setOpacity(Blockly.Colours.insertionMarkerOpacity),Blockly.utils.addClass(this.svgGroup_,"blocklyInsertionMarker"))},Blockly.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},Blockly.Block.prototype.setEditable=function(e){this.editable_=e,e=0;for(var t;t=this.inputList[e];e++)for(var n,o=0;n=t.fieldRow[o];o++)n.updateEditable()},Blockly.Block.prototype.setConnectionsHidden=function(e){if(!e&&this.isCollapsed()){if(this.outputConnection&&this.outputConnection.setHidden(e),this.previousConnection&&this.previousConnection.setHidden(e),this.nextConnection){this.nextConnection.setHidden(e);var t=this.nextConnection.targetBlock();t&&t.setConnectionsHidden(e)}}else for(var n=this.getConnections_(!0),o=0;t=n[o];o++)t.setHidden(e),t.isSuperior()&&(t=t.targetBlock())&&t.setConnectionsHidden(e)},Blockly.Block.prototype.getMatchingConnection=function(e,t){var n=this.getConnections_(!0),o=e.getConnections_(!0);if(n.length!=o.length)throw"Connection lists did not match in length.";for(var r=0;r<o.length;r++)if(o[r]==t)return n[r];return null},Blockly.Block.prototype.setHelpUrl=function(e){this.helpUrl=e},Blockly.Block.prototype.setTooltip=function(e){this.tooltip=e},Blockly.Block.prototype.getColour=function(){return this.colour_},Blockly.Block.prototype.getHue=function(){return this.hue_},Blockly.Block.prototype.getColourSecondary=function(){return this.colourSecondary_},Blockly.Block.prototype.getColourTertiary=function(){return this.colourTertiary_},Blockly.Block.prototype.makeColour_=function(e){var t=Number(e);if(isNaN(t)){if(goog.isString(e)&&e.match(/^#[0-9a-fA-F]{6}$/))return e;throw"Invalid colour: "+e}return Blockly.hueToRgb(t)},Blockly.Block.prototype.setColour=function(e,t,n){this.colour_=this.makeColour_(e),this.colourSecondary_=void 0!==t?this.makeColour_(t):goog.color.rgbArrayToHex(goog.color.darken(goog.color.hexToRgb(this.colour_),.1)),this.colourTertiary_=void 0!==n?this.makeColour_(n):goog.color.rgbArrayToHex(goog.color.darken(goog.color.hexToRgb(this.colour_),.2)),this.rendered&&this.updateColour()},Blockly.Block.prototype.setOnChange=function(e){if(e&&!goog.isFunction(e))throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=e)&&(this.onchangeWrapper_=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},Blockly.Block.prototype.getField=function(e){for(var t,n=0;t=this.inputList[n];n++)for(var o,r=0;o=t.fieldRow[r];r++)if(o.name===e)return o;return null},Blockly.Block.prototype.getVars=function(){for(var e,t=[],n=0;e=this.inputList[n];n++)for(var o,r=0;o=e.fieldRow[r];r++)(o instanceof Blockly.FieldVariable||o instanceof Blockly.FieldVariableGetter)&&t.push(o.getValue());return t},Blockly.Block.prototype.getVarModels=function(){for(var e,t=[],n=0;e=this.inputList[n];n++)for(var o,r=0;o=e.fieldRow[r];r++)(o instanceof Blockly.FieldVariable||o instanceof Blockly.FieldVariableGetter)&&(o=this.workspace.getVariableById(o.getValue()))&&t.push(o);return t},Blockly.Block.prototype.updateVarName=function(e){for(var t,n=0;t=this.inputList[n];n++)for(var o,r=0;o=t.fieldRow[r];r++)(o instanceof Blockly.FieldVariable||o instanceof Blockly.FieldVariableGetter)&&e.getId()==o.getValue()&&o.setText(e.name)},Blockly.Block.prototype.renameVarById=function(e,t){for(var n,o=0;n=this.inputList[o];o++)for(var r,i=0;r=n.fieldRow[i];i++)(r instanceof Blockly.FieldVariable||r instanceof Blockly.FieldVariableGetter)&&e==r.getValue()&&r.setValue(t)},Blockly.Block.prototype.getFieldValue=function(e){return(e=this.getField(e))?e.getValue():null},Blockly.Block.prototype.setFieldValue=function(e,t){var n=this.getField(t);goog.asserts.assertObject(n,'Field "%s" not found.',t),n.setValue(e)},Blockly.Block.prototype.setPreviousStatement=function(e,t){e?(void 0===t&&(t=null),this.previousConnection||(goog.asserts.assert(!this.outputConnection,"Remove output connection prior to adding previous connection."),this.previousConnection=this.makeConnection_(Blockly.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(t)):this.previousConnection&&(goog.asserts.assert(!this.previousConnection.isConnected(),"Must disconnect previous statement before removing connection."),this.previousConnection.dispose(),this.previousConnection=null)},Blockly.Block.prototype.setNextStatement=function(e,t){e?(void 0===t&&(t=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Blockly.NEXT_STATEMENT)),this.nextConnection.setCheck(t)):this.nextConnection&&(goog.asserts.assert(!this.nextConnection.isConnected(),"Must disconnect next statement before removing connection."),this.nextConnection.dispose(),this.nextConnection=null)},Blockly.Block.prototype.setOutput=function(e,t){e?(void 0===t&&(t=null),this.outputConnection||(goog.asserts.assert(!this.previousConnection,"Remove previous connection prior to adding output connection."),this.outputConnection=this.makeConnection_(Blockly.OUTPUT_VALUE)),this.outputConnection.setCheck(t)):this.outputConnection&&(goog.asserts.assert(!this.outputConnection.isConnected(),"Must disconnect output value before removing connection."),this.outputConnection.dispose(),this.outputConnection=null)},Blockly.Block.prototype.setInputsInline=function(e){this.inputsInline!=e&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)},Blockly.Block.prototype.getInputsInline=function(){if(null!=this.inputsInline)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==Blockly.DUMMY_INPUT&&this.inputList[e].type==Blockly.DUMMY_INPUT)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1].type==Blockly.INPUT_VALUE&&this.inputList[e].type==Blockly.DUMMY_INPUT)return!0;return!1},Blockly.Block.prototype.setStartHat=function(e){this.startHat!=e&&(this.startHat=e)},Blockly.Block.prototype.getStartHat=function(){return this.startHat},Blockly.Block.prototype.setDisabled=function(e){this.disabled!=e&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,"disabled",null,this.disabled,e)),this.disabled=e)},Blockly.Block.prototype.getInheritedDisabled=function(){for(var e=this.getSurroundParent();e;){if(e.disabled)return!0;e=e.getSurroundParent()}return!1},Blockly.Block.prototype.isCollapsed=function(){return this.collapsed_},Blockly.Block.prototype.setCollapsed=function(e){this.collapsed_!=e&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)},Blockly.Block.prototype.toString=function(e,t){var n=[],o=t||"?";if(this.collapsed_)n.push(this.getInput("_TEMP_COLLAPSED_INPUT").fieldRow[0].text_);else for(var r,i=0;r=this.inputList[i];i++){for(var a,s=0;a=r.fieldRow[s];s++)a instanceof Blockly.FieldDropdown&&!a.getValue()?n.push(o):n.push(a.getText());r.connection&&((r=r.connection.targetBlock())?n.push(r.toString(void 0,t)):n.push(o))}return n=goog.string.trim(n.join(" "))||"???",e&&(n=goog.string.truncate(n,e)),n},Blockly.Block.prototype.appendValueInput=function(e){return this.appendInput_(Blockly.INPUT_VALUE,e)},Blockly.Block.prototype.appendStatementInput=function(e){return this.appendInput_(Blockly.NEXT_STATEMENT,e)},Blockly.Block.prototype.appendDummyInput=function(e){return this.appendInput_(Blockly.DUMMY_INPUT,e||"")},Blockly.Block.prototype.jsonInit=function(e){var t=e.type?'Block "'+e.type+'": ':"";goog.asserts.assert(null==e.output||null==e.previousStatement,t+"Must not have both an output and a previousStatement."),void 0!==e.colour&&this.setColourFromJson_(e);for(var n=0;void 0!==e["message"+n];)this.interpolate_(e["message"+n],e["args"+n]||[],e["lastDummyAlign"+n]),n++;if(void 0!==e.inputsInline&&this.setInputsInline(e.inputsInline),void 0!==e.startHat&&this.setStartHat(e.startHat),void 0!==e.output&&this.setOutput(!0,e.output),void 0!==e.previousStatement&&this.setPreviousStatement(!0,e.previousStatement),void 0!==e.nextStatement&&this.setNextStatement(!0,e.nextStatement),void 0!==e.tooltip&&(n=e.tooltip,n=Blockly.utils.replaceMessageReferences(n),this.setTooltip(n)),void 0!==e.enableContextMenu&&(n=e.enableContextMenu,this.contextMenu=!!n),void 0!==e.helpUrl&&(n=e.helpUrl,n=Blockly.utils.replaceMessageReferences(n),this.setHelpUrl(n)),goog.isString(e.extensions)&&(console.warn(t+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),void 0!==e.mutator&&Blockly.Extensions.apply(e.mutator,this,!0),Array.isArray(e.extensions))for(t=e.extensions,n=0;n<t.length;++n)Blockly.Extensions.apply(t[n],this,!1);void 0!==e.outputShape&&this.setOutputShape(e.outputShape),void 0!==e.category&&this.setCategory(e.category)},Blockly.Block.prototype.mixin=function(e,t){if(goog.isDef(t)&&!goog.isBoolean(t))throw Error("opt_disableCheck must be a boolean if provided");if(!t){var n,o=[];for(n in e)void 0!==this[n]&&o.push(n);if(o.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(o))}goog.mixin(this,e)},Blockly.Block.prototype.setColourFromRawValues_=function(e,t,n){e=goog.isString(e)?Blockly.utils.replaceMessageReferences(e):e,t=goog.isString(t)?Blockly.utils.replaceMessageReferences(t):t,n=goog.isString(n)?Blockly.utils.replaceMessageReferences(n):n,this.setColour(e,t,n)},Blockly.Block.prototype.setColourFromJson_=function(e){this.setColourFromRawValues_(e.colour,e.colourSecondary,e.colourTertiary)},Blockly.Block.prototype.interpolate_=function(e,t,n){var o=Blockly.utils.tokenizeInterpolation(e),r=[],i=0;e=[];for(var a=0;a<o.length;a++){var s=o[a];if("number"==typeof s){if(s<=0||s>t.length)throw Error('Block "'+this.type+'": Message index %'+s+" out of range.");if(r[s])throw Error('Block "'+this.type+'": Message index %'+s+" duplicated.");r[s]=!0,i++,e.push(t[s-1])}else(s=s.trim())&&e.push(s)}if(i!=t.length)throw Error('Block "'+this.type+'": Message does not reference all '+t.length+" arg(s).");for(e.length&&("string"==typeof e[e.length-1]||goog.string.startsWith(e[e.length-1].type,"field_"))&&(a={type:"input_dummy"},n&&(a.align=n),e.push(a)),n={LEFT:Blockly.ALIGN_LEFT,RIGHT:Blockly.ALIGN_RIGHT,CENTRE:Blockly.ALIGN_CENTRE},t=[],a=0;a<e.length;a++)if("string"==typeof(r=e[a]))t.push([r,void 0]);else{o=i=null;do{if(s=!1,"string"==typeof r)i=new Blockly.FieldLabel(r);else switch(r.type){case"input_value":o=this.appendValueInput(r.name);break;case"input_statement":o=this.appendStatementInput(r.name);break;case"input_dummy":o=this.appendDummyInput(r.name);break;default:(i=Blockly.Field.fromJson(r))||(r.alt?(r=r.alt,s=!0):console.warn("Blockly could not create a field of type "+r.type+". You may need to register your custom field.  See github.com/google/blockly/issues/1584"))}}while(s);if(i)t.push([i,r.name]);else if(o){for(r.check&&o.setCheck(r.check),r.align&&o.setAlign(n[r.align]),r=0;r<t.length;r++)o.appendField(t[r][0],t[r][1]);t.length=0}}},Blockly.Block.prototype.appendInput_=function(e,t){var n=null;return e!=Blockly.INPUT_VALUE&&e!=Blockly.NEXT_STATEMENT||(n=this.makeConnection_(e)),n=new Blockly.Input(e,t,this,n),this.inputList.push(n),n},Blockly.Block.prototype.moveInputBefore=function(e,t){if(e!=t){for(var n,o=-1,r=t?-1:this.inputList.length,i=0;n=this.inputList[i];i++)if(n.name==e){if(o=i,-1!=r)break}else if(t&&n.name==t&&(r=i,-1!=o))break;goog.asserts.assert(-1!=o,'Named input "%s" not found.',e),goog.asserts.assert(-1!=r,'Reference input "%s" not found.',t),this.moveNumberedInputBefore(o,r)}},Blockly.Block.prototype.moveNumberedInputBefore=function(e,t){goog.asserts.assert(e!=t,"Can't move input to itself."),goog.asserts.assert(e<this.inputList.length,"Input index "+e+" out of bounds."),goog.asserts.assert(t<=this.inputList.length,"Reference input "+t+" out of bounds.");var n=this.inputList[e];this.inputList.splice(e,1),e<t&&t--,this.inputList.splice(t,0,n)},Blockly.Block.prototype.removeInput=function(e,t){for(var n,o=0;n=this.inputList[o];o++)if(n.name==e){if(n.connection&&n.connection.isConnected()){n.connection.setShadowDom(null);var r=n.connection.targetBlock();r.isShadow()?r.dispose():r.unplug()}return n.dispose(),void this.inputList.splice(o,1)}t||goog.asserts.fail('Input "%s" not found.',e)},Blockly.Block.prototype.getInput=function(e){for(var t,n=0;t=this.inputList[n];n++)if(t.name==e)return t;return null},Blockly.Block.prototype.getInputTargetBlock=function(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()},Blockly.Block.prototype.getCommentText=function(){return this.comment||""},Blockly.Block.prototype.setCommentText=function(e){this.comment!=e&&(Blockly.Events.fire(new Blockly.Events.BlockChange(this,"comment",null,this.comment,e||"")),this.comment=e)},Blockly.Block.prototype.setOutputShape=function(e){this.outputShape_=e},Blockly.Block.prototype.getOutputShape=function(){return this.outputShape_||Blockly.OUTPUT_SHAPE_ROUND},Blockly.Block.prototype.setCategory=function(e){this.category_=e},Blockly.Block.prototype.getCategory=function(){return this.category_},Blockly.Block.prototype.setWarningText=function(e,t){},Blockly.Block.prototype.setMutator=function(e){},Blockly.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},Blockly.Block.prototype.moveBy=function(e,t){goog.asserts.assert(!this.parentBlock_,"Block has parent.");var n=new Blockly.Events.BlockMove(this);this.xy_.translate(e,t),n.recordNew(),Blockly.Events.fire(n)},Blockly.Block.prototype.makeConnection_=function(e){return new Blockly.Connection(this,e)},Blockly.Block.prototype.allInputsFilled=function(e){if(void 0===e&&(e=!0),!e&&this.isShadow())return!1;for(var t,n=0;t=this.inputList[n];n++)if(t.connection&&(!(t=t.connection.targetBlock())||!t.allInputsFilled(e)))return!1;return!(n=this.getNextBlock())||n.allInputsFilled(e)},Blockly.Block.prototype.toDevString=function(){var e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e},Blockly.BlockDragSurfaceSvg=function(e){this.container_=e,this.createDom()},Blockly.BlockDragSurfaceSvg.prototype.SVG_=null,Blockly.BlockDragSurfaceSvg.prototype.dragGroup_=null,Blockly.BlockDragSurfaceSvg.prototype.container_=null,Blockly.BlockDragSurfaceSvg.prototype.scale_=1,Blockly.BlockDragSurfaceSvg.prototype.surfaceXY_=null,Blockly.BlockDragSurfaceSvg.prototype.dragShadowFilterId_="",Blockly.BlockDragSurfaceSvg.SHADOW_STD_DEVIATION=6,Blockly.BlockDragSurfaceSvg.prototype.createDom=function(){if(!this.SVG_){this.SVG_=Blockly.utils.createSvgElement("svg",{xmlns:Blockly.SVG_NS,"xmlns:html":Blockly.HTML_NS,"xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",class:"blocklyBlockDragSurface"},this.container_);var e=Blockly.utils.createSvgElement("defs",{},this.SVG_);this.dragShadowFilterId_=this.createDropShadowDom_(e),this.dragGroup_=Blockly.utils.createSvgElement("g",{},this.SVG_),this.dragGroup_.setAttribute("filter","url(#"+this.dragShadowFilterId_+")")}},Blockly.BlockDragSurfaceSvg.prototype.createDropShadowDom_=function(e){var t=String(Math.random()).substring(2);return e=Blockly.utils.createSvgElement("filter",{id:"blocklyDragShadowFilter"+t,height:"140%",width:"140%",y:"-20%",x:"-20%"},e),Blockly.utils.createSvgElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:Blockly.BlockDragSurfaceSvg.SHADOW_STD_DEVIATION},e),t=Blockly.utils.createSvgElement("feComponentTransfer",{result:"offsetBlur"},e),Blockly.utils.createSvgElement("feFuncA",{type:"linear",slope:Blockly.Colours.dragShadowOpacity},t),Blockly.utils.createSvgElement("feComposite",{in:"SourceGraphic",in2:"offsetBlur",operator:"over"},e),e.id},Blockly.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(e){goog.asserts.assert(0==this.dragGroup_.childNodes.length,"Already dragging a block."),this.dragGroup_.appendChild(e),this.SVG_.style.display="block",this.surfaceXY_=new goog.math.Coordinate(0,0),document.getElementsByClassName("injectionDiv")[0].style.overflow="visible"},Blockly.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(e,t,n){this.scale_=n,e=e.toFixed(0),t=t.toFixed(0),this.dragGroup_.setAttribute("transform","translate("+e+","+t+") scale("+n+")")},Blockly.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var e=this.surfaceXY_.x,t=this.surfaceXY_.y;e=e.toFixed(0),t=t.toFixed(0),this.SVG_.style.display="block",Blockly.utils.setCssTransform(this.SVG_,"translate3d("+e+"px, "+t+"px, 0px)")},Blockly.BlockDragSurfaceSvg.prototype.translateSurface=function(e,t){this.surfaceXY_=new goog.math.Coordinate(e*this.scale_,t*this.scale_),this.translateSurfaceInternal_()},Blockly.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var e=Blockly.utils.getRelativeXY(this.SVG_);return new goog.math.Coordinate(e.x/this.scale_,e.y/this.scale_)},Blockly.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},Blockly.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},Blockly.BlockDragSurfaceSvg.prototype.clearAndHide=function(e){e?this.getCurrentBlock()&&e.appendChild(this.getCurrentBlock()):this.getCurrentBlock()&&this.dragGroup_.removeChild(this.getCurrentBlock()),this.SVG_.style.display="none",goog.asserts.assert(0==this.dragGroup_.childNodes.length,"Drag group was not cleared."),this.surfaceXY_=null,document.getElementsByClassName("injectionDiv")[0].style.overflow="hidden"},Blockly.utils.uiMenu={},Blockly.utils.uiMenu.getSize=function(e){e=e.getElement();var t=goog.style.getSize(e);return t.height=e.scrollHeight,t},Blockly.utils.uiMenu.adjustBBoxesForRTL=function(e,t,n){t.left+=n.width,t.right+=n.width,e.left+=n.width,e.right+=n.width},Blockly.ContextMenu={},Blockly.ContextMenu.currentBlock=null,Blockly.ContextMenu.eventWrapper_=null,Blockly.ContextMenu.show=function(e,t,n){if(Blockly.WidgetDiv.show(Blockly.ContextMenu,n,null),t.length){var o=Blockly.ContextMenu.populate_(t,n);goog.events.listen(o,goog.ui.Component.EventType.ACTION,Blockly.ContextMenu.hide),Blockly.ContextMenu.position_(o,e,n),setTimeout(function(){o.getElement().focus()},1),Blockly.ContextMenu.currentBlock=null}else Blockly.ContextMenu.hide()},Blockly.ContextMenu.populate_=function(e,t){var n=new goog.ui.Menu;n.setRightToLeft(t);for(var o,r=0;o=e[r];r++){var i=new goog.ui.MenuItem(o.text);i.setRightToLeft(t),n.addChild(i,!0),i.setEnabled(o.enabled),o.enabled&&(goog.events.listen(i,goog.ui.Component.EventType.ACTION,o.callback),i.handleContextMenu=function(){goog.events.dispatchEvent(this,goog.ui.Component.EventType.ACTION)})}return n},Blockly.ContextMenu.position_=function(e,t,n){var o=Blockly.utils.getViewportBBox();t={top:t.clientY+o.top,bottom:t.clientY+o.top,left:t.clientX+o.left,right:t.clientX+o.left},Blockly.ContextMenu.createWidget_(e);var r=Blockly.utils.uiMenu.getSize(e);n&&Blockly.utils.uiMenu.adjustBBoxesForRTL(o,t,r),Blockly.WidgetDiv.positionWithAnchor(o,t,r,n),e.getElement().focus()},Blockly.ContextMenu.createWidget_=function(e){e.render(Blockly.WidgetDiv.DIV);var t=e.getElement();Blockly.utils.addClass(t,"blocklyContextMenu"),Blockly.bindEventWithChecks_(t,"contextmenu",null,Blockly.utils.noEvent),e.setAllowAutoFocus(!0)},Blockly.ContextMenu.hide=function(){Blockly.WidgetDiv.hideIfOwner(Blockly.ContextMenu),Blockly.ContextMenu.currentBlock=null,Blockly.ContextMenu.eventWrapper_&&Blockly.unbindEvent_(Blockly.ContextMenu.eventWrapper_)},Blockly.ContextMenu.callbackFactory=function(n,o){return function(){Blockly.Events.disable();try{var e=Blockly.Xml.domToBlock(o,n.workspace),t=n.getRelativeToSurfaceXY();t.x=n.RTL?t.x-Blockly.SNAP_RADIUS:t.x+Blockly.SNAP_RADIUS,t.y+=2*Blockly.SNAP_RADIUS,e.moveBy(t.x,t.y)}finally{Blockly.Events.enable()}Blockly.Events.isEnabled()&&!e.isShadow()&&Blockly.Events.fire(new Blockly.Events.BlockCreate(e)),e.select()}},Blockly.ContextMenu.blockDeleteOption=function(e){var t=e.getDescendants(!1).length,n=e.getNextBlock();return n&&(t-=n.getDescendants(!1).length),{text:1==t?Blockly.Msg.DELETE_BLOCK:Blockly.Msg.DELETE_X_BLOCKS.replace("%1",String(t)),enabled:!0,callback:function(){Blockly.Events.setGroup(!0),e.dispose(!0,!0),Blockly.Events.setGroup(!1)}}},Blockly.ContextMenu.blockHelpOption=function(e){return{enabled:!(goog.isFunction(e.helpUrl)?!e.helpUrl():!e.helpUrl),text:Blockly.Msg.HELP,callback:function(){e.showHelp_()}}},Blockly.ContextMenu.blockDuplicateOption=function(e){var t=!0;return e.getDescendants(!1).length>e.workspace.remainingCapacity()&&(t=!1),{text:Blockly.Msg.DUPLICATE_BLOCK,enabled:t,callback:function(){Blockly.duplicate_(e)}}},Blockly.ContextMenu.blockCommentOption=function(e){var t={enabled:!goog.userAgent.IE};return e.comment?(t.text=Blockly.Msg.REMOVE_COMMENT,t.callback=function(){e.setCommentText(null)}):(t.text=Blockly.Msg.ADD_COMMENT,t.callback=function(){e.setCommentText(""),e.comment.setVisible(!0)}),t},Blockly.ContextMenu.wsUndoOption=function(e){return{text:Blockly.Msg.UNDO,enabled:e.hasUndoStack(),callback:e.undo.bind(e,!1)}},Blockly.ContextMenu.wsRedoOption=function(e){return{text:Blockly.Msg.REDO,enabled:e.hasRedoStack(),callback:e.undo.bind(e,!0)}},Blockly.ContextMenu.wsCleanupOption=function(e,t){return{text:Blockly.Msg.CLEAN_UP,enabled:1<t,callback:e.cleanUp.bind(e,!0)}},Blockly.ContextMenu.toggleCollapseFn_=function(e,t){for(var n=0,o=0;o<e.length;o++)for(var r=e[o];r;)setTimeout(r.setCollapsed.bind(r,t),n),r=r.getNextBlock(),n+=10},Blockly.ContextMenu.wsCollapseOption=function(e,t){return{enabled:e,text:Blockly.Msg.COLLAPSE_ALL,callback:function(){Blockly.ContextMenu.toggleCollapseFn_(t,!0)}}},Blockly.ContextMenu.wsExpandOption=function(e,t){return{enabled:e,text:Blockly.Msg.EXPAND_ALL,callback:function(){Blockly.ContextMenu.toggleCollapseFn_(t,!1)}}},Blockly.ContextMenu.commentDeleteOption=function(e){return{text:Blockly.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){Blockly.Events.setGroup(!0),e.dispose(!0,!0),Blockly.Events.setGroup(!1)}}},Blockly.ContextMenu.commentDuplicateOption=function(e){return{text:Blockly.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){Blockly.duplicate_(e)}}},Blockly.ContextMenu.workspaceCommentOption=function(o,r){var e={enabled:!0};return e.text=Blockly.Msg.ADD_COMMENT,e.callback=function(){var e=new Blockly.WorkspaceCommentSvg(o,Blockly.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,120,160),t=o.getInjectionDiv().getBoundingClientRect();t=new goog.math.Coordinate(r.clientX-t.left,r.clientY-t.top);var n=o.getOriginOffsetInPixels();t=goog.math.Coordinate.difference(t,n).scale(1/o.scale),e.moveBy(t.x,t.y),o.rendered&&(e.initSvg(),e.render(!1),e.select())},e},Blockly.BlockSvg=function(e,t,n){this.svgGroup_=Blockly.utils.createSvgElement("g",{},null),this.svgPath_=Blockly.utils.createSvgElement("path",{class:"blocklyPath blocklyBlockBackground"},this.svgGroup_),(this.svgPath_.tooltip=this).rendered=!1,this.useDragSurface_=Blockly.utils.is3dSupported()&&!!e.blockDragSurface_,Blockly.Tooltip.bindMouseEvents(this.svgPath_),Blockly.BlockSvg.superClass_.constructor.call(this,e,t,n),this.svgGroup_.dataset&&(this.svgGroup_.dataset.id=this.id)},goog.inherits(Blockly.BlockSvg,Blockly.Block),Blockly.BlockSvg.prototype.height=0,Blockly.BlockSvg.prototype.width=0,Blockly.BlockSvg.prototype.insertionMarkerMinWidth_=0,Blockly.BlockSvg.prototype.opacity_=1,Blockly.BlockSvg.prototype.dragStartXY_=null,Blockly.BlockSvg.prototype.isGlowingBlock_=!1,Blockly.BlockSvg.prototype.isGlowingStack_=!1,Blockly.BlockSvg.prototype.isHighlightingBlock_=!1,Blockly.BlockSvg.prototype.warningTextDb_=null,Blockly.BlockSvg.INLINE=-1,Blockly.BlockSvg.prototype.initSvg=function(){if(goog.asserts.assert(this.workspace.rendered,"Workspace is headless."),!this.isInsertionMarker()){for(var e,t=0;e=this.inputList[t];t++)e.init(),e.initOutlinePath(this.svgGroup_);for(e=this.getIcons(),t=0;t<e.length;t++)e[t].createIcon()}this.updateColour(),this.updateMovable(),this.workspace.options.readOnly||this.eventsInit_||Blockly.bindEventWithChecks_(this.getSvgRoot(),"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,this.getSvgRoot().parentNode||this.workspace.getCanvas().appendChild(this.getSvgRoot())},Blockly.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if(Blockly.selected!=this){var e=null;if(Blockly.selected){e=Blockly.selected.id,Blockly.Events.disable();try{Blockly.selected.unselect()}finally{Blockly.Events.enable()}}(e=new Blockly.Events.Ui(null,"selected",e,this.id)).workspaceId=this.workspace.id,Blockly.Events.fire(e),(Blockly.selected=this).addSelect()}},Blockly.BlockSvg.prototype.unselect=function(){if(Blockly.selected==this){var e=new Blockly.Events.Ui(null,"selected",this.id,null);e.workspaceId=this.workspace.id,Blockly.Events.fire(e),Blockly.selected=null,this.removeSelect()}},Blockly.BlockSvg.prototype.setGlowBlock=function(e){this.rendered&&(this.isGlowingBlock_=e,this.updateColour())},Blockly.BlockSvg.prototype.setGlowStack=function(e){this.rendered&&(this.isGlowingStack_=e,e=this.getSvgRoot(),this.isGlowingStack_&&!e.hasAttribute("filter")?e.setAttribute("filter","url(#blocklyStackGlowFilter)"):!this.isGlowingStack_&&e.hasAttribute("filter")&&e.removeAttribute("filter"))},Blockly.BlockSvg.prototype.setHighlightWarning=function(e){this.rendered&&((this.isHighlightingWarningBlock_=e)&&!this.svgPathWarningHighlight_?(this.svgPathWarningHighlight_=this.svgPath_.cloneNode(!0),this.svgPathWarningHighlight_.setAttribute("fill","none"),this.svgPathWarningHighlight_.setAttribute("filter","url(#blocklyHighlightWarningFilter)"),this.getSvgRoot().appendChild(this.svgPathWarningHighlight_)):!this.isHighlightingWarningBlock_&&this.svgPathWarningHighlight_&&(this.getSvgRoot().removeChild(this.svgPathWarningHighlight_),this.svgPathWarningHighlight_=null))},Blockly.BlockSvg.prototype.setHighlightBlock=function(e){this.rendered&&((this.isHighlightingBlock_=e)&&!this.svgPathHighlight_?(this.svgPathHighlight_=this.svgPath_.cloneNode(!0),this.svgPathHighlight_.setAttribute("fill","none"),this.svgPathHighlight_.setAttribute("filter","url(#blocklyHighlightGlowFilter)"),this.getSvgRoot().appendChild(this.svgPathHighlight_)):!this.isHighlightingBlock_&&this.svgPathHighlight_&&(this.getSvgRoot().removeChild(this.svgPathHighlight_),this.svgPathHighlight_=null))},Blockly.BlockSvg.prototype.mutator=null,Blockly.BlockSvg.prototype.comment=null,Blockly.BlockSvg.prototype.warning=null,Blockly.BlockSvg.prototype.getIcons=function(){var e=[];return this.mutator&&e.push(this.mutator),this.comment&&e.push(this.comment),this.warning&&e.push(this.warning),e},Blockly.BlockSvg.prototype.setParent=function(e){if(e!=this.parentBlock_){var t=this.getSvgRoot();if(this.parentBlock_&&t){var n=this.getRelativeToSurfaceXY();Blockly.selected!=this&&(this.workspace.getCanvas().appendChild(t),this.translate(n.x,n.y))}Blockly.Field.startCache(),Blockly.BlockSvg.superClass_.setParent.call(this,e),Blockly.Field.stopCache(),e&&(n=this.getRelativeToSurfaceXY(),e.getSvgRoot().appendChild(t),t=this.getRelativeToSurfaceXY(),this.moveConnections_(t.x-n.x,t.y-n.y),this.isShadow()&&this.setColour(this.getColour(),this.getColourSecondary(),e.getColourTertiary()))}},Blockly.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var e=0,t=0,n=this.useDragSurface_?this.workspace.blockDragSurface_.getGroup():null,o=this.getSvgRoot();if(o)do{var r=Blockly.utils.getRelativeXY(o);e+=r.x,t+=r.y,this.useDragSurface_&&this.workspace.blockDragSurface_.getCurrentBlock()==o&&(e+=(r=this.workspace.blockDragSurface_.getSurfaceTranslation()).x,t+=r.y),o=o.parentNode}while(o&&o!=this.workspace.getCanvas()&&o!=n);return new goog.math.Coordinate(e,t)},Blockly.BlockSvg.prototype.moveBy=function(e,t){goog.asserts.assert(!this.parentBlock_,"Block has parent.");var n=Blockly.Events.isEnabled();if(n)var o=new Blockly.Events.BlockMove(this);goog.asserts.assert(!this.parentBlock_,"Block has parent.");var r=this.getRelativeToSurfaceXY();this.translate(r.x+e,r.y+t),this.moveConnections_(e,t),n&&(o.recordNew(),Blockly.Events.fire(o)),this.workspace.resizeContents()},Blockly.BlockSvg.prototype.translate=function(e,t){this.getSvgRoot().setAttribute("transform","translate("+e+","+t+")")},Blockly.BlockSvg.prototype.moveToDragSurface_=function(){if(this.useDragSurface_){var e=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.blockDragSurface_.translateSurface(e.x,e.y),this.workspace.blockDragSurface_.setBlocksAndShow(this.getSvgRoot())}},Blockly.BlockSvg.prototype.moveOffDragSurface_=function(e){this.useDragSurface_&&(this.translate(e.x,e.y),this.workspace.blockDragSurface_.clearAndHide(this.workspace.getCanvas()))},Blockly.BlockSvg.prototype.moveDuringDrag=function(e){this.useDragSurface_?this.workspace.blockDragSurface_.translateSurface(e.x,e.y):(this.svgGroup_.translate_="translate("+e.x+","+e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},Blockly.BlockSvg.prototype.clearTransformAttributes_=function(){Blockly.utils.removeAttribute(this.getSvgRoot(),"transform")},Blockly.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e&&e.shouldSnap()){var t=e.getSpacing(),n=t/2,o=this.getRelativeToSurfaceXY();e=Math.round((o.x-n)/t)*t+n-o.x,t=Math.round((o.y-n)/t)*t+n-o.y,e=Math.round(e),t=Math.round(t),0==e&&0==t||this.moveBy(e,t)}}},Blockly.BlockSvg.prototype.getBoundingRectangle=function(){var e=this.getRelativeToSurfaceXY(this),t=this.getHeightWidth();if(this.RTL){var n=new goog.math.Coordinate(e.x-t.width,e.y);e=new goog.math.Coordinate(e.x,e.y+t.height)}else n=new goog.math.Coordinate(e.x,e.y),e=new goog.math.Coordinate(e.x+t.width,e.y+t.height);return{topLeft:n,bottomRight:e}},Blockly.BlockSvg.prototype.setOpacity=function(e){this.opacity_=e,this.rendered&&this.updateColour()},Blockly.BlockSvg.prototype.getOpacity=function(){return this.opacity_},Blockly.BlockSvg.prototype.setCollapsed=function(e){if(this.collapsed_!=e){for(var t,n=[],o=0;t=this.inputList[o];o++)n.push.apply(n,t.setVisible(!e));if(e){for(t=this.getIcons(),o=0;o<t.length;o++)t[o].setVisible(!1);o=this.toString(Blockly.COLLAPSE_CHARS),this.appendDummyInput("_TEMP_COLLAPSED_INPUT").appendField(o).init()}else this.removeInput("_TEMP_COLLAPSED_INPUT"),this.setWarningText(null);if(Blockly.BlockSvg.superClass_.setCollapsed.call(this,e),n.length||(n[0]=this),this.rendered)for(o=0;e=n[o];o++)e.render()}},Blockly.BlockSvg.prototype.tab=function(e,t){var n=this.createTabList_(),o=n.indexOf(e);-1==o&&(o=t?-1:n.length),(n=n[t?o+1:o-1])?n instanceof Blockly.Field?n.showEditor_():n.tab(null,t):(n=this.outputConnection&&this.outputConnection.targetBlock())?n.tab(this,t):(n=t?this.getNextBlock():this.getPreviousBlock())&&n.tab(this,t)},Blockly.BlockSvg.prototype.createTabList_=function(){for(var e,t=[],n=0;e=this.inputList[n];n++){for(var o,r=0;o=e.fieldRow[r];r++)o instanceof Blockly.FieldTextInput&&t.push(o);e.connection&&(e=e.connection.targetBlock())&&t.push(e)}return t},Blockly.BlockSvg.prototype.onMouseDown_=function(e){var t=this.workspace.getGesture(e);t&&t.handleBlockStart(e,this)},Blockly.BlockSvg.prototype.showHelp_=function(){var e=goog.isFunction(this.helpUrl)?this.helpUrl():this.helpUrl;e&&alert(e)},Blockly.BlockSvg.prototype.showContextMenu_=function(e){if(!this.workspace.options.readOnly&&this.contextMenu){var t=[];if(this.isDeletable()&&this.isMovable()&&!this.isInFlyout)t.push(Blockly.ContextMenu.blockDuplicateOption(this)),this.isEditable()&&this.workspace.options.comments&&t.push(Blockly.ContextMenu.blockCommentOption(this)),t.push(Blockly.ContextMenu.blockDeleteOption(this));else if(this.parentBlock_&&this.isShadow_)return void this.parentBlock_.showContextMenu_(e);t.push(Blockly.ContextMenu.blockHelpOption(this)),this.customContextMenu&&this.customContextMenu(t),Blockly.ContextMenu.show(e,t,this.RTL),Blockly.ContextMenu.currentBlock=this}},Blockly.BlockSvg.prototype.moveConnections_=function(e,t){if(this.rendered){for(var n=this.getConnections_(!1),o=0;o<n.length;o++)n[o].moveBy(e,t);for(n=this.getIcons(),o=0;o<n.length;o++)n[o].computeIconLocation();for(o=0;o<this.childBlocks_.length;o++)this.childBlocks_[o].moveConnections_(e,t)}},Blockly.BlockSvg.prototype.setDragging=function(e){if(e){var t=this.getSvgRoot();t.translate_="",t.skew_="",Blockly.draggingConnections_=Blockly.draggingConnections_.concat(this.getConnections_(!0)),Blockly.utils.addClass(this.svgGroup_,"blocklyDragging")}else Blockly.draggingConnections_=[],Blockly.utils.removeClass(this.svgGroup_,"blocklyDragging");for(t=0;t<this.childBlocks_.length;t++)this.childBlocks_[t].setDragging(e)},Blockly.BlockSvg.prototype.updateMovable=function(){this.isMovable()?Blockly.utils.addClass(this.svgGroup_,"blocklyDraggable"):Blockly.utils.removeClass(this.svgGroup_,"blocklyDraggable")},Blockly.BlockSvg.prototype.setMovable=function(e){Blockly.BlockSvg.superClass_.setMovable.call(this,e),this.updateMovable()},Blockly.BlockSvg.prototype.setEditable=function(e){Blockly.BlockSvg.superClass_.setEditable.call(this,e),e=this.getIcons();for(var t=0;t<e.length;t++)e[t].updateEditable()},Blockly.BlockSvg.prototype.setShadow=function(e){Blockly.BlockSvg.superClass_.setShadow.call(this,e),this.updateColour()},Blockly.BlockSvg.prototype.setInsertionMarker=function(e,t){Blockly.BlockSvg.superClass_.setInsertionMarker.call(this,e),this.insertionMarkerMinWidth_=t,this.updateColour()},Blockly.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},Blockly.BlockSvg.prototype.dispose=function(e,t){if(this.workspace){Blockly.Tooltip.hide(),Blockly.Field.startCache();var n=this.workspace;if(Blockly.selected==this&&(this.unselect(),this.workspace.cancelCurrentGesture()),Blockly.ContextMenu.currentBlock==this&&Blockly.ContextMenu.hide(),t&&this.rendered&&(this.unplug(e),Blockly.BlockAnimations.disposeUiEffect(this)),this.rendered=!1,this.warningTextDb_){for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]);this.warningTextDb_=null}Blockly.Events.disable();try{var r=this.getIcons();for(o=0;o<r.length;o++)r[o].dispose()}finally{Blockly.Events.enable()}Blockly.BlockSvg.superClass_.dispose.call(this,e),goog.dom.removeNode(this.svgGroup_),n.resizeContents(),this.svgPath_=this.svgGroup_=null,Blockly.Field.stopCache()}},Blockly.BlockSvg.prototype.updateColour=function(){if(!this.disabled){var e=this.getColour(),t=goog.color.hexToRgb(e);if(this.isShadow())t=goog.color.lighten(t,.6),e=goog.color.rgbArrayToHex(t),this.svgPathLight_.style.display="none",this.svgPathDark_.setAttribute("fill",e);else{this.svgPathLight_.style.display="";var n=goog.color.rgbArrayToHex(goog.color.lighten(t,.3));t=goog.color.rgbArrayToHex(goog.color.darken(t,.2)),this.svgPathLight_.setAttribute("stroke",n),this.svgPathDark_.setAttribute("fill",t)}for(this.svgPath_.setAttribute("fill",e),e=this.getIcons(),n=0;n<e.length;n++)e[n].updateColour();for(e=0;n=this.inputList[e];e++){t=0;for(var o;o=n.fieldRow[t];t++)o.forceRerender()}}},Blockly.BlockSvg.prototype.updateDisabled=function(){this.disabled||this.getInheritedDisabled()?Blockly.utils.addClass(this.svgGroup_,"blocklyDisabled")&&this.svgPath_.setAttribute("fill","url(#"+this.workspace.options.disabledPatternId+")"):Blockly.utils.removeClass(this.svgGroup_,"blocklyDisabled")&&this.updateColour();for(var e,t=this.getChildren(!1),n=0;e=t[n];n++)e.updateDisabled()},Blockly.BlockSvg.prototype.getCommentText=function(){return this.comment?this.comment.getText().replace(/\s+$/,"").replace(/ +\n/g,"\n"):""},Blockly.BlockSvg.prototype.setCommentText=function(e){var t=!1;goog.isString(e)?(this.comment||(this.comment=new Blockly.Comment(this),t=!0),this.comment.setText(e)):this.comment&&(this.comment.dispose(),t=!0),t&&this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.setWarningText=function(e,t){this.warningTextDb_||(this.warningTextDb_=Object.create(null));var n=t||"";if(n)this.warningTextDb_[n]&&(clearTimeout(this.warningTextDb_[n]),delete this.warningTextDb_[n]);else for(var o in this.warningTextDb_)clearTimeout(this.warningTextDb_[o]),delete this.warningTextDb_[o];if(this.workspace.isDragging()){var r=this;this.warningTextDb_[n]=setTimeout(function(){r.workspace&&(delete r.warningTextDb_[n],r.setWarningText(e,n))},100)}else{this.isInFlyout&&(e=null),o=this.getSurroundParent();for(var i=null;o;)o.isCollapsed()&&(i=o),o=o.getSurroundParent();i&&i.setWarningText(e,"collapsed "+this.id+" "+n),o=!1,goog.isString(e)?(this.warning||(this.warning=new Blockly.Warning(this),o=!0),this.warning.setText(e,n)):this.warning&&!n?(this.warning.dispose(),o=!0):this.warning&&(o=this.warning.getText(),this.warning.setText("",n),(i=this.warning.getText())||this.warning.dispose(),o=o!=i),o&&this.rendered&&(this.render(),this.bumpNeighbours_())}},Blockly.BlockSvg.prototype.setMutator=function(e){this.mutator&&this.mutator!==e&&this.mutator.dispose(),e&&((e.block_=this).mutator=e).createIcon()},Blockly.BlockSvg.prototype.setDisabled=function(e){this.disabled!=e&&(Blockly.BlockSvg.superClass_.setDisabled.call(this,e),this.rendered&&this.updateDisabled())},Blockly.BlockSvg.prototype.setHighlighted=function(e){this.rendered&&(e?this.svgPath_.setAttribute("filter","url(#"+this.workspace.options.embossFilterId+")"):Blockly.utils.removeAttribute(this.svgPath_,"filter"))},Blockly.BlockSvg.prototype.addSelect=function(){Blockly.utils.addClass(this.svgGroup_,"blocklySelected"),this.disabled||this.setGlowBlock(!0)},Blockly.BlockSvg.prototype.removeSelect=function(){Blockly.utils.removeClass(this.svgGroup_,"blocklySelected"),this.disabled||this.setGlowBlock(!1)},Blockly.BlockSvg.prototype.setDeleteStyle=function(e){e?Blockly.utils.addClass(this.svgGroup_,"blocklyDraggingDelete"):Blockly.utils.removeClass(this.svgGroup_,"blocklyDraggingDelete")},Blockly.BlockSvg.prototype.setColour=function(e,t,n){Blockly.BlockSvg.superClass_.setColour.call(this,e,t,n),this.rendered&&this.updateColour()},Blockly.BlockSvg.prototype.bringToFront=function(){var e=this;do{var t=e.getSvgRoot();t.parentNode.appendChild(t),e=e.getParent()}while(e)},Blockly.BlockSvg.prototype.setPreviousStatement=function(e,t){Blockly.BlockSvg.superClass_.setPreviousStatement.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.setNextStatement=function(e,t){Blockly.BlockSvg.superClass_.setNextStatement.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.setOutput=function(e,t){Blockly.BlockSvg.superClass_.setOutput.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.setInputsInline=function(e){Blockly.BlockSvg.superClass_.setInputsInline.call(this,e),this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.removeInput=function(e,t){Blockly.BlockSvg.superClass_.removeInput.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.moveNumberedInputBefore=function(e,t){Blockly.BlockSvg.superClass_.moveNumberedInputBefore.call(this,e,t),this.rendered&&(this.render(),this.bumpNeighbours_())},Blockly.BlockSvg.prototype.appendInput_=function(e,t){var n=Blockly.BlockSvg.superClass_.appendInput_.call(this,e,t);return this.rendered&&(this.render(),this.bumpNeighbours_()),n},Blockly.BlockSvg.prototype.getConnections_=function(e){var t=[];if((e||this.rendered)&&(this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection),e||!this.collapsed_)){e=0;for(var n;n=this.inputList[e];e++)n.connection&&t.push(n.connection)}return t},Blockly.BlockSvg.prototype.makeConnection_=function(e){return new Blockly.RenderedConnection(this,e)},Blockly.BlockSvg.prototype.bumpNeighbours_=function(){if(this.workspace&&!this.workspace.isDragging()){var e=this.getRootBlock();if(!e.isInFlyout)for(var t,n=this.getConnections_(!1),o=0;t=n[o];o++){t.isConnected()&&t.isSuperior()&&t.targetBlock().bumpNeighbours_();for(var r,i=t.neighbours_(Blockly.SNAP_RADIUS),a=0;r=i[a];a++)t.isConnected()&&r.isConnected()||r.getSourceBlock().getRootBlock()!=e&&(t.isSuperior()?r.bumpAwayFrom_(t):t.bumpAwayFrom_(r))}}},Blockly.BlockSvg.prototype.scheduleSnapAndBump=function(){var e=this,t=Blockly.Events.getGroup();setTimeout(function(){Blockly.Events.setGroup(t),e.snapToGrid(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY/2),setTimeout(function(){Blockly.Events.setGroup(t),e.bumpNeighbours_(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)},Blockly.BlockSvg.render={},Blockly.BlockSvg.GRID_UNIT=4,Blockly.BlockSvg.TAB_WIDTH=8,Blockly.BlockSvg.SEP_SPACE_X=2*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.SEP_SPACE_Y=2*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_X=16*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_X_OUTPUT=12*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_X_SHADOW_OUTPUT=10*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_Y=12*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.EXTRA_STATEMENT_ROW_Y=8*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_X_WITH_STATEMENT=40*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_Y_SINGLE_FIELD_OUTPUT=8*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER=10*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MIN_STATEMENT_INPUT_HEIGHT=6*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.NOTCH_WIDTH=8*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.NOTCH_HEIGHT=2*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.CORNER_RADIUS=1*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.STATEMENT_INPUT_EDGE_WIDTH=4*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.STATEMENT_INPUT_INNER_SPACE=2*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.START_HAT=!1,Blockly.BlockSvg.START_HAT_HEIGHT=16,Blockly.BlockSvg.ICON_SEPARATOR_HEIGHT=10*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.START_HAT_PATH="c 25,-22 71,-22 96,0",Blockly.BlockSvg.NOTCH_PATH_LEFT="c 2,0 3,1 4,2 l 4,4 c 1,1 2,2 4,2 h 12 c 2,0 3,-1 4,-2 l 4,-4 c 1,-1 2,-2 4,-2",Blockly.BlockSvg.NOTCH_PATH_RIGHT="c -2,0 -3,1 -4,2 l -4,4 c -1,1 -2,2 -4,2 h -12 c -2,0 -3,-1 -4,-2 l -4,-4 c -1,-1 -2,-2 -4,-2",Blockly.BlockSvg.NOTCH_START_PADDING=3*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.TOP_LEFT_CORNER_START="m 0,"+Blockly.BlockSvg.CORNER_RADIUS,Blockly.BlockSvg.TOP_LEFT_CORNER="A "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,1 "+Blockly.BlockSvg.CORNER_RADIUS+",0",Blockly.BlockSvg.TOP_RIGHT_CORNER="a "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,1 "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS,Blockly.BlockSvg.BOTTOM_RIGHT_CORNER=" a "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,1 -"+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS,Blockly.BlockSvg.BOTTOM_LEFT_CORNER="a "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,1 -"+Blockly.BlockSvg.CORNER_RADIUS+",-"+Blockly.BlockSvg.CORNER_RADIUS,Blockly.BlockSvg.INNER_TOP_LEFT_CORNER=" a "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,0 -"+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS,Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER="a "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,0 "+Blockly.BlockSvg.CORNER_RADIUS+","+Blockly.BlockSvg.CORNER_RADIUS,Blockly.BlockSvg.INPUT_SHAPE_HEXAGONAL="M "+4*Blockly.BlockSvg.GRID_UNIT+",0  h "+4*Blockly.BlockSvg.GRID_UNIT+" l "+4*Blockly.BlockSvg.GRID_UNIT+","+4*Blockly.BlockSvg.GRID_UNIT+" l "+-4*Blockly.BlockSvg.GRID_UNIT+","+4*Blockly.BlockSvg.GRID_UNIT+" h "+-4*Blockly.BlockSvg.GRID_UNIT+" l "+-4*Blockly.BlockSvg.GRID_UNIT+","+-4*Blockly.BlockSvg.GRID_UNIT+" l "+4*Blockly.BlockSvg.GRID_UNIT+","+-4*Blockly.BlockSvg.GRID_UNIT+" z",Blockly.BlockSvg.INPUT_SHAPE_HEXAGONAL_WIDTH=12*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.INPUT_SHAPE_SQUARE=Blockly.BlockSvg.TOP_LEFT_CORNER_START+Blockly.BlockSvg.TOP_LEFT_CORNER+" h "+(12*Blockly.BlockSvg.GRID_UNIT-2*Blockly.BlockSvg.CORNER_RADIUS)+Blockly.BlockSvg.TOP_RIGHT_CORNER+" v "+(8*Blockly.BlockSvg.GRID_UNIT-2*Blockly.BlockSvg.CORNER_RADIUS)+Blockly.BlockSvg.BOTTOM_RIGHT_CORNER+" h "+(-12*Blockly.BlockSvg.GRID_UNIT+2*Blockly.BlockSvg.CORNER_RADIUS)+Blockly.BlockSvg.BOTTOM_LEFT_CORNER+" z",Blockly.BlockSvg.INPUT_SHAPE_SQUARE_WIDTH=10*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.INPUT_SHAPE_ROUND="M "+4*Blockly.BlockSvg.GRID_UNIT+",0 h "+4*Blockly.BlockSvg.GRID_UNIT+" a "+4*Blockly.BlockSvg.GRID_UNIT+" "+4*Blockly.BlockSvg.GRID_UNIT+" 0 0 1 0 "+8*Blockly.BlockSvg.GRID_UNIT+" h "+-4*Blockly.BlockSvg.GRID_UNIT+" a "+4*Blockly.BlockSvg.GRID_UNIT+" "+4*Blockly.BlockSvg.GRID_UNIT+" 0 0 1 0 -"+8*Blockly.BlockSvg.GRID_UNIT+" z",Blockly.BlockSvg.INPUT_SHAPE_ROUND_WIDTH=12*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.INPUT_SHAPE_HEIGHT=8*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.FIELD_HEIGHT=8*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.FIELD_WIDTH=6*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.EDITABLE_FIELD_PADDING=6,Blockly.BlockSvg.BOX_FIELD_PADDING=2*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.DROPDOWN_ARROW_PADDING=2*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.FIELD_WIDTH_MIN_EDIT=8*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.FIELD_WIDTH_MAX_EDIT=1/0,Blockly.BlockSvg.FIELD_HEIGHT_MAX_EDIT=Blockly.BlockSvg.FIELD_HEIGHT,Blockly.BlockSvg.FIELD_TOP_PADDING=.5*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.NUMBER_FIELD_CORNER_RADIUS=4*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.TEXT_FIELD_CORNER_RADIUS=1*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.FIELD_DEFAULT_CORNER_RADIUS=4*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.MAX_DISPLAY_LENGTH=1/0,Blockly.BlockSvg.INPUT_AND_FIELD_MIN_X=12*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.INLINE_PADDING_Y=1*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.FIELD_TEXTINPUT_FONTSIZE_INITIAL=12,Blockly.BlockSvg.FIELD_TEXTINPUT_FONTSIZE_FINAL=12,Blockly.BlockSvg.FIELD_TEXTINPUT_EXPAND_PAST_TRUNCATION=!1,Blockly.BlockSvg.FIELD_TEXTINPUT_ANIMATE_POSITIONING=!1,Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING={1:{0:5*Blockly.BlockSvg.GRID_UNIT,1:2*Blockly.BlockSvg.GRID_UNIT,2:5*Blockly.BlockSvg.GRID_UNIT,3:5*Blockly.BlockSvg.GRID_UNIT},2:{0:3*Blockly.BlockSvg.GRID_UNIT,1:3*Blockly.BlockSvg.GRID_UNIT,2:1*Blockly.BlockSvg.GRID_UNIT,3:2*Blockly.BlockSvg.GRID_UNIT},3:{0:2*Blockly.BlockSvg.GRID_UNIT,1:2*Blockly.BlockSvg.GRID_UNIT,2:2*Blockly.BlockSvg.GRID_UNIT,3:2*Blockly.BlockSvg.GRID_UNIT}},Blockly.BlockSvg.prototype.updateColour=function(){var e=this.getColourTertiary(),t=this.isShadow()&&!Blockly.utils.isShadowArgumentReporter(this);for(t&&this.parentBlock_&&(e=this.parentBlock_.getColourTertiary(),this.inputList[0]&&this.inputList[0].fieldRow[0]&&(this.inputList[0].fieldRow[0]instanceof Blockly.FieldColour||this.inputList[0].fieldRow[0]instanceof Blockly.FieldColourSlider)&&(e=Blockly.Colours.colourPickerStroke)),this.svgPath_.setAttribute("stroke",e),e=this.isGlowingBlock_||t?this.getColourSecondary():this.getColour(),this.svgPath_.setAttribute("fill",e),this.svgPath_.setAttribute("fill-opacity",this.getOpacity()),t=0;e=this.inputList[t];t++)e.outlinePath&&e.outlinePath.setAttribute("fill",this.getColourTertiary());for(e=this.getIcons(),t=0;t<e.length;t++)e[t].updateColour();for(t=0;e=this.inputList[t];t++)for(var n,o=0;n=e.fieldRow[o];o++)n.setText(null)},Blockly.BlockSvg.prototype.highlightForReplacement=function(e){e?(this.svgPath_.setAttribute("filter","url(#blocklyReplacementGlowFilter)"),Blockly.utils.addClass(this.svgGroup_,"blocklyReplaceable")):(this.svgPath_.removeAttribute("filter"),Blockly.utils.removeClass(this.svgGroup_,"blocklyReplaceable"))},Blockly.BlockSvg.prototype.highlightShapeForInput=function(e,t){var n=this.getInputWithConnection(e);if(!n)throw"No input found for the connection";n.outlinePath&&(t?(n.outlinePath.setAttribute("filter","url(#blocklyReplacementGlowFilter)"),Blockly.utils.addClass(this.svgGroup_,"blocklyReplaceable")):(n.outlinePath.removeAttribute("filter"),Blockly.utils.removeClass(this.svgGroup_,"blocklyReplaceable")))},Blockly.BlockSvg.prototype.getHeightWidth=function(){var e=this.height,t=this.width,n=this.getNextBlock();return n&&(e+=(n=n.getHeightWidth()).height,e-=Blockly.BlockSvg.NOTCH_HEIGHT,t=Math.max(t,n.width)),{height:e,width:t}},Blockly.BlockSvg.prototype.render=function(e){Blockly.Field.startCache(),this.rendered=!0;var t=Blockly.BlockSvg.SEP_SPACE_X;this.RTL&&(t=-t);for(var n=this.getIcons(),o=0;o<n.length;o++)t=n[o].renderIcon(t);t+=this.RTL?Blockly.BlockSvg.SEP_SPACE_X:-Blockly.BlockSvg.SEP_SPACE_X,n=this.renderCompute_(t),this.renderDraw_(t,n),this.renderMoveConnections_(),this.renderClassify_(),!1!==e&&((e=this.getParent())?e.render(!0):Blockly.resizeSvgContents(this.workspace)),Blockly.Field.stopCache()},Blockly.BlockSvg.prototype.renderFields_=function(e,t,n,o){this.RTL&&(t=-t);for(var r,i=0;r=e[i];i++){var a=r.getSvgRoot();if(a){!this.previousConnection||r instanceof Blockly.FieldLabel||r instanceof Blockly.FieldImage||0!=o||(t=this.RTL?Math.min(t,-Blockly.BlockSvg.INPUT_AND_FIELD_MIN_X):Math.max(t,Blockly.BlockSvg.INPUT_AND_FIELD_MIN_X));var s=-r.getSize().height/2,l="";if(this.RTL){var c=t-=r.renderSep+r.renderWidth;s=n+s,r.renderWidth&&(t-=Blockly.BlockSvg.SEP_SPACE_X)}else c=t+r.renderSep,s=n+s,r.renderWidth&&(t+=r.renderSep+r.renderWidth+Blockly.BlockSvg.SEP_SPACE_X);this.RTL&&r instanceof Blockly.FieldImage&&r.getFlipRTL()&&(l="scale(-1 1)",c+=r.renderWidth),a.setAttribute("transform","translate("+c+", "+s+") "+l),this.isInsertionMarker()&&a.setAttribute("display","none")}}return this.RTL?-t:t},Blockly.BlockSvg.prototype.renderCompute_=function(e){var t=this.inputList,n=[];n.rightEdge=0;for(var o,r,i=n.bottomEdge=0,a=!1,s=!1,l=!1,c=void 0,u=this.getInputsInline(),g=0;r=t[g];g++)if(r.isVisible()){if(u&&c&&c!=Blockly.NEXT_STATEMENT&&r.type!=Blockly.NEXT_STATEMENT)var p=n[n.length-1];else c=r.type,p=this.createRowForInput_(r,u),n.push(p);if(p.push(r),r.renderHeight=this.computeInputHeight_(r,p,o),r.renderWidth=this.computeInputWidth_(r),p.statementNotchAtBottom=!0,r.connection&&r.connection.type===Blockly.NEXT_STATEMENT&&(o=r.connection.targetBlock())&&!o.lastConnectionInStack()&&(p.statementNotchAtBottom=!1),r.connection){var d=0;(o=r.connection.targetBlock())?(o=(d=o.getHeightWidth()).height,d=d.width):o=Blockly.BlockSvg.INPUT_SHAPE_HEIGHT,r.connection.type===Blockly.INPUT_VALUE&&(o+=2*Blockly.BlockSvg.INLINE_PADDING_Y),r.connection.type===Blockly.NEXT_STATEMENT&&p.statementNotchAtBottom&&(o-=Blockly.BlockSvg.NOTCH_HEIGHT),r.renderHeight=Math.max(r.renderHeight,o),r.renderWidth=Math.max(r.renderWidth,d)}p.height=Math.max(p.height,r.renderHeight),r.fieldWidth=0,1==n.length&&(r.fieldWidth+=this.RTL?-e:e),o=!1,d=0;for(var _;_=r.fieldRow[d];d++){0!=d&&(r.fieldWidth+=Blockly.BlockSvg.SEP_SPACE_X);var f=_.getSize();_.renderWidth=f.width,_.renderSep=o&&_.EDITABLE?Blockly.BlockSvg.SEP_SPACE_X:0,r.fieldWidth+=_.renderWidth+_.renderSep,p.height=Math.max(p.height,f.height),o=_.EDITABLE}p.type!=Blockly.BlockSvg.INLINE&&(p.type==Blockly.NEXT_STATEMENT?(s=!0,i=Math.max(i,r.fieldWidth)):p.type==Blockly.INPUT_VALUE?a=!0:p.type==Blockly.DUMMY_INPUT&&(l=!0)),o=p}for(g=0;g<n.length;g++)n.bottomEdge+=n[g].height;return this.computeOutputPadding_(n),n.statementEdge=Blockly.BlockSvg.STATEMENT_INPUT_EDGE_WIDTH+i,n.rightEdge=this.computeRightEdge_(n.rightEdge,s),n.hasValue=a,n.hasStatement=s,n.hasDummy=l,n},Blockly.BlockSvg.prototype.computeInputWidth_=function(e){if(e.type!=Blockly.INPUT_VALUE||e.connection&&e.connection.isConnected())return 0;switch(e.connection.getOutputShape()){case Blockly.OUTPUT_SHAPE_SQUARE:return Blockly.BlockSvg.INPUT_SHAPE_SQUARE_WIDTH;case Blockly.OUTPUT_SHAPE_ROUND:return Blockly.BlockSvg.INPUT_SHAPE_ROUND_WIDTH;case Blockly.OUTPUT_SHAPE_HEXAGONAL:return Blockly.BlockSvg.INPUT_SHAPE_HEXAGONAL_WIDTH;default:return 0}},Blockly.BlockSvg.prototype.computeInputHeight_=function(e,t,n){return 1===this.inputList.length&&this.outputConnection&&this.isShadow()?Blockly.BlockSvg.MIN_BLOCK_Y_SINGLE_FIELD_OUTPUT:this.outputConnection?Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER:t.type==Blockly.NEXT_STATEMENT?Blockly.BlockSvg.MIN_STATEMENT_INPUT_HEIGHT:n&&n.type==Blockly.NEXT_STATEMENT?Blockly.BlockSvg.EXTRA_STATEMENT_ROW_Y:Blockly.BlockSvg.MIN_BLOCK_Y},Blockly.BlockSvg.prototype.createRowForInput_=function(e,t){var n=[];return n.type=t&&e.type==Blockly.NEXT_STATEMENT?e.type:Blockly.BlockSvg.INLINE,n.height=0,n.paddingStart=Blockly.BlockSvg.SEP_SPACE_X,n.paddingEnd=Blockly.BlockSvg.SEP_SPACE_X,n},Blockly.BlockSvg.prototype.computeRightEdge_=function(e,t){var n=e;return this.previousConnection||this.nextConnection?n=Math.max(n,Blockly.BlockSvg.MIN_BLOCK_X):this.outputConnection&&(n=this.isShadow()&&!Blockly.utils.isShadowArgumentReporter(this)?Math.max(n,Blockly.BlockSvg.MIN_BLOCK_X_SHADOW_OUTPUT):Math.max(n,Blockly.BlockSvg.MIN_BLOCK_X_OUTPUT)),t&&(n=Math.max(n,Blockly.BlockSvg.MIN_BLOCK_X_WITH_STATEMENT)),0<this.insertionMarkerMinWidth_&&(n=Math.max(n,this.insertionMarkerMinWidth_)),n},Blockly.BlockSvg.prototype.computeOutputPadding_=function(e){if(this.getOutputShape()&&this.outputConnection&&(!this.isShadow()||Blockly.utils.isShadowArgumentReporter(this)))for(var t,n=this.getOutputShape(),o=0;t=e[o];o++){t.paddingStart=0,t.paddingEnd=0;var r=t[0];if(r.fieldRow[0])var i=0;else i=(i=r.connection).targetConnection?i.targetConnection.getSourceBlock().getOutputShape():i.getOutputShape(),n==Blockly.OUTPUT_SHAPE_HEXAGONAL&&i!=Blockly.OUTPUT_SHAPE_HEXAGONAL&&(r=r.renderHeight-Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER,t.paddingStart+=r/2);t.paddingStart+=Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING[n][i],(r=t[t.length-1]).connection?(i=(i=r.connection).targetConnection?i.targetConnection.getSourceBlock().getOutputShape():i.getOutputShape(),n==Blockly.OUTPUT_SHAPE_HEXAGONAL&&i!=Blockly.OUTPUT_SHAPE_HEXAGONAL&&(r=r.renderHeight-Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER,t.paddingEnd+=r/2)):i=0,t.paddingEnd+=Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING[n][i],n==Blockly.OUTPUT_SHAPE_ROUND&&1<e.length&&0<e.bottomEdge&&(i=e.bottomEdge/2,i*=1-Math.sin(Math.acos((i-2*Blockly.BlockSvg.GRID_UNIT)/i)),t.paddingStart+=i,t.paddingEnd+=i)}},Blockly.BlockSvg.prototype.renderDraw_=function(e,t){if(this.squareTopLeftCorner_=this.startHat_=!1,this.outputConnection||this.previousConnection||!Blockly.BlockSvg.START_HAT&&!this.getStartHat()||(this.startHat_=this.squareTopLeftCorner_=!0,t.rightEdge=Math.max(t.rightEdge,100)),this.edgeShapeWidth_=0,this.edgeShape_=null,this.outputConnection){var n=this.getOutputShape();n!==Blockly.OUTPUT_SHAPE_HEXAGONAL&&n!==Blockly.OUTPUT_SHAPE_ROUND||(this.edgeShapeWidth_=t.bottomEdge/2,this.edgeShape_=n,this.squareTopLeftCorner_=!0)}n=[],this.renderDrawTop_(n,t.rightEdge);var o=this.renderDrawRight_(n,t,e);this.renderDrawBottom_(n,o),this.renderDrawLeft_(n),n=n.join(" "),this.svgPath_.setAttribute("d",n),this.RTL&&this.svgPath_.setAttribute("transform","scale(-1 1)")},Blockly.BlockSvg.prototype.renderClassify_=function(){var e=[];if(this.outputConnection)this.isShadow_?e.push("argument"):e.push("reporter"),this.edgeShape_===Blockly.OUTPUT_SHAPE_HEXAGONAL?e.push("boolean"):this.edgeShape_===Blockly.OUTPUT_SHAPE_ROUND&&e.push("round");else{for(var t,n=this.inputList,o=0,r=0;t=n[r];r++)t.connection&&t.connection.type===Blockly.NEXT_STATEMENT&&o++;o&&(e.push("c-block"),e.push("c-"+o)),this.startHat_?e.push("hat"):o||e.push("stack"),this.nextConnection||e.push("end")}this.svgGroup_.setAttribute("data-shapes",e.join(" "))},Blockly.BlockSvg.prototype.renderDrawTop_=function(e,t){this.squareTopLeftCorner_?(e.push("m 0,0"),this.startHat_&&e.push(Blockly.BlockSvg.START_HAT_PATH),this.edgeShapeWidth_&&e.push("m "+this.edgeShapeWidth_+",0")):(e.push(Blockly.BlockSvg.TOP_LEFT_CORNER_START),e.push(Blockly.BlockSvg.TOP_LEFT_CORNER)),this.previousConnection&&(e.push("H",Blockly.BlockSvg.NOTCH_START_PADDING),e.push(Blockly.BlockSvg.NOTCH_PATH_LEFT),this.previousConnection.setOffsetInBlock(this.RTL?-Blockly.BlockSvg.NOTCH_WIDTH:Blockly.BlockSvg.NOTCH_WIDTH,0)),this.width=t},Blockly.BlockSvg.prototype.renderDrawRight_=function(e,t,n){function o(){0<c&&(g.edgeShape_?e.push("H",u-g.edgeShapeWidth_):(e.push("H",u-Blockly.BlockSvg.CORNER_RADIUS-g.edgeShapeWidth_),e.push(Blockly.BlockSvg.TOP_RIGHT_CORNER)),g.edgeShape_||e.push("v",c-2*Blockly.BlockSvg.CORNER_RADIUS),c=0)}for(var r,i,a,s=0,l=0,c=0,u=0,g=this,p=0;a=t[p];p++){if(s=a.paddingStart,0==p&&(s+=this.RTL?-n:n),a.type==Blockly.BlockSvg.INLINE){for(var d,_=0;d=a[_];_++)if(r=l+a.height/2,s=Blockly.BlockSvg.getAlignedCursor_(s,d,t.rightEdge),s=this.renderFields_(d.fieldRow,s,r,p),d.type==Blockly.INPUT_VALUE){this.previousConnection&&(s=Math.max(s,Blockly.BlockSvg.INPUT_AND_FIELD_MIN_X)),r=this.RTL?-s:s;var f=a.height/2;i=l+f,d.connection.setOffsetInBlock(r,i),this.renderInputShape_(d,s,l+f),s+=d.renderWidth+Blockly.BlockSvg.SEP_SPACE_X}s-=Blockly.BlockSvg.SEP_SPACE_X,s+=a.paddingEnd,t.rightEdge=Math.max(s,t.rightEdge),s=Math.max(s,t.rightEdge),this.width=Math.max(this.width,s),c+=a.height,u=s}else a.type==Blockly.NEXT_STATEMENT&&(o(),d=a[0],r=l,r+=Blockly.BlockSvg.MIN_STATEMENT_INPUT_HEIGHT/2,this.renderFields_(d.fieldRow,s,r,p),s=t.statementEdge+Blockly.BlockSvg.NOTCH_WIDTH,Blockly.BlockSvg.drawStatementInputFromTopRight_(e,s,t.rightEdge,a),r=this.RTL?-s:s,d.connection.setOffsetInBlock(r,l),d.connection.isConnected()&&(this.width=Math.max(this.width,t.statementEdge+d.connection.targetBlock().getHeightWidth().width)),p==t.length-1||t[p+1].type==Blockly.NEXT_STATEMENT)&&(e.push(Blockly.BlockSvg.TOP_RIGHT_CORNER),e.push("v",Blockly.BlockSvg.EXTRA_STATEMENT_ROW_Y-2*Blockly.BlockSvg.CORNER_RADIUS),l+=Blockly.BlockSvg.EXTRA_STATEMENT_ROW_Y);l+=a.height}return o(),this.drawEdgeShapeRight_(e),t.length||(l=Blockly.BlockSvg.MIN_BLOCK_Y,e.push("V",l)),l},Blockly.BlockSvg.prototype.renderInputShape_=function(e,t,n){var o=e.outlinePath;o&&(e.connection.targetConnection?o.setAttribute("style","visibility: hidden"):(e=Blockly.BlockSvg.getInputShapeInfo_(e.connection.getOutputShape()),t=this.RTL?-t-e.width:t,n-=Blockly.BlockSvg.INPUT_SHAPE_HEIGHT/2,o.setAttribute("d",e.path),o.setAttribute("transform","translate("+t+","+n+")"),o.setAttribute("data-argument-type",e.argType),o.setAttribute("style","visibility: visible")))},Blockly.BlockSvg.prototype.renderDrawBottom_=function(e,t){this.height=t,this.edgeShape_||e.push(Blockly.BlockSvg.BOTTOM_RIGHT_CORNER),this.nextConnection&&(e.push("H",Blockly.BlockSvg.NOTCH_WIDTH+Blockly.BlockSvg.NOTCH_START_PADDING+Blockly.BlockSvg.CORNER_RADIUS," "),e.push(Blockly.BlockSvg.NOTCH_PATH_RIGHT),this.nextConnection.setOffsetInBlock(this.RTL?-Blockly.BlockSvg.NOTCH_WIDTH:Blockly.BlockSvg.NOTCH_WIDTH,t),this.height+=Blockly.BlockSvg.NOTCH_HEIGHT),this.edgeShape_?e.push("H",this.edgeShapeWidth_):(e.push("H",Blockly.BlockSvg.CORNER_RADIUS),e.push(Blockly.BlockSvg.BOTTOM_LEFT_CORNER))},Blockly.BlockSvg.prototype.renderDrawLeft_=function(e){this.outputConnection&&this.outputConnection.setOffsetInBlock(0,this.height/2),this.edgeShape_&&(this.edgeShape_===Blockly.OUTPUT_SHAPE_ROUND?e.push("a "+this.edgeShapeWidth_+" "+this.edgeShapeWidth_+" 0 0 1 0 -"+2*this.edgeShapeWidth_):this.edgeShape_===Blockly.OUTPUT_SHAPE_HEXAGONAL&&e.push("l "+-this.edgeShapeWidth_+" "+-this.edgeShapeWidth_+" l "+this.edgeShapeWidth_+" "+-this.edgeShapeWidth_)),e.push("z")},Blockly.BlockSvg.prototype.drawEdgeShapeRight_=function(e){this.edgeShape_&&(this.edgeShape_===Blockly.OUTPUT_SHAPE_ROUND?e.push("a "+this.edgeShapeWidth_+" "+this.edgeShapeWidth_+" 0 0 1 0 "+2*this.edgeShapeWidth_):this.edgeShape_===Blockly.OUTPUT_SHAPE_HEXAGONAL&&e.push("l "+this.edgeShapeWidth_+" "+this.edgeShapeWidth_+" l "+-this.edgeShapeWidth_+" "+this.edgeShapeWidth_))},Blockly.BlockSvg.prototype.positionNewBlock=function(e,t,n){t.type==Blockly.NEXT_STATEMENT&&e.moveBy(n.x_-t.x_,n.y_-t.y_)},Blockly.BlockSvg.drawStatementInputFromTopRight_=function(e,t,n,o){Blockly.BlockSvg.drawStatementInputTop_(e,t),e.push("v",o.height-2*Blockly.BlockSvg.CORNER_RADIUS),Blockly.BlockSvg.drawStatementInputBottom_(e,n,o)},Blockly.BlockSvg.drawStatementInputTop_=function(e,t){e.push(Blockly.BlockSvg.BOTTOM_RIGHT_CORNER),e.push("H",t+Blockly.BlockSvg.STATEMENT_INPUT_INNER_SPACE+2*Blockly.BlockSvg.CORNER_RADIUS),e.push(Blockly.BlockSvg.NOTCH_PATH_RIGHT),e.push("h","-"+Blockly.BlockSvg.STATEMENT_INPUT_INNER_SPACE),e.push(Blockly.BlockSvg.INNER_TOP_LEFT_CORNER)},Blockly.BlockSvg.drawStatementInputBottom_=function(e,t,n){e.push(Blockly.BlockSvg.INNER_BOTTOM_LEFT_CORNER),n.statementNotchAtBottom&&(e.push("h ",Blockly.BlockSvg.STATEMENT_INPUT_INNER_SPACE),e.push(Blockly.BlockSvg.NOTCH_PATH_LEFT)),e.push("H",t-Blockly.BlockSvg.CORNER_RADIUS)},Blockly.BlockSvg.getInputShapeInfo_=function(e){switch(e){case Blockly.OUTPUT_SHAPE_HEXAGONAL:e=Blockly.BlockSvg.INPUT_SHAPE_HEXAGONAL;var t=Blockly.BlockSvg.INPUT_SHAPE_HEXAGONAL_WIDTH,n="boolean";break;case Blockly.OUTPUT_SHAPE_ROUND:e=Blockly.BlockSvg.INPUT_SHAPE_ROUND,t=Blockly.BlockSvg.INPUT_SHAPE_ROUND_WIDTH,n="round";break;default:e=Blockly.BlockSvg.INPUT_SHAPE_SQUARE,t=Blockly.BlockSvg.INPUT_SHAPE_SQUARE_WIDTH,n="square"}return{path:e,argType:n,width:t}},Blockly.BlockSvg.getAlignedCursor_=function(e,t,n){return t.align===Blockly.ALIGN_RIGHT?e+=n-t.fieldWidth-2*Blockly.BlockSvg.SEP_SPACE_X:t.align===Blockly.ALIGN_CENTRE&&(e=Math.max(e,n/2-t.fieldWidth/2)),e},Blockly.BlockSvg.prototype.renderMoveConnections_=function(){var e=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(e),this.outputConnection&&this.outputConnection.moveToOffset(e);for(var t=0;t<this.inputList.length;t++){var n=this.inputList[t].connection;n&&(n.moveToOffset(e),n.isConnected()&&n.tighten_())}this.nextConnection&&(this.nextConnection.moveToOffset(e),this.nextConnection.isConnected()&&this.nextConnection.tighten_())},Blockly.WorkspaceCommentSvg.render={},Blockly.WorkspaceCommentSvg.RESIZE_SIZE=12,Blockly.WorkspaceCommentSvg.BORDER_RADIUS=0,Blockly.WorkspaceCommentSvg.BORDER_WIDTH=1,Blockly.WorkspaceCommentSvg.TEXTAREA_OFFSET=2,Blockly.WorkspaceCommentSvg.TOP_OFFSET=30,Blockly.WorkspaceCommentSvg.DELETE_ICON_PADDING=16,Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH=35,Blockly.WorkspaceCommentSvg.UNEDITABLE_LINE_GAP=30,Blockly.WorkspaceCommentSvg.prototype.getHeightWidth=function(){return{width:this.getWidth(),height:this.getHeight()}},Blockly.WorkspaceCommentSvg.prototype.render=function(){if(!this.rendered_){var e=this.getHeightWidth();if(!this.isEditable()||goog.userAgent.IE?(this.createUneditableText_(),this.svgGroup_.appendChild(this.uneditableTextGroup_)):(this.createEditor_(),this.svgGroup_.appendChild(this.foreignObject_)),this.svgHandleTarget_=Blockly.utils.createSvgElement("rect",{class:"blocklyCommentHandleTarget",fill:"transparent",x:0,y:0}),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=Blockly.utils.createSvgElement("rect",{class:"blocklyCommentTarget",x:0,y:0,rx:Blockly.WorkspaceCommentSvg.BORDER_RADIUS,ry:Blockly.WorkspaceCommentSvg.BORDER_RADIUS}),this.svgGroup_.appendChild(this.svgRectTarget_),this.isDeletable()&&this.addDeleteDom_(this.svgGroup_),this.textarea_)this.textarea_.value=this.content_;else for(var t=0;t<this.content_.length;t+=Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH){var n=this.content_.substring(t,t+Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH);this.pushUneditableTextLine_(n)}this.isEditable()&&!goog.userAgent.IE?(this.addResizeDom_(),this.setSize_(e.width,e.height)):this.setSize_(8*Blockly.WorkspaceCommentSvg.UNEDITABLE_TEXT_LENGTH+25,this.uneditableTextLineY-10),this.rendered_=!0,this.resizeGroup_&&Blockly.bindEventWithChecks_(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_),this.isDeletable()&&(Blockly.bindEventWithChecks_(this.deleteGroup_,"mousedown",this,this.deleteMouseDown_),Blockly.bindEventWithChecks_(this.deleteGroup_,"mouseout",this,this.deleteMouseOut_),Blockly.bindEventWithChecks_(this.deleteGroup_,"mouseup",this,this.deleteMouseUp_))}},Blockly.WorkspaceCommentSvg.prototype.createEditor_=function(){this.foreignObject_=Blockly.utils.createSvgElement("foreignObject",{x:0,y:Blockly.WorkspaceCommentSvg.TOP_OFFSET,class:"blocklyCommentForeignObject"},null);var e=document.createElementNS(Blockly.HTML_NS,"body");e.setAttribute("xmlns",Blockly.HTML_NS),e.className="blocklyMinimalBody";var t=document.createElementNS(Blockly.HTML_NS,"textarea");return t.className="blocklyCommentTextarea",t.setAttribute("dir",this.RTL?"RTL":"LTR"),e.appendChild(t),this.textarea_=t,this.foreignObject_.appendChild(e),Blockly.bindEventWithChecks_(t,"wheel",this,function(e){e.stopPropagation()}),Blockly.bindEventWithChecks_(t,"change",this,function(e){this.setContent(t.value)}),this.foreignObject_},Blockly.WorkspaceCommentSvg.prototype.addResizeDom_=function(){this.resizeGroup_=Blockly.utils.createSvgElement("g",{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_);var e=Blockly.WorkspaceCommentSvg.RESIZE_SIZE;Blockly.utils.createSvgElement("polygon",{points:"0,x x,x x,0".replace(/x/g,e.toString())},this.resizeGroup_),Blockly.utils.createSvgElement("line",{class:"blocklyResizeLine",x1:e/3,y1:e-1,x2:e-1,y2:e/3},this.resizeGroup_),Blockly.utils.createSvgElement("line",{class:"blocklyResizeLine",x1:2*e/3,y1:e-1,x2:e-1,y2:2*e/3},this.resizeGroup_)},Blockly.WorkspaceCommentSvg.prototype.addDeleteDom_=function(){this.deleteGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=Blockly.utils.createSvgElement("rect",{x:"-12.5",y:"1",width:"27.5",height:"27.5",fill:"transparent",class:"blocklyDeleteIconShape"},this.deleteGroup_),Blockly.WorkspaceCommentSvg.drawDeleteIcon(this.deleteGroup_)},Blockly.WorkspaceCommentSvg.drawDeleteIcon=function(e){e=Blockly.utils.createSvgElement("g",{transform:"scale (1.5) translate(-6, 1)"},e),Blockly.utils.createSvgElement("rect",{x:5,y:2,width:"4",height:"2",stroke:"#fff","stroke-width":"1",fill:"transparent"},e),Blockly.utils.createSvgElement("line",{x1:1,y1:4,x2:13,y2:4,stroke:"#fff","stroke-width":"1","stroke-linecap":"round"},e),Blockly.utils.createSvgElement("rect",{x:2,y:4,width:10,height:12,rx:"1",ry:"1",stroke:"#fff","stroke-width":"1",fill:"transparent"},e),Blockly.utils.createSvgElement("line",{x1:5,y1:7,x2:5,y2:13,stroke:"#fff","stroke-width":"1","stroke-linecap":"round"},e),Blockly.utils.createSvgElement("line",{x1:7,y1:7,x2:7,y2:13,stroke:"#fff","stroke-width":"1","stroke-linecap":"round"},e),Blockly.utils.createSvgElement("line",{x1:9,y1:7,x2:9,y2:13,stroke:"#fff","stroke-width":"1","stroke-linecap":"round"},e)},Blockly.WorkspaceCommentSvg.prototype.resizeMouseDown_=function(e){this.unbindDragEvents_(),Blockly.utils.isRightButton(e)||(this.workspace.startDrag(e,new goog.math.Coordinate(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=Blockly.bindEventWithChecks_(document,"mouseup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=Blockly.bindEventWithChecks_(document,"mousemove",this,this.resizeMouseMove_),Blockly.hideChaff()),e.stopPropagation()},Blockly.WorkspaceCommentSvg.prototype.deleteMouseDown_=function(e){Blockly.utils.addClass(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),e.stopPropagation()},Blockly.WorkspaceCommentSvg.prototype.deleteMouseOut_=function(){Blockly.utils.removeClass(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")},Blockly.WorkspaceCommentSvg.prototype.deleteMouseUp_=function(e){this.dispose(!0,!0),e.stopPropagation()},Blockly.WorkspaceCommentSvg.prototype.unbindDragEvents_=function(){this.onMouseUpWrapper_&&(Blockly.unbindEvent_(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(Blockly.unbindEvent_(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)},Blockly.WorkspaceCommentSvg.prototype.resizeMouseUp_=function(){Blockly.Touch.clearTouchIdentifier(),this.unbindDragEvents_()},Blockly.WorkspaceCommentSvg.prototype.resizeMouseMove_=function(e){this.autoLayout_=!1,e=this.workspace.moveDrag(e),this.setSize_(this.RTL?-e.x:e.x,e.y)},Blockly.WorkspaceCommentSvg.prototype.resizeComment_=function(){var e=this.getHeightWidth(),t=Blockly.WorkspaceCommentSvg.TOP_OFFSET,n=2*Blockly.WorkspaceCommentSvg.TEXTAREA_OFFSET;this.foreignObject_&&(this.foreignObject_.setAttribute("width",e.width),this.foreignObject_.setAttribute("height",e.height-t),this.RTL&&this.foreignObject_.setAttribute("x",-e.width),this.textarea_.style.width=e.width-n+"px",this.textarea_.style.height=e.height-n-t+"px")},Blockly.WorkspaceCommentSvg.prototype.setSize_=function(e,t){e=Math.max(e,45),t=Math.max(t,20+Blockly.WorkspaceCommentSvg.TOP_OFFSET),this.width_=e,this.height_=t,this.svgRect_.setAttribute("width",e),this.svgRect_.setAttribute("height",t),this.svgRectTarget_.setAttribute("width",e),this.svgRectTarget_.setAttribute("height",t),this.svgHandleTarget_.setAttribute("width",e),this.svgHandleTarget_.setAttribute("height",Blockly.WorkspaceCommentSvg.TOP_OFFSET),this.RTL&&(this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgRectTarget_.setAttribute("transform","scale(-1 1)"));var n=Blockly.WorkspaceCommentSvg.RESIZE_SIZE;this.resizeGroup_&&(this.RTL?(this.resizeGroup_.setAttribute("transform","translate("+(-e+n)+","+(t-n)+") scale(-1 1)"),this.isDeletable()&&this.deleteGroup_.setAttribute("transform","translate("+(-e+Blockly.WorkspaceCommentSvg.DELETE_ICON_PADDING)+",0) scale(-1 1)")):(this.resizeGroup_.setAttribute("transform","translate("+(e-n)+","+(t-n)+")"),this.isDeletable()&&this.deleteGroup_.setAttribute("transform","translate("+(e-Blockly.WorkspaceCommentSvg.DELETE_ICON_PADDING)+",0)"))),this.resizeComment_()},Blockly.WorkspaceCommentSvg.prototype.disposeInternal_=function(){this.svgHandleTarget_=this.svgRectTarget_=this.foreignObject_=this.textarea_=null},Blockly.WorkspaceCommentSvg.prototype.setFocus=function(){this.focused_=!0;var e=this.textarea_;this.svgRectTarget_.style.fill="none",this.svgHandleTarget_.style.fill="transparent",setTimeout(function(){e.focus()},0),this.addFocus()},Blockly.WorkspaceCommentSvg.prototype.blurFocus=function(){this.focused_=!1;var e=this.textarea_;this.svgRectTarget_.style.fill="transparent",this.svgHandleTarget_.style.fill="none",setTimeout(function(){e.blur()},0),this.removeFocus()},Blockly.WorkspaceCommentSvg.prototype.createUneditableText_=function(){this.uneditableTextGroup_=Blockly.utils.createSvgElement("g",{class:"blocklyUneditableComment"},this.svgGroup_),this.uneditableTextLineY=30},Blockly.WorkspaceCommentSvg.prototype.pushUneditableTextLine_=function(e){var t=Blockly.utils.createSvgElement("text",{x:15,y:this.uneditableTextLineY},this.uneditableTextGroup_);e=document.createTextNode(e),t.appendChild(e),this.uneditableTextLineY+=Blockly.WorkspaceCommentSvg.UNEDITABLE_LINE_GAP},Blockly.Msg={},goog.getMsgOrig=goog.getMsg,goog.getMsg=function(e,t){var n=goog.getMsg.blocklyMsgMap[e];return n&&(e=Blockly.Msg[n]),goog.getMsgOrig(e,t)},goog.getMsg.blocklyMsgMap={Today:"TODAY"},Blockly.FieldTextInput=function(e,t,n){Blockly.FieldTextInput.superClass_.constructor.call(this,e,t),this.setRestrictor(n),this.addArgType("text")},goog.inherits(Blockly.FieldTextInput,Blockly.Field),Blockly.FieldTextInput.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return t=new Blockly.FieldTextInput(t,e.class),"boolean"==typeof e.spellcheck&&t.setSpellcheck(e.spellcheck),t},Blockly.FieldTextInput.ANIMATION_TIME=.25,Blockly.FieldTextInput.TEXT_MEASURE_PADDING_MAGIC=45,Blockly.FieldTextInput.htmlInput_=null,Blockly.FieldTextInput.prototype.CURSOR="text",Blockly.FieldTextInput.prototype.spellcheck_=!0,Blockly.FieldTextInput.prototype.init=function(){if(!this.fieldGroup_){var e=!this.sourceBlock_.isShadow()&&this.sourceBlock_.inputList&&1<this.sourceBlock_.inputList.length;e&&(this.className_+=" blocklyEditableLabel"),Blockly.FieldTextInput.superClass_.init.call(this),e&&(this.box_=Blockly.utils.createSvgElement("rect",{rx:Blockly.BlockSvg.CORNER_RADIUS,ry:Blockly.BlockSvg.CORNER_RADIUS,x:0,y:0,width:this.size_.width,height:this.size_.height,fill:Blockly.Colours.textField,stroke:this.sourceBlock_.getColourTertiary()}),this.fieldGroup_.insertBefore(this.box_,this.textElement_))}},Blockly.FieldTextInput.prototype.dispose=function(){Blockly.WidgetDiv.hideIfOwner(this),Blockly.FieldTextInput.superClass_.dispose.call(this)},Blockly.FieldTextInput.prototype.setValue=function(e){if(null!==e){if(this.sourceBlock_){var t=this.callValidator(e);null!==t&&(e=t)}Blockly.Field.prototype.setValue.call(this,e)}},Blockly.FieldTextInput.prototype.setText=function(e){null!==e&&((e=String(e))!==this.text_&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.text_,e)),Blockly.Field.prototype.setText.call(this,e)))},Blockly.FieldTextInput.prototype.setSpellcheck=function(e){this.spellcheck_=e},Blockly.FieldTextInput.prototype.setRestrictor=function(e){this.restrictor_=e},Blockly.FieldTextInput.prototype.showEditor_=function(e,t,n,o,r){this.workspace_=this.sourceBlock_.workspace,e=t||!1;var i=n||!1;Blockly.WidgetDiv.show(this,this.sourceBlock_.RTL,this.widgetDispose_(),this.widgetDisposeAnimationFinished_(),Blockly.FieldTextInput.ANIMATION_TIME),(n=Blockly.WidgetDiv.DIV).className+=" fieldTextInput",(t=goog.dom.createDom("INPUT","blocklyHtmlInput")).setAttribute("spellcheck",this.spellcheck_),i&&t.setAttribute("readonly","true"),Blockly.FieldTextInput.htmlInput_=t,n.appendChild(t),o&&(this.sourceBlock_.RTL?t.style.paddingLeft=this.arrowSize_+Blockly.BlockSvg.DROPDOWN_ARROW_PADDING+"px":t.style.paddingRight=this.arrowSize_+Blockly.BlockSvg.DROPDOWN_ARROW_PADDING+"px",(o=goog.dom.createDom("IMG","blocklyTextDropDownArrow")).setAttribute("src",Blockly.mainWorkspace.options.pathToMedia+"dropdown-arrow-dark.svg"),o.style.width=this.arrowSize_+"px",o.style.height=this.arrowSize_+"px",o.style.top=this.arrowY_+"px",o.style.cursor="pointer",this.sourceBlock_.RTL?o.style.left="11px":o.style.right="11px",r&&(t.dropDownArrowMouseWrapper_=Blockly.bindEvent_(o,"mousedown",this,r)),n.appendChild(o)),t.value=t.defaultValue=this.text_,t.oldValue_=null,this.validate_(),this.resizeEditor_(),e||(t.focus(),t.select(),t.setSelectionRange(0,99999)),this.bindEvents_(t),o="box-shadow "+Blockly.FieldTextInput.ANIMATION_TIME+"s",Blockly.BlockSvg.FIELD_TEXTINPUT_ANIMATE_POSITIONING&&(n.style.transition+=",padding "+Blockly.FieldTextInput.ANIMATION_TIME+"s,width "+Blockly.FieldTextInput.ANIMATION_TIME+"s,height "+Blockly.FieldTextInput.ANIMATION_TIME+"s,margin-left "+Blockly.FieldTextInput.ANIMATION_TIME+"s"),n.style.transition=o,t.style.transition="font-size "+Blockly.FieldTextInput.ANIMATION_TIME+"s",t.style.fontSize=Blockly.BlockSvg.FIELD_TEXTINPUT_FONTSIZE_FINAL+"pt",n.style.boxShadow="0px 0px 0px 4px "+Blockly.Colours.fieldShadow,r&&(r.call(this),t.focus(),t.select())},Blockly.FieldTextInput.prototype.bindEvents_=function(e){e.onKeyDownWrapper_=Blockly.bindEventWithChecks_(e,"keydown",this,this.onHtmlInputKeyDown_),e.onKeyUpWrapper_=Blockly.bindEventWithChecks_(e,"keyup",this,this.onHtmlInputChange_),e.onKeyPressWrapper_=Blockly.bindEventWithChecks_(e,"keypress",this,this.onHtmlInputChange_),e.onInputWrapper_=Blockly.bindEvent_(e,"input",this,this.onHtmlInputChange_),e.onWorkspaceChangeWrapper_=this.resizeEditor_.bind(this),this.workspace_.addChangeListener(e.onWorkspaceChangeWrapper_)},Blockly.FieldTextInput.prototype.unbindEvents_=function(e){Blockly.unbindEvent_(e.onKeyDownWrapper_),Blockly.unbindEvent_(e.onKeyUpWrapper_),Blockly.unbindEvent_(e.onKeyPressWrapper_),Blockly.unbindEvent_(e.onInputWrapper_),this.workspace_.removeChangeListener(e.onWorkspaceChangeWrapper_)},Blockly.FieldTextInput.prototype.onHtmlInputKeyDown_=function(e){var t=Blockly.FieldTextInput.htmlInput_;13==e.keyCode?(Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()):27==e.keyCode?(t.value=t.defaultValue,Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()):9==e.keyCode&&(Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation(),this.sourceBlock_.tab(this,!e.shiftKey),e.preventDefault())},Blockly.FieldTextInput.GECKO_KEYCODE_WHITELIST=[97,99,118,120],Blockly.FieldTextInput.prototype.onHtmlInputChange_=function(e){if("keypress"===e.type&&this.restrictor_){var t=!1;if(goog.userAgent.GECKO){var n=e.charCode;n<32||127==n?t=!0:(e.metaKey||e.ctrlKey)&&(t=-1<Blockly.FieldTextInput.GECKO_KEYCODE_WHITELIST.indexOf(n))}else n=e.keyCode;if(n=String.fromCharCode(n),!t&&!this.restrictor_.test(n)&&e.preventDefault)return void e.preventDefault()}(t=(e=Blockly.FieldTextInput.htmlInput_).value)!==e.oldValue_?(e.oldValue_=t,this.setValue(t),this.validate_()):goog.userAgent.WEBKIT&&this.sourceBlock_.render(),this.resizeEditor_()},Blockly.FieldTextInput.prototype.validate_=function(){var e=!0;goog.asserts.assertObject(Blockly.FieldTextInput.htmlInput_);var t=Blockly.FieldTextInput.htmlInput_;this.sourceBlock_&&(e=this.callValidator(t.value)),null===e?Blockly.utils.addClass(t,"blocklyInvalidInput"):Blockly.utils.removeClass(t,"blocklyInvalidInput")},Blockly.FieldTextInput.prototype.resizeEditor_=function(){var e=this.sourceBlock_.workspace.scale,t=Blockly.WidgetDiv.DIV,n=this.sourceBlock_.isShadow()?this.sourceBlock_.getHeightWidth().width*e:this.size_.width*e;if(Blockly.BlockSvg.FIELD_TEXTINPUT_EXPAND_PAST_TRUNCATION){var o=Blockly.utils.measureText(Blockly.FieldTextInput.htmlInput_.style.fontSize,Blockly.FieldTextInput.htmlInput_.style.fontFamily,Blockly.FieldTextInput.htmlInput_.style.fontWeight,Blockly.FieldTextInput.htmlInput_.value);o+=Blockly.FieldTextInput.TEXT_MEASURE_PADDING_MAGIC,o*=e}else o=n;o=Math.max(o,Blockly.BlockSvg.FIELD_WIDTH_MIN_EDIT*e),o=Math.min(o,Blockly.BlockSvg.FIELD_WIDTH_MAX_EDIT*e),t.style.width=o/e+1+"px",t.style.height=Blockly.BlockSvg.FIELD_HEIGHT+1+"px",t.style.transform="scale("+e+")",t.style.marginLeft=-.5*(o-n)+"px",n=this.getBorderRadius()+.5,t.style.borderRadius=n+"px",Blockly.FieldTextInput.htmlInput_.style.borderRadius=n+"px",n=this.sourceBlock_.getColourTertiary(),t.style.borderColor=n,(n=this.getAbsoluteXY_()).x-=e/2,n.y-=e/2,this.sourceBlock_.RTL&&(n.x+=o,n.x-=t.offsetWidth*e,n.x+=1*e),n.y+=1*e,goog.userAgent.GECKO&&Blockly.WidgetDiv.DIV.style.top&&(n.x+=2*e,n.y+=1*e),goog.userAgent.WEBKIT&&(n.y-=1*e),t.style.left=n.x+"px",t.style.top=n.y+"px"},Blockly.FieldTextInput.prototype.getBorderRadius=function(){return this.sourceBlock_.getOutputShape()==Blockly.OUTPUT_SHAPE_ROUND?Blockly.BlockSvg.NUMBER_FIELD_CORNER_RADIUS:Blockly.BlockSvg.TEXT_FIELD_CORNER_RADIUS},Blockly.FieldTextInput.prototype.widgetDispose_=function(){var n=this;return function(){var e=Blockly.WidgetDiv.DIV,t=Blockly.FieldTextInput.htmlInput_;n.maybeSaveEdit_(),n.unbindEvents_(t),t.dropDownArrowMouseWrapper_&&Blockly.unbindEvent_(t.dropDownArrowMouseWrapper_),Blockly.Events.setGroup(!1),t.style.fontSize=Blockly.BlockSvg.FIELD_TEXTINPUT_FONTSIZE_INITIAL+"pt",e.style.boxShadow="",n.sourceBlock_&&(n.sourceBlock_.isShadow()?(t=n.sourceBlock_.getHeightWidth(),e.style.width=t.width+1+"px",e.style.height=t.height+1+"px"):(e.style.width=n.size_.width+1+"px",e.style.height=Blockly.BlockSvg.FIELD_HEIGHT+1+"px")),e.style.marginLeft=0}},Blockly.FieldTextInput.prototype.widgetDisposeAnimationFinished_=function(){return function(){var e=Blockly.WidgetDiv.DIV.style;e.width="auto",e.height="auto",e.fontSize="",Blockly.WidgetDiv.DIV.className="blocklyWidgetDiv",Blockly.WidgetDiv.DIV.removeAttribute("style"),Blockly.FieldTextInput.htmlInput_.style.transition="",Blockly.FieldTextInput.htmlInput_=null}},Blockly.FieldTextInput.prototype.maybeSaveEdit_=function(){var e=Blockly.FieldTextInput.htmlInput_,t=e.value;this.sourceBlock_&&(null===(t=this.callValidator(t))?t=e.defaultValue:this.onFinishEditing_&&this.onFinishEditing_(t)),this.setText(t),this.sourceBlock_.rendered&&this.sourceBlock_.render()},Blockly.FieldTextInput.numberValidator=function(e){return console.warn("Blockly.FieldTextInput.numberValidator is deprecated. Use Blockly.FieldNumber instead."),null===e?null:(e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,""),e=parseFloat(e||0),isNaN(e)?null:String(e))},Blockly.FieldTextInput.nonnegativeIntegerValidator=function(e){return(e=Blockly.FieldTextInput.numberValidator(e))&&(e=String(Math.max(0,Math.floor(e)))),e},Blockly.Field.register("field_input",Blockly.FieldTextInput),Blockly.FieldAngle=function(e,t){this.symbol_=Blockly.utils.createSvgElement("tspan",{},null),this.symbol_.appendChild(document.createTextNode("")),e=e&&!isNaN(e)?String(e):"0",Blockly.FieldAngle.superClass_.constructor.call(this,e,t),this.addArgType("angle")},goog.inherits(Blockly.FieldAngle,Blockly.FieldTextInput),Blockly.FieldAngle.fromJson=function(e){return new Blockly.FieldAngle(e.angle)},Blockly.FieldAngle.ROUND=15,Blockly.FieldAngle.HALF=60,Blockly.FieldAngle.CLOCKWISE=!0,Blockly.FieldAngle.OFFSET=90,Blockly.FieldAngle.WRAP=180,Blockly.FieldAngle.HANDLE_RADIUS=10,Blockly.FieldAngle.ARROW_WIDTH=Blockly.FieldAngle.HANDLE_RADIUS,Blockly.FieldAngle.RADIUS=Blockly.FieldAngle.HALF-Blockly.FieldAngle.HANDLE_RADIUS-1,Blockly.FieldAngle.CENTER_RADIUS=2,Blockly.FieldAngle.ARROW_SVG_DATAURI="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgd2lkdGg9IjhweCIKICAgaGVpZ2h0PSIxMHB4IgogICB2aWV3Qm94PSIwIDAgOCAxMCIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnMiIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMC45MSByMTM3MjUiCiAgIHNvZGlwb2RpOmRvY25hbWU9ImFycm93LnN2ZyI+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhMTYiPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTE3OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI3MTAiCiAgICAgaWQ9Im5hbWVkdmlldzE0IgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp6b29tPSIyMy42IgogICAgIGlua3NjYXBlOmN4PSI0IgogICAgIGlua3NjYXBlOmN5PSI1IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ic3ZnMiIgLz4KICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDQzLjIgKDM5MDY5KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4KICA8dGl0bGUKICAgICBpZD0idGl0bGU0Ij5hcnJvdzwvdGl0bGU+CiAgPGRlc2MKICAgICBpZD0iZGVzYzYiPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM4IiAvPgogIDxnCiAgICAgaWQ9IlBhZ2UtMSIKICAgICBzdHJva2U9Im5vbmUiCiAgICAgc3Ryb2tlLXdpZHRoPSIxIgogICAgIGZpbGw9Im5vbmUiCiAgICAgZmlsbC1ydWxlPSJldmVub2RkIgogICAgIHRyYW5zZm9ybT0icm90YXRlKDkwLCA0LCA1KSIKICAgICBzdHlsZT0iZmlsbDojMDAwMDAwIj4KICAgIDxnCiAgICAgICBpZD0iYXJyb3ciCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNC4wMDAwMDAsIC0zLjAwMDAwMCkiCiAgICAgICBmaWxsPSIjNEM5N0ZGIgogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMCI+CiAgICAgIDxwYXRoCiAgICAgICAgIGQ9Ik04LjAxODkxMDgzLDYuNjgyMjMwNTUgTDMuNTA5OTE2MDEsNy40MzM3Mjk2OSBDMy4yNDY3OTEzMSw3LjQ3NzU4MzggMy4wMTg5MTA4Myw3LjczOTQyMTUxIDMuMDE4OTEwODMsOC4wMTU1NjM4OCBDMy4wMTg5MTA4Myw4LjI4MzYzMDI5IDMuMjM4NzQxMzQsOC41NTIyMDIzIDMuNTA5OTE2MDEsOC41OTczOTgwOCBMOC4wMTg5MTA4Myw5LjM0ODg5NzIyIEw4LjAxODkxMDgzLDExLjAxODUzMzcgQzguMDE4OTEwODMsMTEuNTYyNTI3NiA4LjM4MzI2Njg2LDExLjc1MjAwMzIgOC44MzI3MjI3OSwxMS40MjY4ODQ3IEwxMi42NDEwMTc2LDguNjcyMTE1ODcgQzEzLjA5ODE2MzgsOC4zNDE0MzQ1NSAxMy4wOTU3MjIzLDcuODE0NzA1MTggMTIuNjUyNzQxMSw3LjQ4MzIwODA2IEw4LjgyMDk5OTM2LDQuNjE1NzkyNTMgQzguMzc1NTc2NjQsNC4yODI0NjgzOCA4LjAxODkxMDgzLDQuNDYxOTQ5NDggOC4wMTg5MTA4Myw1LjAxMjU5NDAyIEw4LjAxODkxMDgzLDYuNjgyMjMwNTUgWiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOC4wMDE2NzMsIDguMDE3MjM3KSByb3RhdGUoLTkwLjAwMDAwMCkgdHJhbnNsYXRlKC04LjAwMTY3MywgLTguMDE3MjM3KSAiCiAgICAgICAgIGlkPSJwYXRoMTIiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDAiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K",Blockly.FieldAngle.prototype.dispose_=function(){var e=this;return function(){Blockly.FieldAngle.superClass_.dispose_.call(e)(),e.gauge_=null,e.mouseDownWrapper_&&Blockly.unbindEvent_(e.mouseDownWrapper_),e.mouseUpWrapper_&&Blockly.unbindEvent_(e.mouseUpWrapper_),e.mouseMoveWrapper_&&Blockly.unbindEvent_(e.mouseMoveWrapper_)}},Blockly.FieldAngle.prototype.showEditor_=function(e){Blockly.FieldAngle.superClass_.showEditor_.call(this,e,goog.userAgent.MOBILE||goog.userAgent.ANDROID||goog.userAgent.IPAD),Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent(),e=Blockly.DropDownDiv.getContentDiv(),e=Blockly.utils.createSvgElement("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",height:2*Blockly.FieldAngle.HALF+"px",width:2*Blockly.FieldAngle.HALF+"px"},e),Blockly.utils.createSvgElement("circle",{cx:Blockly.FieldAngle.HALF,cy:Blockly.FieldAngle.HALF,r:Blockly.FieldAngle.RADIUS,class:"blocklyAngleCircle"},e),this.gauge_=Blockly.utils.createSvgElement("path",{class:"blocklyAngleGauge"},e),this.line_=Blockly.utils.createSvgElement("line",{x1:Blockly.FieldAngle.HALF,y1:Blockly.FieldAngle.HALF,class:"blocklyAngleLine"},e);var t=Math.PI*Blockly.FieldAngle.OFFSET/180;for(Blockly.utils.createSvgElement("line",{x1:Blockly.FieldAngle.HALF,y1:Blockly.FieldAngle.HALF,x2:Blockly.FieldAngle.HALF+Blockly.FieldAngle.RADIUS*Math.cos(t),y2:Blockly.FieldAngle.HALF-Blockly.FieldAngle.RADIUS*Math.sin(t),class:"blocklyAngleLine"},e),t=0;t<360;t+=15)Blockly.utils.createSvgElement("line",{x1:Blockly.FieldAngle.HALF+Blockly.FieldAngle.RADIUS-13,y1:Blockly.FieldAngle.HALF,x2:Blockly.FieldAngle.HALF+Blockly.FieldAngle.RADIUS-7,y2:Blockly.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+t+","+Blockly.FieldAngle.HALF+","+Blockly.FieldAngle.HALF+")"},e);Blockly.utils.createSvgElement("circle",{cx:Blockly.FieldAngle.HALF,cy:Blockly.FieldAngle.HALF,r:Blockly.FieldAngle.CENTER_RADIUS,class:"blocklyAngleCenterPoint"},e),this.handle_=Blockly.utils.createSvgElement("g",{},e),Blockly.utils.createSvgElement("circle",{cx:0,cy:0,r:Blockly.FieldAngle.HANDLE_RADIUS,class:"blocklyAngleDragHandle"},this.handle_),this.arrowSvg_=Blockly.utils.createSvgElement("image",{width:Blockly.FieldAngle.ARROW_WIDTH,height:Blockly.FieldAngle.ARROW_WIDTH,x:-Blockly.FieldAngle.ARROW_WIDTH/2,y:-Blockly.FieldAngle.ARROW_WIDTH/2},this.handle_),this.arrowSvg_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.FieldAngle.ARROW_SVG_DATAURI),Blockly.DropDownDiv.setColour(this.sourceBlock_.parentBlock_.getColour(),this.sourceBlock_.getColourTertiary()),Blockly.DropDownDiv.setCategory(this.sourceBlock_.parentBlock_.getCategory()),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_),this.mouseDownWrapper_=Blockly.bindEvent_(this.handle_,"mousedown",this,this.onMouseDown),this.updateGraph_()},Blockly.FieldAngle.prototype.onMouseDown=function(){this.mouseMoveWrapper_=Blockly.bindEvent_(document.body,"mousemove",this,this.onMouseMove),this.mouseUpWrapper_=Blockly.bindEvent_(document.body,"mouseup",this,this.onMouseUp)},Blockly.FieldAngle.prototype.onMouseUp=function(){Blockly.unbindEvent_(this.mouseMoveWrapper_),Blockly.unbindEvent_(this.mouseUpWrapper_)},Blockly.FieldAngle.prototype.onMouseMove=function(e){e.preventDefault();var t=this.gauge_.ownerSVGElement.getBoundingClientRect(),n=e.clientX-t.left-Blockly.FieldAngle.HALF;e=e.clientY-t.top-Blockly.FieldAngle.HALF,t=Math.atan(-e/n),isNaN(t)||(t=goog.math.toDegrees(t),n<0?t+=180:0<e&&(t+=360),t=Blockly.FieldAngle.CLOCKWISE?Blockly.FieldAngle.OFFSET+360-t:t-Blockly.FieldAngle.OFFSET,Blockly.FieldAngle.ROUND&&(t=Math.round(t/Blockly.FieldAngle.ROUND)*Blockly.FieldAngle.ROUND),t=this.callValidator(t),Blockly.FieldTextInput.htmlInput_.value=t,this.setValue(t),this.validate_(),this.resizeEditor_())},Blockly.FieldAngle.prototype.setText=function(e){Blockly.FieldAngle.superClass_.setText.call(this,e),this.textElement_&&(this.updateGraph_(),this.size_.width=0)},Blockly.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var e=Number(this.getText())%360+Blockly.FieldAngle.OFFSET,t=goog.math.toRadians(e),n=["M ",Blockly.FieldAngle.HALF,",",Blockly.FieldAngle.HALF],o=Blockly.FieldAngle.HALF,r=Blockly.FieldAngle.HALF;if(!isNaN(t)){var i=goog.math.toRadians(Blockly.FieldAngle.OFFSET),a=Math.cos(i)*Blockly.FieldAngle.RADIUS,s=Math.sin(i)*-Blockly.FieldAngle.RADIUS;Blockly.FieldAngle.CLOCKWISE&&(t=2*i-t),o+=Math.cos(t)*Blockly.FieldAngle.RADIUS,r-=Math.sin(t)*Blockly.FieldAngle.RADIUS,t=180<Math.abs(e-Blockly.FieldAngle.OFFSET)?1:0,i=Number(Blockly.FieldAngle.CLOCKWISE),e<Blockly.FieldAngle.OFFSET&&(i=1-i),n.push(" l ",a,",",s," A ",Blockly.FieldAngle.RADIUS,",",Blockly.FieldAngle.RADIUS," 0 ",t," ",i," ",o,",",r," z"),this.arrowSvg_.setAttribute("transform","rotate("+(Blockly.FieldAngle.CLOCKWISE?e+2*Blockly.FieldAngle.OFFSET:-e)+")")}this.gauge_.setAttribute("d",n.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",r),this.handle_.setAttribute("transform","translate("+o+","+r+")")}},Blockly.FieldAngle.prototype.classValidator=function(e){return null===e?null:(e=parseFloat(e||0),isNaN(e)?null:((e%=360)<0&&(e+=360),e>Blockly.FieldAngle.WRAP&&(e-=360),String(e)))},Blockly.Field.register("field_angle",Blockly.FieldAngle),Blockly.FieldCheckbox=function(e,t){Blockly.FieldCheckbox.superClass_.constructor.call(this,"",t),this.setValue(e),this.addArgType("checkbox")},goog.inherits(Blockly.FieldCheckbox,Blockly.Field),Blockly.FieldCheckbox.fromJson=function(e){return new Blockly.FieldCheckbox(e.checked?"TRUE":"FALSE")},Blockly.FieldCheckbox.CHECK_CHAR="",Blockly.FieldCheckbox.prototype.CURSOR="default",Blockly.FieldCheckbox.prototype.init=function(){if(!this.fieldGroup_){Blockly.FieldCheckbox.superClass_.init.call(this),this.checkElement_=Blockly.utils.createSvgElement("text",{class:"blocklyText blocklyCheckbox",x:-3,y:14},this.fieldGroup_);var e=document.createTextNode(Blockly.FieldCheckbox.CHECK_CHAR);this.checkElement_.appendChild(e),this.checkElement_.style.display=this.state_?"block":"none"}},Blockly.FieldCheckbox.prototype.getValue=function(){return String(this.state_).toUpperCase()},Blockly.FieldCheckbox.prototype.setValue=function(e){e="string"==typeof e?"TRUE"==e.toUpperCase():!!e,this.state_!==e&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.state_,e)),this.state_=e,this.checkElement_&&(this.checkElement_.style.display=e?"block":"none"))},Blockly.FieldCheckbox.prototype.showEditor_=function(){var e=!this.state_;this.sourceBlock_&&(e=this.callValidator(e)),null!==e&&this.setValue(String(e).toUpperCase())},Blockly.Field.register("field_checkbox",Blockly.FieldCheckbox),Blockly.FieldColour=function(e,t){Blockly.FieldColour.superClass_.constructor.call(this,e,t),this.addArgType("colour")},goog.inherits(Blockly.FieldColour,Blockly.Field),Blockly.FieldColour.fromJson=function(e){return new Blockly.FieldColour(e.colour)},Blockly.FieldColour.prototype.colours_=null,Blockly.FieldColour.prototype.columns_=0,Blockly.FieldColour.prototype.colorPicker_=null,Blockly.FieldColour.prototype.init=function(e){Blockly.FieldColour.superClass_.init.call(this,e),this.setValue(this.getValue())},Blockly.FieldColour.prototype.CURSOR="default",Blockly.FieldColour.prototype.dispose=function(){Blockly.WidgetDiv.hideIfOwner(this),Blockly.FieldColour.superClass_.dispose.call(this)},Blockly.FieldColour.prototype.getValue=function(){return this.colour_},Blockly.FieldColour.prototype.setValue=function(e){this.sourceBlock_&&Blockly.Events.isEnabled()&&this.colour_!=e&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.colour_,e)),this.colour_=e,this.sourceBlock_&&this.sourceBlock_.setColour(e,e,e)},Blockly.FieldColour.prototype.getText=function(){var e=this.colour_,t=e.match(/^#(.)\1(.)\2(.)\3$/);return t&&(e="#"+t[1]+t[2]+t[3]),e},Blockly.FieldColour.prototype.getSize=function(){return new goog.math.Size(Blockly.BlockSvg.FIELD_WIDTH,Blockly.BlockSvg.FIELD_HEIGHT)},Blockly.FieldColour.COLOURS=goog.ui.ColorPicker.SIMPLE_GRID_COLORS,Blockly.FieldColour.COLUMNS=7,Blockly.FieldColour.prototype.setColours=function(e){return this.colours_=e,this},Blockly.FieldColour.prototype.setColumns=function(e){return this.columns_=e,this},Blockly.FieldColour.prototype.showEditor_=function(){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent(),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_),this.colorPicker_=this.createWidget_(),Blockly.DropDownDiv.setColour("#ffffff","#dddddd"),this.sourceBlock_.parentBlock_&&Blockly.DropDownDiv.setCategory(this.sourceBlock_.parentBlock_.getCategory()),this.setValue(this.getValue());var t=this;Blockly.FieldColour.changeEventKey_=goog.events.listen(this.colorPicker_,goog.ui.ColorPicker.EventType.CHANGE,function(e){e=e.target.getSelectedColor()||"#000000",Blockly.DropDownDiv.hide(),t.sourceBlock_&&(e=t.callValidator(e)),null!==e&&t.setValue(e)})},Blockly.FieldColour.prototype.createWidget_=function(){var e=new goog.ui.ColorPicker;e.setSize(this.columns_||Blockly.FieldColour.COLUMNS),e.setColors(this.colours_||Blockly.FieldColour.COLOURS);var t=Blockly.DropDownDiv.getContentDiv();return e.render(t),e.setSelectedColor(this.getValue(!0)),e},Blockly.FieldColour.prototype.dispose=function(){Blockly.FieldColour.changeEventKey_&&goog.events.unlistenByKey(Blockly.FieldColour.changeEventKey_),Blockly.Events.setGroup(!1),Blockly.FieldColour.superClass_.dispose.call(this)},Blockly.Field.register("field_colour",Blockly.FieldColour),Blockly.FieldColourSlider=function(e,t){Blockly.FieldColourSlider.superClass_.constructor.call(this,e,t),this.addArgType("colour")},goog.inherits(Blockly.FieldColourSlider,Blockly.Field),Blockly.FieldColourSlider.fromJson=function(e){return new Blockly.FieldColourSlider(e.colour)},Blockly.FieldColourSlider.prototype.init=function(e){Blockly.FieldColourSlider.superClass_.init.call(this,e),this.setValue(this.getValue())},Blockly.FieldColourSlider.prototype.getValue=function(){return this.colour_},Blockly.FieldColourSlider.prototype.setValue=function(e){this.sourceBlock_&&Blockly.Events.isEnabled()&&this.colour_!=e&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.colour_,e)),this.colour_=e,this.sourceBlock_&&this.sourceBlock_.setColour(e,e,this.sourceBlock_.getColourTertiary()),this.updateSliderHandles_(),this.updateDom_()},Blockly.FieldColourSlider.prototype.createColourStops_=function(e){for(var t=[],n=0;n<=360;n+=20)switch(e){case"hue":t.push(goog.color.hsvToHex(n,this.saturation_,this.brightness_));break;case"saturation":t.push(goog.color.hsvToHex(this.hue_,n/360,this.brightness_));break;case"brightness":t.push(goog.color.hsvToHex(this.hue_,this.saturation_,255*n/360));break;default:throw Error("Unknown channel for colour sliders: "+e)}return t},Blockly.FieldColourSlider.prototype.setGradient_=function(e,t){var n=this.createColourStops_(t).join(",");goog.style.setStyle(e,"background","-moz-linear-gradient(left, "+n+")"),goog.style.setStyle(e,"background","-webkit-linear-gradient(left, "+n+")"),goog.style.setStyle(e,"background","-o-linear-gradient(left, "+n+")"),goog.style.setStyle(e,"background","-ms-linear-gradient(left, "+n+")"),goog.style.setStyle(e,"background","linear-gradient(left, "+n+")")},Blockly.FieldColourSlider.prototype.updateDom_=function(){this.hueSlider_&&(this.setGradient_(this.hueSlider_.getElement(),"hue"),this.setGradient_(this.saturationSlider_.getElement(),"saturation"),this.setGradient_(this.brightnessSlider_.getElement(),"brightness"),this.hueReadout_.textContent=Math.floor(100*this.hue_/360).toFixed(0),this.saturationReadout_.textContent=Math.floor(100*this.saturation_).toFixed(0),this.brightnessReadout_.textContent=Math.floor(100*this.brightness_/255).toFixed(0))},Blockly.FieldColourSlider.prototype.updateSliderHandles_=function(){this.hueSlider_&&(this.hueSlider_.setValue(this.hue_),this.saturationSlider_.setValue(this.saturation_),this.brightnessSlider_.setValue(this.brightness_))},Blockly.FieldColourSlider.prototype.getText=function(){var e=this.colour_,t=e.match(/^#(.)\1(.)\2(.)\3$/);return t&&(e="#"+t[1]+t[2]+t[3]),e},Blockly.FieldColourSlider.prototype.createLabelDom_=function(e){var t=document.createElement("div");t.setAttribute("class","blocklyColourPickerLabel");var n=document.createElement("span");n.setAttribute("class","blocklyColourPickerReadout");var o=document.createElement("span");return o.setAttribute("class","blocklyColourPickerLabelText"),o.textContent=e,t.appendChild(o),t.appendChild(n),[t,n]},Blockly.FieldColourSlider.prototype.sliderCallbackFactory_=function(n){var o=this;return function(e){e=e.target.getValue();var t=goog.color.hexToHsv(o.getValue());switch(n){case"hue":t[0]=o.hue_=e;break;case"saturation":t[1]=o.saturation_=e;break;case"brightness":t[2]=o.brightness_=e}e=goog.color.hsvToHex(t[0],t[1],t[2]),o.sourceBlock_&&(e=o.callValidator(e)),null!==e&&o.setValue(e,!0)}},Blockly.FieldColourSlider.prototype.showEditor_=function(){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv(),t=goog.color.hexToHsv(this.getValue());this.hue_=t[0],this.saturation_=t[1],this.brightness_=t[2],t=this.createLabelDom_("Hue"),e.appendChild(t[0]),this.hueReadout_=t[1],this.hueSlider_=new goog.ui.Slider,this.hueSlider_.setUnitIncrement(5),this.hueSlider_.setMinimum(0),this.hueSlider_.setMaximum(360),this.hueSlider_.render(e),t=this.createLabelDom_("Saturation"),e.appendChild(t[0]),this.saturationReadout_=t[1],this.saturationSlider_=new goog.ui.Slider,this.saturationSlider_.setUnitIncrement(.01),this.saturationSlider_.setStep(.001),this.saturationSlider_.setMinimum(0),this.saturationSlider_.setMaximum(1),this.saturationSlider_.render(e),t=this.createLabelDom_("Brightness"),e.appendChild(t[0]),this.brightnessReadout_=t[1],this.brightnessSlider_=new goog.ui.Slider,this.brightnessSlider_.setUnitIncrement(2),this.brightnessSlider_.setMinimum(0),this.brightnessSlider_.setMaximum(255),this.brightnessSlider_.render(e),Blockly.FieldColourSlider.hueChangeEventKey_=goog.events.listen(this.hueSlider_,goog.ui.Component.EventType.CHANGE,this.sliderCallbackFactory_("hue")),Blockly.FieldColourSlider.saturationChangeEventKey_=goog.events.listen(this.saturationSlider_,goog.ui.Component.EventType.CHANGE,this.sliderCallbackFactory_("saturation")),Blockly.FieldColourSlider.brightnessChangeEventKey_=goog.events.listen(this.brightnessSlider_,goog.ui.Component.EventType.CHANGE,this.sliderCallbackFactory_("brightness")),Blockly.DropDownDiv.setColour("#ffffff","#dddddd"),Blockly.DropDownDiv.setCategory(this.sourceBlock_.parentBlock_.getCategory()),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_),this.setValue(this.getValue())},Blockly.FieldColourSlider.prototype.dispose=function(){Blockly.FieldColourSlider.hueChangeEventKey_&&goog.events.unlistenByKey(Blockly.FieldColourSlider.hueChangeEventKey_),Blockly.FieldColourSlider.saturationChangeEventKey_&&goog.events.unlistenByKey(Blockly.FieldColourSlider.saturationChangeEventKey_),Blockly.FieldColourSlider.brightnessChangeEventKey_&&goog.events.unlistenByKey(Blockly.FieldColourSlider.brightnessChangeEventKey_),Blockly.Events.setGroup(!1),Blockly.FieldColourSlider.superClass_.dispose.call(this)},Blockly.Field.register("field_colour_slider",Blockly.FieldColourSlider),Blockly.FieldDropdown=function(e,t){this.menuGenerator_=e,this.trimOptions_();var n=this.getOptions()[0];Blockly.FieldDropdown.superClass_.constructor.call(this,n[1],t),this.addArgType("dropdown")},goog.inherits(Blockly.FieldDropdown,Blockly.Field),Blockly.FieldDropdown.fromJson=function(e){return new Blockly.FieldDropdown(e.options)},Blockly.FieldDropdown.CHECKMARK_OVERHANG=25,Blockly.FieldDropdown.prototype.CURSOR="default",Blockly.FieldDropdown.prototype.selectedItem=null,Blockly.FieldDropdown.prototype.value_="",Blockly.FieldDropdown.prototype.imageElement_=null,Blockly.FieldDropdown.prototype.imageJson_=null,Blockly.FieldDropdown.DROPDOWN_SVG_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",Blockly.FieldDropdown.prototype.init=function(){if(!this.fieldGroup_){this.arrowSize_=12,this.arrowX_=0,this.arrowY_=11,this.arrow_=Blockly.utils.createSvgElement("image",{height:this.arrowSize_+"px",width:this.arrowSize_+"px"}),this.arrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.FieldDropdown.DROPDOWN_SVG_DATAURI),this.className_+=" blocklyDropdownText",Blockly.FieldDropdown.superClass_.init.call(this),this.shouldShowRect_()&&(this.box_=Blockly.utils.createSvgElement("rect",{rx:Blockly.BlockSvg.CORNER_RADIUS,ry:Blockly.BlockSvg.CORNER_RADIUS,x:0,y:0,width:this.size_.width,height:this.size_.height,stroke:this.sourceBlock_.getColourTertiary(),fill:this.sourceBlock_.getColour(),class:"blocklyBlockBackground","fill-opacity":1},null),this.fieldGroup_.insertBefore(this.box_,this.textElement_));var e=this.text_;this.text_=null,this.setText(e)}},Blockly.FieldDropdown.prototype.shouldShowRect_=function(){return!this.sourceBlock_.isShadow()},Blockly.FieldDropdown.prototype.showEditor_=function(){var e=this.getOptions();if(0!=e.length){this.dropDownOpen_=!0,Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var t=Blockly.DropDownDiv.getContentDiv(),n=this,o=!1,r=new goog.ui.Menu;r.setRightToLeft(this.sourceBlock_.RTL);for(var i=0;i<e.length;i++){var a=e[i][0],s=e[i][1];if("object"==typeof a){var l=new Image(a.width,a.height);l.src=a.src,l.alt=a.alt||"",a=l}(a=new goog.ui.MenuItem(a)).setRightToLeft(this.sourceBlock_.RTL),a.setValue(s),a.setCheckable(!0),r.addChild(a,!0),s=s==this.value_,a.setChecked(s),s&&(this.selectedItem=a)}goog.events.listen(r,goog.ui.Component.EventType.ACTION,function(e){o||((e=e.target)&&(n.onItemSelected(this,e),o=!0),Blockly.DropDownDiv.hide(),Blockly.Events.setGroup(!1))}),r.getHandler().listen(r.getElement(),goog.events.EventType.TOUCHSTART,function(e){this.getOwnerControl(e.target).handleMouseDown(e)}),r.getHandler().listen(r.getElement(),goog.events.EventType.TOUCHEND,function(e){this.getOwnerControl(e.target).performActionInternal(e)}),r.render(t),e=r.getElement(),Blockly.utils.addClass(e,"blocklyDropdownMenu"),goog.style.getSize(e).height=e.scrollHeight,t=this.sourceBlock_.isShadow()?this.sourceBlock_.parentBlock_.getColour():this.sourceBlock_.getColour(),Blockly.DropDownDiv.setColour(t,this.sourceBlock_.getColourTertiary()),t=this.sourceBlock_.isShadow()?this.sourceBlock_.parentBlock_.getCategory():this.sourceBlock_.getCategory(),Blockly.DropDownDiv.setCategory(t),i=this.sourceBlock_.workspace.scale,s=this.size_.width,t=this.size_.height,s*=i,t*=i,s=(i=this.fieldGroup_.getBoundingClientRect()).left+s/2,t=i.top+t,i=i.top,Blockly.DropDownDiv.setBoundsElement(this.sourceBlock_.workspace.getParentSvg().parentNode),Blockly.DropDownDiv.show(this,s,t,s,i,this.onHide.bind(this)),r.setAllowAutoFocus(!0),e.focus(),this.disableColourChange_||(this.sourceBlock_.isShadow()?(this.savedPrimary_=this.sourceBlock_.getColour(),this.sourceBlock_.setColour(this.sourceBlock_.getColourTertiary(),this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary())):this.box_&&this.box_.setAttribute("fill",this.sourceBlock_.getColourTertiary()))}},Blockly.FieldDropdown.prototype.onHide=function(){this.dropDownOpen_=!1,!this.disableColourChange_&&this.sourceBlock_&&(this.sourceBlock_.isShadow()?this.sourceBlock_.setColour(this.savedPrimary_,this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary()):this.box_&&this.box_.setAttribute("fill",this.sourceBlock_.getColour()))},Blockly.FieldDropdown.prototype.onItemSelected=function(e,t){if(this.dropDownOpen_){var n=t.getValue();this.sourceBlock_&&(n=this.callValidator(n)),null!==n&&this.setValue(n)}},Blockly.FieldDropdown.prototype.trimOptions_=function(){this.suffixField=this.prefixField=null;var e=this.menuGenerator_;if(goog.isArray(e)){for(var t=!1,n=0;n<e.length;n++){var o=e[n][0];"string"==typeof o?e[n][0]=Blockly.utils.replaceMessageReferences(o):(null!=o.alt&&(e[n][0].alt=Blockly.utils.replaceMessageReferences(o.alt)),t=!0)}if(!(t||e.length<2)){var r=[];for(n=0;n<e.length;n++)r.push(e[n][0]);if(n=Blockly.utils.shortestStringLength(r),t=Blockly.utils.commonWordPrefix(r,n),o=Blockly.utils.commonWordSuffix(r,n),(t||o)&&!(n<=t+o)){for(t&&(this.prefixField=r[0].substring(0,t-1)),o&&(this.suffixField=r[0].substr(1-o)),r=[],n=0;n<e.length;n++){var i=e[n][0],a=e[n][1];i=i.substring(t,i.length-o),r[n]=[i,a]}this.menuGenerator_=r}}}},Blockly.FieldDropdown.prototype.isOptionListDynamic=function(){return goog.isFunction(this.menuGenerator_)},Blockly.FieldDropdown.prototype.getOptions=function(){return goog.isFunction(this.menuGenerator_)?this.menuGenerator_.call(this):this.menuGenerator_},Blockly.FieldDropdown.prototype.getValue=function(){return this.value_},Blockly.FieldDropdown.prototype.setValue=function(e){if(null!==e&&e!==this.value_){this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.value_,e)),this.selectedItem&&(this.selectedItem.setChecked(!1),this.selectedItem=null),this.value_=e;for(var t=this.getOptions(),n=0;n<t.length;n++)if(t[n][1]==e)return"object"==typeof(e=t[n][0])?(this.imageJson_=e,this.text_=e.alt):(this.imageJson_=null,this.text_=e),void this.forceRerender();this.text_=e,this.forceRerender()}},Blockly.FieldDropdown.prototype.setText=function(e){null!==e&&e!==this.text_&&(this.text_=e,this.updateTextNode_(),this.textElement_&&this.textElement_.parentNode.appendChild(this.arrow_),this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_()))},Blockly.FieldDropdown.prototype.positionArrow=function(e){return this.arrow_?(this.arrowX_=this.sourceBlock_.RTL?this.arrowSize_-Blockly.BlockSvg.DROPDOWN_ARROW_PADDING:e+Blockly.BlockSvg.DROPDOWN_ARROW_PADDING/2,e=this.arrowSize_+Blockly.BlockSvg.DROPDOWN_ARROW_PADDING,this.box_&&(this.arrowX_+=Blockly.BlockSvg.BOX_FIELD_PADDING),this.arrow_.setAttribute("transform","translate("+this.arrowX_+","+this.arrowY_+")"),e):0},Blockly.FieldDropdown.prototype.dispose=function(){this.selectedItem=null,Blockly.WidgetDiv.hideIfOwner(this),Blockly.FieldDropdown.superClass_.dispose.call(this)},Blockly.Field.register("field_dropdown",Blockly.FieldDropdown),Blockly.FieldIconMenu=function(e){this.icons_=e,Blockly.FieldIconMenu.superClass_.constructor.call(this,e[0].value),this.addArgType("iconmenu")},goog.inherits(Blockly.FieldIconMenu,Blockly.Field),Blockly.FieldIconMenu.fromJson=function(e){return new Blockly.FieldIconMenu(e.options)},Blockly.FieldIconMenu.DROPDOWN_WIDTH=168,Blockly.FieldIconMenu.savedPrimary_=null,Blockly.FieldIconMenu.prototype.init=function(e){this.arrowX_=18,this.arrowY_=10,e.RTL&&(this.arrowX_=-this.arrowX_-12),this.arrowIcon_=Blockly.utils.createSvgElement("image",{height:"12px",width:"12px",transform:"translate("+this.arrowX_+","+this.arrowY_+")"}),this.arrowIcon_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"dropdown-arrow.svg"),e.getSvgRoot().appendChild(this.arrowIcon_),Blockly.FieldIconMenu.superClass_.init.call(this,e)},Blockly.FieldIconMenu.prototype.CURSOR="default",Blockly.FieldIconMenu.prototype.setValue=function(e){null!==e&&e!==this.value_&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.Change(this.sourceBlock_,"field",this.name,this.value_,e)),this.value_=e,this.setParentFieldImage(this.getSrcForValue(this.value_)))},Blockly.FieldIconMenu.prototype.setParentFieldImage=function(e){if(this.sourceBlock_&&this.sourceBlock_.parentBlock_)for(var t,n=this.sourceBlock_.parentBlock_,o=0;t=n.inputList[o];o++)for(var r,i=0;r=t.fieldRow[i];i++)if(r instanceof Blockly.FieldImage)return void r.setValue(e)},Blockly.FieldIconMenu.prototype.getValue=function(){return this.value_},Blockly.FieldIconMenu.prototype.getSrcForValue=function(e){for(var t,n=0;t=this.icons_[n];n++)if(t.value===e)return t.src},Blockly.FieldIconMenu.prototype.showEditor_=function(){if(!Blockly.DropDownDiv.hideIfOwner(this)){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv();e.setAttribute("role","menu"),e.setAttribute("aria-haspopup","true");for(var t,n=0;t=this.icons_[n];n++)if("placeholder"==t.type){var o=document.createElement("span");o.setAttribute("class","blocklyDropDownPlaceholder"),o.style.width=t.width+"px",o.style.height=t.height+"px",e.appendChild(o)}else{(o=document.createElement("button")).setAttribute("id",":"+n),o.setAttribute("role","menuitem"),o.setAttribute("class","blocklyDropDownButton"),o.title=t.alt,o.style.width=t.width+"px",o.style.height=t.height+"px";var r=this.sourceBlock_.getColour();t.value==this.getValue()&&(r=this.sourceBlock_.getColourTertiary(),o.setAttribute("aria-selected","true")),o.style.backgroundColor=r,o.style.borderColor=this.sourceBlock_.getColourTertiary(),Blockly.bindEvent_(o,"click",this,this.buttonClick_),Blockly.bindEvent_(o,"mouseup",this,this.buttonClick_),Blockly.bindEvent_(o,"mousedown",o,function(e){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),e.preventDefault()}),Blockly.bindEvent_(o,"mouseover",o,function(){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),e.setAttribute("aria-activedescendant",this.id)}),Blockly.bindEvent_(o,"mouseout",o,function(){this.setAttribute("class","blocklyDropDownButton"),e.removeAttribute("aria-activedescendant")}),(r=document.createElement("img")).src=t.src,o.setAttribute("data-value",t.value),r.setAttribute("data-value",t.value),o.appendChild(r),e.appendChild(o)}e.style.width=Blockly.FieldIconMenu.DROPDOWN_WIDTH+"px",Blockly.DropDownDiv.setColour(this.sourceBlock_.getColour(),this.sourceBlock_.getColourTertiary()),Blockly.DropDownDiv.setCategory(this.sourceBlock_.parentBlock_.getCategory()),this.savedPrimary_=this.sourceBlock_.getColour(),this.sourceBlock_.setColour(this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary()),n=this.sourceBlock_.workspace.scale,n=-Blockly.BlockSvg.MIN_BLOCK_Y*n-Blockly.BlockSvg.FIELD_Y_OFFSET*n,Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_,this.onHide_.bind(this),n)||this.arrowIcon_.setAttribute("transform","translate("+(this.arrowX_+Blockly.DropDownDiv.ARROW_SIZE/1.5+1)+","+(this.arrowY_+Blockly.DropDownDiv.ARROW_SIZE/1.5)+") rotate(180)")}},Blockly.FieldIconMenu.prototype.buttonClick_=function(e){e=e.target.getAttribute("data-value"),this.setValue(e),Blockly.DropDownDiv.hide()},Blockly.FieldIconMenu.prototype.onHide_=function(){this.sourceBlock_&&this.sourceBlock_.setColour(this.savedPrimary_,this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary()),Blockly.DropDownDiv.content_.removeAttribute("role"),Blockly.DropDownDiv.content_.removeAttribute("aria-haspopup"),Blockly.DropDownDiv.content_.removeAttribute("aria-activedescendant"),this.arrowIcon_.setAttribute("transform","translate("+this.arrowX_+","+this.arrowY_+")")},Blockly.Field.register("field_iconmenu",Blockly.FieldIconMenu),Blockly.FieldImage=function(e,t,n,o,r,i){this.sourceBlock_=null,this.height_=Number(n),this.width_=Number(t),this.size_=new goog.math.Size(this.width_,this.height_),this.text_=r||"",this.flipRTL_=o,this.setValue(e),"function"==typeof i&&(this.clickHandler_=i,this.EDITABLE=!0)},goog.inherits(Blockly.FieldImage,Blockly.Field),Blockly.FieldImage.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.src),n=Number(Blockly.utils.replaceMessageReferences(e.width)),o=Number(Blockly.utils.replaceMessageReferences(e.height)),r=Blockly.utils.replaceMessageReferences(e.alt);return new Blockly.FieldImage(t,n,o,r,!!e.flip_rtl)},Blockly.FieldImage.prototype.EDITABLE=!1,Blockly.FieldImage.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=Blockly.utils.createSvgElement("g",{},null),this.visible_||(this.fieldGroup_.style.display="none"),this.imageElement_=Blockly.utils.createSvgElement("image",{height:this.height_+"px",width:this.width_+"px"},this.fieldGroup_),this.setValue(this.src_),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.setTooltip(this.sourceBlock_),Blockly.Tooltip.bindMouseEvents(this.imageElement_),this.maybeAddClickHandler_())},Blockly.FieldImage.prototype.dispose=function(){goog.dom.removeNode(this.fieldGroup_),this.imageElement_=this.fieldGroup_=null},Blockly.FieldImage.prototype.maybeAddClickHandler_=function(){this.clickHandler_&&(this.mouseDownWrapper_=Blockly.bindEventWithChecks_(this.fieldGroup_,"mousedown",this,this.onMouseDown_),this.imageElement_&&(this.imageElement_.style.cursor="pointer"))},Blockly.FieldImage.prototype.setTooltip=function(e){this.imageElement_.tooltip=e},Blockly.FieldImage.prototype.getValue=function(){return this.src_},Blockly.FieldImage.prototype.setValue=function(e){null!==e&&(this.src_=e,this.imageElement_&&this.imageElement_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e||""))},Blockly.FieldImage.prototype.getFlipRTL=function(){return this.flipRTL_},Blockly.FieldImage.prototype.setText=function(e){null!==e&&(this.text_=e)},Blockly.FieldImage.prototype.render_=function(){},Blockly.FieldImage.prototype.forceRerender=function(){},Blockly.FieldImage.prototype.updateWidth=function(){},Blockly.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},Blockly.Field.register("field_image",Blockly.FieldImage),Blockly.FieldTextDropdown=function(e,t,n,o){this.menuGenerator_=t,Blockly.FieldDropdown.prototype.trimOptions_.call(this),Blockly.FieldTextDropdown.superClass_.constructor.call(this,e,n,o),this.addArgType("textdropdown")},goog.inherits(Blockly.FieldTextDropdown,Blockly.FieldTextInput);Blockly.FieldTextDropdown.fromJson=function(e){return e=new Blockly.FieldTextDropdown(element.text,element.options),"boolean"==typeof element.spellcheck&&e.setSpellcheck(element.spellcheck),e},Blockly.FieldTextDropdown.DROPDOWN_SVG_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiM1NzVFNzUiLz48L3N2Zz4K",Blockly.FieldTextDropdown.prototype.init=function(){Blockly.FieldTextDropdown.superClass_.init.call(this),this.arrow_||(this.arrowSize_=12,this.arrowX_=0,this.arrowY_=11,this.arrow_=Blockly.utils.createSvgElement("image",{height:this.arrowSize_+"px",width:this.arrowSize_+"px"}),this.arrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.FieldTextDropdown.DROPDOWN_SVG_DATAURI),this.arrow_.style.cursor="pointer",this.fieldGroup_.appendChild(this.arrow_),this.mouseUpWrapper_=Blockly.bindEvent_(this.arrow_,"mouseup",this,this.showDropdown_)),this.disableColourChange_=!0},Blockly.FieldTextDropdown.prototype.dispose=function(){this.mouseUpWrapper_&&(Blockly.unbindEvent_(this.mouseUpWrapper_),this.mouseUpWrapper_=null,Blockly.Touch.clearTouchIdentifier()),Blockly.FieldTextDropdown.superClass_.dispose.call(this)},Blockly.FieldTextDropdown.prototype.showEditor_=function(e){this.dropDownOpen_||Blockly.FieldTextDropdown.superClass_.showEditor_.call(this,e,null,null,!0,function(){this.showDropdown_(),Blockly.Touch.clearTouchIdentifier()})},Blockly.FieldTextDropdown.prototype.isOptionListDynamic=Blockly.FieldDropdown.prototype.isOptionListDynamic,Blockly.FieldTextDropdown.prototype.getOptions=Blockly.FieldDropdown.prototype.getOptions,Blockly.FieldTextDropdown.prototype.positionArrow=Blockly.FieldDropdown.prototype.positionArrow,Blockly.FieldTextDropdown.prototype.showDropdown_=Blockly.FieldDropdown.prototype.showEditor_,Blockly.FieldTextDropdown.prototype.onHide=function(){Blockly.WidgetDiv.hide(),Blockly.FieldDropdown.prototype.onHide.call(this)},Blockly.FieldTextDropdown.prototype.onItemSelected=function(e,t){var n=t.getValue();if(this.sourceBlock_&&(n=this.callValidator(n)),null!==n){var o=Blockly.FieldTextInput.htmlInput_;o&&(o.value=n),this.setValue(n)}},Blockly.Field.register("field_textdropdown",Blockly.FieldTextDropdown),Blockly.FieldNumber=function(e,t,n,o,r){t=this.getNumRestrictor(t,n,o),e=e&&!isNaN(e)?String(e):"0",Blockly.FieldNumber.superClass_.constructor.call(this,e,r,t),this.addArgType("number")},goog.inherits(Blockly.FieldNumber,Blockly.FieldTextInput),Blockly.FieldNumber.fromJson=function(e){return new Blockly.FieldNumber(e.value,e.min,e.max,e.precision)},Blockly.FieldNumber.DROPDOWN_WIDTH=168,Blockly.FieldNumber.DROPDOWN_Y_PADDING=8,Blockly.FieldNumber.NUMPAD_BUTTONS="789456123.0- ".split(""),Blockly.FieldNumber.NUMPAD_DELETE_ICON='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><path d="M28.89,11.45H16.79a2.86,2.86,0,0,0-2,.84L9.09,18a2.85,2.85,0,0,0,0,4l5.69,5.69a2.86,2.86,0,0,0,2,.84h12.1a2.86,2.86,0,0,0,2.86-2.86V14.31A2.86,2.86,0,0,0,28.89,11.45ZM27.15,22.73a1,1,0,0,1,0,1.41,1,1,0,0,1-.71.3,1,1,0,0,1-.71-0.3L23,21.41l-2.73,2.73a1,1,0,0,1-1.41,0,1,1,0,0,1,0-1.41L21.59,20l-2.73-2.73a1,1,0,0,1,0-1.41,1,1,0,0,1,1.41,0L23,18.59l2.73-2.73a1,1,0,1,1,1.42,1.41L24.42,20Z" fill="'+Blockly.Colours.numPadText+'"/></svg>',Blockly.FieldNumber.activeField_=null,Blockly.FieldNumber.prototype.getNumRestrictor=function(e,t,n){return this.setConstraints_(e,t,n),e="[\\d]",this.decimalAllowed_&&(e+="|[\\.]"),this.negativeAllowed_&&(e+="|[-]"),new RegExp(e)},Blockly.FieldNumber.prototype.setConstraints_=function(e,t,n){this.decimalAllowed_=void 0===n||isNaN(n)||0==n||Math.floor(n)!=n,this.negativeAllowed_=void 0===e||isNaN(e)||e<0},Blockly.FieldNumber.prototype.showEditor_=function(e){Blockly.FieldNumber.activeField_=this;var t=goog.userAgent.MOBILE||goog.userAgent.ANDROID||goog.userAgent.IPAD;Blockly.FieldNumber.superClass_.showEditor_.call(this,e,!1,t),t&&this.showNumPad_()},Blockly.FieldNumber.prototype.showNumPad_=function(){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv();e.setAttribute("role","menu"),e.setAttribute("aria-haspopup","true"),this.addButtons_(e),Blockly.DropDownDiv.setColour(Blockly.Colours.numPadBackground,Blockly.Colours.numPadBorder),e.style.width=Blockly.FieldNumber.DROPDOWN_WIDTH+"px",this.position_()},Blockly.FieldNumber.prototype.position_=function(){var e=this.sourceBlock_.workspace.scale,t=this.sourceBlock_.getHeightWidth();t.width*=e,t.height*=e;var n=this.getAbsoluteXY_(),o=n.x+t.width/2;t=n.y+t.height+Blockly.FieldNumber.DROPDOWN_Y_PADDING,e=n.y-Blockly.BlockSvg.MIN_BLOCK_Y*e-Blockly.BlockSvg.FIELD_Y_OFFSET*e,Blockly.DropDownDiv.setBoundsElement(this.sourceBlock_.workspace.getParentSvg().parentNode),Blockly.DropDownDiv.show(this,o,t,o,e,this.onHide_.bind(this))},Blockly.FieldNumber.prototype.addButtons_=function(e){for(var t,n=Blockly.FieldNumber.NUMPAD_BUTTONS,o=0;t=n[o];o++){var r=document.createElement("button");if(r.setAttribute("role","menuitem"),r.setAttribute("class","blocklyNumPadButton"),r.title=t,r.innerHTML=t,Blockly.bindEvent_(r,"mousedown",r,Blockly.FieldNumber.numPadButtonTouch),"."!=t||this.decimalAllowed_){if("-"==t&&!this.negativeAllowed_)continue;if(" "==t&&!this.negativeAllowed_)continue;" "==t&&this.negativeAllowed_&&r.setAttribute("style","visibility: hidden")}else r.setAttribute("style","visibility: hidden");e.appendChild(r)}(n=document.createElement("button")).setAttribute("role","menuitem"),n.setAttribute("class","blocklyNumPadButton"),n.title="Delete",(o=document.createElement("img")).src=Blockly.FieldNumber.NUMPAD_DELETE_ICON,n.appendChild(o),Blockly.bindEvent_(n,"mousedown",null,Blockly.FieldNumber.numPadEraseButtonTouch),e.appendChild(n)},Blockly.FieldNumber.numPadButtonTouch=function(e){var t=this.innerHTML,n=Blockly.FieldTextInput.htmlInput_.value,o=Blockly.FieldTextInput.htmlInput_.selectionStart,r=Blockly.FieldTextInput.htmlInput_.selectionEnd,i=n.slice(0,o)+t+n.slice(r);0==r-o&&(i=n+t),Blockly.FieldNumber.updateDisplay_(i),Blockly.Touch.clearTouchIdentifier(),e.preventDefault()},Blockly.FieldNumber.numPadEraseButtonTouch=function(e){var t=Blockly.FieldTextInput.htmlInput_.value,n=Blockly.FieldTextInput.htmlInput_.selectionStart,o=Blockly.FieldTextInput.htmlInput_.selectionEnd,r=t.slice(0,n)+t.slice(o);0==o-n&&(r=0==o?t.slice(0,t.length-1):t.slice(0,n-1)+t.slice(n)),Blockly.FieldNumber.updateDisplay_(r),Blockly.Touch.clearTouchIdentifier(),e.preventDefault()},Blockly.FieldNumber.updateDisplay_=function(e){Blockly.FieldTextInput.htmlInput_.value=e,Blockly.FieldNumber.superClass_.resizeEditor_.call(Blockly.FieldNumber.activeField_),Blockly.FieldTextInput.htmlInput_.setSelectionRange(e.length,e.length),Blockly.FieldTextInput.htmlInput_.scrollLeft=Blockly.FieldTextInput.htmlInput_.scrollWidth,Blockly.FieldNumber.activeField_.validate_()},Blockly.FieldNumber.prototype.onHide_=function(){Blockly.DropDownDiv.content_.removeAttribute("role"),Blockly.DropDownDiv.content_.removeAttribute("aria-haspopup")},Blockly.FieldNumber.prototype.classValidator=function(e){return null===e?null:(e=(e=(e=String(e)).replace(/O/gi,"0")).replace(/,/g,""),e=parseFloat(e||0),isNaN(e)?null:String(e))},Blockly.Field.register("field_number",Blockly.FieldNumber),Blockly.FieldNumberDropdown=function(e,t,n,o,r,i){this.setConstraints_=Blockly.FieldNumber.prototype.setConstraints_,n=Blockly.FieldNumber.prototype.getNumRestrictor.call(this,n,o,r),Blockly.FieldNumberDropdown.superClass_.constructor.call(this,e,t,i,n),this.addArgType("numberdropdown")},goog.inherits(Blockly.FieldNumberDropdown,Blockly.FieldTextDropdown),Blockly.FieldNumberDropdown.fromJson=function(e){return new Blockly.FieldNumberDropdown(element.value,element.options,element.min,element.max,element.precision)},Blockly.FieldNumberDropdown.prototype.classValidator=Blockly.FieldNumber.prototype.classValidator,Blockly.Field.register("field_numberdropdown",Blockly.FieldNumberDropdown),Blockly.FieldVariable=function(e,t,n,o){this.menuGenerator_=Blockly.FieldVariable.dropdownCreate,this.size_=new goog.math.Size(Blockly.BlockSvg.FIELD_WIDTH,Blockly.BlockSvg.FIELD_HEIGHT),this.setValidator(t),this.defaultVariableName=e||"",this.setTypes_(n,o),this.value_=null},goog.inherits(Blockly.FieldVariable,Blockly.FieldDropdown),Blockly.FieldVariable.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.variable);return new Blockly.FieldVariable(t,null,e.variableTypes,e.defaultType)},Blockly.FieldVariable.prototype.init=function(){this.fieldGroup_||(Blockly.FieldVariable.superClass_.init.call(this),this.initModel())},Blockly.FieldVariable.prototype.initModel=function(){if(!this.variable_){this.workspace_=this.sourceBlock_.workspace;var e=Blockly.Variables.getOrCreateVariablePackage(this.workspace_,null,this.defaultVariableName,this.defaultType_);Blockly.Events.disable();try{this.setValue(e.getId())}finally{Blockly.Events.enable()}}},Blockly.FieldVariable.prototype.dispose=function(){Blockly.FieldVariable.superClass_.dispose.call(this),this.variableMap_=this.workspace_=null},Blockly.FieldVariable.prototype.setSourceBlock=function(e){goog.asserts.assert(!e.isShadow(),"Variable fields are not allowed to exist on shadow blocks."),Blockly.FieldVariable.superClass_.setSourceBlock.call(this,e)},Blockly.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},Blockly.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},Blockly.FieldVariable.prototype.getVariable=function(){return this.variable_},Blockly.FieldVariable.prototype.setValue=function(e){var t=Blockly.Variables.getVariable(this.sourceBlock_.workspace,e);if(!t)throw Error("Variable id doesn't point to a real variable!  ID was "+e);var n=t.type;if(!this.typeIsAllowed_(n))throw Error("Variable type doesn't match this field!  Type was "+n);this.sourceBlock_&&Blockly.Events.isEnabled()&&(n=this.variable_?this.variable_.getId():null,Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,n,e))),this.variable_=t,this.value_=e,this.setText(t.name)},Blockly.FieldVariable.prototype.typeIsAllowed_=function(e){var t=this.getVariableTypes_();if(!t)return!0;for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1},Blockly.FieldVariable.prototype.getVariableTypes_=function(){var e=this.variableTypes;if(null===e&&this.sourceBlock_)return this.sourceBlock_.workspace.getVariableTypes();if(0==(e=e||[""]).length)throw e=this.getText(),Error("'variableTypes' of field variable "+e+" was an empty list");return e},Blockly.FieldVariable.prototype.setTypes_=function(e,t){var n=t||"";if(null==e||null==e)var o=null;else{if(!Array.isArray(e))throw Error("'variableTypes' was not an array in the definition of a FieldVariable");o=e;for(var r=!1,i=0;i<o.length;i++)o[i]==n&&(r=!0);if(!r)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}this.defaultType_=n,this.variableTypes=o},Blockly.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var e=this.getText(),t=null;this.sourceBlock_&&(t=this.sourceBlock_.workspace);var n=[];if(t)for(var o=this.getVariableTypes_(),r=0;r<o.length;r++){var i=t.getVariablesOfType(o[r]);n=n.concat(i)}for(n.sort(Blockly.VariableModel.compareByName),t=[],r=0;r<n.length;r++)t[r]=[n[r].name,n[r].getId()];return t.push([Blockly.Msg.RENAME_VARIABLE,Blockly.RENAME_VARIABLE_ID]),Blockly.Msg.DELETE_VARIABLE&&t.push([Blockly.Msg.DELETE_VARIABLE.replace("%1",e),Blockly.DELETE_VARIABLE_ID]),t},Blockly.FieldVariable.prototype.onItemSelected=function(e,t){var n=t.getValue();if(this.sourceBlock_&&this.sourceBlock_.workspace){var o=this.sourceBlock_.workspace;if(n==Blockly.RENAME_VARIABLE_ID)return void Blockly.Variables.renameVariable(o,this.variable_);if(n==Blockly.DELETE_VARIABLE_ID)return void o.deleteVariableById(this.variable_.getId())}this.setValue(n)},Blockly.FieldVariable.prototype.shouldShowRect_=function(){return!this.sourceBlock_.isShadow()&&"variables_get"!=this.sourceBlock_.type&&"variables_get_reporter"!=this.sourceBlock_.type},Blockly.Field.register("field_variable",Blockly.FieldVariable),Blockly.FieldVerticalSeparator=function(){this.sourceBlock_=null,this.width_=1,this.height_=Blockly.BlockSvg.ICON_SEPARATOR_HEIGHT,this.size_=new goog.math.Size(this.width_,this.height_)},goog.inherits(Blockly.FieldVerticalSeparator,Blockly.Field),Blockly.FieldVerticalSeparator.fromJson=function(e){return new Blockly.FieldVerticalSeparator},Blockly.FieldVerticalSeparator.prototype.EDITABLE=!1,Blockly.FieldVerticalSeparator.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=Blockly.utils.createSvgElement("g",{},null),this.visible_||(this.fieldGroup_.style.display="none"),this.lineElement_=Blockly.utils.createSvgElement("line",{stroke:this.sourceBlock_.getColourSecondary(),"stroke-linecap":"round",x1:0,y1:0,x2:0,y2:this.height_},this.fieldGroup_),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_))},Blockly.FieldVerticalSeparator.prototype.setLineHeight=function(e){this.lineElement_.setAttribute("y2",e)},Blockly.FieldVerticalSeparator.prototype.dispose=function(){goog.dom.removeNode(this.fieldGroup_),this.lineElement_=this.fieldGroup_=null},Blockly.FieldVerticalSeparator.prototype.getValue=function(){return null},Blockly.FieldVerticalSeparator.prototype.setValue=function(e){},Blockly.FieldVerticalSeparator.prototype.setText=function(e){},Blockly.FieldVerticalSeparator.prototype.render_=function(){},Blockly.FieldVerticalSeparator.prototype.updateWidth=function(){},Blockly.Field.register("field_vertical_separator",Blockly.FieldVerticalSeparator),Blockly.FieldSlider=function(e,t,n,o,r,i,a){Blockly.FieldSlider.superClass_.constructor.call(this,e,a),this.min_=parseFloat(t),this.max_=parseFloat(n),this.step_=parseFloat(r),this.labelText_=i,this.precision_=parseFloat(o)},goog.inherits(Blockly.FieldSlider,Blockly.FieldNumber),Blockly.FieldSlider.fromJson=function(e){return new Blockly.FieldSlider(e.value,e.min,e.max,e.precision,e.step,e.labelText)},Blockly.FieldSlider.prototype.setMinMax=function(e,t,n){this.min_=parseFloat(e),this.max_=parseFloat(t),this.step_=parseFloat(n)||void 0},Blockly.FieldSlider.prototype.setLabel=function(e){null!=e&&(this.labelText_=e)},Blockly.FieldSlider.prototype.setColor=function(e){null!=e&&(this.sliderColor_=e)},Blockly.FieldSlider.prototype.init=function(){Blockly.FieldTextInput.superClass_.init.call(this),this.setValue(this.getValue())},Blockly.FieldSlider.prototype.showEditor_=function(e){Blockly.FieldSlider.superClass_.showEditor_.call(this,e,!1),1/0!=this.max_&&-1/0!=this.min_&&(this.showSlider_(),this.setValue(this.getValue()))},Blockly.FieldSlider.prototype.showSlider_=function(){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv();e.setAttribute("role","menu"),e.setAttribute("aria-haspopup","true"),this.addSlider_(e),Blockly.DropDownDiv.setColour("#ffffff","#dddddd"),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_),this.slider_&&this.slider_.setVisible(!0)},Blockly.FieldSlider.prototype.addSlider_=function(e){if(this.labelText_){var t=this.createLabelDom_(this.labelText_);e.appendChild(t[0]),this.readout_=t[1]}this.slider_=new goog.ui.Slider,this.slider_.setMoveToPointEnabled(!1),this.slider_.setMinimum(this.min_),this.slider_.setMaximum(this.max_),this.step_&&this.slider_.setUnitIncrement(this.step_),this.slider_.setRightToLeft(this.sourceBlock_.RTL),t=parseFloat(this.getValue()),t=isNaN(t)?0:t,this.slider_.setValue(t),this.slider_.render(e);var n=this;Blockly.FieldSlider.changeEventKey_=goog.events.listen(this.slider_,goog.ui.Component.EventType.CHANGE,function(e){if(e=e.target.getValue()||0,n.sourceBlock_&&(e=n.callValidator(e)),null!==e){n.setValue(e);var t=Blockly.FieldTextInput.htmlInput_;t.value=e,t.focus()}}),Blockly.FieldSlider.focusEventKey_=goog.events.listen(this.slider_.getElement(),goog.ui.Component.EventType.FOCUS,function(){Blockly.FieldTextInput.htmlInput_.focus()})},Blockly.FieldSlider.prototype.createLabelDom_=function(e){var t=document.createElement("div");t.setAttribute("class","blocklyFieldSliderLabel");var n=document.createElement("span");n.setAttribute("class","blocklyFieldSliderReadout");var o=document.createElement("span");return o.setAttribute("class","blocklyFieldSliderLabelText"),o.innerHTML=e,t.appendChild(o),t.appendChild(n),[t,n]},Blockly.FieldSlider.prototype.setValue=function(e){Blockly.FieldSlider.superClass_.setValue.call(this,e),this.updateSliderHandles_(),this.updateDom_()},Blockly.FieldSlider.prototype.updateDom_=function(){this.slider_&&this.readout_&&(this.setBackground_(this.slider_.getElement()),this.setReadout_(this.readout_,this.getValue()))},Blockly.FieldSlider.prototype.setBackground_=function(e){this.sliderColor_?goog.style.setStyle(e,"background",this.sliderColor_):this.sourceBlock_.isShadow()&&this.sourceBlock_.parentBlock_&&goog.style.setStyle(e,"background",this.sourceBlock_.parentBlock_.getColourTertiary())},Blockly.FieldSlider.prototype.setReadout_=function(e,t){e.innerHTML=t},Blockly.FieldSlider.prototype.updateSliderHandles_=function(){this.slider_&&this.slider_.setValue(parseFloat(this.getValue()))},Blockly.FieldSlider.prototype.onHtmlInputChange_=function(e){Blockly.FieldSlider.superClass_.onHtmlInputChange_.call(this,e),this.slider_&&this.slider_.setValue(parseFloat(this.getValue()))},Blockly.FieldSlider.prototype.dispose=function(){Blockly.FieldSlider.changeEventKey_&&goog.events.unlistenByKey(Blockly.FieldSlider.changeEventKey_),Blockly.FieldSlider.focusEventKey_&&goog.events.unlistenByKey(Blockly.FieldSlider.focusEventKey_),Blockly.Events.setGroup(!1),Blockly.FieldSlider.superClass_.dispose.call(this)},Blockly.Field.register("field_slider",Blockly.FieldSlider),Blockly.FieldString=function(e,t,n){Blockly.FieldString.superClass_.constructor.call(this,e,t),this.setRestrictor(n),this.addArgType("text")},goog.inherits(Blockly.FieldString,Blockly.FieldTextInput),Blockly.FieldString.fromJson=function(e){var t=Blockly.utils.replaceMessageReferences(e.text);return t=new Blockly.FieldString(t,e.class),"boolean"==typeof e.spellcheck&&t.setSpellcheck(e.spellcheck),t},Blockly.FieldString.quotePadding=0,Blockly.FieldString.QUOTE_0_DATA_URI="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4KCjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0icmVwZWF0IgogICB4PSIwcHgiCiAgIHk9IjBweCIKICAgdmlld0JveD0iMCAwIDI0IDI0IgogICBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNCAyNDsiCiAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1IgogICBzb2RpcG9kaTpkb2NuYW1lPSJxdW90ZTAuc3ZnIgogICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9Ii9Vc2Vycy9zYW1teXNhbS9Xb3JrL3B4dC1ibG9ja2x5L21lZGlhL3F1b3RlMC5wbmciCiAgIGlua3NjYXBlOmV4cG9ydC14ZHBpPSIxOTguNzUiCiAgIGlua3NjYXBlOmV4cG9ydC15ZHBpPSIxOTguNzUiPjxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTE1Ij48cmRmOlJERj48Y2M6V29yawogICAgICAgICByZGY6YWJvdXQ9IiI+PGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+PGRjOnR5cGUKICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPjxkYzp0aXRsZT5yZXBlYXQ8L2RjOnRpdGxlPjwvY2M6V29yaz48L3JkZjpSREY+PC9tZXRhZGF0YT48ZGVmcwogICAgIGlkPSJkZWZzMTMiIC8+PHNvZGlwb2RpOm5hbWVkdmlldwogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxIgogICAgIG9iamVjdHRvbGVyYW5jZT0iMTAiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAiCiAgICAgZ3VpZGV0b2xlcmFuY2U9IjEwIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzYzIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjgzNCIKICAgICBpZD0ibmFtZWR2aWV3MTEiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGlua3NjYXBlOnpvb209IjkuODMzMzMzNSIKICAgICBpbmtzY2FwZTpjeD0iMTkuMDkzNTg3IgogICAgIGlua3NjYXBlOmN5PSIxMy4yODgxMzYiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJyZXBlYXQiIC8+PHN0eWxlCiAgICAgdHlwZT0idGV4dC9jc3MiCiAgICAgaWQ9InN0eWxlMyI+Cgkuc3Qwe2ZpbGw6I0NGOEIxNzt9Cgkuc3Qxe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+PHRpdGxlCiAgICAgaWQ9InRpdGxlNSI+cmVwZWF0PC90aXRsZT48dGV4dAogICAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgICAgc3R5bGU9ImZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtd2VpZ2h0Om5vcm1hbDtmb250LXNpemU6MzAuOTc1OTk5ODNweDtsaW5lLWhlaWdodDoxMjUlO2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7bGV0dGVyLXNwYWNpbmc6MHB4O3dvcmQtc3BhY2luZzowcHg7ZmlsbDojYTMxNTE1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxcHg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICB4PSI3Ljc5MjM4NjUiCiAgICAgeT0iMjUuNjc5MTgyIgogICAgIGlkPSJ0ZXh0NDEzNyIKICAgICBzb2RpcG9kaTpsaW5lc3BhY2luZz0iMTI1JSI+PHRzcGFuCiAgICAgICBzb2RpcG9kaTpyb2xlPSJsaW5lIgogICAgICAgaWQ9InRzcGFuNDEzOSIKICAgICAgIHg9IjcuNzkyMzg2NSIKICAgICAgIHk9IjI1LjY3OTE4MiIKICAgICAgIHN0eWxlPSJmb250LXN0eWxlOm5vcm1hbDtmb250LXZhcmlhbnQ6bm9ybWFsO2ZvbnQtd2VpZ2h0Om5vcm1hbDtmb250LXN0cmV0Y2g6bm9ybWFsO2ZvbnQtZmFtaWx5Ok1vbmFjbzstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOk1vbmFjbztmaWxsOiNhMzE1MTU7ZmlsbC1vcGFjaXR5OjEiPiZxdW90OzwvdHNwYW4+PC90ZXh0Pgo8L3N2Zz4=",Blockly.FieldString.QUOTE_1_DATA_URI="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4KCjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0icmVwZWF0IgogICB4PSIwcHgiCiAgIHk9IjBweCIKICAgdmlld0JveD0iMCAwIDI0IDI0IgogICBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNCAyNDsiCiAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1IgogICBzb2RpcG9kaTpkb2NuYW1lPSJxdW90ZTEuc3ZnIgogICBpbmtzY2FwZTpleHBvcnQtZmlsZW5hbWU9Ii9Vc2Vycy9zYW1teXNhbS9Xb3JrL3B4dC1ibG9ja2x5L21lZGlhL3F1b3RlMS5wbmciCiAgIGlua3NjYXBlOmV4cG9ydC14ZHBpPSIxOTguNzUiCiAgIGlua3NjYXBlOmV4cG9ydC15ZHBpPSIxOTguNzUiPjxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTE1Ij48cmRmOlJERj48Y2M6V29yawogICAgICAgICByZGY6YWJvdXQ9IiI+PGRjOmZvcm1hdD5pbWFnZS9zdmcreG1sPC9kYzpmb3JtYXQ+PGRjOnR5cGUKICAgICAgICAgICByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIiAvPjxkYzp0aXRsZT5yZXBlYXQ8L2RjOnRpdGxlPjwvY2M6V29yaz48L3JkZjpSREY+PC9tZXRhZGF0YT48ZGVmcwogICAgIGlkPSJkZWZzMTMiIC8+PHNvZGlwb2RpOm5hbWVkdmlldwogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxIgogICAgIG9iamVjdHRvbGVyYW5jZT0iMTAiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAiCiAgICAgZ3VpZGV0b2xlcmFuY2U9IjEwIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzYzIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjgzNCIKICAgICBpZD0ibmFtZWR2aWV3MTEiCiAgICAgc2hvd2dyaWQ9ImZhbHNlIgogICAgIGlua3NjYXBlOnpvb209IjkuODMzMzMzNSIKICAgICBpbmtzY2FwZTpjeD0iMTkuMDkzNTg3IgogICAgIGlua3NjYXBlOmN5PSIxMy4yODgxMzYiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJyZXBlYXQiIC8+PHN0eWxlCiAgICAgdHlwZT0idGV4dC9jc3MiCiAgICAgaWQ9InN0eWxlMyI+Cgkuc3Qwe2ZpbGw6I0NGOEIxNzt9Cgkuc3Qxe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+PHRpdGxlCiAgICAgaWQ9InRpdGxlNSI+cmVwZWF0PC90aXRsZT48dGV4dAogICAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgICAgc3R5bGU9ImZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtd2VpZ2h0Om5vcm1hbDtmb250LXNpemU6MzAuOTc1OTk5ODNweDtsaW5lLWhlaWdodDoxMjUlO2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7bGV0dGVyLXNwYWNpbmc6MHB4O3dvcmQtc3BhY2luZzowcHg7ZmlsbDojYTMxNTE1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxcHg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICB4PSItMi4yMDc2MTM1IgogICAgIHk9IjI1LjY3OTE4MiIKICAgICBpZD0idGV4dDQxMzciCiAgICAgc29kaXBvZGk6bGluZXNwYWNpbmc9IjEyNSUiPjx0c3BhbgogICAgICAgc29kaXBvZGk6cm9sZT0ibGluZSIKICAgICAgIGlkPSJ0c3BhbjQxMzkiCiAgICAgICB4PSItMi4yMDc2MTM1IgogICAgICAgeT0iMjUuNjc5MTgyIgogICAgICAgc3R5bGU9ImZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7Zm9udC1mYW1pbHk6TW9uYWNvOy1pbmtzY2FwZS1mb250LXNwZWNpZmljYXRpb246TW9uYWNvO2ZpbGw6I2EzMTUxNTtmaWxsLW9wYWNpdHk6MSI+JnF1b3Q7PC90c3Bhbj48L3RleHQ+Cjwvc3ZnPg==",Blockly.FieldString.prototype.init=function(){Blockly.FieldTextInput.superClass_.init.call(this),this.quoteSize_=12,this.quoteRightX_=this.quoteLeftX_=0,this.quoteY_=8,this.quoteLeft_&&this.quoteLeft_.parentNode.removeChild(this.quoteLeft_),this.quoteLeft_=Blockly.utils.createSvgElement("image",{height:this.quoteSize_+"px",width:this.quoteSize_+"px"}),this.quoteRight_&&this.quoteRight_.parentNode.removeChild(this.quoteRight_),this.quoteRight_=Blockly.utils.createSvgElement("image",{height:this.quoteSize_+"px",width:this.quoteSize_+"px"});var e=this.sourceBlock_.RTL?Blockly.FieldString.QUOTE_0_DATA_URI:Blockly.FieldString.QUOTE_1_DATA_URI;this.quoteLeft_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.sourceBlock_.RTL?Blockly.FieldString.QUOTE_1_DATA_URI:Blockly.FieldString.QUOTE_0_DATA_URI),this.quoteRight_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),e=this.text_,this.text_=null,this.setText(e)},Blockly.FieldString.prototype.setText=function(e){null!==e&&e!==this.text_&&(this.text_=e,this.textElement_&&this.textElement_.parentNode.appendChild(this.quoteLeft_),this.updateTextNode_(),this.textElement_&&this.textElement_.parentNode.appendChild(this.quoteRight_),this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_()))},Blockly.FieldString.prototype.positionLeft=function(e){return this.quoteLeft_?(this.quoteLeftX_=this.sourceBlock_.RTL?e+this.quoteSize_+2*Blockly.FieldString.quotePadding:0,e=this.quoteSize_+Blockly.FieldString.quotePadding,this.quoteLeft_.setAttribute("transform","translate("+this.quoteLeftX_+","+this.quoteY_+")"),e):0},Blockly.FieldString.prototype.positionArrow=function(e){return this.quoteRight_?(this.quoteRightX_=this.sourceBlock_.RTL?Blockly.FieldString.quotePadding:e+Blockly.FieldString.quotePadding,e=this.quoteSize_+Blockly.FieldString.quotePadding,this.quoteRight_.setAttribute("transform","translate("+this.quoteRightX_+","+this.quoteY_+")"),e):0},Blockly.Field.register("field_string",Blockly.FieldString),Blockly.Generator=function(e){this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")},Blockly.Generator.NAME_TYPE="generated_function",Blockly.Generator.prototype.INFINITE_LOOP_TRAP=null,Blockly.Generator.prototype.STATEMENT_PREFIX=null,Blockly.Generator.prototype.INDENT="  ",Blockly.Generator.prototype.COMMENT_WRAP=60,Blockly.Generator.prototype.ORDER_OVERRIDES=[],Blockly.Generator.prototype.workspaceToCode=function(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=Blockly.getMainWorkspace());var t=[];this.init(e),e=e.getTopBlocks(!0);for(var n,o=0;n=e[o];o++){var r=this.blockToCode(n);goog.isArray(r)&&(r=r[0]),r&&(n.outputConnection&&(r=this.scrubNakedValue(r)),t.push(r))}return t=t.join("\n"),(t=(t=(t=this.finish(t)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")},Blockly.Generator.prototype.prefixLines=function(e,t){return t+e.replace(/(?!\n$)\n/g,"\n"+t)},Blockly.Generator.prototype.allNestedComments=function(e){var t=[];e=e.getDescendants(!0);for(var n=0;n<e.length;n++){var o=e[n].getCommentText();o&&t.push(o)}return t.length&&t.push(""),t.join("\n")},Blockly.Generator.prototype.blockToCode=function(e){if(!e)return"";if(e.disabled)return this.blockToCode(e.getNextBlock());var t=this[e.type];if(goog.asserts.assertFunction(t,'Language "%s" does not know how to generate code for block type "%s".',this.name_,e.type),t=t.call(e,e),goog.isArray(t))return goog.asserts.assert(e.outputConnection,'Expecting string from statement block "%s".',e.type),[this.scrub_(e,t[0]),t[1]];if(goog.isString(t)){var n=e.id.replace(/\$/g,"$$$$");return this.STATEMENT_PREFIX&&(t=this.STATEMENT_PREFIX.replace(/%1/g,"'"+n+"'")+t),this.scrub_(e,t)}if(null===t)return"";goog.asserts.fail("Invalid code generated: %s",t)},Blockly.Generator.prototype.valueToCode=function(e,t,n){isNaN(n)&&goog.asserts.fail('Expecting valid order from block "%s".',e.type);var o=e.getInputTargetBlock(t);if(!o)return"";if(""===(t=this.blockToCode(o)))return"";if(goog.asserts.assertArray(t,'Expecting tuple from value block "%s".',o.type),e=t[0],t=t[1],isNaN(t)&&goog.asserts.fail('Expecting valid order from value block "%s".',o.type),!e)return"";o=!1;var r=Math.floor(n),i=Math.floor(t);if(r<=i&&(r!=i||0!=r&&99!=r))for(o=!0,r=0;r<this.ORDER_OVERRIDES.length;r++)if(this.ORDER_OVERRIDES[r][0]==n&&this.ORDER_OVERRIDES[r][1]==t){o=!1;break}return o&&(e="("+e+")"),e},Blockly.Generator.prototype.statementToCode=function(e,t){var n=e.getInputTargetBlock(t),o=this.blockToCode(n);return goog.asserts.assertString(o,'Expecting code from statement block "%s".',n&&n.type),o&&(o=this.prefixLines(o,this.INDENT)),o},Blockly.Generator.prototype.addLoopTrap=function(e,t){return t=t.replace(/\$/g,"$$$$"),this.INFINITE_LOOP_TRAP&&(e=this.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+t+"'")+e),this.STATEMENT_PREFIX&&(e+=this.prefixLines(this.STATEMENT_PREFIX.replace(/%1/g,"'"+t+"'"),this.INDENT)),e},Blockly.Generator.prototype.RESERVED_WORDS_="",Blockly.Generator.prototype.addReservedWords=function(e){this.RESERVED_WORDS_+=e+","},Blockly.Generator.prototype.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",Blockly.Generator.prototype.provideFunction_=function(e,t){if(!this.definitions_[e]){var n,o=this.variableDB_.getDistinctName(e,Blockly.Procedures.NAME_TYPE);for(this.functionNames_[e]=o,o=t.join("\n").replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);n!=o;)o=(n=o).replace(/^(( {2})*) {2}/gm,"$1\0");o=o.replace(/\0/g,this.INDENT),this.definitions_[e]=o}return this.functionNames_[e]},Blockly.Generator.prototype.init=function(e){},Blockly.Generator.prototype.scrub_=function(e,t){return t},Blockly.Generator.prototype.finish=function(e){return e},Blockly.Generator.prototype.scrubNakedValue=function(e){return e},Blockly.Names=function(e,t){if(this.variablePrefix_=t||"",this.reservedDict_=Object.create(null),e)for(var n=e.split(","),o=0;o<n.length;o++)this.reservedDict_[n[o]]=!0;this.reset()},Blockly.Names.DEVELOPER_VARIABLE_TYPE="DEVELOPER_VARIABLE",Blockly.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},Blockly.Names.prototype.setVariableMap=function(e){this.variableMap_=e},Blockly.Names.prototype.getNameForUserVariable_=function(e){return this.variableMap_?(e=this.variableMap_.getVariableById(e))?e.name:null:(console.log("Deprecated call to Blockly.Names.prototype.getName without defining a variable map. To fix, add the folowing code in your generator's init() function:\nBlockly.YourGeneratorName.variableDB_.setVariableMap(workspace.getVariableMap());"),null)},Blockly.Names.prototype.getName=function(e,t){if(t==Blockly.Variables.NAME_TYPE){var n=this.getNameForUserVariable_(e);n&&(e=n)}n=e.toLowerCase()+"_"+t;var o=t==Blockly.Variables.NAME_TYPE||t==Blockly.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"";if(n in this.db_)return o+this.db_[n];var r=this.getDistinctName(e,t);return this.db_[n]=r.substr(o.length),r},Blockly.Names.prototype.getDistinctName=function(e,t){for(var n=this.safeName_(e),o="";this.dbReverse_[n+o]||n+o in this.reservedDict_;)o=o?o+1:2;return n+=o,this.dbReverse_[n]=!0,(t==Blockly.Variables.NAME_TYPE||t==Blockly.Names.DEVELOPER_VARIABLE_TYPE?this.variablePrefix_:"")+n},Blockly.Names.prototype.safeName_=function(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),-1!="0123456789".indexOf(e[0])&&(e="my_"+e)):e="unnamed",e},Blockly.Names.equals=function(e,t){return e.toLowerCase()==t.toLowerCase()},Blockly.Procedures={},Blockly.Procedures.NAME_TYPE=Blockly.PROCEDURE_CATEGORY_NAME,Blockly.Procedures.allProcedures=function(e){e=e.getAllBlocks();for(var t=[],n=[],o=0;o<e.length;o++)if(e[o].getProcedureDef){var r=e[o].getProcedureDef();r&&(r[2]?t.push(r):n.push(r))}return n.sort(Blockly.Procedures.procTupleComparator_),t.sort(Blockly.Procedures.procTupleComparator_),[n,t]},Blockly.Procedures.procTupleComparator_=function(e,t){return e[0].toLowerCase().localeCompare(t[0].toLowerCase())},Blockly.Procedures.findLegalName=function(e,t){if(t.isInFlyout)return e;for(;!Blockly.Procedures.isLegalName_(e,t.workspace,t);){var n=e.match(/^(.*?)(\d+)$/);e=n?n[1]+(parseInt(n[2],10)+1):e+"2"}return e},Blockly.Procedures.isLegalName_=function(e,t,n){return!Blockly.Procedures.isNameUsed(e,t,n)},Blockly.Procedures.isNameUsed=function(e,t,n){t=t.getAllBlocks();for(var o=0;o<t.length;o++)if(t[o]!=n&&t[o].getProcedureDef){var r=t[o].getProcedureDef();if(Blockly.Names.equals(r[0],e))return!0}return!1},Blockly.Procedures.rename=function(e){e=e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"");var t=Blockly.Procedures.findLegalName(e,this.sourceBlock_),n=this.text_;if(n!=e&&n!=t){e=this.sourceBlock_.workspace.getAllBlocks();for(var o=0;o<e.length;o++)e[o].renameProcedure&&e[o].renameProcedure(n,t)}return t||n},Blockly.Procedures.flyoutCategory=function(e){function t(e,t){for(var n=0;n<e.length;n++){var o=e[n][0],r=e[n][1],i=goog.dom.createDom("block");i.setAttribute("type",t),i.setAttribute("gap",16);var a=goog.dom.createDom("mutation");for(a.setAttribute("name",o),i.appendChild(a),o=0;o<r.length;o++){var s=goog.dom.createDom("arg");s.setAttribute("name",r[o]),a.appendChild(s)}l.push(i)}}var l=[];if(Blockly.Blocks.procedures_defnoreturn){var n=goog.dom.createDom("block");n.setAttribute("type","procedures_defnoreturn"),n.setAttribute("gap",16);var o=goog.dom.createDom("field",null,Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE);o.setAttribute("name","NAME"),n.appendChild(o),l.push(n)}return Blockly.Blocks.procedures_defreturn&&((n=goog.dom.createDom("block")).setAttribute("type","procedures_defreturn"),n.setAttribute("gap",16),(o=goog.dom.createDom("field",null,Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE)).setAttribute("name","NAME"),n.appendChild(o),l.push(n)),Blockly.Blocks.procedures_ifreturn&&((n=goog.dom.createDom("block")).setAttribute("type","procedures_ifreturn"),n.setAttribute("gap",16),l.push(n)),l.length&&l[l.length-1].setAttribute("gap",24),t((e=Blockly.Procedures.allProcedures(e))[0],"procedures_callnoreturn"),t(e[1],"procedures_callreturn"),l},Blockly.Procedures.getCallers=function(e,t){for(var n=[],o=t.getAllBlocks(),r=0;r<o.length;r++)if(o[r].getProcedureCall){var i=o[r].getProcedureCall();i&&Blockly.Names.equals(i,e)&&n.push(o[r])}return n},Blockly.Procedures.mutateCallers=function(e){var t,n=Blockly.Events.recordUndo,o=e.getProcedureDef()[0],r=e.mutationToDom(!0);for(e=Blockly.Procedures.getCallers(o,e.workspace),o=0;t=e[o];o++){var i=t.mutationToDom();i=i&&Blockly.Xml.domToText(i),t.domToMutation(r);var a=t.mutationToDom();i!=(a=a&&Blockly.Xml.domToText(a))&&(Blockly.Events.recordUndo=!1,Blockly.Events.fire(new Blockly.Events.BlockChange(t,"mutation",null,i,a)),Blockly.Events.recordUndo=n)}},Blockly.Procedures.getDefinition=function(e,t){for(var n=t.getTopBlocks(!1),o=0;o<n.length;o++)if(n[o].getProcedureDef){var r=n[o].getProcedureDef();if(r&&Blockly.Names.equals(r[0],e))return n[o]}return null},Blockly.FlyoutButton=function(e,t,n,o){this.workspace_=e,this.targetWorkspace_=t,this.text_=n.getAttribute("text"),this.position_=new goog.math.Coordinate(0,0),this.isLabel_=o,this.callback_=null,e=n.getAttribute("callbackkey"),this.isLabel_&&e?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||e&&t.getButtonCallback(e)?this.callback_=t.getButtonCallback(e):console.warn("Buttons should have callbacks. Button text: "+this.text_),this.cssClass_=n.getAttribute("web-class")||null,this.icon_=n.getAttribute("web-icon")||null,this.iconClass_=n.getAttribute("web-icon-class")||null,this.iconColor_=n.getAttribute("web-icon-color")||null,this.line_=n.getAttribute("web-line")||null,this.lineWidth_=n.getAttribute("web-line-width")||null},Blockly.FlyoutButton.MARGIN=40,Blockly.FlyoutButton.prototype.width=0,Blockly.FlyoutButton.prototype.height=40,Blockly.FlyoutButton.prototype.onMouseUpWrapper_=null,Blockly.FlyoutButton.prototype.createDom=function(){var e=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";if(this.cssClass_&&(e+=" "+this.cssClass_),this.svgGroup_=Blockly.utils.createSvgElement("g",{class:e},this.workspace_.getCanvas()),!this.isLabel_)var t=Blockly.utils.createSvgElement("rect",{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_);e=Blockly.utils.createSvgElement("rect",{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var n=Blockly.utils.createSvgElement("text",{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);if(n.textContent=this.text_,this.width=Blockly.Field.getCachedWidth(n),this.icon_||this.iconClass_){var o=Blockly.utils.createSvgElement("text",{class:this.iconClass_?"blocklyFlyoutLabelIcon "+this.iconClass_:"blocklyFlyoutLabelIcon",x:0,y:0,"text-anchor":"middle"},this.svgGroup_);this.icon_&&(o.textContent=this.icon_),this.iconColor_&&o.setAttribute("style","fill: "+this.iconColor_),this.width+=o.getComputedTextLength()+2*Blockly.FlyoutButton.MARGIN,o.setAttribute("text-anchor","end"),o.setAttribute("dominant-baseline","central"),o.setAttribute("dy",goog.userAgent.EDGE_OR_IE?Blockly.Field.IE_TEXT_OFFSET:"0"),o.setAttribute("x",this.targetWorkspace_.RTL?this.width:Blockly.FlyoutButton.MARGIN),o.setAttribute("y",this.height/2)}return this.line_&&((o=Blockly.utils.createSvgElement("line",{class:"blocklyFlyoutLine","stroke-dasharray":this.line_,"text-anchor":"middle"},this.svgGroup_)).setAttribute("x1",0),o.setAttribute("x2",null!=this.lineWidth_?this.lineWidth_:this.width),o.setAttribute("y1",this.height),o.setAttribute("y2",this.height)),this.isLabel_||(this.width+=2*Blockly.FlyoutButton.MARGIN,t.setAttribute("width",this.width),t.setAttribute("height",this.height)),e.setAttribute("width",this.width),e.setAttribute("height",this.height),n.setAttribute("text-anchor","middle"),n.setAttribute("dominant-baseline","central"),n.setAttribute("dy",goog.userAgent.EDGE_OR_IE?Blockly.Field.IE_TEXT_OFFSET:"0"),n.setAttribute("x",this.width/2),n.setAttribute("y",this.height/2),this.mouseUpWrapper_=Blockly.bindEventWithChecks_(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},Blockly.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},Blockly.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},Blockly.FlyoutButton.prototype.moveTo=function(e,t){this.position_.x=e,this.position_.y=t,this.updateTransform_()},Blockly.FlyoutButton.prototype.getPosition=function(){return this.position_},Blockly.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},Blockly.FlyoutButton.prototype.getText=function(){return this.text_},Blockly.FlyoutButton.prototype.getPosition=function(){return this.position_},Blockly.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&Blockly.unbindEvent_(this.onMouseUpWrapper_),this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace_=this.workspace_=null},Blockly.FlyoutButton.prototype.onMouseUp_=function(e){(e=this.targetWorkspace_.getGesture(e))&&e.cancel(),this.callback_&&this.callback_(this)},Blockly.Flyout=function(e){e.getMetrics=this.getMetrics_.bind(this),e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new Blockly.WorkspaceSvg(e),this.workspace_.isFlyout=!0,this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.eventWrappers_=[],this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[]},Blockly.Flyout.prototype.autoClose=!0,Blockly.Flyout.prototype.isVisible_=!1,Blockly.Flyout.prototype.containerVisible_=!0,Blockly.Flyout.prototype.CORNER_RADIUS=8,Blockly.Flyout.prototype.MARGIN=Blockly.Flyout.prototype.CORNER_RADIUS,Blockly.Flyout.prototype.GAP_X=3*Blockly.Flyout.prototype.MARGIN,Blockly.Flyout.prototype.GAP_Y=3*Blockly.Flyout.prototype.MARGIN,Blockly.Flyout.prototype.SCROLLBAR_PADDING=2,Blockly.Flyout.prototype.width_=0,Blockly.Flyout.prototype.height_=0,Blockly.Flyout.prototype.dragAngleRange_=70,Blockly.Flyout.prototype.createDom=function(e){return this.svgGroup_=Blockly.utils.createSvgElement(e,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=Blockly.utils.createSvgElement("path",{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.svgGroup_},Blockly.Flyout.prototype.init=function(e){this.targetWorkspace_=e,this.workspace_.targetWorkspace=e,this.scrollbar_=new Blockly.Scrollbar(this.workspace_,this.horizontalLayout_,!1,"blocklyFlyoutScrollbar"),this.hide(),Array.prototype.push.apply(this.eventWrappers_,Blockly.bindEventWithChecks_(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace_.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,Blockly.bindEventWithChecks_(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace_.getGesture.bind(this.targetWorkspace_),this.workspace_.variableMap_=this.targetWorkspace_.getVariableMap(),this.workspace_.createPotentialVariableMap()},Blockly.Flyout.prototype.dispose=function(){this.hide(),Blockly.unbindEvent_(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace_.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.scrollbar_&&(this.scrollbar_.dispose(),this.scrollbar_=null),this.workspace_&&(this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&(goog.dom.removeNode(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace_=this.svgBackground_=null},Blockly.Flyout.prototype.getWidth=function(){return this.width_},Blockly.Flyout.prototype.getHeight=function(){return this.height_},Blockly.Flyout.prototype.getWorkspace=function(){return this.workspace_},Blockly.Flyout.prototype.isVisible=function(){return this.isVisible_},Blockly.Flyout.prototype.setVisible=function(e){var t=e!=this.isVisible();this.isVisible_=e,t&&this.updateDisplay_()},Blockly.Flyout.prototype.setContainerVisible=function(e){var t=e!=this.containerVisible_;this.containerVisible_=e,t&&this.updateDisplay_()},Blockly.Flyout.prototype.updateDisplay_=function(){var e=!!this.containerVisible_&&this.isVisible();this.svgGroup_.style.display=e?"block":"none",this.scrollbar_.setContainerVisible(e)},Blockly.Flyout.prototype.positionAt_=function(e,t,n,o){this.svgGroup_.setAttribute("width",e),this.svgGroup_.setAttribute("height",t),Blockly.utils.setCssTransform(this.svgGroup_,"translate("+n+"px,"+o+"px)"),this.scrollbar_&&(this.scrollbar_.setOrigin(n,o),this.scrollbar_.resize())},Blockly.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var e,t=0;e=this.listeners_[t];t++)Blockly.unbindEvent_(e);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},Blockly.Flyout.prototype.show=function(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),"string"==typeof e&&(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),goog.asserts.assert(goog.isFunction(e),"Couldn't find a callback function when opening a toolbox category."),e=e(this.workspace_.targetWorkspace),goog.asserts.assert(goog.isArray(e),"The result of a toolbox category callback must be an array.")),this.setVisible(!0);for(var t,n=[],o=[],r=this.permanentlyDisabled_.length=0;t=e[r];r++)if(t.tagName){var i=t.tagName.toUpperCase(),a=this.horizontalLayout_?this.GAP_X:this.GAP_Y;"BLOCK"==i?((i=Blockly.Xml.domToBlock(t,this.workspace_)).disabled&&this.permanentlyDisabled_.push(i),n.push({type:"block",block:i}),t=parseInt(t.getAttribute("gap"),10),o.push(isNaN(t)?a:t)):"SEP"==t.tagName.toUpperCase()?(t=parseInt(t.getAttribute("gap"),10),!isNaN(t)&&0<o.length?o[o.length-1]=t:o.push(a)):"BUTTON"!=i&&"LABEL"!=i||(t=new Blockly.FlyoutButton(this.workspace_,this.targetWorkspace_,t,"LABEL"==i),n.push({type:"button",button:t}),o.push(a))}this.layout_(n,o),this.listeners_.push(Blockly.bindEventWithChecks_(this.svgBackground_,"mouseover",this,function(){for(var e,t=this.workspace_.getTopBlocks(!1),n=0;e=t[n];n++)e.removeSelect()})),this.horizontalLayout_?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_)},Blockly.Flyout.prototype.clearOldBlocks_=function(){for(var e,t=this.workspace_.getTopBlocks(!1),n=0;e=t[n];n++)e.workspace==this.workspace_&&e.dispose(!1,!1);for(n=0;n<this.mats_.length;n++)(t=this.mats_[n])&&goog.dom.removeNode(t);for(n=this.mats_.length=0;t=this.buttons_[n];n++)t.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},Blockly.Flyout.prototype.addBlockListeners_=function(e,t,n){this.listeners_.push(Blockly.bindEventWithChecks_(e,"mousedown",null,this.blockMouseDown_(t))),this.listeners_.push(Blockly.bindEventWithChecks_(n,"mousedown",null,this.blockMouseDown_(t))),this.listeners_.push(Blockly.bindEvent_(e,"mouseover",t,t.addSelect)),this.listeners_.push(Blockly.bindEvent_(e,"mouseout",t,t.removeSelect)),this.listeners_.push(Blockly.bindEvent_(n,"mouseover",t,t.addSelect)),this.listeners_.push(Blockly.bindEvent_(n,"mouseout",t,t.removeSelect))},Blockly.Flyout.prototype.blockMouseDown_=function(n){var o=this;return function(e){var t=o.targetWorkspace_.getGesture(e);t&&(t.setStartBlock(n),t.handleFlyoutStart(e,o))}},Blockly.Flyout.prototype.onMouseDown_=function(e){var t=this.targetWorkspace_.getGesture(e);t&&t.handleFlyoutStart(e,this)},Blockly.Flyout.prototype.createBlock=function(e){var t=null;Blockly.Events.disable();var n=this.targetWorkspace_.getAllVariables();this.targetWorkspace_.setResizesEnabled(!1);try{t=this.placeNewBlock_(e),Blockly.hideChaff()}finally{Blockly.Events.enable()}if(e=Blockly.Variables.getAddedVariables(this.targetWorkspace_,n),Blockly.Events.isEnabled())for(Blockly.Events.setGroup(!0),Blockly.Events.fire(new Blockly.Events.Create(t)),n=0;n<e.length;n++)Blockly.Events.fire(new Blockly.Events.VarCreate(e[n]));return this.autoClose?this.hide():this.filterForCapacity_(),t},Blockly.Flyout.prototype.initFlyoutButton_=function(e,t,n){var o=e.createDom();e.moveTo(t,n),e.show(),this.listeners_.push(Blockly.bindEventWithChecks_(o,"mousedown",this,this.onMouseDown_)),this.buttons_.push(e)},Blockly.Flyout.prototype.createRect_=function(e,t,n,o,r){return(t=Blockly.utils.createSvgElement("rect",{"fill-opacity":0,x:t,y:n,height:o.height,width:o.width},null)).tooltip=e,Blockly.Tooltip.bindMouseEvents(t),this.workspace_.getCanvas().insertBefore(t,e.getSvgRoot()),e.flyoutRect_=t,this.mats_[r]=t},Blockly.Flyout.prototype.moveRectToBlock_=function(e,t){var n=t.getHeightWidth();e.setAttribute("width",n.width),e.setAttribute("height",n.height);var o=t.startHat_?Blockly.BlockSvg.START_HAT_HEIGHT:0;o&&t.moveBy(0,o),o=t.outputConnection?Blockly.BlockSvg.TAB_WIDTH:0;var r=t.getRelativeToSurfaceXY();e.setAttribute("y",r.y),e.setAttribute("x",this.RTL?r.x-n.width+o:r.x-o)},Blockly.Flyout.prototype.filterForCapacity_=function(){for(var e,t=this.targetWorkspace_.remainingCapacity(),n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++)if(-1==this.permanentlyDisabled_.indexOf(e)){var r=e.getDescendants(!1);e.setDisabled(r.length>t)}},Blockly.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},Blockly.Flyout.prototype.isScrollable=function(){return!!this.scrollbar_&&this.scrollbar_.isVisible()},Blockly.Flyout.prototype.placeNewBlock_=function(e){var t=this.targetWorkspace_;if(!e.getSvgRoot())throw"oldBlock is not rendered.";var n=Blockly.Xml.blockToDom(e);if(t.setResizesEnabled(!1),!(n=Blockly.Xml.domToBlock(n,t)).getSvgRoot())throw"block is not rendered.";var o=t.getOriginOffsetInPixels(),r=this.workspace_.getOriginOffsetInPixels();return e=e.getRelativeToSurfaceXY().scale(this.workspace_.scale),e=goog.math.Coordinate.sum(r,e),t=goog.math.Coordinate.difference(e,o).scale(1/t.scale),n.moveBy(t.x,t.y),n},Blockly.HorizontalFlyout=function(e){e.getMetrics=this.getMetrics_.bind(this),e.setMetrics=this.setMetrics_.bind(this),Blockly.HorizontalFlyout.superClass_.constructor.call(this,e),this.horizontalLayout_=!0},goog.inherits(Blockly.HorizontalFlyout,Blockly.Flyout),Blockly.HorizontalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var t=this.workspace_.getCanvas().getBBox()}catch(e){t={height:0,y:0,width:0,x:0}}var e=this.SCROLLBAR_PADDING,n=this.SCROLLBAR_PADDING;this.toolboxPosition_==Blockly.TOOLBOX_AT_BOTTOM&&(e=0);var o=this.height_;return this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP&&(o-=this.SCROLLBAR_PADDING),{viewHeight:o,viewWidth:this.width_-2*this.SCROLLBAR_PADDING,contentHeight:(t.height+2*this.MARGIN)*this.workspace_.scale,contentWidth:(t.width+2*this.MARGIN)*this.workspace_.scale,viewTop:-this.workspace_.scrollY,viewLeft:-this.workspace_.scrollX,contentTop:t.y,contentLeft:t.x,absoluteTop:e,absoluteLeft:n}},Blockly.HorizontalFlyout.prototype.setMetrics_=function(e){var t=this.getMetrics_();t&&(goog.isNumber(e.x)&&(this.workspace_.scrollX=-t.contentWidth*e.x),this.workspace_.translate(this.workspace_.scrollX+t.absoluteLeft,this.workspace_.scrollY+t.absoluteTop))},Blockly.HorizontalFlyout.prototype.position=function(){if(this.isVisible()){var e=this.targetWorkspace_.getMetrics();if(e){this.width_=e.viewWidth,this.setBackgroundPath_(e.viewWidth-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS);var t=e.absoluteLeft,n=e.absoluteTop;this.toolboxPosition_==Blockly.TOOLBOX_AT_BOTTOM&&(n+=e.viewHeight-this.height_),this.positionAt_(this.width_,this.height_,t,n)}}},Blockly.HorizontalFlyout.prototype.setBackgroundPath_=function(e,t){var n=this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP,o=["M 0,"+(n?0:this.CORNER_RADIUS)];n?(o.push("h",e+2*this.CORNER_RADIUS),o.push("v",t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",-1*e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),o.push("h",e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",t),o.push("h",-e-2*this.CORNER_RADIUS)),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))},Blockly.HorizontalFlyout.prototype.scrollToStart=function(){this.scrollbar_.set(this.RTL?1/0:0)},Blockly.HorizontalFlyout.prototype.wheel_=function(e){var t=e.deltaX;if(t){goog.userAgent.GECKO&&1===e.deltaMode&&(t*=10);var n=this.getMetrics_();t=n.viewLeft+t,t=Math.min(t,n.contentWidth-n.viewWidth),t=Math.max(t,0),this.scrollbar_.set(t),Blockly.WidgetDiv.hide(),Blockly.DropDownDiv.hideWithoutAnimation()}e.preventDefault(),e.stopPropagation()},Blockly.HorizontalFlyout.prototype.layout_=function(e,t){this.workspace_.scale=this.targetWorkspace_.scale;var n=this.MARGIN,o=this.RTL?n:n+Blockly.BlockSvg.TAB_WIDTH;this.RTL&&(e=e.reverse());for(var r,i=0;r=e[i];i++)if("block"==r.type){for(var a,s=(r=r.block).getDescendants(!1),l=0;a=s[l];l++)a.isInFlyout=!0;r.render(),s=r.getSvgRoot(),l=r.getHeightWidth(),a=o,this.RTL&&(a+=l.width),r.moveBy(a,n),a=this.createRect_(r,a,n,l,i),o+=l.width+t[i],this.addBlockListeners_(s,r,a)}else"button"==r.type&&(this.initFlyoutButton_(r.button,o,n),o+=r.button.width+t[i])},Blockly.HorizontalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var t=this.dragAngleRange_;return e<90+t&&90-t<e||-90-t<e&&e<-90+t},Blockly.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),t=e.top;return e=e.height,this.toolboxPosition_==Blockly.TOOLBOX_AT_TOP?new goog.math.Rect(-1e9,t-1e9,2e9,1e9+e):this.toolboxPosition_==Blockly.TOOLBOX_AT_BOTTOM?new goog.math.Rect(-1e9,t,2e9,1e9+e):void 0},Blockly.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace_.scale;for(var e,t=0,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++)t=Math.max(t,e.getHeightWidth().height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,t+=Blockly.Scrollbar.scrollbarThickness,this.height_!=t){for(o=0;e=n[o];o++)e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e);this.height_=t,this.targetWorkspace_.resize()}},Blockly.VerticalFlyout=function(e){e.getMetrics=this.getMetrics_.bind(this),e.setMetrics=this.setMetrics_.bind(this),Blockly.VerticalFlyout.superClass_.constructor.call(this,e),this.horizontalLayout_=!1},goog.inherits(Blockly.VerticalFlyout,Blockly.Flyout),Blockly.VerticalFlyout.prototype.getMetrics_=function(){if(!this.isVisible())return null;try{var t=this.workspace_.getCanvas().getBBox()}catch(e){t={height:0,y:0,width:0,x:0}}var e=this.SCROLLBAR_PADDING,n=this.height_-2*this.SCROLLBAR_PADDING,o=this.width_;return this.RTL||(o-=this.SCROLLBAR_PADDING),{viewHeight:n,viewWidth:o,contentHeight:t.height*this.workspace_.scale+2*this.MARGIN,contentWidth:t.width*this.workspace_.scale+2*this.MARGIN,viewTop:-this.workspace_.scrollY+t.y,viewLeft:-this.workspace_.scrollX,contentTop:t.y,contentLeft:t.x,absoluteTop:e,absoluteLeft:0}},Blockly.VerticalFlyout.prototype.setMetrics_=function(e){var t=this.getMetrics_();t&&(goog.isNumber(e.y)&&(this.workspace_.scrollY=-t.contentHeight*e.y),this.workspace_.translate(this.workspace_.scrollX+t.absoluteLeft,this.workspace_.scrollY+t.absoluteTop))},Blockly.VerticalFlyout.prototype.position=function(){if(this.isVisible()){var e=this.targetWorkspace_.getMetrics();if(e){this.height_=e.viewHeight,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,e.viewHeight-2*this.CORNER_RADIUS);var t=e.absoluteTop,n=e.absoluteLeft;this.toolboxPosition_==Blockly.TOOLBOX_AT_RIGHT&&(this.leftEdge_=n+=e.viewWidth-this.width_),this.positionAt_(this.width_,this.height_,n,t)}}},Blockly.VerticalFlyout.prototype.setBackgroundPath_=function(e,t){var n=this.toolboxPosition_==Blockly.TOOLBOX_AT_RIGHT,o=e+this.CORNER_RADIUS;(o=["M "+(n?o:0)+",0"]).push("h",n?-e:e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",Math.max(0,t)),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,n?0:1,n?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",n?e:-e),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))},Blockly.VerticalFlyout.prototype.scrollToStart=function(){this.scrollbar_.set(0)},Blockly.VerticalFlyout.prototype.wheel_=function(e){var t=e.deltaY;if(t){goog.userAgent.GECKO&&(t*=10);var n=this.getMetrics_();t=n.viewTop-n.contentTop+t,t=Math.min(t,n.contentHeight-n.viewHeight),t=Math.max(t,0),this.scrollbar_.set(t),Blockly.WidgetDiv.hide()}e.preventDefault(),e.stopPropagation()},Blockly.VerticalFlyout.prototype.layout_=function(e,t){this.workspace_.scale=this.targetWorkspace_.scale;for(var n,o=this.MARGIN,r=this.RTL?o:o+Blockly.BlockSvg.TAB_WIDTH,i=0;n=e[i];i++)if("block"==n.type){for(var a,s=(n=n.block).getDescendants(!1),l=0;a=s[l];l++)a.isInFlyout=!0;n.render(),s=n.getSvgRoot(),l=n.getHeightWidth(),n.moveBy(r,o),a=this.createRect_(n,this.RTL?r-l.width:r,o,l,i),this.addBlockListeners_(s,n,a),o+=l.height+t[i]}else"button"==n.type&&(this.initFlyoutButton_(n.button,r,o),o+=n.button.height+t[i])},Blockly.VerticalFlyout.prototype.isDragTowardWorkspace=function(e){e=Math.atan2(e.y,e.x)/Math.PI*180;var t=this.dragAngleRange_;return e<t&&-t<e||e<-180+t||180-t<e},Blockly.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var e=this.svgGroup_.getBoundingClientRect(),t=e.left;if(e=e.width,this.toolboxPosition_==Blockly.TOOLBOX_AT_LEFT)return new goog.math.Rect(t-1e9,-1e9,1e9+e,2e9);if(goog.userAgent.GECKO&&this.targetWorkspace_&&this.targetWorkspace_.isMutator){var n=this.targetWorkspace_.svgGroup_.getBoundingClientRect().x;Math.abs(n-t)<10&&(t+=this.leftEdge_*this.targetWorkspace_.options.parentWorkspace.scale)}return new goog.math.Rect(t,-1e9,1e9+e,2e9)},Blockly.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.targetWorkspace_.scale;for(var e,t=0,n=this.workspace_.getTopBlocks(!1),o=0;e=n[o];o++){var r=e.getHeightWidth().width;e.outputConnection&&(r-=Blockly.BlockSvg.TAB_WIDTH),t=Math.max(t,r)}for(o=0;e=this.buttons_[o];o++)t=Math.max(t,e.width);if(t+=1.5*this.MARGIN+Blockly.BlockSvg.TAB_WIDTH,t*=this.workspace_.scale,t+=Blockly.Scrollbar.scrollbarThickness,this.width_!=t){for(o=0;e=n[o];o++)this.RTL&&(r=e.getRelativeToSurfaceXY().x,e.moveBy(t/this.workspace_.scale-this.MARGIN-Blockly.BlockSvg.TAB_WIDTH-r,0)),e.flyoutRect_&&this.moveRectToBlock_(e.flyoutRect_,e);if(this.RTL)for(o=0;e=this.buttons_[o];o++)n=e.getPosition().y,e.moveTo(t/this.workspace_.scale-e.width-this.MARGIN-Blockly.BlockSvg.TAB_WIDTH,n);this.width_=t,this.targetWorkspace_.resize()}},Blockly.PXTUtils={},Blockly.PXTUtils.fadeColour=function(e,t,n){(e=e.replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);for(var o="#",r=0;r<3;r++){var i=parseInt(e.substr(2*r,2),16);o+=("00"+(i=(i=Math.round(Math.min(Math.max(0,n?i+i*t:i-i*t),255))).toString(16))).substr(i.length)}return o},Blockly.Toolbox=function(e){this.workspace_=e,this.RTL=e.options.RTL,this.horizontalLayout_=e.options.horizontalLayout,this.toolboxPosition=e.options.toolboxPosition,this.config_={indentWidth:19,cssRoot:"blocklyTreeRoot",cssHideRoot:"blocklyHidden",cssItem:"",cssTreeRow:"blocklyTreeRow",cssItemLabel:"blocklyTreeLabel",cssTreeIcon:"blocklyTreeIcon",cssExpandedFolderIcon:"blocklyTreeIconOpen",cssFileIcon:"blocklyTreeIconNone",cssSelectedRow:"blocklyTreeSelected"},this.treeSeparatorConfig_={cssTreeRow:"blocklyTreeSeparator"},this.horizontalLayout_&&(this.config_.cssTreeRow+=e.RTL?" blocklyHorizontalTreeRtl":" blocklyHorizontalTree",this.treeSeparatorConfig_.cssTreeRow="blocklyTreeSeparatorHorizontal "+(e.RTL?"blocklyHorizontalTreeRtl":"blocklyHorizontalTree"),this.config_.cssTreeIcon="")},Blockly.Toolbox.prototype.width=0,Blockly.Toolbox.prototype.height=0,Blockly.Toolbox.prototype.selectedOption_=null,Blockly.Toolbox.prototype.lastCategory_=null,Blockly.Toolbox.prototype.init=function(){var e=this.workspace_,t=this.workspace_.getParentSvg();this.HtmlDiv=goog.dom.createDom("DIV","blocklyToolboxDiv"),this.HtmlDiv.setAttribute("dir",e.RTL?"RTL":"LTR"),t.parentNode.insertBefore(this.HtmlDiv,t),Blockly.bindEventWithChecks_(this.HtmlDiv,"mousedown",this,function(e){e.target==this.HtmlDiv?Blockly.hideChaff(!1):Blockly.hideChaff(!0),Blockly.Touch.clearTouchIdentifier()},!1,!0),t={disabledPatternId:e.options.disabledPatternId,parentWorkspace:e,RTL:e.RTL,oneBasedIndex:e.options.oneBasedIndex,horizontalLayout:e.horizontalLayout,toolboxPosition:e.options.toolboxPosition},this.flyout_=null,this.flyout_=e.horizontalLayout?new Blockly.HorizontalFlyout(t):new Blockly.VerticalFlyout(t),goog.dom.insertSiblingAfter(this.flyout_.createDom("svg"),this.workspace_.getParentSvg()),this.flyout_.init(e),this.config_.cleardotPath=e.options.pathToMedia+"1x1.gif",this.config_.cssCollapsedFolderIcon="blocklyTreeIconClosed"+(e.RTL?"Rtl":"Ltr"),this.tree_=t=new Blockly.Toolbox.TreeControl(this,this.config_),t.setShowRootNode(!1),t.setShowLines(!1),t.setShowExpandIcons(!1),t.setSelectedItem(null),e=this.populate_(e.options.languageTree),t.render(this.HtmlDiv),e&&t.setSelectedItem(e),this.addColour_(),this.position()},Blockly.Toolbox.prototype.dispose=function(){this.flyout_.dispose(),this.tree_.dispose(),goog.dom.removeNode(this.HtmlDiv),this.lastCategory_=this.workspace_=null},Blockly.Toolbox.prototype.getWidth=function(){return this.width},Blockly.Toolbox.prototype.getHeight=function(){return this.height},Blockly.Toolbox.prototype.position=function(){var e=this.HtmlDiv;if(e){var t=this.workspace_.getParentSvg();t=Blockly.svgSize(t),this.horizontalLayout_?(e.style.left="0",e.style.height="auto",e.style.width=t.width+"px",this.height=e.offsetHeight,this.toolboxPosition==Blockly.TOOLBOX_AT_TOP?e.style.top="0":e.style.bottom="0"):(this.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT?e.style.right="0":e.style.left="0",e.style.height=t.height+"px",this.width=e.offsetWidth),this.flyout_.position()}},Blockly.Toolbox.prototype.populate_=function(e){if(this.tree_.removeChildren(),this.tree_.blocks=[],this.hasColours_=!1,e=this.syncTrees_(e,this.tree_,this.workspace_.options.pathToMedia),this.tree_.blocks.length)throw"Toolbox cannot have both blocks and categories in the root level.";return this.workspace_.resizeContents(),e},Blockly.Toolbox.prototype.syncTrees_=function(e,t,n){for(var o,r=null,i=null,a=0;o=e.childNodes[a];a++)if(o.tagName)switch(o.tagName.toUpperCase()){case"CATEGORY":i=Blockly.utils.replaceMessageReferences(o.getAttribute("name")),(i=this.tree_.createNode(i)).blocks=[],t.add(i);var s=o.getAttribute("custom");s?i.blocks=s:(s=this.syncTrees_(o,i,n))&&(r=s),s=Blockly.utils.replaceMessageReferences(o.getAttribute("colour")),goog.isString(s)?(/^#[0-9a-fA-F]{6}$/.test(s)?i.hexColour=s:i.hexColour=Blockly.hueToRgb(Number(s)),this.hasColours_=!0):i.hexColour="",s=o.getAttribute("iconclass"),goog.isString(s)&&i.setIconClass(this.config_.cssTreeIcon+" "+s),s=o.getAttribute("expandedclass"),goog.isString(s)&&i.setExpandedIconClass(this.config_.cssTreeIcon+" "+s),s=o.getAttribute("disabled"),goog.isString(s)&&(i.disabled=!0),"true"==o.getAttribute("expanded")?(i.blocks.length&&(r=i),i.setExpanded(!0)):i.setExpanded(!1),i=o;break;case"SEP":i&&("CATEGORY"==i.tagName.toUpperCase()?t.add(new Blockly.Toolbox.TreeSeparator(this.treeSeparatorConfig_)):(o=parseFloat(o.getAttribute("gap")),!isNaN(o)&&i&&i.setAttribute("gap",o)));break;case"BLOCK":case"SHADOW":case"LABEL":case"BUTTON":t.blocks.push(o),i=o}return r},Blockly.Toolbox.prototype.isInverted_=function(){return this.workspace_.options.toolboxOptions&&this.workspace_.options.toolboxOptions.inverted},Blockly.Toolbox.prototype.addColour_=function(e){var t=this.workspace_.options;e=(e||this.tree_).getChildren(!1);for(var n,o=0;n=e[o];o++){var r=n.getRowElement();if(r){var i=t.toolboxOptions;if(i.inverted){if(this.hasColours_){r.style.color="#fff",r.style.background=n.hexColour||"#ddd";var a=i.invertedMultiplier;n.disabled||(Blockly.bindEvent_(n.getRowElement(),"mouseenter",n,function(){this.isSelected()||(this.getRowElement().style.background=Blockly.PXTUtils.fadeColour(this.hexColour||"#ddd",a,!1))}),Blockly.bindEvent_(n.getRowElement(),"mouseleave",n,function(){this.isSelected()||(this.getRowElement().style.background=this.hexColour||"#ddd")}))}}else{if(i.border){var s=this.hasColours_?"8px solid "+(n.hexColour||"#ddd"):"none";this.workspace_.RTL?r.style.borderRight=s:r.style.borderLeft=s}i.colour&&this.hasColours_&&(r.style.color=n.hexColour||"#000")}n.disabled&&(r.style.opacity=i.disabledOpacity)}this.addColour_(n)}},Blockly.Toolbox.prototype.clearSelection=function(){this.tree_.setSelectedItem(null)},Blockly.Toolbox.prototype.addStyle=function(e){Blockly.utils.addClass(this.HtmlDiv,e)},Blockly.Toolbox.prototype.removeStyle=function(e){Blockly.utils.removeClass(this.HtmlDiv,e)},Blockly.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv)return null;var e=this.HtmlDiv.getBoundingClientRect(),t=e.left,n=e.top,o=e.width;return e=e.height,this.toolboxPosition==Blockly.TOOLBOX_AT_LEFT?new goog.math.Rect(-1e7,-1e7,1e7+t+o,2e7):this.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT?new goog.math.Rect(t,-1e7,1e7+o,2e7):this.toolboxPosition==Blockly.TOOLBOX_AT_TOP?new goog.math.Rect(-1e7,-1e7,2e7,1e7+n+e):new goog.math.Rect(0,n,2e7,1e7+o)},Blockly.Toolbox.prototype.refreshSelection=function(){var e=this.tree_.getSelectedItem();e&&e.blocks&&this.flyout_.show(e.blocks)},Blockly.Toolbox.TreeControl=function(e,t){this.toolbox_=e,goog.ui.tree.TreeControl.call(this,goog.html.SafeHtml.EMPTY,t)},goog.inherits(Blockly.Toolbox.TreeControl,goog.ui.tree.TreeControl),Blockly.Toolbox.TreeControl.prototype.enterDocument=function(){if(Blockly.Toolbox.TreeControl.superClass_.enterDocument.call(this),goog.events.BrowserFeature.TOUCH_ENABLED){var e=this.getElement();Blockly.bindEventWithChecks_(e,goog.events.EventType.TOUCHEND,this,this.handleTouchEvent_)}e=this.getElement(),Blockly.bindEventWithChecks_(e,goog.events.EventType.CONTEXTMENU,this,Blockly.utils.noEvent)},Blockly.Toolbox.TreeControl.prototype.handleTouchEvent_=function(e){var t=this.getNodeFromEvent_(e);t&&e.type===goog.events.EventType.TOUCHEND&&setTimeout(function(){t.onClick_(e)},1)},Blockly.Toolbox.TreeControl.prototype.createNode=function(e){if(this.toolbox_&&!this.eventHandlerRegistered_){var t=function(){Blockly.svgResize(this.toolbox_.workspace_)};goog.events.listen(this.toolbox_.tree_,goog.ui.tree.BaseNode.EventType.EXPAND,t),goog.events.listen(this.toolbox_.tree_,goog.ui.tree.BaseNode.EventType.COLLAPSE,t),this.eventHandlerRegistered_=!0}return e=e?goog.html.SafeHtml.htmlEscape(e):goog.html.SafeHtml.EMPTY,new Blockly.Toolbox.TreeNode(this.toolbox_,e,this.getConfig(),this.getDomHelper())},Blockly.Toolbox.TreeControl.prototype.setSelectedItem=function(e){var t=this.toolbox_;if(e!=this.selectedItem_&&e!=t.tree_){if(t.lastCategory_&&!t.isInverted_()&&(t.lastCategory_.getRowElement().style.backgroundColor=""),e){var n=e.hexColour||"#57e";e.getRowElement().style.backgroundColor=n,t.addColour_(e)}n=this.getSelectedItem(),goog.ui.tree.TreeControl.prototype.setSelectedItem.call(this,e),e&&e.blocks&&e.blocks.length?(t.flyout_.show(e.blocks),t.lastCategory_!=e&&t.flyout_.scrollToStart()):t.flyout_.hide(),n!=e&&n!=this&&((n=new Blockly.Events.Ui(null)).fromJson({element:"category",newValue:e&&e.getHtml()}),n.workspaceId=t.workspace_.id,Blockly.Events.fire(n)),e&&(t.lastCategory_=e)}},Blockly.Toolbox.TreeNode=function(e,t,n,o){goog.ui.tree.TreeNode.call(this,t,n,o)},goog.inherits(Blockly.Toolbox.TreeNode,goog.ui.tree.TreeNode),Blockly.Toolbox.TreeNode.prototype.getExpandIconSafeHtml=function(){return goog.html.SafeHtml.create("span")},Blockly.Toolbox.TreeNode.prototype.onClick_=function(e){this.hasChildren()&&this.isUserCollapsible_?(this.toggle(),this.select()):this.isSelected()?this.getTree().setSelectedItem(null):this.select(),this.updateRow()},Blockly.Toolbox.TreeNode.prototype.onMouseDown=function(e){},Blockly.Toolbox.TreeNode.prototype.onDoubleClick_=function(e){},Blockly.Toolbox.TreeNode.prototype.onKeyDown=function(e){if(this.tree.toolbox_.horizontalLayout_){var t={},n=goog.events.KeyCodes.DOWN,o=goog.events.KeyCodes.UP;t[goog.events.KeyCodes.RIGHT]=this.rightToLeft_?o:n,t[goog.events.KeyCodes.LEFT]=this.rightToLeft_?n:o,t[goog.events.KeyCodes.UP]=goog.events.KeyCodes.LEFT,t[goog.events.KeyCodes.DOWN]=goog.events.KeyCodes.RIGHT,e.keyCode=t[e.keyCode]||e.keyCode}return Blockly.Toolbox.TreeNode.superClass_.onKeyDown.call(this,e)},Blockly.Toolbox.TreeSeparator=function(e){Blockly.Toolbox.TreeNode.call(this,null,goog.html.SafeHtml.EMPTY,e)},goog.inherits(Blockly.Toolbox.TreeSeparator,Blockly.Toolbox.TreeNode),Blockly.Css={},Blockly.Css.Cursor={OPEN:"handopen",CLOSED:"handclosed",DELETE:"handdelete"},Blockly.Css.currentCursor_="",Blockly.Css.styleSheet_=null,Blockly.Css.mediaPath_="",Blockly.Css.inject=function(e,t){if(!Blockly.Css.styleSheet_){var n=".blocklyDraggable {}\n";for(var o in e&&(n+=Blockly.Css.CONTENT.join("\n"),Blockly.FieldDate&&(n+=Blockly.FieldDate.CSS.join("\n"))),Blockly.Css.mediaPath_=t.replace(/[\\\/]$/,""),n=n.replace(/<<<PATH>>>/g,Blockly.Css.mediaPath_),Blockly.Colours)Blockly.Colours.hasOwnProperty(o)&&(n=n.replace(new RegExp("\\$colour\\_"+o,"g"),Blockly.Colours[o]));o=document.createElement("style"),document.head.insertBefore(o,document.head.firstChild),n=document.createTextNode(n),o.appendChild(n),Blockly.Css.styleSheet_=o.sheet}},Blockly.Css.setCursor=function(e){console.warn("Deprecated call to Blockly.Css.setCursor.See https://github.com/google/blockly/issues/981 for context")},Blockly.Css.CONTENT=[".blocklySvg {","background-color: $colour_workspace;","outline: none;","overflow: hidden;","position: absolute;","display: block;","touch-action: none;","}",".blocklyRelativeWrapper {","position: relative;","width: 100%;","height: 100%;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none;","}",".blocklyWidgetDiv.fieldTextInput {","overflow: hidden;","border: 1px solid;","box-sizing: border-box;","transform-origin: 0 0;","-ms-transform-origin: 0 0;","-moz-transform-origin: 0 0;","-webkit-transform-origin: 0 0;","}",".blocklyTextDropDownArrow {","position: absolute;","}",".blocklyNonSelectable {","user-select: none;","-moz-user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","touch-action: none;","cursor: move;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 9pt;","opacity: .9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: fixed;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-radius: 4px;","box-shadow: 0px 0px 8px 1px "+Blockly.Colours.dropDownShadow+";","padding: 4px;","-webkit-user-select: none;","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyDropDownButtonHover {","box-shadow: 0px 0px 0px 4px "+Blockly.Colours.fieldShadow+";","}",".blocklyDropDownButton:active {","box-shadow: 0px 0px 0px 6px "+Blockly.Colours.fieldShadow+";","}",".blocklyDropDownButton > img {","width: 80%;","height: 80%;","margin-top: 5%","}",".blocklyDropDownPlaceholder {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","}",".blocklyNumPadButton {","display: inline-block;","float: left;","padding: 0;","width: 48px;","height: 48px;","margin: 4px;","border-radius: 4px;","background: $colour_numPadBackground;","color: $colour_numPadText;","outline: none;","border: 1px solid $colour_numPadBorder;","cursor: pointer;","font-weight: 600;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 12pt;","-webkit-tap-highlight-color: rgba(0,0,0,0);","}",".blocklyNumPadButton > img {","margin-top: 10%;","width: 80%;","height: 80%;","}",".blocklyNumPadButton:active {","background: $colour_numPadActiveBackground;","-webkit-tap-highlight-color: rgba(0,0,0,0);","}",".arrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".arrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".valueReportBox {","min-width: 50px;","max-width: 300px;","max-height: 200px;","overflow: auto;","word-wrap: break-word;","text-align: center;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: .8em;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #515A5A;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPath {","stroke-width: 1px;","}",".blocklySelected>.blocklyPath {","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","touch-action: none;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","touch-action: none;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: 1.0;","stroke-opacity: 1.0;","}",".blocklyDragging>.blocklyPath {","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .8;","stroke-opacity: .8;","}",".blocklyDisabled .blocklyEditableText .blocklyBlockBackground {","fill-opacity: 0.1 !important;","}",".blocklyInsertionMarker>.blocklyPath {","stroke: none;","}",".blocklyInsertionMarker>.blocklyIconGroup {","display: none;","}",".blocklyText {","cursor: default;","fill: #fff;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 12pt;","font-weight: bold;","}",".blocklyTextTruncated {","font-size: 11pt;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyNonEditableText>text,",".blocklyEditableText>text {","fill: $colour_text;","}",".blocklyDropdownText {","fill: #fff !important;","}",".blocklyBubbleText {","fill: #fff;","}",".blocklyBubbleCanvas {","user-select: none;","-moz-user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyFlyoutButton {","fill: #F4F4F4;","}",".blocklyFlyoutButtonBackground {","stroke: #fff;","}",".blocklyFlyoutButton .blocklyText {","fill: $colour_text;","}",".blocklyFlyoutButtonShadow {","fill: none;","}",".blocklyFlyoutButton:hover {","fill: #EAEAEA;","cursor: pointer;","}",".blocklyFlyoutLabel {","cursor: default;","}",".blocklyFlyoutLabelBackground {","opacity: 0;","}",".blocklyFlyoutLabelText {",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 14pt;","fill: $colour_text;","font-weight: bold;","}",".blocklySvg text, .blocklyBlockDragSurface text, .blocklyFlyout text, .blocklyToolboxDiv text {","user-select: none;","-moz-user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #000;","stroke-width: 1px;","stroke: #fff;","cursor: pointer;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","background-color: #FAF6BD;","}",".blocklyCommentForeignObject {","position: relative;","z-index: 0;","}",".blocklyCommentRect {","fill: #FAF6BD;","stroke: #F9F3A1;","stroke-width: 1px","}",".blocklyCommentTarget {","fill: transparent;","stroke: #F9F3A1;","}",".blocklyCommentHandleTarget {","fill: none;","}",".blocklyFocused>.blocklyCommentRect {","fill: #FFB900;","stroke: #B9B272;","}",".blocklySelected>.blocklyCommentTarget {","stroke: #FFB900;","stroke-width: 1px;","}",".blocklyCommentTextarea {","background-color: #FAF6BD;","border: 0;","outline: 0;","margin: 0;","padding: 3px;","resize: none;","display: block;","color: $colour_text;","overflow: hidden;","font-size: 12pt;","line-height: 22px;","}",".blocklyUneditableComment {","fill: $colour_text;","}",".blocklyCommentDeleteIcon {","cursor: pointer;","fill: #000;","display: none","}",".blocklyFocused > .blocklyCommentDeleteIcon, .blocklyCommentBubble > .blocklyCommentDeleteIcon {","display: block","}",".blocklyDeleteIconShape.blocklyDeleteIconHighlighted {","fill: rgba(255, 255, 255, 0.20);","}",".blocklyHtmlInput {","border: none;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 12pt;","height: 100%;","margin: 0;","outline: none;","box-sizing: border-box;","width: 100%;","text-align: center;","color: $colour_text;","font-weight: bold;","}",".blocklyMainBackground {","stroke-width: 1;","stroke: #c6c6c6;","touch-action: none;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: $colour_flyout;","fill-opacity: .8;","}",".blocklyTransparentBackground {","opacity: 0;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal, .blocklyScrollbarVertical {","position: absolute;","outline: none;","touch-action: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: $colour_scrollbar;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: $colour_scrollbarHover;","}",".blocklyZoom>image {","opacity: 1;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyAngleCenterPoint {","stroke: #fff;","stroke-width: 1;","fill: #fff;","}",".blocklyAngleDragHandle {","stroke: #fff;","stroke-width: 5;","stroke-opacity: 0.25;","fill: #fff;","cursor: pointer;","}",".blocklyAngleMarks {","stroke: #fff;","stroke-width: 1;","stroke-opacity: 0.5;","}",".blocklyAngleGauge {","fill: #fff;","fill-opacity: 0.20;","}",".blocklyAngleLine {","stroke: #fff;","stroke-width: 1;","stroke-linecap: round;","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","}",".blocklyDropdownMenu {","padding: 0 !important;","max-height: 300px !important;","}",".blocklyDropDownNumPad {","background-color: $colour_numPadBackground;","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;","}",".blocklyToolboxDiv {","background-color: $colour_toolbox;","color: $colour_toolboxText;","overflow-x: visible;","overflow-y: auto;","position: absolute;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"user-select: none;","-moz-user-select: none;","-ms-user-select: none;","-webkit-user-select: none;","z-index: 40;","-webkit-tap-highlight-color: transparent;","}",".blocklyTreeRoot {","padding: 4px 0;","}",".blocklyTreeRoot:focus {","outline: none;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",".blocklyHorizontalTree {","float: left;","margin: 1px 5px 8px 0;","}",".blocklyHorizontalTreeRtl {","float: right;","margin: 1px 0 8px 5px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","}",".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: #e4e4e4;","}",".blocklyTreeSeparator {","border-bottom: solid #e5e5e5 1px;","height: 0;","margin: 5px 0;","}",".blocklyTreeSeparatorHorizontal {","border-right: solid #e5e5e5 1px;","width: 0;","padding: 5px 0;","margin: 0 5px;","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","width: 16px;","}",".blocklyTreeIconClosedLtr {","background-position: -32px -1px;","}",".blocklyTreeIconClosedRtl {","background-position: 0 -1px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedLtr {","background-position: -32px -17px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedRtl {","background-position: 0 -17px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeIconNone,",".blocklyTreeSelected>.blocklyTreeIconNone {","background-position: -48px -1px;","}",".blocklyTreeLabel {","cursor: default;",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 16px;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}",".blocklyDropDownDiv .goog-palette {","outline: none;","border-radius: 11px;","margin-bottom: 20px;","}",".blocklyDropDownDiv .goog-palette-table {","border-collapse: collapse;","}",".blocklyDropDownDiv .goog-palette-cell {","height: 22px;","width: 22px;","margin: 0;","padding: 2px;","border: 0;","text-align: center;","cursor: pointer;","}",".blocklyDropDownDiv .goog-palette-colorswatch {","position: relative;","height: 22px;","width: 22px;","border-radius: 4px;","border: 2px solid rgba(0,0,0,.1);","}",".blocklyDropDownDiv .goog-palette-cell-hover .goog-palette-colorswatch {","border: 1px solid #FFF;","box-sizing: border-box;","}",".blocklyDropDownDiv .goog-palette-cell-selected .goog-palette-colorswatch {","border: 1px solid #000;","box-sizing: border-box;","color: #fff;","}",".blocklyWidgetDiv .goog-menu {","background: #fff;","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","z-index: 20000;","box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2);","}",".blocklyDropDownDiv .goog-menu {","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","z-index: 20000;","}",".blocklyWidgetDiv .goog-menuitem {","color: #000;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"list-style: none;","margin: 0;","padding: 5px 7em 5px 28px;","white-space: nowrap;","}",".blocklyDropDownDiv .goog-menuitem {","color: #fff;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"font-weight: bold;","list-style: none;","margin: 0;","padding: 5px 7em 5px 28px;","white-space: nowrap;","}",".blocklyWidgetDiv .goog-menuitem.goog-menuitem-rtl, ",".blocklyDropDownDiv .goog-menuitem.goog-menuitem-rtl {","padding-left: 7em;","padding-right: 28px;","}",".blocklyWidgetDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyWidgetDiv .goog-menu-noicon .goog-menuitem, ",".blocklyDropDownDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyDropDownDiv .goog-menu-noicon .goog-menuitem { ","padding-left: 12px;","}",".blocklyWidgetDiv .goog-menu-noaccel .goog-menuitem, ",".blocklyDropDownDiv .goog-menu-noaccel .goog-menuitem {","padding-right: 20px;","}",".blocklyWidgetDiv .goog-menuitem-content ",".blocklyDropDownDiv .goog-menuitem-content {","color: #000;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-accel,",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-content, ",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-accel,",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-content {","color: #ccc !important;","}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-icon, ",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-icon {","opacity: 0.3;","filter: alpha(opacity=30);","}",".blocklyWidgetDiv .goog-menuitem-highlight,",".blocklyWidgetDiv .goog-menuitem-hover {","background-color: #d6e9f8;","border-color: #d6e9f8;","border-style: dotted;","border-width: 1px 0;","padding-bottom: 4px;","padding-top: 4px;","}",".blocklyDropDownDiv .goog-menuitem-highlight,",".blocklyDropDownDiv .goog-menuitem-hover {","background-color: rgba(0, 0, 0, 0.2);","}",".blocklyWidgetDiv .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-icon, ",".blocklyDropDownDiv .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-icon {","background-repeat: no-repeat;","height: 16px;","left: 6px;","position: absolute;","right: auto;","vertical-align: middle;","width: 16px;","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;","position: static;","float: left;","margin-left: -24px;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {","float: right;","margin-left: 6px;","}",".blocklyWidgetDiv .goog-menuitem-accel, ",".blocklyDropDownDiv .goog-menuitem-accel {","color: #999;","direction: ltr;","left: auto;","padding: 0 6px;","position: absolute;","right: 0;","text-align: right;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-accel, ",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-accel {","left: 0;","right: auto;","text-align: left;","}",".blocklyWidgetDiv .goog-menuitem-mnemonic-hint, ",".blocklyDropDownDiv .goog-menuitem-mnemonic-hint {","text-decoration: underline;","}",".blocklyWidgetDiv .goog-menuitem-mnemonic-separator, ",".blocklyDropDownDiv .goog-menuitem-mnemonic-separator {","color: #999;","font-size: 12px;","padding-left: 4px;","}",".blocklyWidgetDiv .goog-menuseparator, ",".blocklyDropDownDiv .goog-menuseparator {","border-top: 1px solid #ccc;","margin: 4px 0;","padding: 0;","}",".blocklyDropDownDiv .goog-slider-horizontal {","margin: 8px;","height: 22px;","width: 150px;","position: relative;","outline: none;","border-radius: 11px;","margin-bottom: 20px;","background: #547AB2","}",".blocklyDropDownDiv .goog-slider-horizontal .goog-slider-thumb {","width: 26px;","height: 26px;","margin-top: -1px;","position: absolute;","background-color: white;","border-radius: 100%;","-webkit-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","-moz-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","cursor: pointer","}",".blocklyFieldSliderLabel {",'font-family: "Helvetica Neue", "Segoe UI", Helvetica, sans-serif;',"font-size: 0.65rem;","color: $colour_toolboxText;","margin: 8px;","}",".blocklyFieldSliderLabelText {","font-weight: bold;","}",".blocklyFieldSliderReadout {","margin-left: 10px;","}",".blocklyHighlighted>.blocklyPath {","stroke: #ff8b27;","stroke-width: 5px;","}",""],Blockly.WidgetDiv={},Blockly.WidgetDiv.DIV=null,Blockly.WidgetDiv.owner_=null,Blockly.WidgetDiv.dispose_=null,Blockly.WidgetDiv.disposeAnimationFinished_=null,Blockly.WidgetDiv.disposeAnimationTimer_=null,Blockly.WidgetDiv.disposeAnimationTimerLength_=0,Blockly.WidgetDiv.createDom=function(){Blockly.WidgetDiv.DIV||(Blockly.WidgetDiv.DIV=goog.dom.createDom("DIV","blocklyWidgetDiv"),document.body.appendChild(Blockly.WidgetDiv.DIV))},Blockly.WidgetDiv.show=function(e,t,n,o,r){Blockly.WidgetDiv.hide(),Blockly.WidgetDiv.owner_=e,Blockly.WidgetDiv.dispose_=n,Blockly.WidgetDiv.disposeAnimationFinished_=o,Blockly.WidgetDiv.disposeAnimationTimerLength_=r,e=goog.style.getViewportPageOffset(document),Blockly.WidgetDiv.DIV.style.top=e.y+"px",Blockly.WidgetDiv.DIV.style.direction=t?"rtl":"ltr",Blockly.WidgetDiv.DIV.style.display="block"},Blockly.WidgetDiv.hide=function(e){Blockly.WidgetDiv.disposeAnimationTimer_?(window.clearTimeout(Blockly.WidgetDiv.disposeAnimationTimer_),Blockly.WidgetDiv.disposeAnimationFinished_&&Blockly.WidgetDiv.disposeAnimationFinished_(),Blockly.WidgetDiv.disposeAnimationFinished_=null,Blockly.WidgetDiv.disposeAnimationTimer_=null,Blockly.WidgetDiv.owner_=null,Blockly.WidgetDiv.hideAndClearDom_()):Blockly.WidgetDiv.isVisible()&&(Blockly.WidgetDiv.dispose_&&Blockly.WidgetDiv.dispose_(),Blockly.WidgetDiv.dispose_=null,Blockly.WidgetDiv.disposeAnimationFinished_&&!e?Blockly.WidgetDiv.disposeAnimationTimer_=window.setTimeout(Blockly.WidgetDiv.hide,1e3*Blockly.WidgetDiv.disposeAnimationTimerLength_):(Blockly.WidgetDiv.disposeAnimationFinished_&&Blockly.WidgetDiv.disposeAnimationFinished_(),Blockly.WidgetDiv.disposeAnimationFinished_=null,Blockly.WidgetDiv.owner_=null,Blockly.WidgetDiv.hideAndClearDom_()))},Blockly.WidgetDiv.hideAndClearDom_=function(){Blockly.WidgetDiv.DIV.style.display="none",Blockly.WidgetDiv.DIV.style.left="",Blockly.WidgetDiv.DIV.style.top="",Blockly.WidgetDiv.DIV.style.height="",goog.dom.removeChildren(Blockly.WidgetDiv.DIV)},Blockly.WidgetDiv.isVisible=function(){return!!Blockly.WidgetDiv.owner_},Blockly.WidgetDiv.hideIfOwner=function(e){Blockly.WidgetDiv.owner_==e&&Blockly.WidgetDiv.hide()},Blockly.WidgetDiv.position=function(e,t,n,o,r){t<o.y&&(t=o.y),r?e>n.width+o.x&&(e=n.width+o.x):e<o.x&&(e=o.x),Blockly.WidgetDiv.positionInternal_(e,t,n.height)},Blockly.WidgetDiv.positionInternal_=function(e,t,n){Blockly.WidgetDiv.DIV.style.left=e+"px",Blockly.WidgetDiv.DIV.style.top=t+"px",Blockly.WidgetDiv.DIV.style.height=n+"px"},Blockly.WidgetDiv.positionWithAnchor=function(e,t,n,o){var r=Blockly.WidgetDiv.calculateY_(e,t,n);e=Blockly.WidgetDiv.calculateX_(e,t,n,o),Blockly.WidgetDiv.positionInternal_(e,r,n.height)},Blockly.WidgetDiv.calculateX_=function(e,t,n,o){return o?(t=Math.max(t.right-n.width,e.left),Math.min(t,e.right-n.width)):(t=Math.min(t.left,e.right-n.width),Math.max(t,e.left))},Blockly.WidgetDiv.calculateY_=function(e,t,n){return t.bottom+n.height>=e.bottom?t.top-n.height:t.bottom},Blockly.inject=function(e,t){if(Blockly.checkBlockColourConstants(),goog.isString(e)&&(e=document.getElementById(e)||document.querySelector(e)),!goog.dom.contains(document,e))throw"Error: container is not in current document.";var n=new Blockly.Options(t||{}),o=goog.dom.createDom("DIV","injectionDiv");e.appendChild(o),Blockly.Field.startCache();var r=Blockly.createDom_(o,n),i=new Blockly.BlockDragSurfaceSvg(o);return o=new Blockly.WorkspaceDragSurfaceSvg(o),n=Blockly.createMainWorkspace_(r,n,i,o),Blockly.init_(n),Blockly.mainWorkspace=n,Blockly.svgResize(n),n},Blockly.createDom_=function(e,t){e.setAttribute("dir","LTR"),goog.ui.Component.setDefaultRightToLeft(t.RTL),Blockly.Css.inject(t.hasCss,t.pathToMedia);var n=Blockly.utils.createSvgElement("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",class:"blocklySvg"},e),o=Blockly.utils.createSvgElement("defs",{},n),r=String(Math.random()).substring(2),i=Blockly.utils.createSvgElement("filter",{id:"blocklyStackGlowFilter",height:"160%",width:"180%",y:"-30%",x:"-40%"},o);t.stackGlowBlur=Blockly.utils.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:Blockly.Colours.stackGlowSize},i);var a=Blockly.utils.createSvgElement("feComponentTransfer",{result:"outBlur"},i);return Blockly.utils.createSvgElement("feFuncA",{type:"table",tableValues:"0"+goog.string.repeat(" 1",16)},a),Blockly.utils.createSvgElement("feFlood",{"flood-color":Blockly.Colours.stackGlow,"flood-opacity":Blockly.Colours.stackGlowOpacity,result:"outColor"},i),Blockly.utils.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},i),Blockly.utils.createSvgElement("feComposite",{in:"SourceGraphic",in2:"outGlow",operator:"over"},i),i=Blockly.utils.createSvgElement("filter",{id:"blocklyReplacementGlowFilter",height:"160%",width:"180%",y:"-30%",x:"-40%"},o),Blockly.utils.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:Blockly.Colours.replacementGlowSize},i),a=Blockly.utils.createSvgElement("feComponentTransfer",{result:"outBlur"},i),Blockly.utils.createSvgElement("feFuncA",{type:"table",tableValues:"0"+goog.string.repeat(" 1",16)},a),Blockly.utils.createSvgElement("feFlood",{"flood-color":Blockly.Colours.replacementGlow,"flood-opacity":Blockly.Colours.replacementGlowOpacity,result:"outColor"},i),Blockly.utils.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},i),Blockly.utils.createSvgElement("feComposite",{in:"SourceGraphic",in2:"outGlow",operator:"over"},i),i=Blockly.utils.createSvgElement("filter",{id:"blocklyHighlightGlowFilter",height:"160%",width:"180%",y:"-30%",x:"-40%"},o),t.stackGlowBlur=Blockly.utils.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:Blockly.Colours.highlightGlowSize},i),a=Blockly.utils.createSvgElement("feComponentTransfer",{result:"outBlur"},i),Blockly.utils.createSvgElement("feFuncA",{type:"table",tableValues:"0"+goog.string.repeat(" 1",16)},a),Blockly.utils.createSvgElement("feFlood",{"flood-color":Blockly.Colours.highlightGlow,"flood-opacity":Blockly.Colours.highlightGlowSize,result:"outColor"},i),Blockly.utils.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},i),i=Blockly.utils.createSvgElement("filter",{id:"blocklyHighlightWarningFilter",height:"160%",width:"180%",y:"-30%",x:"-40%"},o),t.stackGlowBlur=Blockly.utils.createSvgElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:Blockly.Colours.warningGlowSize},i),a=Blockly.utils.createSvgElement("feComponentTransfer",{result:"outBlur"},i),Blockly.utils.createSvgElement("feFuncA",{type:"table",tableValues:"0"+goog.string.repeat(" 1",16)},a),Blockly.utils.createSvgElement("feFlood",{"flood-color":Blockly.Colours.warningGlow,"flood-opacity":Blockly.Colours.warningGlowOpacity,result:"outColor"},i),Blockly.utils.createSvgElement("feComposite",{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},i),a=Blockly.utils.createSvgElement("filter",{id:"blocklyEmbossFilter"+r},o),Blockly.utils.createSvgElement("feComposite",{in:"SourceGraphic",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},a),t.embossFilterId=a.id,a=Blockly.utils.createSvgElement("pattern",{id:"blocklyDisabledPattern"+r,patternUnits:"userSpaceOnUse",width:10,height:10},o),Blockly.utils.createSvgElement("rect",{width:10,height:10,fill:"#aaa"},a),Blockly.utils.createSvgElement("path",{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},a),t.disabledPatternId=a.id,t.gridPattern=Blockly.Grid.createDom(r,t.gridOptions,o),n},Blockly.createMainWorkspace_=function(e,c,t,n){c.parentWorkspace=null;var u=new Blockly.WorkspaceSvg(c,t,n);return u.scale=c.zoomOptions.startScale,e.appendChild(u.createDom("blocklyMainBackground")),!c.hasCategories&&c.languageTree&&(t=u.addFlyout_("svg"),Blockly.utils.insertAfter_(t,e)),u.translate(0,0),Blockly.mainWorkspace=u,c.readOnly||c.hasScrollbars||u.addChangeListener(function(){if(!u.isDragging()){var e=u.getMetrics(),t=e.viewLeft+e.absoluteLeft,n=e.viewTop+e.absoluteTop;if(e.contentTop<n||e.contentTop+e.contentHeight>e.viewHeight+n||e.contentLeft<(c.RTL?e.viewLeft:t)||e.contentLeft+e.contentWidth>(c.RTL?e.viewWidth:e.viewWidth+t))for(var o,r=u.getTopBlocks(!1),i=0;o=r[i];i++){var a=o.getRelativeToSurfaceXY(),s=o.getHeightWidth(),l=n+25-s.height-a.y;0<l&&o.moveBy(0,l),(l=n+e.viewHeight-25-a.y)<0&&o.moveBy(0,l),0<(l=25+t-a.x-(c.RTL?0:s.width))&&o.moveBy(l,0),(a=t+e.viewWidth-25-a.x+(c.RTL?s.width:0))<0&&o.moveBy(a,0)}}}),Blockly.svgResize(u),Blockly.WidgetDiv.createDom(),Blockly.DropDownDiv.createDom(),Blockly.Tooltip.createDom(),u},Blockly.init_=function(e){var t=e.options,n=e.getParentSvg();Blockly.bindEventWithChecks_(n.parentNode,"contextmenu",null,function(e){Blockly.utils.isTargetInput(e)||e.preventDefault()}),n=Blockly.bindEventWithChecks_(window,"resize",null,function(){Blockly.hideChaff(!0),Blockly.svgResize(e)}),e.setResizeHandlerWrapper(n),Blockly.inject.bindDocumentEvents_(),t.languageTree&&(e.toolbox_?e.toolbox_.init(e):e.flyout_&&(e.flyout_.init(e),e.flyout_.show(t.languageTree.childNodes),e.flyout_.scrollToStart(),t.horizontalLayout?(e.scrollY=e.flyout_.height_,t.toolboxPosition==Blockly.TOOLBOX_AT_BOTTOM&&(e.scrollY*=-1)):(e.scrollX=e.flyout_.width_,t.toolboxPosition==Blockly.TOOLBOX_AT_RIGHT&&(e.scrollX*=-1)),e.translate(e.scrollX,e.scrollY))),t.hasScrollbars&&(e.scrollbar=new Blockly.ScrollbarPair(e),e.scrollbar.resize()),t.hasSounds&&Blockly.inject.loadSounds_(t.pathToMedia,e)},Blockly.inject.bindDocumentEvents_=function(){Blockly.documentEventsBound_||(Blockly.bindEventWithChecks_(document,"keydown",null,Blockly.onKeyDown_),Blockly.bindEvent_(document,"touchend",null,Blockly.longStop_),Blockly.bindEvent_(document,"touchcancel",null,Blockly.longStop_),goog.userAgent.IPAD&&Blockly.bindEventWithChecks_(window,"orientationchange",document,function(){Blockly.svgResize(Blockly.getMainWorkspace())})),Blockly.documentEventsBound_=!0},Blockly.inject.loadSounds_=function(e,t){var n=t.getAudioManager();n.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),n.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),n.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");var o=[],r=function(){for(;o.length;)Blockly.unbindEvent_(o.pop());n.preload()};o.push(Blockly.bindEventWithChecks_(document,"mousemove",null,r,!0)),o.push(Blockly.bindEventWithChecks_(document,"touchstart",null,r,!0))},Blockly.updateToolbox=function(e){console.warn("Deprecated call to Blockly.updateToolbox, use workspace.updateToolbox instead."),Blockly.getMainWorkspace().updateToolbox(e)};var CLOSURE_DEFINES={"goog.DEBUG":!1};Blockly.mainWorkspace=null,Blockly.selected=null,Blockly.draggingConnections_=[],Blockly.clipboardXml_=null,Blockly.clipboardSource_=null,Blockly.cache3dSupported_=null,Blockly.hueToRgb=function(e){return goog.color.hsvToHex(e,Blockly.HSV_SATURATION,255*Blockly.HSV_VALUE)},Blockly.svgSize=function(e){return{width:e.cachedWidth_,height:e.cachedHeight_}},Blockly.resizeSvgContents=function(e){e.resizeContents()},Blockly.svgResize=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;var t=e.getParentSvg(),n=t.parentNode;if(n){var o=n.offsetWidth;n=n.offsetHeight,t.cachedWidth_!=o&&(t.setAttribute("width",o+"px"),t.cachedWidth_=o),t.cachedHeight_!=n&&(t.setAttribute("height",n+"px"),t.cachedHeight_=n),e.resize()}},Blockly.onKeyDown_=function(e){if(!Blockly.mainWorkspace.options.readOnly&&!Blockly.utils.isTargetInput(e)){var t=!1;if(27==e.keyCode)Blockly.hideChaff(),Blockly.DropDownDiv.hide();else if(8==e.keyCode||46==e.keyCode){if(e.preventDefault(),Blockly.mainWorkspace.isDragging())return;Blockly.selected&&Blockly.selected.isDeletable()&&(t=!0)}else if(e.altKey||e.ctrlKey||e.metaKey){if(Blockly.mainWorkspace.isDragging())return;Blockly.selected&&Blockly.selected.isDeletable()&&Blockly.selected.isMovable()&&(67==e.keyCode?(Blockly.hideChaff(),Blockly.copy_(Blockly.selected)):88!=e.keyCode||Blockly.selected.workspace.isFlyout||(Blockly.copy_(Blockly.selected),t=!0,Blockly.hideChaff(),Blockly.selected.dispose(!0,!0))),86==e.keyCode?Blockly.clipboardXml_&&(Blockly.Events.setGroup(!0),(e=Blockly.clipboardSource_).isFlyout&&(e=e.targetWorkspace),e.paste(Blockly.clipboardXml_),Blockly.Events.setGroup(!1)):90==e.keyCode&&(Blockly.hideChaff(),Blockly.mainWorkspace.undo(e.shiftKey))}t&&!Blockly.selected.workspace.isFlyout&&(Blockly.Events.setGroup(!0),Blockly.hideChaff(),Blockly.selected.dispose(!0,!0),Blockly.Events.setGroup(!1))}},Blockly.copy_=function(e){if(e.isComment)var t=e.toXmlWithXY();else{t=Blockly.Xml.blockToDom(e),Blockly.Xml.deleteNext(t);var n=e.getRelativeToSurfaceXY();t.setAttribute("x",e.RTL?-n.x:n.x),t.setAttribute("y",n.y)}Blockly.clipboardXml_=t,Blockly.clipboardSource_=e.workspace},Blockly.duplicate_=function(e){var t=Blockly.clipboardXml_,n=Blockly.clipboardSource_;Blockly.copy_(e),e.workspace.paste(Blockly.clipboardXml_),Blockly.clipboardXml_=t,Blockly.clipboardSource_=n},Blockly.onContextMenu_=function(e){Blockly.utils.isTargetInput(e)||e.preventDefault()},Blockly.hideChaff=function(e){Blockly.Tooltip.hide(),Blockly.WidgetDiv.hide(!0),Blockly.DropDownDiv.hideWithoutAnimation(),e||(e=Blockly.getMainWorkspace()).toolbox_&&e.toolbox_.flyout_&&e.toolbox_.flyout_.autoClose&&e.toolbox_.clearSelection()},Blockly.addChangeListener=function(e){return console.warn("Deprecated call to Blockly.addChangeListener, use workspace.addChangeListener instead."),Blockly.getMainWorkspace().addChangeListener(e)},Blockly.getMainWorkspace=function(){return Blockly.mainWorkspace},Blockly.alert=function(e,t){window.alert(e),t&&t()},Blockly.confirm=function(e,t){t(window.confirm(e))},Blockly.prompt=function(e,t,n){n(window.prompt(e,t))},Blockly.jsonInitFactory_=function(e){return function(){this.jsonInit(e)}},Blockly.defineBlocksWithJsonArray=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n){var o=n.type;null==o||""===o?console.warn("Block definition #"+t+" in JSON array is missing a type attribute. Skipping."):(Blockly.Blocks[o]&&console.warn("Block definition #"+t+' in JSON array overwrites prior definition of "'+o+'".'),Blockly.Blocks[o]={init:Blockly.jsonInitFactory_(n)})}else console.warn("Block definition #"+t+" in JSON array is "+n+". Skipping.")}},Blockly.bindEventWithChecks_=function(e,t,r,i,a,n){var s=!1,o=function(e){var t=!a;e=Blockly.Touch.splitEventByTouches(e);for(var n,o=0;n=e[o];o++)t&&!Blockly.Touch.shouldHandleEvent(n)||(Blockly.Touch.setClientFromTouch(n),r?i.call(r,n):i(n),s=!0)},l=[];if(window&&window.PointerEvent&&t in Blockly.Touch.TOUCH_MAP)for(var c,u=0;c=Blockly.Touch.TOUCH_MAP[t][u];u++)e.addEventListener(c,o,!1),l.push([e,c,o]);else if(e.addEventListener(t,o,!1),l.push([e,t,o]),t in Blockly.Touch.TOUCH_MAP){var g=function(e){o(e),s&&!n&&e.preventDefault()};for(u=0;c=Blockly.Touch.TOUCH_MAP[t][u];u++)e.addEventListener(c,g,!1),l.push([e,c,g])}return l},Blockly.bindEvent_=function(e,t,n,o){var r=function(e){n?o.call(n,e):o(e)},i=[];if(window&&window.PointerEvent&&t in Blockly.Touch.TOUCH_MAP)for(var a,s=0;a=Blockly.Touch.TOUCH_MAP[t][s];s++)e.addEventListener(a,r,!1),i.push([e,a,r]);else if(e.addEventListener(t,r,!1),i.push([e,t,r]),t in Blockly.Touch.TOUCH_MAP){var l=function(e){if(e.changedTouches&&1==e.changedTouches.length){var t=e.changedTouches[0];e.clientX=t.clientX,e.clientY=t.clientY}r(e),e.preventDefault()};for(s=0;a=Blockly.Touch.TOUCH_MAP[t][s];s++)e.addEventListener(a,l,!1),i.push([e,a,l])}return i},Blockly.unbindEvent_=function(e){for(;e.length;){var t=e.pop(),n=t[2];t[0].removeEventListener(t[1],n,!1)}return n},Blockly.isNumber=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},Blockly.checkBlockColourConstants=function(){Blockly.checkBlockColourConstant_("LOGIC_HUE",["Blocks","logic","HUE"],void 0),Blockly.checkBlockColourConstant_("LOGIC_HUE",["Constants","Logic","HUE"],210),Blockly.checkBlockColourConstant_("LOOPS_HUE",["Blocks","loops","HUE"],void 0),Blockly.checkBlockColourConstant_("LOOPS_HUE",["Constants","Loops","HUE"],120),Blockly.checkBlockColourConstant_("MATH_HUE",["Blocks","math","HUE"],void 0),Blockly.checkBlockColourConstant_("MATH_HUE",["Constants","Math","HUE"],230),Blockly.checkBlockColourConstant_("TEXTS_HUE",["Blocks","texts","HUE"],void 0),Blockly.checkBlockColourConstant_("TEXTS_HUE",["Constants","Text","HUE"],160),Blockly.checkBlockColourConstant_("LISTS_HUE",["Blocks","lists","HUE"],void 0),Blockly.checkBlockColourConstant_("LISTS_HUE",["Constants","Lists","HUE"],260),Blockly.checkBlockColourConstant_("COLOUR_HUE",["Blocks","colour","HUE"],void 0),Blockly.checkBlockColourConstant_("COLOUR_HUE",["Constants","Colour","HUE"],20),Blockly.checkBlockColourConstant_("VARIABLES_HUE",["Blocks","variables","HUE"],void 0),Blockly.checkBlockColourConstant_("VARIABLES_HUE",["Constants","Variables","HUE"],330),Blockly.checkBlockColourConstant_("VARIABLES_DYNAMIC_HUE",["Constants","VariablesDynamic","HUE"],310),Blockly.checkBlockColourConstant_("PROCEDURES_HUE",["Blocks","procedures","HUE"],void 0)},Blockly.checkBlockColourConstant_=function(e,t,n){for(var o="Blockly",r=Blockly,i=0;i<t.length;++i)o+="."+t[i],r&&(r=r[t[i]]);r&&r!==n&&(e=(void 0===n?"%1 has been removed. Use Blockly.Msg.%2.":"%1 is deprecated and unused. Override Blockly.Msg.%2.").replace("%1",o).replace("%2",e),console.warn(e))},goog.global.console||(goog.global.console={log:function(){},warn:function(){}}),goog.global.Blockly||(goog.global.Blockly={}),goog.global.Blockly.getMainWorkspace=Blockly.getMainWorkspace,goog.global.Blockly.addChangeListener=Blockly.addChangeListener,Blockly.Colours={text:"#575E75",workspace:"#F9F9F9",toolboxHover:"#4C97FF",toolboxSelected:"#e9eef2",toolboxText:"#575E75",toolbox:"#FFFFFF",flyout:"#444",scrollbar:"#CECDCE",scrollbarHover:"#CECDCE",textField:"#FFFFFF",insertionMarker:"#000000",insertionMarkerOpacity:.2,dragShadowOpacity:.4,stackGlow:"#FFF200",stackGlowSize:4,stackGlowOpacity:1,replacementGlow:"#FFFFFF",replacementGlowSize:2,replacementGlowOpacity:1,highlightGlow:"#FFF200",highlightGlowSize:1.1,highlightGlowOpacity:1,warningGlow:"#E53D00",warningGlowSize:1.1,warningGlowOpacity:1,colourPickerStroke:"#FFFFFF",fieldShadow:"rgba(255, 255, 255, 0.2)",dropDownShadow:"rgba(0, 0, 0, .3)",numPadBackground:"#547AB2",numPadBorder:"#435F91",numPadActiveBackground:"#435F91",numPadText:"#FFFFFF",valueReportBackground:"#FFFFFF",valueReportBorder:"#AAAAAA"},Blockly.constants={},Blockly.DRAG_RADIUS=3,Blockly.FLYOUT_DRAG_RADIUS=10,Blockly.SNAP_RADIUS=48,Blockly.CONNECTING_SNAP_RADIUS=96,Blockly.CURRENT_CONNECTION_PREFERENCE=20,Blockly.BUMP_DELAY=0,Blockly.COLLAPSE_CHARS=30,Blockly.LONGPRESS=750,Blockly.SOUND_LIMIT=100,Blockly.DRAG_STACK=!0,Blockly.HSV_SATURATION=.45,Blockly.HSV_VALUE=.65,Blockly.SPRITE={width:96,height:124,url:"sprites.png"},Blockly.SVG_NS="http://www.w3.org/2000/svg",Blockly.HTML_NS="http://www.w3.org/1999/xhtml",Blockly.INPUT_VALUE=1,Blockly.OUTPUT_VALUE=2,Blockly.NEXT_STATEMENT=3,Blockly.PREVIOUS_STATEMENT=4,Blockly.DUMMY_INPUT=5,Blockly.ALIGN_LEFT=-1,Blockly.ALIGN_CENTRE=0,Blockly.ALIGN_RIGHT=1,Blockly.DRAG_NONE=0,Blockly.DRAG_STICKY=1,Blockly.DRAG_BEGIN=1,Blockly.DRAG_FREE=2,Blockly.OPPOSITE_TYPE=[],Blockly.OPPOSITE_TYPE[Blockly.INPUT_VALUE]=Blockly.OUTPUT_VALUE,Blockly.OPPOSITE_TYPE[Blockly.OUTPUT_VALUE]=Blockly.INPUT_VALUE,Blockly.OPPOSITE_TYPE[Blockly.NEXT_STATEMENT]=Blockly.PREVIOUS_STATEMENT,Blockly.OPPOSITE_TYPE[Blockly.PREVIOUS_STATEMENT]=Blockly.NEXT_STATEMENT,Blockly.TOOLBOX_AT_TOP=0,Blockly.TOOLBOX_AT_BOTTOM=1,Blockly.TOOLBOX_AT_LEFT=2,Blockly.TOOLBOX_AT_RIGHT=3,Blockly.OUTPUT_SHAPE_HEXAGONAL=1,Blockly.OUTPUT_SHAPE_ROUND=2,Blockly.OUTPUT_SHAPE_SQUARE=3,Blockly.DELETE_AREA_NONE=null,Blockly.DELETE_AREA_TRASH=1,Blockly.DELETE_AREA_TOOLBOX=2,Blockly.VARIABLE_CATEGORY_NAME="VARIABLE",Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME="VARIABLE_DYNAMIC",Blockly.PROCEDURE_CATEGORY_NAME="PROCEDURE",Blockly.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",Blockly.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID",Blockly.Constants={},Blockly.Constants.Colour={},Blockly.Constants.Colour.HUE=20,Blockly.defineBlocksWithJsonArray([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",colour:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField,outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",colour:"%{BKY_COLOUR_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"LEFT"},{type:"input_value",name:"GREEN",check:"Number",align:"LEFT"},{type:"input_value",name:"BLUE",check:"Number",align:"LEFT"}],output:"Colour",colour:"%{BKY_COLOUR_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"LEFT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"LEFT"},{type:"input_value",name:"RATIO",check:"Number",align:"LEFT"}],output:"Colour",colour:"%{BKY_COLOUR_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),Blockly.PXTBlockly={},Blockly.PXTBlockly.Extensions={},Blockly.PXTBlockly.Extensions.INLINE_SVGS=function(){this.ADD_IMAGE_DATAURI="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4KCjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0icmVwZWF0IgogICB4PSIwcHgiCiAgIHk9IjBweCIKICAgdmlld0JveD0iMCAwIDI0IDI0IgogICBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNCAyNDsiCiAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1IgogICBzb2RpcG9kaTpkb2NuYW1lPSJhZGQuc3ZnIj48bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGExNSI+PHJkZjpSREY+PGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPjxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PjxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz48ZGM6dGl0bGU+cmVwZWF0PC9kYzp0aXRsZT48L2NjOldvcms+PC9yZGY6UkRGPjwvbWV0YWRhdGE+PGRlZnMKICAgICBpZD0iZGVmczEzIiAvPjxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBwYWdlY29sb3I9IiNmZjQ4MjEiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTY4MCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI5NjkiCiAgICAgaWQ9Im5hbWVkdmlldzExIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp6b29tPSIxOS42NjY2NjciCiAgICAgaW5rc2NhcGU6Y3g9IjEyLjkxNTI1NCIKICAgICBpbmtzY2FwZTpjeT0iMTYuMDY3Nzk2IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOndpbmRvdy1tYXhpbWl6ZWQ9IjAiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0icmVwZWF0IiAvPjxzdHlsZQogICAgIHR5cGU9InRleHQvY3NzIgogICAgIGlkPSJzdHlsZTMiPgoJLnN0MHtmaWxsOiNDRjhCMTc7fQoJLnN0MXtmaWxsOiNGRkZGRkY7fQo8L3N0eWxlPjx0aXRsZQogICAgIGlkPSJ0aXRsZTUiPnJlcGVhdDwvdGl0bGU+PHJlY3QKICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTtzdHJva2UtbGluZWNhcDpzcXVhcmU7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MC4wNzg0MzEzNyIKICAgICBpZD0icmVjdDQxNDMiCiAgICAgd2lkdGg9IjQuMDUwMDAwMiIKICAgICBoZWlnaHQ9IjEyLjM5NzA1IgogICAgIHg9IjkuOTc1MDAwNCIKICAgICB5PSItMTguMTk4NTI2IgogICAgIHJ4PSIwLjgxIgogICAgIHJ5PSIwLjgxIgogICAgIHRyYW5zZm9ybT0ic2NhbGUoMSwtMSkiIC8+PHJlY3QKICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MTtzdHJva2UtbGluZWNhcDpzcXVhcmU7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MC4wNzg0MzEzNyIKICAgICBpZD0icmVjdDQxNDMtMSIKICAgICB3aWR0aD0iNC4wNTAwMDAyIgogICAgIGhlaWdodD0iMTIuMzk3MTE5IgogICAgIHg9IjkuOTc1MDAwNCIKICAgICB5PSI1LjgwMTQ0MDciCiAgICAgcng9IjAuODEiCiAgICAgcnk9IjAuODEiCiAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMCwxLDEsMCwwLDApIiAvPjxjaXJjbGUKICAgICBzdHlsZT0ib3BhY2l0eToxO2ZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpzcXVhcmU7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICBpZD0icGF0aDQxMzYiCiAgICAgY3g9IjEyIgogICAgIGN5PSIxMiIKICAgICByPSIxMC41MDMxOTEiIC8+PC9zdmc+",this.REMOVE_IMAGE_DATAURI="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMS4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4KCjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0icmVwZWF0IgogICB4PSIwcHgiCiAgIHk9IjBweCIKICAgdmlld0JveD0iMCAwIDI0IDI0IgogICBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyNCAyNDsiCiAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgIGlua3NjYXBlOnZlcnNpb249IjAuOTEgcjEzNzI1IgogICBzb2RpcG9kaTpkb2NuYW1lPSJyZW1vdmUuc3ZnIj48bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGExNSI+PHJkZjpSREY+PGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPjxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PjxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz48ZGM6dGl0bGU+cmVwZWF0PC9kYzp0aXRsZT48L2NjOldvcms+PC9yZGY6UkRGPjwvbWV0YWRhdGE+PGRlZnMKICAgICBpZD0iZGVmczEzIiAvPjxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBwYWdlY29sb3I9IiNmZjFhZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMSIKICAgICBvYmplY3R0b2xlcmFuY2U9IjEwIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwIgogICAgIGd1aWRldG9sZXJhbmNlPSIxMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTY4MCIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI5NTAiCiAgICAgaWQ9Im5hbWVkdmlldzExIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTp6b29tPSIxOS42NjY2NjciCiAgICAgaW5rc2NhcGU6Y3g9IjAuMDUwODQ3NTIxIgogICAgIGlua3NjYXBlOmN5PSI5Ljk2NjEwMTciCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LXk9IjAiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJyZXBlYXQiIC8+PHN0eWxlCiAgICAgdHlwZT0idGV4dC9jc3MiCiAgICAgaWQ9InN0eWxlMyI+Cgkuc3Qwe2ZpbGw6I0NGOEIxNzt9Cgkuc3Qxe2ZpbGw6I0ZGRkZGRjt9Cjwvc3R5bGU+PHRpdGxlCiAgICAgaWQ9InRpdGxlNSI+cmVwZWF0PC90aXRsZT48cmVjdAogICAgIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxO3N0cm9rZS1saW5lY2FwOnNxdWFyZTtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MDtzdHJva2Utb3BhY2l0eTowLjA3ODQzMTM3IgogICAgIGlkPSJyZWN0NDE0My0xIgogICAgIHdpZHRoPSI0LjA1MDAwMDIiCiAgICAgaGVpZ2h0PSIxMi4zOTcxMTkiCiAgICAgeD0iOS45NzUwMDA0IgogICAgIHk9IjUuODAxNDQwNyIKICAgICByeD0iMC44MSIKICAgICByeT0iMC44MSIKICAgICB0cmFuc2Zvcm09Im1hdHJpeCgwLDEsMSwwLDAsMCkiIC8+PGNpcmNsZQogICAgIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnNxdWFyZTtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLWRhc2hvZmZzZXQ6MDtzdHJva2Utb3BhY2l0eToxIgogICAgIGlkPSJwYXRoNDEzNiIKICAgICBjeD0iMTIiCiAgICAgY3k9IjEyIgogICAgIHI9IjEwLjUwMzE5MSIgLz48L3N2Zz4="},Blockly.PXTBlockly.Extensions.registerAll=function(){Blockly.Extensions.register("inline-svgs",this.INLINE_SVGS)},Blockly.PXTBlockly.Extensions.registerAll(),Blockly.Constants.Lists={},Blockly.Constants.Lists.HUE=260,Blockly.defineBlocksWithJsonArray([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:"%{BKY_LISTS_HUE}",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:"%{BKY_LISTS_HUE}",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,inputsInline:!0,colour:"%{BKY_LISTS_HUE}",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,colour:"%{BKY_LISTS_HUE}",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:"%{BKY_LISTS_HUE}",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Blockly.Blocks.lists_create_with={init:function(){Blockly.Extensions.apply("inline-svgs",this,!1),this.setHelpUrl(Blockly.Msg.LISTS_CREATE_WITH_HELPURL),this.setColour(Blockly.Msg.LISTS_HUE),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setInputsInline(!0),this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},storeConnections_:function(){this.valueConnections_=[];for(var e=0;e<this.itemCount_;e++)this.valueConnections_.push(this.getInput("ADD"+e).connection.targetConnection)},restoreConnections_:function(){for(var e=0;e<this.itemCount_;e++)Blockly.Mutator.reconnect(this.valueConnections_[e],this,"ADD"+e)},addItem_:function(){if(this.storeConnections_(),this.update_(function(){this.itemCount_++}),this.restoreConnections_(),1<this.itemCount_){var e=this.getInput("ADD0");if(e&&e.connection.targetConnection){var t=this.getInput("ADD"+(this.itemCount_-1)),n=e.connection.getShadowDom();n&&(e=document.createElement("shadow"),n=n.getAttribute("type"),e.setAttribute("type",n),(n=document.createElement("field")).setAttribute("name","NUM"),e.appendChild(n),e&&(e.setAttribute("id",Blockly.utils.genUid()),t.connection.setShadowDom(e),t.connection.respawnShadow_()))}}},removeItem_:function(){this.storeConnections_(),this.update_(function(){this.itemCount_--}),this.restoreConnections_()},update_:function(e){Blockly.Events.setGroup(!0);var t=this,n=t.mutationToDom();n=n&&Blockly.Xml.domToText(n);var o=t.rendered;t.rendered=!1,e&&e.call(this),this.updateShape_(),t.rendered=o,t.initSvg();var r=Blockly.Events.getGroup();n!=(e=(e=t.mutationToDom())&&Blockly.Xml.domToText(e))&&(Blockly.Events.fire(new Blockly.Events.BlockChange(t,"mutation",null,n,e)),setTimeout(function(){Blockly.Events.setGroup(r),t.bumpNeighbours_(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)),t.rendered&&t.render(),Blockly.Events.setGroup(!1)},updateShape_:function(){var e=this,t=function(){e.removeItem_()};this.itemCount_?(this.getInput("EMPTY")&&this.removeInput("EMPTY"),this.getInput("TITLE")||this.appendDummyInput("TITLE").appendField(Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH)):(this.getInput("TITLE")&&this.removeInput("TITLE"),this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(Blockly.Msg.LISTS_CREATE_EMPTY_TITLE));var n=0;for(n=0;n<this.itemCount_;n++)this.getInput("ADD"+n)||this.appendValueInput("ADD"+n);for(;this.getInput("ADD"+n);)this.removeInput("ADD"+n),n++;this.getInput("BUTTONS")&&this.removeInput("BUTTONS"),n=this.appendDummyInput("BUTTONS"),0<this.itemCount_&&n.appendField(new Blockly.FieldImage(this.REMOVE_IMAGE_DATAURI,24,24,!1,"*",t)),n.appendField(new Blockly.FieldImage(this.ADD_IMAGE_DATAURI,24,24,!1,"*",function(){e.addItem_()})),t=this.itemCount_<=5,this.setInputsInline(t),this.setOutputShape(t?Blockly.OUTPUT_SHAPE_ROUND:Blockly.OUTPUT_SHAPE_SQUARE)}},Blockly.Blocks.lists_create_with_container={init:function(){this.setColour(Blockly.Msg.LISTS_HUE),this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},Blockly.Blocks.lists_create_with_item={init:function(){this.setColour(Blockly.Msg.LISTS_HUE),this.appendDummyInput().appendField(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},Blockly.Blocks.lists_indexOf={init:function(){var e=[[Blockly.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[Blockly.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(Blockly.Msg.LISTS_INDEX_OF_HELPURL),this.setColour(Blockly.Msg.LISTS_HUE),this.setOutput(!0,"Number"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.appendValueInput("VALUE").setCheck("Array").appendField(Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new Blockly.FieldDropdown(e),"END"),this.setInputsInline(!0);var t=this;this.setTooltip(function(){return Blockly.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",t.workspace.options.oneBasedIndex?"0":"-1")})}},Blockly.Blocks.lists_getIndex={init:function(){var e=[[Blockly.Msg.LISTS_GET_INDEX_GET,"GET"],[Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[Blockly.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[Blockly.Msg.LISTS_GET_INDEX_LAST,"LAST"],[Blockly.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(Blockly.Msg.LISTS_GET_INDEX_HELPURL),this.setColour(Blockly.Msg.LISTS_HUE),e=new Blockly.FieldDropdown(e,function(e){this.sourceBlock_.updateStatement_("REMOVE"==e)}),this.appendValueInput("VALUE").setCheck("Array").appendField(Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),Blockly.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var o=this;this.setTooltip(function(){var e=o.getFieldValue("MODE"),t=o.getFieldValue("WHERE"),n="";switch(e+" "+t){case"GET FROM_START":case"GET FROM_END":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":n=Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return"FROM_START"!=t&&"FROM_END"!=t||(n+="  "+("FROM_START"==t?Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP:Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),n})},mutationToDom:function(){var e=document.createElement("mutation");e.setAttribute("statement",!this.outputConnection);var t=this.getInput("AT").type==Blockly.INPUT_VALUE;return e.setAttribute("at",t),e},domToMutation:function(e){var t="true"==e.getAttribute("statement");this.updateStatement_(t),e="false"!=e.getAttribute("at"),this.updateAt_(e)},updateStatement_:function(e){e!=!this.outputConnection&&(this.unplug(!0,!0),e?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(o){this.removeInput("AT"),this.removeInput("ORDINAL",!0),o?(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var e=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(e){var t="FROM_START"==e||"FROM_END"==e;if(t!=o){var n=this.sourceBlock_;return n.updateAt_(t),n.setFieldValue(e,"WHERE"),null}});this.getInput("AT").appendField(e,"WHERE"),Blockly.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},Blockly.Blocks.lists_setIndex={init:function(){var e=[[Blockly.Msg.LISTS_SET_INDEX_SET,"SET"],[Blockly.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[Blockly.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[Blockly.Msg.LISTS_GET_INDEX_LAST,"LAST"],[Blockly.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(Blockly.Msg.LISTS_SET_INDEX_HELPURL),this.setColour(Blockly.Msg.LISTS_HUE),this.appendValueInput("LIST").setCheck("Array").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new Blockly.FieldDropdown(e),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(Blockly.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(Blockly.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var o=this;this.setTooltip(function(){var e=o.getFieldValue("MODE"),t=o.getFieldValue("WHERE"),n="";switch(e+" "+t){case"SET FROM_START":case"SET FROM_END":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":n=Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return"FROM_START"!=t&&"FROM_END"!=t||(n+="  "+Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",o.workspace.options.oneBasedIndex?"#1":"#0")),n})},mutationToDom:function(){var e=document.createElement("mutation"),t=this.getInput("AT").type==Blockly.INPUT_VALUE;return e.setAttribute("at",t),e},domToMutation:function(e){e="false"!=e.getAttribute("at"),this.updateAt_(e)},updateAt_:function(o){this.removeInput("AT"),this.removeInput("ORDINAL",!0),o?(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var e=new Blockly.FieldDropdown(this.WHERE_OPTIONS,function(e){var t="FROM_START"==e||"FROM_END"==e;if(t!=o){var n=this.sourceBlock_;return n.updateAt_(t),n.setFieldValue(e,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(e,"WHERE")}},Blockly.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[Blockly.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(Blockly.Msg.LISTS_GET_SUBLIST_HELPURL),this.setColour(Blockly.Msg.LISTS_HUE),this.appendValueInput("LIST").setCheck("Array").appendField(Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),Blockly.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var e=document.createElement("mutation"),t=this.getInput("AT1").type==Blockly.INPUT_VALUE;return e.setAttribute("at1",t),t=this.getInput("AT2").type==Blockly.INPUT_VALUE,e.setAttribute("at2",t),e},domToMutation:function(e){var t="true"==e.getAttribute("at1");e="true"==e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},updateAt_:function(o,r){this.removeInput("AT"+o),this.removeInput("ORDINAL"+o,!0),r?(this.appendValueInput("AT"+o).setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+o).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+o);var e=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+o],function(e){var t="FROM_START"==e||"FROM_END"==e;if(t!=r){var n=this.sourceBlock_;return n.updateAt_(o,t),n.setFieldValue(e,"WHERE"+o),null}});this.getInput("AT"+o).appendField(e,"WHERE"+o),1==o&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),Blockly.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},Blockly.Blocks.lists_sort={init:function(){this.jsonInit({message0:Blockly.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[Blockly.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[Blockly.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[Blockly.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[Blockly.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Msg.LISTS_HUE,tooltip:Blockly.Msg.LISTS_SORT_TOOLTIP,helpUrl:Blockly.Msg.LISTS_SORT_HELPURL})}},Blockly.Blocks.lists_split={init:function(){var t=this,e=new Blockly.FieldDropdown([[Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(e){t.updateType_(e)});this.setHelpUrl(Blockly.Msg.LISTS_SPLIT_HELPURL),this.setColour(Blockly.Msg.LISTS_HUE),this.appendValueInput("INPUT").setCheck("String").appendField(e,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setTooltip(function(){var e=t.getFieldValue("MODE");if("SPLIT"==e)return Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"==e)return Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw"Unknown mode: "+e})},updateType_:function(e){"SPLIT"==e?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("mode",this.getFieldValue("MODE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("mode"))}},Blockly.Constants.Logic={},Blockly.Constants.Logic.HUE=210,Blockly.Blocks.controls_if={init:function(){Blockly.Extensions.apply("inline-svgs",this,!1),this.elseCount_=this.elseifCount_=0,this.setHelpUrl(Blockly.Msg.CONTROLS_IF_HELPURL),this.appendValueInput("IF0").setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_IF),this.appendDummyInput("THEN0").appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN),this.appendStatementInput("DO0"),this.updateShape_(),this.setInputsInline(!0),this.setColour(Blockly.Constants.Logic.HUE),this.setPreviousStatement(!0),this.setNextStatement(!0),Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION.call(this)},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var e=document.createElement("mutation");return this.elseifCount_&&e.setAttribute("elseif",this.elseifCount_),this.elseCount_&&e.setAttribute("else",1),e},domToMutation:function(e){e&&(this.elseifCount_=parseInt(e.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(e.getAttribute("else"),10)||0,this.updateShape_())},storeConnections_:function(e){e||(e=0),this.valueConnections_=[null],this.statementConnections_=[null],this.elseStatementConnection_=null;for(var t=1;t<=this.elseifCount_;t++)e!=t&&(this.valueConnections_.push(this.getInput("IF"+t).connection.targetConnection),this.statementConnections_.push(this.getInput("DO"+t).connection.targetConnection));this.getInput("ELSE")&&(this.elseStatementConnection_=this.getInput("ELSE").connection.targetConnection)},restoreConnections_:function(){for(var e=1;e<=this.elseifCount_;e++)Blockly.Mutator.reconnect(this.valueConnections_[e],this,"IF"+e),Blockly.Mutator.reconnect(this.statementConnections_[e],this,"DO"+e);Blockly.Mutator.reconnect(this.elseStatementConnection_,this,"ELSE")},addElse_:function(){this.storeConnections_(),this.update_(function(){this.elseCount_++}),this.restoreConnections_()},addElseIf_:function(){this.storeConnections_(),this.update_(function(){this.elseifCount_++}),this.restoreConnections_()},removeElseIf_:function(e){this.storeConnections_(e),this.update_(function(){this.elseifCount_--}),this.restoreConnections_()},update_:function(e){Blockly.Events.setGroup(!0);var t=this,n=t.mutationToDom();n=n&&Blockly.Xml.domToText(n);var o=t.rendered;t.rendered=!1,e&&e.call(this),this.updateShape_(),t.rendered=o,t.initSvg();var r=Blockly.Events.getGroup();n!=(e=(e=t.mutationToDom())&&Blockly.Xml.domToText(e))&&(Blockly.Events.fire(new Blockly.Events.BlockChange(t,"mutation",null,n,e)),setTimeout(function(){Blockly.Events.setGroup(r),t.bumpNeighbours_(),Blockly.Events.setGroup(!1)},Blockly.BUMP_DELAY)),t.rendered&&t.render(),Blockly.Events.setGroup(!1)},updateShape_:function(){var t=this;this.getInput("ELSE")&&(this.removeInput("ELSE"),this.removeInput("ELSETITLE"));for(var e=1;this.getInput("IF"+e);)this.removeInput("IF"+e),this.removeInput("IFTITLE"+e),this.removeInput("IFBUTTONS"+e),this.removeInput("DO"+e),e++;for(e=1;e<=this.elseifCount_;e++){var n=function(e){return function(){t.removeElseIf_(e)}}(e);this.appendValueInput("IF"+e).setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendDummyInput("IFTITLE"+e).appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN),this.appendDummyInput("IFBUTTONS"+e).appendField(new Blockly.FieldImage(this.REMOVE_IMAGE_DATAURI,24,24,!1,"*",n)),this.appendStatementInput("DO"+e)}this.elseCount_&&(this.appendDummyInput("ELSETITLE").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE),this.appendStatementInput("ELSE")),this.getInput("ADDBUTTON")&&this.removeInput("ADDBUTTON"),e=function(){0==t.elseCount_?t.addElse_():(t.elseifCount_||(t.elseifCount_=0),t.addElseIf_())},(t=this).appendDummyInput("ADDBUTTON").appendField(new Blockly.FieldImage(this.ADD_IMAGE_DATAURI,24,24,!1,"*",e))}},Blockly.defineBlocksWithJsonArray([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",colour:"%{BKY_LOGIC_HUE}",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1 %{BKY_CONTROLS_IF_MSG_THEN}",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE}",message3:"%1",args3:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",colour:"%{BKY_LOGIC_HUE}",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",colour:"%{BKY_LOGIC_HUE}",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",colour:"%{BKY_LOGIC_HUE}",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]}]),Blockly.defineBlocksWithJsonArray([{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,colour:"%{BKY_LOGIC_HUE}",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Blockly.Constants.Logic.TOOLTIPS_BY_OP={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"},Blockly.Extensions.register("logic_op_tooltip",Blockly.Extensions.buildTooltipForDropdown("OP",Blockly.Constants.Logic.TOOLTIPS_BY_OP)),Blockly.Constants.Logic.CONTROLS_IF_MUTATOR_MIXIN={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var e=document.createElement("mutation");return this.elseifCount_&&e.setAttribute("elseif",this.elseifCount_),this.elseCount_&&e.setAttribute("else",1),e},domToMutation:function(e){this.elseifCount_=parseInt(e.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(e.getAttribute("else"),10)||0,this.updateShape_()},decompose:function(e){var t=e.newBlock("controls_if_if");t.initSvg();for(var n=t.nextConnection,o=1;o<=this.elseifCount_;o++){var r=e.newBlock("controls_if_elseif");r.initSvg(),n.connect(r.previousConnection),n=r.nextConnection}return this.elseCount_&&((e=e.newBlock("controls_if_else")).initSvg(),n.connect(e.previousConnection)),t},compose:function(e){var t=e.nextConnection.targetBlock();this.elseCount_=this.elseifCount_=0,e=[null];for(var n=[null],o=null;t;){switch(t.type){case"controls_if_elseif":this.elseifCount_++,e.push(t.valueConnection_),n.push(t.statementConnection_);break;case"controls_if_else":this.elseCount_++,o=t.statementConnection_;break;default:throw"Unknown block type."}t=t.nextConnection&&t.nextConnection.targetBlock()}for(this.updateShape_(),t=1;t<=this.elseifCount_;t++)Blockly.Mutator.reconnect(e[t],this,"IF"+t),Blockly.Mutator.reconnect(n[t],this,"DO"+t);Blockly.Mutator.reconnect(o,this,"ELSE")},saveConnections:function(e){e=e.nextConnection.targetBlock();for(var t=1;e;){switch(e.type){case"controls_if_elseif":var n=this.getInput("IF"+t),o=this.getInput("DO"+t);e.valueConnection_=n&&n.connection.targetConnection,e.statementConnection_=o&&o.connection.targetConnection,t++;break;case"controls_if_else":o=this.getInput("ELSE"),e.statementConnection_=o&&o.connection.targetConnection;break;default:throw"Unknown block type."}e=e.nextConnection&&e.nextConnection.targetBlock()}},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var e=1;this.getInput("IF"+e);)this.removeInput("IF"+e),this.removeInput("DO"+e),e++;for(e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+e).appendField(Blockly.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(Blockly.Msg.CONTROLS_IF_MSG_ELSE)}},Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION=function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?Blockly.Msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?Blockly.Msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?Blockly.Msg.CONTROLS_IF_TOOLTIP_4:"":Blockly.Msg.CONTROLS_IF_TOOLTIP_1}.bind(this))},Blockly.Extensions.register("controls_if_tooltip",Blockly.Constants.Logic.CONTROLS_IF_TOOLTIP_EXTENSION),Blockly.Constants.Logic.fixLogicCompareRtlOpLabels=function(){var e={LT:"<",LTE:"",GT:">",GTE:""},t=this.getField("OP");if(t){t=t.getOptions();for(var n=0;n<t.length;++n){var o=t[n],r=e[o[1]];goog.isString(o[0])&&r&&(o[0]=r)}}},Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN={onchange:function(e){this.prevBlocks_||(this.prevBlocks_=[null,null]);var t=this.getInputTargetBlock("A"),n=this.getInputTargetBlock("B");t&&n&&!t.outputConnection.checkType_(n.outputConnection)&&(Blockly.Events.setGroup(e.group),(e=this.prevBlocks_[0])!==t&&(t.unplug(),e&&!e.isShadow()&&this.getInput("A").connection.connect(e.outputConnection)),(t=this.prevBlocks_[1])!==n&&(n.unplug(),t&&!t.isShadow()&&this.getInput("B").connection.connect(t.outputConnection)),this.bumpNeighbours_(),Blockly.Events.setGroup(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION=function(){this.RTL&&Blockly.Constants.Logic.fixLogicCompareRtlOpLabels.apply(this),this.mixin(Blockly.Constants.Logic.LOGIC_COMPARE_ONCHANGE_MIXIN)},Blockly.Extensions.register("logic_compare",Blockly.Constants.Logic.LOGIC_COMPARE_EXTENSION),Blockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN={prevParentConnection_:null,onchange:function(e){var t=this.getInputTargetBlock("THEN"),n=this.getInputTargetBlock("ELSE"),o=this.outputConnection.targetConnection;if((t||n)&&o)for(var r=0;r<2;r++){var i=1==r?t:n;i&&!i.outputConnection.checkType_(o)&&(Blockly.Events.setGroup(e.group),o===this.prevParentConnection_?(this.unplug(),o.getSourceBlock().bumpNeighbours_()):(i.unplug(),i.bumpNeighbours_()),Blockly.Events.setGroup(!1))}this.prevParentConnection_=o}},Blockly.Extensions.registerMixin("logic_ternary",Blockly.Constants.Logic.LOGIC_TERNARY_ONCHANGE_MIXIN),Blockly.Constants.Loops={},Blockly.Constants.Loops.HUE=120,Blockly.defineBlocksWithJsonArray([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"input_value",name:"VAR",check:"Variable"},{type:"input_value",name:"FROM",check:"Number",align:"LEFT"},{type:"input_value",name:"TO",check:"Number",align:"LEFT"},{type:"input_value",name:"BY",check:"Number",align:"LEFT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"input_value",name:"VAR",check:"Variable"},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,colour:"%{BKY_LOOPS_HUE}",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,colour:"%{BKY_LOOPS_HUE}",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),Blockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"},Blockly.Extensions.register("controls_whileUntil_tooltip",Blockly.Extensions.buildTooltipForDropdown("MODE",Blockly.Constants.Loops.WHILE_UNTIL_TOOLTIPS)),Blockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"},Blockly.Extensions.register("controls_flow_tooltip",Blockly.Extensions.buildTooltipForDropdown("FLOW",Blockly.Constants.Loops.BREAK_CONTINUE_TOOLTIPS)),Blockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN={customContextMenu:function(e){if(!this.isInFlyout){var t=this.getField("VAR").getVariable(),n=t.name;if(!this.isCollapsed()&&null!=n){var o={enabled:!0};o.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",n),t=Blockly.Variables.generateVariableFieldDom(t),(t=goog.dom.createDom("block",null,t)).setAttribute("type","variables_get"),o.callback=Blockly.ContextMenu.callbackFactory(this,t),e.push(o)}}}},Blockly.Extensions.registerMixin("contextMenu_newGetVariableBlock",Blockly.Constants.Loops.CUSTOM_CONTEXT_MENU_CREATE_VARIABLES_GET_MIXIN),Blockly.Extensions.register("controls_for_tooltip",Blockly.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),Blockly.Extensions.register("controls_forEach_tooltip",Blockly.Extensions.buildTooltipWithFieldText("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN={LOOP_TYPES:["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"],onchange:function(){if(this.workspace.isDragging&&!this.workspace.isDragging()){var e=!1,t=this;do{if(-1!=this.LOOP_TYPES.indexOf(t.type)){e=!0;break}t=t.getSurroundParent()}while(t);e?(this.setWarningText(null),this.isInFlyout||this.setDisabled(!1)):(this.setWarningText(Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setDisabled(!0))}}},Blockly.Extensions.registerMixin("controls_flow_in_loop_check",Blockly.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN),Blockly.Constants.Math={},Blockly.Constants.Math.HUE=230,Blockly.defineBlocksWithJsonArray([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",colour:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField,outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_integer",message0:"%1",args0:[{type:"field_number",name:"NUM",precision:1}],output:"Number",colour:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField,outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_whole_number",message0:"%1",args0:[{type:"field_number",name:"NUM",min:0,precision:1}],output:"Number",colour:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField,outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_positive_number",message0:"%1",args0:[{type:"field_number",name:"NUM",min:0}],output:"Number",colour:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField,outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_number_minmax",message0:"%1",args0:[{type:"field_slider",name:"SLIDER",value:0,step:1,labelText:"Number"}],output:"Number",colour:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField,outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",mutator:"math_number_minmax_mutator",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",colour:"%{BKY_MATH_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",colour:"%{BKY_MATH_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",colour:"%{BKY_MATH_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",colour:"%{BKY_MATH_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",colour:"%{BKY_MATH_HUE}",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,colour:"%{BKY_VARIABLES_HUE}",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",colour:"%{BKY_MATH_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",colour:"%{BKY_MATH_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",colour:"%{BKY_MATH_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",colour:"%{BKY_MATH_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",colour:"%{BKY_MATH_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",colour:"%{BKY_MATH_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"}]),Blockly.Constants.Math.TOOLTIPS_BY_OP={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"},Blockly.Extensions.register("math_op_tooltip",Blockly.Extensions.buildTooltipForDropdown("OP",Blockly.Constants.Math.TOOLTIPS_BY_OP)),Blockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN={mutationToDom:function(){var e=document.createElement("mutation"),t="DIVISIBLE_BY"==this.getFieldValue("PROPERTY");return e.setAttribute("divisor_input",t),e},domToMutation:function(e){e="true"==e.getAttribute("divisor_input"),this.updateShape_(e)},updateShape_:function(e){var t=this.getInput("DIVISOR");e?t||this.appendValueInput("DIVISOR").setCheck("Number"):t&&this.removeInput("DIVISOR")}},Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION=function(){this.getField("PROPERTY").setValidator(function(e){this.sourceBlock_.updateShape_("DIVISIBLE_BY"==e)})},Blockly.Extensions.registerMutator("math_is_divisibleby_mutator",Blockly.Constants.Math.IS_DIVISIBLEBY_MUTATOR_MIXIN,Blockly.Constants.Math.IS_DIVISIBLE_MUTATOR_EXTENSION),Blockly.Extensions.register("math_change_tooltip",Blockly.Extensions.buildTooltipWithFieldText("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),Blockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN={updateType_:function(e){"MODE"==e?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("op",this.getFieldValue("OP")),e},domToMutation:function(e){this.updateType_(e.getAttribute("op"))}},Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION=function(){this.getField("OP").setValidator(function(e){this.updateType_(e)}.bind(this))},Blockly.Extensions.registerMutator("math_modes_of_list_mutator",Blockly.Constants.Math.LIST_MODES_MUTATOR_MIXIN,Blockly.Constants.Math.LIST_MODES_MUTATOR_EXTENSION),Blockly.Constants.Math.MATH_NUMBER_MINMAX_MIXIN={mutationToDom:function(){var e=document.createElement("mutation");return null!=this.inputList[0].fieldRow[0].min_&&e.setAttribute("min",this.inputList[0].fieldRow[0].min_),null!=this.inputList[0].fieldRow[0].max_&&e.setAttribute("max",this.inputList[0].fieldRow[0].max_),null!=this.inputList[0].fieldRow[0].labelText_&&e.setAttribute("label",this.inputList[0].fieldRow[0].labelText_),null!=this.inputList[0].fieldRow[0].step_&&e.setAttribute("step",this.inputList[0].fieldRow[0].step_),null!=this.inputList[0].fieldRow[0].sliderColor_&&e.setAttribute("color",this.inputList[0].fieldRow[0].sliderColor_),e},domToMutation:function(e){var t=e.getAttribute("min"),n=e.getAttribute("max"),o=e.getAttribute("step"),r=e.getAttribute("label");e=e.getAttribute("color"),this.inputList[0].fieldRow[0].setLabel(r),this.inputList[0].fieldRow[0].setMinMax(t,n,o),this.inputList[0].fieldRow[0].setColor(e)}},Blockly.Extensions.registerMutator("math_number_minmax_mutator",Blockly.Constants.Math.MATH_NUMBER_MINMAX_MIXIN),Blockly.Blocks.procedures_defnoreturn={init:function(){var e=new Blockly.FieldTextInput("",Blockly.Procedures.rename);e.setSpellcheck(!1),this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setColour(Blockly.Msg.PROCEDURES_HUE),this.setTooltip(Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:function(e){this.hasStatements_!==e&&(e?(this.appendStatementInput("STACK").appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=e)},updateParams_:function(){for(var e=!1,t={},n=0;n<this.arguments_.length;n++){if(t["arg_"+this.arguments_[n].toLowerCase()]){e=!0;break}t["arg_"+this.arguments_[n].toLowerCase()]=!0}e?this.setWarningText(Blockly.Msg.PROCEDURES_DEF_DUPLICATE_WARNING):this.setWarningText(null),e="",this.arguments_.length&&(e=Blockly.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),Blockly.Events.disable();try{this.setFieldValue(e,"PARAMS")}finally{Blockly.Events.enable()}},mutationToDom:function(e){var t=document.createElement("mutation");e&&t.setAttribute("name",this.getFieldValue("NAME"));for(var n=0;n<this.argumentVarModels_.length;n++){var o=document.createElement("arg"),r=this.argumentVarModels_[n];o.setAttribute("name",r.name),o.setAttribute("varId",r.getId()),e&&this.paramIds_&&o.setAttribute("paramId",this.paramIds_[n]),t.appendChild(o)}return this.hasStatements_||t.setAttribute("statements","false"),t},domToMutation:function(e){this.arguments_=[],this.argumentVarModels_=[];for(var t,n=0;t=e.childNodes[n];n++)if("arg"==t.nodeName.toLowerCase()){var o=t.getAttribute("name");t=t.getAttribute("varId"),this.arguments_.push(o),o=Blockly.Variables.getOrCreateVariablePackage(this.workspace,t,o,""),this.argumentVarModels_.push(o)}this.updateParams_(),Blockly.Procedures.mutateCallers(this),this.setStatements_("false"!==e.getAttribute("statements"))},decompose:function(e){var t=e.newBlock("procedures_mutatorcontainer");t.initSvg(),this.getInput("RETURN")?t.setFieldValue(this.hasStatements_?"TRUE":"FALSE","STATEMENTS"):t.getInput("STATEMENT_INPUT").setVisible(!1);for(var n=t.getInput("STACK").connection,o=0;o<this.arguments_.length;o++){var r=e.newBlock("procedures_mutatorarg");r.initSvg(),r.setFieldValue(this.arguments_[o],"NAME"),r.oldLocation=o,n.connect(r.previousConnection),n=r.nextConnection}return Blockly.Procedures.mutateCallers(this),t},compose:function(e){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var t=e.getInputTargetBlock("STACK");t;){var n=t.getFieldValue("NAME");this.arguments_.push(n),n=this.workspace.getVariable(n,""),this.argumentVarModels_.push(n),this.paramIds_.push(t.id),t=t.nextConnection&&t.nextConnection.targetBlock()}this.updateParams_(),Blockly.Procedures.mutateCallers(this),null!==(e=e.getFieldValue("STATEMENTS"))&&(e="TRUE"==e,this.hasStatements_!=e)&&(e?(this.setStatements_(!0),Blockly.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(e=this.getInput("STACK").connection,(this.statementConnection_=e.targetConnection)&&((e=e.targetBlock()).unplug(),e.bumpNeighbours_()),this.setStatements_(!1)))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(e,t){var n=this.workspace.getVariableById(e);if(""==n.type){n=n.name;for(var o=this.workspace.getVariableById(t),r=!1,i=0;i<this.argumentVarModels_.length;i++)this.argumentVarModels_[i].getId()==e&&(this.arguments_[i]=o.name,this.argumentVarModels_[i]=o,r=!0);r&&this.displayRenamedVar_(n,o.name)}},updateVarName:function(e){for(var t=e.name,n=!1,o=0;o<this.argumentVarModels_.length;o++)if(this.argumentVarModels_[o].getId()==e.getId()){var r=this.arguments_[o];this.arguments_[o]=t,n=!0}n&&this.displayRenamedVar_(r,t)},displayRenamedVar_:function(e,t){if(this.updateParams_(),this.mutator.isVisible())for(var n,o=this.mutator.workspace_.getAllBlocks(),r=0;n=o[r];r++)"procedures_mutatorarg"==n.type&&Blockly.Names.equals(e,n.getFieldValue("NAME"))&&n.setFieldValue(t,"NAME")},customContextMenu:function(e){if(!this.isInFlyout){var t={enabled:!0},n=this.getFieldValue("NAME");t.text=Blockly.Msg.PROCEDURES_CREATE_DO.replace("%1",n);var o=goog.dom.createDom("mutation");o.setAttribute("name",n);for(var r=0;r<this.arguments_.length;r++)(n=goog.dom.createDom("arg")).setAttribute("name",this.arguments_[r]),o.appendChild(n);if((n=goog.dom.createDom("block",null,o)).setAttribute("type",this.callType_),t.callback=Blockly.ContextMenu.callbackFactory(this,n),e.push(t),!this.isCollapsed())for(r=0;r<this.argumentVarModels_.length;r++)t={enabled:!0},n=(o=this.argumentVarModels_[r]).name,t.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",n),n=Blockly.Variables.generateVariableFieldDom(o),(n=goog.dom.createDom("block",null,n)).setAttribute("type","variables_get"),t.callback=Blockly.ContextMenu.callbackFactory(this,n),e.push(t)}},callType_:"procedures_callnoreturn"},Blockly.Blocks.procedures_defreturn={init:function(){var e=new Blockly.FieldTextInput("",Blockly.Procedures.rename);e.setSpellcheck(!1),this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(Blockly.ALIGN_RIGHT).appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setColour(Blockly.Msg.PROCEDURES_HUE),this.setTooltip(Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},setStatements_:Blockly.Blocks.procedures_defnoreturn.setStatements_,updateParams_:Blockly.Blocks.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,decompose:Blockly.Blocks.procedures_defnoreturn.decompose,compose:Blockly.Blocks.procedures_defnoreturn.compose,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar_:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar_,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,callType_:"procedures_callreturn"},Blockly.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new Blockly.FieldCheckbox("TRUE"),"STATEMENTS"),this.setColour(Blockly.Msg.PROCEDURES_HUE),this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},Blockly.Blocks.procedures_mutatorarg={init:function(){var e=new Blockly.FieldTextInput("x",this.validator_);e.oldShowEditorFn_=e.showEditor_,e.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(e,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(Blockly.Msg.PROCEDURES_HUE),this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,e.onFinishEditing_=this.deleteIntermediateVars_,e.createdVariables_=[],e.onFinishEditing_("x")},validator_:function(e){var t=Blockly.Mutator.findParentWs(this.sourceBlock_.workspace);if(!(e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;var n=t.getVariable(e,"");return n&&n.name!=e&&t.renameVarById(n.getId(),e),n||(n=t.createVariable(e,""))&&this.createdVariables_&&this.createdVariables_.push(n),e},deleteIntermediateVars_:function(e){var t=Blockly.Mutator.findParentWs(this.sourceBlock_.workspace);if(t)for(var n=0;n<this.createdVariables_.length;n++){var o=this.createdVariables_[n];o.name!=e&&t.deleteVariableById(o.getId())}}},Blockly.Blocks.procedures_callnoreturn={init:function(){this.appendDummyInput("TOPROW").appendField(this.id,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(Blockly.Msg.PROCEDURES_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,t){Blockly.Names.equals(e,this.getProcedureCall())&&(this.setFieldValue(t,"NAME"),this.setTooltip((this.outputConnection?Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP:Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",t)))},setProcedureParameters_:function(e,t){var n=Blockly.Procedures.getDefinition(this.getProcedureCall(),this.workspace),o=n&&n.mutator&&n.mutator.isVisible();if(o||(this.quarkConnections_={},this.quarkIds_=null),t)if(goog.array.equals(this.arguments_,e))this.quarkIds_=t;else{if(t.length!=e.length)throw"Error: paramNames and paramIds must be the same length.";this.setCollapsed(!1),this.quarkIds_||(this.quarkConnections_={},e.join("\n")==this.arguments_.join("\n")?this.quarkIds_=t:this.quarkIds_=[]),n=this.rendered,this.rendered=!1;for(var r=0;r<this.arguments_.length;r++){var i=this.getInput("ARG"+r);i&&(i=i.connection.targetConnection,this.quarkConnections_[this.quarkIds_[r]]=i,o&&i&&-1==t.indexOf(this.quarkIds_[r])&&(i.disconnect(),i.getSourceBlock().bumpNeighbours_()))}for(this.arguments_=[].concat(e),this.argumentVarModels_=[],r=0;r<this.arguments_.length;r++)o=Blockly.Variables.getOrCreateVariablePackage(this.workspace,null,this.arguments_[r],""),this.argumentVarModels_.push(o);if(this.updateShape_(),this.quarkIds_=t)for(r=0;r<this.arguments_.length;r++)(o=this.quarkIds_[r])in this.quarkConnections_&&(i=this.quarkConnections_[o],Blockly.Mutator.reconnect(i,this,"ARG"+r)||delete this.quarkConnections_[o]);(this.rendered=n)&&this.render()}},updateShape_:function(){for(var e=0;e<this.arguments_.length;e++){var t=this.getField("ARGNAME"+e);if(t){Blockly.Events.disable();try{t.setValue(this.arguments_[e])}finally{Blockly.Events.enable()}}else t=new Blockly.FieldLabel(this.arguments_[e]),this.appendValueInput("ARG"+e).setAlign(Blockly.ALIGN_RIGHT).appendField(t,"ARGNAME"+e).init()}for(;this.getInput("ARG"+e);)this.removeInput("ARG"+e),e++;(e=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(e.appendField(Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),e.init()):this.getField("WITH")&&e.removeField("WITH"))},mutationToDom:function(){var e=document.createElement("mutation");e.setAttribute("name",this.getProcedureCall());for(var t=0;t<this.arguments_.length;t++){var n=document.createElement("arg");n.setAttribute("name",this.arguments_[t]),e.appendChild(n)}return e},domToMutation:function(e){var t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t),t=[];for(var n,o=[],r=0;n=e.childNodes[r];r++)"arg"==n.nodeName.toLowerCase()&&(t.push(n.getAttribute("name")),o.push(n.getAttribute("paramId")));this.setProcedureParameters_(t,o)},getVarModels:function(){return this.argumentVarModels_},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout)if(e.type==Blockly.Events.BLOCK_CREATE&&-1!=e.ids.indexOf(this.id)){var t=this.getProcedureCall();if(!(t=Blockly.Procedures.getDefinition(t,this.workspace))||t.type==this.defType_&&JSON.stringify(t.arguments_)==JSON.stringify(this.arguments_)||(t=null),!t){Blockly.Events.setGroup(e.group),e=goog.dom.createDom("xml"),(t=goog.dom.createDom("block")).setAttribute("type",this.defType_);var n=this.getRelativeToSurfaceXY(),o=n.y+2*Blockly.SNAP_RADIUS;t.setAttribute("x",n.x+Blockly.SNAP_RADIUS*(this.RTL?-1:1)),t.setAttribute("y",o),n=this.mutationToDom(),t.appendChild(n),(n=goog.dom.createDom("field")).setAttribute("name","NAME"),n.appendChild(document.createTextNode(this.getProcedureCall())),t.appendChild(n),e.appendChild(t),Blockly.Xml.domToWorkspace(e,this.workspace),Blockly.Events.setGroup(!1)}}else e.type==Blockly.Events.BLOCK_DELETE&&(t=this.getProcedureCall(),(t=Blockly.Procedures.getDefinition(t,this.workspace))||(Blockly.Events.setGroup(e.group),this.dispose(!0,!1),Blockly.Events.setGroup(!1)))},customContextMenu:function(e){var t={enabled:!0};t.text=Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF;var n=this.getProcedureCall(),o=this.workspace;t.callback=function(){var e=Blockly.Procedures.getDefinition(n,o);e&&(o.centerOnBlock(e.id),e.select())},e.push(t)},defType_:"procedures_defnoreturn"},Blockly.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setColour(Blockly.Msg.PROCEDURES_HUE),this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.quarkConnections_={},this.quarkIds_=null},getProcedureCall:Blockly.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:Blockly.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:Blockly.Blocks.procedures_callnoreturn.setProcedureParameters_,updateShape_:Blockly.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:Blockly.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_callnoreturn.domToMutation,getVarModels:Blockly.Blocks.procedures_callnoreturn.getVarModels,onchange:Blockly.Blocks.procedures_callnoreturn.onchange,customContextMenu:Blockly.Blocks.procedures_callnoreturn.customContextMenu,defType_:"procedures_defreturn"},Blockly.Blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(Blockly.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(Blockly.Msg.PROCEDURES_HUE),this.setTooltip(Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(Blockly.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("value",Number(this.hasReturnValue_)),e},domToMutation:function(e){this.hasReturnValue_=1==e.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(){if(this.workspace.isDragging&&!this.workspace.isDragging()){var e=!1,t=this;do{if(-1!=this.FUNCTION_TYPES.indexOf(t.type)){e=!0;break}t=t.getSurroundParent()}while(t);e?("procedures_defnoreturn"==t.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!=t.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(Blockly.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null),this.isInFlyout||this.setDisabled(!1)):(this.setWarningText(Blockly.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||this.getInheritedDisabled()||this.setDisabled(!0))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},Blockly.Constants.Text={},Blockly.Constants.Text.HUE=160,Blockly.defineBlocksWithJsonArray([{type:"text",message0:"%1",args0:[{type:"field_string",name:"TEXT",text:""}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.textField,colourSecondary:Blockly.Colours.textField,colourTertiary:Blockly.Colours.textField,helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:"%{BKY_TEXTS_HUE}",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],colour:"%{BKY_TEXTS_HUE}",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,colour:"%{BKY_TEXTS_HUE}",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,colour:"%{BKY_TEXTS_HUE}",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:"%{BKY_TEXTS_HUE}",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_HEXAGONAL,colour:"%{BKY_TEXTS_HUE}",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",colour:"%{BKY_TEXTS_HUE}",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:"%{BKY_TEXTS_HUE}",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),Blockly.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setColour(Blockly.Msg.TEXTS_HUE),this.appendValueInput("STRING").setCheck("String").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var e=document.createElement("mutation"),t=this.getInput("AT1").type==Blockly.INPUT_VALUE;return e.setAttribute("at1",t),t=this.getInput("AT2").type==Blockly.INPUT_VALUE,e.setAttribute("at2",t),e},domToMutation:function(e){var t="true"==e.getAttribute("at1");e="true"==e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},updateAt_:function(o,r){this.removeInput("AT"+o),this.removeInput("ORDINAL"+o,!0),r?(this.appendValueInput("AT"+o).setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+o).appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+o),2==o&&Blockly.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_GET_SUBSTRING_TAIL));var e=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+o],function(e){var t="FROM_START"==e||"FROM_END"==e;if(t!=r){var n=this.sourceBlock_;return n.updateAt_(o,t),n.setFieldValue(e,"WHERE"+o),null}});this.getInput("AT"+o).appendField(e,"WHERE"+o),1==o&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},Blockly.Blocks.text_changeCase={init:function(){var e=[[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(Blockly.Msg.TEXT_CHANGECASE_HELPURL),this.setColour(Blockly.Msg.TEXTS_HUE),this.appendValueInput("TEXT").setCheck("String").appendField(new Blockly.FieldDropdown(e),"CASE"),this.setOutput(!0,"String"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setTooltip(Blockly.Msg.TEXT_CHANGECASE_TOOLTIP)}},Blockly.Blocks.text_trim={init:function(){var e=[[Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(Blockly.Msg.TEXT_TRIM_HELPURL),this.setColour(Blockly.Msg.TEXTS_HUE),this.appendValueInput("TEXT").setCheck("String").appendField(new Blockly.FieldDropdown(e),"MODE"),this.setOutput(!0,"String"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setTooltip(Blockly.Msg.TEXT_TRIM_TOOLTIP)}},Blockly.Blocks.text_print={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,colour:Blockly.Msg.TEXTS_HUE,tooltip:Blockly.Msg.TEXT_PRINT_TOOLTIP,helpUrl:Blockly.Msg.TEXT_PRINT_HELPURL})}},Blockly.Blocks.text_prompt_ext={init:function(){var e=[[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL),this.setColour(Blockly.Msg.TEXTS_HUE);var t=this;e=new Blockly.FieldDropdown(e,function(e){t.updateType_(e)}),this.appendValueInput("TEXT").appendField(e,"TYPE"),this.setOutput(!0,"String"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setTooltip(function(){return"TEXT"==t.getFieldValue("TYPE")?Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT:Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:function(e){this.outputConnection.setCheck("NUMBER"==e?"Number":"String")},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("type",this.getFieldValue("TYPE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("type"))}},Blockly.Blocks.text_prompt={init:function(){this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN);var e=[[Blockly.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],t=this;this.setHelpUrl(Blockly.Msg.TEXT_PROMPT_HELPURL),this.setColour(Blockly.Msg.TEXTS_HUE),e=new Blockly.FieldDropdown(e,function(e){t.updateType_(e)}),this.appendDummyInput().appendField(e,"TYPE").appendField(this.newQuote_(!0)).appendField(new Blockly.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setTooltip(function(){return"TEXT"==t.getFieldValue("TYPE")?Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT:Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})},updateType_:Blockly.Blocks.text_prompt_ext.updateType_,mutationToDom:Blockly.Blocks.text_prompt_ext.mutationToDom,domToMutation:Blockly.Blocks.text_prompt_ext.domToMutation},Blockly.Blocks.text_count={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tooltip:Blockly.Msg.TEXT_COUNT_TOOLTIP,helpUrl:Blockly.Msg.TEXT_COUNT_HELPURL})}},Blockly.Blocks.text_replace={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tooltip:Blockly.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:Blockly.Msg.TEXT_REPLACE_HELPURL})}},Blockly.Blocks.text_reverse={init:function(){this.jsonInit({message0:Blockly.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,inputsInline:!0,colour:Blockly.Msg.TEXTS_HUE,tooltip:Blockly.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:Blockly.Msg.TEXT_REVERSE_HELPURL})}},Blockly.Constants.Text.QUOTE_IMAGE_MIXIN={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(e){for(var t,n=0;t=this.inputList[n];n++)for(var o,r=0;o=t.fieldRow[r];r++)if(e==o.name)return t.insertFieldAt(r,this.newQuote_(!0)),void t.insertFieldAt(r+2,this.newQuote_(!1));console.warn('field named "'+e+'" not found in '+this.toDevString())},newQuote_:function(e){return e=this.RTL?!e:e,new Blockly.FieldImage(e?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,e?"":"")}},Blockly.Constants.Text.TEXT_QUOTES_EXTENSION=function(){this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN),this.quoteField_("TEXT")},Blockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN={mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("items",this.itemCount_),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},saveConnections:function(e){e=e.getInputTargetBlock("STACK");for(var t=0;e;){var n=this.getInput("ADD"+t);e.valueConnection_=n&&n.connection.targetConnection,t++,e=e.nextConnection&&e.nextConnection.targetBlock()}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){var t=this.appendValueInput("ADD"+e);0==e?t.appendField(Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH):t.setAlign(Blockly.ALIGN_LEFT)}for(;this.getInput("ADD"+e);)this.removeInput("ADD"+e),e++}},Blockly.Constants.Text.TEXT_JOIN_EXTENSION=function(){this.mixin(Blockly.Constants.Text.QUOTE_IMAGE_MIXIN),this.itemCount_=2,this.updateShape_()},Blockly.Extensions.register("text_append_tooltip",Blockly.Extensions.buildTooltipWithFieldText("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION=function(){var e=this;this.setTooltip(function(){return Blockly.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",e.workspace.options.oneBasedIndex?"0":"-1")})},Blockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN={mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("at",!!this.isAt_),e},domToMutation:function(e){e="false"!=e.getAttribute("at"),this.updateAt_(e)},updateAt_:function(e){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),e&&(this.appendValueInput("AT").setCheck("Number"),Blockly.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(Blockly.Msg.ORDINAL_NUMBER_SUFFIX)),Blockly.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(Blockly.Msg.TEXT_CHARAT_TAIL)),this.isAt_=e}},Blockly.Constants.Text.TEXT_CHARAT_EXTENSION=function(){this.getField("WHERE").setValidator(function(e){var t="FROM_START"==e||"FROM_END"==e;if(t!=this.isAt_){var n=this.sourceBlock_;return n.updateAt_(t),n.setFieldValue(e,"WHERE"),null}}),this.updateAt_(!0);var n=this;this.setTooltip(function(){var e=n.getFieldValue("WHERE"),t=Blockly.Msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"==e||"FROM_END"==e)&&(e="FROM_START"==e?Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP:Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(t+="  "+e.replace("%1",n.workspace.options.oneBasedIndex?"#1":"#0")),t})},Blockly.Extensions.register("text_indexOf_tooltip",Blockly.Constants.Text.TEXT_INDEXOF_TOOLTIP_EXTENSION),Blockly.Extensions.register("text_quotes",Blockly.Constants.Text.TEXT_QUOTES_EXTENSION),Blockly.Extensions.registerMutator("text_join_mutator",Blockly.Constants.Text.TEXT_JOIN_MUTATOR_MIXIN,Blockly.Constants.Text.TEXT_JOIN_EXTENSION),Blockly.Extensions.registerMutator("text_charAt_mutator",Blockly.Constants.Text.TEXT_CHARAT_MUTATOR_MIXIN,Blockly.Constants.Text.TEXT_CHARAT_EXTENSION),Blockly.Constants.Variables={},Blockly.Constants.Variables.HUE=330,Blockly.defineBlocksWithJsonArray([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,colour:"%{BKY_VARIABLES_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_get_reporter",message0:"%1",args0:[{type:"field_variable_getter",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,colour:"%{BKY_VARIABLES_HUE}",outputShape:Blockly.OUTPUT_SHAPE_ROUND,helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,colour:"%{BKY_VARIABLES_HUE}",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(e){if(!this.isInFlyout){if("variables_get"==this.type||"variables_get_reporter"==this.type)var t="variables_set",n=Blockly.Msg.VARIABLES_GET_CREATE_SET;else t="variables_get",n=Blockly.Msg.VARIABLES_SET_CREATE_GET;var o={enabled:0<this.workspace.remainingCapacity()},r=this.getField("VAR").getText();o.text=n.replace("%1",r),(n=goog.dom.createDom("field",null,r)).setAttribute("name","VAR"),(n=goog.dom.createDom("block",null,n)).setAttribute("type",t),o.callback=Blockly.ContextMenu.callbackFactory(this,n),e.push(o)}}},Blockly.Extensions.registerMixin("contextMenu_variableSetterGetter",Blockly.Constants.Variables.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),Blockly.Constants.VariablesDynamic={},Blockly.Constants.VariablesDynamic.HUE=310,Blockly.defineBlocksWithJsonArray([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,colour:"%{BKY_VARIABLES_DYNAMIC_HUE}",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,colour:"%{BKY_VARIABLES_DYNAMIC_HUE}",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),Blockly.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN={customContextMenu:function(e){if(!this.isInFlyout){if("variables_get_dynamic"==this.type)var t="variables_set_dynamic",n=Blockly.Msg.VARIABLES_GET_CREATE_SET;else t="variables_get_dynamic",n=Blockly.Msg.VARIABLES_SET_CREATE_GET;var o={enabled:0<this.workspace.remainingCapacity()},r=this.getField("VAR").getText();o.text=n.replace("%1",r),(n=goog.dom.createDom("field",null,r)).setAttribute("name","VAR"),(n=goog.dom.createDom("block",null,n)).setAttribute("type",t),o.callback=Blockly.ContextMenu.callbackFactory(this,n),e.push(o)}},onchange:function(){var e=this.getField("VAR").getText();e=this.workspace.getVariableById(e),"variables_get_dynamic"==this.type?this.outputConnection.setCheck(e.type):this.getInput("VALUE").connection.setCheck(e.type)}},Blockly.Extensions.registerMixin("contextMenu_variableDynamicSetterGetter",Blockly.Constants.VariablesDynamic.CUSTOM_CONTEXT_MENU_VARIABLE_GETTER_SETTER_MIXIN),goog.provide("Blockly.Msg.en"),goog.require("Blockly.Msg"),Blockly.Msg.ADD_COMMENT="Add Comment",Blockly.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",Blockly.Msg.CHANGE_VALUE_TITLE="Change value:",Blockly.Msg.CLEAN_UP="Clean up Blocks",Blockly.Msg.COLLAPSE_ALL="Collapse Blocks",Blockly.Msg.COLLAPSE_BLOCK="Collapse Block",Blockly.Msg.COLOUR_BLEND_COLOUR1="colour 1",Blockly.Msg.COLOUR_BLEND_COLOUR2="colour 2",Blockly.Msg.COLOUR_BLEND_HELPURL="http://meyerweb.com/eric/tools/color-blend/",Blockly.Msg.COLOUR_BLEND_RATIO="ratio",Blockly.Msg.COLOUR_BLEND_TITLE="blend",Blockly.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",Blockly.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",Blockly.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",Blockly.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",Blockly.Msg.COLOUR_RANDOM_TITLE="random colour",Blockly.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",Blockly.Msg.COLOUR_RGB_BLUE="blue",Blockly.Msg.COLOUR_RGB_GREEN="green",Blockly.Msg.COLOUR_RGB_HELPURL="http://www.december.com/html/spec/colorper.html",Blockly.Msg.COLOUR_RGB_RED="red",Blockly.Msg.COLOUR_RGB_TITLE="colour with",Blockly.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",Blockly.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",Blockly.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",Blockly.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",Blockly.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",Blockly.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",Blockly.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",Blockly.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",Blockly.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",Blockly.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",Blockly.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",Blockly.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",Blockly.Msg.CONTROLS_IF_MSG_ELSE="else",Blockly.Msg.CONTROLS_IF_MSG_ELSEIF="else if",Blockly.Msg.CONTROLS_IF_MSG_IF="if",Blockly.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",Blockly.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",Blockly.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",Blockly.Msg.CONTROLS_REPEAT_INPUT_DO="do",Blockly.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",Blockly.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",Blockly.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",Blockly.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",Blockly.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",Blockly.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",Blockly.Msg.DELETE_BLOCK="Delete Block",Blockly.Msg.DELETE_VARIABLE="Delete the '%1' variable",Blockly.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",Blockly.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",Blockly.Msg.DISABLE_BLOCK="Disable Block",Blockly.Msg.DUPLICATE_BLOCK="Duplicate",Blockly.Msg.DUPLICATE_COMMENT="Duplicate Comment",Blockly.Msg.ENABLE_BLOCK="Enable Block",Blockly.Msg.EXPAND_ALL="Expand Blocks",Blockly.Msg.EXPAND_BLOCK="Expand Block",Blockly.Msg.EXTERNAL_INPUTS="External Inputs",Blockly.Msg.HELP="Help",Blockly.Msg.INLINE_INPUTS="Inline Inputs",Blockly.Msg.IOS_CANCEL="Cancel",Blockly.Msg.IOS_ERROR="Error",Blockly.Msg.IOS_OK="OK",Blockly.Msg.IOS_PROCEDURES_ADD_INPUT="+ Add Input",Blockly.Msg.IOS_PROCEDURES_ALLOW_STATEMENTS="Allow statements",Blockly.Msg.IOS_PROCEDURES_DUPLICATE_INPUTS_ERROR="This function has duplicate inputs.",Blockly.Msg.IOS_PROCEDURES_INPUTS="INPUTS",Blockly.Msg.IOS_VARIABLES_ADD_BUTTON="Add",Blockly.Msg.IOS_VARIABLES_ADD_VARIABLE="+ Add Variable",Blockly.Msg.IOS_VARIABLES_DELETE_BUTTON="Delete",Blockly.Msg.IOS_VARIABLES_EMPTY_NAME_ERROR="You can't use an empty variable name.",Blockly.Msg.IOS_VARIABLES_RENAME_BUTTON="Rename",Blockly.Msg.IOS_VARIABLES_VARIABLE_NAME="Variable name",Blockly.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",Blockly.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",Blockly.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",Blockly.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",Blockly.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",Blockly.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",Blockly.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",Blockly.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",Blockly.Msg.LISTS_GET_INDEX_FIRST="first",Blockly.Msg.LISTS_GET_INDEX_FROM_END="# from end",Blockly.Msg.LISTS_GET_INDEX_FROM_START="#",Blockly.Msg.LISTS_GET_INDEX_GET="get",Blockly.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",Blockly.Msg.LISTS_GET_INDEX_LAST="last",Blockly.Msg.LISTS_GET_INDEX_RANDOM="random",Blockly.Msg.LISTS_GET_INDEX_REMOVE="remove",Blockly.Msg.LISTS_GET_INDEX_TAIL="",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",Blockly.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",Blockly.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",Blockly.Msg.LISTS_GET_SUBLIST_END_LAST="to last",Blockly.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",Blockly.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",Blockly.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",Blockly.Msg.LISTS_GET_SUBLIST_TAIL="",Blockly.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",Blockly.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",Blockly.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",Blockly.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",Blockly.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",Blockly.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",Blockly.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",Blockly.Msg.LISTS_INLIST="in list",Blockly.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",Blockly.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",Blockly.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",Blockly.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",Blockly.Msg.LISTS_LENGTH_TITLE="length of %1",Blockly.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",Blockly.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",Blockly.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",Blockly.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",Blockly.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",Blockly.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",Blockly.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",Blockly.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",Blockly.Msg.LISTS_SET_INDEX_INPUT_TO="as",Blockly.Msg.LISTS_SET_INDEX_INSERT="insert at",Blockly.Msg.LISTS_SET_INDEX_SET="set",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",Blockly.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",Blockly.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",Blockly.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",Blockly.Msg.LISTS_SORT_ORDER_DESCENDING="descending",Blockly.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",Blockly.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",Blockly.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",Blockly.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",Blockly.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",Blockly.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",Blockly.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",Blockly.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",Blockly.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",Blockly.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",Blockly.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",Blockly.Msg.LOGIC_BOOLEAN_FALSE="false",Blockly.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",Blockly.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",Blockly.Msg.LOGIC_BOOLEAN_TRUE="true",Blockly.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",Blockly.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",Blockly.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",Blockly.Msg.LOGIC_NEGATE_TITLE="not %1",Blockly.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",Blockly.Msg.LOGIC_NULL="null",Blockly.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",Blockly.Msg.LOGIC_NULL_TOOLTIP="Returns null.",Blockly.Msg.LOGIC_OPERATION_AND="and",Blockly.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",Blockly.Msg.LOGIC_OPERATION_OR="or",Blockly.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",Blockly.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",Blockly.Msg.LOGIC_TERNARY_CONDITION="test",Blockly.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",Blockly.Msg.LOGIC_TERNARY_IF_FALSE="if false",Blockly.Msg.LOGIC_TERNARY_IF_TRUE="if true",Blockly.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",Blockly.Msg.MATH_ADDITION_SYMBOL="+",Blockly.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",Blockly.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",Blockly.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",Blockly.Msg.MATH_CHANGE_TITLE="change %1 by %2",Blockly.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",Blockly.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",Blockly.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",Blockly.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",Blockly.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",Blockly.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",Blockly.Msg.MATH_DIVISION_SYMBOL="",Blockly.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",Blockly.Msg.MATH_IS_EVEN="is even",Blockly.Msg.MATH_IS_NEGATIVE="is negative",Blockly.Msg.MATH_IS_ODD="is odd",Blockly.Msg.MATH_IS_POSITIVE="is positive",Blockly.Msg.MATH_IS_PRIME="is prime",Blockly.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",Blockly.Msg.MATH_IS_WHOLE="is whole",Blockly.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",Blockly.Msg.MATH_MODULO_TITLE="remainder of %1  %2",Blockly.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",Blockly.Msg.MATH_MULTIPLICATION_SYMBOL="",Blockly.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",Blockly.Msg.MATH_NUMBER_TOOLTIP="A number.",Blockly.Msg.MATH_ONLIST_HELPURL="",Blockly.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",Blockly.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",Blockly.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",Blockly.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",Blockly.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",Blockly.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",Blockly.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",Blockly.Msg.MATH_POWER_SYMBOL="^",Blockly.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",Blockly.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",Blockly.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",Blockly.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",Blockly.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",Blockly.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",Blockly.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",Blockly.Msg.MATH_ROUND_OPERATOR_ROUND="round",Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",Blockly.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",Blockly.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",Blockly.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",Blockly.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",Blockly.Msg.MATH_SINGLE_OP_ROOT="square root",Blockly.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",Blockly.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",Blockly.Msg.MATH_SUBTRACTION_SYMBOL="-",Blockly.Msg.MATH_TRIG_ACOS="acos",Blockly.Msg.MATH_TRIG_ASIN="asin",Blockly.Msg.MATH_TRIG_ATAN="atan",Blockly.Msg.MATH_TRIG_COS="cos",Blockly.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",Blockly.Msg.MATH_TRIG_SIN="sin",Blockly.Msg.MATH_TRIG_TAN="tan",Blockly.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",Blockly.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",Blockly.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",Blockly.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",Blockly.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",Blockly.Msg.NEW_NUMBER_VARIABLE="Create number variable...",Blockly.Msg.NEW_STRING_VARIABLE="Create string variable...",Blockly.Msg.NEW_VARIABLE="Create variable...",Blockly.Msg.NEW_VARIABLE_TITLE="New variable name:",Blockly.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",Blockly.Msg.ORDINAL_NUMBER_SUFFIX="",Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",Blockly.Msg.PROCEDURES_BEFORE_PARAMS="with:",Blockly.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",Blockly.Msg.PROCEDURES_CREATE_DO="Create '%1'",Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",Blockly.Msg.PROCEDURES_DEFNORETURN_DO="",Blockly.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE="to",Blockly.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",Blockly.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",Blockly.Msg.PROCEDURES_DEFRETURN_RETURN="return",Blockly.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",Blockly.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",Blockly.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",Blockly.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",Blockly.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",Blockly.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",Blockly.Msg.REDO="Redo",Blockly.Msg.REMOVE_COMMENT="Remove Comment",Blockly.Msg.RENAME_VARIABLE="Rename variable...",Blockly.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",Blockly.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",Blockly.Msg.TEXT_APPEND_TITLE="to %1 append text %2",Blockly.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",Blockly.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",Blockly.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",Blockly.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",Blockly.Msg.TEXT_CHARAT_FIRST="get first letter",Blockly.Msg.TEXT_CHARAT_FROM_END="get letter # from end",Blockly.Msg.TEXT_CHARAT_FROM_START="get letter #",Blockly.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",Blockly.Msg.TEXT_CHARAT_LAST="get last letter",Blockly.Msg.TEXT_CHARAT_RANDOM="get random letter",Blockly.Msg.TEXT_CHARAT_TAIL="",Blockly.Msg.TEXT_CHARAT_TITLE="in text %1 %2",Blockly.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",Blockly.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",Blockly.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",Blockly.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",Blockly.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",Blockly.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",Blockly.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",Blockly.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",Blockly.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",Blockly.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",Blockly.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",Blockly.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",Blockly.Msg.TEXT_GET_SUBSTRING_TAIL="",Blockly.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",Blockly.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",Blockly.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",Blockly.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",Blockly.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",Blockly.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",Blockly.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",Blockly.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",Blockly.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",Blockly.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",Blockly.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",Blockly.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",Blockly.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",Blockly.Msg.TEXT_LENGTH_TITLE="length of %1",Blockly.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",Blockly.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",Blockly.Msg.TEXT_PRINT_TITLE="print %1",Blockly.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",Blockly.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",Blockly.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",Blockly.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",Blockly.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",Blockly.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",Blockly.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",Blockly.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",Blockly.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",Blockly.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",Blockly.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",Blockly.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",Blockly.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",Blockly.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",Blockly.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",Blockly.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",Blockly.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",Blockly.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",Blockly.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",Blockly.Msg.TODAY="Today",Blockly.Msg.UNDO="Undo",Blockly.Msg.VARIABLES_DEFAULT_NAME="item",Blockly.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",Blockly.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",Blockly.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",Blockly.Msg.VARIABLES_SET="set %1 to %2",Blockly.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",Blockly.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",Blockly.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",Blockly.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",Blockly.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",Blockly.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",Blockly.Msg.PROCEDURES_DEFRETURN_TITLE=Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE,Blockly.Msg.CONTROLS_IF_IF_TITLE_IF=Blockly.Msg.CONTROLS_IF_MSG_IF,Blockly.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_IF_MSG_THEN=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=Blockly.Msg.CONTROLS_IF_MSG_ELSE,Blockly.Msg.PROCEDURES_DEFRETURN_PROCEDURE=Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,Blockly.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.MATH_CHANGE_TITLE_ITEM=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.PROCEDURES_DEFRETURN_DO=Blockly.Msg.PROCEDURES_DEFNORETURN_DO,Blockly.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=Blockly.Msg.CONTROLS_IF_MSG_ELSEIF,Blockly.Msg.LISTS_GET_INDEX_HELPURL=Blockly.Msg.LISTS_INDEX_OF_HELPURL,Blockly.Msg.CONTROLS_FOREACH_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.CONTROLS_FOR_INPUT_DO=Blockly.Msg.CONTROLS_REPEAT_INPUT_DO,Blockly.Msg.LISTS_CREATE_WITH_ITEM_TITLE=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.TEXT_APPEND_VARIABLE=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=Blockly.Msg.VARIABLES_DEFAULT_NAME,Blockly.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=Blockly.Msg.LISTS_INLIST,Blockly.Msg.PROCEDURES_DEFRETURN_COMMENT=Blockly.Msg.PROCEDURES_DEFNORETURN_COMMENT,Blockly.Msg.MATH_HUE="230",Blockly.Msg.LOOPS_HUE="120",Blockly.Msg.LISTS_HUE="260",Blockly.Msg.LOGIC_HUE="210",Blockly.Msg.VARIABLES_HUE="330",Blockly.Msg.TEXTS_HUE="160",Blockly.Msg.PROCEDURES_HUE="290",Blockly.Msg.COLOUR_HUE="20",Blockly.Msg.VARIABLES_DYNAMIC_HUE="310";var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),iface,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxt,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly;!function(_e){!function(Y){function o(e,t){return _e.worker.getWorker(_e.webConfig.workerjs).opAsync(e,t)}Y.workerOpAsync=o;var s={},w=50;function O(e,t){e.push.apply(e,t)}function X(e){if(!e)throw new Error("Assertion failure")}var t=function(e,t,n,o){this.link=e,this.type=t,this.parentType=n,this.childType=o};function J(e){return e.link?J(e.link):e}function d(e,t){var n=J(e),o=J(t);if(X(null==n.link&&null==o.link),n!=o){if(n.childType&&o.childType){var r=n.childType;n.childType=null,d(r,o.childType)}else n.childType&&!o.childType&&(o.childType=n.childType);if(n.parentType&&o.parentType){var i=n.parentType;n.parentType=null,d(i,o.parentType)}else n.parentType&&!o.parentType&&(o.parentType=n.parentType);var a=function(e,t){{if(null==e||"Array"===e&&m(t))return t;if(null==t||"Array"===t&&m(e))return e;if(e==t)return e;throw new Error("cannot mix "+e+" with "+t)}}(n.type,o.type);e.link=o,n.link=o,e.type=null,t.type=a}}function R(e){return new t(null,e)}Y.Point=t;var _=R("number"),q=R("boolean"),Z=R("string"),f=R("void");function h(e){if(!e)return R(e);switch(e.toLowerCase()){case"number":return _;case"boolean":return q;case"string":return Z;case"void":return f;default:return R(e)}}function $(e,t){if(X(null!=t),"placeholder"==t.type||t.type===pxtc.TS_OUTPUT_TYPE)return J(t.p);if("variables_get"==t.type)return J(ie(e,ae(t.getField("VAR").getText(),e)).type);if(!t.outputConnection)return h(f.type);var n=t.outputConnection.check_&&t.outputConnection.check_.length?t.outputConnection.check_[0]:"T";if("Array"===n){if(1<t.outputConnection.check_.length)return h(t.outputConnection.check_[1]);var o=void 0;if(t.inputList&&t.inputList.length)for(var r=0,i=t.inputList;r<i.length;r++){var a=i[r];if(a.connection&&a.connection.targetBlock()){var s=J($(e,a.connection.targetBlock()));if(s){if(s.parentType)return s.parentType;b(o=h(s.type+"[]"),s);break}}}return o||h("Array")}if("T"===n){var l=e.stdCallTable[t.type],c="lists_index_get"===t.type;if(c||l&&l.comp.thisParameter){var u=void 0;if((u=c?t.inputList.filter(function(e){return"LIST"===e.name})[0]:t.inputList.filter(function(e){return e.name===l.comp.thisParameter.definitionName})[0]).connection&&u.connection.targetBlock()){var g=$(e,u.connection.targetBlock());if(g.childType)return g.childType;var p=m(g.type)?R(g.type.substr(-2)):R(null);return b(g,p),p}}return R(null)}return h(n)}function m(e){return e&&-1!==e.indexOf("[]")}function y(e,t,n,o){var r,i,a=t.getInputTargetBlock(n);a?a.type!==pxtc.TS_OUTPUT_TYPE||a.p||(a.p=R(null)):(s[t.id]||(s[t.id]={}),s[t.id][n]||(s[t.id][n]=(r=e,i=t,{type:"placeholder",p:R(o||null),workspace:r.workspace,parentBlock_:i})))}function L(e){return"pxt_controls_for"==e.type||"pxt_controls_for_of"==e.type?Q(e,"VAR"):e}function Q(e,t){var n=e.getInputTargetBlock(t);return n||s[e.id]&&s[e.id][t]}function l(){s={}}function v(e,t,n,o){y(e,t,n);try{d($(e,Q(t,n)),o)}catch(e){}}function c(u,e){function g(e){return e.name?e.connection&&e.connection.check_&&e.connection.check_.length?e.connection.check_[0]:"T":void 0}function p(e,t){var n=e.inputList.filter(function(e){return"T"===g(e)});if(n.length){var o=Q(e,n[0].name);if(o){var r=$(u,o),i=r.type?h($(u,o).type+"[]"):h(null);return b(i,r),v(u,e,t,i),!0}}return!1}e&&e.getAllBlocks().filter(function(e){return!e.disabled}).forEach(function(a){try{switch(a.type){case"math_op2":v(u,a,"x",h(_.type)),v(u,a,"y",h(_.type));break;case"math_op3":v(u,a,"x",h(_.type));break;case"math_arithmetic":case"logic_compare":switch(a.getFieldValue("OP")){case"ADD":case"MINUS":case"MULTIPLY":case"DIVIDE":case"LT":case"LTE":case"GT":case"GTE":case"POWER":v(u,a,"A",h(_.type)),v(u,a,"B",h(_.type));break;case"AND":case"OR":y(u,a,"A",q.type),y(u,a,"B",q.type);break;case"EQ":case"NEQ":y(u,a,"A"),y(u,a,"B");var e=$(u,Q(a,"A")),t=$(u,Q(a,"B"));try{d(e,t)}catch(e){}}break;case"logic_operation":y(u,a,"A",q.type),y(u,a,"B",q.type);break;case"logic_negate":y(u,a,"BOOL",q.type);break;case"controls_if":for(var n=0;n<=a.elseifCount_;++n)y(u,a,"IF"+n,q.type);break;case"pxt_controls_for":case"controls_simple_for":v(u,a,"TO",h(_.type));break;case"pxt_controls_for_of":case"controls_for_of":v(u,a,"LIST",h("Array")),b($(u,Q(a,"LIST")),ie(u,ae(L(a).getField("VAR").getText(),u)).type);break;case"variables_set":case"variables_change":var o=ae(a.getField("VAR").getText(),u),r=ie(u,o).type;y(u,a,"VALUE");var i=Q(a,"VALUE");if(i){var s=$(u,i);try{d(r,s)}catch(e){}}break;case"controls_repeat_ext":v(u,a,"TIMES",h(_.type));break;case"device_while":y(u,a,"COND",q.type);break;case"lists_index_get":v(u,a,"LIST",h("Array")),v(u,a,"INDEX",h(_.type)),b($(u,Q(a,"LIST")),$(u,a));break;case"lists_index_set":v(u,a,"LIST",h("Array")),y(u,a,"VALUE"),p(a,"LIST"),v(u,a,"INDEX",h(_.type));break;case pxtc.PAUSE_UNTIL_TYPE:v(u,a,"PREDICATE",q);break;default:if(a.type in u.stdCallTable){var l=u.stdCallTable[a.type];de(l,pe(a)).forEach(function(t,e){var n=l.isExtensionMethod&&0===e;if(t.definitionName&&!a.getFieldValue(t.definitionName)){var o=a.inputList.filter(function(e){return e.name==t.definitionName})[0];if(o.connection&&o.connection.check_){if(n&&"Array"===g(o))if(p(a,t.definitionName))return;for(var r=0;r<o.connection.check_.length;r++)try{var i=o.connection.check_[r];v(u,a,t.definitionName,h(i));break}catch(e){}}}})}}}catch(e){var c=e.block||a;c.setWarningText(e+""),u.errors.push(c)}}),u.bindings.forEach(function(e){null==k(e.type).type&&d(e.type,h(_.type))})}function b(e,t){var n=J(e),o=J(t);n.childType?d(n.childType,o):n.childType=o,o.parentType?d(o.parentType,n):o.parentType=n}function k(e,t){void 0===t&&(t=[]);var n=J(e);if(-1===t.indexOf(n)&&(t.push(n),!n.type||"Array"===n.type)){if(n.parentType){var o=k(n.parentType,t);if(o.type&&"Array"!==o.type)return n.type=o.type.substr(0,o.type.length-2),n}if(n.childType){var r=k(n.childType,t);if(r.type)return n.type=r.type+"[]",n}}return n}function P(e){var t,n,o=e.getFieldValue("math_number_minmax"===e.type?"SLIDER":"NUM"),r=parseFloat(o);return t=r,n=e,isFinite(t)&&!isNaN(t)||function(e,t){var n=new Error(e);throw n.block=t,n}(lf("Number entered is either too large or too small"),n),r}function ee(e,t,n){return Y.H.mkNumberLiteral(P(t))}var te,e,ne={ADD:"+",MINUS:"-",MULTIPLY:"*",DIVIDE:"/",LT:"<",LTE:"<=",GT:">",GTE:">=",AND:"&&",OR:"||",EQ:"==",NEQ:"!=",POWER:"**"};function u(e){var t=e.getContent();return Y.Helpers.mkMultiComment(t.trim())}function oe(e){if(null==e.type&&(d(e,h(_.type)),e=J(e)),m(e.type))return Y.mkText("[]");switch(e.type){case"boolean":return Y.H.mkBooleanLiteral(!1);case"number":return Y.H.mkNumberLiteral(0);case"string":return Y.H.mkStringLiteral("");default:return Y.mkText("null")}}function re(t,n,o){var e,r,i,a,s,l,c,u,g,p,d,_,f,h,m,y,v,b,k,T,E,S,C,x,A,D,B,I,N,w,O,R,L,P,M,F,U,H,G,V,W;if(X(null!=n),t.stats[n.type]=(t.stats[n.type]||0)+1,ge(n,o),n.disabled||"placeholder"==n.type)if("Array"===J($(t,n)).type){var K="lists_index_get"===n.parentBlock_.type;if(!K)K=(j=t.stdCallTable[n.parentBlock_.type])&&j.isExpression;var z=Y.mkText("[0]");e=K?z:ue(z)}else e=oe($(t,n));else switch(n.type){case"math_number":case"math_integer":case"math_whole_number":case"math_number_minmax":e=ee(0,n);break;case"math_op2":F=t,H=o,G=(U=n).getFieldValue("op"),V=re(F,Q(U,"x"),H),W=re(F,Q(U,"y"),H),e=Y.H.mathCall(G,[V,W]);break;case"math_op3":P=o,M=re(t,Q(n,"x"),P),e=Y.H.mathCall("abs",[M]);break;case"math_arithmetic":case"logic_compare":case"logic_operation":e=function(e,t,n){var o=t.getFieldValue("OP"),r=Q(t,"A"),i=Q(t,"B"),a=[re(e,r,n),re(e,i,n)],s=$(e,r).type;if(s==Z.type){if("EQ"==o)return Y.H.mkSimpleCall("==",a);if("NEQ"==o)return Y.H.mkSimpleCall("!=",a)}else if(s==q.type)return Y.H.mkSimpleCall(ne[o],a);return X(o in ne),Y.H.mkSimpleCall(ne[o],a)}(t,n,o);break;case"math_modulo":I=t,w=o,O=Q(N=n,"DIVIDEND"),R=Q(N,"DIVISOR"),L=[re(I,O,w),re(I,R,w)],e=Y.H.mkSimpleCall("%",L);break;case"logic_boolean":B=n,e=Y.H.mkBooleanLiteral("TRUE"==B.getFieldValue("BOOL"));break;case"logic_negate":A=o,D=re(t,Q(n,"BOOL"),A),e=Y.mkPrefix("!",[Y.H.mkParenthesizedExpression(D)]);break;case"variables_get":e=function(e,t){var n=ae(t.getField("VAR").getText(),e),o=ie(e,n);o.assigned||(o.assigned=te.Read);return X(null!=o&&null!=o.type),Y.mkText(n)}(t,n);break;case"text":x=n,e=Y.H.mkStringLiteral(x.getFieldValue("TEXT"));break;case"text_join":e=function(e,t,n){for(var o,r=0;;){var i=Q(t,"ADD"+r);if(r++,!i){if(r<t.inputList.length)continue;break}var a=re(e,i,n);o=o?Y.H.mkSimpleCall("+",[o,a]):0===i.type.indexOf("text")?a:Y.H.mkSimpleCall("+",[Y.H.mkStringLiteral(""),a])}return o||Y.H.mkStringLiteral("")}(t,n,o);break;case"lists_create_with":E=t,S=o,C=n.inputList.map(function(e){return e.connection&&e.connection.targetBlock()?re(E,e.connection.targetBlock(),S):void 0}).filter(function(e){return!!e}),e=Y.H.mkArrayLiteral(C);break;case"lists_index_get":b=o,k=re(y=t,Q(v=n,"LIST"),b),T=re(y,Q(v,"INDEX"),b),e=Y.mkGroup([k,Y.mkText("["),T,Y.mkText("]")]);break;case"lists_index_set":u=t,p=o,d=Q(g=n,"LIST"),_=re(u,d,p),f=re(u,Q(g,"INDEX"),p),h=re(u,Q(g,"VALUE"),p),m=Y.mkGroup([_,Y.mkText("["),f,Y.mkText("] = "),h]),e="lists_create_with"===d.type?ue(m):m;break;case"math_js_op":i=t,s=o,l=(a=n).getFieldValue("OP"),c=[re(i,Q(a,"ARG0"),s)],a.getInput("ARG1")&&c.push(re(i,Q(a,"ARG1"),s)),e=Y.H.mathCall(l,c);break;case pxtc.TS_OUTPUT_TYPE:r=n,e=Y.mkText(r.getFieldValue("EXPRESSION").trim());break;default:var j;(j=t.stdCallTable[n.type])?e=j.imageLiteral?ce(t,n,j.imageLiteral,j.namespace,j.f,de(j,pe(n)).map(function(e){return se(t,n,e,o)})):le(t,n,j,o):(_e.reportError("blocks","unable to compile expression",{details:n.type}),e=oe($(t,n)))}return e.id=n.id,e}function g(e,t,n){return X(null==ie(e,t)),{workspace:e.workspace,bindings:[{name:t,type:h(n),declaredInLocalScope:0}].concat(e.bindings),stdCallTable:e.stdCallTable,errors:e.errors,renames:e.renames,stats:e.stats}}function ie(e,t){for(var n=0;n<e.bindings.length;++n)if(e.bindings[n].name==t)return e.bindings[n];return null}function ae(e,t,n){if(void 0===n&&(n=!1),!e)return"_";if(n){if(t.renames.oldToNewFunctions[e])return t.renames.oldToNewFunctions[e]}else if(t.renames.oldToNew[e])return t.renames.oldToNew[e];var o=ts.pxtc.escapeIdentifier(e);if(t.renames.takenNames[o]){for(var r=2;t.renames.takenNames[o+r];)r++;o+=r}return n?t.renames.oldToNewFunctions[e]=o:t.renames.oldToNew[e]=o,t.renames.takenNames[o]=!0,o}function r(e,t){return de(e,pe(t)).map(function(e){return e.definitionName}).filter(function(e){return!!e})}function M(t,n,o){var e=t.stdCallTable[n.type];return e.imageLiteral?Y.mkStmt(ce(t,n,e.imageLiteral,e.namespace,e.f,de(e,pe(n)).map(function(e){return se(t,n,e,o)}))):e.hasHandler?function(t,n,e,o,r,i){var a,s=o.map(function(e){return F(t,n,e,i)}),l=Q(n,"HANDLER"),c=H(t,l);_e.appTarget.compile&&_e.appTarget.compile.emptyEventHandlerComments&&0===c.children.length&&c.children.unshift(Y.mkStmt(Y.mkText("// "+pxtc.HANDLER_COMMENT)));if(T(n)&&n.mutation.getMutationType()===Y.MutatorTypes.ObjectDestructuringMutator)a=n.mutation.compileMutation(t,i);else if(e.comp.handlerArgs.length){var u=A(n,e,t);a=Y.mkText("function ("+u.join(", ")+")")}return p(t,r,e.f,s,c,a,e.isExtensionMethod)}(t,n,e,r(e,n),e.namespace,o):Y.mkStmt(le(t,n,e,o))}function se(e,t,n,o,r){void 0===r&&(r=!1);var i=t.getFieldValue(n.definitionName);if(null!=i)return t.getField(n.definitionName)instanceof pxtblockly.FieldTextInput?Y.H.mkStringLiteral(i):Y.mkText(i);y(e,t,n.definitionName);var a=Q(t,n.definitionName);return r&&"lists_create_with"===a.type?ue(re(e,a,o)):n.shadowOptions&&n.shadowOptions.toString&&$(e,a)!==Z?Y.H.mkSimpleCall("+",[Y.H.mkStringLiteral(""),re(e,a,o)]):re(e,a,o)}function le(n,o,r,i){var e;e=T(o)&&o.mutation.getMutationType()===Y.MutatorTypes.RestParameterMutator?o.mutation.compileMutation(n,i).children:de(r,pe(o)).map(function(e,t){return se(n,o,e,i,r.isExtensionMethod&&0===t&&!r.isExpression)});var t=!o.getInputsInline();if(r.isIdentity)return e[0];if(r.property)return Y.H.mkPropertyAccess(r.f,e[0]);if("@get@"==r.f)return Y.H.mkPropertyAccess(e[1].op.replace(/.*\./,""),e[0]);if("@set@"==r.f)return Y.H.mkAssign(Y.H.mkPropertyAccess(e[1].op.replace(/.*\./,"").replace(/@set/,""),e[0]),e[2]);if("@change@"==r.f)return Y.H.mkSimpleCall("+=",[Y.H.mkPropertyAccess(e[1].op.replace(/.*\./,"").replace(/@set/,""),e[0]),e[2]]);if(r.isExtensionMethod){if(r.attrs.defaultInstance){var a=void 0;T(o)&&o.mutation.getMutationType()===Y.MutatorTypes.DefaultInstanceMutator&&(a=o.mutation.compileMutation(n,i)),a?e.unshift(a):e.unshift(Y.mkText(r.attrs.defaultInstance))}return Y.H.extensionCall(r.f,e,t)}return r.namespace?Y.H.namespaceCall(r.namespace,r.f,e,t):Y.H.stdCall(r.f,e,t)}function p(e,t,n,o,r,i,a){var s;return void 0===a&&(a=!1),r.noFinalNewline=!0,s=i?Y.mkGroup([i,r]):Y.mkGroup([Y.mkText("function ()"),r]),a?Y.mkStmt(Y.H.extensionCall(n,o.concat([s]),!1)):t?Y.mkStmt(Y.H.namespaceCall(t,n,o.concat([s]),!1)):Y.mkStmt(Y.H.mkCall(n,o.concat([s]),!1))}function F(e,t,n,o){var r=Q(t,n);return r?re(e,r,o):t.getField(n)instanceof pxtblockly.FieldTextInput?Y.H.mkStringLiteral(t.getFieldValue(n)):Y.mkText(t.getFieldValue(n))}function U(e,t){var n=H(e,Q(t,"HANDLER"));return _e.appTarget.compile&&_e.appTarget.compile.onStartText&&n&&n.children&&n.children.unshift(Y.mkStmt(Y.mkText("// "+pxtc.ON_START_COMMENT+"\n"))),n}function T(e){return!!e.mutation}function ce(e,t,n,o,r,i){i=void 0===i?[]:i;var a="\n",s=5*n,l=t.getFieldValue("LEDS");l=l.replace(/[ `\n]+/g,"");for(var c=0;c<5;++c){for(var u=0;u<s;++u)0<u&&(a+=" "),a+="#"===l[c*s+u]?"#":".";a+="\n"}var g=Y.H.mkStringLiteral(a);return g.canIndentInside=!0,Y.H.namespaceCall(o,r,[g].concat(i),!1)}function i(e,t){var n,o,r,i,a,s,l,c,u,g,p,d,_,f,h,m,y,v,b,k,T,E,S,C,x,A,D,B,I=[];switch(e.stats[t.type]=(e.stats[t.type]||0)+1,ge(t,I),t.type){case"controls_if":n=function(e,t,n){for(var o=[],r=0;r<=t.elseifCount_;++r){var i=re(e,Q(t,"IF"+r),n),a=H(e,Q(t,"DO"+r)),s=Y.mkText("if (");0<r&&((s=Y.mkText("else if (")).glueToBlock=Y.GlueMode.WithSpace),O(o,[s,i,Y.mkText(")"),a])}if(t.elseCount_){var l=Y.mkText("else");l.glueToBlock=Y.GlueMode.WithSpace,O(o,[l,H(e,Q(t,"ELSE"))])}return o}(e,t,I);break;case"pxt_controls_for":case"controls_for":case"controls_simple_for":k=e,E=I,S=ae(L(T=t).getField("VAR").getText(),k),C=Q(T,"TO"),x=Q(T,"DO"),A=Q(T,"BY"),D=Q(T,"FROM"),B=!A||A.type.match(/^math_number/)&&1==P(A),X(0<ie(k,S).declaredInLocalScope),n=[Y.mkText("for (let "+S+" = "),D?re(k,D,E):Y.mkText("0"),Y.mkText("; "),Y.mkInfix(Y.mkText(S),"<=",re(k,C,E)),Y.mkText("; "),B?Y.mkText(S+"++"):Y.mkInfix(Y.mkText(S),"+=",re(k,A,E)),Y.mkText(")"),H(k,x)];break;case"pxt_controls_for_of":case"controls_for_of":f=e,m=I,y=ae(L(h=t).getField("VAR").getText(),f),v=Q(h,"LIST"),b=Q(h,"DO"),X(0<ie(f,y).declaredInLocalScope),n=[Y.mkText("for (let "+y+" of "),re(f,v,m),Y.mkText(")"),H(f,b)];break;case"variables_set":n=[function(e,t,n){var o=ae(t.getField("VAR").getText(),e),r=Q(t,"VALUE"),i=ie(e,o),a=!1;i.assigned||(t.getSurroundParent()?i.assigned=te.Read:(i.assigned=te.Assign,a=!0));var s=re(e,r,n);return Y.mkStmt(Y.mkText(a?"let ":""),Y.mkText(o+" = "),s)}(e,t,I)];break;case"variables_change":n=[function(e,t,n){var o=ae(t.getField("VAR").getText(),e),r=Q(t,"VALUE"),i=ie(e,o);i.assigned||(i.assigned=te.Read);var a=re(e,r,n),s=Y.mkText(o);return Y.mkStmt(Y.mkInfix(s,"+=",a))}(e,t,I)];break;case"controls_repeat_ext":n=function(e,t,n){for(var o=re(e,Q(t,"TIMES"),n),r=H(e,Q(t,"DO")),i="i",a=0;ie(e,i);a++)i="i"+a;return[Y.mkText("for (let "+i+" = 0; "),Y.mkInfix(Y.mkText(i),"<",o),Y.mkText("; "+i+"++)"),r]}(e,t,I);break;case"device_while":p=I,d=re(u=e,Q(g=t,"COND"),p),_=H(u,Q(g,"DO")),n=[Y.mkText("while ("),d,Y.mkText(")"),_];break;case"procedures_defnoreturn":a=e,l=ae((s=t).getFieldValue("NAME"),a,!0),c=Q(s,"STACK"),n=[Y.mkText("function "+l+"() "),H(a,c)];break;case"procedures_callnoreturn":n=[(o=e,r=t,i=ae(r.getFieldValue("NAME"),o,!0),Y.mkStmt(Y.mkText(i+"()")))];break;case ts.pxtc.ON_START_TYPE:n=U(e,t).children;break;case pxtc.TS_STATEMENT_TYPE:n=function(n,e){var t=[],o=0;for(;;){var r=e.getFieldValue("LINE"+o);if(o++,null===r)break;t.push(Y.mkText(r+"\n"));var i=e.declaredVariables;if(i){var a=i.split(",");a.forEach(function(e){var t=ie(n,e);t?(t.assigned=te.Assign,t.mustBeGlobal=!1):n.bindings.push({name:e,type:R(null),assigned:te.Assign,declaredInLocalScope:1,mustBeGlobal:!1})})}}return t}(e,t);break;case pxtc.PAUSE_UNTIL_TYPE:n=function(e,t,n){var o=_e.appTarget.runtime&&_e.appTarget.runtime.pauseUntilBlock;_e.Util.assert(!!o,"target has block enabled");var r=o.namespace,i=o.callName||"pauseUntil",a=F(e,t,"PREDICATE",n),s=[Y.mkGroup([Y.mkText("() => "),a])];return r?[Y.mkStmt(Y.H.namespaceCall(r,i,s,!1))]:[Y.mkStmt(Y.H.mkCall(i,s,!1,!1))]}(e,t,I);break;case pxtc.TS_DEBUGGER_TYPE:n=function(e,t){if("1"==t.getFieldValue("ON_OFF"))return[Y.mkText("debugger;\n")];return[]}(0,t);break;default:n=e.stdCallTable[t.type]?[M(e,t,I)]:[Y.mkStmt(re(e,t,I))]}var N=n[n.length-1];return N&&(N.id=t.id),I.length&&function(e,t){for(var n=[],o=[],r=0,i=e;r<i.length;r++)for(var a=i[r],s=0,l=a.split("\n");s<l.length;s++){var c=l[s];o.push(c)}for(var u=0;u<o.length;u++){for(var g=o[u].split(/\s/),p=void 0,d=0,_=g;d<_.length;d++){var f=_[d];p?p.length+f.length>w?(n.push(Y.mkText("// "+p)),n.push(Y.mkNewLine()),p=f):p+=" "+f:p=f}p&&(n.push(Y.mkText("// "+p)),n.push(Y.mkNewLine())),u!==o.length-1&&(n.push(Y.mkText("//")),n.push(Y.mkNewLine()))}for(var h=0,m=n.reverse();h<m.length;h++){var y=m[h];t.unshift(y)}}(I,n),n.forEach(function(e){(e.type===Y.NT.Block||e.type===Y.NT.Prefix&&_e.Util.startsWith(e.op,"//"))&&(e.id=t.id)}),n}function H(e,t){for(var n=[];t;)t.disabled||O(n,i(e,t)),t=t.getNextBlock();return Y.mkBlock(n)}function ue(e){var t=Y.mkStmt(Y.mkText(";"));return t.glueToBlock=Y.GlueMode.NoSpace,Y.mkGroup([t,e])}function a(e,n,t){var r={workspace:e,bindings:[],stdCallTable:{},errors:[],renames:{oldToNew:{},takenNames:{},oldToNewFunctions:{}},stats:{}};if(n&&(Object.keys(n.apis.byQName).forEach(function(e){var t=n.apis.byQName[e];t.kind===pxtc.SymbolKind.Enum&&(r.renames.takenNames[t.qName]=!0)}),n.blocks.forEach(function(e){if(r.stdCallTable[e.attributes.blockId])_e.reportError("blocks","function already defined",{details:e.attributes.blockId});else{r.renames.takenNames[e.namespace]=!0;var t=_e.blocks.compileInfo(e),n=!!t.thisParameter;r.stdCallTable[e.attributes.blockId]={namespace:e.namespace,f:e.name,comp:t,attrs:e.attributes,isExtensionMethod:n,isExpression:e.retType&&"void"!==e.retType,imageLiteral:e.attributes.imageLiteral,hasHandler:!!t.handlerArgs.length||e.parameters&&e.parameters.some(function(e){return"() => void"==e.type||!!e.properties}),property:!e.parameters,isIdentity:"TD_ID"==e.attributes.shim}}})),t)return r;var i=["controls_for","controls_simple_for","controls_for_of","pxt_controls_for","pxt_controls_for_of"],a=function(t,n){if(!t)return!1;if(0<i.filter(function(e){return e==t.type}).length&&ae(L(t).getField("VAR").getText(),r)==n)return!0;if(T(t)&&t.mutation.isDeclaredByMutation(n))return!0;var e=r.stdCallTable[t.type];if(e&&e.comp.handlerArgs.length){var o=!1;if(A(t,e,r).forEach(function(e){o||e===n&&(o=!0)}),o)return!0}return a(t.getSurroundParent(),n)};function s(e,t){null==ie(r,e)&&(r=g(r,e,t)),ie(r,e).declaredInLocalScope++,1<ie(r,e).declaredInLocalScope&&(ie(r,e).mustBeGlobal=!0)}return e&&e.getAllBlocks().filter(function(e){return!e.disabled}).forEach(function(t){if(0<i.filter(function(e){return e==t.type}).length){var e=ae(L(t).getField("VAR").getText(),r);"controls_for_of"==t.type?s(e,null):s(e,_.type)}else if(T(t)){var n=t.mutation.getDeclaredVariables();n&&Object.keys(n).forEach(function(e){s(ae(e,r),n[e])})}var o=r.stdCallTable[t.type];o&&o.comp.handlerArgs.length&&A(t,o,r).forEach(function(e,t){null!=e&&s(ae(e,r),o.comp.handlerArgs[t].type)})}),e&&e.getAllBlocks().filter(function(e){return!e.disabled}).forEach(function(e){if("variables_get"==e.type||"variables_set"==e.type||"variables_change"==e.type){var t=ae(e.getField("VAR").getText(),r);null==ie(r,t)&&(r=g(r,t,null));var n=ie(r,t);n.declaredInLocalScope&&!a(e,t)&&(n.mustBeGlobal=!0)}}),r}function E(e,t){if(e.type===ts.pxtc.ON_START_TYPE)return 0;var n=t.stdCallTable[e.type];return n&&n.attrs.afterOnStart?1:-1}function S(n,e,a){try{c(n,e);var o=[],t=e.getTopBlocks(!0).sort(function(e,t){return E(e,n)-E(t,n)});!function(r,e,t){e.forEach(function(e){return e.setDisabled(!1)});var o={};function i(e,t){var n=o[e];n?t.setDisabled(!0):(t.setDisabled(!1),o[e]=t)}t.forEach(function(e){var t=r.stdCallTable[e.type];if(e.type==ts.pxtc.ON_START_TYPE)i(ts.pxtc.ON_START_TYPE,e);else{if("procedures_defnoreturn"===e.type||t&&t.attrs.blockAllowMultiple&&!t.attrs.handlerStatement)return;if(t&&t.hasHandler&&!t.attrs.handlerStatement){var n=t.attrs.blockHandlerKey||C(r,e);i(n,e)}else for(var o=e;o;)o.setDisabled(!0),o=o.getNextBlock()}})}(n,e.getAllBlocks(),t);var r=function(e,t){if(!e.length||e.some(function(e){return!e.rendered}))return{orphans:t,idToComments:{}};for(var n=e.map(function(e){var t=e.getBoundingRectangle(),n=e.getHeightWidth();return{id:e.id,x:t.topLeft.x,y:t.topLeft.y,width:n.width,height:n.height}}),o={orphans:[],idToComments:{}},r=0,i=t;r<i.length;r++){for(var a=i[r],s=a.getBoundingRectangle(),l=a.getHeightWidth(),c=s.topLeft.x,u=s.topLeft.y,g=void 0,p=0,d=n;p<d.length;p++){var _=d[p];D(c,u,l.width,l.height,_)?g=_:!g&&D(c-20,u-20,l.width+40,l.height+40,_)&&(g=_)}g?(o.idToComments[g.id]||(o.idToComments[g.id]=[]),o.idToComments[g.id].push(a)):o.orphans.push(a)}return o}(t,e.getTopComments(!0));return r.orphans.forEach(function(e){return O(o,u(e).children)}),t.forEach(function(e){if(r.idToComments[e.id]&&r.idToComments[e.id].forEach(function(e){O(o,u(e).children)}),e.type==ts.pxtc.ON_START_TYPE)O(o,U(n,e).children);else{var t=H(n,e);t.type==Y.NT.Block?O(o,t.children):o.push(t)}}),n.bindings.filter(function(e){return!((t=e).declaredInLocalScope&&!t.mustBeGlobal)&&e.assigned!=te.Assign;var t}).map(function(e){var t,n=k(e.type),o="";if("null"==(t="Array"===n.type?Y.mkText("[]"):oe(n)).op||"[]"==t.op){var r=n.type;"Array"!==r&&"null[]"!==r||(r="number[]");var i=a.apis.byQName[r];i&&i.attributes.autoCreate?t=Y.mkText(i.attributes.autoCreate+"()"):o=": "+r}return Y.mkStmt(Y.mkText("let "+e.name+o+" = "),t)}).concat(o)}catch(e){var i=e.block;if(!i)throw e;i.setWarningText(e+""),n.errors.push(i)}finally{l()}return[]}function C(t,n){if(n.type==ts.pxtc.ON_START_TYPE)return JSON.stringify({name:ts.pxtc.ON_START_TYPE});var e=t.stdCallTable[n.type];if(e){var o=r(e,n).map(function(e){return F(t,n,e,[])});return JSON.stringify({name:e.f,ns:e.namespace,compiledArgs:o}).replace(/"id"\s*:\s*"[^"]+"/g,"")}}function x(e,t){var n=Y.flattenNode(t);return o("format",{format:{input:n.output,pos:1}}).then(function(){return{source:n.output,sourceMap:n.sourceMap,stats:e.stats}})}function ge(e,t){e.comment&&("string"==typeof e.comment?t.push(e.comment):t.push(e.comment.getText()))}function pe(e){if(e.mutationToDom){var t=e.mutationToDom();if(t.hasAttribute("_expanded")){var n=parseInt(t.getAttribute("_expanded"));return isNaN(n)?0:Math.max(n,0)}}return 0}function de(e,t){var n=e.comp,o=[];return n.thisParameter&&o.push(n.thisParameter),n.parameters.forEach(function(e){e.isOptional&&0<t?(o.push(e),--t):e.isOptional||o.push(e)}),o}function A(e,t,n){var o=[];if(t.attrs.draggableParameters)for(var r=0;r<t.comp.handlerArgs.length;r++){var i=Q(e,"HANDLER_DRAG_PARAM_"+(s=t.comp.handlerArgs[r]).name);if(null===(a=i&&i.getField("VAR").getText()))break;o.push(ae(a,n))}else for(r=0;r<t.comp.handlerArgs.length;r++){var a,s=t.comp.handlerArgs[r],l=e.getField("HANDLER_"+s.name);if(null===(a=l&&l.getText()))break;o.push(ae(a,n))}return o}function D(e,t,n,o,r){var i=s(e,r.x,r.x+r.width)||s(r.x,e,e+n),a=s(t,r.y,r.y+r.height)||s(r.y,t,t+o);return i&&a;function s(e,t,n){return t<=e&&e<=n}}Y.compileExpression=re,(e=te=Y.VarUsage||(Y.VarUsage={}))[e.Unknown=0]="Unknown",e[e.Read=1]="Read",e[e.Assign=2]="Assign",Y.escapeVarName=ae,Y.mkEnv=a,Y.compileBlockAsync=function(e,t){var n=e.workspace,o=a(n,t);c(o,n);var r=i(o,e);return l(),x(o,r)},Y.callKey=C,Y.findBlockId=function(e,t){if(t){for(var n,o,r=0;r<e.length;++r){var i=e[r];i.start<=t.start&&i.end>t.start+t.length&&(!n||o>i.end-i.start)&&(o=(n=i).end-i.start)}return n?n.id:void 0}},Y.compileAsync=function(e,t){var n=a(e,t);return x(n,S(n,e,t))}}(_e.blocks||(_e.blocks={}))}(pxt||(pxt={})),function(i){!function(e){var r={};function t(e,t,n){null==r[e]&&(r[e]={field:t,validator:n})}e.initFieldEditors=function(){t("text",pxtblockly.FieldTextInput),t("note",pxtblockly.FieldNote,function(e){if(null===e)return null;e=String(e);var t=parseFloat(e||"0");return isNaN(t)||t<0?null:String(Math.round(Number(e)))}),t("gridpicker",pxtblockly.FieldGridPicker),t("textdropdown",pxtblockly.FieldTextDropdown),t("numberdropdown",pxtblockly.FieldNumberDropdown),t("imagedropdown",pxtblockly.FieldImageDropdown),t("colorwheel",pxtblockly.FieldColorWheel),t("toggle",pxtblockly.FieldToggle),t("toggleonoff",pxtblockly.FieldToggleOnOff),t("toggleyesno",pxtblockly.FieldToggleYesNo),t("toggleupdown",pxtblockly.FieldToggleUpDown),t("toggledownup",pxtblockly.FieldToggleDownUp),t("togglehighlow",pxtblockly.FieldToggleHighLow),t("colornumber",pxtblockly.FieldColorNumber),t("images",pxtblockly.FieldImages),t("sprite",pxtblockly.FieldSpriteEditor),t("speed",pxtblockly.FieldSpeed),t("turnratio",pxtblockly.FieldTurnRatio)},e.registerFieldEditor=t,e.createFieldEditor=function(e,t,n){if(null==r[e])return console.error("Field editor "+e+" not registered"),null;n||(n={}),i.Util.assert(null==n.lightMode,"lightMode is a reserved parameter for custom fields"),n.lightMode=i.options.light;var o=r[e];return new o.field(t,n,o.validator)}}(i.blocks||(i.blocks={}))}(pxt||(pxt={})),function(_){!function(g){function c(e,t){for(var n=[],o=0;o<e.childNodes.length;o++){var r=e.childNodes.item(o);r.tagName===t&&n.push(r)}return n}function p(e,t){return i(e,"block","type",t)}function i(e,t,n,o){return _.Util.toArray(e.getElementsByTagName(t)).filter(function(e){return e.getAttribute(n)===o})}function u(e,t,n,o){var r=i(e,t,n,o);return r.length?r[0]:void 0}function d(i,a,s){var e=s.getAttribute("type"),t=Blockly.Blocks[e],n=g.blockSymbol(e);if(n&&t){var l=g.compileInfo(n);n.parameters.forEach(function(e,t){var n=i.apis.byQName[e.type];if(n&&n.kind==pxtc.SymbolKind.Enum){var o=u(s,"field","name",l.actualNameToParam[e.name].definitionName);if(o){var r=a[n.name+"."+o.textContent];r&&(o.textContent=r)}}})}}g.saveWorkspaceXml=function(e){var t=Blockly.Xml.workspaceToDom(e,!0);return Blockly.Xml.domToPrettyText(t)},g.getDirectChildren=c,g.getBlocksWithType=p,g.getChildrenWithAttr=i,g.getFirstChildWithAttr=u,g.loadWorkspaceXml=function(e,t){void 0===t&&(t=!1);var n=new Blockly.Workspace;try{var o=Blockly.Xml.textToDom(e);return Blockly.Xml.domToWorkspace(o,n),n}catch(e){return t||_.reportException(e),null}},g.importXml=function(e,t,n,o){void 0===o&&(o=!1);try{var r=(new DOMParser).parseFromString(t,"application/xml"),i=_.patching.computePatches(e);i&&(i.filter(function(e){return"blockId"==e.type}).forEach(function(n){return Object.keys(n.map).forEach(function(t){p(r,t).forEach(function(e){e.setAttribute("type",n.map[t]),_.debug("patched block "+t+" -> "+n.map[t])})})}),i.filter(function(e){return"blockValue"==e.type}).forEach(function(o){return Object.keys(o.map).forEach(function(t){var e=t.split("."),n=e[0];e[1],p(r,n).reduce(function(e,t){return e.concat(c(t,"value"))},[]).forEach(function(e){e.setAttribute("name",o.map[t]),_.debug("patched block value "+t+" -> "+o.map[t])})})}));var a={};Object.keys(n.apis.byQName).forEach(function(e){var t=n.apis.byQName[e];t.kind==pxtc.SymbolKind.EnumMember&&(a[t.namespace+"."+(t.attributes.blockImportId||t.attributes.block||t.attributes.blockId||t.name)]=t.namespace+"."+t.name)});for(var s=r.getElementsByTagName("block"),l=0;l<s.length;++l)d(n,a,s[l]);return function(t,e){var n=p(t,ts.pxtc.ON_START_TYPE),o=n.length?n[0]:void 0;if(o)o.removeAttribute("deletable");else{var r=[],i={};e.blocks.forEach(function(e){return i[e.attributes.blockId]=e});for(var a=t.firstElementChild,s=void 0;a;){var l=a.nextElementSibling,c=a.getAttribute("type");if(!a.getAttribute("disabled")&&!a.getElementsByTagName("statement").length&&(_.blocks.buildinBlockStatements[c]||i[c]&&"void"==i[c].retType&&!g.hasArrowFunction(i[c])))if(s){var u=t.ownerDocument.createElement("next");u.appendChild(a),s.appendChild(u),a.removeAttribute("x"),a.removeAttribute("y"),s=a}else(s=t.ownerDocument.createElement("statement")).setAttribute("name","HANDLER"),o||((o=t.ownerDocument.createElement("block")).setAttribute("type",ts.pxtc.ON_START_TYPE),r.push(o)),o.appendChild(s),s.appendChild(a),a.removeAttribute("x"),a.removeAttribute("y"),s=a;a=l}r.forEach(function(e){return t.appendChild(e)})}}(r.documentElement,n),_.blocks.extensionBlocklyPatch&&_.blocks.extensionBlocklyPatch(e,r.documentElement),(new XMLSerializer).serializeToString(r)}catch(e){return o||_.reportException(e),t}}}(_.blocks||(_.blocks={}))}(pxt||(pxt={})),function(f){var e;(function(e){function t(e){return n(e).then(function(e){return e?a(e.width,e.height,4,e.xml):Promise.resolve(void 0)})}function a(i,a,s,l){return new Promise(function(t,e){var n=document.createElement("canvas"),o=n.getContext("2d"),r=new Image;n.width=i*s,n.height=a*s,r.onload=function(){o.drawImage(r,0,0,i,a,0,0,n.width,n.height);var e=n.toDataURL("image/png");t(e)},r.onerror=function(e){f.reportError("blocks","blocks screenshot failed"),t(void 0)},r.src=l})}e.patchBlocksFromOldWorkspace=function(e,t,n){var r,i,a,s,l,o,c,u,g,p=f.blocks.loadWorkspaceXml(n,!0);return r=e,a=p,(i=t).getTopBlocks(!1).filter(function(e){return!e.disabled}).forEach(function(e){var t=e.xy_;if(t&&0!=t.x&&0!=t.y){s||(s=f.blocks.mkEnv(i,r,!0),l={},a.getTopBlocks(!1).forEach(function(e){var t=f.blocks.callKey(s,e),n=l[t]||[];n.push(e),l[t]=n}));var n=f.blocks.callKey(s,e),o=(l[n]||[]).shift();o&&(o.xy_=t.clone())}}),o=t,c=p,u=Blockly.Xml.workspaceToDom(o,!0),g=Blockly.Xml.workspaceToDom(c,!0),f.Util.toArray(u.childNodes).filter(function(e){return e.nodeType==Node.ELEMENT_NODE&&"block"==e.localName&&"true"==e.getAttribute("disabled")}).forEach(function(e){return g.appendChild(g.ownerDocument.importNode(e,!0))}),Blockly.Xml.domToText(g)},e.verticalAlign=function(e,t){var n=0;e.getTopComments(!0).forEach(function(e){e.moveBy(0,n),n+=e.getHeightWidth().height,n+=t}),e.getTopBlocks(!0).forEach(function(e){e.moveBy(0,n),n+=e.getHeightWidth().height,n+=t})},e.flow=function(e,t){if(t){if(t.useViewWidth){var n=e.getMetrics();if(n.viewHeight>n.viewWidth)return void o(e.getTopComments(!0),e.getTopBlocks(!0),void 0,n.viewWidth)}o(e.getTopComments(!0),e.getTopBlocks(!0),t.ratio)}else o(e.getTopComments(!0),e.getTopBlocks(!0))},e.screenshotEnabled=function(){return!f.BrowserUtils.isIE()&&!f.BrowserUtils.isUwpEdge()},e.screenshotAsync=function(e){return t(e)},e.toPngAsync=t,e.svgToPngAsync=function(e,t,n,o,r,i){return s(e,t,n,o,r).then(function(e){return e?a(e.width,e.height,i,e.xml):Promise.resolve(void 0)})};var g,p="http://www.w3.org/1999/xlink";function n(e){if(!e)return Promise.resolve(void 0);var t=document.getElementsByClassName("blocklyBlockCanvas")[0].getBBox();return s(e.svgBlockCanvas_.cloneNode(!0),t.x,t.y,t.width,t.height)}function d(e){return(new XMLSerializer).serializeToString(e).replace(new RegExp("&nbsp;","g"),"&#160;")}function s(e,t,n,o,r){if(!e.childNodes[0])return Promise.resolve(void 0);e.removeAttribute("width"),e.removeAttribute("height"),e.removeAttribute("transform");var i=d(e).replace(/^\s*<svg[^>]+>/i,"").replace(/<\/svg>\s*$/i,""),a='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="'+p+'" width="'+o+'" height="'+r+'" viewBox="'+t+" "+n+" "+o+" "+r+'">'+i+"</svg>",s=(new DOMParser).parseFromString(a,"image/svg+xml"),l=s.createElementNS("http://www.w3.org/1999/xhtml","style"),c=f.Util.isUserLanguageRtl(),u=document.getElementById("style-"+(c?"rtl":"")+"blockly.css").href;return f.BrowserUtils.loadAjaxAsync(u).then(function(e){var t=f.Util.toArray(document.head.querySelectorAll("style")).filter(function(e){return/\.blocklySvg/.test(e.innerText)})[0],n=(t?t.innerText:"")+"\n\n"+e+"\n\n";return l.appendChild(s.createCDATASection(n)),s.documentElement.insertBefore(l,s.documentElement.firstElementChild),function(e){g||(g={});var t=e.getElementsByTagName("image"),n=f.Util.toArray(t).filter(function(e){return!/^data:/.test(e.getAttributeNS(p,"href"))}).map(function(t){var o=t.getAttributeNS(p,"href"),r=g[o];return(r?Promise.resolve(g[o]):f.BrowserUtils.loadImageAsync(t.getAttributeNS(p,"href")).then(function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),g[o]=r=t.toDataURL("image/png"),r}).catch(function(e){f.debug("svg render: failed to load "+o)})).then(function(e){t.setAttributeNS(p,"href",e)})});return Promise.all(n).then(function(){})}(s).then(function(){return{width:o,height:r,svg:d(s).replace('<style xmlns="http://www.w3.org/1999/xhtml">',"<style>"),xml:_(s),css:n}})})}function _(e){var t=(new XMLSerializer).serializeToString(e);return"data:image/svg+xml;base64,"+ts.pxtc.encodeBase64(unescape(encodeURIComponent(t)))}function o(e,t,n,o){void 0===n&&(n=1.62);var s,l=[],c={};e.forEach(function(e){var t=e.data;null!=t?c[t]=e:l.push(b(e))}),t.forEach(function(e){var t=e.data;if(t){for(var n=t.split(";"),o=[],r=0;r<n.length;r++){var i=c[n[r]];i&&(o.push(b(i)),delete c[n[r]])}if(o.length)return void l.push({value:e,width:-1,height:-1,children:o})}var a=b(e);e.type===pxtc.ON_START_TYPE?s=a:l.push(a)}),s&&l.unshift(s),Object.keys(c).sort(function(e,t){return e.length===t.length?t<e?-1:1:e.length>t.length?-1:1}).forEach(function(e){c[e]&&(s?(s.children||(s.children=[]),s.children.push(b(c[e]))):l.unshift(b(c[e])))});for(var r,i=0,a=0;a<l.length;a++){if((m=l[a]).children){var u=m.value.getHeightWidth();m.x=0,m.y=0;for(var g=u.width+13,p=0,d=0;d<m.children.length;d++)(y=m.children[d]).x=g,y.y=p,p+=y.height+13,m.width=Math.max(m.width,g+y.width);m.height=Math.max(p-13,u.height)}i+=(m.height+13)*(m.width+13)}r=20<o?o-20:Math.sqrt(i)*n;var _=20,f=20,h=0;for(a=0;a<l.length;a++){var m;if((m=l[a]).children)for(v(m,_+m.x,f+m.y),d=0;d<m.children.length;d++){var y;v(y=m.children[d],_+y.x,f+y.y)}else v(m,_,f);_+=m.width+45,h=Math.max(h,m.height+45),r<_&&(_=20,f=h)}function v(e,t,n){var o=e.value.getBoundingRectangle();e.value.moveBy(t-o.topLeft.x,n-o.topLeft.y)}}function b(e){var t=e.getHeightWidth();return{value:e,height:t.height,width:t.width}}e.toSvgAsync=n,e.serializeNode=d,e.blocklyToSvgAsync=s,e.documentToSvg=_})((e=f.blocks||(f.blocks={})).layout||(e.layout={}))}(pxt||(pxt={})),function(G){!function(M){var _={string:{field:"TEXT",block:"text",defaultValue:""},number:{field:"NUM",block:"math_number",defaultValue:"0"},boolean:{field:"BOOL",block:"logic_boolean",defaultValue:"false"},Array:{field:"VAR",block:"variables_get",defaultValue:"list"}},d=function(){function e(){}return e.prototype.logTime=function(){if(this.start){var e=Date.now()-this.start;G.debug("Icon cration: "+e+"ms")}},e.prototype.convert=function(e){this.start||(this.start=Date.now());var t=atob(e.slice(e.indexOf(",")+1)),n=t.charCodeAt(0),o=t.charCodeAt(1),r=t.charCodeAt(2);if(225!=n&&228!=n)return null;if(!this.palette){var i=G.appTarget.runtime.palette.map(function(e){var t=parseInt(e.replace(/#/,""),16);return[t>>0&255,t>>8&255,t>>16&255,0]});this.palette=new Uint8Array(4*i.length);for(var a=0;a<i.length;++a)this.palette[4*a+0]=i[a][0],this.palette[4*a+1]=i[a][1],this.palette[4*a+2]=i[a][2],this.palette[4*a+3]=i[a][3]}var s=o+3&-4,l=54+this.palette.length,c=l+s*r,u=new Uint8Array(c);u[0]=66,u[1]=77,G.HF2.write32(u,2,c),G.HF2.write32(u,10,l),G.HF2.write32(u,14,40),G.HF2.write32(u,18,o),G.HF2.write32(u,22,-r),G.HF2.write16(u,26,1),G.HF2.write16(u,28,8),G.HF2.write32(u,38,2835),G.HF2.write32(u,42,2835),G.HF2.write32(u,46,this.palette.length>>2),u.set(this.palette,54);var g=4,p=l;if(225==n)for(var d=1,_=t.charCodeAt(g++),f=0;f<o;++f){p=l+f;for(var h=0;h<r;++h)u[p]=_&d?1:0,p+=s,256==(d<<=1)&&(d=1,_=t.charCodeAt(g++))}else for(f=0;f<o;f++){p=l+f;for(h=0;h<r;h+=2){_=t.charCodeAt(g++);u[p]=15&_,p+=s,h!=r-1&&(u[p]=_>>4&15,p+=s)}}return"data:image/bmp;base64,"+btoa(G.U.uint8ArrayToString(u))},e}();M.optionalDummyInputPrefix="0_optional_dummy",M.optionalInputWithFieldPrefix="0_optional_field";var t,n=/^(?:Array<.+>)|(?:.+\[\])|(?:\[.+\])$/;function F(e){return n.test(e)}function c(){return t||(t={},Object.keys(Blockly.Blocks).forEach(function(e){return t[e]={block:Blockly.Blocks[e]}})),t}M.isArrayType=F,M.builtinBlocks=c,M.buildinBlockStatements={controls_if:!0,controls_for:!0,pxt_controls_for:!0,controls_simple_for:!0,controls_repeat_ext:!0,pxt_controls_for_of:!0,controls_for_of:!0,variables_set:!0,variables_change:!0,device_while:!0};var u={};function i(e,t,n,o){var r;if(o=o||t.defaultValue,n=n||t.shadowBlockId,r=o&&'"'==o.slice(0,1)?JSON.parse(o):o,"number"==t.type&&"value"==n)return(g=document.createElement("field")).setAttribute("name",t.definitionName),g.appendChild(document.createTextNode("0")),g;var i="variables_get"==n,a=document.createElement("value");a.setAttribute("name",t.definitionName);var s=document.createElement(i?"block":"shadow");a.appendChild(s);var l=_[t.type];if(s.setAttribute("type",n||l&&l.block||t.type),s.setAttribute("colour",Blockly.Colours.textField),!l||n&&l.block!==n&&"math_number_minmax"!==n){if(r){if((g=document.createElement("field")).textContent=r,i)g.setAttribute("name","VAR"),s.appendChild(g);else if(n){var c=e.blocksById[n];if(c&&c.attributes._def&&c.attributes._def.parameters.length){var u=c.attributes._def.parameters[0];g.setAttribute("name",u.name),s.appendChild(g)}}else g.setAttribute("name",t.definitionName),s.appendChild(g)}}else{var g=document.createElement("field");s.appendChild(g);var p,d=void 0;switch(n){case"variables_get":d="VAR";break;case"math_number_minmax":d="SLIDER";break;default:d=l.field}g.setAttribute("name",d),p="boolean"==t.type?document.createTextNode((r||l.defaultValue).toUpperCase()):document.createTextNode(r||l.defaultValue),g.appendChild(p)}return a}function l(e,t,n,o){var r=a(e,t,n,o);return r.setAttribute("web-class","blocklyFlyoutHeading"),r}function a(e,t,n,o){var r=goog.dom.createDom("label");return r.setAttribute("text",e),t&&r.setAttribute("web-icon-color",t),n&&(1===n.length?(r.setAttribute("web-icon",n),o&&r.setAttribute("web-icon-class",o)):r.setAttribute("web-icon-class","blocklyFlyoutIcon"+e)),r}function r(o,e,t){var r=document.createElement("block");if(r.setAttribute("type",e.attributes.blockId),e.attributes.blockGap?r.setAttribute("gap",e.attributes.blockGap):G.appTarget.appTheme&&G.appTarget.appTheme.defaultBlockGap&&r.setAttribute("gap",G.appTarget.appTheme.defaultBlockGap.toString()),t.thisParameter){var n=t.thisParameter;r.appendChild(i(o,n,n.shadowBlockId||"variables_get",n.defaultValue||n.definitionName))}return e.parameters&&(t.parameters.filter(function(e){return!e.isOptional&&(/^(string|number|boolean)$/.test(e.type)||e.shadowBlockId||e.defaultValue)}).forEach(function(e){var t,n;e.range?(t=i(o,e,"math_number_minmax"),(n=document.createElement("mutation")).setAttribute("min",e.range.min.toString()),n.setAttribute("max",e.range.max.toString()),n.setAttribute("label",e.actualName.charAt(0).toUpperCase()+e.actualName.slice(1)),e.fieldOptions&&(e.fieldOptions.step&&n.setAttribute("step",e.fieldOptions.step),e.fieldOptions.color&&n.setAttribute("color",e.fieldOptions.color))):t=i(o,e),e.fieldOptions&&(n||(n=document.createElement("mutation")),n.setAttribute("customfield",JSON.stringify(e.fieldOptions))),t&&n&&t.firstChild.appendChild(n),r.appendChild(t)}),e.attributes.draggableParameters?t.handlerArgs.forEach(function(e){var t=document.createElement("value");t.setAttribute("name","HANDLER_DRAG_PARAM_"+e.name);var n=document.createElement("shadow");n.setAttribute("type","variables_get_reporter");var o=document.createElement("field");o.setAttribute("name","VAR"),o.textContent=G.Util.htmlEscape(e.name),n.appendChild(o),t.appendChild(n),r.appendChild(t)}):t.handlerArgs.forEach(function(e){var t=document.createElement("field");t.setAttribute("name","HANDLER_"+e.name),t.textContent=e.name,r.appendChild(t)})),r}function o(o){return o.blocks.map(function(e){if(e.attributes.blockBuiltin)G.Util.assert(!!c()[e.attributes.blockId]),c()[e.attributes.blockId].symbol=e;else{var t=M.compileInfo(e),n=r(o,e,t);!function(e,t,n,o){var r=t.attributes.blockId;if(c()[r])return G.reportError("blocks","trying to override builtin block",{details:r});var i=JSON.stringify(t);if(u[r]&&u[r].hash==i)return;if(Blockly.Blocks[t.attributes.blockId])return console.error("duplicate block definition: "+r);var a={hash:i,fn:t,block:{codeCard:(s=t,l=o,{name:s.namespace+"."+s.name,shortName:s.name,description:s.attributes.jsDoc,url:s.attributes.help?"reference/"+s.attributes.help.replace(/^\//,""):void 0,blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml">'+g(l)+"</xml>"}),init:function(){!function(i,w,O,R){var e=(O.attributes.blockNamespace||O.namespace).split(".")[0],L=O.kind==pxtc.SymbolKind.Method||O.kind==pxtc.SymbolKind.Property,t=w.apis.byQName[e],P=O.attributes.color||(t?t.attributes.color:void 0)||G.toolbox.getNamespaceColor(e.toLowerCase())||255;if(O.attributes.help)i.setHelpUrl("/reference/"+O.attributes.help.replace(/^\//,""));else if(O.pkg&&!G.appTarget.bundledpkgs[O.pkg]){var n=O.qName.toLowerCase().split(".");n[0]==O.pkg&&n.shift(),i.setHelpUrl("/pkg/"+O.pkg+"#"+encodeURIComponent(n.join("-")))}i.setColour(P,O.attributes.colorSecondary,O.attributes.colorTertiary);var o=Blockly.OUTPUT_SHAPE_ROUND;"boolean"==O.retType&&(o=Blockly.OUTPUT_SHAPE_HEXAGONAL);i.setOutputShape(o),O.attributes.undeletable&&i.setDeletable(!1);p(O.attributes._def);var r=!1;if(O.attributes.mutate)M.addMutation(i,O,O.attributes.mutate);else if(O.attributes.defaultInstance)M.addMutation(i,O,M.MutatorTypes.DefaultInstanceMutator);else if(O.attributes._expandedDef&&"disabled"!==O.attributes.expandableArgumentMode){var a="toggle"===O.attributes.expandableArgumentMode;M.initExpandableBlock(i,O.attributes._expandedDef,R,a,function(){return p(O.attributes._expandedDef,!0)})}else if(R.handlerArgs.length)if(r=!0,O.attributes.optionalVariableArgs)M.initVariableArgsBlock(i,R.handlerArgs);else if(O.attributes.draggableParameters)R.handlerArgs.filter(function(e){return!e.inBlockDef}).forEach(function(e){var t=i.appendValueInput("HANDLER_DRAG_PARAM_"+e.name);t.setCheck("Variable")});else{var s=i.appendDummyInput();R.handlerArgs.filter(function(e){return!e.inBlockDef}).forEach(function(e){s.appendField(new Blockly.FieldVariable(e.name),"HANDLER_"+e.name)})}if(M.appendMutation(i,{mutationToDom:function(n){return i.inputList.forEach(function(e){e.fieldRow.forEach(function(e){if(e.isFieldCustom_&&e.saveOptions){var t=e.saveOptions();n.setAttribute("customfield",JSON.stringify(t))}})}),n},domToMutation:function(n){i.inputList.forEach(function(e){e.fieldRow.forEach(function(e){if(e.isFieldCustom_&&e.restoreOptions){var t=JSON.parse(n.getAttribute("customfield"));e.restoreOptions(t)}})})}}),O.attributes.imageLiteral){var l=i.appendDummyInput();l.appendField(new pxtblockly.FieldMatrix("",{columns:5*O.attributes.imageLiteral}),"LEDS")}"external"===O.attributes.inlineInputMode?i.setInputsInline(!1):"inline"===O.attributes.inlineInputMode?i.setInputsInline(!0):i.setInputsInline(!O.parameters||O.parameters.length<4&&!O.attributes.imageLiteral);((O.parameters?O.parameters.filter(function(e){return"() => void"==e.type})[0]:void 0)||r)&&(i.appendStatementInput("HANDLER").setCheck("null"),i.setInputsInline(!0));switch(O.retType){case"number":i.setOutput(!0,"Number");break;case"string":i.setOutput(!0,"String");break;case"boolean":i.setOutput(!0,"Boolean");break;case"void":break;default:if("T"!==O.retType){var c=F(O.retType)?["Array"]:[],u=w.apis.byQName[O.retType];u&&u.extendsTypes&&0<u.extendsTypes.length?c.push.apply(c,u.extendsTypes):c.push(O.retType),i.setOutput(!0,c)}else i.setOutput(!0)}var g=f(O);function p(e,o){void 0===o&&(o=!1);var r=0,I=!o&&!!R.thisParameter,t=function(e){var t=[],n=[];return e.parts.forEach(function(e){switch(e.kind){case"break":o();break;case"param":n.push(e),o();break;case"image":case"label":n.push(e)}}),o(),t;function o(){n.length&&(t.push(n),n=[])}}(e),N=new d;t.forEach(function(e){var x,A,t,D=[],B=!1;if(e.forEach(function(e){if("param"!==e.kind){var t=function(e){if("image"===e.kind)return function(e){var t=U[e];if(!t)return void G.log("missing jres icon "+e);return new Blockly.FieldImage(t,40,40,G.Util.isUserLanguageRtl(),"")}(e.uri);var t=function(e){{if(" "===e)return"";if(1<e.length){var t=" "==e.charAt(0),n=" "==e.charAt(e.length-1);if(t||n)return e.substring(t?1:0,n?e.length-1:e.length)}}return e}(e.text);if(!t)return;return e.cssClass?new Blockly.FieldLabel(t,e.cssClass):e.style.length?new pxtblockly.FieldStyledLabel(t,{bold:-1!==e.style.indexOf("bold"),italics:-1!==e.style.indexOf("italics")}):new Blockly.FieldLabel(t,void 0)}(e);t&&D.push({field:t})}else{var n=function(t,e,n){void 0===n&&(n=!1);{if(t.ref){var o,r="this"===t.name?e.thisParameter:e.actualNameToParam[t.name];if(!r)if(e.handlerArgs.forEach(function(e){e.name===t.name&&(o=e)}),o)return o;return r}return n?e.thisParameter:e.definitionNameToParam[t.name]}}(e,R,I);if(I=!1,!n)return void console.error("block "+O.attributes.blockId+": unkown parameter "+e.name+(e.ref?" ("+e.ref+")":""));if(!n.definitionName)return x="HANDLER_DRAG_PARAM_"+n.name,void(A="Variable");var o=G.U.lookup(w.apis.byQName,n.type);B=!0;var r=n.definitionName,i=n.actualName,a=o&&o.kind==pxtc.SymbolKind.Enum,s=o&&!!o.attributes.fixedInstances&&!n.shadowBlockId,l=!!O.attributes.constantShim,c="@combined@"==n.type,u=n.fieldEditor,g=r.charAt(0).toUpperCase()+r.slice(1),p=n.type;if(a||s||l||c){var d=void 0;a?(S=w.apis,C=n.type,d=G.Util.values(S.byQName).filter(function(e){return e.namespace===C})):s?(T=w.apis,E=o.qName,d=G.Util.values(T.byQName).filter(function(e){return e.kind===pxtc.SymbolKind.Variable&&e.attributes.fixedInstance&&function(e,t,n){if(t==n)return!0;var o=e.byQName[t];return!(!o||!o.extendsTypes)&&0<=o.extendsTypes.indexOf(n)}(T,e.retType,E)})):c?d=O.combinedProperties.map(function(e){return G.U.lookup(w.apis.byQName,e)}):(b=w.apis,k=O.qName,d=G.Util.values(b.byQName).filter(function(e){return e.attributes.blockIdentity===k})),0==d.length&&console.error("no instances of "+o.qName+" found");var _=d.map(function(e){var t=e.attributes.block||e.attributes.blockId||e.name,n=e.attributes.blockCombine;return e.attributes.jresURL&&!e.attributes.iconURL&&G.U.startsWith(e.attributes.jresURL,"data:image/x-mkcd-f")&&(e.attributes.iconURL=N.convert(e.attributes.jresURL)),n&&(t=t.replace(/@set/,"")),[e.attributes.iconURL||e.attributes.blockImage?{src:e.attributes.iconURL||G.Util.pathJoin(G.webConfig.commitCdnUrl,"blocks/"+e.namespace.toLowerCase()+"/"+e.name.toLowerCase()+".png"),alt:t,width:36,height:36,value:e.name}:t,e.namespace+"."+e.name]});if(n.defaultValue){var f=-1;if(_.some(function(e,t){return e[1]===n.defaultValue&&(f=t,!0)}),-1<f){var h=_.splice(f,1)[0];_.unshift(h)}}if(u){var m=O.attributes.paramDefl[i]||"",y={data:_,colour:P,label:g,type:p};G.Util.jsonMergeFrom(y,O.attributes.paramFieldEditorOptions&&O.attributes.paramFieldEditorOptions[i]||{}),D.push(H(M.createFieldEditor(u,m,y),r))}else D.push(H(new Blockly.FieldDropdown(_),r))}else if(u){var m=O.attributes.paramDefl[n.actualName]||"",v={colour:P,label:g,type:p};G.Util.jsonMergeFrom(v,O.attributes.paramFieldEditorOptions&&O.attributes.paramFieldEditorOptions[n.actualName]||{}),D.push(H(M.createFieldEditor(u,m,v),n.definitionName))}else x=r,L&&"this"===e.name?A=n.type:"number"==n.type?n.shadowBlockId&&"value"==n.shadowBlockId?(x=void 0,D.push(H(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),r))):A="Number":A="boolean"==n.type?"Boolean":"string"==n.type?n.shadowOptions&&n.shadowOptions.toString?void 0:"String":"T"==n.type?void 0:F(n.type)?["Array",n.type]:n.type}var b,k,T,E,S,C}),x)(t=i.appendValueInput(x)).setAlign(Blockly.ALIGN_LEFT);else if(o){var n=B?M.optionalInputWithFieldPrefix:M.optionalDummyInputPrefix;t=i.appendDummyInput(n+r++)}else t=i.appendDummyInput();A&&t.setCheck(A),D.forEach(function(e){return t.appendField(e.field,e.name)})}),N.logTime()}i.setPreviousStatement(!(g&&!O.attributes.handlerStatement)&&"void"==O.retType),i.setNextStatement(!(g&&!O.attributes.handlerStatement)&&"void"==O.retType),i.setTooltip(O.attributes.jsDoc)}(this,e,t,n)}}};var s,l;u[r]=a,Blockly.Blocks[r]=a.block}(o,e,t,n)}return e})}function g(e){return e.outerHTML.replace(/^<\?[^>]*>/,"")}function f(e){return!!(e.parameters?e.parameters.filter(function(e){return/^\([^\)]*\)\s*=>/.test(e.type)})[0]:void 0)}M.blockSymbol=function(e){var t=u[e];return t?t.fn:void 0},M.createFlyoutHeadingLabel=l,M.createFlyoutGroupLabel=function(e,t,n){var o=a(e,void 0,t);return o.setAttribute("web-class","blocklyFlyoutGroup"),o.setAttribute("web-line","1.5"),n&&o.setAttribute("web-line-width",n),o},M.createFlyoutButton=function(e,t){var n=goog.dom.createDom("button");return n.setAttribute("text",t),n.setAttribute("callbackkey",e),n},M.createToolboxBlock=r,M.injectBlocks=o,M.hasArrowFunction=f,M.cleanBlocks=function(){for(var e in G.debug("removing all custom blocks"),u)s(u[e].fn)},M.initializeAndInject=function(e){p(),o(e)};var e=!(M.initialize=function(e){var s;p(),s=function(e){if(e.disabled)return lf("This block is disabled and will not run. Attach this block to an event to enable it.");for(var t=e.tooltip;goog.isFunction(t);)t=t(e);return t},Blockly.Tooltip.show_=function(){if(Blockly.Tooltip.poisonedElement_=Blockly.Tooltip.element_,Blockly.Tooltip.DIV){goog.dom.removeChildren(Blockly.Tooltip.DIV);var e=Blockly.Tooltip.element_.codeCard;if(e){var t=G.docs.codeCard.render({header:s(Blockly.Tooltip.element_)});Blockly.Tooltip.DIV.appendChild(t),a()}else{for(var n=s(Blockly.Tooltip.element_),o=(n=Blockly.utils.wrap(n,Blockly.Tooltip.LIMIT)).split("\n"),r=0;r<o.length;r++){var i=document.createElement("div");i.appendChild(document.createTextNode(o[r])),Blockly.Tooltip.DIV.appendChild(i)}a()}}function a(){var e=Blockly.Tooltip.element_.RTL,t=goog.dom.getViewportSize();Blockly.Tooltip.DIV.style.direction=e?"rtl":"ltr",Blockly.Tooltip.DIV.style.display="block",Blockly.Tooltip.visible=!0;var n=Blockly.Tooltip.lastX_;e?n-=Blockly.Tooltip.OFFSET_X+Blockly.Tooltip.DIV.offsetWidth:n+=Blockly.Tooltip.OFFSET_X;var o=Blockly.Tooltip.lastY_+Blockly.Tooltip.OFFSET_Y;o+Blockly.Tooltip.DIV.offsetHeight>t.height+window.scrollY&&(o-=Blockly.Tooltip.DIV.offsetHeight+2*Blockly.Tooltip.OFFSET_Y),e?n=Math.max(Blockly.Tooltip.MARGINS-window.scrollX,n):n+Blockly.Tooltip.DIV.offsetWidth>t.width+window.scrollX-2*Blockly.Tooltip.MARGINS&&(n=t.width-Blockly.Tooltip.DIV.offsetWidth-2*Blockly.Tooltip.MARGINS),Blockly.Tooltip.DIV.style.top=o+"px",Blockly.Tooltip.DIV.style.left=n+"px"}},function(e){U={};var n=e.apis.jres;n&&Object.keys(n).forEach(function(e){var t=n[e];t&&t.icon&&(U[e]=t.icon)})}(e)});function p(){e||(e=!0,goog.provide("Blockly.Blocks.device"),goog.require("Blockly.Blocks"),window.PointerEvent&&(document.body.style.touchAction="none"),Blockly.FieldCheckbox.CHECK_CHAR="",Blockly.BlockSvg.START_HAT=!!G.appTarget.appTheme.blockHats,M.initFieldEditors(),function(){var e=Blockly.Msg;e.DUPLICATE_BLOCK=lf("{id:block}Duplicate"),e.REMOVE_COMMENT=lf("Remove Comment"),e.ADD_COMMENT=lf("Add Comment"),e.EXTERNAL_INPUTS=lf("External Inputs"),e.INLINE_INPUTS=lf("Inline Inputs"),e.EXPAND_BLOCK=lf("Expand Block"),e.COLLAPSE_BLOCK=lf("Collapse Block"),e.ENABLE_BLOCK=lf("Enable Block"),e.DISABLE_BLOCK=lf("Disable Block"),e.DELETE_BLOCK=lf("Delete Block"),e.DELETE_X_BLOCKS=lf("Delete All Blocks"),e.HELP=lf("Help"),Blockly.BlockSvg.prototype.showHelp_=function(){var e=goog.isFunction(this.helpUrl)?this.helpUrl():this.helpUrl;e&&(G.blocks.openHelpUrl||window.open)(e)},Blockly.WorkspaceSvg.prototype.showContextMenu_=function(e){var t=this;if(!this.options.readOnly&&!this.isFlyout){var n=[],r=this.getTopBlocks(!0),o=Blockly.utils.genUid();this.options.comments&&n.push(Blockly.ContextMenu.workspaceCommentOption(this,e));var i=10;if(this.options.collapse){for(var a=!1,s=!1,l=0;l<r.length;l++)for(var c=r[l];c;)c.isCollapsed()?a=!0:s=!0,c=c.getNextBlock();var u=function(e){for(var t=0,n=0;n<r.length;n++)for(var o=r[n];o;)setTimeout(o.setCollapsed.bind(o,e),t),o=o.getNextBlock(),t+=i},g={enabled:s};g.text=lf("Collapse Block"),g.callback=function(){G.tickEvent("blocks.context.collapse"),u(!0)},n.push(g);var p={enabled:a};p.text=lf("Expand Block"),p.callback=function(){G.tickEvent("blocks.context.expand"),u(!1)},n.push(p)}for(var d=[],l=0;l<r.length;l++)m(r[l]);var _={text:1==d.length?lf("Delete Block"):lf("Delete All Blocks",d.length),enabled:0<d.length,callback:function(){G.tickEvent("blocks.context.delete",void 0,{interactiveConsent:!0}),(d.length<2||window.confirm(lf("Delete all {0} blocks?",d.length)))&&y()}};n.push(_);var f={text:lf("Format Code"),enabled:!0,callback:function(){G.tickEvent("blocks.context.format",void 0,{interactiveConsent:!0}),G.blocks.layout.flow(t,{useViewWidth:!0})}};if(n.push(f),G.blocks.layout.screenshotEnabled()){var h={text:lf("Download Screenshot"),enabled:0<r.length,callback:function(){G.tickEvent("blocks.context.screenshot",void 0,{interactiveConsent:!0}),G.blocks.layout.screenshotAsync(t).done(function(e){G.BrowserUtils.isSafari()&&(e=e.replace(/^data:image\/[^;]/,"data:application/octet-stream")),G.BrowserUtils.browserDownloadDataUri(e,(G.appTarget.nickname||G.appTarget.id)+"-"+lf("screenshot")+".png")})}};n.push(h)}M.onShowContextMenu&&M.onShowContextMenu(this,n),Blockly.ContextMenu.show(e,n,this.RTL)}function m(e){if(e.isDeletable())d=d.concat(e.getDescendants());else for(var t=e.getChildren(),n=0;n<t.length;n++)m(t[n])}function y(){Blockly.Events.setGroup(o);var e=d.shift();e&&(e.workspace?(e.dispose(!1,!0),setTimeout(y,i)):y()),Blockly.Events.setGroup(!1)}},Blockly.Toolbox.TreeNode.prototype.onClick_=function(e){var t=this;t.isSelected()||b(t.getTree().getSelectedItem(),t),t.hasChildren()&&t.isUserCollapsible_?t.isSelected()?(b(t.getTree().getSelectedItem(),t),t.getTree().setSelectedItem(null)):(t.setExpanded(!0),t.select()):t.isSelected()?t.getTree().setSelectedItem(null):t.select(),t.updateRow()};var o=Blockly.Toolbox.TreeControl.prototype.setSelectedItem;Blockly.Toolbox.TreeControl.prototype.setSelectedItem=function(e){var t=this.toolbox_;if(e!=this.selectedItem_&&e!=t.tree_){var n=this.selectedItem_;o.call(this,e),null===e&&b(n)}},Blockly.Flyout.prototype.addBlockListeners_=function(e,t,n){this.listeners_.push(Blockly.bindEventWithChecks_(e,"mousedown",null,this.blockMouseDown_(t))),this.listeners_.push(Blockly.bindEventWithChecks_(n,"mousedown",null,this.blockMouseDown_(t))),this.listeners_.push(Blockly.bindEvent_(e,"mouseover",t,t.addSelect)),this.listeners_.push(Blockly.bindEvent_(e,"mouseout",t,t.removeSelect)),this.listeners_.push(Blockly.bindEvent_(n,"mouseover",t,t.addSelect)),this.listeners_.push(Blockly.bindEvent_(n,"mouseout",t,t.removeSelect))}}(),function(){var e=G.blocks.getBlockDefinition(ts.pxtc.ON_START_TYPE);if(Blockly.Blocks[ts.pxtc.ON_START_TYPE]={init:function(){this.jsonInit({message0:e.block.message0,args0:[{type:"input_dummy"},{type:"input_statement",name:"HANDLER"}],colour:(G.appTarget.runtime?G.appTarget.runtime.onStartColor:"")||G.toolbox.getNamespaceColor("loops")}),y(this,ts.pxtc.ON_START_TYPE,e.name,e.tooltip,e.url,String((G.appTarget.runtime?G.appTarget.runtime.onStartColor:"")||G.toolbox.getNamespaceColor("loops")),void 0,void 0,!!G.appTarget.runtime&&G.appTarget.runtime.onStartUnDeletable)}},Blockly.Blocks[pxtc.TS_STATEMENT_TYPE]={init:function(){var r=this,i=this;i.setColour("#717171"),i.setPreviousStatement(!0),i.setNextStatement(!0),i.setInputsInline(!1),this.domToMutation=function(e){var t=parseInt(e.getAttribute("numlines"));r.declaredVariables=e.getAttribute("declaredvars");for(var n=0;n<t;n++){var o=e.getAttribute("line"+n);i.appendDummyInput().appendField(o,"LINE"+n)}},this.mutationToDom=function(){for(var e=document.createElement("mutation"),t=0;;){var n=i.getFieldValue("LINE"+t);if(null===n)break;e.setAttribute("line"+t,n),t++}return e.setAttribute("numlines",t.toString()),r.declaredVariables&&e.setAttribute("declaredvars",r.declaredVariables),e},i.setEditable(!1),y(this,pxtc.TS_STATEMENT_TYPE,lf("JavaScript statement"),lf("A JavaScript statement that could not be converted to blocks"),"/blocks/javascript-blocks","#717171")}},Blockly.Blocks[pxtc.TS_OUTPUT_TYPE]={init:function(){this.setColour("#717171"),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0),this.setEditable(!1),this.appendDummyInput().appendField(new pxtblockly.FieldTsExpression(""),"EXPRESSION"),y(this,pxtc.TS_OUTPUT_TYPE,lf("JavaScript expression"),lf("A JavaScript expression that could not be converted to blocks"),"/blocks/javascript-blocks","#717171")}},G.appTarget.runtime&&G.appTarget.runtime.pauseUntilBlock){var t=G.appTarget.runtime.pauseUntilBlock,n=G.blocks.getBlockDefinition(ts.pxtc.PAUSE_UNTIL_TYPE);Blockly.Blocks[pxtc.PAUSE_UNTIL_TYPE]={init:function(){var e=t.color||G.toolbox.getNamespaceColor("loops");this.jsonInit({message0:n.block.message0,args0:[{type:"input_value",name:"PREDICATE",check:"Boolean"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:e}),y(this,ts.pxtc.PAUSE_UNTIL_TYPE,n.name,n.tooltip,n.url,e,void 0,void 0,!1)}}}var o="pxt_controls_for_of",r=G.blocks.getBlockDefinition(o);Blockly.Blocks[o]={init:function(){this.jsonInit({message0:r.block.message0,args0:[{type:"input_value",name:"VAR",variable:r.block.variable,check:"Variable"},{type:"input_value",name:"LIST",check:"Array"}],previousStatement:null,nextStatement:null,colour:G.toolbox.blockColors.loops,inputsInline:!0}),this.appendStatementInput("DO").appendField(r.block.appendField);var e=this;y(this,o,r.name,function(){return G.U.rlf(r.tooltip,e.getInputTargetBlock("VAR")?e.getInputTargetBlock("VAR").getField("VAR").getText():"")},r.url,String(G.toolbox.getNamespaceColor("loops")))}};var i="controls_for_of",a=G.blocks.getBlockDefinition(i);Blockly.Blocks[i]={init:function(){this.jsonInit({message0:a.block.message0,args0:[{type:"field_variable",name:"VAR",variable:a.block.variable},{type:"input_value",name:"LIST",check:"Array"}],previousStatement:null,nextStatement:null,colour:G.toolbox.blockColors.loops,inputsInline:!0}),this.appendStatementInput("DO").appendField(a.block.appendField);var e=this;y(this,i,a.name,function(){return G.U.rlf(a.tooltip,e.getField("VAR").getText())},a.url,String(G.toolbox.getNamespaceColor("loops")))}};var s="lists_index_get",l=G.blocks.getBlockDefinition(s);Blockly.Blocks.lists_index_get={init:function(){this.jsonInit({message0:l.block.message0,args0:[{type:"input_value",name:"LIST",check:"Array"},{type:"input_value",name:"INDEX",check:"Number"}],colour:G.toolbox.blockColors.arrays,inputsInline:!0}),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0),h(this,s)}};var c="lists_index_set",u=G.blocks.getBlockDefinition(c);Blockly.Blocks[c]={init:function(){this.jsonInit({message0:u.block.message0,args0:[{type:"input_value",name:"LIST",check:"Array"},{type:"input_value",name:"INDEX",check:"Number"},{type:"input_value",name:"VALUE",check:null}],previousStatement:null,nextStatement:null,colour:G.toolbox.blockColors.arrays,inputsInline:!0}),h(this,c)}}}(),function(){var e="math_op2",t=G.blocks.getBlockDefinition(e),n=t.tooltip;Blockly.Blocks[e]={init:function(){this.jsonInit({message0:lf("%1 of %2 and %3"),args0:[{type:"field_dropdown",name:"op",options:[[lf("{id:op}min"),"min"],[lf("{id:op}max"),"max"]]},{type:"input_value",name:"x",check:"Number"},{type:"input_value",name:"y",check:"Number"}],inputsInline:!0,output:"Number",colour:G.toolbox.getNamespaceColor("math")});y(this,e,t.name,function(e){return n[e.getFieldValue("op")]},t.url,G.toolbox.getNamespaceColor(t.category))}};var o="math_op3",r=G.blocks.getBlockDefinition(o);Blockly.Blocks[o]={init:function(){this.jsonInit({message0:r.block.message0,args0:[{type:"input_value",name:"x",check:"Number"}],inputsInline:!0,output:"Number",colour:G.toolbox.getNamespaceColor("math")}),h(this,o)}},["math_number","math_integer","math_whole_number","math_number_minmax"].forEach(function(e){var t=G.blocks.getBlockDefinition(e);v(e,t.name,t.tooltip,t.url,Blockly.Colours.textField,Blockly.Colours.textField,Blockly.Colours.textField)});var i=Blockly.Msg,a="math_arithmetic",s=G.blocks.getBlockDefinition(a),l=s.tooltip;i.MATH_ADDITION_SYMBOL=s.block.MATH_ADDITION_SYMBOL,i.MATH_SUBTRACTION_SYMBOL=s.block.MATH_SUBTRACTION_SYMBOL,i.MATH_MULTIPLICATION_SYMBOL=s.block.MATH_MULTIPLICATION_SYMBOL,i.MATH_DIVISION_SYMBOL=s.block.MATH_DIVISION_SYMBOL,i.MATH_POWER_SYMBOL=s.block.MATH_POWER_SYMBOL,v(a,s.name,function(e){return l[e.getFieldValue("OP")]},s.url,G.toolbox.getNamespaceColor(s.category));var c="math_modulo",u=G.blocks.getBlockDefinition(c);i.MATH_MODULO_TITLE=u.block.MATH_MODULO_TITLE,m(c),M.initMathOpBlock()}(),function(){var e=lf("{id:var}item");Blockly.Variables.flyoutCategory=function(e){var t=[];if(!G.appTarget.appTheme.hideFlyoutHeadings){var n=l(lf("Variables"),G.toolbox.getNamespaceColor("variables"),G.toolbox.getNamespaceIcon("variables"));t.push(n)}var o=goog.dom.createDom("button");o.setAttribute("text",lf("Make a Variable...")),o.setAttribute("callbackkey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(e){Blockly.Variables.createVariable(e.getTargetWorkspace())}),t.push(o);var r=Blockly.Variables.flyoutCategoryBlocks(e);return t=t.concat(r)},Blockly.Variables.flyoutCategoryBlocks=function(e){var t=e.getVariablesOfType("");t.sort(Blockly.VariableModel.compareByName);var n=[];if(0<t.length){for(var o=0;o<t.length;o++){var r=t[o];if(Blockly.Blocks.variables_get){var i='<xml><block type="variables_get" gap="8">'+Blockly.Variables.generateVariableFieldXmlString(r)+"</block></xml>",a=Blockly.Xml.textToDom(i).firstChild;n.push(a)}}n[n.length-1].setAttribute("gap","24");var s=t[0];if(Blockly.Blocks.variables_set){var l=Blockly.Blocks.variables_change?8:24,i='<xml><block type="variables_set" gap="'+l+'">'+Blockly.Variables.generateVariableFieldXmlString(s)+"</block></xml>",a=Blockly.Xml.textToDom(i).firstChild,c=goog.dom.createDom("value");c.setAttribute("name","VALUE");var u=goog.dom.createDom("shadow");u.setAttribute("type","math_number"),c.appendChild(u);var g=goog.dom.createDom("field");g.setAttribute("name","NUM"),g.appendChild(document.createTextNode("0")),u.appendChild(g),a.appendChild(c),n.push(a)}if(Blockly.Blocks.variables_change){var l=Blockly.Blocks.variables_get?20:8,i='<xml><block type="variables_change" gap="'+l+'">'+Blockly.Variables.generateVariableFieldXmlString(s)+'<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block></xml>',a=Blockly.Xml.textToDom(i).firstChild,c=goog.dom.createDom("value");c.setAttribute("name","VALUE");var u=goog.dom.createDom("shadow");u.setAttribute("type","math_number"),c.appendChild(u);var g=goog.dom.createDom("field");g.setAttribute("name","NUM"),g.appendChild(document.createTextNode("1")),u.appendChild(g),a.appendChild(c),n.push(a)}}return n};var t=Blockly.Msg,n="variables_get",o=G.blocks.getBlockDefinition(n);t.VARIABLES_GET_CREATE_SET=o.block.VARIABLES_GET_CREATE_SET,m(n),m("variables_get_reporter"),t.RENAME_VARIABLE=lf("Rename variable..."),t.DELETE_VARIABLE=lf('Delete the "%1" variable'),t.DELETE_VARIABLE_CONFIRMATION=lf('Delete %1 uses of the "%2" variable?');var r="variables_set",i=G.blocks.getBlockDefinition(r);t.VARIABLES_SET=i.block.VARIABLES_SET,t.VARIABLES_DEFAULT_NAME=e,t.VARIABLES_SET_CREATE_GET=lf("Create 'get %1'"),m(r);var a="variables_change",s=G.blocks.getBlockDefinition(a);Blockly.Blocks[a]={init:function(){this.jsonInit({message0:s.block.message0,args0:[{type:"field_variable",name:"VAR",variable:e},{type:"input_value",name:"VALUE",check:"Number"}],inputsInline:!0,previousStatement:null,nextStatement:null,colour:G.toolbox.getNamespaceColor("variables")}),h(this,a)}},t.NEW_VARIABLE_TITLE=lf("New variable name:")}(),function(){var e=Blockly.Msg,t="procedures_defnoreturn",n=G.blocks.getBlockDefinition(t);e.PROCEDURES_DEFNORETURN_TITLE=n.block.PROCEDURES_DEFNORETURN_TITLE,e.PROCEDURE_ALREADY_EXISTS=n.block.PROCEDURE_ALREADY_EXISTS,Blockly.Blocks.procedures_defnoreturn.init=function(){var e=new Blockly.FieldTextInput("",Blockly.Procedures.rename);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.setColour(G.toolbox.getNamespaceColor("functions")),this.arguments_=[],this.argumentVarModels_=[],this.setStartHat(!0),this.setStatements_(!0),this.statementConnection_=null},m(t);var o="procedures_callnoreturn",r=G.blocks.getBlockDefinition(o);e.PROCEDURES_CALLRETURN_TOOLTIP=n.tooltip,Blockly.Blocks.procedures_callnoreturn={init:function(){var e=new pxtblockly.FieldProcedure("");e.setSourceBlock(this),this.appendDummyInput("TOPROW").appendField(r.block.PROCEDURES_CALLNORETURN_TITLE).appendField(e,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setColour(G.toolbox.getNamespaceColor("functions")),this.arguments_=[],this.quarkConnections_={},this.quarkIds_=null},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,t){Blockly.Names.equals(e,this.getProcedureCall())&&this.setFieldValue(t,"NAME")},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout&&!this.isInsertionMarker())if(e.type==Blockly.Events.CREATE&&-1!=e.ids.indexOf(this.id)){var t=this.getProcedureCall(),n=Blockly.Procedures.getDefinition(t,this.workspace);if(!n||n.type==this.defType_&&JSON.stringify(n.arguments_)==JSON.stringify(this.arguments_)||(n=null),!n){Blockly.Events.setGroup(e.group);var o=goog.dom.createDom("xml"),r=goog.dom.createDom("block");r.setAttribute("type",this.defType_);var i=this.getRelativeToSurfaceXY(),a=i.x+Blockly.SNAP_RADIUS*(this.RTL?-1:1),s=i.y+2*Blockly.SNAP_RADIUS;r.setAttribute("x",a),r.setAttribute("y",s);var l=goog.dom.createDom("field");l.setAttribute("name","NAME"),l.appendChild(document.createTextNode(this.getProcedureCall())),r.appendChild(l),o.appendChild(r),Blockly.Xml.domToWorkspace(o,this.workspace),Blockly.Events.setGroup(!1)}}else if(e.type==Blockly.Events.DELETE){var c=this.getProcedureCall(),n=Blockly.Procedures.getDefinition(c,this.workspace);n||(Blockly.Events.setGroup(e.group),this.dispose(!0,!1),Blockly.Events.setGroup(!1))}},mutationToDom:function(){var e=document.createElement("mutation");return e.setAttribute("name",this.getProcedureCall()),e},domToMutation:function(e){var t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t)},customContextMenu:function(e){var t={enabled:!0};t.text=Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF;var n=this.getProcedureCall(),o=this.workspace;t.callback=function(){var e=Blockly.Procedures.getDefinition(n,o);e&&e.select()},e.push(t)},defType_:"procedures_defnoreturn"},m(o),Blockly.Procedures.flyoutCategory=function(u){var a=[];if(!G.appTarget.appTheme.hideFlyoutHeadings){var e=l(lf("Functions"),G.toolbox.getNamespaceColor("functions"),G.toolbox.getNamespaceIcon("functions"),"blocklyFlyoutIconfunctions");a.push(e)}var n=lf("Make a Function..."),o=lf("New function name:"),t=goog.dom.createDom("button");t.setAttribute("text",n),t.setAttribute("callbackkey","CREATE_FUNCTION");u.registerButtonCallback("CREATE_FUNCTION",function(e){var t=function(e){Blockly.prompt(o,e,function(e){e&&(e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""))==n&&(e=null),e&&(u.getVariable(e)?Blockly.alert(Blockly.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",e.toLowerCase()),function(){t(e)}):Blockly.Procedures.isLegalName_(e,u)?function(e){var t=u.getTopBlocks(!0)[0],n=10,o=10;if(t){var r=t.getRelativeToSurfaceXY();n=r.x+Blockly.SNAP_RADIUS*(t.RTL?-1:1),o=r.y+2*Blockly.SNAP_RADIUS}var i=goog.dom.createDom("xml"),a=goog.dom.createDom("block");a.setAttribute("type","procedures_defnoreturn"),a.setAttribute("x",String(n)),a.setAttribute("y",String(o));var s=goog.dom.createDom("field");s.setAttribute("name","NAME"),s.appendChild(document.createTextNode(e)),a.appendChild(s),i.appendChild(a);var l=Blockly.Xml.domToWorkspace(i,u);Blockly.hideChaff();var c=u.getBlockById(l[0]);c.select(),u.centerOnBlock(c.id)}(e):Blockly.alert(Blockly.Msg.PROCEDURE_ALREADY_EXISTS.replace("%1",e.toLowerCase()),function(){t(e)}))})};t("doSomething")}),a.push(t);var r=Blockly.Procedures.allProcedures(u);return function(e,t){for(var n=0;n<e.length;n++){var o=e[n][0],r=(e[n][1],goog.dom.createDom("block"));r.setAttribute("type",t),r.setAttribute("gap","16"),r.setAttribute("colour",G.toolbox.getNamespaceColor("functions"));var i=goog.dom.createDom("field",null,o);i.setAttribute("name","NAME"),r.appendChild(i),a.push(r)}}(r[0],"procedures_callnoreturn"),a}}(),function(){var e=Blockly.Msg,t="lists_create_with",n=G.blocks.getBlockDefinition(t);e.LISTS_CREATE_EMPTY_TITLE=n.block.LISTS_CREATE_EMPTY_TITLE,e.LISTS_CREATE_WITH_INPUT_WITH=n.block.LISTS_CREATE_WITH_INPUT_WITH,e.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD=n.block.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD,e.LISTS_CREATE_WITH_ITEM_TITLE=n.block.LISTS_CREATE_WITH_ITEM_TITLE,m(t);var o="lists_length",r=G.blocks.getBlockDefinition(o);e.LISTS_LENGTH_TITLE=r.block.LISTS_LENGTH_TITLE,Blockly.Blocks[o].init=function(){this.jsonInit({message0:e.LISTS_LENGTH_TITLE,args0:[{type:"input_value",name:"VALUE",check:["Array"]}],output:"Number"})},m(o)}(),function(){var e=Blockly.Msg,t="controls_repeat_ext",n=G.blocks.getBlockDefinition(t);e.CONTROLS_REPEAT_TITLE=n.block.CONTROLS_REPEAT_TITLE,e.CONTROLS_REPEAT_INPUT_DO=n.block.CONTROLS_REPEAT_INPUT_DO,m(t);var o="device_while",r=G.blocks.getBlockDefinition(o);Blockly.Blocks[o]={init:function(){this.jsonInit({message0:r.block.message0,args0:[{type:"input_value",name:"COND",check:"Boolean"}],previousStatement:null,nextStatement:null,colour:G.toolbox.getNamespaceColor("loops")}),this.appendStatementInput("DO").appendField(r.block.appendField),h(this,o)}};var i="pxt_controls_for",a=G.blocks.getBlockDefinition(i);Blockly.Blocks[i]={init:function(){this.jsonInit({message0:a.block.message0,args0:[{type:"input_value",name:"VAR",variable:a.block.variable,check:"Variable"},{type:"input_value",name:"TO",check:"Number"}],previousStatement:null,nextStatement:null,colour:G.toolbox.getNamespaceColor("loops"),inputsInline:!0}),this.appendStatementInput("DO").appendField(a.block.appendField);var e=this;y(this,i,a.name,function(){return G.U.rlf(a.tooltip,e.getInputTargetBlock("VAR")?e.getInputTargetBlock("VAR").getField("VAR").getText():"")},a.url,String(G.toolbox.getNamespaceColor("loops")))},getVars:function(){return[this.getField("VAR").getText()]},renameVar:function(e,t){var n=this.getField("VAR");Blockly.Names.equals(e,n.getText())&&n.setText(t)},customContextMenu:function(e){if(!this.isCollapsed()){var t={enabled:!0},n=this.getInputTargetBlock("VAR").getField("VAR").getText();t.text=lf("Create 'get {0}'",n);var o=goog.dom.createDom("field",null,n);o.setAttribute("name","VAR");var r=goog.dom.createDom("block",null,o);r.setAttribute("type","variables_get"),t.callback=Blockly.ContextMenu.callbackFactory(this,r),e.push(t)}}};var s="controls_simple_for",l=G.blocks.getBlockDefinition(s);Blockly.Blocks[s]={init:function(){this.jsonInit({message0:l.block.message0,args0:[{type:"field_variable",name:"VAR",variable:l.block.variable},{type:"input_value",name:"TO",check:"Number"}],previousStatement:null,nextStatement:null,colour:G.toolbox.getNamespaceColor("loops"),inputsInline:!0}),this.appendStatementInput("DO").appendField(l.block.appendField);var e=this;y(this,s,l.name,function(){return G.U.rlf(l.tooltip,e.getField("VAR").getText())},l.url,String(G.toolbox.getNamespaceColor("loops")))},getVars:function(){return[this.getField("VAR").getText()]},renameVar:function(e,t){var n=this.getField("VAR");Blockly.Names.equals(e,n.getText())&&n.setText(t)},customContextMenu:function(e){if(!this.isCollapsed()){var t={enabled:!0},n=this.getField("VAR").getText();t.text=lf("Create 'get {0}'",n);var o=goog.dom.createDom("field",null,n);o.setAttribute("name","VAR");var r=goog.dom.createDom("block",null,o);r.setAttribute("type","variables_get"),t.callback=Blockly.ContextMenu.callbackFactory(this,r),e.push(t)}}}}(),function(){var e=Blockly.Msg,t="controls_if",n=G.blocks.getBlockDefinition(t),o=n.tooltip;e.CONTROLS_IF_MSG_IF=n.block.CONTROLS_IF_MSG_IF,e.CONTROLS_IF_MSG_THEN=n.block.CONTROLS_IF_MSG_THEN,e.CONTROLS_IF_MSG_ELSE=n.block.CONTROLS_IF_MSG_ELSE,e.CONTROLS_IF_MSG_ELSEIF=n.block.CONTROLS_IF_MSG_ELSEIF,e.CONTROLS_IF_TOOLTIP_1=o.CONTROLS_IF_TOOLTIP_1,e.CONTROLS_IF_TOOLTIP_2=o.CONTROLS_IF_TOOLTIP_2,e.CONTROLS_IF_TOOLTIP_3=o.CONTROLS_IF_TOOLTIP_3,e.CONTROLS_IF_TOOLTIP_4=o.CONTROLS_IF_TOOLTIP_4,m(t);var r="logic_compare",i=G.blocks.getBlockDefinition(r).tooltip;e.LOGIC_COMPARE_TOOLTIP_EQ=i.LOGIC_COMPARE_TOOLTIP_EQ,e.LOGIC_COMPARE_TOOLTIP_NEQ=i.LOGIC_COMPARE_TOOLTIP_NEQ,e.LOGIC_COMPARE_TOOLTIP_LT=i.LOGIC_COMPARE_TOOLTIP_LT,e.LOGIC_COMPARE_TOOLTIP_LTE=i.LOGIC_COMPARE_TOOLTIP_LTE,e.LOGIC_COMPARE_TOOLTIP_GT=i.LOGIC_COMPARE_TOOLTIP_GT,e.LOGIC_COMPARE_TOOLTIP_GTE=i.LOGIC_COMPARE_TOOLTIP_GTE,m(r);var a="logic_operation",s=G.blocks.getBlockDefinition(a),l=s.tooltip;e.LOGIC_OPERATION_AND=s.block.LOGIC_OPERATION_AND,e.LOGIC_OPERATION_OR=s.block.LOGIC_OPERATION_OR,e.LOGIC_OPERATION_TOOLTIP_AND=l.LOGIC_OPERATION_TOOLTIP_AND,e.LOGIC_OPERATION_TOOLTIP_OR=l.LOGIC_OPERATION_TOOLTIP_OR,m(a);var c="logic_negate",u=G.blocks.getBlockDefinition(c);e.LOGIC_NEGATE_TITLE=u.block.LOGIC_NEGATE_TITLE,m(c);var g="logic_boolean",p=G.blocks.getBlockDefinition(g);e.LOGIC_BOOLEAN_TRUE=p.block.LOGIC_BOOLEAN_TRUE,e.LOGIC_BOOLEAN_FALSE=p.block.LOGIC_BOOLEAN_FALSE,m(g)}(),function(){var e=G.blocks.getBlockDefinition("text");v("text",e.name,e.tooltip,e.url,Blockly.Colours.textField,Blockly.Colours.textField,Blockly.Colours.textField);var t=Blockly.Msg,n="text_length",o=G.blocks.getBlockDefinition(n);t.TEXT_LENGTH_TITLE=o.block.TEXT_LENGTH_TITLE,Blockly.Blocks[n].init=function(){this.jsonInit({message0:t.TEXT_LENGTH_TITLE,args0:[{type:"input_value",name:"VALUE",check:["String"]}],output:"Number"})},m(n);var r=G.blocks.getBlockDefinition("text_join");t.TEXT_JOIN_TITLE_CREATEWITH=r.block.TEXT_JOIN_TITLE_CREATEWITH,m("text_join")}(),function(){var c=Blockly.BlockDragger.prototype.dragBlock;Blockly.BlockDragger.prototype.dragBlock=function(e,t){var n,o,r=document.getElementsByClassName("blocklyToolboxDiv")[0],i=document.getElementsByClassName("blocklyTreeRoot")[0],a=document.getElementById("blocklyTrashIcon");if(i&&a){var s=(n=i.getBoundingClientRect(),o=e.clientX,Math.abs(o-(n.left+n.width/2)));if(s<200){var l=s/200;a.style.opacity=""+(1-l),a.style.display="block",i.style.opacity=""+l,s<50&&r.classList.add("blocklyToolboxDeleting")}else a.style.display="none",i.style.opacity="1",r.classList.remove("blocklyToolboxDeleting")}return c.call(this,e,t)};var i=Blockly.BlockDragger.prototype.endBlockDrag;Blockly.BlockDragger.prototype.endBlockDrag=function(e,t){i.call(this,e,t);var n=document.getElementsByClassName("blocklyToolboxDiv")[0],o=document.getElementsByClassName("blocklyTreeRoot")[0],r=document.getElementById("blocklyTrashIcon");r&&o&&(r.style.display="none",o.style.opacity="1",n.classList.remove("blocklyToolboxDeleting"))}}(),Blockly.Blocks[pxtc.TS_DEBUGGER_TYPE]={init:function(){this.setColour(G.toolbox.getNamespaceColor("debug")),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setInputsInline(!1),this.appendDummyInput("ON_OFF").appendField(new Blockly.FieldLabel(lf("breakpoint"),void 0),"DEBUGGER").appendField(new pxtblockly.FieldBreakpoint("1",{type:"number"}),"ON_OFF"),y(this,pxtc.TS_DEBUGGER_TYPE,lf("Debugger statement"),lf("A debugger statement invokes any available debugging functionality"),"/javascript/debugger",G.toolbox.getNamespaceColor("debug"))}},Blockly.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="")}function h(e,t){var n=G.blocks.getBlockDefinition(t);y(e,t,n.name,n.tooltip,n.url,G.toolbox.getNamespaceColor(n.category))}function m(e){var t=G.blocks.getBlockDefinition(e);v(e,t.name,t.tooltip,t.url,G.toolbox.getNamespaceColor(t.category))}function y(e,t,n,o,r,i,a,s,l){!o||"string"!=typeof o&&"function"!=typeof o||e.setTooltip(o),r&&e.setHelpUrl(r),i&&e.setColour(i,a,s),l&&e.setDeletable(!1);var c=document.getElementById("blocklyToolboxDefinition"),u=c?M.getFirstChildWithAttr(c,"block","type",t):void 0;e.codeCard={header:n,name:n,software:1,description:goog.isFunction(o)?o(e):o,blocksXml:u?'<xml xmlns="http://www.w3.org/1999/xhtml">'+(g(u)||'<block type="'+t+'"></block>')+"</xml>":void 0,url:r}}function v(e,t,n,o,r,i,a){var s=Blockly.Blocks[e],l=s.init;l&&(s.init=function(){l.call(this);y(this,e,t,n,o,r,i,a)})}function s(e){delete Blockly.Blocks[e.attributes.blockId],delete u[e.attributes.blockId]}function b(e,t){for(;e;)!e.isUserCollapsible_||!e.getTree()||e==t||t&&k(t,e)||(e.setExpanded(!1),e.updateRow()),e=e.getParent()}function k(e,t){var n=e.getParent();return!!n&&(n===t||k(n,t))}function T(e,t,n,o){var r=document.createElement(o?"shadow":"block");r.setAttribute("type",G.Util.htmlEscape(e));var i=document.createElement("field");return i.setAttribute("name",G.Util.htmlEscape(t)),i.textContent=G.Util.htmlEscape(n),r.appendChild(i),r}M.installHelpResources=v,M.onShowContextMenu=void 0,M.mkPredicateBlock=function(e){var t=document.createElement("block");t.setAttribute("type",e);var n=document.createElement("value");n.setAttribute("name","PREDICATE"),t.appendChild(n);var o=T("logic_boolean","BOOL","TRUE",!0);return n.appendChild(o),t},M.mkFieldBlock=T;var U={};function H(e,t){return{field:e,name:t}}M.setVarFieldValue=function(e,t,n){var o=e.getField(t),r=e.workspace.getAllVariables(),i=!1;if(r&&r.length)for(var a=0;a<r.length;a++){var s=r[a];s.name===n&&(o.setValue(s.getId()),i=!0)}i||(o.initModel(),o.getVariable().name=n)}}(G.blocks||(G.blocks={}))}(pxt||(pxt={})),function(s){!function(a){var l,e;(e=l=a.MutatorTypes||(a.MutatorTypes={})).ObjectDestructuringMutator="objectdestructuring",e.RestParameterMutator="restparameter",e.DefaultInstanceMutator="defaultinstance",a.addMutation=function(e,t,n){var o;switch(n){case l.ObjectDestructuringMutator:if(!t.parameters||t.parameters.length<1)console.error("Destructuring mutations require at least one parameter");else{for(var r=!1,i=0,a=t.parameters;i<a.length;i++){var s=a[i];if(-1!==s.type.indexOf("=>")){if(!s.properties||0===s.properties.length)return void console.error("Destructuring mutations only supported for functions with an event parameter that has multiple properties");r=!0}}if(!r)return void console.error("Destructuring mutations must have an event parameter")}o=new c(e,t);break;case l.RestParameterMutator:o=new u(e,t);break;case l.DefaultInstanceMutator:o=new g(e,t);break;default:return void console.warn("Ignoring unknown mutation type: "+n)}e.mutationToDom=o.mutationToDom.bind(o),e.domToMutation=o.domToMutation.bind(o),e.compose=o.compose.bind(o),e.decompose=o.decompose.bind(o),e.mutation=o},a.mutateToolboxBlock=function(e,t,n){var o=document.createElement("mutation");switch(t){case l.ObjectDestructuringMutator:o.setAttribute(c.propertiesAttributeName,n);break;case l.RestParameterMutator:o.setAttribute(u.countAttributeName,n);break;case l.DefaultInstanceMutator:o.setAttribute(g.attributeName,n);default:return void console.warn("Ignoring unknown mutation type: "+t)}e.appendChild(o)};var r=function(){function a(e,t){this.info=t,this.block=e,this.topBlockType=this.block.type+"_mutator";var n=this.getSubBlockNames();this.initializeMutatorTopBlock(),this.initializeMutatorSubBlocks(n);var o=n.map(function(e){return e.type});this.block.setMutator(new Blockly.Mutator(o))}return a.prototype.compose=function(e){var t=e.getDescendants().map(function(e){return{type:e.type,name:e.inputList[0].name}});t.shift(),this.updateBlock(t)},a.prototype.decompose=function(o){var e=o.newBlock(this.topBlockType);e.initSvg();for(var t=function(e){if(e.name===a.mutatorStatmentInput){var n=e.connection;return r.getVisibleBlockTypes().forEach(function(e){var t=o.newBlock(e);t.initSvg(),n.connect(t.previousConnection),n=t.nextConnection}),"break"}},r=this,n=0,i=e.inputList;n<i.length;n++){if("break"===t(i[n]))break}return e},a.prototype.compileMutation=function(e,t){},a.prototype.getDeclaredVariables=function(){},a.prototype.isDeclaredByMutation=function(e){return!1},a.prototype.initializeMutatorSubBlock=function(e,t,n){e.appendDummyInput(t).appendField(t),e.setColour(n),e.setNextStatement(!0),e.setPreviousStatement(!0)},a.prototype.initializeMutatorTopBlock=function(){var e=this.info.attributes.mutateText,t=this.block.getColour();Blockly.Blocks[this.topBlockType]=Blockly.Blocks[this.topBlockType]||{init:function(){this.appendDummyInput().appendField(e),this.setColour(t),this.appendStatementInput(a.mutatorStatmentInput)}}},a.prototype.initializeMutatorSubBlocks=function(e){var t=this.block.getColour(),n=this.initializeMutatorSubBlock.bind(this);e.forEach(function(e){Blockly.Blocks[e.type]=Blockly.Blocks[e.type]||{init:function(){n(this,e.name,t)}}})},a.mutatorStatmentInput="PROPERTIES",a.mutatedVariableInputName="properties",a}(),c=function(o){function i(e,t){var n=o.call(this,e,t)||this;return n.currentlyVisible=[],n.parameterRenames={},n.prefix=n.info.attributes.mutatePrefix,n.block.appendDummyInput(r.mutatedVariableInputName),n.block.appendStatementInput("HANDLER").setCheck("null"),n}return __extends(i,o),i.prototype.getMutationType=function(){return l.ObjectDestructuringMutator},i.prototype.compileMutation=function(r,e){var i=this;if(this.info.attributes.mutatePropertyEnum||this.parameters.length){var t="function ({ "+this.parameters.map(function(e){var t=i.block.getField(e),n=t&&t.getText(),o=a.escapeVarName(e,r);return n!==e?(i.parameterRenames[e]=n,e+": "+a.escapeVarName(n,r)):o}).join(", ")+" })";return this.info.attributes.mutatePropertyEnum?a.mkText(" ["+this.parameters.map(function(e){return i.info.attributes.mutatePropertyEnum+"."+e}).join(", ")+"],"+t):a.mkText(t)}},i.prototype.getDeclaredVariables=function(){var t=this,n={};return this.parameters.forEach(function(e){n[t.getVarFieldValue(e)]=t.parameterTypes[e]}),n},i.prototype.isDeclaredByMutation=function(t){var n=this;return this.parameters.some(function(e){return n.getVarFieldValue(e)===t})},i.prototype.mutationToDom=function(){var n=this,e=document.createElement("mutation"),t=this.parameters.map(function(e){var t=n.getVarFieldValue(e);return t!==e&&(n.parameterRenames[e]=s.Util.htmlEscape(t)),s.Util.htmlEscape(e)}).join(",");for(var o in e.setAttribute(i.propertiesAttributeName,t),this.parameterRenames)o===this.parameterRenames[o]&&delete this.parameterRenames[o];return e.setAttribute(i.renameAttributeName,JSON.stringify(this.parameterRenames)),e},i.prototype.domToMutation=function(e){var n=this,t=e.getAttribute(i.propertiesAttributeName);if(t){var o=t.split(","),r=[];if(void 0===this.paramIndex&&(this.paramIndex=this.getParameterIndex()),o.forEach(function(e){var t=e.split(":");n.info.parameters[n.paramIndex].properties.some(function(e){return e.name===t[0]})&&r.push({property:t[0],newName:t[1]})}),this.parameterRenames=void 0,e.hasAttribute(i.renameAttributeName))try{this.parameterRenames=JSON.parse(e.getAttribute(i.renameAttributeName))}catch(e){console.warn("Ignoring invalid rename map in saved block mutation")}this.parameterRenames=this.parameterRenames||{},this.parameters=[],r.forEach(function(e){n.parameters.push(e.property),e.newName&&e.newName!==e.property&&(n.parameterRenames[e.property]=e.newName)}),this.updateVisibleProperties(),r.filter(function(e){return!!e.newName}).forEach(function(e){return n.setVarFieldValue(e.property,e.newName)})}},i.prototype.getVarFieldValue=function(e){var t=this.block.getField(e);return t&&t.getText()},i.prototype.setVarFieldValue=function(e,t){this.block.getField(e);this.block.getField(e)&&a.setVarFieldValue(this.block,e,t)},i.prototype.updateBlock=function(e){var t=this;this.parameters=[],e.forEach(function(e){-1===t.parameters.indexOf(e.name)&&t.parameters.push(e.name)}),this.updateVisibleProperties()},i.prototype.getSubBlockNames=function(){var t=this;return this.parameters=[],this.parameterTypes={},void 0===this.paramIndex&&(this.paramIndex=this.getParameterIndex()),this.info.parameters[this.paramIndex].properties.map(function(e){return t.parameterTypes[e.name]=e.type,{type:t.propertyId(e.name),name:e.name}})},i.prototype.getVisibleBlockTypes=function(){var t=this;return this.currentlyVisible.map(function(e){return t.propertyId(e)})},i.prototype.updateVisibleProperties=function(){var n=this;if(!s.Util.listsEqual(this.currentlyVisible,this.parameters)){var o=this.block.inputList.filter(function(e){return e.name===r.mutatedVariableInputName})[0];this.prefix&&0===this.currentlyVisible.length&&o.appendField(this.prefix,i.prefixLabel),this.currentlyVisible.forEach(function(e){if(-1===n.parameters.indexOf(e)){var t=n.getVarFieldValue(e);t!==e&&(n.parameterRenames[e]=t),o.removeField(e)}}),this.parameters.forEach(function(e){if(-1===n.currentlyVisible.indexOf(e)){var t=n.parameterRenames[e]||e;o.appendField(new Blockly.FieldVariable(t),e)}}),this.prefix&&0===this.parameters.length&&o.removeField(i.prefixLabel),this.currentlyVisible=this.parameters}},i.prototype.propertyId=function(e){return this.block.type+"_"+e},i.prototype.getParameterIndex=function(){for(var e=0;e<this.info.parameters.length;e++)if(-1!==this.info.parameters[e].type.indexOf("=>"))return e},i.propertiesAttributeName="callbackproperties",i.renameAttributeName="renamemap",i.prefixLabel="0prefix_label_",i}(r),u=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.count=0,e}return __extends(r,t),r.prototype.getMutationType=function(){return l.RestParameterMutator},r.prototype.compileMutation=function(t,n){var o=[];return this.forEachInput(function(e){return o.push(a.compileExpression(t,e,n))}),a.mkGroup(o)},r.prototype.mutationToDom=function(){var e=document.createElement("mutation");return e.setAttribute(r.countAttributeName,this.count.toString()),e},r.prototype.domToMutation=function(e){var t=e.getAttribute(r.countAttributeName);if(t){try{this.count=parseInt(t)}catch(e){return}for(var n=0;n<this.count;n++)this.addNumberField(!1,n)}},r.prototype.updateBlock=function(e){if(e){var t=Math.abs(this.count-e.length);if(this.count<e.length)for(var n=0;n<t;n++)this.addNumberField(!0,this.count);else if(this.count>e.length)for(n=0;n<t;n++)this.removeNumberField()}},r.prototype.getSubBlockNames=function(){return[{name:"Value",type:r.entryTypeName}]},r.prototype.getVisibleBlockTypes=function(){var e=[];return this.forEachInput(function(){return e.push(r.entryTypeName)}),e},r.prototype.addNumberField=function(e,t){var n=this.block.appendValueInput(r.valueInputPrefix+t).setCheck("Number");if(e){var o=this.block.workspace.newBlock("math_number");o.initSvg(),o.setShadow(!0),n.connection.connect(o.outputConnection),this.block.workspace.render(),this.count++}},r.prototype.removeNumberField=function(){0<this.count&&this.block.removeInput(r.valueInputPrefix+(this.count-1)),this.count--},r.prototype.forEachInput=function(e){for(var t=0;t<this.count;t++)e(this.block.getInputTargetBlock(r.valueInputPrefix+t),t)},r.countAttributeName="count",r.entryTypeName="entry",r.valueInputPrefix="value_input_",r}(r),g=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.showing=!1,e}return __extends(o,t),o.prototype.getMutationType=function(){return l.DefaultInstanceMutator},o.prototype.compileMutation=function(e,t){if(this.showing){var n=this.block.getInputTargetBlock(o.instanceInputName);if(n)return a.compileExpression(e,n,t)}},o.prototype.mutationToDom=function(){var e=document.createElement("mutation");return e.setAttribute(o.attributeName,this.showing?"true":"false"),e},o.prototype.domToMutation=function(e){var t=e.getAttribute(o.attributeName);t?this.updateShape("true"===t):this.updateShape(!1)},o.prototype.updateBlock=function(e){this.updateShape(!(!e||!e.length))},o.prototype.getSubBlockNames=function(){return[{name:"Instance",type:o.instanceSubBlockType}]},o.prototype.getVisibleBlockTypes=function(){var e=[];return this.showing&&e.push(o.instanceSubBlockType),e},o.prototype.updateShape=function(e){this.showing!==e&&(e&&!this.block.getInputTargetBlock(o.instanceInputName)?this.block.appendValueInput(o.instanceInputName):this.block.removeInput(o.instanceInputName),this.showing=e)},o.attributeName="showing",o.instanceInputName="__instance__",o.instanceSubBlockType="instance",o}(r)}(s.blocks||(s.blocks={}))}(pxt||(pxt={})),function(s){var e,l,c,u,t;e=s.blocks||(s.blocks={}),(t=u=e.BlockLayout||(e.BlockLayout={}))[t.Align=1]="Align",t[t.Clean=3]="Clean",t[t.Flow=4]="Flow",e.render=function(e,t){void 0===t&&(t={emPixels:14,layout:u.Flow}),l||((c=document.createElement("div")).style.position="absolute",c.style.top="0",c.style.left="0",c.style.width="1px",c.style.height="1px",document.body.appendChild(c),l=Blockly.inject(c,{scrollbars:!1,readOnly:!0,sound:!1,media:s.webConfig.commitCdnUrl+"blockly/media/",rtl:s.Util.isUserLanguageRtl()})),l.clear();try{var n=e||'<xml xmlns="http://www.w3.org/1999/xhtml"></xml>',o=Blockly.Xml.textToDom(n);switch(Blockly.Events.disable(),Blockly.Xml.domToWorkspace(o,l),Blockly.Events.enable(),t.layout){case u.Align:s.blocks.layout.verticalAlign(l,t.emPixels||14);break;case u.Flow:s.blocks.layout.flow(l,{ratio:t.aspectRatio,useViewWidth:t.useViewWidth});break;case u.Clean:l.cleanUp_&&l.cleanUp_()}var r=l.getMetrics(),i=c.querySelectorAll("svg")[0].cloneNode(!0);Blockly.utils.removeClass(i,"blocklySvg"),Blockly.utils.addClass(i,"blocklyPreview"),s.U.toArray(i.querySelectorAll(".blocklyBlockCanvas,.blocklyBubbleCanvas")).forEach(function(e){return e.setAttribute("transform","translate("+-r.contentLeft+", "+-r.contentTop+") scale(1)")});var a=i.querySelectorAll(".blocklyMainBackground")[0];return a.parentNode.removeChild(a),i.setAttribute("viewBox","0 0 "+r.contentWidth+" "+r.contentHeight),i.removeAttribute("width"),i.removeAttribute("height"),t.emPixels&&(i.style.width=r.contentWidth/t.emPixels+"em",i.style.height=r.contentHeight/t.emPixels+"em"),i}catch(e){return s.reportException(e),l&&l.dispose(),void(l=void 0)}},e.blocksMetrics=function(e){var t=e.getTopBlocks(!1);if(!t.length)return{width:0,height:0};var n=void 0;return t.forEach(function(e){var t=e.getBoundingRectangle();n?(n.l=Math.min(n.l,t.topLeft.x),n.r=Math.max(n.r,t.bottomRight.y),n.t=Math.min(n.t,t.topLeft.y),n.b=Math.min(n.b,t.bottomRight.y)):n={l:t.topLeft.x,r:t.bottomRight.x,t:t.topLeft.y,b:t.bottomRight.y}}),{width:n.r-n.l,height:n.b-n.t}}}(pxt||(pxt={})),function(A){var e,t;t=A.docs||(A.docs={}),e=t.codeCard||(t.codeCard={}),A.Util.repeatMap,e.render=function(e,t){void 0===t&&(t={});var n=A.Util.repeatMap,o=e.color||"";o||(e.hardware&&!e.software?o="black":e.software&&!e.hardware&&(o="teal"));var r=e.url?/^[^:]+:\/\//.test(e.url)?e.url:"/"+e.url.replace(/^\.?\/?/,""):void 0,i=!!r,a=function(e,t,n,o){void 0===n&&(n="div"),void 0===o&&(o="");var r=document.createElement(n);return t&&(r.className=t),e&&e.appendChild(r),o&&r.appendChild(document.createTextNode(o+"")),r},s=a(null,"ui card "+(e.color||"")+(i?" link":""),i?"a":"div");if(s.setAttribute("role","option"),s.setAttribute("aria-selected","true"),r&&(s.href=r),!t.hideHeader&&(e.header||e.blocks||e.javascript||e.hardware||e.software||e.any)){var l=a(s,"ui content "+(e.responsive?" tall desktop only":"")),c=a(l,"right floated meta");e.any&&a(c,"ui grey circular label tiny","i",0<e.any?e.any:""),n(e.blocks,function(e){return a(c,"puzzle orange icon","i")}),n(e.javascript,function(e){return a(c,"align left blue icon","i")}),n(e.hardware,function(e){return a(c,"certificate black icon","i")}),n(e.software,function(e){return a(c,"square teal icon","i")}),e.header&&a(l,"description","span",e.header)}var u,g,p,d,_,f=(t.shortName?e.shortName:"")||e.name,h=a(s,"ui image"+(e.responsive?" tall landscape only":""));if(e.label){var m=document.createElement("label");m.className="ui "+(e.labelClass?e.labelClass:"orange right ribbon")+" label",m.textContent=e.label,h.appendChild(m)}if(e.blocksXml){var y=A.blocks.render(e.blocksXml);if(y){var v=a(h,"");v.setAttribute("style","width:100%; min-height:10em"),v.appendChild(y)}else console.error("failed to render blocks"),A.debug(e.blocksXml)}if(e.typeScript){var b=document.createElement("pre");b.appendChild(document.createTextNode(e.typeScript)),h.appendChild(b)}if(e.imageUrl){var k=document.createElement("div");k.className="ui imagewrapper";var T=document.createElement("img");T.className="ui cardimage",T.src=e.imageUrl,T.alt=f,T.onerror=function(){k.remove()},T.setAttribute("role","presentation"),k.appendChild(T),h.appendChild(k)}if(e.youTubeId){var E=document.createElement("img");E.className="ui image",E.src="https://img.youtube.com/vi/"+e.youTubeId+"/0.jpg",h.appendChild(E)}if("file"==e.cardType){var S=a(s,"ui fileimage");h.appendChild(S)}if(f||e.description){var C=a(s,"ui content");f&&(s.setAttribute("aria-label",f),r&&!i?(u=C,g=r,p=f,d="header",(_=document.createElement("a")).className=d,_.href=g,_.appendChild(document.createTextNode(p)),_.target="_blank",u.appendChild(_)):a(C,"header","div",f)),e.description&&a(C,"ui description").appendChild(document.createTextNode(e.description.split(".")[0]+"."))}if(e.time){var x=a(s,"meta");e.time&&a(x,"date","span").appendChild(document.createTextNode(A.Util.timeSince(e.time)))}return e.extracontent&&a(s,"extra content","div").appendChild(document.createTextNode(e.extracontent)),s}}(pxt||(pxt={})),function(D){!function(C){function x(e,t){var n=e,o=n.mutationToDom,r=n.domToMutation;n.mutationToDom=function(){var e=o?o():document.createElement("mutation");return t.mutationToDom(e)},n.domToMutation=function(e){r&&r(e),t.domToMutation(e)}}function A(e){switch(e){case"number":return"math_number";case"boolean":return"logic_boolean";case"string":return"text"}if(C.isArrayType(e))return"lists_create_with"}C.appendMutation=x,C.initVariableArgsBlock=function(i,a){var s=0,o=0,r=i.appendDummyInput(),l=function(){if(s!==o){if(o<s)for(var e=s-o,t=0;t<e;t++){var n=a[o+t];r.insertFieldAt(r.fieldRow.length-1,new Blockly.FieldVariable(n.name),"HANDLER_"+n.name)}else for(e=o-s,t=0;t<e;t++)n=a[o-t-1],r.removeField("HANDLER_"+n.name);s>=a.length?r.removeField("_HANDLER_ADD"):o>=a.length&&c(),o=s}};function c(){r.appendField(new Blockly.FieldImage(i.ADD_IMAGE_DATAURI,24,24,!1,lf("Add argument"),function(){s=Math.min(s+1,a.length),l()}),"_HANDLER_ADD")}Blockly.Extensions.apply("inline-svgs",i,!1),c(),x(i,{mutationToDom:function(e){e.setAttribute("numArgs",s.toString());for(var t=0;t<s;t++){var n=i.getField("HANDLER_"+a[t].name),o=n&&n.getText();e.setAttribute("arg"+t,o)}return e},domToMutation:function(e){var t=parseInt(e.getAttribute("numargs"));s=Math.min(isNaN(t)?0:t,a.length),l();for(var n=0;n<s;n++){var o=e.getAttribute("arg"+n),r="HANDLER_"+a[n].name;i.getField(r)&&C.setVarFieldValue(i,r,o)}}})},C.initExpandableBlock=function(g,p,d,e,t){var n="0_add_button",o="0_rem_button",r="_expanded",i="_input_init",_=p.parameters.map(function(e){return e.name}),f=p.parameters.length,a=e?f:1,h=0,m=!1,s=!1,l=!1;Blockly.Extensions.apply("inline-svgs",g,!1);var c=function(){g.rendered&&!g.workspace.isDragging()&&(u(0,void 0,!0),v(),g.workspace.removeChangeListener(c))};function u(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var o=E(e);if((n||t||o!==h)&&(h=o,m||!(0<h)||(T(),g.rendered))){for(var r=0,i=0;i<g.inputList.length;i++){var a=g.inputList[i];if(D.Util.startsWith(a.name,C.optionalDummyInputPrefix))S(a,r<h||h===f);else if(D.Util.startsWith(a.name,C.optionalInputWithFieldPrefix)||-1!==_.indexOf(a.name)){var s=r<h;if(S(a,s),s&&a.connection&&!a.connection.isConnected()&&!g.isInsertionMarker()){var l=d.definitionNameToParam[p.parameters[r].name],c=l.shadowBlockId||A(l.type);if(c){var u=g.workspace.newBlock(c);u.setShadow(!0),u.initSvg&&u.initSvg(),a.connection.connect(u.outputConnection),u.render&&u.render()}}++r}}v(),t||g.render()}}function y(e,t,n,o){g.appendDummyInput(e).appendField(new Blockly.FieldImage(t,24,24,!1,n,function(){return u(o)}))}function v(){var e=h!==f,t=0!==h;e||(s=!1,g.removeInput(n,!0)),t||(l=!1,g.removeInput(o,!0)),t&&!l&&(s?(g.removeInput(n,!0),k(),b()):k()),e&&!s&&b()}function b(){s=!0,y(n,g.ADD_IMAGE_DATAURI,lf("Reveal optional arguments"),a)}function k(){l=!0,y(o,g.REMOVE_IMAGE_DATAURI,lf("Hide optional arguments"),-1*a)}function T(){m=!0,t(),v()}function E(e){return Math.min(Math.max(h+e,0),f)}function S(e,t){g.rendered&&e.setVisible(t)}g.workspace.addChangeListener(c),x(g,{mutationToDom:function(e){return e.setAttribute(r,h.toString()),e.setAttribute(i,m.toString()),e},domToMutation:function(e){if(e.hasAttribute(i)&&"true"==e.getAttribute(i)&&!m&&T(),e.hasAttribute(r)){var t=parseInt(e.getAttribute(r));if(!isNaN(t))return void(m?h=E(t):u(t,!0))}}})}}(D.blocks||(D.blocks={}))}(pxt||(pxt={})),function(i){var n,o,a;n=i.blocks||(i.blocks={}),a=i.blocks.MATH_FUNCTIONS.unary.concat(i.blocks.MATH_FUNCTIONS.binary),n.initMathOpBlock=function(){var e="math_js_op",t=i.blocks.getBlockDefinition(e);function r(e,t){var n=e.appendValueInput("ARG"+(t?1:0));n.setCheck("Number"),t&&(n.connection.setShadowDom(function(){if(!o){(o=document.createElement("shadow")).setAttribute("type","math_number");var e=document.createElement("field");e.setAttribute("name","NUM"),e.textContent="0",o.appendChild(e)}return o}()),n.connection.respawnShadow_())}Blockly.Blocks[e]={init:function(){var o=this;o.setPreviousStatement(!1),o.setNextStatement(!1),o.setOutput(!0,"Number"),o.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),o.setInputsInline(!0),o.appendDummyInput("op_dropdown").appendField(new Blockly.FieldDropdown(a.map(function(e){return[t.block[e],e]}),function(e){return t=o,n=e,void(-1!==i.blocks.MATH_FUNCTIONS.unary.indexOf(n)?t.removeInput("ARG1",!0):t.getInput("ARG1")||r(t,!0));var t,n}),"OP"),r(o,!1),n.appendMutation(o,{mutationToDom:function(e){return e.setAttribute("op-type",(o.getInput("ARG1",!0)?"binary":"unary").toString()),e},domToMutation:function(e){e.hasAttribute("op-type")&&"binary"==e.getAttribute("op-type")&&r(o,!0)}})}},n.installHelpResources(e,t.name,function(e){return t.tooltip[e.getFieldValue("OP")]},t.url,i.toolbox.getNamespaceColor(t.category))}}(pxt||(pxt={})),function(t){var e=function(r){function e(e,t,n){var o=r.call(this,e,n)||this;return o.isFieldCustom_=!0,o.CURSOR="pointer",o.params=t,o.setValue(e),o.addArgType("toggle"),o.type_=t.type,o}return __extends(e,r),e.prototype.init=function(){if(!this.fieldGroup_){this.fieldGroup_=Blockly.utils.createSvgElement("g",{},null),this.visible_||(this.fieldGroup_.style.display="none"),null!==this.getArgTypes()&&(this.sourceBlock_.isShadow()?this.sourceBlock_.svgGroup_.setAttribute("data-argument-type",this.getArgTypes()):this.fieldGroup_.setAttribute("data-argument-type",this.getArgTypes()));var e=this.getSize();this.checkElement_=Blockly.utils.createSvgElement("g",{class:"blocklyToggle "+(this.state_?"blocklyToggleOnBreakpoint":"blocklyToggleOffBreakpoint"),transform:"translate(8, "+e.height/2+")"},this.fieldGroup_),this.toggleThumb_=Blockly.utils.createSvgElement("polygon",{class:"blocklyToggleRect",points:"50,5 100,5 125,30 125,80 100,105 50,105 25,80 25,30"},this.checkElement_);var t=this.sourceBlock_.RTL?-e.width/2:e.width/2;this.textElement_=Blockly.utils.createSvgElement("text",{class:"blocklyText",x:t,dy:"0.6ex",y:e.height/2},this.fieldGroup_),this.updateEditable(),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.switchToggle(this.state_),this.setValue(this.getValue()),this.render_(),this.size_.width=0,this.mouseDownWrapper_=Blockly.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)}},e.prototype.updateWidth=function(){this.size_.width=30,this.arrowWidth_=0},e.prototype.getValue=function(){return this.toVal(this.state_)},e.prototype.setValue=function(e){var t=this.fromVal(e);this.state_!==t&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.state_,t)),this.state_=t,this.switchToggle(this.state_))},e.prototype.switchToggle=function(e){this.checkElement_&&(this.updateWidth(),e?(t.svg.addClass(this.checkElement_,"blocklyToggleOnBreakpoint"),t.svg.removeClass(this.checkElement_,"blocklyToggleOffBreakpoint")):(t.svg.removeClass(this.checkElement_,"blocklyToggleOnBreakpoint"),t.svg.addClass(this.checkElement_,"blocklyToggleOffBreakpoint")),this.checkElement_.setAttribute("transform","translate(-7, -1) scale(0.3)"))},e.prototype.updateTextNode_=function(){r.prototype.updateTextNode_.call(this),this.textElement_&&t.svg.addClass(this.textElement_,"blocklyToggleText")},e.prototype.render_=function(){this.visible_&&this.textElement_&&(goog.dom.removeChildren(this.textElement_),this.updateWidth())},e.prototype.showEditor_=function(){var e=!this.state_;null!==e&&this.setValue(this.toVal(e))},e.prototype.toVal=function(e){return"number"==this.type_?String(e?"1":"0"):String(e?"true":"false")},e.prototype.fromVal=function(e){return"string"==typeof e?"1"==e||"TRUE"==e.toUpperCase():!!e},e}(Blockly.FieldNumber);t.FieldBreakpoint=e}(pxtblockly||(pxtblockly={})),function(e){var t=function(r){function e(e,t,n){var o=r.call(this,String(e),"0","255",null,"10","Color",n)||this;return o.isFieldCustom_=!0,o.params=t,o.params.min&&(o.min_=parseFloat(o.params.min)),o.params.max&&(o.max_=parseFloat(o.params.max)),o.params.label&&(o.labelText_=o.params.label),o.params.channel&&(o.channel_=o.params.channel),o}return __extends(e,r),e.prototype.setBackground_=function(e){var t=this.createColourStops_().join(",");goog.style.setStyle(e,"background","-moz-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-webkit-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-o-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","-ms-linear-gradient(left, "+t+")"),goog.style.setStyle(e,"background","linear-gradient(left, "+t+")"),this.params.sliderWidth&&goog.style.setStyle(e,"width",this.params.sliderWidth+"px")},e.prototype.setReadout_=function(e,t){var n=this.colorWheel(parseInt(t),this.channel_),o=document.createElement("span");o.className="blocklyColorReadout",o.style.backgroundColor=""+n,pxsim.U.clear(e),e.appendChild(o)},e.prototype.createColourStops_=function(){for(var e=[],t=0;t<=255;t+=20)e.push(this.colorWheel(t,this.channel_));return e},e.prototype.colorWheel=function(e,t){return"hsvfast"==t?this.hsvFast(e,255,255):(e=255-e)<85?this.hex(3*e,255,255-3*e):e<170?(e-=85,this.hex(255,255-3*e,3*e)):(e-=170,this.hex(255-3*e,3*e,255))},e.prototype.hsvFast=function(e,t,n){var o=e%255>>0;o<0&&(o+=255);var r,i,a,s=n*(255-t)/255>>0,l=n-s,c=(o=192*o/255>>0)/64>>0,u=o%64>>0,g=(u*l/63.75>>0)+s,p=((63-u)*l/63.75>>0)+s;return c?1==c?(r=s,i=p,a=g):(r=g,i=s,a=p):(r=p,i=g,a=s),this.hex(r,i,a)},e.prototype.hex=function(e,t,n){return"#"+this.componentToHex(255&e)+this.componentToHex(255&t)+this.componentToHex(255&n)},e.prototype.componentToHex=function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},e}(Blockly.FieldSlider);e.FieldColorWheel=t}(pxtblockly||(pxtblockly={})),function(e){var t=function(i){function e(e,t,n){var o=i.call(this,e,n)||this;if(o.isFieldCustom_=!0,o.valueMode_="rgb",t.colours)o.setColours(JSON.parse(t.colours));else if(pxt.appTarget.runtime&&pxt.appTarget.runtime.palette){var r=pxt.Util.clone(pxt.appTarget.runtime.palette);r[0]="#dedede",o.setColours(r)}return t.columns&&o.setColumns(parseInt(t.columns)),t.className&&(o.className_=t.className),t.valueMode&&(o.valueMode_=t.valueMode),o}return __extends(e,i),e.prototype.getValue=function(e){if(e)return this.colour_;switch(this.valueMode_){case"hex":return'"'+this.colour_+'"';case"rgb":return-1<this.colour_.indexOf("#")?"0x"+this.colour_.replace(/^#/,""):this.colour_;case"index":return this.getColours_().indexOf(this.colour_).toString()}return this.colour_},e.prototype.setValue=function(e){if(-1<e.indexOf("0x"))e="#"+e.substr(2);else if("index"===this.valueMode_){var t=this.getColours_();if(-1===t.indexOf(e)){var n=parseInt(e);e=!isNaN(n)&&0<=n&&n<t.length?t[n]:t[0]}}this.sourceBlock_&&Blockly.Events.isEnabled()&&this.colour_!=e&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.colour_,e)),this.colour_=e,this.sourceBlock_&&this.sourceBlock_.setColour(e,e,e)},e.prototype.showEditor_=function(){i.prototype.showEditor_.call(this),this.className_&&this.colorPicker_&&Blockly.utils.addClass(this.colorPicker_.getElement(),this.className_)},e.prototype.getColours_=function(){return this.colours_},e}(Blockly.FieldColour);e.FieldColorNumber=t}(pxtblockly||(pxtblockly={})),function(a){var e=function(i){function e(e,t,n){var o=i.call(this,t.data)||this;o.isFieldCustom_=!0,o.tooltips_=[],o.columns_=parseInt(t.columns)||4,o.maxRows_=parseInt(t.maxRows)||0,o.width_=parseInt(t.width)||400,o.backgroundColour_=a.parseColour(t.colour),o.itemColour_=t.itemColour||"rgba(255, 255, 255, 0.6)",o.borderColour_=pxt.toolbox.fadeColor(o.backgroundColour_,.4,!1);var r={xOffset:parseInt(t.tooltipsXOffset)||15,yOffset:parseInt(t.tooltipsYOffset)||-10};return o.tooltipConfig_=r,o.hasSearchBar_=!!t.hasSearchBar||!1,o.hideRect_=!!t.hideRect||!1,o}return __extends(e,i),e.prototype.dispose=function(){i.prototype.dispose.call(this),this.disposeTooltips()},e.prototype.populateTableContainer=function(e,t){this.disposeTooltips(),t.removeChildren(!0),0==e.length&&(this.firstItem_=void 0);for(var n=0;n<e.length/this.columns_;n++){var o=this.createRow(n,e);t.addChild(o,!0)}var r=t.getElement();if(r){var i=r.childNodes;for(n=0;n<i.length;++n){i[n].className="blocklyGridPickerRow"}}},e.prototype.createTooltips=function(s,e){for(var l=this,c=s.length<this.columns_,u=e.getElement().getElementsByClassName("goog-menuitem"),g=-1,t=function(e){var t=u[e];t.style.borderColor=p.backgroundColour_,t.style.backgroundColor=p.itemColour_,c&&(t.className+=" floatLeft");var n=s[e][0].alt;if(n){var o=new goog.ui.Tooltip(t,n),r=o.onShow,i=p.sourceBlock_.RTL?-p.tooltipConfig_.xOffset:p.tooltipConfig_.xOffset;o.onShow=function(){r.call(o);var e=new goog.positioning.ClientPosition(o.cursorPosition.x+i,o.cursorPosition.y+l.tooltipConfig_.yOffset);o.setPosition(e)},o.setShowDelayMs(0),o.className="goog-tooltip blocklyGridPickerTooltip",t.addEventListener("mousemove",function(e){var t=new goog.positioning.ClientPosition(e.clientX+i,e.clientY+l.tooltipConfig_.yOffset);o.setPosition(t)}),p.tooltips_.push(o)}else{var a=goog.style.getSize(t).width;g<a&&(g=a)}},p=this,n=0;n<u.length;++n)t(n);if(-1<g)for(n=0;n<u.length;++n){var o=u[n];goog.style.setWidth(o,g)}},e.prototype.shouldShowRect_=function(){return!this.hideRect_&&!this.sourceBlock_.isShadow()},e.prototype.selectItem=function(e){this.menu_&&(this.onItemSelected(this.menu_,e),this.close())},e.prototype.setValue=function(e){if(null!==e&&e!==this.value_){this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.value_,e)),this.selectedItem&&(this.selectedItem.setChecked(!1),this.selectedItem=null),this.value_=e;for(var t=this.getOptions(),n=0;n<t.length;n++)if(t[n][1]==e){var o=t[n][0];return void("object"==typeof o?(this.imageJson_=o,this.setText(o.alt)):(this.imageJson_=null,this.setText(o)))}this.setText(e)}},e.prototype.close=function(){Blockly.WidgetDiv.hideIfOwner(this),Blockly.Events.setGroup(!1),this.disposeTooltips()},e.prototype.getFirstItem=function(){return this.firstItem_},e.prototype.highlightFirstItem=function(e){var t=e.childNodes;if(t.length&&t[0].childNodes){for(var n=0;n<t.length;++n)for(var o=t[n].childNodes.length,r=0;r<o;++r){var i=t[n].childNodes[r];i.classList.remove("goog-menuitem-highlight"),i.classList.remove("goog-option-selected")}t[0].childNodes[0].className+=" goog-menuitem-highlight"}},e.prototype.highlightAndScrollSelected=function(e,t){for(var n,o=e.getElement(),r=e.getChildCount(),i=0;i<r;++i){for(var a=0;a<this.columns_;++a){var s=e.getChildAt(i).getChildAt(a).getValue();if(this.value_===s){n=o.children[i].children[a];break}}if(n){goog.style.scrollIntoContainerView(n,t,!0);break}}},e.prototype.showEditor_=function(){var r=this;this.dropDownOpen_=!0,Blockly.WidgetDiv.show(this,this.sourceBlock_.RTL,null),this.disposeTooltips();var n=this.getOptions(),i=new goog.ui.Control;this.populateTableContainer(n,i);var e=new goog.ui.Control,t=new goog.ui.Control,o=goog.dom.getViewportSize(),a=goog.style.getViewportPageOffset(document),s=this.getAbsoluteXY_(),l=this.getScaledBBox_(),c=Blockly.WidgetDiv.DIV;e.addChild(i,!0),t.addChild(e,!0),t.render(c);var u=t.getElement(),g=e.getElement(),p=i.getElement();if(this.hasSearchBar_){var d=document.createElement("div");d.setAttribute("class","ui fluid icon input");var _=document.createElement("i");_.setAttribute("class","search icon");var f=document.createElement("input");f.setAttribute("type","search"),f.setAttribute("id","search-bar"),f.setAttribute("class","blocklyGridPickerSearchBar"),f.setAttribute("placeholder",pxt.Util.lf("Search")),f.addEventListener("click",function(){f.focus(),f.setSelectionRange(0,f.value.length)}),f.addEventListener("keyup",pxt.Util.debounce(function(){var e=f.value,o=new RegExp(e,"i"),t=n.filter(function(e){var t=e[0].alt,n=e[1];return t?o.test(t):o.test(n)});r.populateTableContainer.bind(r)(t,i),r.createTooltips(t,i),e?r.highlightFirstItem(p):r.highlightAndScrollSelected(i,g)},300,!1)),f.addEventListener("keyup",function(e){if(13==e.keyCode){var t=f.value,n=r.getFirstItem();t&&n&&r.selectItem(n)}}),d.appendChild(f),d.appendChild(_),u.insertBefore(d,u.childNodes[0]),f.focus()}u.style.border="solid 1px "+this.borderColour_,p.style.backgroundColor=this.backgroundColour_,g.style.backgroundColor=this.backgroundColour_,u.style.backgroundColor=this.backgroundColour_,p.className="blocklyGridPickerMenu",g.className="blocklyGridPickerScroller",u.className="blocklyGridPickerPadder",this.createTooltips(n,i),this.width_>o.width&&(this.width_=o.width),p.style.width=this.width_+"px";var h=goog.style.getSize(u),m=goog.style.getSize(g);if(m.height=g.scrollHeight,m.width=g.scrollWidth,h.height=u.scrollHeight,h.width=u.scrollWidth,0<this.maxRows_){var y=p.children[0],v=goog.style.getSize(y).height*(this.maxRows_+.3);if(m.height>v){g.style.overflowY="auto",goog.style.setHeight(g,v);var b=goog.style.getPaddingBox(g),k=b.left+b.right,T=goog.style.getMarginBox(g),E=T.left+T.right,S=goog.style.getBorderBox(g),C=k+E+(S.left+S.right),x=g.offsetWidth-g.clientWidth-C;goog.style.setWidth(g,m.width+x),h.height=u.scrollHeight,h.width=u.scrollWidth,this.highlightAndScrollSelected(i,g)}}var A=l.bottom-s.y,D=l.right-s.x;s.y+h.height+A>=o.height+a.y?s.y-=h.height+2:s.y+=A,this.sourceBlock_.RTL?(s.x-=h.width/2,s.x<a.x&&(s.x=a.x)):(s.x+=D/2-h.width/2,s.x>o.width+a.x-h.width&&(s.x=o.width+a.x-h.width)),Blockly.WidgetDiv.position(s.x,s.y,o,a,this.sourceBlock_.RTL),p.focus()},e.prototype.createRow=function(e,t){var n=this,o=this.columns_,r=new goog.ui.Menu;r.setRightToLeft(this.sourceBlock_.RTL);for(var i=o*e;i<Math.min(o*e+o,t.length);i++){var a=t[i][0],s=t[i][1];if("object"==typeof a){var l=new Image(a.width,a.height);l.src=a.src,l.alt=a.alt||"",a=l}var c=new goog.ui.MenuItem(a);c.setRightToLeft(this.sourceBlock_.RTL),c.setValue(s),c.setCheckable(!0),c.setChecked(s==this.value_),r.addChild(c,!0),0==i&&(this.firstItem_=c)}return goog.events.listen(r,goog.ui.Component.EventType.ACTION,function(e){var t=e.target;t&&n.selectItem.bind(n)(t)}),this.menu_=r},e.prototype.disposeTooltips=function(){this.tooltips_&&this.tooltips_.length&&(this.tooltips_.forEach(function(e){return e.dispose()}),this.tooltips_=[])},e.prototype.setText=function(e){null!==e&&e!==this.text_&&(this.text_=e,this.updateTextNode_(),this.imageJson_&&this.textElement_?(this.textElement_.setAttribute("class",this.textElement_.getAttribute("class")+" blocklyHidden"),this.imageElement_.parentNode.appendChild(this.arrow_)):this.textElement_&&(this.textElement_.setAttribute("class",this.textElement_.getAttribute("class")+" blocklyDropdownText"),this.textElement_.parentNode.appendChild(this.arrow_)),this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_()))},e.prototype.updateWidth=function(){var e;this.imageJson_?(e=this.imageJson_.width+5,this.arrowY_=this.imageJson_.height/2):e=Blockly.Field.getCachedWidth(this.textElement_),this.EDITABLE&&(e+=Blockly.BlockSvg.EDITABLE_FIELD_PADDING),this.arrowWidth_=0,this.positionArrow&&(this.arrowWidth_=this.positionArrow(e),e+=this.arrowWidth_),this.box_&&(e+=2*Blockly.BlockSvg.BOX_FIELD_PADDING),this.size_.width=e},e.prototype.updateTextNode_=function(){if(this.textElement_||this.imageElement_){var e=this.text_;if(e.length>this.maxDisplayLength?(e=e.substring(0,this.maxDisplayLength-2)+"",this.textElement_.setAttribute("class","blocklyText blocklyTextTruncated")):this.textElement_.setAttribute("class","blocklyText"),goog.dom.removeChildren(this.textElement_),goog.dom.removeNode(this.imageElement_),this.imageElement_=null,this.imageJson_)this.imageElement_=Blockly.utils.createSvgElement("image",{y:5,x:8,height:this.imageJson_.height+"px",width:this.imageJson_.width+"px",cursor:"pointer"}),this.imageElement_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.imageJson_.src),this.size_.height=Number(this.imageJson_.height)+10,this.sourceBlock_.RTL&&this.imageElement_.setAttribute("transform","translate("+this.arrowWidth_+", 0)"),this.textElement_.parentNode.appendChild(this.imageElement_);else{e=e.replace(/\s/g,Blockly.Field.NBSP),this.sourceBlock_.RTL&&e&&(e+=""),e||(e=Blockly.Field.NBSP);var t=document.createTextNode(e);this.textElement_.appendChild(t)}this.size_.width=0}},e}(Blockly.FieldDropdown);a.FieldGridPicker=e}(pxtblockly||(pxtblockly={})),function(i){var e=function(r){function e(e,t,n){var o=r.call(this,t.data)||this;return o.isFieldCustom_=!0,o.buttonClick_=function(e){var t=e.target.getAttribute("data-value");this.setValue(t),this.setText(t),Blockly.DropDownDiv.hide()},o.columns_=parseInt(t.columns),o.maxRows_=parseInt(t.maxRows)||0,o.width_=parseInt(t.width)||300,o.backgroundColour_=i.parseColour(t.colour),o.itemColour_=t.itemColour||"rgba(255, 255, 255, 0.6)",o.borderColour_=pxt.toolbox.fadeColor(o.backgroundColour_,.4,!1),o}return __extends(e,r),e.prototype.showEditor_=function(){if(!Blockly.DropDownDiv.hideIfOwner(this)){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv(),t=document.createElement("div");t.setAttribute("role","menu"),t.setAttribute("aria-haspopup","true");for(var n=this.getOptions(),o=0;o<n.length;o++){n[o];var r=n[o][0],i=n[o][1];if("placeholder"!=r.type){var a=document.createElement("button");a.setAttribute("id",":"+o),a.setAttribute("role","menuitem"),a.setAttribute("class","blocklyDropDownButton"),a.title=r.alt,this.columns_?(a.style.width=this.width_/this.columns_-8+"px",a.style.height=this.width_/this.columns_-8+"px"):(a.style.width=r.width+"px",a.style.height=r.height+"px");var s=this.backgroundColour_;i==this.getValue()&&(s=this.sourceBlock_.getColourTertiary(),a.setAttribute("aria-selected","true")),a.style.backgroundColor=s,a.style.borderColor=this.borderColour_,Blockly.bindEvent_(a,"click",this,this.buttonClick_),Blockly.bindEvent_(a,"mouseup",this,this.buttonClick_),Blockly.bindEvent_(a,"mousedown",a,function(e){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),e.preventDefault()}),Blockly.bindEvent_(a,"mouseover",a,function(){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),t.setAttribute("aria-activedescendant",this.id)}),Blockly.bindEvent_(a,"mouseout",a,function(){this.setAttribute("class","blocklyDropDownButton"),t.removeAttribute("aria-activedescendant")});var l=document.createElement("img");l.src=r.src,a.setAttribute("data-value",i),l.setAttribute("data-value",i),a.appendChild(l),t.appendChild(a)}else{var c=document.createElement("span");c.setAttribute("class","blocklyDropDownPlaceholder"),c.style.width=r.width+"px",c.style.height=r.height+"px",t.appendChild(c)}}t.style.width=this.width_+"px",e.appendChild(t),Blockly.DropDownDiv.setColour(this.backgroundColour_,this.borderColour_);var u=this.sourceBlock_.workspace.scale,g=-Blockly.BlockSvg.MIN_BLOCK_Y*u-Blockly.BlockSvg.FIELD_Y_OFFSET*u;Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_,this.onHide_.bind(this),g);this.sourceBlock_.isShadow()?(this.savedPrimary_=this.sourceBlock_.getColour(),this.sourceBlock_.setColour(this.sourceBlock_.getColourTertiary(),this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary())):this.box_&&this.box_.setAttribute("fill",this.sourceBlock_.getColourTertiary())}},e.prototype.onHide_=function(){Blockly.DropDownDiv.content_.removeAttribute("role"),Blockly.DropDownDiv.content_.removeAttribute("aria-haspopup"),Blockly.DropDownDiv.content_.removeAttribute("aria-activedescendant"),Blockly.DropDownDiv.getContentDiv().style.width="",this.sourceBlock_&&(this.sourceBlock_.isShadow()?this.sourceBlock_.setColour(this.savedPrimary_,this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary()):this.box_&&this.box_.setAttribute("fill",this.sourceBlock_.getColour()))},e.prototype.setText=function(e){null!==e&&e!==this.text_&&(this.text_=e,this.updateTextNode_(),this.imageJson_&&this.textElement_?(this.textElement_.setAttribute("class",this.textElement_.getAttribute("class")+" blocklyHidden"),this.imageElement_.parentNode.appendChild(this.arrow_)):this.textElement_&&(this.textElement_.setAttribute("class",this.textElement_.getAttribute("class")+" blocklyDropdownText"),this.textElement_.parentNode.appendChild(this.arrow_)),this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours_()))},e.prototype.updateWidth=function(){var e=this.imageJson_.width+5;this.EDITABLE&&(e+=Blockly.BlockSvg.EDITABLE_FIELD_PADDING),this.arrowY_=this.imageJson_.height/2,this.arrowWidth_=0,this.positionArrow&&(this.arrowWidth_=this.positionArrow(e),e+=this.arrowWidth_),this.box_&&(e+=2*Blockly.BlockSvg.BOX_FIELD_PADDING),this.size_.width=e},e.prototype.updateTextNode_=function(){if(this.textElement_||this.imageElement_){var e=this.text_;if(e.length>this.maxDisplayLength?(e=e.substring(0,this.maxDisplayLength-2)+"",this.textElement_.setAttribute("class","blocklyText blocklyTextTruncated")):this.textElement_.setAttribute("class","blocklyText"),goog.dom.removeChildren(this.textElement_),goog.dom.removeNode(this.imageElement_),this.imageElement_=null,this.imageJson_)this.imageElement_=Blockly.utils.createSvgElement("image",{y:5,x:8,height:this.imageJson_.height+"px",width:this.imageJson_.width+"px"}),this.imageElement_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.imageJson_.src),this.size_.height=Number(this.imageJson_.height)+10,this.textElement_.parentNode.appendChild(this.imageElement_);else{e=e.replace(/\s/g,Blockly.Field.NBSP),this.sourceBlock_.RTL&&e&&(e+=""),e||(e=Blockly.Field.NBSP);var t=document.createTextNode(e);this.textElement_.appendChild(t)}this.size_.width=0}},e}(Blockly.FieldDropdown);i.FieldImageDropdown=e}(pxtblockly||(pxtblockly={})),function(e){var t=function(r){function e(e,t,n){var o=r.call(this,e,t,n)||this;return o.isFieldCustom_=!0,o.shouldSort_=t.sort,o.addLabel_=!!t.addLabel,o}return __extends(e,r),e.prototype.showEditor_=function(){if(!Blockly.DropDownDiv.hideIfOwner(this)){Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var e=Blockly.DropDownDiv.getContentDiv(),t=document.createElement("div");t.setAttribute("role","menu"),t.setAttribute("aria-haspopup","true");var n=this.getOptions();this.shouldSort_&&n.sort();for(var o=0;o<n.length;o++){n[o];var r=n[o][0],i=n[o][1];if("placeholder"!=r.type){var a=document.createElement("button");a.setAttribute("id",":"+o),a.setAttribute("role","menuitem"),a.setAttribute("class","blocklyDropDownButton"),a.title=r.alt,this.columns_?a.style.width=this.width_/this.columns_-8+"px":(a.style.width=r.width+"px",a.style.height=r.height+"px");var s=this.sourceBlock_.getColour();i==this.getValue()&&(s=this.sourceBlock_.getColourTertiary(),a.setAttribute("aria-selected","true")),a.style.backgroundColor=s,a.style.borderColor=this.sourceBlock_.getColourTertiary(),Blockly.bindEvent_(a,"click",this,this.buttonClick_),Blockly.bindEvent_(a,"mouseup",this,this.buttonClick_),Blockly.bindEvent_(a,"mousedown",a,function(e){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),e.preventDefault()}),Blockly.bindEvent_(a,"mouseover",a,function(){this.setAttribute("class","blocklyDropDownButton blocklyDropDownButtonHover"),t.setAttribute("aria-activedescendant",this.id)}),Blockly.bindEvent_(a,"mouseout",a,function(){this.setAttribute("class","blocklyDropDownButton"),t.removeAttribute("aria-activedescendant")});var l=document.createElement("img");if(l.src=r.src,a.setAttribute("data-value",i),l.setAttribute("data-value",i),a.appendChild(l),this.addLabel_){var c=this.createTextNode_(r.alt);c.setAttribute("data-value",r.alt),a.appendChild(c)}t.appendChild(a)}else{var u=document.createElement("span");u.setAttribute("class","blocklyDropDownPlaceholder"),u.style.width=r.width+"px",u.style.height=r.height+"px",t.appendChild(u)}}t.style.width=this.width_+"px",e.appendChild(t),Blockly.DropDownDiv.setColour(this.sourceBlock_.getColour(),this.sourceBlock_.getColourTertiary());var g=this.sourceBlock_.workspace.scale,p={width:this.size_.width,height:this.size_.height};p.width*=g,p.height*=g;var d=this.fieldGroup_.getBoundingClientRect(),_=d.left+p.width/2,f=d.top+p.height,h=_,m=d.top;Blockly.DropDownDiv.setBoundsElement(this.sourceBlock_.workspace.getParentSvg().parentNode),Blockly.DropDownDiv.show(this,_,f,h,m,this.onHide_.bind(this)),this.sourceBlock_.isShadow()?(this.savedPrimary_=this.sourceBlock_.getColour(),this.sourceBlock_.setColour(this.sourceBlock_.getColourTertiary(),this.sourceBlock_.getColourSecondary(),this.sourceBlock_.getColourTertiary())):this.box_&&this.box_.setAttribute("fill",this.sourceBlock_.getColourTertiary())}},e.prototype.createTextNode_=function(e){var t=document.createElement("span");return t.setAttribute("class","blocklyDropdownTextLabel"),t.textContent=e,t},e}(e.FieldImageDropdown);e.FieldImages=t}(pxtblockly||(pxtblockly={}));var rowRegex=/^.*[\.#].*$/,LabelMode,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxtblockly,pxt,pxt,pxt,pxt,pxt,pxt;!function(e){e[e.None=0]="None",e[e.Number=1]="Number",e[e.Letter=2]="Letter"}(LabelMode||(LabelMode={})),function(e){var t=function(i){function l(e,t,n){var o=i.call(this,e,n)||this;if(o.isFieldCustom_=!0,o.onColor="#FF3130",o.offColor="#A0C9F0",o.matrixWidth=5,o.matrixHeight=5,o.yAxisLabel=LabelMode.None,o.xAxisLabel=LabelMode.None,o.cellState=[],o.dontHandleMouseEvent_=function(e){e.stopPropagation(),e.preventDefault()},o.clearLedDragHandler=function(e){o.isMouseDown_=!1,pxsim.pointerEvents.down.forEach(function(e){return o.sourceBlock_.getSvgRoot().removeEventListener(e,o.dontHandleMouseEvent_)}),o.sourceBlock_.getSvgRoot().removeEventListener(pxsim.pointerEvents.move,o.dontHandleMouseEvent_),document.removeEventListener(pxsim.pointerEvents.up,o.clearLedDragHandler),e.stopPropagation(),e.preventDefault()},o.params=t,void 0!==o.params.rows){var r=parseInt(o.params.rows);isNaN(r)||(o.matrixHeight=r)}if(void 0!==o.params.columns){r=parseInt(o.params.columns);isNaN(r)||(o.matrixWidth=r)}return void 0!==o.params.onColor&&(o.onColor=o.params.onColor),void 0!==o.params.offColor&&(o.offColor=o.params.offColor),o}return __extends(l,i),l.prototype.showEditor_=function(){},l.prototype.initMatrix=function(){this.elt=pxsim.svg.parseString('<svg xmlns="http://www.w3.org/2000/svg" id="field-matrix" />');for(var e=0;e<this.matrixWidth;e++){this.cellState.push([]);for(var t=0;t<this.matrixHeight;t++)this.cellState[e].push(!1)}this.restoreStateFromString(),this.updateValue();for(e=0;e<this.matrixWidth;e++)for(t=0;t<this.matrixHeight;t++)this.createCell(e,t);if(this.xAxisLabel!==LabelMode.None){var n=this.matrixHeight*(l.CELL_WIDTH+l.CELL_VERTICAL_MARGIN)+2*l.CELL_VERTICAL_MARGIN+l.BOTTOM_MARGIN,o=pxsim.svg.child(this.elt,"g",{transform:"translate(0 "+n+")"});for(e=0;e<this.matrixWidth;e++){var r=this.getYAxisWidth()+e*(l.CELL_WIDTH+l.CELL_HORIZONTAL_MARGIN)+l.CELL_WIDTH/2+l.CELL_HORIZONTAL_MARGIN/2;pxsim.svg.child(o,"text",{x:r,class:"blocklyText"}).textContent=this.getLabel(e,this.xAxisLabel)}}if(this.yAxisLabel!==LabelMode.None){var i=pxsim.svg.child(this.elt,"g",{});for(e=0;e<this.matrixHeight;e++){n=e*(l.CELL_WIDTH+l.CELL_VERTICAL_MARGIN)+l.CELL_WIDTH/2+2*l.CELL_VERTICAL_MARGIN;pxsim.svg.child(i,"text",{x:0,y:n,class:"blocklyText"}).textContent=this.getLabel(e,this.yAxisLabel)}}this.fieldGroup_.appendChild(this.elt)},l.prototype.getLabel=function(e,t){switch(t){case LabelMode.Letter:return String.fromCharCode(e+65);default:return(e+1).toString()}},l.prototype.createCell=function(t,n){var o=this,e=t*(l.CELL_WIDTH+l.CELL_HORIZONTAL_MARGIN)+l.CELL_HORIZONTAL_MARGIN+this.getYAxisWidth(),r=n*(l.CELL_WIDTH+l.CELL_VERTICAL_MARGIN)+l.CELL_VERTICAL_MARGIN,i=pxsim.svg.child(this.elt,"g",{transform:"translate("+e+" "+r+")"}),a=pxsim.svg.child(i,"rect",{class:"blocklyLed"+(this.cellState[t][n]?"On":"Off"),cursor:"pointer",width:l.CELL_WIDTH,height:l.CELL_WIDTH,fill:this.getColor(t,n),rx:l.CELL_CORNER_RADIUS}),s=function(){o.cellState[t][n]=o.currentDragState_,a.setAttribute("fill",o.getColor(t,n)),a.setAttribute("class","blocklyLed"+(o.cellState[t][n]?"On":"Off")),o.updateValue()};this.sourceBlock_.workspace.isFlyout||(pxsim.pointerEvents.down.forEach(function(e){return a.addEventListener(e,function(e){o.currentDragState_=!o.cellState[t][n],s(),o.isMouseDown_=!0,pxsim.pointerEvents.down.forEach(function(e){return o.sourceBlock_.getSvgRoot().addEventListener(e,o.dontHandleMouseEvent_)}),o.sourceBlock_.getSvgRoot().addEventListener(pxsim.pointerEvents.move,o.dontHandleMouseEvent_),document.addEventListener(pxsim.pointerEvents.up,o.clearLedDragHandler),e.stopPropagation(),e.preventDefault()},!1)}),a.addEventListener(pxsim.pointerEvents.enter,function(e){o.isMouseDown_&&(s(),e.stopPropagation())},!1))},l.prototype.getColor=function(e,t){return this.cellState[e][t]?this.onColor:this.offColor},l.prototype.render_=function(){this.visible_?(this.elt||this.initMatrix(),this.size_.height=Number(this.matrixHeight)*(l.CELL_WIDTH+l.CELL_VERTICAL_MARGIN)+2*l.CELL_VERTICAL_MARGIN+l.BOTTOM_MARGIN+this.getXAxisHeight(),this.size_.width=Number(this.matrixWidth)*(l.CELL_WIDTH+l.CELL_HORIZONTAL_MARGIN)+this.getYAxisWidth()):this.size_.width=0},l.prototype.getValue=function(){var e=function(e){var t=(e=e.trim()).charAt(0);if(t===e.charAt(e.length-1)&&-1!==n.indexOf(t))return e.substr(1,e.length-2).trim();return e}(this.getText());return"`\n"+l.TAB+e+"\n"+l.TAB+"`"},l.prototype.restoreStateFromString=function(){var e,t,n=this.getText();if(n)for(var o=n.split("\n").filter(function(e){return rowRegex.test(e)}),r=0;r<o.length&&r<this.matrixHeight;r++)for(var i=0,a=o[r],s=0;s<a.length&&i<this.matrixWidth;s++)"."===(t=a[s])||"_"===t||"0"===t?(this.cellState[i][r]=!1,i++):("#"===(e=a[s])||"*"===e||"1"===e)&&(this.cellState[i][r]=!0,i++)},l.prototype.updateValue=function(){for(var e="",t=0;t<this.matrixHeight;t++){for(var n=0;n<this.matrixWidth;n++)e+=(this.cellState[n][t]?"#":".")+" ";e+="\n"+l.TAB}this.setValue(e)},l.prototype.getYAxisWidth=function(){return this.yAxisLabel===LabelMode.None?0:l.Y_AXIS_WIDTH},l.prototype.getXAxisHeight=function(){return this.xAxisLabel===LabelMode.None?0:l.X_AXIS_HEIGHT},l.CELL_WIDTH=25,l.CELL_HORIZONTAL_MARGIN=7,l.CELL_VERTICAL_MARGIN=5,l.CELL_CORNER_RADIUS=5,l.BOTTOM_MARGIN=9,l.Y_AXIS_WIDTH=9,l.X_AXIS_HEIGHT=10,l.TAB="        ",l}(Blockly.Field);e.FieldMatrix=t;var n=["'",'"',"`"]}(pxtblockly||(pxtblockly={})),function($){var o,e;(e=o||(o={}))[e.C=262]="C",e[e.CSharp=277]="CSharp",e[e.D=294]="D",e[e.Eb=311]="Eb",e[e.E=330]="E",e[e.F=349]="F",e[e.FSharp=370]="FSharp",e[e.G=392]="G",e[e.GSharp=415]="GSharp",e[e.A=440]="A",e[e.Bb=466]="Bb",e[e.B=494]="B",e[e.C3=131]="C3",e[e.CSharp3=139]="CSharp3",e[e.D3=147]="D3",e[e.Eb3=156]="Eb3",e[e.E3=165]="E3",e[e.F3=175]="F3",e[e.FSharp3=185]="FSharp3",e[e.G3=196]="G3",e[e.GSharp3=208]="GSharp3",e[e.A3=220]="A3",e[e.Bb3=233]="Bb3",e[e.B3=247]="B3",e[e.C4=262]="C4",e[e.CSharp4=277]="CSharp4",e[e.D4=294]="D4",e[e.Eb4=311]="Eb4",e[e.E4=330]="E4",e[e.F4=349]="F4",e[e.FSharp4=370]="FSharp4",e[e.G4=392]="G4",e[e.GSharp4=415]="GSharp4",e[e.A4=440]="A4",e[e.Bb4=466]="Bb4",e[e.B4=494]="B4",e[e.C5=523]="C5",e[e.CSharp5=555]="CSharp5",e[e.D5=587]="D5",e[e.Eb5=622]="Eb5",e[e.E5=659]="E5",e[e.F5=698]="F5",e[e.FSharp5=740]="FSharp5",e[e.G5=784]="G5",e[e.GSharp5=831]="GSharp5",e[e.A5=880]="A5",e[e.Bb5=932]="Bb5",e[e.B5=988]="B5",e[e.C6=1047]="C6",e[e.CSharp6=1109]="CSharp6",e[e.D6=1175]="D6",e[e.Eb6=1245]="Eb6",e[e.E6=1319]="E6",e[e.F6=1397]="F6",e[e.FSharp6=1480]="FSharp6",e[e.G6=1568]="G6",e[e.GSharp6=1568]="GSharp6",e[e.A6=1760]="A6",e[e.Bb6=1865]="Bb6",e[e.B6=1976]="B6",e[e.C7=2093]="C7";var r={28:{name:"C",prefixedName:"Low C",freq:131},29:{name:"C#",prefixedName:"Low C#",freq:139},30:{name:"D",prefixedName:"Low D",freq:147},31:{name:"D#",prefixedName:"Low D#",freq:156},32:{name:"E",prefixedName:"Low E",freq:165},33:{name:"F",prefixedName:"Low F",freq:175},34:{name:"F#",prefixedName:"Low F#",freq:185},35:{name:"G",prefixedName:"Low G",freq:196},36:{name:"G#",prefixedName:"Low G#",freq:208},37:{name:"A",prefixedName:"Low A",freq:220},38:{name:"A#",prefixedName:"Low A#",freq:233},39:{name:"B",prefixedName:"Low B",freq:247},40:{name:"C",prefixedName:"Middle C",freq:262},41:{name:"C#",prefixedName:"Middle C#",freq:277},42:{name:"D",prefixedName:"Middle D",freq:294},43:{name:"D#",prefixedName:"Middle D#",freq:311},44:{name:"E",prefixedName:"Middle E",freq:330},45:{name:"F",prefixedName:"Middle F",freq:349},46:{name:"F#",prefixedName:"Middle F#",freq:370},47:{name:"G",prefixedName:"Middle G",freq:392},48:{name:"G#",prefixedName:"Middle G#",freq:415},49:{name:"A",prefixedName:"Middle A",freq:440},50:{name:"A#",prefixedName:"Middle A#",freq:466},51:{name:"B",prefixedName:"Middle B",freq:494},52:{name:"C",prefixedName:"Tenor C",altPrefixedName:"High C",freq:523},53:{name:"C#",prefixedName:"Tenor C#",altPrefixedName:"High C#",freq:554},54:{name:"D",prefixedName:"Tenor D",altPrefixedName:"High D",freq:587},55:{name:"D#",prefixedName:"Tenor D#",altPrefixedName:"High D#",freq:622},56:{name:"E",prefixedName:"Tenor E",altPrefixedName:"High E",freq:659},57:{name:"F",prefixedName:"Tenor F",altPrefixedName:"High F",freq:698},58:{name:"F#",prefixedName:"Tenor F#",altPrefixedName:"High F#",freq:740},59:{name:"G",prefixedName:"Tenor G",altPrefixedName:"High G",freq:784},60:{name:"G#",prefixedName:"Tenor G#",altPrefixedName:"High G#",freq:831},61:{name:"A",prefixedName:"Tenor A",altPrefixedName:"High A",freq:880},62:{name:"A#",prefixedName:"Tenor A#",altPrefixedName:"High A#",freq:932},63:{name:"B",prefixedName:"Tenor B",altPrefixedName:"High B",freq:988},64:{name:"C",prefixedName:"High C",freq:1046},65:{name:"C#",prefixedName:"High C#",freq:1109},66:{name:"D",prefixedName:"High D",freq:1175},67:{name:"D#",prefixedName:"High D#",freq:1245},68:{name:"E",prefixedName:"High E",freq:1319},69:{name:"F",prefixedName:"High F",freq:1397},70:{name:"F#",prefixedName:"High F#",freq:1478},71:{name:"G",prefixedName:"High G",freq:1568},72:{name:"G#",prefixedName:"High G#",freq:1661},73:{name:"A",prefixedName:"High A",freq:1760},74:{name:"A#",prefixedName:"High A#",freq:1865},75:{name:"B",prefixedName:"High B",freq:1976}},i=/^Note\.(.+)$/,t=function(a){function Z(e,t,n){var o=a.call(this,e)||this;o.isFieldCustom_=!0,o.nKeys_=36,o.minNote_=28,o.maxNote_=63,o.eps=2,o.noteFreq_=[],o.noteName_=[],Z.superClass_.constructor.call(o,e,n),o.note_=e,t.editorColour&&(o.colour_=$.parseColour(t.editorColour),o.colourBorder_=goog.color.rgbArrayToHex(goog.color.darken(goog.color.hexToRgb(o.colour_),.2)));var r=parseInt(t.minNote)||o.minNote_,i=parseInt(t.maxNote)||o.maxNote_;return 28<=r&&i<=76&&r<i&&(o.minNote_=r,o.maxNote_=i,o.nKeys_=o.maxNote_-o.minNote_+1),o}return __extends(Z,a),Z.prototype.classValidator=function(e){if(null===e)return null;e=String(e);var t=parseFloat(e||"0");return isNaN(t)||t<0?null:String(t)},Z.prototype.init=function(){Z.superClass_.init.call(this),this.noteFreq_.length=0,this.noteName_.length=0;var n=this;!function(){for(var e=n.minNote_;e<=n.maxNote_;e++){var t=r[e].prefixedName;n.nKeys_<13?t=r[e].name:28<=n.minNote_&&n.maxNote_<=63&&(t=r[e].altPrefixedName||t),n.noteName_.push(t),n.noteFreq_.push(r[e].freq)}}(),this.setValue(this.callValidator(this.getValue()))},Z.prototype.getValue=function(){return this.note_},Z.prototype.setValue=function(e){var t=i.exec(e),n=t&&1<t.length?t[1]:null;e=o[n]?o[n]:String(parseFloat(e||"0")),isNaN(Number(e))||Number(e)<0||(this.sourceBlock_&&Blockly.Events.isEnabled()&&this.note_!=e&&Blockly.Events.fire(new Blockly.Events.Change(this.sourceBlock_,"field",this.name,String(this.note_),String(e))),this.note_=this.callValidator(e),this.setText(this.getNoteName_()))},Z.prototype.getText=function(){return Math.floor(Number(this.note_))==Number(this.note_)?Number(this.note_).toFixed(0):Number(this.note_).toFixed(2)},Z.prototype.setText=function(e){null!==e&&(e=String(e),isNaN(Number(e))||(e=this.getNoteName_()),e!==this.text_&&Blockly.Field.prototype.setText.call(this,e))},Z.prototype.getNoteName_=function(){for(var e=this.getValue(),t=e.toString(),n=0;n<this.nKeys_;n++)if(Math.abs(this.noteFreq_[n]-Number(e))<this.eps)return this.noteName_[n];return isNaN(Number(e))||(t+=" Hz"),t},Z.prototype.setNumberOfKeys=function(e){return this.nKeys_=e,this},Z.prototype.onHtmlInputChange_=function(e){a.prototype.onHtmlInputChange_.call(this,e),Blockly.DropDownDiv.hideWithoutAnimation()},Z.prototype.showEditor_=function(e){this.colour_||(this.colour_=this.sourceBlock_.isShadow()?this.sourceBlock_.parentBlock_.getColour():this.sourceBlock_.getColour(),this.colourBorder_=this.sourceBlock_.isShadow()?this.sourceBlock_.parentBlock_.getColourTertiary():this.sourceBlock_.getColourTertiary()),Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var s,t,n=Blockly.DropDownDiv.getContentDiv();Blockly.FieldNumber.prototype.setText.call(this,this.getText()),Z.superClass_.showEditor_.call(this,!0);var o=22,l=90,c=24,u=20,r=0,i="yellowgreen",a=0,g=this,p=!1,d=!1,_=goog.dom.getViewportSize().width,f=[];s=o*(this.nKeys_-this.nKeys_/12*5),t=l+c;for(var h=0;h<this.nKeys_;h++)f.push(new goog.ui.CustomButton);_<s&&(p=!0,s=7*o,t=l+c+u),e||!1||!goog.userAgent.MOBILE&&!goog.userAgent.ANDROID||(d=p=!0,s=7*(o*=2),t=(l*=2)+(c*=1.2)+(u*=2));var m=goog.dom.createDom("div",{});m.className="blocklyPianoDiv",n.appendChild(m);goog.style.getViewportPageOffset(document),this.getAbsoluteXY_(),this.getScaledBBox_();Blockly.Events.setGroup(!0);var y,v=0,b=null;for(h=0;h<this.nKeys_;h++){0<h&&h%12==0&&v++;var k=f[h],T=H(h)?"white":"black",E=G(h),S=V(h),C=W(h);p&&12<=h&&(C-=7*v*o);var x=F(T,E,S,C+0,0,H(h)?1e3:1001,H(h)?this.colour_:"black",d);k.setContent(x),k.setId(this.noteName_[h]),k.render(m),(R=k.getContent()).setAttribute("tag",this.noteFreq_[h].toString()),Math.abs(this.noteFreq_[h]-Number(this.getValue()))<this.eps&&(y=R.style.backgroundColor,R.style.backgroundColor=i,b=k),d?goog.events.listen(k.getElement(),goog.events.EventType.TOUCHSTART,M,!1,k):goog.events.listen(k.getElement(),goog.events.EventType.MOUSEDOWN,M,!1,k),goog.events.listen(k.getElement(),goog.events.EventType.MOUSEOVER,function(){A.getContent().textContent=this.getId()},!1,k),H(h)&&r++,p&&11<h&&k.setVisible(!1)}var A=new goog.ui.CustomButton,D=function(e,t,n){e+=l,n&&(e+=u);var o=goog.dom.createDom("div",{style:"top: "+e+"px; left: "+t+"px; background-color: "+g.colour_+"; width: "+s+"px; border-color: "+g.colour_+";"+(n?" font-size: "+(c-10)+"px; height: "+c+"px;":"")});return o.className="blocklyNoteLabel",o}(0,0,d);A.setContent(D),A.render(m);var B=A.getContent();B.textContent="-";var I=new goog.ui.CustomButton,N=new goog.ui.CustomButton,w=U(0,0,!0,d),O=U(0,0,!1,d);if(p){B.textContent="Octave #1";var R=void 0;I.setContent(w),I.render(m),(R=I.getContent()).textContent="<",N.setContent(O),N.render(m),(R=N.getContent()).textContent=">";var L=this.nKeys_/12,P=0;goog.events.listen(I.getElement(),goog.events.EventType.MOUSEDOWN,function(){if(0!=P){for(var e=12*P,t=12*P-12,n=0;n<12;n++)f[n+e].setVisible(!1);for(n=0;n<12;n++)f[n+t].setVisible(!0);P--,B.textContent="Octave #"+(P+1)}else B.textContent="Octave #"+(P+1)},!1,I),goog.events.listen(N.getElement(),goog.events.EventType.MOUSEDOWN,function(){if(P!=L-1){for(var e=12*P,t=12*P+12,n=0;n<12;n++)f[n+e].setVisible(!1);for(n=0;n<12;n++)f[n+t].setVisible(!0);P++,B.textContent="Octave #"+(P+1)}else B.textContent="Octave #"+(P+1)},!1,N)}function M(){var e,t=++a,n=this.getContent().getAttribute("tag");null!=b&&((e=b.getContent()).style.backgroundColor=y),e=this.getContent(),b!==this&&(y=e.style.backgroundColor,g.setValue(g.callValidator(n)),g.setText(g.callValidator(n))),b=this,e.style.backgroundColor=i,Blockly.FieldTextInput.htmlInput_.value=g.getText(),$.AudioContextManager.tone(n),setTimeout(function(){a==t&&$.AudioContextManager.stop()},300),Z.superClass_.dispose.call(this)}function F(e,t,n,o,r,i,a,s){var l=goog.dom.createDom("div",{style:"background-color: "+e+"; width: "+t+"px; height: "+n+"px; left: "+o+"px; top: "+r+"px; z-index: "+i+";   border-color: "+a+";"});return l.className="blocklyNote",l}function U(e,t,n,o){var r=(n?0:s/2)+t,i=l+c+e;o&&(i=l+e);var a=goog.dom.createDom("div",{style:"top: "+i+"px; left: "+r+"px; ;"+(o?"height: "+u+"px; font-size:"+(u-10)+"px;":"")+"width: "+Math.ceil(s/2)+"px;background-color: "+g.colour_+";"+(n?"border-left-color: ":"border-right-color: ")+g.colour_+";"+(o?"":"border-bottom-color: "+g.colour_)+";"});return a.className="blocklyNotePrevNext",a}function H(e){var t=e%12;return 1!=t&&3!=t&&6!=t&&8!=t&&10!=t}function G(e){return H(e)?o:o/2}function V(e){return H(e)?l:l/2}function W(e){var t=r*o;return H(e)?t:t-o/4}m.style.width=s+"px",m.style.height=t+1+"px",Blockly.DropDownDiv.setColour(this.colour_,this.colourBorder_);var K=this.sourceBlock_.workspace.scale,z={width:this.size_.width,height:this.size_.height};z.width*=K,z.height*=K;var j=this.fieldGroup_.getBoundingClientRect(),Y=j.left+z.width/2,X=j.top+z.height,J=Y,q=j.top;Blockly.DropDownDiv.setBoundsElement(this.sourceBlock_.workspace.getParentSvg().parentNode),Blockly.DropDownDiv.show(this,Y,X,J,q,this.onHide.bind(this))},Z.prototype.onHide=function(){},Z.prototype.dispose=function(){Blockly.DropDownDiv.hideIfOwner(this),Blockly.FieldTextInput.superClass_.dispose.call(this)},Z}(Blockly.FieldNumber);$.FieldNote=t}(pxtblockly||(pxtblockly={})),function(e){var t=function(r){function e(e,t,n){var o=r.call(this,e,t.data,t.min,t.max,t.precision,n)||this;return o.isFieldCustom_=!0,o}return __extends(e,r),e.prototype.getOptions=function(){var e;return this.menuGenerator_&&(e=JSON.parse(this.menuGenerator_).map(function(e){return"object"==typeof e?e:[String(e),String(e)]})),e},e}(Blockly.FieldNumberDropdown);e.FieldNumberDropdown=t}(pxtblockly||(pxtblockly={})),function(e){var t=function(o){function e(e,t){var n=o.call(this,null,t)||this;return n.setValue(e||""),n}return __extends(e,o),e.prototype.getOptions=function(){return this.dropdownCreate()},e.prototype.init=function(){this.fieldGroup_||o.prototype.init.call(this)},e.prototype.setSourceBlock=function(e){goog.asserts.assert(!e.isShadow(),"Procedure fields are not allowed to exist on shadow blocks."),o.prototype.setSourceBlock.call(this,e)},e.prototype.getValue=function(){return this.getText()},e.prototype.setValue=function(e){this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.Change(this.sourceBlock_,"field",this.name,this.value_,e)),this.value_=e,this.setText(e)},e.prototype.dropdownCreate=function(){var e=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var t=this.sourceBlock_.workspace.getAllBlocks(),n=0;n<t.length;n++)if(t[n].getProcedureDef){var o=t[n].getProcedureDef();e.push(o[0])}var r=this.getText();r&&-1==e.indexOf(r)&&e.push(r),e.sort(goog.string.caseInsensitiveCompare),e.length||e.push("Temp");var i=[];for(n=0;n<e.length;n++)i[n]=[e[n],e[n]];return i},e.prototype.onItemSelected=function(e,t){var n=t.getValue();this.sourceBlock_&&(n=this.callValidator(n)),null!==n&&this.setValue(n)},e}(Blockly.FieldDropdown);e.FieldProcedure=t}(pxtblockly||(pxtblockly={})),function(e){var t=function(r){function e(e,t,n){var o=r.call(this,String(e),"-100","100",null,"10","Speed",n)||this;return o.isFieldCustom_=!0,o.params=t,o.params.min&&(o.min_=parseFloat(o.params.min)),o.params.max&&(o.max_=parseFloat(o.params.max)),o.params.label&&(o.labelText_=o.params.label),o}return __extends(e,r),e.prototype.createLabelDom_=function(e){var t=document.createElement("div");this.speedSVG=document.createElementNS("http://www.w3.org/2000/svg","svg"),pxsim.svg.hydrate(this.speedSVG,{viewBox:"0 0 200 100",width:"170"}),t.appendChild(this.speedSVG);pxsim.svg.child(this.speedSVG,"circle",{"stroke-dasharray":"565.48","stroke-dashoffset":"0",cx:100,cy:100,r:"90",style:"fill:transparent; transition: stroke-dashoffset 0.1s linear;",stroke:"#a8aaa8","stroke-width":"1rem"});this.circleBar=pxsim.svg.child(this.speedSVG,"circle",{"stroke-dasharray":"565.48","stroke-dashoffset":"0",cx:100,cy:100,r:"90",style:"fill:transparent; transition: stroke-dashoffset 0.1s linear;",stroke:"#f12a21","stroke-width":"1rem"}),this.reporter=pxsim.svg.child(this.speedSVG,"text",{x:100,y:80,"text-anchor":"middle","dominant-baseline":"middle",style:"font-size: 50px",class:"sim-text inverted number"});var n=document.createElement("span");return n.setAttribute("class","blocklyFieldSliderReadout"),[t,n]},e.prototype.setReadout_=function(e,t){this.updateSpeed(parseFloat(t)),this.reporter.textContent=t+"%"},e.prototype.updateSpeed=function(e){var t=this.sign(e);e=Math.abs(e)/100*50+50,-1==t&&(e=50-e);var n=(100-e)/100*(180*Math.PI);this.circleBar.setAttribute("stroke-dashoffset",""+n)},e.prototype.sign=function(e){return e?e<0?-1:1:0},e}(Blockly.FieldSlider);e.FieldSpeed=t}(pxtblockly||(pxtblockly={})),function(e){var t=function(r){function e(e,t,n){var o=r.call(this,e,function(e){if(e){if(e.bold&&e.italics)return"blocklyBoldItalicizedText";if(e.bold)return"blocklyBoldText";if(e.italics)return"blocklyItalicizedText"}return}(t))||this;return o.isFieldCustom_=!0,o}return __extends(e,r),e}(Blockly.FieldLabel);e.FieldStyledLabel=t}(pxtblockly||(pxtblockly={})),function(e){var t=function(r){function e(e,t,n){var o=r.call(this,e,t.values,n)||this;return o.isFieldCustom_=!0,o}return __extends(e,r),e}(Blockly.FieldTextDropdown);e.FieldTextDropdown=t}(pxtblockly||(pxtblockly={})),function(e){var t=function(r){function e(e,t,n){var o=r.call(this,e,n)||this;return o.isFieldCustom_=!0,o}return __extends(e,r),e}(Blockly.FieldTextInput);e.FieldTextInput=t}(pxtblockly||(pxtblockly={})),function(g){var e=function(r){function e(e,t,n){var o=r.call(this,e,n)||this;return o.isFieldCustom_=!0,o.CURSOR="pointer",o.params=t,o.setValue(e),o.addArgType("toggle"),o.type_=t.type,o}return __extends(e,r),e.prototype.init=function(){if(!this.fieldGroup_){this.fieldGroup_=Blockly.utils.createSvgElement("g",{},null),this.visible_||(this.fieldGroup_.style.display="none"),null!==this.getArgTypes()&&(this.sourceBlock_.isShadow()?this.sourceBlock_.svgGroup_.setAttribute("data-argument-type",this.getArgTypes()):this.fieldGroup_.setAttribute("data-argument-type",this.getArgTypes())),!this.sourceBlock_.isShadow()&&this.sourceBlock_.inputList&&1<this.sourceBlock_.inputList.length&&(this.box_=Blockly.utils.createSvgElement("rect",{rx:Blockly.BlockSvg.CORNER_RADIUS,ry:Blockly.BlockSvg.CORNER_RADIUS,x:0,y:0,width:this.size_.width,height:this.size_.height,fill:Blockly.Colours.textField,stroke:this.sourceBlock_.getColourTertiary()}),this.fieldGroup_.insertBefore(this.box_,this.textElement_));var e=this.getSize();switch(this.checkElement_=Blockly.utils.createSvgElement("g",{class:"blocklyToggle "+(this.state_?"blocklyToggleOn":"blocklyToggleOff"),transform:"translate(8, "+e.height/2+")"},this.fieldGroup_),this.getOutputShape()){case Blockly.OUTPUT_SHAPE_HEXAGONAL:this.toggleThumb_=Blockly.utils.createSvgElement("polygon",{class:"blocklyToggleRect",points:"-7,-14 -21,0 -7,14 7,14 21,0 7,-14",cursor:"pointer"},this.checkElement_);break;case Blockly.OUTPUT_SHAPE_ROUND:this.toggleThumb_=Blockly.utils.createSvgElement("rect",{class:"blocklyToggleCircle",x:-6,y:-14,height:28,width:28,rx:14,ry:14,cursor:"pointer"},this.checkElement_);break;case Blockly.OUTPUT_SHAPE_SQUARE:this.toggleThumb_=Blockly.utils.createSvgElement("rect",{class:"blocklyToggleRect",x:-6,y:-14,height:28,width:28,rx:3,ry:3,cursor:"pointer"},this.checkElement_)}var t=this.sourceBlock_.RTL?-e.width/2:e.width/2;this.textElement_=Blockly.utils.createSvgElement("text",{class:"blocklyText",x:t,dy:"0.6ex",y:e.height/2},this.fieldGroup_),this.updateEditable(),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.switchToggle(this.state_),this.setValue(this.getValue()),this.render_(),this.size_.width=0,this.mouseDownWrapper_=Blockly.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)}},e.prototype.getDisplayText_=function(){return this.state_?this.getTrueText():this.getFalseText()},e.prototype.getTrueText=function(){return lf("True")},e.prototype.getFalseText=function(){return lf("False")},e.prototype.updateWidth=function(){this.getInnerWidth();switch(this.getOutputShape()){case Blockly.OUTPUT_SHAPE_ROUND:this.size_.width=2*this.getInnerWidth()-7;break;case Blockly.OUTPUT_SHAPE_HEXAGONAL:this.size_.width=2*this.getInnerWidth()+8-Math.floor(this.getInnerWidth()/2);break;case Blockly.OUTPUT_SHAPE_SQUARE:this.size_.width=9+2*this.getInnerWidth()}this.arrowWidth_=0},e.prototype.getInnerWidth=function(){return 10*this.getMaxLength()},e.prototype.getMaxLength=function(){return Math.max(this.getTrueText().length,this.getFalseText().length)},e.prototype.getOutputShape=function(){return this.sourceBlock_.isShadow()?this.sourceBlock_.getOutputShape():Blockly.OUTPUT_SHAPE_SQUARE},e.prototype.getValue=function(){return this.toVal(this.state_)},e.prototype.setValue=function(e){var t=this.fromVal(e);this.state_!==t&&(this.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,this.state_,t)),this.state_=t,this.switchToggle(this.state_),this.setText(this.getDisplayText_()))},e.prototype.switchToggle=function(e){if(this.checkElement_){this.updateWidth();var t=this.getSize(),n=this.getInnerWidth();e?(g.svg.addClass(this.checkElement_,"blocklyToggleOn"),g.svg.removeClass(this.checkElement_,"blocklyToggleOff")):(g.svg.removeClass(this.checkElement_,"blocklyToggleOn"),g.svg.addClass(this.checkElement_,"blocklyToggleOff"));var o=this.getOutputShape(),r=0,i=0,a=0,s=0;switch(o){case Blockly.OUTPUT_SHAPE_HEXAGONAL:var l=(i=(r=n)/2)/2;a=3<this.getMaxLength()?-4:1;var c=s=-l,u=l;this.toggleThumb_.setAttribute("points",c+",-14 "+(c-14)+",0 "+c+",14 "+u+",14 "+(u+14)+",0 "+u+",-14");break;case Blockly.OUTPUT_SHAPE_ROUND:case Blockly.OUTPUT_SHAPE_SQUARE:i=(r=5+n)/2,this.toggleThumb_.setAttribute("width",r),this.toggleThumb_.setAttribute("x","-"+i),a=s=o==Blockly.OUTPUT_SHAPE_SQUARE?2:-6}this.checkElement_.setAttribute("transform","translate("+(e?s+n+i:i+a)+", "+t.height/2+")")}},e.prototype.updateTextNode_=function(){r.prototype.updateTextNode_.call(this),this.textElement_&&g.svg.addClass(this.textElement_,"blocklyToggleText")},e.prototype.render_=function(){if(this.visible_&&this.textElement_){goog.dom.removeChildren(this.textElement_);var e=document.createTextNode(this.getDisplayText_());this.textElement_.appendChild(e),g.svg.addClass(this.textElement_,"blocklyToggleText"),this.updateWidth();var t=this.size_.width/2,n=(this.state_?t+t/2:t/2)-Blockly.Field.getCachedWidth(this.textElement_)/2;this.textElement_.setAttribute("x",""+n)}this.box_&&(this.box_.setAttribute("width",""+this.size_.width),this.box_.setAttribute("height",""+this.size_.height))},e.prototype.showEditor_=function(){var e=!this.state_;null!==e&&this.setValue(this.toVal(e))},e.prototype.toVal=function(e){return"number"==this.type_?String(e?"1":"0"):String(e?"true":"false")},e.prototype.fromVal=function(e){return"string"==typeof e?"1"==e||"TRUE"==e.toUpperCase():!!e},e}(Blockly.FieldNumber);g.FieldToggle=e}(pxtblockly||(pxtblockly={})),function(e){var t=function(r){function e(e,t,n){var o=r.call(this,e,t,n)||this;return o.isFieldCustom_=!0,o}return __extends(e,r),e.prototype.getTrueText=function(){return lf("HIGH")},e.prototype.getFalseText=function(){return lf("LOW")},e}(e.FieldToggle);e.FieldToggleHighLow=t}(pxtblockly||(pxtblockly={})),function(e){var t=function(r){function e(e,t,n){var o=r.call(this,e,t,n)||this;return o.isFieldCustom_=!0,o}return __extends(e,r),e.prototype.getTrueText=function(){return lf("ON")},e.prototype.getFalseText=function(){return lf("OFF")},e}(e.FieldToggle);e.FieldToggleOnOff=t}(pxtblockly||(pxtblockly={})),function(e){var t=function(r){function e(e,t,n){var o=r.call(this,e,t,n)||this;return o.isFieldCustom_=!0,o}return __extends(e,r),e.prototype.getTrueText=function(){return lf("UP")},e.prototype.getFalseText=function(){return lf("DOWN")},e}(e.FieldToggle);e.FieldToggleUpDown=t;var n=function(r){function e(e,t,n){var o=r.call(this,e,t,n)||this;return o.isFieldCustom_=!0,o}return __extends(e,r),e.prototype.getTrueText=function(){return lf("DOWN")},e.prototype.getFalseText=function(){return lf("UP")},e}(e.FieldToggle);e.FieldToggleDownUp=n}(pxtblockly||(pxtblockly={})),function(e){var t=function(r){function e(e,t,n){var o=r.call(this,e,t,n)||this;return o.isFieldCustom_=!0,o}return __extends(e,r),e.prototype.getTrueText=function(){return lf("Yes")},e.prototype.getFalseText=function(){return lf("No")},e}(e.FieldToggle);e.FieldToggleYesNo=t}(pxtblockly||(pxtblockly={})),function(e){var t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isFieldCustom_=!0,e}return __extends(e,t),e.prototype.updateEditable=function(){var e=this.fieldGroup_;this.EDITABLE&&e&&(this.sourceBlock_.isEditable()?(Blockly.utils.addClass(e,"blocklyEditableText"),Blockly.utils.removeClass(e,"blocklyGreyExpressionBlockText"),this.fieldGroup_.style.cursor=this.CURSOR):(Blockly.utils.addClass(e,"blocklyGreyExpressionBlockText"),Blockly.utils.removeClass(e,"blocklyEditableText"),this.fieldGroup_.style.cursor=""))},e}(Blockly.FieldTextInput);e.FieldTsExpression=t}(pxtblockly||(pxtblockly={})),function(e){var t=function(r){function p(e,t,n){var o=r.call(this,String(e),"-100","100",null,"10","TurnRatio",n)||this;return o.isFieldCustom_=!0,o.params=t,o}return __extends(p,r),p.prototype.createLabelDom_=function(e){var t=document.createElement("div"),n=Blockly.utils.createSvgElement("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:html":"http://www.w3.org/1999/xhtml","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",height:p.HALF+p.HANDLE_RADIUS+10+"px",width:2*p.HALF+"px"},t),o=Blockly.utils.createSvgElement("defs",{},n),r=Blockly.utils.createSvgElement("marker",{id:"head",orient:"auto",markerWidth:"2",markerHeight:"4",refX:"0.1",refY:"1.5"},o);Blockly.utils.createSvgElement("path",{d:"M0,0 V3 L1.5,1.5 Z",fill:"#f12a21"},r);this.reporter_=pxsim.svg.child(n,"text",{x:p.HALF,y:96,"text-anchor":"middle","dominant-baseline":"middle",style:"font-size: 50px",class:"sim-text inverted number"}),this.path_=Blockly.utils.createSvgElement("path",{x1:p.HALF,y1:p.HALF,"marker-end":"url(#head)",style:"fill: none; stroke: #f12a21; stroke-width: 10"},n),this.updateGraph_();var i=document.createElement("span");return i.setAttribute("class","blocklyFieldSliderReadout"),[t,i]},p.prototype.updateGraph_=function(){if(this.path_){var e=goog.math.clamp(parseFloat(this.getText()),-100,100);isNaN(e)&&(e=0);var t=goog.math.clamp(parseFloat(this.getText()),-100,100)/100,n=t*Math.PI/2,o=p.HALF,r=p.HALF-14,i=(Math.PI,p.RADIUS),a=.2+.5*Math.abs(t),s=i*a,l=i*Math.sin(Math.PI/2-n),c=i*Math.cos(Math.PI/2-n),u=l-i*a*Math.cos(2*n),g="M "+o+" "+r+" C "+o+" "+(r-s)+" "+(o+(c-i*a*Math.sin(2*n)))+" "+(r-u)+" "+(o+c)+" "+(r-l);this.path_.setAttribute("d",g),this.reporter_.textContent=""+e}},p.prototype.setReadout_=function(e,t){this.updateGraph_()},p.RADIUS=(p.HALF=80)-(p.HANDLE_RADIUS=30)-1,p}(Blockly.FieldSlider);e.FieldTurnRatio=t}(pxtblockly||(pxtblockly={})),function(e){var t;(t=e.svg||(e.svg={})).hasClass=function(e,t){return e.classList?e.classList.contains(t):-1<e.className.baseVal.indexOf(t)},t.addClass=function(e,t){e.classList?e.classList.add(t):e.className.baseVal.indexOf(t)<0&&(e.className.baseVal+=" "+t)},t.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className.baseVal=e.className.baseVal.replace(t,"").replace(/\s{2,}/," ")},e.parseColour=function(e){var t=Number(e);return isNaN(t)?goog.isString(e)&&e.match(/^#[0-9a-fA-F]{6}$/)?e:"#000":Blockly.hueToRgb(t)},function(e){var t,n,o=0,r=!1;function i(){return t||(t=function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext)try{return new window.AudioContext}catch(e){}return}()),t}function a(){t&&(n.disconnect(),o=0)}e.mute=function(e){t&&(r=e,a())},e.stop=a,e.frequency=function(){return o},e.tone=function(e){if(!(r||e<=0)){o=e;var t=i();if(t)try{n&&(n.disconnect(),n=void 0),(n=t.createOscillator()).frequency.value=e,n.type="triangle",n.connect(t.destination),n.start(0)}catch(e){return void(n=void 0)}}}}(e.AudioContextManager||(e.AudioContextManager={}))}(pxtblockly||(pxtblockly={})),function(e){var r=function(){function s(e,t,n,o){void 0===n&&(n=0),void 0===o&&(o=0),this.width=e,this.height=t,this.x0=n,this.y0=o,this.buf=new Uint8Array(Math.ceil(e*t/2))}return s.prototype.set=function(e,t,n){if(e<this.width&&t<this.height&&0<=e&&0<=t){var o=this.coordToIndex(e,t);this.setCore(o,n)}},s.prototype.get=function(e,t){if(e<this.width&&t<this.height&&0<=e&&0<=t){var n=this.coordToIndex(e,t);return this.getCore(n)}return 0},s.prototype.copy=function(e,t,n,o){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=this.width),void 0===o&&(o=this.height);var r=new s(n,o);r.x0=e,r.y0=t;for(var i=0;i<n;i++)for(var a=0;a<o;a++)r.set(i,a,this.get(e+i,t+a));return r},s.prototype.apply=function(e){for(var t=0;t<e.width;t++)for(var n=0;n<e.height;n++)this.set(e.x0+t,e.y0+n,e.get(t,n))},s.prototype.coordToIndex=function(e,t){return e+t*this.width},s.prototype.getCore=function(e){var t=Math.floor(e/2);return e%2==0?15&this.buf[t]:(240&this.buf[t])>>4},s.prototype.setCore=function(e,t){var n=Math.floor(e/2);this.buf[n]=e%2==0?240&this.buf[n]|15&t:15&this.buf[n]|(15&t)<<4},s}();e.Bitmap=r;var t=function(){function e(e,t){this.width=e,this.height=t,this.mask=new Uint8Array(Math.ceil(e*t/8))}return e.prototype.set=function(e,t){var n=e+this.width*t,o=n>>3,r=7&n;this.mask[o]|=1<<r},e.prototype.get=function(e,t){var n=e+this.width*t,o=n>>3,r=7&n;return this.mask[o]>>r&1},e}();e.Bitmask=t,e.resizeBitmap=function(e,t,n){var o=new r(t,n);return o.apply(e),o}}(pxtblockly||(pxtblockly={})),(pxtblockly||(pxtblockly={})).mergeProps=function(e,t){if(!t)return e;for(var n in t)e[n]=t[n];return e},function(n){var i,e,o,t,r=pxt.svgUtil,a=function(){function e(e,t){this.root=t,this.gridProps=n.mergeProps(l(),e),this.updateDimensions(),this.group=new r.Group,this.buildDom()}return e.prototype.outerWidth=function(){return this.cellToCoord(this.columns-1,0)[0]+this.gridProps.cellWidth+this.gridProps.outerMargin},e.prototype.outerHeight=function(){return this.cellToCoord(0,this.rows-1)[1]+this.gridProps.cellHeight+this.gridProps.outerMargin},e.prototype.getView=function(){return this.group},e.prototype.translate=function(e,t){this.group.translate(e,t)},e.prototype.scale=function(e){this.group.scale(e)},e.prototype.resizeGrid=function(e,t){if(this.gridProps.rowLength=e,this.gridProps.numCells=t,this.updateDimensions(),t>this.cells.length)for(;this.cells.length<t;)this.cells.push(this.buildCell());else if(t<this.cells.length)for(;this.cells.length>t;){var n=this.cells.pop();this.cellGroup.el.removeChild(n.el)}this.layout()},e.prototype.setCellDimensions=function(e,t){void 0===t&&(t=e),this.gridProps.cellWidth=e,this.gridProps.cellHeight=t,this.layout()},e.prototype.setGridDimensions=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=!0);var o=this.columns*this.gridProps.cellWidth,r=this.rows*this.gridProps.cellHeight,i=e-(this.outerWidth()-o),a=t-(this.outerHeight()-r),s=this.gridProps.cellWidth*(i/o),l=this.gridProps.cellHeight*(a/r);if(n){var c=this.gridProps.cellWidth/this.gridProps.cellHeight;if(1<=c){var u=Math.min(s,l*c);this.setCellDimensions(u,u*c)}else{var g=Math.min(l,s/c);this.setCellDimensions(g/c,g)}}else this.setCellDimensions(s,l)},e.prototype.setCellColor=function(e,t,n,o){if(!(e<0||t<0||e>=this.columns||t>=this.rows)){e=Math.floor(e),t=Math.floor(t);var r=this.getCell(this.cellToIndex(e,t));null!=n?(r.setVisible(!0),r.fill(n,o)):r.setVisible(!1)}},e.prototype.setRootId=function(e){this.group.id(e)},e.prototype.down=function(e){this.initDragSurface(),this.gesture.subscribe(o.Down,e)},e.prototype.up=function(e){this.initDragSurface(),this.gesture.subscribe(o.Up,e)},e.prototype.drag=function(e){this.initDragSurface(),this.gesture.subscribe(o.Drag,e)},e.prototype.move=function(e){this.initDragSurface(),this.gesture.subscribe(o.Move,e)},e.prototype.leave=function(e){this.initDragSurface(),this.gesture.subscribe(o.Leave,e)},e.prototype.cellToCoord=function(e,t){return[this.gridProps.outerMargin+e*(this.gridProps.cellWidth+this.gridProps.columnMargin),this.gridProps.outerMargin+t*(this.gridProps.cellHeight+this.gridProps.rowMargin)]},e.prototype.coordToCell=function(e,t){return[Math.floor((e-this.gridProps.outerMargin)/(this.gridProps.cellWidth+this.gridProps.columnMargin)),Math.floor((t-this.gridProps.outerMargin)/(this.gridProps.cellHeight+this.gridProps.rowMargin))]},e.prototype.indexToCell=function(e){return[e%this.gridProps.rowLength,Math.floor(e/this.gridProps.rowLength)]},e.prototype.cellToIndex=function(e,t){return t*this.gridProps.rowLength+e},e.prototype.clientToCell=function(e,t){this.point||(this.point=this.root.el.createSVGPoint()),this.point.x=e,this.point.y=t;var n=this.point.matrixTransform(this.root.el.getScreenCTM().inverse());return this.coordToCell(n.x-this.group.left,n.y-this.group.top)},e.prototype.buildDom=function(){this.cells=[],this.gridProps.backgroundFill&&(this.background=this.group.draw("rect").size(this.outerWidth(),this.outerHeight()).fill(this.gridProps.backgroundFill)),this.cellGroup=this.group.group();for(var e=0,t=0;t<this.columns;t++)for(var n=0;n<this.rows;n++)if(this.cells.push(this.buildCell()),++e>this.gridProps.numCells)return;this.layout()},e.prototype.buildCell=function(){var e=this.cellGroup.draw("rect").size(this.gridProps.cellWidth,this.gridProps.cellHeight).fill(this.gridProps.defaultColor);return this.gridProps.cornerRadius&&e.corner(this.gridProps.cornerRadius),this.gridProps.cellClass&&e.setAttribute("class",this.gridProps.cellClass),e},e.prototype.layout=function(){for(var e=0;e<this.columns;e++)for(var t=0;t<this.rows;t++){var n=this.cellToCoord(e,t),o=n[0],r=n[1],i=this.cellToIndex(e,t);this.getCell(i).at(o,r).size(this.gridProps.cellWidth,this.gridProps.cellHeight).id(this.gridProps.cellIdPrefix+"-"+i).attr({"data-grid-index":i})}this.dragSurface&&this.dragSurface.size(this.outerWidth(),this.outerHeight()),this.background&&this.background.size(this.outerWidth(),this.outerHeight())},e.prototype.getCell=function(e){return this.cells[e]},e.prototype.initDragSurface=function(){var r=this;!this.dragSurface&&this.root&&(this.gesture=new s,this.dragSurface=this.group.draw("rect").opacity(0).width(this.outerWidth()).height(this.outerHeight()),this.dragSurface.el.addEventListener("pointermove",function(e){var t=r.clientToCell(e.clientX,e.clientY),n=t[0],o=t[1];1&e.buttons&&r.gesture.handle(i.Down,n,o),r.gesture.handle(i.Move,n,o)}),this.dragSurface.el.addEventListener("pointerdown",function(e){var t=r.clientToCell(e.clientX,e.clientY),n=t[0],o=t[1];r.gesture.handle(i.Down,n,o)}),this.dragSurface.el.addEventListener("pointerup",function(e){var t=r.clientToCell(e.clientX,e.clientY),n=t[0],o=t[1];r.gesture.handle(i.Up,n,o)}),this.dragSurface.el.addEventListener("pointerclick",function(e){var t=r.clientToCell(e.clientX,e.clientY),n=t[0],o=t[1];r.gesture.handle(i.Down,n,o),r.gesture.handle(i.Up,n,o)}),this.dragSurface.el.addEventListener("pointerleave",function(e){var t=r.clientToCell(e.clientX,e.clientY),n=t[0],o=t[1];r.gesture.handle(i.Leave,n,o)}))},e.prototype.updateDimensions=function(){this.columns=this.gridProps.rowLength,this.rows=Math.ceil(this.gridProps.numCells/this.columns)},e}();n.Grid=a,(e=i||(i={}))[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Move=2]="Move",e[e.Leave=3]="Leave",(t=o||(o={}))[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Move=2]="Move",t[t.Drag=3]="Drag",t[t.Leave=4]="Leave";var s=function(){function e(){this.isDown=!1,this.handlers={}}return e.prototype.handle=function(e,t,n){switch(e){case i.Up:this.update(t,n),this.isDown=!1,this.fire(o.Up);break;case i.Down:this.isDown||(this.isDown=!0,this.fire(o.Down));break;case i.Move:if(t===this.lastCol&&n===this.lastRow)return;this.update(t,n),this.isDown?this.fire(o.Drag):this.fire(o.Move);break;case i.Leave:this.update(t,n),this.isDown=!1,this.fire(o.Leave)}},e.prototype.subscribe=function(e,t){this.handlers[e]=t},e.prototype.update=function(e,t){this.lastCol=e,this.lastRow=t},e.prototype.fire=function(e){this.handlers[e]&&this.handlers[e](this.lastCol,this.lastRow)},e}();function l(){return{rowLength:16,numCells:256,cellWidth:10,cellHeight:10,outerMargin:0,columnMargin:0,rowMargin:0,cornerRadius:0,defaultColor:"#ffffff",cellIdPrefix:u()}}n.defaultGridProps=l;var c=0;function u(){return"grid"+c++}n.uniquePrefix=u}(pxtblockly||(pxtblockly={})),function(l){var e;(e=l.PaintTool||(l.PaintTool={}))[e.Normal=0]="Normal",e[e.Rectangle=1]="Rectangle",e[e.Outline=2]="Outline",e[e.Circle=3]="Circle",e[e.Fill=4]="Fill",e[e.Line=5]="Line",e[e.Erase=6]="Erase";var t=function(){};l.Cursor=t;var n=function(){function e(e,t,n,o){this.canvasWidth=e,this.canvasHeight=t,this.color=n,this.toolWidth=o}return e.prototype.doEdit=function(e){this.isStarted&&this.doEditCore(e)},e.prototype.start=function(e,t){this.isStarted=!0,this.startCol=e,this.startRow=t},e.prototype.drawCursor=function(e,t,n){n(e,t)},e}(),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e,t){this.endCol=e,this.endRow=t},t.prototype.topLeft=function(){return[Math.min(this.startCol,this.endCol),Math.min(this.startRow,this.endRow)]},t.prototype.bottomRight=function(){return[Math.max(this.startCol,this.endCol),Math.max(this.startRow,this.endRow)]},t}(l.Edit=n);l.SelectionEdit=o;var r=function(i){function e(e,t,n,o){var r=i.call(this,e,t,n,o)||this;return r.mask=new l.Bitmask(e,t),r}return __extends(e,i),e.prototype.update=function(e,t){var n=this;this.drawCore(e,t,function(e,t){return n.mask.set(e,t)})},e.prototype.drawCursor=function(e,t,n){this.drawCore(e,t,n)},e.prototype.doEditCore=function(e){for(var t=0;t<e.width;t++)for(var n=0;n<e.height;n++)this.mask.get(t,n)&&e.set(t,n,this.color)},e.prototype.drawCore=function(e,t,n){e-=Math.floor(this.toolWidth/2),t-=Math.floor(this.toolWidth/2);for(var o=0;o<this.toolWidth;o++)for(var r=0;r<this.toolWidth;r++){var i=e+o,a=t+r;0<=i&&i<this.canvasWidth&&0<=a&&a<this.canvasHeight&&n(e+o,t+r)}},e}(n);l.PaintEdit=r;var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.doEditCore=function(e){for(var t=this.topLeft(),n=this.bottomRight(),o=t[0];o<=n[0];o++)for(var r=t[1];r<=n[1];r++)e.set(o,r,this.color)},t}(o);l.RectangleEdit=i;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.doEditCore=function(e){for(var t=this.topLeft(),n=this.bottomRight(),o=0;o<this.toolWidth;o++)this.drawRectangle(e,[t[0]+o,t[1]+o],[n[0]-o,n[1]-o])},t.prototype.drawRectangle=function(e,t,n){if(!(t[0]>n[0]||t[1]>n[1])){for(var o=t[0];o<=n[0];o++)e.set(o,t[1],this.color),e.set(o,n[1],this.color);for(var r=t[1];r<=n[1];r++)e.set(t[0],r,this.color),e.set(n[0],r,this.color)}},t}(o);l.OutlineEdit=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.doEditCore=function(e){this.bresenham(this.startCol,this.startRow,this.endCol,this.endRow,e)},t.prototype.drawCursor=function(e,t,n){this.drawCore(e,t,n)},t.prototype.bresenham=function(e,t,n,o,r){var i=this,a=n-e,s=o-t,l=function(e,t){return r.set(e,t,i.color)};if(0!==a)for(var c=0<a?1:-1,u=0<s?1:-1,g=Math.abs(s/a),p=0,d=t,_=e;0<c?_<=n:n<=_;_+=c)for(this.drawCore(_,d,l),p+=g;.5<=p;)(0<u?d<=o:o<=d)&&this.drawCore(_,d,l),d+=u,p-=1;else for(var f=0<=s?o:t,h=0<=s?t:o;h<=f;h++)this.drawCore(e,h,l)},t.prototype.drawCore=function(e,t,n){e-=Math.floor(this.toolWidth/2),t-=Math.floor(this.toolWidth/2);for(var o=0;o<this.toolWidth;o++)for(var r=0;r<this.toolWidth;r++){n(e+o,t+r)}},t}(o);l.LineEdit=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.doEditCore=function(e){var t=this.topLeft(),n=this.bottomRight(),o=n[0]-t[0],r=n[1]-t[1];o<r?n[1]=t[1]+o:n[0]=t[0]+r;var i=Math.floor((n[0]-t[0])/2),a=t[0]+i,s=t[1]+i;this.midpoint(a,s,i,e)},t.prototype.midpoint=function(e,t,n,o){for(var r=n,i=0,a=0;i<=r;)o.set(e+r,t+i,this.color),o.set(e+r,t-i,this.color),o.set(e+i,t+r,this.color),o.set(e+i,t-r,this.color),o.set(e-i,t+r,this.color),o.set(e-i,t-r,this.color),o.set(e-r,t+i,this.color),o.set(e-r,t-i,this.color),a<=0&&(a+=2*(i+=1)+1),0<a&&(a-=2*(r-=1)+1)},t}(o);l.CircleEdit=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.start=function(e,t){this.isStarted=!0,this.col=e,this.row=t},t.prototype.update=function(e,t){this.col=e,this.row=t},t.prototype.doEditCore=function(e){var t=e.get(this.col,this.row);if(t!==this.color){var n=new l.Bitmask(e.width,e.height);n.set(this.col,this.row);for(var o=[[this.col,this.row]];o.length;){var r=o.pop(),i=r[0],a=r[1];e.get(i,a)===t&&(e.set(i,a,this.color),s(i+1,a),s(i-1,a),s(i,a+1),s(i,a-1))}}function s(e,t){0<=e&&e<n.width&&0<=t&&t<n.height&&!n.get(e,t)&&(n.set(e,t),o.push([e,t]))}},t}(n);l.FillEdit=u}(pxtblockly||(pxtblockly={})),function(c){var a=pxt.svgUtil,e=function(l){function e(e,t,n,o){var r,i,a,s=l.call(this,(r=e,i=t,(a=c.defaultGridProps()).rowLength=i.width,a.numCells=i.width*i.height,c.mergeProps(a,r)),o)||this;return s.image=t,s.palette=n,s.repaint(),s}return __extends(e,l),e.prototype.repaint=function(){for(var e=0;e<this.image.width;e++)for(var t=0;t<this.image.height;t++)this.setCellColor(e,t,this.palette[this.image.get(e,t)])},e.prototype.writeColor=function(e,t,n){this.image.get(e,t);this.image.set(e,t,n),this.drawColor(e,t,n)},e.prototype.drawColor=function(e,t,n){this.setCellColor(e,t,this.palette[n])},e.prototype.restore=function(e,t){void 0===t&&(t=!1),e.height!=this.image.height||e.width!=this.image.width?(this.image=e.copy(),this.resizeGrid(e.width,e.width*e.height)):this.image.apply(e),t&&this.repaint()},e.prototype.applyEdit=function(e){e.doEdit(this.image),this.repaint()},e.prototype.bitmap=function(){return this.image},e.prototype.showOverlay=function(){this.overlay?(pxsim.U.clear(this.overlay.el),this.overlayFade&&this.overlayFade.kill()):(this.overlay=new a.Group,this.dragSurface?this.group.el.insertBefore(this.overlay.el,this.dragSurface.el):this.group.appendChild(this.overlay));for(var e=this.outerWidth(),t=this.outerHeight(),n=0;n<this.columns;n++){var o=this.cellToCoord(n,0)[0];this.overlay.draw("line").stroke("#898989").strokeWidth(1).at(o,0,o,t)}for(var r=0;r<this.rows;r++){var i=this.cellToCoord(0,r)[1];this.overlay.draw("line").stroke("#898989").strokeWidth(1).at(0,i,e,i)}this.overlay.draw("rect").at(e/2-50,t/2-20).fill("#898989").corner(2).size(100,40),this.overlay.draw("text").text(this.columns+"x"+this.rows).at(e/2,t/2).fontSize(30,a.LengthUnit.px).fill("white").anchor("middle"),this.overlayFade=new s(this.overlay,750,500)},e}(c.Grid);c.BitmapImage=e;var s=function(){function e(e,t,n){var o=this;this.target=e,this.start=Date.now()+t,this.end=this.start+n,this.slope=1/n,this.dead=!1,e.setAttribute("fill-opacity",1),e.setAttribute("stroke-opacity",1),setTimeout(function(){return requestAnimationFrame(function(){return o.frame()})},t)}return e.prototype.frame=function(){var e=this;if(!this.dead){var t=Date.now();if(t<this.end){var n=1-this.slope*(t-this.start);this.target.setAttribute("fill-opacity",n),this.target.setAttribute("stroke-opacity",n),requestAnimationFrame(function(){return e.frame()})}else pxsim.U.clear(this.target.el)}},e.prototype.kill=function(){this.dead=!0},e}()}(pxtblockly||(pxtblockly={})),function(e){var r=pxt.svgUtil,t=function(){function e(e){this.props=e,this.enabled=!0,this.buildDom()}return e.prototype.onClick=function(e){this.clickHandler=e},e.prototype.translate=function(e,t){this.root.translate(e,t)},e.prototype.getView=function(){return this.root},e.prototype.addClass=function(e){this.root.appendClass(e)},e.prototype.removeClass=function(e){this.root.removeClass(e)},e.prototype.title=function(e){this.root.title(e)},e.prototype.setDimensions=function(e,t){this.props.width=e,this.props.height=t,this.layout()},e.prototype.setEnabled=function(e){e!=this.enabled&&(this.enabled=e,this.enabled?this.root.removeClass("disabled"):this.root.appendClass("disabled"))},e.prototype.setVisible=function(e){this.root.setVisible(e)},e.prototype.buildDom=function(){var e=this;this.root=new r.Group,this.background=this.root.draw("rect").corner(this.props.cornerRadius),this.props.rootClass&&this.root.setClass(this.props.rootClass),this.props.backgroundClass&&this.background.setClass(this.props.backgroundClass),this.drawContent(),this.root.el.addEventListener("click",function(){e.handleClick()}),this.layout()},e.prototype.drawContent=function(){},e.prototype.layoutContent=function(e,t,n,o){},e.prototype.handleClick=function(){this.clickHandler&&this.enabled&&this.clickHandler()},e.prototype.layout=function(){this.background.size(this.props.width,this.props.height);var e=this.props.width-2*this.props.padding,t=this.props.height-2*this.props.padding;this.layoutContent(e,t,this.props.padding,this.props.padding)},e}(),n=function(n){function e(e){var t=n.call(this,e)||this;return t.props=e,t}return __extends(e,n),e.prototype.drawContent=function(){this.icon=this.root.draw("text").fontFamily(this.props.iconFont).text(this.props.iconString).anchor("middle"),this.props.iconClass&&this.icon.setClass(this.props.iconClass)},e.prototype.layoutContent=function(e,t,n,o){this.icon.at(o+e/2,n).offset(0,.8,r.LengthUnit.em).fontSize(t,r.LengthUnit.px)},e}(e.Button=t);e.FontIconButton=n;var o=function(n){function e(e){var t=n.call(this,e)||this;return t.props=e,t}return __extends(e,n),e.prototype.drawContent=function(){this.cursor=this.root.draw("rect").fill(this.props.cursorFill)},e.prototype.layoutContent=function(e,t,n,o){var r=Math.min(e,t)/3,i=this.props.cursorSideLength*r;this.cursor.at(o+e/2-i/2,n+t/2-i/2).size(i,i)},e}(t);e.CursorSizeButton=o}(pxtblockly||(pxtblockly={})),function(e){var i,t,o,n,a="#dedede",r=function(){function e(e,t,n){void 0===n&&(n=!1),this.palette=e,this.image=t,this.lightMode=n,this.cellWidth=16,this.cellHeight=16,this.paintLayer=document.createElement("canvas"),this.lightMode?(this.context=this.paintLayer.getContext("2d",{alpha:!1}),this.context.fillStyle=a,this.context.fill()):(this.backgroundLayer=document.createElement("canvas"),this.overlayLayer=document.createElement("canvas"),this.context=this.paintLayer.getContext("2d")),this.hideOverlay()}return e.prototype.repaint=function(){this.redraw()},e.prototype.applyEdit=function(e){e.doEdit(this.image),this.repaint()},e.prototype.bitmap=function(){return this.image},e.prototype.outerWidth=function(){return this.paintLayer.getBoundingClientRect().width},e.prototype.outerHeight=function(){return this.paintLayer.getBoundingClientRect().height},e.prototype.writeColor=function(e,t,n){this.image.get(e,t);this.image.set(e,t,n),this.drawColor(e,t,n)},e.prototype.drawColor=function(e,t,n){this.setCellColor(e,t,0===n?void 0:this.palette[n-1])},e.prototype.restore=function(e,t){void 0===t&&(t=!1),e.height!=this.image.height||e.width!=this.image.width?(this.image=e.copy(),this.resizeGrid(e.width,e.width*e.height)):this.image.apply(e),t&&this.repaint()},e.prototype.showOverlay=function(){var r=this;if(!this.lightMode){this.fadeAnimation&&this.fadeAnimation.kill(),this.overlayLayer.style.visibility="visible";var i=this.overlayLayer.width,a=this.overlayLayer.height,s=(this.cellWidth,this.cellHeight,this.overlayLayer.getContext("2d")),l=i/2-50,c=a/2-25;this.fadeAnimation=new u(function(e,t){if(t)r.hideOverlay();else{if(s.clearRect(0,0,i,a),s.globalAlpha=e,s.fillStyle="#898989",r.image.width<=32&&r.image.height<=32){for(var n=1;n<r.image.width;n++)s.fillRect(n*r.cellWidth,0,1,a);for(var o=1;o<r.image.height;o++)s.fillRect(0,o*r.cellHeight,i,1)}s.fillRect(l,c,100,40),s.fillStyle="#ffffff",s.font="30px sans-serif",s.textBaseline="middle",s.textAlign="center",s.fillText(r.image.width.toString(),l+50-25,c+20),s.fillText("x",l+50,c+20,10),s.fillText(r.image.height.toString(),l+50+25,c+20)}},750,500)}},e.prototype.hideOverlay=function(){this.lightMode||(this.overlayLayer.style.visibility="hidden")},e.prototype.resizeGrid=function(e,t){this.repaint()},e.prototype.setCellDimensions=function(e,t){this.cellWidth=e,this.cellHeight=t;var n=this.cellWidth*this.image.width,o=this.cellHeight*this.image.height;this.paintLayer.width=n,this.paintLayer.height=o,this.lightMode||(this.backgroundLayer.width=n,this.backgroundLayer.height=o,this.overlayLayer.width=n,this.overlayLayer.height=o)},e.prototype.setGridDimensions=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=!0);var o=e/this.image.width,r=t/this.image.height;if(n){var i=this.cellWidth/this.cellHeight;if(1<=i){var a=Math.min(o,r*i);this.setCellDimensions(a,a*i)}else{var s=Math.min(r,o/i);this.setCellDimensions(s/i,s)}}else this.setCellDimensions(o,r)},e.prototype.setCellColor=function(e,t,n,o){var r=e*this.cellWidth,i=t*this.cellHeight;n?(this.context.fillStyle=n,this.context.fillRect(r,i,this.cellWidth,this.cellHeight)):this.lightMode?(this.context.fillStyle=a,this.context.fillRect(r,i,this.cellWidth,this.cellHeight)):this.context.clearRect(r,i,this.cellWidth,this.cellHeight)},e.prototype.down=function(e){this.initDragSurface(),this.gesture.subscribe(o.Down,e)},e.prototype.up=function(e){this.initDragSurface(),this.gesture.subscribe(o.Up,e)},e.prototype.drag=function(e){this.initDragSurface(),this.gesture.subscribe(o.Drag,e)},e.prototype.move=function(e){this.initDragSurface(),this.gesture.subscribe(o.Move,e)},e.prototype.leave=function(e){this.initDragSurface(),this.gesture.subscribe(o.Leave,e)},e.prototype.updateBounds=function(e,t,n,o){this.layoutCanvas(this.paintLayer,e,t,n,o),this.lightMode||(this.layoutCanvas(this.overlayLayer,e,t,n,o),this.layoutCanvas(this.backgroundLayer,e,t,n,o)),this.redraw(),this.drawBackground(),this.bounds=void 0},e.prototype.render=function(e){this.lightMode||e.appendChild(this.backgroundLayer),e.appendChild(this.paintLayer),this.lightMode||e.appendChild(this.overlayLayer)},e.prototype.redraw=function(){for(var e=0;e<this.image.width;e++)for(var t=0;t<this.image.height;t++)this.drawColor(e,t,this.image.get(e,t))},e.prototype.drawBackground=function(){if(!this.lightMode){var e=this.backgroundLayer.getContext("2d",{alpha:!1}),t=Math.ceil(this.paintLayer.width/5),n=Math.ceil(this.paintLayer.height/5);e.fillStyle="#ffffff",e.fillRect(0,0,this.paintLayer.width,this.paintLayer.height),e.fillStyle="#dedede";for(var o=0;o<t;o++)for(var r=0;r<n;r++)(o+r)%2&&e.fillRect(5*o,5*r,5,5)}},e.prototype.clientToCell=function(e,t){return this.bounds||(this.bounds=this.paintLayer.getBoundingClientRect()),[Math.floor((e-this.bounds.left)/this.cellWidth),Math.floor((t-this.bounds.top)/this.cellHeight)]},e.prototype.initDragSurface=function(){var r=this;this.gesture||(this.gesture=new s,this.paintLayer.addEventListener("pointermove",function(e){var t=r.clientToCell(e.clientX,e.clientY),n=t[0],o=t[1];1&e.buttons&&r.gesture.handle(i.Down,n,o),r.gesture.handle(i.Move,n,o)}),this.paintLayer.addEventListener("pointerdown",function(e){var t=r.clientToCell(e.clientX,e.clientY),n=t[0],o=t[1];r.gesture.handle(i.Down,n,o)}),this.paintLayer.addEventListener("pointerup",function(e){var t=r.clientToCell(e.clientX,e.clientY),n=t[0],o=t[1];r.gesture.handle(i.Up,n,o)}),this.paintLayer.addEventListener("pointerclick",function(e){var t=r.clientToCell(e.clientX,e.clientY),n=t[0],o=t[1];r.gesture.handle(i.Down,n,o),r.gesture.handle(i.Up,n,o)}),this.paintLayer.addEventListener("pointerleave",function(e){var t=r.clientToCell(e.clientX,e.clientY),n=t[0],o=t[1];r.gesture.handle(i.Leave,n,o)}))},e.prototype.layoutCanvas=function(e,t,n,o,r){e.style.position="absolute",e.style.left=n+4+(o-e.width)/2+"px",e.style.top=t+4+(r-e.height)/2+"px"},e}();e.CanvasGrid=r,(t=i||(i={}))[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Move=2]="Move",t[t.Leave=3]="Leave",(n=o||(o={}))[n.Up=0]="Up",n[n.Down=1]="Down",n[n.Move=2]="Move",n[n.Drag=3]="Drag",n[n.Leave=4]="Leave";var s=function(){function e(){this.isDown=!1,this.handlers={}}return e.prototype.handle=function(e,t,n){switch(e){case i.Up:this.update(t,n),this.isDown=!1,this.fire(o.Up);break;case i.Down:this.isDown||(this.isDown=!0,this.fire(o.Down));break;case i.Move:if(t===this.lastCol&&n===this.lastRow)return;this.update(t,n),this.isDown?this.fire(o.Drag):this.fire(o.Move);break;case i.Leave:this.update(t,n),this.isDown=!1,this.fire(o.Leave)}},e.prototype.subscribe=function(e,t){this.handlers[e]=t},e.prototype.update=function(e,t){this.lastCol=e,this.lastRow=t},e.prototype.fire=function(e){this.handlers[e]&&this.handlers[e](this.lastCol,this.lastRow)},e}(),u=function(){function e(e,t,n){var o=this;this.draw=e,this.start=Date.now()+t,this.end=this.start+n,this.slope=1/n,e(1,this.dead=!1),setTimeout(function(){return requestAnimationFrame(function(){return o.frame()})},t)}return e.prototype.frame=function(){var e=this;if(!this.dead){var t=Date.now();if(t<this.end){var n=1-this.slope*(t-this.start);this.draw(n,!1),requestAnimationFrame(function(){return e.frame()})}else this.draw(0,!0),this.kill()}},e.prototype.kill=function(){this.dead=!0},e}()}(pxtblockly||(pxtblockly={})),function(i){var a=pxt.svgUtil,s=pxt.Util.lf,e=function(r){function e(e){var t,n,o=r.call(this,(t=i.mergeProps(l(),e),(n=i.mergeProps(i.defaultGridProps(),t)).numCells=t.colors.length+(t.emptySwatchDisabled?0:1),n))||this;return o.props=i.mergeProps(l(),e),o.selected=0,o.selectedClone=new a.BaseElement("use"),o.group.appendChild(o.selectedClone),o.initColors(),o}return __extends(e,r),e.prototype.colorForIndex=function(e){return this.props.emptySwatchDisabled?this.props.colors[e]:0===e?this.props.emptySwatchFill:this.props.colors[e-1]},e.prototype.setSelected=function(e){this.setCellHighlighted(this.selected,!1),this.selected=e,this.setCellHighlighted(this.selected,!0),this.handler&&this.handler(this.selected)},e.prototype.selectedColor=function(){return this.colorForIndex(this.selected)},e.prototype.setCellHighlighted=function(e,t){var n=this.getCell(e);t?(n.removeClass(this.props.unselectedClass),n.appendClass(this.props.selectedClass),this.selectedClone.setAttribute("href",n.el.getAttribute("id"))):(n.removeClass(this.props.selectedClass),n.appendClass(this.props.unselectedClass))},e.prototype.onColorSelected=function(e){this.handler=e},e.prototype.initColors=function(){for(var n=this,e=function(e){var t=o.getCell(e);0===e?t.title(s("Color Index 0 (Transparent)")):t.title(s("Color Index {0}",e)),t.fill(o.colorForIndex(e)),t.onDown(function(){return n.setSelected(e)}),o.setCellHighlighted(e,!1)},o=this,t=0;t<this.gridProps.numCells;t++)e(t);this.setSelected(0)},e}(i.Grid);function l(){return{colors:["red","green","blue"],rowLength:4,emptySwatchDisabled:!1,emptySwatchFill:"lightgrey",selectedClass:"palette-selected",unselectedClass:"palette-unselected",cellWidth:10,cellHeight:10,columnMargin:1,rowMargin:1,outerMargin:1,cornerRadius:0,defaultColor:"#ffffff",cellIdPrefix:i.uniquePrefix()}}i.ColorPalette=e}(pxtblockly||(pxtblockly={})),function(a){var s=pxt.Util.lf,e=function(){function e(e,t,n){this.g=e,this.props=t,this.host=n,this.activeButtonIndex=0,this.activeOptionIndex=0,this.activeCursorSizeIndex=0,this.selectedSizePreset=2,this.toolsBar=e.group(),this.optionBar=e.group(),this.dropdownOptions=this.optionBar.group(),this.initTools(),this.initControls(),this.createOptionsBar(),this.setSizePresets([[8,8],[8,16],[16,16],[16,32],[32,32]]),this.layout()}return e.prototype.outerWidth=function(){return this.props.width},e.prototype.outerHeight=function(){return this.props.height},e.prototype.translate=function(e,t){this.g.translate(e,t)},e.prototype.setDimensions=function(e,t){this.props.width==e&&this.props.height==t||(this.props.width=e,this.props.height=t,this.layout())},e.prototype.resetTool=function(){this.setTool(0,!1)},e.prototype.setUndoState=function(e){this.undoButton.setEnabled(e)},e.prototype.setRedoState=function(e){this.redoButton.setEnabled(e)},e.prototype.setSizePresets=function(e){var r=this;if(this.sizePresets=e,this.sizePresets&&this.sizePresets.length){var i=this.host.canvasWidth(),a=this.host.canvasHeight();this.sizePresets.forEach(function(e,t){var n=e[0],o=e[1];n===i&&o===a&&(r.selectedSizePreset=t)}),this.resizeButton.setVisible(!0)}else this.resizeButton.setVisible(!1)},e.prototype.initTools=function(){var o=this;this.tools=[{title:s("Pencil"),tool:a.PaintTool.Normal,icon:""},{title:s("Erase"),tool:a.PaintTool.Erase,icon:""},{title:s("Fill"),tool:a.PaintTool.Fill,icon:""},{title:s("Shapes"),tool:a.PaintTool.Rectangle,icon:"",options:[{title:s("Rectangle"),tool:a.PaintTool.Rectangle,icon:""},{title:s("Line"),tool:a.PaintTool.Line,icon:""},{title:s("Circle"),tool:a.PaintTool.Circle,icon:""}]}],this.toolButtons=this.tools.map(function(e,t){var n=o.addButton(e.icon);return n.title(e.title),n.onClick(function(){t!==o.activeButtonIndex&&(o.setTool(t),e.options&&e.options.length?o.showOptions(e.options):o.clearOptions())}),n}),this.setTool(0)},e.prototype.initControls=function(){var o=this;this.undoButton=this.addButton(""),this.undoButton.title(s("Undo")),this.undoButton.onClick(function(){o.host.undo()}),this.redoButton=this.addButton(""),this.redoButton.title(s("Redo")),this.redoButton.onClick(function(){o.host.redo()}),this.resizeButton=this.addButton(""),this.resizeButton.title(s("Change sprite size")),this.resizeButton.onClick(function(){o.selectedSizePreset=(o.selectedSizePreset+1)%o.sizePresets.length;var e=o.sizePresets[o.selectedSizePreset],t=e[0],n=e[1];o.host.resize(t,n)})},e.prototype.createOptionsBar=function(){var r=this;this.cursorSizes=[];for(var e=function(e){var t,n,o=(t=e+1,n=i.props.height,new a.CursorSizeButton({width:n,height:n,padding:2,cornerRadius:2,rootClass:"toolbar-button",backgroundClass:"toolbar-button-background",cursorFill:"black",cursorSideLength:t}));o.title(function(e){switch(e){case 0:return s("Small Cursor");case 1:return s("Medium Cursor");case 2:return s("Large Cursor")}return}(e)),i.cursorSizes.push(o),i.optionBar.appendChild(o.getView()),o.onClick(function(){r.setToolWidth(e)})},i=this,t=0;t<3;t++)e(t);this.setToolWidth(0)},e.prototype.addButton=function(e){var t=r(e,this.props.height,4);return this.toolsBar.appendChild(t.getView()),t},e.prototype.layout=function(){var n=this;this.optionsHeight=.333333*this.props.height,this.toolbarHeight=this.props.height-this.optionsHeight-this.props.rowMargin,this.toolButtons.forEach(function(e,t){return n.layoutButton(e,t,!0)}),this.layoutButton(this.undoButton,2,!1),this.layoutButton(this.redoButton,1,!1),this.layoutButton(this.resizeButton,0,!1),this.optionBar.translate(0,this.toolbarHeight+this.props.rowMargin),this.cursorSizes.forEach(function(e,t){e.setDimensions(n.optionsHeight,n.optionsHeight),e.translate(t*(n.optionsHeight+n.props.optionsMargin),0)}),this.layoutDropdown()},e.prototype.layoutButton=function(e,t,n){e.setDimensions(this.toolbarHeight,this.toolbarHeight),n?e.translate(t*(this.toolbarHeight+this.props.buttonMargin),0):e.translate(this.props.width-(t+1)*(this.toolbarHeight+this.props.buttonMargin),0)},e.prototype.layoutDropdown=function(){var n=this;if(this.optionButtons){var e=this.toolButtons[this.activeButtonIndex].getView().left;this.dropdownOptions.translate(e,0),this.optionButtons.forEach(function(e,t){e.translate(t*(n.optionsHeight+n.props.optionsMargin),0)})}},e.prototype.setTool=function(e,t){void 0===t&&(t=!1),t?(this.highlightOption(this.activeOptionIndex,!1),this.activeOptionIndex=e,this.highlightOption(this.activeOptionIndex,!0),this.host.setActiveTool(this.tools[this.activeButtonIndex].options[e].tool)):(this.highlightTool(this.activeButtonIndex,!1),this.activeButtonIndex=e,this.highlightTool(this.activeButtonIndex,!0),this.host.setActiveTool(this.tools[e].tool))},e.prototype.setToolWidth=function(e){this.highlightCursorSize(this.activeCursorSizeIndex,!1),this.activeCursorSizeIndex=e,this.highlightCursorSize(this.activeCursorSizeIndex,!0),this.host.setToolWidth(1+2*e)},e.prototype.highlightCursorSize=function(e,t){this.highlight(this.cursorSizes[e],"toolbar-button-selected",t)},e.prototype.highlightTool=function(e,t){this.highlight(this.toolButtons[e],"toolbar-button-selected",t)},e.prototype.highlightOption=function(e,t){this.optionButtons&&this.highlight(this.optionButtons[e],"toolbar-option-selected",t)},e.prototype.highlight=function(e,t,n){e&&(n?e.addClass(t):e.removeClass(t))},e.prototype.showOptions=function(e){var o=this;this.clearOptions(),this.optionButtons=e.map(function(e,t){var n=r(e.icon,o.optionsHeight,2);return n.title(e.title),n.onClick(function(){o.setTool(t,!0)}),o.dropdownOptions.appendChild(n.getView()),n}),this.layoutDropdown(),this.setTool(0,!0)},e.prototype.clearOptions=function(){pxsim.U.clear(this.dropdownOptions.el),this.optionButtons=void 0},e}();function r(e,t,n){return new a.FontIconButton({width:t,height:t,cornerRadius:2,padding:n,iconFont:"Icons",iconString:e,rootClass:"toolbar-button",backgroundClass:"toolbar-button-background",iconClass:"toolbar-button-icon"})}a.Toolbar=e}(pxtblockly||(pxtblockly={})),function(o){var r=pxt.svgUtil,i=55,a=2,s=3,l=350-i-5-13-5-16,e=function(){function e(e,t){void 0===t&&(t=!1);var n=this;this.lightMode=t,this.activeTool=o.PaintTool.Normal,this.toolWidth=1,this.color=1,this.undoStack=[],this.redoStack=[],this.columns=16,this.rows=16,this.colors=pxt.appTarget.runtime.palette.slice(1),this.columns=e.width,this.rows=e.height,this.state=e.copy(),this.root=new r.SVG,this.group=this.root.group(),this.makeTransparencyFill(),this.palette=new o.ColorPalette({rowLength:2,emptySwatchDisabled:!1,cellClass:"palette-swatch",emptySwatchFill:'url("#alpha-background")',outerMargin:s,columnMargin:a,rowMargin:a,backgroundFill:"black",colors:this.colors}),this.palette.setRootId("sprite-editor-palette"),this.paintSurface=new o.CanvasGrid(this.colors,this.state.copy(),this.lightMode),this.paintSurface.drag(function(e,t){n.debug("gesture ("+o.PaintTool[n.activeTool]+")"),n.setCell(e,t,n.color,!1),n.setCursorInfo(e,t)}),this.paintSurface.up(function(e,t){n.debug("gesture end ("+o.PaintTool[n.activeTool]+")"),n.commit()}),this.paintSurface.down(function(e,t){n.setCell(e,t,n.color,!1)}),this.paintSurface.move(function(e,t){n.drawCursor(e,t),n.setCursorInfo(e,t)}),this.paintSurface.leave(function(){n.edit&&n.paintSurface.repaint(),n.edit.isStarted&&n.commit(),n.cursorInfo.text("")}),this.group.appendChild(this.palette.getView()),this.toolbar=new o.Toolbar(this.group.group(),{height:i,width:l,buttonMargin:5,optionsMargin:3,rowMargin:5},this),this.palette.setSelected(this.color),this.palette.onColorSelected(function(e){n.setActiveColor(e)}),this.setActiveColor(this.color),this.drawReporterBar(),this.updateUndoRedo(),document.addEventListener("keydown",function(e){"Undo"===e.key||e.ctrlKey&&"z"===e.key?n.undo():("Redo"===e.key||e.ctrlKey&&"y"===e.key)&&n.redo()})}return e.prototype.setCell=function(e,t,n,o){o?(this.state.set(e,t,n),this.paintCell(e,t,n)):(this.edit.isStarted||this.edit.start(e,t),this.edit.update(e,t),this.paintEdit(this.edit))},e.prototype.render=function(e){this.paintSurface.render(e),e.appendChild(this.root.el),this.layout(),this.root.attr({width:this.outerWidth()+"px",height:this.outerHeight()+"px"})},e.prototype.layout=function(){if(this.root){var e=i+5+8;this.palette.setGridDimensions(l),this.palette.translate(8,e);var t=8+this.palette.outerWidth()+0;this.paintSurface.setGridDimensions(l),this.paintSurface.updateBounds(e,t,l,l),this.repoterBar.translate(t,e+l+5),this.canvasDimensions.at(l-this.canvasDimensions.el.getComputedTextLength(),0),this.width=t+l+8,this.height=e+l+3+5+13,this.toolbar.translate(8,8),this.toolbar.setDimensions(this.width-16,i)}},e.prototype.rePaint=function(){this.paintSurface.repaint()},e.prototype.setActiveColor=function(e,t){void 0===t&&(t=!1),t?this.palette.setSelected(e):(this.color=e,this.activeTool===o.PaintTool.Erase&&(this.toolbar.resetTool(),this.activeTool=o.PaintTool.Normal),this.edit=this.newEdit(this.color))},e.prototype.setActiveTool=function(e){this.activeTool=e,this.edit=this.newEdit(this.color)},e.prototype.setToolWidth=function(e){this.toolWidth=e,this.edit=this.newEdit(this.color),this.activeTool===o.PaintTool.Fill&&(this.toolbar.resetTool(),this.activeTool=o.PaintTool.Normal)},e.prototype.undo=function(){if(this.undoStack.length){this.debug("undo");var e=this.undoStack.pop();this.pushState(!1),this.restore(e)}this.updateUndoRedo()},e.prototype.redo=function(){if(this.redoStack.length){this.debug("redo");var e=this.redoStack.pop();this.pushState(!0),this.restore(e)}this.updateUndoRedo()},e.prototype.resize=function(e,t){this.cachedState||(this.cachedState=this.state.copy(),this.undoStack.push(this.cachedState),this.redoStack=[]),this.columns=e,this.rows=t,this.state=o.resizeBitmap(this.cachedState,e,t),this.paintSurface.restore(this.state,!0),this.canvasDimensions.text(this.columns+"x"+this.rows),this.layout(),this.paintSurface.showOverlay(),this.edit=this.newEdit(this.color)},e.prototype.setSizePresets=function(e){this.toolbar.setSizePresets(e)},e.prototype.canvasWidth=function(){return this.columns},e.prototype.canvasHeight=function(){return this.rows},e.prototype.outerWidth=function(){return this.width},e.prototype.outerHeight=function(){return this.height},e.prototype.bitmap=function(){return this.state},e.prototype.drawReporterBar=function(){this.repoterBar=this.group.group(),this.canvasDimensions=this.repoterBar.draw("text").fontSize(13,r.LengthUnit.px).fontFamily("monospace").fill("white").offset(0,.8,r.LengthUnit.em).text(this.columns+"x"+this.rows),this.cursorInfo=this.repoterBar.draw("text").fontSize(13,r.LengthUnit.px).fontFamily("monospace").offset(0,.8,r.LengthUnit.em).fill("white")},e.prototype.drawCursor=function(e,t){var n=this;this.edit&&(this.paintSurface.repaint(),this.edit.drawCursor(e,t,function(e,t){return n.paintSurface.drawColor(e,t,n.edit.color)}))},e.prototype.setCursorInfo=function(e,t){this.cursorInfo.text(e+","+t)},e.prototype.paintEdit=function(e){this.paintSurface.restore(this.state),this.paintSurface.applyEdit(e)},e.prototype.commit=function(){this.edit&&(this.cachedState&&(this.cachedState=void 0),this.pushState(!0),this.paintEdit(this.edit),this.state.apply(this.paintSurface.image),this.edit=this.newEdit(this.color),this.redoStack=[])},e.prototype.pushState=function(e){var t=this.state.copy();e?this.undoStack.push(t):this.redoStack.push(t),this.updateUndoRedo()},e.prototype.restore=function(e){this.state.apply(e),this.paintSurface.restore(e,!0)},e.prototype.updateUndoRedo=function(){this.toolbar.setUndoState(0<this.undoStack.length),this.toolbar.setRedoState(0<this.redoStack.length)},e.prototype.paintCell=function(e,t,n){this.paintSurface.writeColor(e,t,n)},e.prototype.newEdit=function(e){switch(this.activeTool){case o.PaintTool.Normal:return new o.PaintEdit(this.columns,this.rows,e,this.toolWidth);case o.PaintTool.Rectangle:case o.PaintTool.Outline:return new o.OutlineEdit(this.columns,this.rows,e,this.toolWidth);case o.PaintTool.Line:return new o.LineEdit(this.columns,this.rows,e,this.toolWidth);case o.PaintTool.Circle:return new o.CircleEdit(this.columns,this.rows,e,this.toolWidth);case o.PaintTool.Erase:return new o.PaintEdit(this.columns,this.rows,0,this.toolWidth);case o.PaintTool.Fill:return new o.FillEdit(this.columns,this.rows,e,this.toolWidth)}},e.prototype.debug=function(e){},e.prototype.makeTransparencyFill=function(){this.root.define(function(e){var t=e.create("pattern","alpha-background").size(10,10).units(r.PatternUnits.userSpaceOnUse);t.draw("rect").at(0,0).size(10,10).fill("white"),t.draw("rect").at(0,0).size(5,5).fill("#dedede"),t.draw("rect").at(5,5).size(5,5).fill("#dedede")})},e}();o.SpriteEditor=e}(pxtblockly||(pxtblockly={})),function(c){var o=pxt.svgUtil,i=[".","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=function(r){function e(e,t,n){var o=r.call(this,e,n)||this;return o.isFieldCustom_=!0,o.lightMode=t.lightMode,o.params=function(e){var t={sizes:[[8,8],[8,16],[16,16],[16,32],[32,32]],initColor:1,initWidth:16,initHeight:16};if(!e)return t;if(null!=e.sizes){for(var n=e.sizes.split(";"),o=[],r=0;r<n.length;r++){var i=n[r].split(",");if(2===i.length){var a=parseInt(i[0]),s=parseInt(i[1]);if(!isNaN(a)&&!isNaN(s)){var l=pxt.appTarget.runtime&&pxt.appTarget.runtime.screenSize;a<0&&l&&(a=l.width),s<0&&l&&(s=l.height),o.push([a,s])}}}0<o.length&&(t.sizes=o,t.initWidth=o[0][0],t.initHeight=o[0][1])}return t.initColor=c(e.initColor,t.initColor),t.initWidth=c(e.initWidth,t.initWidth),t.initHeight=c(e.initHeight,t.initHeight),t;function c(e,t){var n=parseInt(e);return isNaN(n)?t:n}}(t),o.state||(o.state=new c.Bitmap(o.params.initWidth,o.params.initHeight)),o}return __extends(e,r),e.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=Blockly.utils.createSvgElement("g",{},null),this.visible_||(this.fieldGroup_.style.display="none"),this.state||(this.state=new c.Bitmap(this.params.initWidth,this.params.initHeight)),this.redrawPreview(),this.updateEditable(),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.render_(),this.mouseDownWrapper_=Blockly.bindEventWithChecks_(this.getClickTarget_(),"mousedown",this,this.onMouseDown_))},e.prototype.showEditor_=function(){var e=this;goog.dom.getViewportSize(),goog.style.getViewportPageOffset(document);Blockly.DropDownDiv.hideWithoutAnimation(),Blockly.DropDownDiv.clearContent();var t=Blockly.DropDownDiv.getContentDiv();this.editor=new c.SpriteEditor(this.state,this.lightMode),this.editor.render(t),this.editor.rePaint(),this.editor.setActiveColor(this.params.initColor,!0),this.editor.setSizePresets(this.params.sizes),Blockly.DropDownDiv.setColour("#2c3e50","#2c3e50"),Blockly.DropDownDiv.showPositionedByBlock(this,this.sourceBlock_,function(){e.state=e.editor.bitmap(),e.redrawPreview(),e.sourceBlock_&&Blockly.Events.isEnabled()&&Blockly.Events.fire(new Blockly.Events.BlockChange(e.sourceBlock_,"field",e.name,e.text_,e.getText())),goog.style.setHeight(t,null),goog.style.setWidth(t,null),goog.style.setStyle(t,"overflow",null),goog.style.setStyle(t,"max-height",null)}),goog.style.setHeight(t,this.editor.outerHeight()+1),goog.style.setWidth(t,this.editor.outerWidth()+1),goog.style.setStyle(t,"overflow","hidden"),goog.style.setStyle(t,"max-height","500px"),this.editor.layout()},e.prototype.isInFlyout=function(){return"blocklyFlyout"==this.sourceBlock_.workspace.getParentSvg().className.baseVal},e.prototype.render_=function(){r.prototype.render_.call(this),this.size_.height=50,this.size_.width=50},e.prototype.getText=function(){if(!this.state)return"img``";for(var e="img`",t=0;t<this.state.height;t++){e+="\n";for(var n=0;n<this.state.width;n++)e+=i[this.state.get(n,t)]+" "}return e+="\n`"},e.prototype.setText=function(e){null!=e&&(this.parseBitmap(e),this.redrawPreview(),r.prototype.setText.call(this,e))},e.prototype.redrawPreview=function(){if(this.fieldGroup_){pxsim.U.clear(this.fieldGroup_);var e=(new o.Rect).at(5,5).size(40,40).fill("#dedede").stroke("#898989",1).corner(4);if(this.fieldGroup_.appendChild(e.el),this.state){var t=this.renderPreview(),n=(new o.Image).src(t).at(9,9).size(32,32);this.fieldGroup_.appendChild(n.el)}}},e.prototype.parseBitmap=function(e){for(var t=(e=(e=e.replace(/[ `]|(?:&#96;)|(?:&#9;)|(?:img)/g,"").trim()).replace(/&#10;/g,"\n")).split("\n"),n=[],o=0,r=0;r<t.length;r++){for(var i=t[r],a=[],s=0;s<i.length;s++)switch(i[s]){case"0":case".":a.push(0);break;case"1":case"#":a.push(1);break;case"2":case"T":a.push(2);break;case"3":case"t":a.push(3);break;case"4":case"N":a.push(4);break;case"5":case"n":a.push(5);break;case"6":case"G":a.push(6);break;case"7":case"g":a.push(7);break;case"8":a.push(8);break;case"9":a.push(9);break;case"a":case"A":case"R":a.push(10);break;case"b":case"B":case"P":a.push(11);break;case"c":case"C":case"p":a.push(12);break;case"d":case"D":case"O":a.push(13);break;case"e":case"E":case"Y":a.push(14);break;case"f":case"F":case"W":a.push(15)}a.length&&(n.push(a),o=Math.max(o,a.length))}var l=n.length;if(0!==l&&0!==o){this.state=new c.Bitmap(o,l);for(r=0;r<l;r++)for(i=n[r],s=0;s<o;s++)s<i.length?this.state.set(s,r,i[s]):this.state.set(s,r,0)}},e.prototype.renderPreview=function(){var e=pxt.appTarget.runtime.palette.slice(1),t=document.createElement("canvas");t.width=32,t.height=32;var n,o=Math.min(32/this.state.width,32/this.state.height),r=Math.max(Math.floor(32*(1-this.state.width/this.state.height)/2),0),i=Math.max(Math.floor(32*(1-this.state.height/this.state.width)/2),0);this.lightMode?((n=t.getContext("2d",{alpha:!1})).fillStyle="#dedede",n.fillRect(0,0,32,32)):n=t.getContext("2d");for(var a=0;a<this.state.width;a++)for(var s=0;s<this.state.height;s++){var l=this.state.get(a,s);l?(n.fillStyle=e[l-1],n.fillRect(r+a*o,i+s*o,o,o)):this.lightMode&&(n.fillStyle="#dedede",n.fillRect(r+a*o,i+s*o,o,o))}return t.toDataURL()},e}(Blockly.Field);c.FieldSpriteEditor=e}(pxtblockly||(pxtblockly={})),function(e){var t,n;t=e.editor||(e.editor={}),(n=t.FilterState||(t.FilterState={}))[n.Hidden=0]="Hidden",n[n.Visible=1]="Visible",n[n.Disabled=2]="Disabled",t.initExtensionsAsync=function(e){return Promise.resolve({})},t.initFieldExtensionsAsync=function(e){return Promise.resolve({})}}(pxt||(pxt={})),function(b){!function(e){var y={};function v(e,t,n,o){e.response&&window.parent.postMessage({type:e.type,id:e.id,resp:t,success:n,error:o},"*")}function i(o){return new Promise(function(e,t){var n=b.Util.clone(o);n.id=ts.pxtc.Util.guidGen(),o.response&&(y[n.id]={resolve:e,reject:t}),window.parent.postMessage(n,"*"),o.response||e(void 0)})}e.bindEditorMessages=function(_){var f=(b.appTarget.appTheme.allowParentController||b.shell.isControllerMode())&&b.BrowserUtils.isIFrame(),h=b.appTarget.appTheme.allowPackageExtensions,m=b.appTarget.appTheme.allowSimulatorTelemetry;(f||h||m)&&window.addEventListener("message",function(e){var t=e.data;if(!t||!/^pxt(host|editor|pkgext|sim)$/.test(t.type))return!1;if("pxtpkgext"===t.type&&h)_.handleExtensionRequest(t);else if("pxtsim"===t.type&&m){var n=t;"event"===n.action&&(n.category||n.message?b.reportError(n.category,n.message,n.data):b.tickEvent(n.tick,n.data))}else if(f){var o=Promise.resolve(),r=void 0;if("pxthost"==t.type){var i=y[t.id];i?o=o.then(function(){return i.resolve(t)}):b.debug("pxthost: unknown request "+t.id)}else if("pxteditor"==t.type){var a=t;switch(b.debug("pxteditor: "+a.action),a.action.toLowerCase()){case"switchjavascript":o=o.then(function(){return _.openJavaScript()});break;case"switchblocks":o=o.then(function(){return _.openBlocks()});break;case"startsimulator":o=o.then(function(){return _.startSimulator()});break;case"restartsimulator":o=o.then(function(){return _.restartSimulator()});break;case"hidesimulator":o=o.then(function(){return _.collapseSimulator()});break;case"showsimulator":o=o.then(function(){return _.expandSimulator()});break;case"closeflyout":o=o.then(function(){return _.closeFlyout()});break;case"redo":o=o.then(function(){var e=_.editor;e&&e.hasRedo()&&e.redo()});break;case"undo":o=o.then(function(){var e=_.editor;e&&e.hasUndo()&&e.undo()});break;case"setscale":var s=t;o=o.then(function(){return _.editor.setScale(s.scale)});break;case"stopsimulator":var l=t;o=o.then(function(){return _.stopSimulator(l.unload)});break;case"newproject":var c=t;o=o.then(function(){return _.newProject(c.options)});break;case"importproject":var u=t;o=o.then(function(){return _.importProjectAsync(u.project,{filters:u.filters,searchBar:u.searchBar})});break;case"proxytosim":var g=t;o=o.then(function(){return _.proxySimulatorMessage(g.content)});break;case"renderblocks":var p=t;o=o.then(function(){return _.renderBlocksAsync(p)}).then(function(e){r=e.xml});break;case"toggletrace":var d=t;o=o.then(function(){return _.toggleTrace(d.intervalSpeed)})}}o.done(function(){return v(t,r,!0,void 0)},function(e){return v(t,r,!1,e)})}return!0},!1)},e.enableControllerAnalytics=function(){if(b.appTarget.appTheme.allowParentController&&b.BrowserUtils.isIFrame()){var n=b.tickEvent;b.tickEvent=function(e,t){n&&n(e,t),i({type:"pxthost",action:"event",tick:e,response:!1,data:t})};var o=b.reportException;b.reportException=function(e,t){o&&o(e,t);try{i({type:"pxthost",action:"event",tick:"error",message:e.message,response:!1,data:t})}catch(e){}};var r=b.reportError;b.reportError=function(e,t,n){r&&r(e,t,n),i({type:"pxthost",action:"event",tick:"error",category:e,message:t,data:n})}}},e.postHostMessageAsync=i}(b.editor||(b.editor={}))}(pxt||(pxt={})),function(e){var t,n;t=e.editor||(e.editor={}),(n=t.PermissionResponses||(t.PermissionResponses={}))[n.Granted=0]="Granted",n[n.Denied=1]="Denied",n[n.NotAvailable=2]="NotAvailable"}(pxt||(pxt={})),function(s){!function(e){var n,o=function(){function e(){this.items={}}return e.prototype.removeItem=function(e){delete this.items[e]},e.prototype.getItem=function(e){return this.items[e]},e.prototype.setItem=function(e,t){this.items[e]=t},e.prototype.clear=function(){this.items={}},e}(),r=function(){function e(e){this.storageId=e}return e.prototype.targetKey=function(e){return this.storageId+"/"+e},e.prototype.removeItem=function(e){window.localStorage.removeItem(this.targetKey(e))},e.prototype.getItem=function(e){return window.localStorage[this.targetKey(e)]},e.prototype.setItem=function(e,t){window.localStorage[this.targetKey(e)]=t},e.prototype.clear=function(){for(var e=this.targetKey(""),t=[],n=0;n<window.localStorage.length;++n){var o=window.localStorage.key(n);0==o.indexOf(e)&&t.push(o)}t.forEach(function(e){return window.localStorage.removeItem(e)})},e}();function i(){return s.appTarget?s.appTarget.id:window.pxtConfig?window.pxtConfig.targetId:""}function a(){if(!n){var e=i(),t=!1;if(!s.shell.isSandboxMode())try{window.localStorage[e]="1";window.localStorage[e];t=!0}catch(e){}t?(n=new r(e),s.debug("storage: local under "+e)):(n=new o,s.debug("storage: in memory"))}}e.storageId=i,e.setLocal=function(e,t){a(),n.setItem(e,t)},e.getLocal=function(e){return a(),n.getItem(e)},e.removeLocal=function(e){a(),n.removeItem(e)},e.clearLocal=function(){a(),n.clear()}}(s.storage||(s.storage={}))}(pxt||(pxt={})),function(o){!function(e){function a(e){var t=o.appTarget.appTheme.invertedMonaco,n=monaco.editor.create(e,{model:null,ariaLabel:o.Util.lf("JavaScript editor"),fontFamily:"'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', 'monospace'",scrollBeyondLastLine:!1,language:"typescript",mouseWheelZoom:!1,wordBasedSuggestions:!0,lineNumbersMinChars:3,formatOnPaste:!0,minimap:{enabled:!1},autoIndent:!0,dragAndDrop:!0,matchBrackets:!0,occurrencesHighlight:!1,quickSuggestionsDelay:200,theme:t?"vs-dark":"vs",accessibilityHelpUrl:""});return n.layout(),n}e.syncModels=function(e,r,i,t){if(!t){var n=monaco.languages.typescript.typescriptDefaults.getExtraLibs(),a={};e.sortedDeps().forEach(function(o){o.getFiles().forEach(function(e){var t=o.id+"/"+e;if(/\.(ts)$/.test(e)&&t!=i){if(!monaco.languages.typescript.typescriptDefaults.getExtraLibs()[t]){var n=o.readFile(e)||" ";r[t]=monaco.languages.typescript.typescriptDefaults.addExtraLib(n,t)}a[t]="1"}})}),Object.keys(n).filter(function(e){return/\.(ts)$/.test(e)&&!a[e]}).forEach(function(e){r[e].dispose()})}},e.initMonacoAsync=function(i){return new Promise(function(t,e){if("object"!=typeof window.monaco){var n=window.MonacoPaths,o=function(){var e=window.require;e.config({paths:n}),e(["vs/editor/editor.main"],function(){monaco.languages.typescript&&(monaco.languages.register({id:"asm",extensions:[".asm"]}),monaco.languages.setMonarchTokensProvider("asm",{tokenPostfix:"",keywords:["movs","mov","adds","add","adcs","adr","subs","sbcs","sub","rsbs","muls","cmp","cmn","ands","eors","orrs","bics","mvns","tst","lsls","lsrs","asrs","rors","ldr","ldrh","ldrb","ldrsh","ldrsb","ldm","str","strh","strb","stm","push","pop","cbz","cbnz","b","bl","bx","blx","sxth","sxtb","uxth","uxtb","rev","rev16","revsh","svc","cpsid","cpsie","setend","bkpt","nop","sev","wfe","wfi","yield","beq","bne","bcs","bhs","bcc","blo","bmi","bpl","bvs","bvc","bhi","bls","bge","blt","bgt","ble","bal","r0","r1","r2","r3","r4","r5","r6","r7","r8","r9","r10","r11","r12","r13","r14","r15","pc","sp","lr"],typeKeywords:[".startaddr",".hex",".short",".space",".section",".string",".byte"],operators:[],symbols:/[:\*]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/(\.)?[a-z_$\.][\w$]*/,{cases:{"@typeKeywords":"keyword","@keywords":"keyword","@default":"identifier"}}],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/@\s*[a-zA-Z_\$][\w\$]*/,{token:"annotation"}],[/(#|(0[xX]))?[0-9a-fA-F]+/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",bracket:"@open",next:"@string"}],[/'[^\\']'/,"string"],[/(')(@escapes)(')/,["string","string.escape","string"]],[/'/,"string.invalid"]],comment:[],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",bracket:"@close",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"],[/\/\*/,"comment","@comment"],[/;.*$/,"comment"]]}}),monaco.languages.typescript.typescriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0,noSemanticValidation:!0}),monaco.languages.typescript.typescriptDefaults.setCompilerOptions({allowUnreachableCode:!0,noImplicitAny:!0,allowJs:!1,allowUnusedLabels:!0,target:monaco.languages.typescript.ScriptTarget.ES5,outDir:"built",rootDir:".",noLib:!0,mouseWheelZoom:!1}),monaco.languages.typescript.typescriptDefaults.setMaximunWorkerIdleTime(12e5)),t(a(i))})};if(window.require)o();else{var r=document.createElement("script");r.type="text/javascript",r.src=n["vs/loader"],r.addEventListener("load",o),document.body.appendChild(r)}}else t(a(i))})},e.createEditor=a}(o.vs||(o.vs={}))}(pxt||(pxt={})),function(s){!function(e){var r,t,i;function n(){if(void 0===i){var e=/sandbox=1|#sandbox|#sandboxproject/i.test(window.location.href)||s.BrowserUtils.isIFrame(),t=/nosandbox=1/i.test(window.location.href),n=/controller=1/i.test(window.location.href)&&s.BrowserUtils.isIFrame(),o=/editorlayout=(widget|sandbox|ide)/i.exec(window.location.href);if(i=r.IDE,t?i=r.Widget:n?i=r.Controller:e&&(i=r.Sandbox),o)switch(o[1].toLowerCase()){case"widget":i=r.Widget;break;case"sandbox":i=r.Sandbox;break;case"ide":i=r.IDE}s.debug("shell: layout type "+r[i]+", readonly "+a())}}function o(){return n(),i==r.Sandbox}function a(){return o()&&!/[?&]edit=1/i.test(window.location.href)}(t=r=e.EditorLayoutType||(e.EditorLayoutType={}))[t.IDE=0]="IDE",t[t.Sandbox=1]="Sandbox",t[t.Widget=2]="Widget",t[t.Controller=3]="Controller",e.layoutTypeClass=function(){return n(),s.shell.EditorLayoutType[i].toLowerCase()},e.isSandboxMode=o,e.isReadOnly=a,e.isControllerMode=function(){return n(),i==r.Controller}}(s.shell||(s.shell={}))}(pxt||(pxt={}));var __extends=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxsim,pxt,pxt,pxt;!function(e){var t,n;(t=e.accessibility||(e.accessibility={})).makeFocusable=function(e){e.setAttribute("focusable","true"),e.setAttribute("tabindex","0")},t.enableKeyboardInteraction=function(e,n,o){n&&e.addEventListener("keydown",function(e){var t="number"==typeof e.which?e.which:e.keyCode;32!==t&&13!==t||n()}),o&&e.addEventListener("keyup",function(e){var t="number"==typeof e.which?e.which:e.keyCode;32!==t&&13!==t||o()})},t.setAria=function(e,t,n){t&&!e.hasAttribute("role")&&e.setAttribute("role",t),n&&!e.hasAttribute("aria-label")&&e.setAttribute("aria-label",n)},t.setLiveContent=function(e){n||((n=document.createElement("div")).setAttribute("role","status"),n.setAttribute("aria-live","polite"),n.setAttribute("aria-hidden","false"),n.setAttribute("style","position: absolute !important;display: block;visibility: visible;overflow: hidden;width: 1px;height: 1px;margin: -1px;border: 0;padding: 0;clip: rect(0 0 0 0);"),document.body.appendChild(n)),n.textContent!==e&&(n.textContent=e)}}(pxsim||(pxsim={})),function(m){var u="blue";var g=function(e){return 0<e.reduce(function(e,t){return e+(t?1:0)},0)};function f(e,t){var n={};for(var o in e)n[o]=e[o];for(var r in t)n[r]=t[r];return n}function p(e){m.U.assert(!!e,"Invalid pin: "+e);var t=/^(\w+)\.\s*(?:[a-z]*)?([A-Z][A-Z\d_]+)$/.exec(e);return t?t[2]:void 0}function d(e){return"-Z"===e.orientation&&"male"===e.style}m.readPin=p;var t=function(){function e(e){this.availablePowerPins={top:{threeVolt:m.mkRange(26,51).map(function(e){return{type:"breadboard",row:"+",col:""+e}}),ground:m.mkRange(26,51).map(function(e){return{type:"breadboard",row:"-",col:""+e}})},bottom:{threeVolt:m.mkRange(1,26).map(function(e){return{type:"breadboard",row:"+",col:""+e}}),ground:m.mkRange(1,26).map(function(e){return{type:"breadboard",row:"-",col:""+e}})}},this.opts=e}return e.prototype.allocPartIRs=function(n,o,h){var t=this,r=[],s=function(e,t,n,o){for(var r=[],i=0;i<e.numberOfPins;i++){var a=e.pinDefinitions[i],s=void 0;if("string"==typeof a.target)s=a.target;else{var l=a.target.pinInstantiationIdx;m.U.assert(!!n&&void 0!==n[l],"No pin found for PinInstantiationIdx: "+l+'. (Is the part missing an ArgumentRole or "trackArgs=" annotations?)'),s=n[l]}var c=e.visual.pinLocations[i],u=h.yOffset+c.y,g=Math.round(u/e.visual.pinDistance),p=u-g*e.visual.pinDistance,d=h.xOffset+c.x,_=Math.round(d/e.visual.pinDistance),f={partRelativeRowIdx:g,partRelativeColIdx:_,xOffset:d-_*e.visual.pinDistance,yOffset:p};r.push({def:a,loc:c,target:s,bbFit:f})}return{name:t,def:e,pins:r,partParams:o||{},bbFit:h}};if("singleton"===n.instantiation.kind)r.push(s(n,o));else if("function"===n.instantiation.kind){var l=n.instantiation,c=l.fullyQualifiedName.split(","),i={};c.forEach(function(e){t.opts.fnArgs[e]&&t.opts.fnArgs[e].forEach(function(e){i[e]=1})});var e=Object.keys(i);m.U.assert(!!e&&!!e.length,"Failed to read pin(s) from callsite for: "+c),e.forEach(function(e){var t=e.split(",");m.U.assert(t.length===l.argumentRoles.length,"Mismatch between number of arguments at callsite (function name: "+c+") vs number of argument roles in part definition (part: "+o+").");var i=[],a={};t.forEach(function(e,t){var n=l.argumentRoles[t];if(void 0!==n.partParameter&&(a[n.partParameter]=e),void 0!==n.pinInstantiationIdx){var o=n.pinInstantiationIdx,r=p(e);i[o]=r}}),r.push(s(n,o,i,a))})}return r},e.prototype.computePartDimensions=function(e,t){var n=e.visual.pinLocations,i=e.pinDefinitions,o=e.numberOfPins;m.U.assert(n.length===o,'Mismatch between "numberOfPins" and length of "visual.pinLocations" for "'+t+'"'),m.U.assert(i.length===o,'Mismatch between "numberOfPins" and length of "pinDefinitions" for "'+t+'"'),m.U.assert(0<o,'Part "'+t+'" has no pins');var r,a,s,l,c=n.map(function(e,t){return n={idx:t},o=e,r=i[t],f(f(n,o),r);var n,o,r}).filter(function(e){return"-Z"===e.orientation}),u=0<c.length,g=e.visual.pinDistance;if(u){var p=c[0],d=Math.ceil(p.x/g),_=Math.ceil(p.y/g);r=d*g-p.x,a=_*g-p.y,s=Math.ceil((r+e.visual.width)/g)+1,l=Math.ceil((a+e.visual.height)/g)+1}else s=Math.ceil(e.visual.width/g),l=Math.ceil(e.visual.height/g),r=s*g-e.visual.width,a=l*g-e.visual.height;return{xOffset:r,yOffset:a,rowCount:l,colCount:s}},e.prototype.allocColumns=function(e){var t=e.length,n=m.visuals.BREADBOARD_MID_COLS-e.map(function(e){return e.colCount}).reduce(function(e,t){return e+t},0);n<=0&&console.log("Not enough breadboard space!");var o=Math.floor(n/(t-1+2)),r=n-o*(t-1),i=Math.floor(r/2),a=(Math.ceil(r/2),1+i);return e.map(function(e){var t=a;return a+=e.colCount+o,t})},e.prototype.placeParts=function(e){var o=m.visuals.BREADBOARD_MID_ROWS+2,r=this.allocColumns(e.map(function(e){return e.bbFit})),i=e.map(function(e){var t=o-e.bbFit.rowCount,n=Math.floor(t/2);return 4<n&&(n=4),n<1&&(n=1),n});return e.map(function(e,t){var n=i[t];return f({startColumnIdx:r[t],startRowIdx:n},e)})},e.prototype.nextColor=function(){return(!this.availableWireColors||this.availableWireColors.length<=0)&&(this.availableWireColors=m.visuals.GPIO_WIRE_COLORS.map(function(e){return e})),this.availableWireColors.pop()},e.prototype.allocWireIRs=function(s){var l=this,c=[],e=s.pins.map(function(e,t){var n,o=e.target,r=s.startColumnIdx+e.bbFit.partRelativeColIdx,i=m.visuals.getColumnName(r),a=s.startRowIdx+e.bbFit.partRelativeRowIdx;(7<=a&&(a-=2),d(e.def))?n={type:"breadboard",row:a<5?"j":"a",col:i,style:e.def.style}:n={type:"breadboard",row:m.visuals.getRowName(a),col:i,xOffset:e.bbFit.xOffset/s.def.visual.pinDistance,yOffset:e.bbFit.yOffset/s.def.visual.pinDistance,style:e.def.style};return{start:n,end:o,color:"ground"===o?u:"threeVolt"===o?"red":"number"==typeof e.def.colorGroup?c[e.def.colorGroup]?c[e.def.colorGroup]:c[e.def.colorGroup]=l.nextColor():l.nextColor(),pinIdx:t}});return f(s,{wires:e})},e.prototype.allocLocation=function(e,t){var n=this;if("ground"===e||"threeVolt"===e){if("ground"===e&&this.powerUsage.singleGround)return{type:"dalboard",pin:this.getBoardGroundPin()};if("threeVolt"===e&&this.powerUsage.singleThreeVolt)return{type:"dalboard",pin:this.getBoardThreeVoltPin()};m.U.assert(!!t.referenceBBPin);var o=this.opts.getBBCoord(t.referenceBBPin),r=[this.availablePowerPins.top.ground[0]||this.availablePowerPins.top.threeVolt[0],this.availablePowerPins.bottom.ground[0]||this.availablePowerPins.bottom.threeVolt[0]].map(function(e){return n.opts.getBBCoord(e)});r[0]&&r[1]||console.debug('No more available "'+e+'" locations!');var i=0==m.visuals.findClosestCoordIdx(o,r),a=void 0;i?"ground"===e?a=this.availablePowerPins.top.ground:"threeVolt"===e&&(a=this.availablePowerPins.top.threeVolt):"ground"===e?a=this.availablePowerPins.bottom.ground:"threeVolt"===e&&(a=this.availablePowerPins.bottom.threeVolt);var s=a.map(function(e){return n.opts.getBBCoord(e)}),l=m.visuals.findClosestCoordIdx(o,s),c=a[l];return i?(this.availablePowerPins.top.ground.splice(l,1),this.availablePowerPins.top.threeVolt.splice(l,1)):(this.availablePowerPins.bottom.ground.splice(l,1),this.availablePowerPins.bottom.threeVolt.splice(l,1)),c}if("breadboard"===e.type)return e;if("MOSI"===e||"MISO"===e||"SCK"===e)return this.opts.boardDef.spiPins||console.debug("No SPI pin mappings found!"),{type:"dalboard",pin:c=this.opts.boardDef.spiPins[e]};if("SDA"===e||"SCL"===e)return this.opts.boardDef.i2cPins||console.debug("No I2C pin mappings found!"),{type:"dalboard",pin:c=this.opts.boardDef.i2cPins[e]};m.U.assert("string"==typeof e,"Unknown location type: "+e);var u=e,g=this.opts.boardDef.gpioPinMap[u];return g?{type:"dalboard",pin:g}:void 0},e.prototype.getBoardGroundPin=function(){var e=this.opts.boardDef.groundPins[0]||null;return e||console.log("No available ground pin on board!"),e},e.prototype.getBoardThreeVoltPin=function(){var e=this.opts.boardDef.threeVoltPins[0]||null;return e||console.log("No available 3.3V pin on board!"),e},e.prototype.allocPowerWires=function(e){var t,n,o=this.getBoardGroundPin(),r=this.getBoardThreeVoltPin();this.opts.boardDef.attachPowerOnRight?(t={type:"breadboard",row:"-",col:"50"},n={type:"breadboard",row:"-",col:"25"}):(t={type:"breadboard",row:"-",col:"26"},n={type:"breadboard",row:"-",col:"1"});var i=[],a=[];e.bottomGround&&e.topGround&&i.push({start:this.allocLocation("ground",{referenceBBPin:t}),end:this.allocLocation("ground",{referenceBBPin:n}),color:u}),e.topGround?i.push({start:this.allocLocation("ground",{referenceBBPin:t}),end:{type:"dalboard",pin:o},color:u}):e.bottomGround&&i.push({start:this.allocLocation("ground",{referenceBBPin:n}),end:{type:"dalboard",pin:o},color:u}),e.bottomThreeVolt&&e.bottomGround&&a.push({start:this.allocLocation("threeVolt",{referenceBBPin:t}),end:this.allocLocation("threeVolt",{referenceBBPin:n}),color:"red"}),e.topThreeVolt?a.push({start:this.allocLocation("threeVolt",{referenceBBPin:t}),end:{type:"dalboard",pin:r},color:"red"}):e.bottomThreeVolt&&a.push({start:this.allocLocation("threeVolt",{referenceBBPin:n}),end:{type:"dalboard",pin:r},color:"red"});var s=[];0<i.length&&s.push({wireIndices:i.map(function(e,t){return t})});var l=i.length;return 0<a.length&&s.push({wireIndices:a.map(function(e,t){return t+l})}),{wires:i.concat(a),assembly:s}},e.prototype.allocWire=function(e){var o=this,r=[e.start,e.end],n=r.map(function(e){return"ground"===e||"threeVolt"===e}),i=r.map(function(e,t){return n[t]?void 0:o.allocLocation(e,{})});if((i=i.map(function(e,t){if(e)return e;var n=i[1-t];return o.allocLocation(r[t],{referenceBBPin:n})}))[0]&&i[1])return{start:i[0],end:i[1],color:e.color}},e.prototype.allocPart=function(r){var e=r.pins.filter(function(e){return d(e.def)}).map(function(e){var t=r.startRowIdx+e.bbFit.partRelativeRowIdx;7<=t&&(t-=2);var n=m.visuals.getRowName(t),o=r.startColumnIdx+e.bbFit.partRelativeColIdx;return{type:"breadboard",row:n,col:m.visuals.getColumnName(o)}});return{name:r.name,visual:r.def.visual,bbFit:r.bbFit,startColumnIdx:r.startColumnIdx,startRowIdx:r.startRowIdx,breadboardConnections:e,params:r.partParams,simulationBehavior:r.def.simulationBehavior}},e.prototype.allocAll=function(){var e,i=this,t=this.opts.partsList.map(function(e){return{name:e,def:i.opts.partDefs[e]}}).filter(function(e){return!!e.def});if(0<t.length){t.map(function(e){return e.name}),t.map(function(e){return e.def});var r=t.map(function(e){return i.computePartDimensions(e.def,e.name)}),a=[];t.forEach(function(e,t){var n=r[t],o=i.allocPartIRs(e.def,e.name,n);a=a.concat(o)});var n=this.placeParts(a).map(function(e){return i.allocWireIRs(e)}),o=n.map(function(e){return e.wires}).reduce(function(e,t){return e.concat(t)},[]).map(function(e){return n=[(t=e).start,t.end],o=n.map(function(e){return"ground"===e}),r=n.map(function(e){return"threeVolt"===e}),i=n.map(function(e){return function(e){var t=!1;if("string"!=typeof e&&"breadboard"===e.type){var n=e.row;t=0<=["a","b","c","d","e"].indexOf(n)}return t}(e)}),a=g(o),s=g(r),l=g(i),{topGround:a&&!l,topThreeVolt:s&&!l,bottomGround:a&&l,bottomThreeVolt:s&&l,singleGround:a,singleThreeVolt:s};var t,n,o,r,i,a,s,l});this.powerUsage=((e=o.reduce(function(e,t){return{topGround:e.topGround||t.topGround,topThreeVolt:e.topThreeVolt||t.topThreeVolt,bottomGround:e.bottomGround||t.bottomGround,bottomThreeVolt:e.bottomThreeVolt||t.bottomThreeVolt,singleGround:t.singleGround?null===e.singleGround:e.singleGround,singleThreeVolt:t.singleThreeVolt?null===e.singleThreeVolt:e.singleThreeVolt}},{topGround:!1,topThreeVolt:!1,bottomGround:!1,bottomThreeVolt:!1,singleGround:null,singleThreeVolt:null})).singleGround&&(e.topGround=e.bottomGround=!1),e.singleThreeVolt&&(e.topThreeVolt=e.bottomThreeVolt=!1),e);var s=this.allocPowerWires(this.powerUsage),l=n.map(function(e,t){var n=i.allocPart(e),o=e.wires.map(function(e){return i.allocWire(e)});if(!o.some(function(e){return!e})){var r=[];return e.wires.forEach(function(e,t){r[e.pinIdx]=t}),{part:n,wires:o,assembly:e.def.assembly.map(function(e){return{part:e.part,wireIndices:(e.pinIndices||[]).map(function(e){return r[e]})}})}}}).filter(function(e){return!!e}),c=[s].concat(l);return{partsAndWires:c,requiresBreadboard:c.some(function(e){return e.part&&e.part.breadboardConnections&&0<e.part.breadboardConnections.length||e.wires&&e.wires.some(function(e){return"breadboard"==e.end.type&&"croc"!=e.end.style||"breadboard"==e.start.type&&"croc"!=e.start.style})})}}return{partsAndWires:[]}},e}();m.allocateDefinitions=function(e){return new t(e).allocAll()}}(pxsim||(pxsim={})),function(e){!function(s){var e=function(e){this.seq=0,this.type=e},t=function(o){function e(e,t){var n=o.call(this,"response")||this;return n.request_seq=e.seq,n.command=e.command,t?(n.success=!1,n.message=t):n.success=!0,n}return __extends(e,o),e}(s.Message=e);s.Response=t;var n=function(o){function e(e,t){var n=o.call(this,"event")||this;return n.event=e,t&&(n.body=t),n}return __extends(e,o),e}(e);s.Event=n;var o=function(e,t,n,o,r){void 0===n&&(n=0),this.name=e,this.path=t,this.sourceReference=n,o&&(this.origin=o),r&&(this.adapterData=r)};s.Source=o;var r=function(e,t,n){void 0===n&&(n=!1),this.name=e,this.variablesReference=t,this.expensive=n};s.Scope=r;var i=function(e,t,n,o,r){void 0===o&&(o=0),void 0===r&&(r=0),this.id=e,this.source=n,this.line=o,this.column=r,this.name=t};s.StackFrame=i;var a=function(e,t){this.id=e,this.name=t||"Thread #"+e};s.Thread=a;var l=function(e,t,n,o,r){void 0===n&&(n=0),this.name=e,this.value=t,this.variablesReference=n,"number"==typeof r&&(this.namedVariables=r),"number"==typeof o&&(this.indexedVariables=o)};s.Variable=l;var c=function(e,t,n,o){this.verified=e,"number"==typeof t&&(this.line=t),"number"==typeof n&&(this.column=n),o&&(this.source=o)};s.Breakpoint=c;var u=function(e,t){this.id=e,this.name=t};s.Module=u;var g=function(e,t,n){void 0===n&&(n=0),this.label=e,this.start=t,this.length=n};s.CompletionItem=g;var p=function(r){function e(e,t,n){void 0===n&&(n=null);var o=r.call(this,"stopped")||this;(o.body={reason:e,threadId:t},n)&&(o.body.text=n);return o}return __extends(e,r),e}(n);s.StoppedEvent=p;var d=function(o){function e(e,t){var n=o.call(this,"continued")||this;return n.body={threadId:e},"boolean"==typeof t&&(n.body.allThreadsContinued=t),n}return __extends(e,o),e}(n);s.ContinuedEvent=d;var _=function(e){function t(){return e.call(this,"initialized")||this}return __extends(t,e),t}(n);s.InitializedEvent=_;var f=function(n){function e(e){var t=n.call(this,"terminated")||this;"boolean"==typeof e&&(t.body={restart:e});return t}return __extends(e,n),e}(n);s.TerminatedEvent=f;var h=function(r){function e(e,t,n){void 0===t&&(t="console");var o=r.call(this,"output")||this;return o.body={category:t,output:e},void 0!==n&&(o.body.data=n),o}return __extends(e,r),e}(n);s.OutputEvent=h;var m=function(o){function e(e,t){var n=o.call(this,"thread")||this;return n.body={reason:e,threadId:t},n}return __extends(e,o),e}(n);s.ThreadEvent=m;var y=function(o){function e(e,t){var n=o.call(this,"breakpoint")||this;return n.body={reason:e,breakpoint:t},n}return __extends(e,o),e}(n);s.BreakpointEvent=y;var v=function(o){function e(e,t){var n=o.call(this,"module")||this;return n.body={reason:e,module:t},n}return __extends(e,o),e}(n);s.ModuleEvent=v;var b=function(){function e(){this._pendingRequests={}}return e.prototype.start=function(e){var o=this;this._sequence=1,this.host=e,this.host.onData(function(e){if("request"===e.type)o.dispatchRequest(e);else if("response"===e.type){var t=e,n=o._pendingRequests[t.seq];n&&(delete o._pendingRequests[t.seq],n(t))}})},e.prototype.stop=function(){this.host&&this.host.close()},e.prototype.sendEvent=function(e){this.send("event",e)},e.prototype.sendResponse=function(e){0<e.seq?console.error("attempt to send more than one response for command "+e.command):this.send("response",e)},e.prototype.sendRequest=function(e,t,n,o){var r=this,i={command:e};if(t&&0<Object.keys(t).length&&(i.arguments=t),this.send("request",i),o){this._pendingRequests[i.seq]=o;var a=setTimeout(function(){clearTimeout(a);var e=r._pendingRequests[i.seq];e&&(delete r._pendingRequests[i.seq],e(new s.Response(i,"timeout")))},n)}},e.prototype.send=function(e,t){if(t.type=e,t.seq=this._sequence++,this.host){var n=JSON.stringify(t);this.host.send(n)}},e.prototype.dispatchRequest=function(e){},e}(),k=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e._debuggerLinesStartAt1=!1,e._debuggerColumnsStartAt1=!1,e._clientLinesStartAt1=!0,e._clientColumnsStartAt1=!0,e}return __extends(i,t),i.prototype.shutdown=function(){},i.prototype.dispatchRequest=function(e){var t=new s.Response(e);try{if("initialize"===e.command){var n=e.arguments;if("boolean"==typeof n.linesStartAt1&&(this._clientLinesStartAt1=n.linesStartAt1),"boolean"==typeof n.columnsStartAt1&&(this._clientColumnsStartAt1=n.columnsStartAt1),"path"!==n.pathFormat)this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null);else{var o=t;o.body={},this.initializeRequest(o,n)}}else"launch"===e.command?this.launchRequest(t,e.arguments):"attach"===e.command?this.attachRequest(t,e.arguments):"disconnect"===e.command?this.disconnectRequest(t,e.arguments):"setBreakpoints"===e.command?this.setBreakPointsRequest(t,e.arguments):"setFunctionBreakpoints"===e.command?this.setFunctionBreakPointsRequest(t,e.arguments):"setExceptionBreakpoints"===e.command?this.setExceptionBreakPointsRequest(t,e.arguments):"configurationDone"===e.command?this.configurationDoneRequest(t,e.arguments):"continue"===e.command?this.continueRequest(t,e.arguments):"next"===e.command?this.nextRequest(t,e.arguments):"stepIn"===e.command?this.stepInRequest(t,e.arguments):"stepOut"===e.command?this.stepOutRequest(t,e.arguments):"stepBack"===e.command?this.stepBackRequest(t,e.arguments):"restartFrame"===e.command?this.restartFrameRequest(t,e.arguments):"goto"===e.command?this.gotoRequest(t,e.arguments):"pause"===e.command?this.pauseRequest(t,e.arguments):"stackTrace"===e.command?this.stackTraceRequest(t,e.arguments):"scopes"===e.command?this.scopesRequest(t,e.arguments):"variables"===e.command?this.variablesRequest(t,e.arguments):"setVariable"===e.command?this.setVariableRequest(t,e.arguments):"source"===e.command?this.sourceRequest(t,e.arguments):"threads"===e.command?this.threadsRequest(t):"evaluate"===e.command?this.evaluateRequest(t,e.arguments):"stepInTargets"===e.command?this.stepInTargetsRequest(t,e.arguments):"gotoTargets"===e.command?this.gotoTargetsRequest(t,e.arguments):"completions"===e.command?this.completionsRequest(t,e.arguments):this.customRequest(e.command,t,e.arguments)}catch(e){this.sendErrorResponse(t,1104,"{_stack}",{_exception:e.message,_stack:e.stack})}},i.prototype.initializeRequest=function(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,this.sendResponse(e)},i.prototype.disconnectRequest=function(e,t){this.sendResponse(e),this.shutdown()},i.prototype.launchRequest=function(e,t){this.sendResponse(e)},i.prototype.attachRequest=function(e,t){this.sendResponse(e)},i.prototype.setBreakPointsRequest=function(e,t){this.sendResponse(e)},i.prototype.setFunctionBreakPointsRequest=function(e,t){this.sendResponse(e)},i.prototype.setExceptionBreakPointsRequest=function(e,t){this.sendResponse(e)},i.prototype.configurationDoneRequest=function(e,t){this.sendResponse(e)},i.prototype.continueRequest=function(e,t){this.sendResponse(e)},i.prototype.nextRequest=function(e,t){this.sendResponse(e)},i.prototype.stepInRequest=function(e,t){this.sendResponse(e)},i.prototype.stepOutRequest=function(e,t){this.sendResponse(e)},i.prototype.stepBackRequest=function(e,t){this.sendResponse(e)},i.prototype.restartFrameRequest=function(e,t){this.sendResponse(e)},i.prototype.gotoRequest=function(e,t){this.sendResponse(e)},i.prototype.pauseRequest=function(e,t){this.sendResponse(e)},i.prototype.sourceRequest=function(e,t){this.sendResponse(e)},i.prototype.threadsRequest=function(e){this.sendResponse(e)},i.prototype.stackTraceRequest=function(e,t){this.sendResponse(e)},i.prototype.scopesRequest=function(e,t){this.sendResponse(e)},i.prototype.variablesRequest=function(e,t){this.sendResponse(e)},i.prototype.setVariableRequest=function(e,t){this.sendResponse(e)},i.prototype.evaluateRequest=function(e,t){this.sendResponse(e)},i.prototype.stepInTargetsRequest=function(e,t){this.sendResponse(e)},i.prototype.gotoTargetsRequest=function(e,t){this.sendResponse(e)},i.prototype.completionsRequest=function(e,t){this.sendResponse(e)},i.prototype.customRequest=function(e,t,n){this.sendErrorResponse(t,1014,"unrecognized request",null)},i.prototype.sendErrorResponse=function(e,t,n,o){var r;"number"==typeof t?(r={id:t,format:n},o&&(r.variables=o),r.showUser=!0):r=t,e.success=!1,i.formatPII(r.format,!0,r.variables),e.body||(e.body={}),e.body.error=r,this.sendResponse(e)},i.prototype.convertClientLineToDebugger=function(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e},i.prototype.convertDebuggerLineToClient=function(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e},i.prototype.convertClientColumnToDebugger=function(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e},i.prototype.convertDebuggerColumnToClient=function(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e},i.prototype.convertClientPathToDebugger=function(e){return this._clientPathsAreURIs!=this._debuggerPathsAreURIs?this._clientPathsAreURIs?i.uri2path(e):i.path2uri(e):e},i.prototype.convertDebuggerPathToClient=function(e){return this._debuggerPathsAreURIs!=this._clientPathsAreURIs?this._debuggerPathsAreURIs?i.uri2path(e):i.path2uri(e):e},i.path2uri=function(e){var t=e.replace(/\\/g,"/");return"/"!==t[0]&&(t="/"+t),encodeURI("file://"+t)},i.uri2path=function(e){return e},i.formatPII=function(e,n,o){return e.replace(i._formatPIIRegexp,function(e,t){return n&&0<t.length&&"_"!==t[0]?e:o[t]&&o.hasOwnProperty(t)?o[t]:e})},i._formatPIIRegexp=/{([^}]+)}/g,i}(s.ProtocolServer=b);s.DebugSession=k}(e.protocol||(e.protocol={}))}(pxsim||(pxsim={})),function(e){!function(e){e.injectPolyphils=function(){Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{writable:!0,enumerable:!0,value:function(e){if(null==this)throw new TypeError("this is null or not defined");for(var t=Object(this),n=t.length>>>0,o=arguments[1]>>0,r=o<0?Math.max(n+o,0):Math.min(o,n),i=arguments[2],a=void 0===i?n:i>>0,s=a<0?Math.max(n+a,0):Math.min(a,n);r<s;)t[r]=e,r++;return t}}),Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice,writable:!0,enumerable:!0}),Uint16Array.prototype.slice||Object.defineProperty(Uint16Array.prototype,"slice",{value:Array.prototype.slice,writable:!0,enumerable:!0}),Uint32Array.prototype.slice||Object.defineProperty(Uint32Array.prototype,"slice",{value:Array.prototype.slice,writable:!0,enumerable:!0}),Uint8Array.prototype.fill||Object.defineProperty(Uint8Array.prototype,"fill",{value:Array.prototype.fill,writable:!0,enumerable:!0}),Uint16Array.prototype.fill||Object.defineProperty(Uint16Array.prototype,"fill",{value:Array.prototype.fill,writable:!0,enumerable:!0}),Uint32Array.prototype.fill||Object.defineProperty(Uint32Array.prototype,"fill",{value:Array.prototype.fill,writable:!0,enumerable:!0})};var t=function(){function e(e){this._func=e,this._evaluated=!1}return Object.defineProperty(e.prototype,"value",{get:function(){return this._evaluated||(this._value=this._func(),this._evaluated=!0),this._value},enumerable:!0,configurable:!0}),e}();function l(e){e=e.replace(/\\/g,"/");var t=[];return e.split("/").forEach(function(e){".."===e&&t.length?t.pop():e&&"."!==e&&t.push(e)}),t}e.Lazy=t,e.getNormalizedParts=l,e.normalizePath=function(e){return l(e).join("/")},e.relativePath=function(e,t){for(var n=l(e),o=l(t),r=0;n[r]===o[r]&&++r!==n.length&&r!==o.length;);for(var i=n.slice(r),a=o.slice(r),s=0;s<i.length;s++)a.unshift("..");return a.join("/")},e.pathJoin=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";return e.forEach(function(e){e.replace(/\\/g,"/"),e.lastIndexOf("/")===e.length-1&&(e=e.slice(0,e.length-1)),n+="/"+e}),n},e.toArray=function(e){if(Array.isArray(e))return e;for(var t=[],n=0;n<e.length;++n)t.push(e[n]);return t}}(e.util||(e.util={}))}(pxsim||(pxsim={})),function(l){l.getWarningMessage=function(e){for(var t={type:"debugger",subtype:"warning",breakpointIds:[],message:e},n=l.runtime.currFrame;null!=n;)t.breakpointIds.push(n.lastBrkId),n=n.parent;return t};var e=function(){function e(e){var o=this;for(var t in this.fileMap={},this.idMap={},e.forEach(function(e){var t=e[0],n=e[1];o.fileMap[n.source.path]||(o.fileMap[n.source.path]=[]),o.fileMap[n.source.path].push(e),o.idMap[t]=n}),this.fileMap){var n=this.fileMap[t];this.fileMap[t]=n.sort(function(e,t){var n=e[1],o=t[1];return n.line===o.line?o.endLine===n.endLine?n.column-o.column:o.endLine-n.endLine:n.line-o.line})}}return e.prototype.getById=function(e){return this.idMap[e]},e.prototype.verifyBreakpoint=function(e,t){var n,o=this.fileMap[e];if(o)for(var r=0,i=o;r<i.length;r++){var a=i[r],s=a[0],l=a[1];l.line<=t.line&&l.endLine>=t.line&&(n=[s,l])}return n?(n[1].verified=!0,n):[-1,{verified:!1}]},e}();function i(e,t){function i(e){switch(typeof e){case"string":case"number":case"boolean":return e;case"function":return{text:"(function)"};case"undefined":return null;case"object":return e?e instanceof l.RefObject?{id:(t[e.id]=e).id,preview:l.RefObject.toDebugString(e)}:{text:"(object)"}:null;default:throw new Error}}return function(e){for(var t={},n=0,o=Object.keys(e);n<o.length;n++){var r=o[n];!/^__/.test(r)&&/___\d+$/.test(r)&&(t[r.replace(/___\d+$/,"")]=i(e[r]))}return t}(e)}l.BreakpointMap=e,l.dumpHeap=i,l.getBreakpointMsg=function(e,t){for(var n={},o={type:"debugger",subtype:"breakpoint",breakpointId:t,globals:i(l.runtime.globals,n),stackframes:[]};null!=e;){var r=e.fn?e.fn.info:null;r&&o.stackframes.push({locals:i(e,n),funcInfo:r,breakpointId:e.lastBrkId}),e=e.parent}return{msg:o,heap:n}};var t=function(o){function n(e){var t=o.call(this)||this,n={onDebuggerBreakpoint:function(e){return t.onDebuggerBreakpoint(e)},onDebuggerWarning:function(e){return t.onDebuggerWarning(e)},onDebuggerResume:function(){return t.onDebuggerResume()},onStateChanged:function(e){return t.onStateChanged(e)}};return t.driver=new l.SimulatorDriver(e,n),t}return __extends(n,o),n.prototype.runCode=function(e,t,n,o,r){this.breakpoints=o,this.projectDir&&this.fixBreakpoints(),this.sendEvent(new l.protocol.InitializedEvent),this.driver.run(e,{parts:t,fnArgs:n,boardDefinition:r})},n.prototype.stopSimulator=function(e){void 0===e&&(e=!1),this.driver.stop(e)},n.prototype.initializeRequest=function(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsConfigurationDoneRequest=!0,this.sendResponse(e)},n.prototype.disconnectRequest=function(e,t){this.sendResponse(e),this.shutdown()},n.prototype.launchRequest=function(e,t){this.projectDir||(this.projectDir=l.util.normalizePath(t.projectDir),this.breakpoints&&this.fixBreakpoints()),this.sendResponse(e)},n.prototype.setBreakPointsRequest=function(r,i){var a=this;r.body={breakpoints:[]};var s=[];i.breakpoints.forEach(function(e){if(a.breakpoints){var t=a.breakpoints.verifyBreakpoint(l.util.relativePath(a.projectDir,i.source.path),e),n=t[0],o=t[1];r.body.breakpoints.push(o),o.verified&&s.push(n)}else r.body.breakpoints.push({verified:!1})}),this.driver.setBreakpoints(s),this.sendResponse(r)},n.prototype.continueRequest=function(e,t){this.driver.resume(l.SimulatorDebuggerCommand.Resume),this.sendResponse(e)},n.prototype.nextRequest=function(e,t){this.driver.resume(l.SimulatorDebuggerCommand.StepOver),this.sendResponse(e)},n.prototype.stepInRequest=function(e,t){this.driver.resume(l.SimulatorDebuggerCommand.StepInto),this.sendResponse(e)},n.prototype.stepOutRequest=function(e,t){this.driver.resume(l.SimulatorDebuggerCommand.StepOut),this.sendResponse(e)},n.prototype.pauseRequest=function(e,t){this.driver.resume(l.SimulatorDebuggerCommand.Pause),this.sendResponse(e)},n.prototype.threadsRequest=function(e){e.body={threads:[{id:n.THREAD_ID,name:"main"}]},this.sendResponse(e)},n.prototype.stackTraceRequest=function(e,t){if(this.lastBreak){var n=this.state.getFrames();e.body={stackFrames:n}}this.sendResponse(e)},n.prototype.scopesRequest=function(e,t){this.state&&(e.body={scopes:this.state.getScopes(t.frameId)}),this.sendResponse(e)},n.prototype.variablesRequest=function(e,t){this.state&&(e.body={variables:this.state.getVariables(t.variablesReference)}),this.sendResponse(e)},n.prototype.onDebuggerBreakpoint=function(e){if(this.lastBreak=e,this.state=new r(this.lastBreak,this.breakpoints,this.projectDir),e.exceptionMessage){var t=e.exceptionMessage.replace(/___\d+/g,"");this.sendEvent(new l.protocol.StoppedEvent("exception",n.THREAD_ID,t))}else this.sendEvent(new l.protocol.StoppedEvent("breakpoint",n.THREAD_ID))},n.prototype.onDebuggerWarning=function(e){},n.prototype.onDebuggerResume=function(){this.sendEvent(new l.protocol.ContinuedEvent(n.THREAD_ID,!0))},n.prototype.onStateChanged=function(e){switch(e){case l.SimulatorState.Paused:break;case l.SimulatorState.Running:this.sendEvent(new l.protocol.ContinuedEvent(n.THREAD_ID,!0));break;case l.SimulatorState.Stopped:this.sendEvent(new l.protocol.TerminatedEvent);break;case l.SimulatorState.Unloaded:}},n.prototype.fixBreakpoints=function(){for(var e in this.breakpoints.idMap){var t=this.breakpoints.idMap[e];t.source.path=l.util.pathJoin(this.projectDir,t.source.path),t.line=this.convertDebuggerLineToClient(t.line),t.endLine=this.convertDebuggerLineToClient(t.endLine),t.column=this.convertDebuggerColumnToClient(t.column),t.endColumn=this.convertDebuggerColumnToClient(t.endColumn)}},n.THREAD_ID=1,n}(l.protocol.DebugSession);l.SimDebugSession=t;var r=function(){function e(e,t,n){this._message=e,this._map=t,this._dir=n,this._currentId=1,this._frames={},this._vars={};var o=this.nextId();this._vars[o]=this.getVariableValues(this._message.globals),this._globalScope={name:"Globals",variablesReference:o,expensive:!1}}return e.prototype.getFrames=function(){var o=this;return this._message.stackframes.map(function(e,t){var n=o._map.getById(e.breakpointId);if(n)return{id:(o._frames[e.breakpointId]=e).breakpointId,name:e.funcInfo?e.funcInfo.functionName:0===t?"main":"anonymous",line:n.line,column:n.column,endLine:n.endLine,endColumn:n.endLine,source:n.source}}).filter(function(e){return!!e})},e.prototype.getScopes=function(e){var t=this._frames[e];if(t){var n=this.nextId();return this._vars[n]=this.getVariableValues(t.locals),[{name:"Locals",variablesReference:n,expensive:!1},this._globalScope]}return[this._globalScope]},e.prototype.getVariables=function(e){var t=this._vars[e];return t&&t.value||[]},e.prototype.getVariableValues=function(a){var s=this;return new l.util.Lazy(function(){var e=[];for(var t in a){var n=a[t],o=void 0,r=0;null===n?o="null":void 0===n?o="undefined":"object"==typeof n?(o="(object)",r=s.nextId(),s._vars[r]=s.getVariableValues(n)):o=n.toString();var i=t.substr(0,t.lastIndexOf("___"));e.push({name:i,value:o,variablesReference:r})}return e})},e.prototype.nextId=function(){return this._currentId++},e}()}(pxsim||(pxsim={})),function(s){function l(e){function t(){try{window.print()}catch(e){}}void 0===e&&(e=0),e?setTimeout(t,e):t()}function o(e){"undefined"!=typeof window&&window.parent&&window.parent!==window&&window.parent.postMessage(e,"*")}function n(){setInterval(function(){s.Runtime.postMessage({type:"simulator",command:"reload"})},500)}s.print=l,function(e){function t(e){e.origin;var t=e.data||{},n=t.type||"";if(n)switch(n||""){case"run":i(t);break;case"instructions":s.instructions.renderInstructions(t);break;case"stop":r();break;case"mute":a(t.mute);break;case"print":l();break;case"custom":s.handleCustomMessage&&s.handleCustomMessage(t);break;case"pxteditor":break;case"debugger":o&&o.handleDebuggerMsg(t);break;default:!function(e){if(!o||o.dead)return;o.board.receiveMessage(e)}(t)}}var o;function r(){o&&(o.kill(),o.board&&o.board.kill())}function i(e){r(),e.mute&&a(e.mute),e.localizedStrings&&s.localization.setLocalizedStrings(e.localizedStrings),(o=new s.Runtime(e)).board.initAsync(e).done(function(){o.run(function(e){s.dumpLivePointers(),s.Runtime.postMessage({type:"toplevelcodefinished"})})})}function a(e){s.AudioContextManager.mute(e)}e.start=function(){window.addEventListener("message",t,!1);var e=window.location.hash.slice(1);"undefined"!=typeof window&&(window.applicationCache.status===window.applicationCache.UPDATEREADY&&n(),window.applicationCache.addEventListener("updateready",function(){window.applicationCache.status===window.applicationCache.UPDATEREADY&&n()})),s.Runtime.postMessage({type:"ready",frameid:e})},e.stop=r,e.run=i}(s.Embed||(s.Embed={})),s.tickEvent=function(e,t){o({type:"pxtsim",action:"event",tick:e,data:t})},s.reportError=function(e,t,n){o({type:"pxtsim",action:"event",tick:"error",category:e,message:t,data:n})},s.reload=n}(pxsim||(pxsim={})),pxsim.util.injectPolyphils(),"undefined"!=typeof window&&window.addEventListener("load",function(e){pxsim.Embed.start()}),function(M){!function(e){var c=10,o=30,a=function(e){return e+"x"},s=20,O=3,R=5,L=5,u=40,g=50,p=1.5,t=[816*.95,1056*.95],n=[1,1],r=n[0],i=n[1],l=(t[0]-86.4)/i-48*i,d=465,_=400,P=1.7,f=.17,h=.25,m=.3,y=.23,v=l-36,b="\n            .instr-panel {\n                margin: 20px;\n                padding: 24px;\n                border-width: 4px;\n                border-color: gray;\n                border-style: solid;\n                border-radius: 20px;\n                display: inline-block;\n                width: "+l+"px;\n                height: "+((t[1]-86.4)/r-48*r)+"px;\n                position: relative;\n                overflow: hidden;\n                page-break-inside: avoid;\n            }\n            .board-svg {\n                margin: 0 auto;\n                display: block;\n                position: absolute;\n                bottom: 24px;\n                left: "+((l-d)/2+24)+"px;\n            }\n            .panel-num-outer {\n                position: absolute;\n                left: "+-4+"px;\n                top: "+-4+"px;\n                width: 120px;\n                height: 120px;\n                border-width: 4px;\n                border-style: solid;\n                border-color: gray;\n                border-radius: 20px 0 20px 0;\n            }\n            .panel-num {\n                margin: 10px 0;\n                text-align: center;\n                font-size: 80px;\n            }\n            .cmp-div {\n                display: inline-block;\n            }\n            .reqs-div {\n                margin-left: 144px;\n                margin-top: 5px;\n            }\n            .partslist-wire,\n            .partslist-cmp {\n                margin: 10px;\n            }\n            .partslist-wire {\n                display: inline-block;\n            }\n            ";function k(e,t){e.classList?e.classList.add(t):e.className.indexOf(t)<0&&(e.className+=" "+t)}function T(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg"),o={l:0,t:0,w:0,h:0},r=document.createElementNS("http://www.w3.org/2000/svg","svg");n.appendChild(r),r.appendChild(e.el);var i={viewBox:e.x+" "+e.y+" "+e.w+" "+e.h,preserveAspectRatio:"xMidYMid"};o.w=e.w,o.h=e.h;var a=function(e){o.h*=e,o.w*=e,i.width=o.w,i.height=o.h};t.cmpScale&&a(t.cmpScale),t.cmpWidth&&t.cmpWidth<o.w?a(t.cmpWidth/o.w):t.cmpHeight&&t.cmpHeight<o.h&&a(t.cmpHeight/o.h),M.svg.hydrate(r,i);var s=o.l,l=o.t,c=o.w,u=o.h,g=function(e){if(e<o.l){var t=o.l-e;o.l=e,o.w+=t}},p=function(e){var t=o.l+o.w;if(t<e){var n=e-t;o.w+=n}},d=function(e){if(e<o.t){var t=o.t-e;o.t=e,o.h+=t}},_=function(e){var t=o.t+o.h;if(t<e){var n=e-t;o.h+=n}},f=[-.3,.3],h=f[0],m=f[1],y=[1.4,1];if(t&&t.top){var v=(B=t.topSize)/y[0],b=[s+c/2,l-O-(x=B/y[1])/2],k=b[0],T=b[1],E=M.visuals.mkTxt(k,T,B,0,t.top,h,m);M.svg.addClass(E,"cmp-lbl"),n.appendChild(E);var S=v*t.top.length;d(T-x/2),g(k-S/2),p(k+S/2)}if(t&&t.bot){v=(B=t.botSize)/y[0];var C=[s+c/2,l+u+O+(x=B/y[1])/2];k=C[0],T=C[1],E=M.visuals.mkTxt(k,T,B,0,t.bot,h,m);M.svg.addClass(E,"cmp-lbl"),n.appendChild(E);S=v*t.bot.length;_(T+x/2),g(k-S/2),p(k+S/2)}if(t&&t.right){var x=(B=t.rightSize)/y[1],A=(S=(v=B/y[0])*t.right.length,[s+c+R+S/2,l+u/2]),D=(k=A[0],A[1]);E=M.visuals.mkTxt(k,D,B,0,t.right,h,m);M.svg.addClass(E,"cmp-lbl"),n.appendChild(E),d(D-x/2),p(k+S/2),_(D+x/2)}if(t&&t.left){x=(B=t.leftSize)/y[1],S=(v=B/y[0])*t.left.length;var B,I=[s-L-S/2,l+u/2];k=I[0],D=I[1],E=M.visuals.mkTxt(k,D,B,0,t.left,h,m);M.svg.addClass(E,"cmp-lbl"),n.appendChild(E),d(D-x/2),g(k-S/2),_(D+x/2)}var N={viewBox:o.l+" "+o.t+" "+o.w+" "+o.h,width:o.w*P,height:o.h*P,preserveAspectRatio:"xMidYMid"};M.svg.hydrate(n,N);var w=document.createElement("div");return w.appendChild(n),w}function E(e,t){var n,o=M.runtime.board;if("wire"==e)n=M.visuals.mkWirePart([0,0],t.wireClr||"red",t.crocClips);else{var r=e;if("string"==typeof r.builtIn)n=(0,o.builtinPartVisuals[r.builtIn])([0,0]);else n=M.visuals.mkGenericPartSVG(r)}return T(n,t)}function S(e,t,n){void 0===n&&(n=!1);var o={state:M.runtime.board,boardDef:e.boardDef,forceBreadboardLayout:!0,forceBreadboardRender:e.allAlloc.requiresBreadboard,partDefs:e.cmpDefs,maxWidth:t+"px",fnArgs:e.fnArgs,wireframe:n,partsList:[]},r=new M.visuals.BoardHost(M.visuals.mkBoardView({visual:o.boardDef.visual,wireframe:o.wireframe}),o),i=r.getView();return M.svg.addClass(i,"board-svg"),r}function C(){var e=document.createElement("div");return k(e,"instr-panel"),e}function x(r){var e,i=C(),t=T((e=r.boardDef.visual,M.visuals.mkBoardView({visual:e}).getView()),{left:a(1),leftSize:o,cmpScale:f});i.appendChild(t);var n=T(new M.visuals.Breadboard({}).getSVGAndSize(),{left:a(1),leftSize:o,cmpScale:h});return i.appendChild(n),r.allCmps.forEach(function(e){var t=1;"buttonpair"===e.visual.builtIn&&(t=2);var n=E(e.visual,{left:a(t),leftSize:o,cmpScale:m});k(n,"partslist-cmp"),i.appendChild(n)}),r.allWireColors.forEach(function(e){var t=r.colorToWires[e].length,n=r.boardDef.pinStyles[e]||"female",o=E("wire",{left:a(t),leftSize:s,wireClr:e,cmpScale:y,crocClips:"croc"==n});k(o,"partslist-wire"),i.appendChild(o)}),i}function A(e,o){var t=C(),n=S(o,d,!0);!function(o,r,i){var e=o.getView();0<r&&M.svg.addClass(e,"grayed");for(var t=function(n){var e=i.stepToCmps[n];e&&e.forEach(function(e){var t=o.addPart(e);n===r&&(e.breadboardConnections.forEach(function(e){return o.highlightBreadboardPin(e)}),M.svg.addClass(t.element,"notgrayed"))});var t=i.stepToWires[n];t&&t.forEach(function(e){var t=o.addWire(e);n===r&&("breadboard"==e.start.type?o.highlightBreadboardPin(e.start):o.highlightBoardPin(e.start.pin),"breadboard"==e.end.type?o.highlightBreadboardPin(e.end):o.highlightBoardPin(e.end.pin),o.highlightWire(t))})},n=0;n<=r;n++)t(n)}(n,e,o),t.appendChild(n.getView());var r=document.createElement("div");k(r,"panel-num-outer"),k(r,"noselect"),t.appendChild(r);var i=document.createElement("div");k(i,"panel-num"),i.textContent=e+1+"",r.appendChild(i);var a=document.createElement("div");k(a,"reqs-div"),t.appendChild(a);var s=o.stepToWires[e]||[],l=function(e){if("breadboard"===e.type){var t=e;return"("+t.row+","+t.col+")"}return e.pin};return s.forEach(function(e){var t=!1;"dalboard"==e.end.type&&(t="croc"==o.boardDef.pinStyles[e.end.pin]);var n=E("wire",{top:l(e.end),topSize:c,bot:l(e.start),botSize:c,wireClr:e.color,cmpHeight:u,crocClips:t});k(n,"cmp-div"),a.appendChild(n)}),(o.stepToCmps[e]||[]).forEach(function(i){("buttonpair"===i.visual.builtIn?[i.breadboardConnections[0],i.breadboardConnections[2]]:[i.breadboardConnections[0]]).forEach(function(e,t){var n;e?n="("+e.row+","+e.col+")":n="";var o=p;"buttonpair"===i.visual.builtIn&&(o*=.5);var r=E(i.visual,{top:n,topSize:c,cmpHeight:g,cmpScale:o});k(r,"cmp-div"),a.appendChild(r)})}),t}function D(e,t){t.boardDef.pinStyles||(t.boardDef.pinStyles={}),t.configData&&M.setConfigData(t.configData.cfg,t.configData.cfgKey);var n={type:"run",code:"",boardDefinition:t.boardDef,partDefinitions:t.partDefinitions};M.runtime=new M.Runtime(n),M.runtime.board=null,M.initCurrentRuntime(n);var o=document.createElement("style");o.textContent+=b,document.head.appendChild(o);var r,i,a,s=t.partDefinitions,l=new M.visuals.Breadboard({}),c=function(e){var t=M.allocateDefinitions(e),r=[],i=[],a=1;t.partsAndWires.forEach(function(e){var n=e.part,o=e.wires;e.assembly.forEach(function(e,t){e.part&&n&&(i[a+t]=[n]),e.wireIndices&&0<e.wireIndices.length&&o&&(r[a+t]=e.wireIndices.map(function(e){return o[e]}))}),a+=e.assembly.length});var n=a-1,o=t.partsAndWires.map(function(e){return e.part}).filter(function(e){return!!e}),s=t.partsAndWires.map(function(e){return e.wires||[]}).reduce(function(e,t){return e.concat(t)},[]),l={},c=[];return s.forEach(function(e){l[e.color]||(l[e.color]=[],c.push(e.color)),l[e.color].push(e)}),{boardDef:e.boardDef,cmpDefs:e.partDefs,fnArgs:e.fnArgs,allAlloc:t,stepToWires:r,stepToCmps:i,allWires:s,allCmps:o,lastStep:n,colorToWires:l,allWireColors:c}}({boardDef:t.boardDef,partDefs:s,partsList:t.parts,fnArgs:t.fnArgs,getBBCoord:l.getCoord.bind(l)}),u=(r=c,i=document.getElementById("front-panel"),(a=S(r,_,!1)).addAll(r.allAlloc),i.appendChild(a.getView()),x(c));e.appendChild(u);for(var g=0;g<=c.lastStep;g++){var p=A(g,c);e.appendChild(p)}var d=function(e){var t=C();k(t,"back-panel");var n=S(e,v,!1);return n.addAll(e.allAlloc),t.appendChild(n.getView()),t}(c);e.appendChild(d)}e.renderParts=D,e.renderInstructions=function(e){document.getElementById("proj-title").innerText=e.options.name||"",D(document.body,e.options)}}(M.instructions||(M.instructions={}))}(pxsim||(pxsim={})),function(a){function s(e,t){if(void 0===t&&(t="sim: check failed"),!e)throw new Error(t)}a.quiet=!1,a.check=s,a.floatingPoint=!1,a.refCounting=!0,a.title="";var n={},o={};a.noRefCounting=function(){a.refCounting=!1,a.runtime&&(a.runtime.refCounting=!1)},a.getConfig=function(e){return o.hasOwnProperty(e+"")?o[e+""]:null},a.getConfigKey=function(e){return n.hasOwnProperty(e)?n[e]:null},a.getAllConfigKeys=function(){return Object.keys(n)},a.setConfig=function(e,t){o[e]=t},a.setConfigData=function(e,t){o=e,n=t},a.getConfigData=function(){return{cfg:o,cfgKey:n}},a.enableFloatingPoint=function(){a.floatingPoint=!0},a.setTitle=function(e){a.title=e};var r=function(){function e(){this.refcnt=1,a.runtime?this.id=a.runtime.registerLiveObject(this):this.id=0}return e.prototype.destroy=function(){},e.prototype.print=function(){a.runtime&&a.runtime.refCountingDebug&&console.log("RefObject id:"+this.id+" refs:"+this.refcnt)},e.prototype.toDebugString=function(){return"(object)"},e.toAny=function(e){return e&&e.toAny?e.toAny():e},e.toDebugString=function(e){return null===e?"null":void 0===e?"undefined;":e.toDebugString?e.toDebugString():"string"==typeof e?JSON.stringify(e):e.toString()},e}();a.RefObject=r;var i=function(e,t,n,o,r,i){this.func=e,this.caps=t,this.a0=n,this.a1=o,this.a2=r,this.cb=i};a.FnWrapper=i;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fields=[],e}return __extends(e,t),e.prototype.destroy=function(){for(var e=this.vtable.refmask,t=0;t<e.length;++t)e[t]&&m(this.fields[t]);this.fields=null,this.vtable=null},e.prototype.isRef=function(e){return s(0<=e&&e<this.fields.length),!!this.vtable.refmask[e]},e.prototype.print=function(){a.runtime&&a.runtime.refCountingDebug&&console.log("RefRecord id:"+this.id+" ("+this.vtable.name+") len:"+this.fields.length)},e}(r);a.RefRecord=l;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fields=[],e}return __extends(e,t),e.prototype.isRef=function(e){return s(0<=e&&e<this.fields.length),e<this.reflen},e.prototype.ldclo=function(e){return s(0<=(e>>=2)&&e<this.fields.length),this.fields[e]},e.prototype.destroy=function(){for(var e=0;e<this.reflen;++e)m(this.fields[e]);this.fields=null,this.func=null},e.prototype.print=function(){a.runtime&&a.runtime.refCountingDebug&&console.log("RefAction id:"+this.id+" refs:"+this.refcnt+" len:"+this.fields.length)},e}(r);a.RefAction=c,function(e){function o(e,t,n,o){var r=a.getResume();e instanceof c?(d.incr(e),r(new i(e.func,e.fields,t,n,o,function(){d.decr(e)}))):r(new i(e,null,t,n,o,null))}e.mkAction=function(e,t,n){var o=new c;o.reflen=e,o.func=n;for(var r=0;r<t;++r)o.fields.push(null);return o},e.runAction3=o,e.runAction2=function(e,t,n){o(e,t,n,null)},e.runAction1=function(e,t){o(e,t,null,null)},e.runAction0=function(e){o(e,null,null,null)}}(a.pxtcore||(a.pxtcore={}));var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.v=0,e}return __extends(e,t),e.prototype.print=function(){},e}(r);a.RefLocal=e;var t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.v=null,e}return __extends(e,t),e.prototype.destroy=function(){m(this.v)},e.prototype.print=function(){a.runtime&&a.runtime.refCountingDebug&&console.log("RefRefLocal id:"+this.id+" refs:"+this.refcnt+" v:"+this.v)},e}(r);a.RefRefLocal=t;var u,g,p,d,_,f,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.vtable=42,e.data=[],e}return __extends(e,t),e.prototype.findIdx=function(e){for(var t=0;t<this.data.length;++t)if(this.data[t].key>>1==e)return t;return-1},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.data.length;++e)1&this.data[e].key&&m(this.data[e].val),this.data[e].val=0;this.data=[]},e.prototype.print=function(){a.runtime&&a.runtime.refCountingDebug&&console.log("RefMap id:"+this.id+" refs:"+this.refcnt+" size:"+this.data.length)},e.prototype.toAny=function(){var t={};return this.data.forEach(function(e){t[e.keyName]=r.toAny(e.val)}),t},e}(r);function m(e){if(a.runtime&&a.runtime.refCounting&&e instanceof r){var t=e;s(0<t.refcnt),0==--t.refcnt&&(a.runtime.unregisterLiveObject(t),t.destroy())}}function y(e){return e}function v(e){if(!a.runtime||!a.runtime.refCounting)return e;if(e instanceof r){var t=e;s(0<t.refcnt),t.refcnt++}return e}function b(){a.runtime&&a.runtime.dumpLivePointers()}a.RefMap=h,a.decr=m,a.initString=y,a.incr=v,a.dumpLivePointers=b,(u=a.numops||(a.numops={})).toString=function(e){return null===e?"null":void 0===e?"undefined":y(e.toString())},u.toBoolDecr=function(e){return m(e),!!e},u.toBool=function(e){return!!e},(g=a.langsupp||(a.langsupp={})).toInt=function(e){return 0|e},g.toFloat=function(e){return e},g.ignore=function(e){return e},g.ptreqDecr=function(e,t){return a.Number_.eqDecr(e,t)},(p=a.pxtcore||(a.pxtcore={})).incr=a.incr,p.decr=a.decr,p.ptrOfLiteral=function(e){return e},p.debugMemLeaks=function(){b()},p.allocate=function(){a.U.userError("allocate() called in simulator")},p.templateHash=function(){return 0},p.programHash=function(){return 0},p.programSize=function(){return 0},p.afterProgramPage=function(){return 0},p.getConfig=function(e,t){var n=a.getConfig(e);return null==n?t:n},p.toInt=function(e){return e>>0},p.toUInt=function(e){return e>>>0},p.toDouble=function(e){return e},p.toFloat=function(e){return e},p.fromInt=function(e){return e},p.fromUInt=function(e){return e},p.fromDouble=function(e){return e},p.fromFloat=function(e){return e},p.fromBool=function(e){return!!e},function(i){function r(e){null==e&&a.U.userError("Dereferencing null/undefined value.")}i.incr=a.incr,i.decr=a.decr,i.toInt8=function(e){return(255&e)<<24>>24},i.toInt16=function(e){return(65535&e)<<16>>16},i.toInt32=function(e){return 0|e},i.toUInt32=function(e){return e>>>0},i.toUInt8=function(e){return 255&e},i.toUInt16=function(e){return 65535&e},i.nullFix=function(e){return null==e||!1===e?0:!0===e?1:e},i.nullCheck=r,i.panic=function(e){a.U.userError("PANIC! Code "+e)},i.stringToBool=function(e){return i.decr(e),e?1:0},i.ptrToBool=function(e){return i.decr(e),e?1:0},i.emptyToNull=function(e){return""==e?0:e},i.ldfld=function(e,t){r(e),s(!e.isRef(t));var n,o=(n=e.fields[t],a.floatingPoint||void 0!==n?n:0);return i.decr(e),o},i.stfld=function(e,t,n){r(e),s(!e.isRef(t)),e.fields[t]=n,i.decr(e)},i.ldfldRef=function(e,t){r(e),s(e.isRef(t));var n,o=i.incr(void 0===(n=e.fields[t])?null:n);return i.decr(e),o},i.stfldRef=function(e,t,n){r(e),s(e.isRef(t)),i.decr(e.fields[t]),e.fields[t]=n,i.decr(e)},i.ldloc=function(e){return e.v},i.ldlocRef=function(e){return i.incr(e.v)},i.stloc=function(e,t){e.v=t},i.stlocRef=function(e,t){i.decr(e.v),e.v=t},i.mkloc=function(){return new e},i.mklocRef=function(){return new t},i.stclo=function(e,t,n){return s(0<=t&&t<e.fields.length),s(null===e.fields[t]),e.fields[t]=n,e},i.runtimeWarning=function(e){a.Runtime.postMessage(a.getWarningMessage(e))},i.mkMap=function(){return new h},i.mapGet=function(e,t){var n=e.findIdx(t);if(n<0)return i.decr(e),0;var o=e.data[n].val;return i.decr(e),o},i.mapGetRef=function(e,t){var n=e.findIdx(t);if(n<0)return i.decr(e),0;var o=i.incr(e.data[n].val);return i.decr(e),o},i.mapSet=function(e,t,n,o){var r=e.findIdx(t);r<0?e.data.push({key:t<<1,val:n,keyName:o}):(1&e.data[r].key&&(i.decr(e.data[r].val),e.data[r].key=t<<1),e.data[r].val=n,e.data[r].keyName=o),i.decr(e)},i.mapSetRef=function(e,t,n,o){var r=e.findIdx(t);r<0?e.data.push({key:t<<1|1,val:n,keyName:o}):(1&e.data[r].key?i.decr(e.data[r].val):e.data[r].key=t<<1|1,e.data[r].val=n,e.data[r].keyName=o),i.decr(e)}}(d=a.pxtrt||(a.pxtrt={})),(_=a.pxtcore||(a.pxtcore={})).mkClassInstance=function(e){s(!!e.methods),s(!!e.refmask);for(var t=new l,n=(t.vtable=e).refmask.length,o=0;o<n;++o)t.fields.push(a.floatingPoint?void 0:0);return t},_.switch_eq=function(e,t){return e==t&&(_.decr(t),!0)},(f=a.thread||(a.thread={})).panic=d.panic,f.pause=function(e){var t=a.getResume();setTimeout(function(){t()},e)},f.runInBackground=function(e){a.runtime.runFiberAsync(e).done()},f.forever=function(t){d.nullCheck(t),v(t),function e(){a.runtime.runFiberAsync(t).then(function(){return Promise.delay(20)}).then(e).done()}()}}(pxsim||(pxsim={})),function(l){var e,t,n,o,i=function(t){function e(){var e=t.call(this)||this;return e.data=[],e}return __extends(e,t),e.prototype.toArray=function(){return this.data.slice(0)},e.prototype.toAny=function(){return this.data.map(function(e){return l.RefObject.toAny(e)})},e.prototype.toDebugString=function(){for(var e="[",t=0;t<this.data.length;++t)if(0<t&&(e+=","),15<(e+=l.RefObject.toDebugString(this.data[t])).length){e+="...";break}return e+="]"},e.prototype.destroy=function(){for(var e=this.data,t=0;t<e.length;++t)l.decr(e[t]),e[t]=0;this.data=[]},e.prototype.isValidIndex=function(e){return 0<=e&&e<this.data.length},e.prototype.push=function(e){this.data.push(e)},e.prototype.pop=function(){var e=this.data.pop();return null==e?0:e},e.prototype.getLength=function(){return this.data.length},e.prototype.setLength=function(e){this.data.length=e},e.prototype.getAt=function(e){return null!=this.data[e]?this.data[e]:0},e.prototype.setAt=function(e,t){this.data[e]=t},e.prototype.insertAt=function(e,t){this.data.splice(e,0,t)},e.prototype.removeAt=function(e){var t=this.data.splice(e,1);return null==t[0]?0:t[0]},e.prototype.indexOf=function(e,t){if(0!=e)return this.data.indexOf(e,t);for(var n=this.data.indexOf(e,t),o=-1,r=t;r<this.data.length;r++)if(null==this.data[r]){o=r;break}return n<o||-1==o?n:o},e.prototype.print=function(){},e}(l.RefObject);function r(e,t){var n=65535&e,o=65535&t;return n*o+((e>>>16&65535)*o+n*(t>>>16&65535)<<16>>>0)|0}l.RefCollection=i,function(e){function o(e,t){if(l.pxtrt.nullCheck(e),e.isValidIndex(t))return e.removeAt(t)}function r(e,t,n){return l.pxtrt.nullCheck(e),e.indexOf(t,n)}e.mk=function(){return new i},e.length=function(e){return l.pxtrt.nullCheck(e),e.getLength()},e.setLength=function(e,t){l.pxtrt.nullCheck(e),e.setLength(t)},e.push=function(e,t){l.pxtrt.nullCheck(e),l.incr(t),e.push(t)},e.pop=function(e,t){return l.pxtrt.nullCheck(e),e.pop()},e.getAt=function(e,t){l.pxtrt.nullCheck(e);var n=e.getAt(t);return l.incr(n),n},e.removeAt=o,e.insertAt=function(e,t,n){l.pxtrt.nullCheck(e),l.incr(n),e.insertAt(t,n)},e.setAt=function(e,t,n){l.pxtrt.nullCheck(e),e.isValidIndex(t)&&l.decr(e.getAt(t)),l.incr(n),e.setAt(t,n)},e.indexOf=r,e.removeElement=function(e,t){l.pxtrt.nullCheck(e);var n=r(e,t,0);return 0<=n?(o(e,n),1):0}}(l.Array_||(l.Array_={})),(e=l.Math_||(l.Math_={})).imul=function(e,t){return r(e,t)},e.idiv=function(e,t){return e/t>>0},e.round=function(e){return Math.round(e)},e.ceil=function(e){return Math.ceil(e)},e.floor=function(e){return Math.floor(e)},e.sqrt=function(e){return Math.sqrt(e)},e.pow=function(e,t){return l.floatingPoint?Math.pow(e,t):0|Math.pow(e,t)},e.clz32=function(e){return Math.clz32(e)},e.log=function(e){return Math.log(e)},e.log10=function(e){return Math.log10(e)},e.log2=function(e){return Math.log2(e)},e.exp=function(e){return Math.exp(e)},e.sin=function(e){return Math.sin(e)},e.sinh=function(e){return Math.sinh(e)},e.cos=function(e){return Math.cos(e)},e.cosh=function(e){return Math.cosh(e)},e.tan=function(e){return Math.tan(e)},e.tanh=function(e){return Math.tanh(e)},e.asin=function(e){return Math.asin(e)},e.asinh=function(e){return Math.asinh(e)},e.acos=function(e){return Math.acos(e)},e.acosh=function(e){return Math.acosh(e)},e.atan=function(e){return Math.atan(e)},e.atanh=function(e){return Math.atanh(e)},e.atan2=function(e,t){return Math.atan2(e,t)},e.trunc=function(e){return 0<e?Math.floor(e):Math.ceil(e)},e.random=function(){return Math.random()},e.randomRange=function(e,t){if(e==t)return e;if(t<e){var n=e;e=t,t=n}return Math.floor(e)==e&&Math.floor(t)==t?e+Math.floor(Math.random()*(t-e+1)):e+Math.random()*(t-e)},function(e){function n(e,t){return l.pxtrt.nullFix(e)==l.pxtrt.nullFix(t)}e.lt=function(e,t){return e<t},e.le=function(e,t){return e<=t},e.neq=function(e,t){return!n(e,t)},e.eq=n,e.eqDecr=function(e,t){return l.pxtrt.nullFix(e)==l.pxtrt.nullFix(t)&&(l.decr(t),!0)},e.gt=function(e,t){return t<e},e.ge=function(e,t){return t<=e},e.div=function(e,t){return 0|Math.floor(e/t)},e.mod=function(e,t){return e%t},e.bnot=function(e){return~e},e.toString=function(e){return l.initString(e+"")}}(l.Number_||(l.Number_={})),(t=l.thumb||(l.thumb={})).adds=function(e,t){return e+t|0},t.subs=function(e,t){return e-t|0},t.divs=function(e,t){return 0|Math.floor(e/t)},t.muls=function(e,t){return r(e,t)},t.ands=function(e,t){return e&t},t.orrs=function(e,t){return e|t},t.eors=function(e,t){return e^t},t.lsls=function(e,t){return e<<t},t.lsrs=function(e,t){return e>>>t},t.asrs=function(e,t){return e>>t},t.bnot=function(e){return~e},t.ignore=function(e){return e},function(e){function n(e){return e<<16>>16}e.adds=function(e,t){return n(e+t)},e.subs=function(e,t){return n(e-t)},e.divs=function(e,t){return n(Math.floor(e/t))},e.muls=function(e,t){return n(r(e,t))},e.ands=function(e,t){return n(e&t)},e.orrs=function(e,t){return n(e|t)},e.eors=function(e,t){return n(e^t)},e.lsls=function(e,t){return n(e<<t)},e.lsrs=function(e,t){return(65535&e)>>>t},e.asrs=function(e,t){return n(e>>t)},e.bnot=function(e){return~e},e.ignore=function(e){return e}}(l.avr||(l.avr={})),(n=l.String_||(l.String_={})).mkEmpty=function(){return""},n.fromCharCode=function(e){return l.initString(String.fromCharCode(e))},n.toNumber=function(e){return parseInt(e)},n.concat=function(e,t){return l.initString(e+t)},n.substring=function(e,t,n){return l.pxtrt.nullCheck(e),l.initString(e.slice(t,t+n))},n.equals=function(e,t){return e==t},n.compare=function(e,t){return e==t?0:e<t?-1:1},n.compareDecr=function(e,t){return e==t?(l.decr(t),0):e<t?-1:1},n.length=function(e){return e.length},n.isEmpty=function(e){return null==e||0==e.length},n.substr=function(e,t,n){return l.initString(e.substr(t,n))},n.charAt=function(e,t){return l.initString(e.charAt(t))},n.charCodeAt=function(e,t){return l.pxtrt.nullCheck(e),n=e,o=t,l.pxtrt.nullCheck(n),0<=o&&o<n.length?e.charCodeAt(t):0;var n,o},(o=l.Boolean_||(l.Boolean_={})).toString=function(e){return e?"true":"false"},o.bang=function(e){return!e};var g=function(n){function e(e){var t=n.call(this)||this;return t.data=e,t}return __extends(e,n),e.prototype.print=function(){},e}(l.RefObject);l.RefBuffer=g,function(e){var r,t;function c(e){var t=function(e){switch(e){case r.Int8LE:return-1;case r.UInt8LE:return 1;case r.Int16LE:return-2;case r.UInt16LE:return 2;case r.Int32LE:return-4;case r.UInt32LE:return 4;case r.Int8BE:return-10;case r.UInt8BE:return 10;case r.Int16BE:return-20;case r.UInt16BE:return 20;case r.Int32BE:return-40;case r.UInt32BE:return 40;case r.Float32LE:return 4;case r.Float32BE:return 40;case r.Float64LE:return 8;case r.Float64BE:return 80;default:throw l.U.userError("bad format")}}(e),n=!1;t<0&&(n=!0,t=-t);var o=!1;return 10<=t&&(o=!0,t/=10),{size:t,signed:n,swap:o,isFloat:e>=r.Float32LE}}function o(e){return new g(new Uint8Array(e))}function i(e,t){return 0<=t&&t<e.data.length}function a(e,t,n,o){void 0===n&&(n=0),void 0===o&&(o=-1),n<0||n>e.data.length||(o<0&&(o=e.data.length),o=Math.min(o,e.data.length-n),e.data.fill(t,n,n+o))}function s(e,t,n,o,r){if(n.buffer===e.buffer)s(e,t,n.slice(o,o+r),0,r);else for(var i=0;i<r;++i)e[t+i]=n[o+i]}(t=r=e.NumberFormat||(e.NumberFormat={}))[t.Int8LE=1]="Int8LE",t[t.UInt8LE=2]="UInt8LE",t[t.Int16LE=3]="Int16LE",t[t.UInt16LE=4]="UInt16LE",t[t.Int32LE=5]="Int32LE",t[t.Int8BE=6]="Int8BE",t[t.UInt8BE=7]="UInt8BE",t[t.Int16BE=8]="Int16BE",t[t.UInt16BE=9]="UInt16BE",t[t.Int32BE=10]="Int32BE",t[t.UInt32LE=11]="UInt32LE",t[t.UInt32BE=12]="UInt32BE",t[t.Float32LE=13]="Float32LE",t[t.Float64LE=14]="Float64LE",t[t.Float32BE=15]="Float32BE",t[t.Float64BE=16]="Float64BE",e.getNumber=function(e,t,n){var o=c(t);if(o.isFloat){var r=e.data.buffer.slice(n,n+o.size);return o.swap&&new Uint8Array(r).reverse(),4==o.size?new Float32Array(r)[0]:new Float64Array(r)[0]}for(var i=0,a=0;a<o.size;++a){i<<=8;var s=o.swap?n+a:n+o.size-a-1;i|=e.data[s]}if(o.signed){var l=32-8*o.size;i=i<<l>>l}else i>>>=0;return i},e.setNumber=function(e,t,n,o){var r=c(t);if(r.isFloat){var i=new Uint8Array(r.size);4==r.size?new Float32Array(i.buffer)[0]=o:new Float64Array(i.buffer)[0]=o,r.swap&&i.reverse();for(var a=0;a<r.size;++a)e.data[n+a]=i[a]}else for(a=0;a<r.size;++a){var s=r.swap?n+r.size-a-1:n+a;e.data[s]=255&o,o>>=8}},e.createBuffer=o,e.createBufferFromHex=function(e){for(var t=o(e.length>>1),n=0;n<e.length;n+=2)t.data[n>>1]=parseInt(e.slice(n,n+2),16);return t},e.getBytes=function(e){return e.data},e.getByte=function(e,t){return i(e,t)?e.data[t]:0},e.setByte=function(e,t,n){i(e,t)&&(e.data[t]=n)},e.length=function(e){return e.data.length},e.fill=a,e.slice=function(e,t,n){return t=Math.min(e.data.length,t),n<0&&(n=e.data.length),n=Math.min(n,e.data.length-t),new g(e.data.slice(t,t+n))},e.toHex=function(e){for(var t="0123456789abcdef",n="",o=0;o<e.data.length;++o)n+=t[e.data[o]>>4],n+=t[15&e.data[o]];return n};var u=-2147483648;e.shift=function(e,t,n,o){o<0&&(o=e.data.length-n),n<0||n+o>e.data.length||n+o<n||0==o||0==t||t==u||0!=o&&0!=t&&t!=u&&(t<=-o||o<=t?a(e,0):t<0?(t=-t,s(e.data,n+t,e.data,n,o-t),e.data.fill(0,n,n+t)):(o-=t,s(e.data,n,e.data,n+t,o),e.data.fill(0,n+o,n+o+t)))},e.rotate=function(e,t,n,o){if(o<0&&(o=e.data.length-n),!(n<0||n+o>e.data.length||n+o<n||0==o||0==t||t==u)){t<0&&(t+=o<<8),(t%=o)<0&&(t+=o);for(var r=e.data,i=t,a=0,s=i,l=o;a!=s;){var c=r[a+n];r[a+++n]=r[s+n],r[s+++n]=c,s==l?s=i:a==i&&(i=s)}}},e.write=function(e,t,n,o,r){void 0===o&&(o=0),void 0===r&&(r=-1),r<0&&(r=n.data.length),o<0||t<0||t>e.data.length||(r=Math.min(n.data.length-o,e.data.length-t))<0||s(e.data,t,n.data,o,r)}}(l.BufferMethods||(l.BufferMethods={}))}(pxsim||(pxsim={})),function(e){var t,n;t=e.localization||(e.localization={}),n={},t.setLocalizedStrings=function(e){n=e||{}},t.lf=function(e){return n[e]||e}}(pxsim||(pxsim={})),function(pxsim){var U;function getResume(){return pxsim.runtime.getResume()}!function(e){function t(e){for(;e.firstChild;)e.removeChild(e.firstChild)}e.addClass=function(o,e){o&&e&&0!=e.length&&e.split(" ").forEach(function(e){var t,n;n=e,(t=o).classList?t.classList.add(n):t.className.indexOf(n)<0&&(t.className+=" "+n)})},e.removeClass=function(o,e){o&&e&&0!=e.length&&e.split(" ").forEach(function(e){var t,n;n=e,(t=o).classList?t.classList.remove(n):t.className=t.className.replace(n,"").replace(/\s{2,}/," ")})},e.remove=function(e){e.parentElement.removeChild(e)},e.removeChildren=t,e.clear=function(e){t(e)},e.assert=function(e,t){if(void 0===t&&(t="Assertion failed"),!e)throw new Error(t)},e.repeatMap=function(e,t){e=e||0;for(var n=[],o=0;o<e;++o)n.push(t(o));return n},e.userError=function(e){var t=new Error(e);throw t.isUserError=!0,t},e.now=function(){return Date.now()},e.nextTick=function(e){Promise._async._schedule(e)}}(U=pxsim.U||(pxsim.U={})),pxsim.getResume=getResume;var SERIAL_BUFFER_LENGTH=16,BaseBoard=function(){function e(){this.serialOutBuffer=""}return e.prototype.updateView=function(){},e.prototype.receiveMessage=function(e){},e.prototype.initAsync=function(e){return this.runOptions=e,Promise.resolve()},e.prototype.kill=function(){},e.prototype.writeSerial=function(e){e&&(this.serialOutBuffer+=e,(/\n/.test(this.serialOutBuffer)||this.serialOutBuffer.length>SERIAL_BUFFER_LENGTH)&&(Runtime.postMessage({type:"serial",data:this.serialOutBuffer,id:pxsim.runtime.id,sim:!0}),this.serialOutBuffer=""))},e}();pxsim.BaseBoard=BaseBoard;var CoreBoard=function(t){function e(){var e=t.call(this)||this;return e.id="b"+Math.round(2147483647*Math.random()),e.bus=new pxsim.EventBus(pxsim.runtime),e.updateSubscribers=[],e.updateView=function(){e.updateSubscribers.forEach(function(e){return e()})},e.builtinParts={},e.builtinVisuals={},e.builtinPartVisuals={},e}return __extends(e,t),e.prototype.kill=function(){t.prototype.kill.call(this),pxsim.AudioContextManager.stop()},e}(BaseBoard);pxsim.CoreBoard=CoreBoard;var BareBoard=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(BaseBoard);function initBareRuntime(){pxsim.runtime.board=new BareBoard;var e=pxsim;e.basic={pause:pxsim.thread.pause,showNumber:function(e){var t=getResume();console.log("SHOW NUMBER:",e),U.nextTick(t)}},e.serial={writeString:function(e){return pxsim.runtime.board.writeSerial(e)}},e.pins={createBuffer:pxsim.BufferMethods.createBuffer},e.control={inBackground:pxsim.thread.runInBackground}}pxsim.initBareRuntime=initBareRuntime;var EventQueue=function(){function e(e,t){this.runtime=e,this.valueToArgs=t,this.max=5,this.events=[],this.awaiters=[]}return e.prototype.push=function(e,t){if(0<this.awaiters.length)if(t){var n=this.awaiters.shift();n&&n()}else{var o=this.awaiters.slice();this.awaiters=[],o.forEach(function(e){return e()})}!this.handler||this.events.length>this.max||(this.events.push(e),1!=this.events.length||this.lock||this.poke())},e.prototype.poke=function(){var e=this;this.lock=!0;var t,n=this.events.shift();(t=this.runtime).runFiberAsync.apply(t,[this.handler].concat(this.valueToArgs?this.valueToArgs(n):[n])).done(function(){0<e.events.length?e.poke():e.lock=!1})},Object.defineProperty(e.prototype,"handler",{get:function(){return this._handler},set:function(e){this._handler&&pxsim.pxtcore.decr(this._handler),this._handler=e,this._handler&&pxsim.pxtcore.incr(this._handler)},enumerable:!0,configurable:!0}),e.prototype.addAwaiter=function(e){this.awaiters.push(e)},e}();function _leave(e,t){return e.parent.retval=t,e.finalCallback&&e.finalCallback(t),e.parent}function syntheticRefAction(t){return pxsim.pxtcore.mkAction(0,0,function(e){return _leave(e,t(e))})}pxsim.EventQueue=EventQueue,pxsim.initCurrentRuntime=void 0,pxsim.handleCustomMessage=void 0,pxsim.syntheticRefAction=syntheticRefAction;var Runtime=function(){function Runtime(msg){var _this=this;this.numGlobals=1e3,this.dead=!1,this.running=!1,this.startTime=0,this.globals={},this.loopLock=null,this.loopLockWaitList=[],this.refCountingDebug=!1,this.refCounting=!0,this.refObjId=1,this.liveRefObjs={},this.stringRefCounts={},this.numDisplayUpdates=0,U.assert(!!pxsim.initCurrentRuntime),this.id=msg.id,this.refCountingDebug=!!msg.refCountingDebug;var yieldMaxSteps=100,entryPoint,pxtrt=pxsim.pxtrt,breakpoints=null,breakAlways=!1,globals=this.globals,yieldSteps=yieldMaxSteps,currResume,dbgHeap,dbgResume,breakFrame=null,lastYield=Date.now(),__this=this,tracePauseMs=0;function oops(e){throw new Error("sim error: "+e)}function doNothing(e){return e.pc=-1,leave(e,e.parent.retval)}function flushLoopLock(){for(;0<__this.loopLockWaitList.length&&!__this.loopLock;){__this.loopLockWaitList.shift()()}}function maybeYield(e,t,n){yieldSteps=yieldMaxSteps;var o=Date.now();if(20<=o-lastYield){lastYield=o,e.pc=t,e.r0=n;var r=new Object;__this.loopLock=r;return setTimeout(function(){__this.dead||(U.assert(e.pc==t),U.assert(__this.loopLock===r),__this.loopLock=null,loop(e),flushLoopLock())},5),!0}return!1}function setupDebugger(e){breakpoints=new Uint8Array(e)}function isBreakFrame(e){if(!breakFrame)return!0;for(var t=breakFrame;t;t=t.parent)if(t==e)return!0;return!1}function breakpoint(t,n,e,o){U.assert(!dbgResume),U.assert(!dbgHeap),t.pc=n,t.r0=o;var r=pxsim.getBreakpointMsg(t,e),i=r.msg,a=r.heap;return dbgHeap=a,Runtime.postMessage(i),dbgResume=function(e){if(dbgHeap=dbgResume=null,!__this.dead){switch(pxsim.runtime=__this,U.assert(t.pc==n),breakAlways=!1,breakFrame=null,e.subtype){case"resume":break;case"stepover":breakAlways=!0,breakFrame=t;break;case"stepinto":breakAlways=!0;break;case"stepout":breakAlways=!0,breakFrame=t.parent||t}return loop(t)}},null}function trace(e,t,n,o){setupResume(t,n),"<main>"===o.functionName||"main.ts"===o.fileName?(Runtime.postMessage({type:"debugger",subtype:"trace",breakpointId:e}),pxsim.thread.pause(tracePauseMs)):pxsim.thread.pause(0),checkResumeConsumed()}function handleDebuggerMsg(e){switch(e.subtype){case"config":var t=e;if(t.setBreakpoints){breakpoints.fill(0);for(var n=0,o=t.setBreakpoints;n<o.length;n++){var r=o[n];breakpoints[r]=1}}break;case"traceConfig":tracePauseMs=e.interval;break;case"pause":breakAlways=!0,breakFrame=null;break;case"resume":case"stepover":case"stepinto":case"stepout":dbgResume&&dbgResume(e);break;case"variables":var i=void 0;if(dbgHeap){var a=dbgHeap[e.variablesReference];void 0!==a&&(i=pxsim.dumpHeap(a,dbgHeap))}Runtime.postMessage({type:"debugger",subtype:"variables",req_seq:e.seq,variables:i})}}function loop(t){if(__this.dead)console.log("Runtime terminated");else{U.assert(!__this.loopLock);try{for(pxsim.runtime=__this;t;)__this.currFrame=t,__this.currFrame.overwrittenPC=!1,t=t.fn(t),__this.maybeUpdateDisplay(),__this.currFrame.overwrittenPC&&(t=__this.currFrame)}catch(e){if(__this.errorHandler)__this.errorHandler(e);else{console.error("Simulator crashed, no error handler",e.stack);var n=pxsim.getBreakpointMsg(t,t.lastBrkId).msg;n.exceptionMessage=e.message,n.exceptionStack=e.stack,Runtime.postMessage(n),__this.postError&&__this.postError(e)}}}}function actionCall(e,t){return t&&(e.finalCallback=t),e.depth=e.parent.depth+1,1e3<e.depth&&U.userError("Stack overflow"),e.pc=0,e}var leave=_leave;function setupTop(e){var t=setupTopCore(e);return setupResume(t,0),t}function setupTopCore(e){var t={parent:null,pc:0,depth:0,fn:function(){return e&&e(t.retval),null}};return t}function topCall(e,t){U.assert(!!__this.board),U.assert(!__this.running),__this.setRunning(!0),loop(actionCall({parent:setupTopCore(t),fn:e,depth:0,pc:0}))}function checkResumeConsumed(){currResume&&oops("getResume() not called")}function setupResume(e,t){currResume=buildResume(e,t)}function buildResume(i,a){currResume&&oops("already has resume"),i.pc=a;var s=Date.now(),l=function(e){if(!__this.dead){if(!__this.loopLock){pxsim.runtime=__this;var t=Date.now();if(3<t-s&&(lastYield=t),U.assert(i.pc==a),e instanceof pxsim.FnWrapper){var n=e,o={parent:i,fn:n.func,lambdaArgs:[n.a0,n.a1,n.a2],pc:0,caps:n.caps,depth:i.depth+1,finalCallback:n.cb},r={};return __this.loopLock=r,U.nextTick(function(){U.assert(__this.loopLock===r),__this.loopLock=null,loop(actionCall(o)),flushLoopLock()})}return i.retval=e,loop(i)}__this.loopLockWaitList.push(function(){return l(e)})}};return l}eval(msg.code),this.refCounting=pxsim.refCounting,this.run=function(e){return topCall(entryPoint,e)},this.getResume=function(){currResume||oops("noresume");var e=currResume;return currResume=null,e},this.setupTop=setupTop,this.handleDebuggerMsg=handleDebuggerMsg,this.entry=entryPoint,this.overwriteResume=function(e){currResume=null,0<=e&&(_this.currFrame.pc=e),_this.currFrame.overwrittenPC=!0},pxsim.runtime=this,pxsim.initCurrentRuntime(msg)}return Runtime.prototype.registerLiveObject=function(e){var t=this.refObjId++;return this.refCounting&&(this.liveRefObjs[t+""]=e),t},Runtime.prototype.unregisterLiveObject=function(e,t){t||U.assert(0==e.refcnt,"ref count is not 0"),delete this.liveRefObjs[e.id+""]},Runtime.prototype.runningTime=function(){return U.now()-this.startTime},Runtime.prototype.runFiberAsync=function(n,o,r,i){var a=this;return pxsim.incr(n),new Promise(function(e,t){return U.nextTick(function(){(pxsim.runtime=a).setupTop(e),pxsim.pxtcore.runAction3(n,o,r,i),pxsim.decr(n)})})},Runtime.postMessage=function(e){e&&("undefined"!=typeof window&&window.parent&&window.parent.postMessage&&window.parent.postMessage(e,"*"),Runtime.messagePosted&&Runtime.messagePosted(e))},Runtime.prototype.kill=function(){this.dead=!0,this.setRunning(!1)},Runtime.prototype.updateDisplay=function(){this.board.updateView()},Runtime.prototype.queueDisplayUpdate=function(){this.numDisplayUpdates++},Runtime.prototype.maybeUpdateDisplay=function(){this.numDisplayUpdates&&(this.numDisplayUpdates=0,this.updateDisplay())},Runtime.prototype.setRunning=function(e){this.running!=e&&(this.running=e,this.running?(this.startTime=U.now(),Runtime.postMessage({type:"status",runtimeid:this.id,state:"running"})):Runtime.postMessage({type:"status",runtimeid:this.id,state:"killed"}),this.stateChanged&&this.stateChanged())},Runtime.prototype.dumpLivePointers=function(){var n=this;if(this.refCounting&&this.refCountingDebug){var e=Object.keys(this.liveRefObjs),t=Object.keys(this.stringRefCounts);console.log("Live objects: "+e.length+" objects, "+t.length+" strings"),e.forEach(function(e){return n.liveRefObjs[e].print()}),t.forEach(function(e){var t=n.stringRefCounts[e];console.log("Live String:",JSON.stringify(e),"refcnt=",t)})}},Runtime}();pxsim.Runtime=Runtime}(pxsim||(pxsim={})),function(r){var i,e,n,t;(e=i=r.SimulatorState||(r.SimulatorState={}))[e.Unloaded=0]="Unloaded",e[e.Stopped=1]="Stopped",e[e.Running=2]="Running",e[e.Paused=3]="Paused",(t=n=r.SimulatorDebuggerCommand||(r.SimulatorDebuggerCommand={}))[t.StepInto=0]="StepInto",t[t.StepOver=1]="StepOver",t[t.StepOut=2]="StepOut",t[t.Resume=3]="Resume",t[t.Pause=4]="Pause";var o=function(){function e(e,t){void 0===t&&(t={}),this.container=e,this.options=t,this.themes=["blue","red","green","yellow"],this.runId="",this.nextFrameId=0,this.frameCounter=0,this.traceInterval=0,this.runOptions={},this.state=i.Unloaded,this.frameCleanupTimeout=0,this.debuggerSeq=1,this.debuggerResolvers={}}return e.prototype.setHwDebugger=function(e){e?(this.hwdbg=e,this.setState(i.Running),this.container.style.opacity="0.3"):(delete this.container.style.opacity,this.hwdbg=null,this.setState(i.Running),this.stop())},e.prototype.handleHwDebuggerMsg=function(e){this.hwdbg&&this.handleMessage(e)},e.prototype.setThemes=function(e){r.U.assert(e&&0<e.length),this.themes=e},e.prototype.setState=function(e){this.state!=e&&(this.state=e,this.freeze(this.state==i.Paused),this.options.onStateChanged&&this.options.onStateChanged(this.state))},e.prototype.freeze=function(e){var n="pause-overlay";e?r.util.toArray(this.container.querySelectorAll("div.simframe")).forEach(function(e){if(!e.querySelector("div."+n)){var t=document.createElement("div");t.className=n,t.onclick=function(e){return e.preventDefault(),!1},e.appendChild(t)}}):r.util.toArray(this.container.querySelectorAll("div.simframe div."+n)).forEach(function(e){return e.parentElement.removeChild(e)})},e.prototype.postMessage=function(e,t){if(this.hwdbg)this.hwdbg.postMessage(e);else{var n=this.container.getElementsByTagName("iframe");!t||"eventbus"!==e.type&&"radiopacket"!=e.type&&"irpacket"!=e.type||(n.length<2?(this.container.appendChild(this.createFrame()),n=this.container.getElementsByTagName("iframe")):n[1].dataset.runid!=this.runId&&this.startFrame(n[1]));for(var o=0;o<n.length;++o){var r=n[o];t&&r.contentWindow==t||r.contentWindow.postMessage(e,"*")}}},e.prototype.createFrame=function(e){var t=document.createElement("div");t.className="simframe";var n=document.createElement("iframe");n.id="sim-frame-"+this.nextId(),n.allowFullscreen=!0,n.setAttribute("allow","autoplay"),n.setAttribute("sandbox","allow-same-origin allow-scripts"),n.sandbox.value="allow-scripts allow-same-origin";var o=this.options.simUrl||(window.pxtConfig||{}).simUrl||"/sim/simulator.html";return n.className="no-select",this.runOptions.aspectRatio&&(t.style.paddingBottom=100/this.runOptions.aspectRatio+"%"),n.src=o+"#"+n.id,n.frameBorder="0",n.dataset.runid=this.runId,t.appendChild(n),t},e.prototype.stop=function(e){if(void 0===e&&(e=!1),this.clearDebugger(),this.postMessage({type:"stop"}),this.setState(i.Stopped),e)this.unload();else{for(var t=this.container.getElementsByTagName("iframe"),n=0;n<t.length;++n){var o=t[n];r.U.addClass(o,this.getStoppedClass())}this.scheduleFrameCleanup()}},e.prototype.unload=function(){this.cancelFrameCleanup(),r.U.removeChildren(this.container),this.setState(i.Unloaded)},e.prototype.mute=function(e){this.postMessage({type:"mute",mute:e})},e.prototype.cancelFrameCleanup=function(){this.frameCleanupTimeout&&(clearTimeout(this.frameCleanupTimeout),this.frameCleanupTimeout=0)},e.prototype.scheduleFrameCleanup=function(){var e=this;this.cancelFrameCleanup(),this.frameCleanupTimeout=setTimeout(function(){e.frameCleanupTimeout=0,e.cleanupFrames()},5e3)},e.prototype.applyAspectRatio=function(){for(var e=this.container.getElementsByTagName("iframe"),t=0;t<e.length;++t)e[t].parentElement.style.paddingBottom=100/this.runOptions.aspectRatio+"%"},e.prototype.cleanupFrames=function(){for(var e=this.container.getElementsByTagName("iframe"),t=1;t<e.length;++t){var n=e[t];this.state!=i.Stopped&&n.dataset.runid==this.runId||(this.options.removeElement?this.options.removeElement(n.parentElement):n.parentElement.remove())}},e.prototype.hide=function(e){if(this.options.removeElement){for(var t=this.container.getElementsByTagName("iframe"),n=0;n<t.length;++n){var o=t[n];this.options.removeElement(o.parentElement,e)}0==t.length&&e&&e()}},e.prototype.unhide=function(){if(this.options.unhideElement)for(var e=this.container.getElementsByTagName("iframe"),t=0;t<e.length;++t){var n=e[t];this.options.unhideElement(n.parentElement)}},e.prototype.run=function(e,t){void 0===t&&(t={}),this.clearDebugger(),this.runOptions=t,this.runId=this.nextId(),this.addEventListeners(),this.currentRuntime={type:"run",boardDefinition:t.boardDefinition,parts:t.parts,fnArgs:t.fnArgs,code:e,partDefinitions:t.partDefinitions,mute:t.mute,highContrast:t.highContrast,light:t.light,cdnUrl:t.cdnUrl,localizedStrings:t.localizedStrings,refCountingDebug:t.refCountingDebug,version:t.version},this.applyAspectRatio(),this.scheduleFrameCleanup();var n=this.container.getElementsByTagName("iframe").item(0);if(n)this.startFrame(n);else{var o=this.createFrame(t.light);this.container.appendChild(o),n=o.firstElementChild}this.setState(i.Running),this.setTraceInterval(this.traceInterval)},e.prototype.startFrame=function(e){var t=JSON.parse(JSON.stringify(this.currentRuntime)),n="",o=/player=([A-Za-z0-9]+)/i.exec(window.location.href);o&&(n=o[1]),t.frameCounter=++this.frameCounter,t.options={theme:this.themes[this.nextFrameId++%this.themes.length],player:n},t.id=t.options.theme+"-"+this.nextId(),e.dataset.runid=this.runId,e.contentWindow.postMessage(t,"*"),r.U.removeClass(e,this.getStoppedClass())},e.prototype.removeEventListeners=function(){this.listener&&(window.removeEventListener("message",this.listener,!1),this.listener=void 0)},e.prototype.handleMessage=function(e,t){switch(e.type||""){case"ready":var n=e.frameid,o=document.getElementById(n);o&&(this.startFrame(o),this.options.revealElement&&this.options.revealElement(o));break;case"simulator":this.handleSimulatorCommand(e);break;case"serial":break;case"pxteditor":case"custom":break;case"debugger":this.handleDebuggerMessage(e);break;case"toplevelcodefinished":this.options.onTopLevelCodeEnd&&this.options.onTopLevelCodeEnd();break;default:"radiopacket"==e.type&&(e.rssi=10),this.postMessage(e,t)}},e.prototype.addEventListeners=function(){var t=this;this.listener||(this.listener=function(e){t.hwdbg||t.handleMessage(e.data,e.source)},window.addEventListener("message",this.listener,!1))},e.prototype.resume=function(e){var t;switch(e){case n.Resume:t="resume",this.setState(i.Running);break;case n.StepInto:t="stepinto",this.setState(i.Running);break;case n.StepOut:t="stepout",this.setState(i.Running);break;case n.StepOver:t="stepover",this.setState(i.Running);break;case n.Pause:t="pause";break;default:return void console.debug("unknown command")}this.postMessage({type:"debugger",subtype:t})},e.prototype.setBreakpoints=function(e){this.postDebuggerMessage("config",{setBreakpoints:e})},e.prototype.setTraceInterval=function(e){this.traceInterval=e,this.postDebuggerMessage("traceConfig",{interval:e})},e.prototype.variablesAsync=function(e){return this.postDebuggerMessageAsync("variables",{variablesReference:e}).then(function(e){return e},function(e){})},e.prototype.handleSimulatorCommand=function(e){this.options.onSimulatorCommand&&this.options.onSimulatorCommand(e)},e.prototype.clearDebugger=function(){var t=this,n=new Error("Debugging cancelled");Object.keys(this.debuggerResolvers).forEach(function(e){(0,t.debuggerResolvers[e].reject)(n)}),this.debuggerResolvers={},this.debuggerSeq++},e.prototype.handleDebuggerMessage=function(e){("trace"!==e.subtype&&console.log("DBG-MSG",e.subtype,e),e.seq)&&((n=this.debuggerResolvers[e.seq].resolve)&&n(e));switch(e.subtype){case"warning":this.options.onDebuggerWarning&&this.options.onDebuggerWarning(e);break;case"breakpoint":var t=e;this.state==i.Running?(t.exceptionMessage?this.stop():this.setState(i.Paused),this.options.onDebuggerBreakpoint&&this.options.onDebuggerBreakpoint(t)):console.error("debugger: trying to pause from "+this.state);break;case"trace":this.options.onTraceMessage&&this.options.onTraceMessage(e);break;default:var n,o=e.req_seq;if(o)(n=this.debuggerResolvers[o].resolve)&&(delete this.debuggerResolvers[o],n(e))}},e.prototype.postDebuggerMessageAsync=function(o,r){var i=this;return void 0===r&&(r={}),new Promise(function(e,t){var n=i.debuggerSeq++;i.debuggerResolvers[n.toString()]={resolve:e,reject:t},i.postDebuggerMessage(o,r,n)})},e.prototype.postDebuggerMessage=function(e,t,n){void 0===t&&(t={});var o=JSON.parse(JSON.stringify(t));o.type="debugger",o.subtype=e,n&&(o.seq=n),this.postMessage(o)},e.prototype.nextId=function(){return this.nextFrameId+++(Math.random()+""+Math.random()).replace(/[^\d]/,"")},e.prototype.getStoppedClass=function(){return this.options&&this.options.stoppedClass?this.options.stoppedClass:"grayscale"},e}();r.SimulatorDriver=o}(pxsim||(pxsim={})),function(i){i.mkRange=function(e,t){for(var n=[];e<t;e++)n.push(e);return n};var e=function(){function e(e,t){this.runtime=e,this.valueToArgs=t,this.queues={},this.nextNotifyEvent=1024}return e.prototype.setNotify=function(e,t){this.notifyID=e,this.notifyOneID=t},e.prototype.start=function(e,t,n){var o=e+":"+t,r=this.queues[o];return r||(r=this.queues[o]=new i.EventQueue(this.runtime,this.valueToArgs)),r},e.prototype.listen=function(e,t,n){this.start(e,t,!0).handler=n},e.prototype.queue=function(e,t,n){void 0===n&&(n=null);var o=this.notifyID&&this.notifyOneID&&e==this.notifyOneID;o&&(e=this.notifyID);var r=this.start(e,t,!1);r&&r.push(n,o)},e.prototype.wait=function(e,t,n){this.start(e,t,!0).addAwaiter(n)},e}(),t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(i.EventBusGeneric=e);i.EventBus=t;var n=function(){function e(n){var o=this;this.runtime=n,this.queue=[],this.process=function(){var e=o.queue[0];if(e&&!o.runtime.dead){n=o.runtime;var t=e.frame();n.queueDisplayUpdate(),n.maybeUpdateDisplay(),!1===t?(o.queue.shift(),o.queue[0]&&(o.queue[0].setTimeoutHandle=setTimeout(o.process,o.queue[0].interval)),e.whenDone(!1)):e.setTimeoutHandle=setTimeout(o.process,e.interval)}}}return e.prototype.cancelAll=function(){var e=this.queue;this.queue=[];for(var t=0,n=e;t<n.length;t++){var o=n[t];o.whenDone(!0),o.setTimeoutHandle&&clearTimeout(o.setTimeoutHandle)}},e.prototype.cancelCurrent=function(){var e=this.queue[0];e&&(this.queue.shift(),e.whenDone(!0),e.setTimeoutHandle&&clearTimeout(e.setTimeoutHandle))},e.prototype.enqueue=function(e){e.whenDone||(e.whenDone=function(){}),this.queue.push(e),1==this.queue.length&&this.process()},e.prototype.executeAsync=function(n){var o=this;return i.U.assert(!n.whenDone),new Promise(function(e,t){n.whenDone=e,o.enqueue(n)})},e}();function o(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator&&0<navigator.maxTouchPoints)}function r(){return"undefined"!=typeof window&&!!window.PointerEvent}i.AnimationQueue=n,function(e){var t,o,r,i,a=0,s=!1;function l(){return t||(t=function(){if(window.AudioContext=window.AudioContext||window.webkitAudioContext,window.AudioContext)try{return new window.AudioContext}catch(e){}return}()),t}function n(){r&&(r.gain.value=0),a=0,i&&i.pause()}e.mute=function(e){s=e,n()},e.stop=n,e.frequency=function(){return a},e.tone=function(e,t){if(!(s||e<=0)){a=e;var n=l();if(n){o&&(o.stop(),o.disconnect(),o=void 0),t=Math.max(0,Math.min(1,t));try{o=n.createOscillator(),r=n.createGain(),o.type="triangle",o.connect(r),r.connect(n.destination),r.gain.value=t,o.start(0)}catch(e){return void(r=o=void 0)}o.frequency.value=e,r.gain.value=t}}},e.playBufferAsync=function(o){return o?new Promise(function(e){function t(){e&&e(),e=void 0}var n="data:audio/wav;base64,"+window.btoa(function(e){for(var t=e.length,n="",o=0;o<t;++o)n+=String.fromCharCode(e[o]);return n}(o.data));i=new Audio(n),s&&(i.volume=0),i.onended=function(){return t()},i.onpause=function(){return t()},i.onerror=function(){return t()},i.play()}):Promise.resolve()}}(i.AudioContextManager||(i.AudioContextManager={})),i.isTouchEnabled=o,i.hasPointerEvents=r,i.pointerEvents=r()?{up:"pointerup",down:["pointerdown"],move:"pointermove",enter:"pointerenter",leave:"pointerleave"}:o()?{up:"mouseup",down:["mousedown","touchstart"],move:"touchmove",enter:"touchenter",leave:"touchend"}:{up:"mouseup",down:["mousedown"],move:"mousemove",enter:"mouseenter",leave:"mouseleave"}}(pxsim||(pxsim={})),function(N){!function(t){function i(t,n){return function(e){return e*(n/t)}}function n(e,t){var n=e[0]-t[0],o=e[1]-t[1];return n*n+o*o}t.translateEl=function(e,t){N.svg.hydrate(e,{transform:"translate("+t[0]+" "+t[1]+")"})},t.composeSVG=function(e){var t=[e.el1,e.el2],n=t[0],o=t[1];N.U.assert(0==n.x&&0==n.y&&0==o.x&&0==o.y,"el1 and el2 x,y offsets not supported");var r=function(e,t,n){return N.svg.hydrate(e,{x:t,y:n})},i=function(e,t,n){return N.svg.hydrate(e,{width:t+"px",height:n+"px"})},a=e.scaleUnit2,s=e.scaleUnit2/e.scaleUnit1,l=n.w*s,c=n.h*s;i(n.el,l,c);var u=1*o.w,g=1*o.h;i(o.el,u,g);var p=e.margin,d=p[0],_=p[1],f=p[2],h=p[3],m=e.middleMargin,y=Math.max(l,u),v=_+(y-l)/2,b=d;r(n.el,v,b);var k=_+(y-u)/2,T=b+c+m;r(o.el,k,T);var E,S,C,x=[b,b+c,T,T+g],A=_+y+h,D=d+c+m+g+f,B=N.svg.elt("svg",{version:"1.0",viewBox:"0 0 "+A+" "+D,class:"sim-bb"});E=B,S=e.maxWidth,C=e.maxHeight,S&&N.svg.hydrate(E,{width:S}),C&&N.svg.hydrate(E,{height:C}),r(B,0,0);var I=N.svg.child(B,"g");return B.appendChild(n.el),B.appendChild(o.el),{under:I,over:N.svg.child(B,"g"),host:B,edges:x,scaleUnit:a,toHostCoord1:function(e){var t=e[0],n=e[1];return[t*s+v,n*s+b]},toHostCoord2:function(e){var t=e[0],n=e[1];return[1*t+k,1*n+T]}}},t.mkScaleFn=i,t.mkImageSVG=function(e){var t=i(e.imageUnitDist,e.targetUnitDist),n=t(e.width),o=t(e.height),r=N.svg.elt("image",{width:n,height:o});return r.setAttributeNS("http://www.w3.org/1999/xlink","href",""+e.image),{el:r,w:n,h:o,x:0,y:0}},t.findDistSqrd=n,t.findClosestCoordIdx=function(t,e){return e.map(function(e){return n(t,e)}).reduce(function(e,t,n,o){return t<o[e]?n:e},0)},t.mkTxt=function(e,t,n,o,r,i,a){var s=N.svg.elt("text");a=a||.3;var l=(i=i||-.33333)*n*r.length,c=a*n;return N.svg.hydrate(s,{style:"font-size:"+n+"px;",transform:"translate("+e+" "+t+") rotate("+o+") translate("+l+" "+c+")"}),N.svg.addClass(s,"noselect"),s.textContent=r,s},t.GPIO_WIRE_COLORS=["pink","orange","yellow","green","purple"],t.WIRE_COLOR_MAP={black:"#514f4d",white:"#fcfdfc",gray:"#acabab",purple:"#a772a1",blue:"#01a6e8",green:"#3cce73",yellow:"#ece600",orange:"#fdb262",red:"#f44f43",brown:"#c89764",pink:"#ff80fa"},t.mapWireColor=function(e){return t.WIRE_COLOR_MAP[e]||e},t.PIN_DIST=15,t.rgbToHsl=function(e){var t,n,o,r=[e[0]/255,e[1]/255,e[2]/255],i=r[0],a=r[1],s=r[2],l=Math.min(i,a,s),c=Math.max(i,a,s),u=c-l,g=c+l;return o=g/2*100,0===u?n=t=0:(c===i?t=(a-s)/u%6*60:c===a?t=60*((s-i)/u+2):c===s&&(t=60*((i-a)/u+4)),n=50<o?u/(2-g)*100:u/g*100),[Math.floor(t),Math.floor(n),Math.floor(o)]}}(N.visuals||(N.visuals={}))}(pxsim||(pxsim={})),function(s){var a;!function(e){function i(e,t,n){var o={class:e,d:t};n&&(o.title=n);var r=a.elt("path");return a.hydrate(r,o),r}function r(e,t){void 0===t&&(t=!1);var n=a.elt("linearGradient");a.hydrate(n,{id:e,x1:"0%",y1:"0%",x2:t?"100%":"0%",y2:t?"0%":"100%"});a.child(n,"stop",{offset:"0%"}),a.child(n,"stop",{offset:"100%"}),a.child(n,"stop",{offset:"100%"}),a.child(n,"stop",{offset:"100%"});return n}function o(e){var t=a.elt("title");return t.textContent=e,t}e.parseString=function(e){return(new DOMParser).parseFromString(e,"image/svg+xml").getElementsByTagName("svg").item(0)},e.toDataUri=function(e){return"data:image/svg+xml,"+encodeURI(e)},e.cursorPoint=function(e,t,n){return e.x=n.clientX,e.y=n.clientY,e.matrixTransform(t.getScreenCTM().inverse())},e.rotateElement=function(e,t,n,o){e.setAttribute("transform","translate("+t+","+n+") rotate("+(o+90)+") translate("+-t+","+-n+")")},e.hasClass=function(e,t){return e.classList?e.classList.contains(t):-1<e.className.baseVal.indexOf(t)},e.addClass=function(e,t){e.classList?e.classList.add(t):e.className.baseVal.indexOf(t)<0&&(e.className.baseVal+=" "+t)},e.removeClass=function(e,t){e.classList?e.classList.remove(t):e.className.baseVal=e.className.baseVal.replace(t,"").replace(/\s{2,}/," ")},e.hydrate=function(e,t){for(var n in t)"title"==n?a.title(e,t[n]):e.setAttributeNS(null,n,t[n])},e.elt=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);return t&&a.hydrate(n,t),n},e.child=function(e,t,n){var o=a.elt(t,n);return e.appendChild(o),o},e.mkPath=i,e.path=function(e,t,n,o){var r=i(t,n,o);return e.appendChild(r),r},e.fill=function(e,t){e.style.fill=t},e.filter=function(e,t){e.style.filter=t},e.fills=function(e,t){e.forEach(function(e){return e.style.fill=t})},e.isTouchEnabled=function(){return"undefined"!=typeof window&&("ontouchstart"in window||0<navigator.maxTouchPoints)},e.onClick=function(t,n){var o=!1;s.pointerEvents.down.forEach(function(e){return t.addEventListener(e,function(e){return o=!0},!1)}),t.addEventListener(s.pointerEvents.up,function(e){return!o||(o=!1,n(e),e.preventDefault(),!1)},!1)},e.buttonEvents=function(t,n,o,r,i){var a=!1;s.pointerEvents.down.forEach(function(e){return t.addEventListener(e,function(e){return a=!0,o&&o(e),!0},!1)}),t.addEventListener(s.pointerEvents.move,function(e){return!a||(n&&n(e),e.preventDefault(),!1)},!1),t.addEventListener(s.pointerEvents.up,function(e){a=!1,r&&r(e)},!1),t.addEventListener(s.pointerEvents.leave,function(e){a=!1,r&&r(e)},!1),t.addEventListener("keydown",function(e){a=!1,i&&i(e)})},e.mkLinearGradient=r,e.linearGradient=function(e,t,n){void 0===n&&(n=!1);var o=r(t,n);return e.appendChild(o),o},e.setGradientColors=function(e,t,n){e&&(e.childNodes[0].style.stopColor=t,e.childNodes[1].style.stopColor=t,e.childNodes[2].style.stopColor=n,e.childNodes[3].style.stopColor=n)},e.setGradientValue=function(e,t){e.childNodes[1].getAttribute("offset")!=t&&(e.childNodes[1].setAttribute("offset",t),e.childNodes[2].setAttribute("offset",t))},e.animate=function(e,t){a.addClass(e,t);var n=e.parentElement;n&&(n.removeChild(e),n.appendChild(e))},e.mkTitle=o,e.title=function(e,t){var n=o(t);return e.appendChild(n),n},e.toHtmlColor=function(e){return"rgba("+(e>>16&255)+", "+(e>>8&255)+", "+(255&e)+", "+(e>>24&1)+")"}}(a=s.svg||(s.svg={}))}(pxsim||(pxsim={})),function(e){var t=function(e){this.id=e};e.Button=t;var n=function(e){this.props=e,this.usesButtonAB=!1,this.aBtn=new t(this.props.ID_BUTTON_A),this.bBtn=new t(this.props.ID_BUTTON_B),this.abBtn=new t(this.props.ID_BUTTON_AB),this.abBtn.virtual=!0};e.ButtonPairState=n}(pxsim||(pxsim={})),function(e){var t=function(){this.usesHeading=!1,this.heading=90};(pxsim||(pxsim={})).CompassState=t}(),function(e){var t=function(){function e(){this.files={}}return e.prototype.append=function(e,t){this.files[e]=(this.files[e]||"")+t},e.prototype.remove=function(e){delete this.files[e]},e}();e.FileSystemState=t}(pxsim||(pxsim={})),function(e){var t=function(){this.usesLightLevel=!1,this.lightLevel=128};(pxsim||(pxsim={})).LightSensorState=t}(),function(e){var g,t;(t=g=e.NeoPixelMode||(e.NeoPixelMode={}))[t.RGB=0]="RGB",t[t.RGBW=1]="RGBW";var n=function(){function e(){this.buffers={},this.colors={},this.dirty={}}return e.prototype.updateBuffer=function(e,t){this.buffers[t]=e,this.dirty[t]=!0},e.prototype.getColors=function(e,t){var n=this.colors[e]||(this.colors[e]=[]);if(this.dirty[e]){var o=this.buffers[e]||(this.buffers[e]=new Uint8Array([]));this.readNeoPixelBuffer(o,n,t),this.dirty[e]=!1}return n},e.prototype.readNeoPixelBuffer=function(e,t,n){for(var o=e,r=n===g.RGBW?4:3,i=Math.floor(o.length/r),a=0;a<i;a++){var s=o[a*r+1],l=o[a*r+0],c=o[a*r+2],u=0;4===r&&(u=o[a*r+3]),t[a]=[s,l,c,u]}},e}();e.NeoPixelState=n}(pxsim||(pxsim={})),function(d){!function(p){p.mkBoardView=function(e){var t=e.visual;return new p.GenericBoardSvg({visualDef:t,wireframe:e.wireframe})};var e=function(){function e(e,t){var n=this;this.parts=[],this.boardView=e,(this.opts=t).boardDef.pinStyles||(t.boardDef.pinStyles={}),this.state=t.state;var o=t.partsList;if(0<o.length||t.forceBreadboardLayout){this.breadboard=new p.Breadboard({wireframe:t.wireframe});var r=t.boardDef.marginWhenBreadboarding||[0,0,40,0],i=p.composeSVG({el1:this.boardView.getView(),scaleUnit1:this.boardView.getPinDist(),el2:this.breadboard.getSVGAndSize(),scaleUnit2:this.breadboard.getPinDist(),margin:[r[0],r[1],20,r[3]],middleMargin:r[2],maxWidth:t.maxWidth,maxHeight:t.maxHeight}),a=i.under,s=i.over;this.view=i.host;var l=i.edges;this.fromMBCoord=i.toHostCoord1,this.fromBBCoord=i.toHostCoord2;i.scaleUnit;this.partGroup=s,this.partOverGroup=d.svg.child(this.view,"g"),this.style=d.svg.child(this.view,"style",{}),this.defs=d.svg.child(this.view,"defs",{}),this.wireFactory=new p.WireFactory(a,s,l,this.style,this.getLocCoord.bind(this),this.getPinStyle.bind(this));var c=d.allocateDefinitions({boardDef:t.boardDef,partDefs:t.partDefs,fnArgs:t.fnArgs,getBBCoord:this.breadboard.getCoord.bind(this.breadboard),partsList:o});this.addAll(c),c.requiresBreadboard||t.forceBreadboardRender||this.breadboard.hide()}else{var u=this.boardView.getView().el;this.view=u,this.partGroup=d.svg.child(this.view,"g"),this.partOverGroup=d.svg.child(this.view,"g"),t.maxWidth&&d.svg.hydrate(this.view,{width:t.maxWidth}),t.maxHeight&&d.svg.hydrate(this.view,{height:t.maxHeight})}this.state.updateSubscribers.push(function(){return n.updateState()})}return e.prototype.highlightBoardPin=function(e){this.boardView.highlightPin(e)},e.prototype.highlightBreadboardPin=function(e){this.breadboard.highlightLoc(e)},e.prototype.highlightWire=function(e){e.wires.forEach(function(e){d.svg.addClass(e,"highlight"),e.style.visibility="visible"}),d.svg.addClass(e.endG,"highlight")},e.prototype.getView=function(){return this.view},e.prototype.updateState=function(){this.parts.forEach(function(e){return e.updateState()})},e.prototype.getBBCoord=function(e){var t=this.breadboard.getCoord(e);return this.fromBBCoord(t)},e.prototype.getPinCoord=function(e){var t=this.boardView.getCoord(e);return d.U.assert(!!t,"Unable to find coord for pin: "+e),this.fromMBCoord(t)},e.prototype.getLocCoord=function(e){var t;if("breadboard"===e.type){var n=e;t=this.getBBCoord(n)}else{var o=e.pin;t=this.getPinCoord(o)}return t||(console.error("Unknown location: "+name),[0,0])},e.prototype.getPinStyle=function(e){return"breadboard"==e.type?"female":this.opts.boardDef.pinStyles[e.pin]||"female"},e.prototype.addPart=function(e){var t=this,n=null;if(e.simulationBehavior){var o=e.simulationBehavior,r=this.state.builtinVisuals[o],i=this.state.builtinParts[o];(n=r()).init(this.state.bus,i,this.view,e.params)}else{var a=e.visual;n=new p.GenericPart(a)}this.parts.push(n),this.partGroup.appendChild(n.element),n.overElement&&this.partOverGroup.appendChild(n.overElement),n.defs&&n.defs.forEach(function(e){return t.defs.appendChild(e)}),this.style.textContent+=n.style||"";var s=e.startColumnIdx,l=e.startRowIdx,c={type:"breadboard",row:p.getRowName(l),col:p.getColumnName(s),xOffset:e.bbFit.xOffset/e.visual.pinDistance,yOffset:e.bbFit.yOffset/e.visual.pinDistance},u=this.getBBCoord(c);n.moveToCoord(u);var g="sim-"+e.name+"-cmp";return d.svg.addClass(n.element,g),d.svg.addClass(n.element,"sim-cmp"),n.updateTheme(),n.updateState(),n},e.prototype.addWire=function(e){return this.wireFactory.addWire(e.start,e.end,e.color)},e.prototype.addAll=function(e){var o=this;e.partsAndWires.forEach(function(e){var t=e.part;t&&o.addPart(t);var n=e.wires;n&&n.forEach(function(e){return o.addWire(e)})})},e}();p.BoardHost=e}(d.visuals||(d.visuals={}))}(pxsim||(pxsim={})),function(q){!function(I){I.BREADBOARD_MID_ROWS=10,I.BREADBOARD_MID_COLS=30;var N=[4,4],e=I.BREADBOARD_MID_ROWS+N.length,w=[4,9,14,19],t=25+w.length,O=15*(I.BREADBOARD_MID_COLS+3),R=15*(e+4+5.5),L=R*(2/3),P=R*(.5*(1-2/3)),n=15*(I.BREADBOARD_MID_COLS-1),M=(O-n)/2,F=P+(L-15*(e-1))/2,U=15*(t-1),H=(O-U)/2,G=(P-15)/2,V=H,W=G+P+L,o=1.3,r=6,i=2,c=1.3,a="abcdefghij".split("").reverse();function K(e){return""+(e+1)}function z(e){return a[e]}function j(_){for(var f=_.xOffset||0,o=_.yOffset||0,h=[],m=q.svg.elt("g"),y=_.colStartIdx||0,r=_.rowStartIdx||0,i=function(e){return e?e.slice(0,e.length):[]},v=function(e,t){for(var n,o=0;0<=(n=e.indexOf(t));)e.splice(n,1),o+=1;return o},a=0,s=i(_.rowIdxsWithGap),e=function(e){for(var u=0,g=i(_.colIdxsWithGap),p=o+e*_.pinDist+a*_.pinDist,d=e+r,t=function(e){var o=f+e*_.pinDist+u*_.pinDist,t=e+y,n=function(e){var t=o-.5*e.w,n=p-.5*e.h;return q.svg.hydrate(e.el,{x:t,y:n}),m.appendChild(e.el),e.el},r=n(_.mkPin()),i=n(_.mkHoverPin()),a=_.getRowName(d),s=_.getColName(t),l=_.getGroupName?_.getGroupName(d,t):null,c={el:r,hoverEl:i,cx:o,cy:p,row:a,col:s,group:l};h.push(c),u+=v(g,t)},n=0;n<_.colCount;n++)t(n);a+=v(s,d)},t=0;t<_.rowCount;t++)e(t);return{g:m,allPins:h}}function Y(){var e=q.svg.elt("rect"),t=r;return q.svg.hydrate(e,{class:"sim-bb-pin",rx:i,ry:i,width:t,height:t}),{el:e,w:t,h:t,x:0,y:0}}function X(){var e=q.svg.elt("rect"),t=r*o;return q.svg.hydrate(e,{class:"sim-bb-pin-hover",rx:i,ry:i,width:t,height:t}),{el:e,w:t,h:t,x:0,y:0}}function J(e,t,n,o,r,i,a){var s=I.mkTxt(e,t,n,o,r);q.svg.addClass(s,"sim-bb-label"),a&&a.forEach(function(e){return q.svg.addClass(s,e)});var l=I.mkTxt(e,t,n*c,o,r);return q.svg.addClass(l,"sim-bb-label-hover"),a&&a.forEach(function(e){return q.svg.addClass(l,e)}),{el:s,hoverEl:l,txt:r,group:i}}I.getColumnName=K,I.getRowName=z,I.mkGrid=j;var s=function(){function e(e){this.allPins=[],this.allLabels=[],this.allPowerBars=[],this.rowColToPin={},this.rowColToLbls={},this.buildDom(),e.wireframe&&q.svg.addClass(this.bb,"sim-bb-outline")}return e.prototype.hide=function(){this.bb.style.display="none"},e.prototype.updateLocation=function(e,t){q.svg.hydrate(this.bb,{x:e+"px",y:t+"px"})},e.prototype.getPin=function(e,t){var n=this.rowColToPin[e];if(!n)return null;var o=n[t];return o||null},e.prototype.getCoord=function(e){var t=e.row,n=e.col,o=e.xOffset,r=e.yOffset,i=this.getPin(t,n);if(!i)return null;var a=15*(o||0),s=15*(r||0);return[i.cx+a,i.cy+s]},e.prototype.getPinDist=function(){return 15},e.prototype.buildDom=function(){var s=this;this.bb=q.svg.elt("svg",{version:"1.0",viewBox:"0 0 "+O+" "+R,class:"sim-bb",width:O+"px",height:R+"px"}),this.styleEl=q.svg.child(this.bb,"style",{}),this.styleEl.textContent+='\n        /* bread board */\n        .sim-bb-background {\n            fill:#E0E0E0;\n        }\n        .sim-bb-pin {\n            fill:#999;\n        }\n        .sim-bb-pin-hover {\n            visibility: hidden;\n            pointer-events: all;\n            stroke-width: 7.5px;\n            stroke: transparent;\n            fill: #777;\n        }\n        .sim-bb-pin-hover:hover {\n            visibility: visible;\n            fill:#444;\n        }\n        .sim-bb-group-wire {\n            stroke: #999;\n            stroke-width: 3.75px;\n            visibility: hidden;\n        }\n        .sim-bb-pin-group {\n            pointer-events: all;\n        }\n        .sim-bb-label,\n        .sim-bb-label-hover {\n            font-family:"Lucida Console", Monaco, monospace;\n            fill:#555;\n            pointer-events: all;\n            stroke-width: 0;\n            cursor: default;\n        }\n        .sim-bb-label-hover {\n            visibility: hidden;\n            fill:#000;\n            font-weight: bold;\n        }\n        .sim-bb-bar {\n            stroke-width: 0;\n        }\n        .sim-bb-blue {\n            fill:#1AA5D7;\n            stroke:#1AA5D7\n        }\n        .sim-bb-red {\n            fill:#DD4BA0;\n            stroke:#DD4BA0;\n        }\n        .sim-bb-pin-group:hover .sim-bb-pin-hover,\n        .sim-bb-pin-group:hover .sim-bb-group-wire,\n        .sim-bb-pin-group:hover .sim-bb-label-hover {\n            visibility: visible;\n        }\n        .sim-bb-pin-group:hover .sim-bb-label {\n            visibility: hidden;\n        }\n        /* outline mode */\n        .sim-bb-outline .sim-bb-background {\n            stroke-width: 2.142857142857143px;\n            fill: #FFF;\n            stroke: #000;\n        }\n        .sim-bb-outline .sim-bb-mid-channel {\n            fill: #FFF;\n            stroke: #888;\n            stroke-width: 2px;\n        }\n        /* grayed out */\n        .grayed .sim-bb-background {\n            stroke-width: 3px;\n        }\n        .grayed .sim-bb-red,\n        .grayed .sim-bb-blue {\n            fill: #BBB;\n        }\n        .grayed .sim-bb-bar {\n            fill: #FFF;\n        }\n        .grayed .sim-bb-pin {\n            fill: #000;\n            stroke: #FFF;\n            stroke-width: 3px;\n        }\n        .grayed .sim-bb-label {\n            fill: none;\n        }\n        .grayed .sim-bb-background {\n            stroke-width: 7.5px;\n            stroke: #555;\n        }\n        .grayed .sim-bb-group-wire {\n            stroke: #DDD;\n        }\n        .grayed .sim-bb-channel {\n            visibility: hidden;\n        }\n        /* highlighted */\n        .sim-bb-label.highlight {\n            visibility: hidden;\n        }\n        .sim-bb-label-hover.highlight {\n            visibility: visible;\n        }\n        .sim-bb-blue.highlight {\n            fill:#1AA5D7;\n        }\n        .sim-bb-red.highlight {\n            fill:#DD4BA0;\n        }\n        .sim-bb-bar.highlight {\n            stroke-width: 0px;\n        }\n        ',this.defs=q.svg.child(this.bb,"defs",{}),q.svg.child(this.bb,"rect",{class:"sim-bb-background",width:O,height:R,rx:4.5,ry:4.5});var r="sim-bb-channel-grad",e=q.svg.elt("linearGradient");q.svg.hydrate(e,{id:r,x1:"0%",y1:"0%",x2:"0%",y2:"100%"}),this.defs.appendChild(e);q.svg.child(e,"stop",{offset:"0%",style:"stop-color: #AAA;"}),q.svg.child(e,"stop",{offset:"20%",style:"stop-color: #CCC;"}),q.svg.child(e,"stop",{offset:"80%",style:"stop-color: #CCC;"}),q.svg.child(e,"stop",{offset:"100%",style:"stop-color: #AAA;"});var t=function(e,t,n){var o=q.svg.child(s.bb,"rect",{class:"sim-bb-channel "+(n||""),y:e-t/2,width:O,height:t});return o.setAttribute("fill","url(#"+r+")"),o};t(P+L/2,15,"sim-bb-mid-channel"),t(P,.75,"sim-bb-sml-channel"),t(P+L,.75,"sim-bb-sml-channel");var n=function(e,t){return""+(e<I.BREADBOARD_MID_ROWS/2?"b":"t")+K(t)},o=function(e){return 0===e?"-":"+"},i=function(e,t){var n=t<25?"b":"t";return""+o(e)+n},a=j({xOffset:M,yOffset:F,rowCount:I.BREADBOARD_MID_ROWS,colCount:I.BREADBOARD_MID_COLS,pinDist:15,mkPin:Y,mkHoverPin:X,getRowName:z,getColName:K,getGroupName:n,rowIdxsWithGap:N});a.g;this.allPins=this.allPins.concat(a.allPins);var l=j({xOffset:V,yOffset:W,rowCount:2,colCount:25,pinDist:15,mkPin:Y,mkHoverPin:X,getRowName:o,getColName:K,getGroupName:i,colIdxsWithGap:w});l.g;this.allPins=this.allPins.concat(l.allPins);var c=j({xOffset:H,yOffset:G,rowCount:2,colCount:25,colStartIdx:25,pinDist:15,mkPin:Y,mkHoverPin:X,getRowName:o,getColName:K,getGroupName:i,colIdxsWithGap:w.map(function(e){return e+25})});c.g;this.allPins=this.allPins.concat(c.allPins),this.allPins.forEach(function(e){var t=e.el,n=e.row,o=e.col,r=e.hoverEl,i="("+n+","+o+")";q.svg.hydrate(t,{title:i}),q.svg.hydrate(r,{title:i})}),this.allPins.forEach(function(e){var t=s.rowColToPin[e.row];t||(t=s.rowColToPin[e.row]={}),t[e.col]=e});for(var u=function(e,t,n,o,r,i){var a=s.getCoord({type:"breadboard",row:e,col:t});return J(a[0]+n,a[1]+o,10.5,-90,r,i)},g=0;g<I.BREADBOARD_MID_COLS;g++){var p=K(g),d=u(z(0),p,0,-15,p,n(0,g));this.allLabels.push(d);var _=I.BREADBOARD_MID_ROWS-1,f=u(z(_),p,0,15,p,n(_,g));this.allLabels.push(f)}for(var h=0;h<I.BREADBOARD_MID_ROWS;h++){var m=z(h);d=u(m,K(0),-15,0,m);this.allLabels.push(d);f=u(m,K(I.BREADBOARD_MID_COLS-1),15,0,m);this.allLabels.push(f)}var y=[J(13.05,P+L+12,30,-90,"-",i(0,0),["sim-bb-blue"]),J(12,P+L+P-12,25.5,-90,"+",i(1,0),["sim-bb-red"]),J(O-12+1.05,P+L+12,30,-90,"-",i(0,24),["sim-bb-blue"]),J(O-12,P+L+P-12,25.5,-90,"+",i(1,24),["sim-bb-red"])];this.allLabels=this.allLabels.concat(y);var v=[J(13.05,12,30,-90,"-",i(0,25),["sim-bb-blue"]),J(12,P-12,25.5,-90,"+",i(1,25),["sim-bb-red"]),J(O-12+1.05,12,30,-90,"-",i(0,49),["sim-bb-blue"]),J(O-12,P-12,25.5,-90,"+",i(1,49),["sim-bb-red"])];this.allLabels=this.allLabels.concat(v);var b={};this.allLabels.forEach(function(e){e.el;var t=e.txt;(b[t]=b[t]||[]).push(e)});this.allPins.forEach(function(t){var e,n=t.row,o=t.col,r=(t.group,s.rowColToLbls[n]||(s.rowColToLbls[n]={})),i=r[o]||(r[o]=[]);"-"===(e=t).row||"+"===e.row?Number(o)<=25?y.filter(function(e){return e.group==t.group}).forEach(function(e){return i.push(e)}):v.filter(function(e){return e.group==t.group}).forEach(function(e){return i.push(e)}):(b[n].forEach(function(e){return i.push(e)}),b[o].forEach(function(e){return i.push(e)}))});var k=U+22.5,T=(k-U)/2,E=function(e,t,n,o){var r=q.svg.elt("rect");return q.svg.hydrate(r,{class:"sim-bb-bar "+o,x:e,y:t-1.5,width:k,height:3}),{el:r,group:n}},S=[E(V-T,W-9,i(0,49),"sim-bb-blue"),E(V-T,W+15+9,i(1,49),"sim-bb-red"),E(H-T,G-9,i(0,0),"sim-bb-blue"),E(H-T,G+15+9,i(1,0),"sim-bb-red")];this.allPowerBars=this.allPowerBars.concat(S),this.allPowerBars.forEach(function(e){return s.bb.appendChild(e.el)});var C=this.allPins.map(function(e){return e.group}).filter(function(e,t,n){return n.indexOf(e)==t}),x=C.map(function(e){return q.svg.elt("g")});x.forEach(function(e){return q.svg.addClass(e,"sim-bb-pin-group")}),x.forEach(function(e,t){return q.svg.addClass(e,"group-"+C[t])});var A={};C.forEach(function(e,t){return A[e]=x[t]});var D={};this.allPins.forEach(function(e,t){var n=e.group;(D[n]||(D[n]=[])).push(e)}),C.forEach(function(e){var t=D[e],n=[t.map(function(e){return e.cx}),t.map(function(e){return e.cy})],o=n[0],r=n[1],i=function(e){return e.reduce(function(e,t){return e<t?e:t})},a=function(e){return e.reduce(function(e,t){return t<e?e:t})},s=[i(o),a(o),i(r),a(r)],l=s[0],c=s[1],u=s[2],g=s[3],p=q.svg.elt("rect"),d=Math.max(c-l,1e-4),_=Math.max(g-u,1e-4);q.svg.hydrate(p,{x:l,y:u,width:d,height:_}),q.svg.addClass(p,"sim-bb-group-wire"),A[e].appendChild(p)}),this.allPins.forEach(function(e){var t=A[e.group];t.appendChild(e.el),t.appendChild(e.hoverEl)});var B=q.svg.elt("g");q.svg.hydrate(B,{class:"sim-bb-group-misc"}),x.push(B),this.allLabels.forEach(function(e){if(e.group){var t=A[e.group];t.appendChild(e.el),t.appendChild(e.hoverEl)}else B.appendChild(e.el),B.appendChild(e.hoverEl)}),x.forEach(function(e){return s.bb.appendChild(e)})},e.prototype.getSVGAndSize=function(){return{el:this.bb,y:0,x:0,w:O,h:R}},e.prototype.highlightLoc=function(e){var t=e.row,n=e.col,o=this.rowColToPin[t][n];o.cx,o.cy;this.rowColToLbls[t][n].forEach(function(e){q.svg.addClass(e.el,"highlight"),q.svg.addClass(e.hoverEl,"highlight")})},e}();I.Breadboard=s}(q.visuals||(q.visuals={}))}(pxsim||(pxsim={})),function(y){!function(p){p.BOARD_SYTLE="\n        .noselect {\n            -webkit-touch-callout: none; /* iOS Safari */\n            -webkit-user-select: none;   /* Chrome/Safari/Opera */\n            -khtml-user-select: none;    /* Konqueror */\n            -moz-user-select: none;      /* Firefox */\n            -ms-user-select: none;       /* Internet Explorer/Edge */\n            user-select: none;           /* Non-prefixed version, currently\n                                            not supported by any browser */\n        }\n\n        .sim-board-pin {\n            fill:#999;\n            stroke:#000;\n            stroke-width:"+p.PIN_DIST/3+"px;\n        }\n        .sim-board-pin-lbl {\n            fill: #333;\n        }\n        .gray-cover {\n            fill:#FFF;\n            opacity: 0.3;\n            stroke-width:0;\n            visibility: hidden;\n        }\n        .sim-board-pin-hover {\n            visibility: hidden;\n            pointer-events: all;\n            stroke-width:"+p.PIN_DIST/6+'px;\n        }\n        .sim-board-pin-hover:hover {\n            visibility: visible;\n        }\n        .sim-board-pin-lbl {\n            visibility: hidden;\n        }\n        .sim-board-outline .sim-board-pin-lbl {\n            visibility: visible;\n        }\n        .sim-board-pin-lbl {\n            fill: #555;\n        }\n        .sim-board-pin-lbl-hover {\n            fill: red;\n        }\n        .sim-board-outline .sim-board-pin-lbl-hover {\n            fill: black;\n        }\n        .sim-board-pin-lbl,\n        .sim-board-pin-lbl-hover {\n            font-family:"Lucida Console", Monaco, monospace;\n            pointer-events: all;\n            stroke-width: 0;\n        }\n        .sim-board-pin-lbl-hover {\n            visibility: hidden;\n        }\n        .sim-board-outline .sim-board-pin-hover:hover + .sim-board-pin-lbl,\n        .sim-board-pin-lbl.highlight {\n            visibility: hidden;\n        }\n        .sim-board-outline .sim-board-pin-hover:hover + * + .sim-board-pin-lbl-hover,\n        .sim-board-pin-lbl-hover.highlight {\n            visibility: visible;\n        }\n        /* Graying out */\n        .grayed .sim-board-pin-lbl:not(.highlight) {\n            fill: #AAA;\n        }\n        .grayed .sim-board-pin:not(.highlight) {\n            fill:#BBB;\n            stroke:#777;\n        }\n        .grayed .gray-cover {\n            visibility: inherit;\n        }\n        .grayed .sim-cmp:not(.notgrayed) {\n            opacity: 0.3;\n        }\n        /* Highlighting */\n        .sim-board-pin-lbl.highlight {\n            fill: #000;\n            font-weight: bold;\n        }\n        .sim-board-pin.highlight {\n            fill:#999;\n            stroke:#000;\n        }\n        ';var d=.7*p.PIN_DIST,_=1.5*d,f=.66666*p.PIN_DIST,h=.66666*p.PIN_DIST+p.PIN_DIST/3,m=0,e=function(){function e(e){var o=this;this.props=e,this.allPins=[],this.allLabels=[],this.pinNmToLbl={},this.pinNmToPin={},this.id=m++;var r=e.visualDef,t=e.wireframe&&r.outlineImage?r.outlineImage:r.image,n=p.mkImageSVG({image:t,width:r.width,height:r.height,imageUnitDist:r.pinDist,targetUnitDist:p.PIN_DIST}),a=p.mkScaleFn(r.pinDist,p.PIN_DIST);this.width=n.w,this.height=n.h;var i=n.el;this.element=y.svg.elt("svg"),y.svg.hydrate(this.element,{version:"1.0",viewBox:"0 0 "+this.width+" "+this.height,class:"sim sim-board-id-"+this.id,x:"0px",y:"0px"}),e.wireframe&&y.svg.addClass(this.element,"sim-board-outline"),this.style=y.svg.child(this.element,"style",{}),this.style.textContent+=p.BOARD_SYTLE,this.defs=y.svg.child(this.element,"defs",{}),this.g=y.svg.elt("g"),this.element.appendChild(this.g),this.g.appendChild(i),this.background=i,y.svg.hydrate(i,{class:"sim-board"});var s=function(){var e=y.svg.elt("rect"),t=f;return y.svg.hydrate(e,{class:"sim-board-pin",width:t,height:t}),{el:e,w:t,h:t,x:0,y:0}},l=function(){var e=y.svg.elt("rect"),t=h;return y.svg.hydrate(e,{class:"sim-board-pin-hover",width:t,height:t}),{el:e,w:t,h:t,x:0,y:0}},c=r.pinBlocks.map(function(t,e){var n=a(t.x)+p.PIN_DIST/2,o=a(t.y)+p.PIN_DIST/2,r=t.labels.length,i=p.mkGrid({xOffset:n,yOffset:o,rowCount:1,colCount:r,pinDist:p.PIN_DIST,mkPin:s,mkHoverPin:l,getRowName:function(){return""+(e+1)},getColName:function(e){return t.labels[e]},getGroupName:function(){return t.labels.join(" ")}});i.allPins,i.g;return y.svg.addClass(i.g,"sim-board-pin-group"),i}),u=[];c.forEach(function(e,n){return e.allPins.forEach(function(e,t){o.allPins.push(e),u.push(r.pinBlocks[n])})}),this.allPins.forEach(function(e){var t=e.col;y.svg.hydrate(e.el,{title:t}),y.svg.hydrate(e.hoverEl,{title:t})}),this.allPins.forEach(function(e){o.pinNmToPin[e.col]=e});var g=function(e,t,n,o,r){var i,a;"below"===r?(a=e,i=t+12+.25*n*o.length):(a=e,i=t-11-.32*n*o.length);return p.mkTxt(a,i,n,-90,o)};this.allLabels=this.allPins.map(function(e,t){var n=u[t];return function(e,t,n,o){var r=g(e,t,d,n,o);y.svg.addClass(r,"sim-board-pin-lbl");var i=g(e,t,_,n,o);return y.svg.addClass(i,"sim-board-pin-lbl-hover"),{el:r,hoverEl:i,txt:n}}(e.cx,e.cy,e.col,n.labelPosition)}),this.allPins.forEach(function(e,t){var n=o.allLabels[t];o.pinNmToLbl[e.col]=n}),this.allPins.forEach(function(e,t){var n=o.allLabels[t];o.g.appendChild(e.el),o.g.appendChild(e.hoverEl),o.g.appendChild(n.el),o.g.appendChild(n.hoverEl)})}return e.prototype.getCoord=function(e){var t=this.pinNmToPin[e];return t?[t.cx,t.cy]:null},e.prototype.mkGrayCover=function(e,t,n,o){var r=y.svg.elt("rect");return y.svg.hydrate(r,{x:e,y:t,width:n,height:o,class:"gray-cover"}),r},e.prototype.getView=function(){return{el:this.element,w:this.width,h:this.height,x:0,y:0}},e.prototype.getPinDist=function(){return p.PIN_DIST},e.prototype.highlightPin=function(e){var t=this.pinNmToLbl[e],n=this.pinNmToPin[e];t&&n&&(y.svg.addClass(t.el,"highlight"),y.svg.addClass(t.hoverEl,"highlight"),y.svg.addClass(n.el,"highlight"),y.svg.addClass(n.hoverEl,"highlight"))},e}();p.GenericBoardSvg=e}(y.visuals||(y.visuals={}))}(pxsim||(pxsim={})),function(o){!function(t){function n(e){return t.mkImageSVG({image:e.image,width:e.width,height:e.height,imageUnitDist:e.pinDistance,targetUnitDist:t.PIN_DIST})}t.mkGenericPartSVG=n;var e=function(){function e(e){this.style="",this.defs=[];var t=n(e).el;this.element=o.svg.elt("g"),this.element.appendChild(t)}return e.prototype.moveToCoord=function(e){t.translateEl(this.element,e)},e.prototype.init=function(e,t,n){},e.prototype.updateState=function(){},e.prototype.updateTheme=function(){},e}();t.GenericPart=e}(o.visuals||(o.visuals={}))}(pxsim||(pxsim={})),function(P){!function(I){var e,s=I.PIN_DIST/2.5,x=15,A=100;function N(e){return e.replace(/\#/g,"-").replace(/\(/g,"-").replace(/\)/g,"-").replace(/\,/g,"-").replace(/\./g,"-").replace(/\s/g,"")}function w(e,t,n,o){var r=function(e){return e[0]+", "+e[1]},i=e[0],a=e[1],s=t[0],l=t[1],c=l-a,u=[i,a+c*n],g=[s,l-c*n],p=P.svg.mkPath("sim-bb-wire","M"+r(e)+" C"+r(u)+" "+r(g)+" "+r(t));return P.svg.addClass(p,"wire-stroke-"+o),p}function O(e,t,n){var o=function(e){return e[0]+", "+e[1]},r=P.svg.mkPath("sim-bb-wire","M"+o(e)+" L"+o(t));return P.svg.addClass(r,"wire-stroke-"+n),r}function R(e,t){var n=I.PIN_DIST/4,o=P.svg.elt("circle"),r=e[0],i=e[1],a=s/2+n/2;return P.svg.hydrate(o,{cx:r,cy:i,r:a,class:"sim-bb-wire-end"}),P.svg.addClass(o,"wire-fill-"+t),o.style["stroke-width"]=n+"px",o}function D(e,t,n){var o=.24*I.PIN_DIST,r=10*o,i=2*o,a=6*o,s=o,l=I.PIN_DIST/4,c=e[0],u=e[1],g=t?-1:1,p=P.svg.elt("g"),d=P.svg.elt("rect"),_=r,f=i,h=c-f/2,m=u-_/2;P.svg.hydrate(d,{x:h,y:m,width:f,height:_,rx:.5,ry:.5,class:"sim-bb-wire-end"}),d.style["stroke-width"]=l+"px";var y=P.svg.elt("rect"),v=a,b=s,k=c-b/2,T=u+g*(_/2+v/2)-v/2;return P.svg.hydrate(y,{x:k,y:T,width:b,height:v,class:"sim-bb-wire-bare-end"}),y.style.fill="#bbb",p.appendChild(y),p.appendChild(d),{el:p,x:h-l,y:Math.min(m,T),w:f+2*l,h:_+v}}function L(e,t,n){var o=.24*I.PIN_DIST,r=4*o,i=10*o,a=3.5*o,s=3.5*o,l=I.PIN_DIST/4,c=e[0],u=e[1],g=t?-1:1,p=P.svg.elt("g"),d=P.svg.elt("polygon"),_=i,f=r,h=c-f/2,m=u-_/2,y=t?.15:.3,v=t?.7:1-.7,b=t?.3:.15;P.svg.hydrate(d,{points:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.map(function(e){return(t=e)[0]+","+t[1];var t}).join(" ")}([h+f*y,m],[h+f*(1-y),m],[h+f,m+_*v],[h+f*(1-b),m+_],[h+f*b,m+_],[h,m+_*v])}),P.svg.hydrate(d,{rx:.5,ry:.5,class:"sim-bb-wire-end"}),d.style["stroke-width"]=l+"px";var k=P.svg.elt("rect"),T=a,E=s,S=c-E/2,C=u+g*(_/2+T/2)-T/2;return P.svg.hydrate(k,{x:S,y:C,width:E,height:T,class:"sim-bb-wire-bare-end"}),p.appendChild(k),p.appendChild(d),{el:p,x:h-l,y:Math.min(m,C),w:f+2*l,h:_+T}}I.WIRES_CSS="\n        .sim-bb-wire {\n            fill:none;\n            stroke-linecap: round;\n            stroke-width:"+s+"px;\n            pointer-events: none;\n        }\n        .sim-bb-wire-end {\n            stroke:#333;\n            fill:#333;\n        }\n        .sim-bb-wire-bare-end {\n            fill: #ccc;\n        }\n        .sim-bb-wire-hover {\n            stroke-width: "+s+"px;\n            visibility: hidden;\n            stroke-dasharray: "+I.PIN_DIST/10+","+I.PIN_DIST/1.5+";\n            /*stroke-opacity: 0.4;*/\n        }\n        .grayed .sim-bb-wire-ends-g:not(.highlight) .sim-bb-wire-end {\n            stroke: #777;\n            fill: #777;\n        }\n        .grayed .sim-bb-wire:not(.highlight) {\n            stroke: #CCC;\n        }\n        .sim-bb-wire-ends-g:hover .sim-bb-wire-end {\n            stroke: red;\n            fill: red;\n        }\n        .sim-bb-wire-ends-g:hover .sim-bb-wire-bare-end {\n            stroke: #FFF;\n            fill: #FFF;\n        }\n        ",(e=I.WireEndStyle||(I.WireEndStyle={}))[e.BBJumper=0]="BBJumper",e[e.OpenJumper=1]="OpenJumper",e[e.Croc=2]="Croc",I.mkWirePart=function(e,t,n){void 0===n&&(n=!1);var o,r=P.svg.elt("g"),i=e[0],a=e[1],s=[i-x,a-A/2],l=[i+x,a+A/2];t=I.mapWireColor(t),o=n?L(s,!0,t):D(s,!0,t);var c,u,g,p,d,_,f,h,m,y,v,b,k=(u=l,g=t,p=function(e){return e[0]+", "+e[1]},d=(c=s)[0],_=c[1],f=u[0],h=u[1],y=[d,_+.8*(m=h-_)],v=[f,h-.8*m],(b=P.svg.mkPath("sim-bb-wire","M"+p(c)+" C"+p(y)+" "+p(v)+" "+p(u))).style.stroke=g,{el:b,x:Math.min(d,f),y:Math.min(_,h),w:Math.abs(d-f),h:Math.abs(_-h)}),T=D(l,!1,t);r.appendChild(k.el),r.appendChild(o.el),r.appendChild(T.el);var E=Math.min(o.x,T.x),S=Math.max(o.x+o.w,T.x+T.w),C=Math.min(o.y,T.y);return{el:r,x:E,y:C,w:S-E,h:Math.max(o.y+o.h,T.y+T.h)-C}};var t=function(){function e(e,t,n,o,r,i){this.nextWireId=0,this.styleEl=o,this.styleEl.textContent+=I.WIRES_CSS,this.underboard=e,this.overboard=t,this.boardEdges=n,this.getLocCoord=r,this.getPinStyle=i}return e.prototype.indexOfMin=function(e){for(var t=0,n=e[0],o=1;o<e.length;o++)e[o]<n&&(n=e[o],t=o);return t},e.prototype.closestEdgeIdx=function(t){var e=this.boardEdges.map(function(e){return Math.abs(t[1]-e)});return this.indexOfMin(e)},e.prototype.closestEdge=function(e){return this.boardEdges[this.closestEdgeIdx(e)]},e.prototype.drawWire=function(e,t,n){var r=this,o=[],i=P.svg.child(this.overboard,"g",{class:"sim-bb-wire-group"}),a=function(e){var t,n=I.PIN_DIST/2,o=r.closestEdge(e);return t=o-e[1]<0?o-n:o+n,[e[0],t]},s=this.nextWireId++,l=N(n),c=R(e,l),u=R(t,l),g=P.svg.child(i,"g",{class:"sim-bb-wire-ends-g"});g.appendChild(c),g.appendChild(u);var p=this.closestEdgeIdx(e),d=this.closestEdgeIdx(t);if(p==d){var _=O(e,t,l);i.appendChild(_),o.push(_)}else{var f=a(e),h=a(t),m=O(e,f,l),y=O(t,h,l),v=void 0,b=void 0;!(1!=p&&2!=p||1!=d&&2!=d)?(v=w(f,h,.7,l),b=w(f,h,.7,l)):(v=O(f,h,l),b=O(f,h,l)),P.svg.addClass(b,"sim-bb-wire-hover"),i.appendChild(m),o.push(m),i.appendChild(y),o.push(y),this.underboard.appendChild(v),o.push(v),i.appendChild(b),o.push(b);var k="sim-bb-wire-id-"+s,T=function(e){return P.svg.addClass(e,k)};T(g),T(b),this.styleEl.textContent+="\n                    ."+k+":hover ~ ."+k+".sim-bb-wire-hover {\n                        visibility: visible;\n                    }"}var E="\n                .wire-stroke-"+l+" {\n                    stroke: "+I.mapWireColor(n)+";\n                }\n                .wire-fill-"+l+" {\n                    fill: "+I.mapWireColor(n)+";\n                }\n                ";return this.styleEl.textContent+=E,{endG:g,end1:c,end2:u,wires:o}},e.prototype.drawWireWithCrocs=function(e,t,n,o){var r=this;void 0===o&&(o=!1);var i=[],a=P.svg.child(this.overboard,"g",{class:"sim-bb-wire-group"}),s=this.nextWireId++,l=N(n),c=R(e,l),u=t,g=t[0],p=t[1],d=[g=(t=[g,p+40])[0],(p=t[1])+-17],_=(o?function(e,t,n){var o=.24*I.PIN_DIST,r=4*o,i=1.2*o,a=10*o,s=o,l=I.PIN_DIST/4,c=e[0],u=e[1],g=t?-1:1,p=P.svg.elt("g"),d=P.svg.elt("rect"),_=r,f=i,h=c-f/2,m=u+10-_/2;P.svg.hydrate(d,{x:h,y:m,width:f,height:_,rx:.5,ry:.5,class:"sim-bb-wire-end"}),d.style["stroke-width"]=l+"px";var y=P.svg.elt("rect"),v=a,b=s,k=c-b/2,T=u+10+g*(_/2+v/2)-v/2;return P.svg.hydrate(y,{x:k,y:T,width:b,height:v,class:"sim-bb-wire-bare-end"}),y.style.fill="#bbb",p.appendChild(y),p.appendChild(d),{el:p,x:h-l,y:Math.min(m,T),w:f+2*l,h:_+v}}(d,!0):L(d,!0)).el,f=P.svg.child(a,"g",{class:"sim-bb-wire-ends-g"});f.appendChild(c);var h,m,y,v,b=this.closestEdgeIdx(e),k=this.closestEdgeIdx(u);if(b==k){var T=O(e,t,l);a.appendChild(T),i.push(T)}else{var E=(h=e,y=I.PIN_DIST/2,v=r.closestEdge(h),m=v-h[1]<0?v-y:v+y,[h[0],m]),S=O(e,E,l),C=void 0,x=void 0;!(1!=b&&2!=b||1!=k&&2!=k)?(C=w(E,t,.7,l),x=w(E,t,.7,l)):(C=O(E,t,l),x=O(E,t,l)),P.svg.addClass(x,"sim-bb-wire-hover"),a.appendChild(S),i.push(S),this.underboard.appendChild(C),i.push(C);var A="sim-bb-wire-id-"+s,D=function(e){return P.svg.addClass(e,A)};D(f),D(x),this.styleEl.textContent+="\n                    ."+A+":hover ~ ."+A+".sim-bb-wire-hover {\n                        visibility: visible;\n                    }"}f.appendChild(_);var B="\n                .wire-stroke-"+l+" {\n                    stroke: "+I.mapWireColor(n)+";\n                }\n                .wire-fill-"+l+" {\n                    fill: "+I.mapWireColor(n)+";\n                }\n                ";return this.styleEl.textContent+=B,{endG:f,end1:c,end2:_,wires:i}},e.prototype.addWire=function(e,t,n){var o=this.getLocCoord(e),r=this.getLocCoord(t),i=(this.getPinStyle(e),this.getPinStyle(t));return"dalboard"==t.type&&"croc"==i?this.drawWireWithCrocs(o,r,n):this.drawWire(o,r,n)},e}();I.WireFactory=t}(P.visuals||(P.visuals={}))}(pxsim||(pxsim={})),function(o){!function(e){e.startDebuggerAsync=function(e){new t(e).start()};var t=function(){function t(e){this.container=e,this.pkgLoaded=!1,this.intervalRunning=!1}return t.prototype.start=function(){var e=this;this.initializeWebsocket(),this.intervalRunning||(this.intervalRunning=!0,this.intervalId=setInterval(function(){if(!e.ws)try{e.initializeWebsocket()}catch(e){console.warn("Connection to server failed, retrying in "+t.RETRY_MS+" ms")}},t.RETRY_MS)),this.session=new pxsim.SimDebugSession(this.container),this.session.start(this)},t.prototype.initializeWebsocket=function(){var n=this;o.Cloud.isLocalHost()&&o.Cloud.localToken&&(o.debug("initializing debug pipe"),this.ws=new WebSocket("ws://localhost:3234/"+o.Cloud.localToken+"/simdebug"),this.ws.onopen=function(e){o.debug("debug: socket opened")},this.ws.onclose=function(e){o.debug("debug: socket closed"),n.closeListener&&n.closeListener(),n.session.stopSimulator(),n.ws=void 0},this.ws.onerror=function(e){o.debug("debug: socket closed due to error"),n.errorListener&&n.errorListener(e.type),n.session.stopSimulator(),n.ws=void 0},this.ws.onmessage=function(e){var t;try{t=JSON.parse(e.data)}catch(e){o.debug("debug: could not parse message")}t&&("runner"===t.type?n.handleRunnerMessage(t):("request"===t.type&&"launch"===t.command&&n.sendRunnerMessage("configure",{projectDir:t.arguments.projectDir}),n.dataListener(t)))})},t.prototype.send=function(e){this.ws.send(e)},t.prototype.onData=function(e){this.dataListener=e},t.prototype.onError=function(e){this.errorListener=e},t.prototype.onClose=function(e){this.closeListener=e},t.prototype.close=function(){this.session&&this.session.stopSimulator(!0),this.intervalRunning&&(clearInterval(this.intervalId),this.intervalId=void 0),this.ws&&this.ws.close()},t.prototype.handleRunnerMessage=function(e){switch(e.subtype){case"ready":this.sendRunnerMessage("ready");break;case"runcode":this.runCode(e)}},t.prototype.runCode=function(e){var t=[];e.breakpoints.forEach(function(e){t.push([e.id,{verified:!0,line:e.line,column:e.column,endLine:e.endLine,endColumn:e.endColumn,source:{path:e.fileName}}])}),this.session.runCode(e.code,e.usedParts,e.usedArguments,new pxsim.BreakpointMap(t),o.appTarget.simulator.boardDefinition)},t.prototype.sendRunnerMessage=function(e,t){void 0===t&&(t={}),t.subtype=e,t.type="runner",this.send(JSON.stringify(t))},t.RETRY_MS=2500,t}();e.DebugRunner=t}(o.runner||(o.runner={}))}(pxt||(pxt={})),function(T){!function(e){function v(e,t){e.append($('<div class="ui content blocks"/>').append(t))}function b(e,t,n){e.append($('<div class="ui content js"/>').append(t)),"undefined"!=typeof hljs&&t.find("code.highlight").each(function(e,t){hljs.highlightBlock(t)})}function u(n,e,o,t,r,i){void 0===i&&(i={});T.webConfig.commitCdnUrl;var a=$('<div class="ui bottom attached tabular icon small compact menu hideprint"> <div class="right icon menu"></div></div>'),s=$('<div class="ui top attached segment nobreak"></div>'),l=a.find(".right.menu"),c=T.appTarget.appTheme||{};if(i.showEdit&&!c.hideDocsEdit){var u=$('<a class="item" role="button" tabindex="0" aria-label="'+lf("edit")+'"><i role="presentation" aria-hidden="true" class="edit icon"></i></a>').click(function(){r.package.compressToFileAsync(n.showJavaScript?T.JAVASCRIPT_PROJECT_NAME:T.BLOCKS_PROJECT_NAME).done(function(e){return window.open((n.pxtUrl||T.appTarget.appTheme.homeUrl||"").replace(/\/$/,"")+"/#project:"+ts.pxtc.encodeBase64(T.Util.uint8ArrayToString(e)),"pxt")})});l.append(u)}if(n.showJavaScript||!t){if(s.append(o),t){var g=$('<a class="item blocks" role="button" tabindex="0" aria-label="'+lf("Blocks")+'"><i role="presentation" aria-hidden="true" class="puzzle icon"></i></a>').click(function(){s.find(".blocks")[0]?s.find(".blocks").remove():v(o?o.parent():s,t)});l.append(g)}}else if(s.append(t),i.showJs)b(s,o);else{var p=$('<a class="item js" role="button" tabindex="0" aria-label="'+lf("JavaScript")+'"><i role="presentation" aria-hidden="true" class="align left icon"></i></a>').click(function(){s.find(".js")[0]?s.find(".js").remove():b(t?t.parent():s,o)});l.append(p)}if(i.run&&!c.hideDocsSimulator){var d=$('<a class="item" role="button" tabindex="0" aria-label="'+lf("run")+'"><i role="presentation" aria-hidden="true" class="play icon"></i></a>').click(function(){if(s.find(".sim")[0])s.find(".sim").remove();else{var e="81.97%";T.appTarget.simulator&&(e=100/T.appTarget.simulator.aspectRatio+"%");var t=$('<div class="ui card sim"><div class="ui content"><div style="position:relative;height:0;padding-bottom:'+e+';overflow:hidden;"><iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" src="'+k(n)+"#nofooter=1&code="+encodeURIComponent(o.text())+'" allowfullscreen="allowfullscreen" sandbox="allow-popups allow-forms allow-scripts allow-same-origin" frameborder="0"></iframe></div></div></div>');s.append(t)}});l.append(d)}if(i.hexname&&i.hex){var _=$('<a class="item" role="button" tabindex="0" aria-label="'+lf("download")+'"><i role="presentation" aria-hidden="true" class="download icon"></i></a>').click(function(){T.BrowserUtils.browserDownloadBinText(i.hex,i.hexname,T.appTarget.compile.hexMimeType)});l.append(_)}var f=[s];if(l.children().length&&f.push(a),e.replaceWith(f),n.downloadScreenshots&&i.hexname){T.debug("Downloading screenshot for: "+i.hexname);var h=i.hexname.substr(0,i.hexname.lastIndexOf(".")),m=(window.getComputedStyle(t.get(0).getElementsByClassName("blocklyText").item(0)).getPropertyValue("font-size"),t.get(0)),y=t.get(0).getBoundingClientRect();T.blocks.layout.svgToPngAsync(m,0,0,y.width,y.height,4).done(function(e){e&&T.BrowserUtils.browserDownloadDataUri(e,(name||(T.appTarget.nickname||T.appTarget.id)+"-"+h)+".png")})}}function i(t,n,o){if(!t)return Promise.resolve();var r=$("."+t).first();return r[0]?(o.emPixels||(o.emPixels=14),o.layout||(o.layout=T.blocks.BlockLayout.Flow),T.runner.decompileToBlocksAsync(r.text(),o).then(function(e){try{n(r,e)}catch(e){console.error("error while rendering "+r.html()),r.append($("<div/>").addClass("ui segment warning").text(e.message))}return r.removeClass(t),Promise.delay(1,i(t,n,o))})):Promise.resolve()}function d(e){if(!e||e.kind!=ts.SyntaxKind.ExpressionStatement)return null;var t=e;return t.expression&&t.expression.kind==ts.SyntaxKind.CallExpression?t.expression.callInfo:null}function t(e,t,n,p){return i(t,function(e,u){if(u.compileJS){var t=u.compileJS.ast.getSourceFile("main.ts").statements.slice(0).reverse(),o=$("<div />").addClass("ui cards");o.attr("role","listbox");var g=function(e){if(e){var t=/^\/(v\d+)/.exec(e.url),n=/^\/(v\d+)/.exec(window.location.pathname);e.url&&!t&&n&&(e.url="/"+n[1]+"/"+e.url),o.append(T.docs.codeCard.render(e,{hideHeader:!0,shortName:!0}))}};t.forEach(function(e){var t=d(e);if(t&&u.apiInfo&&u.apiInfo.byQName[t.qName]){var n=u.apiInfo.byQName[t.qName].attributes,o=Blockly.Blocks[n.blockId];if(p){var r=u.compileBlocks.blocksInfo.apis.byQName[t.qName],i=u.compileBlocks.blocksInfo.apis.byQName[r.namespace];g({name:i.attributes.blockNamespace||i.name,url:i.attributes.help||"reference/"+(i.attributes.blockNamespace||i.name).toLowerCase(),description:i.attributes.jsDoc,blocksXml:o&&o.codeCard?o.codeCard.blocksXml:n.blockId?'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="'+n.blockId+'"></block></xml>':void 0})}else if(o){var a=T.U.clone(o.codeCard);a&&g(a)}else g({name:t.qName,description:n.jsDoc,url:n.help||void 0})}else switch(e.kind){case ts.SyntaxKind.ExpressionStatement:var s=e;switch(s.expression.kind){case ts.SyntaxKind.TrueKeyword:case ts.SyntaxKind.FalseKeyword:g({name:"Boolean",url:"blocks/logic/boolean",description:lf("True or false values"),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="logic_boolean"><field name="BOOL">TRUE</field></block></xml>'});break;default:T.debug("card expr kind: "+s.expression.kind)}break;case ts.SyntaxKind.IfStatement:g({name:p?"Logic":"if",url:"blocks/logic"+(p?"":"/if"),description:lf(p?"Logic operators and constants":"Conditional statement"),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="controls_if"></block></xml>'});break;case ts.SyntaxKind.WhileStatement:g({name:p?"Loops":"while",url:"blocks/loops"+(p?"":"/while"),description:lf(p?"Loops and repetition":"Repeat code while a condition is true."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="device_while"></block></xml>'});break;case ts.SyntaxKind.ForOfStatement:g({name:p?"Loops":"for of",url:"blocks/loops"+(p?"":"/for-of"),description:lf(p?"Loops and repetition":"Repeat code for each item in a list."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="controls_for_of"></block></xml>'});break;case ts.SyntaxKind.ForStatement:var l=e,c=!0;3==l.condition.getChildCount()&&(c=!("0"==l.condition.getChildAt(0).getText()||l.condition.getChildAt(1).kind==ts.SyntaxKind.LessThanToken)),g(c?{name:p?"Loops":"for",url:"blocks/loops"+(p?"":"/for"),description:lf(p?"Loops and repetition":"Repeat code for a given number of times using an index."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="controls_simple_for"></block></xml>'}:{name:p?"Loops":"repeat",url:"blocks/loops"+(p?"":"/repeat"),description:lf(p?"Loops and repetition":"Repeat code for a given number of times."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="controls_repeat_ext"></block></xml>'});break;case ts.SyntaxKind.VariableStatement:g({name:p?"Variables":"variable declaration",url:"blocks/variables"+(p?"":"/assign"),description:lf(p?"Variables":"Assign a value to a named variable."),blocksXml:'<xml xmlns="http://www.w3.org/1999/xhtml"><block type="variables_set"></block></xml>'});break;default:T.debug("card kind: "+e.kind)}}),n&&(e=e.parent()),e.replaceWith(o)}},{package:e.package,aspectRatio:e.blocksAspectRatio})}function s(e,t){if(!e)return Promise.resolve();var n,o=$("."+e).first();if(!o[0])return Promise.resolve();o.removeClass(e);try{var r=JSON.parse(o.text());Array.isArray(r)||(r=[r]),n=r}catch(e){console.error("error while rendering "+o.html()),o.append($("<div/>").addClass("ui segment warning").text(e.messageText))}return t.snippetReplaceParent&&(o=o.parent()),function(e,t,i){if(!t||0==t.length)return Promise.resolve();if(0==t.length){var n=T.docs.codeCard.render(t[0],i);e.replaceWith(n)}else{var a=document.createElement("div");a.className="ui cards",a.setAttribute("role","listbox"),t.forEach(function(t){var e=/^\/(v\d+)/.exec(t.url),n=/^\/(v\d+)/.exec(window.location.pathname);t.url&&!e&&n&&(t.url="/"+n[1]+t.url);var o=T.docs.codeCard.render(t,i);if(a.appendChild(o),"package"==t.cardType){var r=T.github.parseRepoId((t.url||"").replace(/^\/pkg\//,""));r&&T.packagesConfigAsync().then(function(e){switch(T.github.repoStatus(r,e)){case T.github.GitRepoStatus.Banned:o.remove();break;case T.github.GitRepoStatus.Approved:t.imageUrl=T.github.mkRepoIconUrl(r),a.insertBefore(T.docs.codeCard.render(t,i),o),o.remove()}}).catch(function(e){T.debug("failed to load repo "+t.url)})}}),e.replaceWith(a)}return Promise.resolve()}(o,n,{hideHeader:!0}).then(function(){return Promise.delay(1,s(e,t))})}function k(e){return e.pxtUrl?e.pxtUrl+"/--run":T.webConfig&&T.webConfig.runUrl?T.webConfig.runUrl:"/--run"}(T.runner||(T.runner={})).renderAsync=function(a){var r;return a||(a={}),a.pxtUrl&&(a.pxtUrl=a.pxtUrl.replace(/\/$/,"")),a.showEdit&&(a.showEdit=!T.BrowserUtils.isIFrame()),(r=a).packageClass&&$("."+r.packageClass).each(function(e,t){var n=$(t),o=n.text().split("\n").map(function(e){return e.replace(/\s*/g,"")}).filter(function(e){return!!e}).join(",");r.package=r.package?r.package+","+o:o,r.snippetReplaceParent&&(n=n.parent()),n.remove()}),a.simulatorClass&&$("."+a.simulatorClass).each(function(e,t){var n=$(t),o="81.97%";T.appTarget.simulator&&(o=100/T.appTarget.simulator.aspectRatio+"%");var r=$('<div class="ui centered card"><div class="ui content">\n                    <div style="position:relative;height:0;padding-bottom:'+o+';overflow:hidden;">\n                    <iframe style="position:absolute;top:0;left:0;width:100%;height:100%;" allowfullscreen="allowfullscreen" frameborder="0" sandbox="allow-popups allow-forms allow-scripts allow-same-origin"></iframe>\n                    </div>\n                    </div></div>');r.find("iframe").attr("src",k(a)+"#nofooter=1&code="+encodeURIComponent(n.text().trim())),a.snippetReplaceParent&&(n=n.parent()),n.replaceWith(r)}),function(o){var r={showEdit:!!o.showEdit,run:!!o.simulator};function n(e,t){"undefined"!=typeof hljs&&($(e).text($(e).text().replace(/^\s*\r?\n/,"")),hljs.highlightBlock(e));var n=T.U.clone(r);t&&(n.run=!1,n.showEdit=!1),u(o,$(e).parent(),$(e),void 0,void 0,n)}$("code.lang-typescript").each(function(e,t){n(t,!1),$(t).removeClass("lang-typescript")}),$("code.lang-typescript-ignore").each(function(e,t){n(t,!0),$(t).removeClass("lang-typescript-ignore")})}(a),Promise.resolve().then(function(){return e=a,"core"==T.appTarget.id?Promise.resolve():T.runner.decompileToBlocksAsync("",e).then(function(e){var o={},r=e.compileBlocks.blocksInfo;r.blocks.forEach(function(e){var t=(e.attributes.blockNamespace||e.namespace).split(".")[0];if(!o[t]){var n=r.apis.byQName[t];n&&n.attributes.color&&(o[t]=n.attributes.color)}});var n="";return Object.keys(o).forEach(function(e){var t=o[e]||"#dddddd";n+="\n                        span.docs."+e.toLowerCase()+" {\n                            background-color: "+t+" !important;\n                            border-color: "+T.toolbox.fadeColor(t,.2,!0)+" !important;\n                        }\n                    "}),n}).then(function(n){return Object.keys(T.toolbox.blockColors).forEach(function(e){var t=T.toolbox.blockColors[e];n+="\n                        span.docs."+e.toLowerCase()+" {\n                            background-color: "+t+" !important;\n                            border-color: "+T.toolbox.fadeColor(t,.2,!0)+" !important;\n                        }\n                    "}),n}).then(function(e){var t=document.createElement("style");t.id="namespaceColors",t.type="text/css",(document.head||document.getElementsByTagName("head")[0]).appendChild(t),t.appendChild(document.createTextNode(e))});var e}).then(function(){return function(u){(u=T.Util.clone(u)).emPixels=18,u.snippetMode=!0;var g=$(":not(pre) > code"),p=0;return function r(){if(p>=g.length)return Promise.resolve();var i=$(g[p++]),e=i.text(),t=/^(\|+)([^\|]+)\|+$/.exec(e);if(t){var n=/^(([^\:\.]*?)[\:\.])?(.*)$/.exec(t[2]),o=n[2]?n[2].trim().toLowerCase():"",a=1==t[1].length?"docs inlinebutton "+o:"docs inlineblock "+o,s=n[3].trim();return i.replaceWith($('<span class="'+a+'"/>').text(T.U.rlf(s))),r()}var l=/^\[([^\]]+)\]$/.exec(e);if(!l)return r();var c=l[1];return T.runner.decompileToBlocksAsync(c,u).then(function(e){if(e.blocksSvg){var t=$('<span class="block"/>').append(e.blocksSvg),n=d(e.compileJS.ast.getSourceFile("main.ts").statements[0]);if(n&&e.apiInfo){var o=e.apiInfo.byQName[n.qName];o&&o.attributes.help&&(t=$('<a class="ui link"/>').attr("href","/reference/"+o.attributes.help).append(t))}i.replaceWith(t)}return Promise.delay(1,r())})}()}(a)}).then(function(){return t(a,a.linksClass,a.snippetReplaceParent,!1)}).then(function(){return t(a,a.namespacesClass,a.snippetReplaceParent,!0)}).then(function(){return i((c=a).signatureClass,function(e,t){if(t.compileJS){var n=d(t.compileJS.ast.getSourceFile("main.ts").statements[0]);if(n&&t.apiInfo){var o=t.apiInfo.byQName[n.qName];if(o){var r=Blockly.Blocks[o.attributes.blockId],i=r&&r.codeCard?r.codeCard.blocksXml:void 0,a=i?$(T.blocks.render(i)):t.compileBlocks&&t.compileBlocks.success?$(t.blocksSvg):void 0,s=n.decl.getText().replace(/^export/,"");s=s.slice(0,s.indexOf("{")).trim()+";";var l=$('<code class="lang-typescript highlight"/>').text(s);c.snippetReplaceParent&&(e=e.parent()),u(c,e,l,a,t,{showJs:!0,hideGutter:!0})}}}},{package:c.package,snippetMode:!0,aspectRatio:c.blocksAspectRatio});var c}).then(function(){return s(a.codeCardClass,a)}).then(function(){return function(s){if(s.tutorial)return i(s.snippetClass,function(e,t){var n=t.blocksSvg;s.snippetReplaceParent&&(e=e.parent());var o=$('<div class="ui segment"/>').append(n);e.replaceWith(o)},{package:s.package,snippetMode:!1,aspectRatio:s.blocksAspectRatio});var l=0;return i(s.snippetClass,function(e,t){var n=t.compileBlocks&&t.compileBlocks.success?$(t.blocksSvg):void 0,o=$('<code class="lang-typescript highlight"/>').text(e.text().trim());s.snippetReplaceParent&&(e=e.parent());var r=t.compileJS&&t.compileJS.success,i=s.hex&&r&&t.compileJS.outfiles[pxtc.BINARY_HEX]?t.compileJS.outfiles[pxtc.BINARY_HEX]:void 0,a=(T.appTarget.nickname||T.appTarget.id)+"-"+(s.hexName||"")+"-"+l+++".hex";u(s,e,o,n,t,{showEdit:s.showEdit,run:s.simulator&&r,hexname:a,hex:i})},{package:s.package,aspectRatio:s.blocksAspectRatio})}(a)}).then(function(){return i((r=a).blocksClass,function(e,t){var n=t.blocksSvg;r.snippetReplaceParent&&(e=e.parent());var o=$('<div class="ui segment"/>').append(n);e.replaceWith(o)},{package:r.package,snippetMode:!0,aspectRatio:r.blocksAspectRatio});var r}).then(function(){return(r=a).blocksXmlClass?function t(n,o,r){var i=$("."+n).first();return i[0]?(r.emPixels||(r.emPixels=14),T.runner.compileBlocksAsync(i.text(),r).then(function(e){try{o(i,e)}catch(e){console.error("error while rendering "+i.html()),i.append($("<div/>").addClass("ui segment warning").text(e.message))}return i.removeClass(n),Promise.delay(1,t(n,o,r))})):Promise.resolve()}(r.blocksXmlClass,function(e,t){var n=t.blocksSvg;r.snippetReplaceParent&&(e=e.parent());var o=$('<div class="ui segment"/>').append(n);e.replaceWith(o)},{package:r.package,snippetMode:!0,aspectRatio:r.blocksAspectRatio}):Promise.resolve();var r}).then(function(){return(i=a).projectClass?function e(){var t=$("."+i.projectClass).first(),n=t[0];if(!n)return Promise.resolve();t.removeClass(i.projectClass);var o=T.Cloud.parseScriptId(n.innerText);if(o){if(i.snippetReplaceParent){n=n.parentElement;var r=document.createElement("div");n.parentElement.insertBefore(r,n),n.parentElement.removeChild(n),n=r}return T.runner.renderProjectAsync(n,o).then(function(){return e()})}return e()}():Promise.resolve();var i})}}()}(pxt||(pxt={})),function(k){!function(c){var u,e,r=function(){function e(e,t){this.ksPkg=e,this.topPkg=t,this.files={}}return e.prototype.getKsPkg=function(){return this.ksPkg},e.prototype.getPkgId=function(){return this.ksPkg?this.ksPkg.id:this.id},e.prototype.isTopLevel=function(){return this.ksPkg&&0==this.ksPkg.level},e.prototype.setFiles=function(e){this.files=e},e.prototype.getAllFiles=function(){return k.Util.mapMap(this.files,function(e,t){return t})},e}(),s=function(){function e(){this.githubPackageCache={}}return e.prototype.readFile=function(e,t){var n=l(e);return k.U.lookup(n.files,t)},e.prototype.writeFile=function(e,t,n){if(t!=k.CONFIG_NAME)throw k.Util.oops("trying to write "+e+" / "+t)},e.prototype.getHexInfoAsync=function(e){return k.hex.getHexInfoAsync(this,e)},e.prototype.cacheStoreAsync=function(e,t){return Promise.resolve()},e.prototype.cacheGetAsync=function(e){return Promise.resolve(null)},e.prototype.downloadPackageAsync=function(o){var r=this,i=o.verProtocol(),a=void 0;"github"==i&&(a=this.githubPackageCache[o._verspec]);var s=l(o);return(a?Promise.resolve(a):o.commonDownloadAsync()).then(function(e){if(e)return"github"!=i||a||(r.githubPackageCache[o._verspec]=k.Util.clone(e)),s.setFiles(e),Promise.resolve();if("empty"==i)return s.setFiles(g()),Promise.resolve();if("docs"==i){var t=g(),n=JSON.parse(t[k.CONFIG_NAME]);return o.verArgument().split(",").forEach(function(e){var t=/^([a-zA-Z0-9_-]+)(=(.+))?$/.exec(e);t?n.dependencies[t[1]]=t[3]||"*":console.warn("unknown package syntax "+e)}),n.yotta||(n.yotta={}),n.yotta.ignoreConflicts=!0,t[k.CONFIG_NAME]=JSON.stringify(n,null,4),s.setFiles(t),Promise.resolve()}return Promise.reject("Cannot download "+o.version()+"; unknown protocol")})},e}();function l(e){var t=e._editorPkg;if(t)return t;var n=null;e!=c.mainPkg&&(n=l(c.mainPkg));var o=new r(e,n);return e==c.mainPkg&&(o.topPkg=o),e._editorPkg=o}function g(){var e=k.appTarget.tsprj,t=k.U.clone(e.files);return t[k.CONFIG_NAME]=JSON.stringify(e.config,null,4)+"\n",t["main.blocks"]="",t}function t(){k.setAppTarget(window.pxtTargetBundle),k.Util.assert(!!k.appTarget);var e=/PXT_LANG=(.*?)(?:;|$)/.exec(document.cookie),t=/(live)?(force)?lang=([a-z]{2,}(-[A-Z]+)?)/i.exec(window.location.href),n=t?t[3]:e&&e[1]||k.appTarget.appTheme.defaultLocale||navigator.userLanguage||navigator.language,o=!k.appTarget.appTheme.disableLiveTranslations||t&&!!t[1],r=!!t&&!!t[2],i=k.appTarget.versions;$&&$.fn&&$.fn.embed&&$.fn.embed.settings&&$.fn.embed.settings.sources&&$.fn.embed.settings.sources.youtube&&($.fn.embed.settings.sources.youtube.url="//www.youtube.com/embed/{id}?rel=0");var a=k.webConfig;return k.Util.updateLocalizationAsync(k.appTarget.id,!0,a.commitCdnUrl,n,i?i.pxtCrowdinBranch:"",i?i.targetCrowdinBranch:"",o,r).then(function(){c.mainPkg=new k.MainPackage(new s)})}function o(e){console.error(e)}function n(e,n){var t=c.mainPkg.host();return c.mainPkg=new k.MainPackage(t),c.mainPkg._verspec=e?/\w+:\w+/.test(e)?e:"pub:"+e:"empty:tsprj",t.downloadPackageAsync(c.mainPkg).then(function(){return t.readFile(c.mainPkg,k.CONFIG_NAME)}).then(function(e){return e?c.mainPkg.installAllAsync().then(function(){if(n){var e=l(c.mainPkg);e.files["main.ts"]=n;var t=JSON.parse(e.files[k.CONFIG_NAME]);t.name=window.location.href.split("/").pop().split(/[?#]/)[0],e.files[k.CONFIG_NAME]=JSON.stringify(t,null,4),c.mainPkg.config.name=t.name,-1==c.mainPkg.config.files.indexOf("main.blocks")&&c.mainPkg.config.files.push("main.blocks")}}).catch(function(e){o(lf("Cannot load package: {0}",e.message))}):Promise.resolve()})}function i(e){var t=c.mainPkg.getTargetOptions();return t.isNative=!!e,t.hasHex=!!e,c.mainPkg.getCompileOptionsAsync(t)}function a(e,n){return i().then(function(e){n&&n(e);var t=pxtc.compile(e);return t.diagnostics&&0<t.diagnostics.length&&t.diagnostics.forEach(function(e){console.error(e.messageText)}),t})}function p(e,t){if(c.languageMode=e,t!=c.editorLocale){var n=/^live-/;return c.editorLocale=t,k.Util.updateLocalizationAsync(k.appTarget.id,!0,k.webConfig.commitCdnUrl,c.editorLocale.replace(n,""),k.appTarget.versions.pxtCrowdinBranch,k.appTarget.versions.targetCrowdinBranch,n.test(c.editorLocale))}return Promise.resolve()}function d(e){var t=e.data;if(t)switch(t.type){case"fileloaded":var n=t,o=n.name;p(/\.ts$/i.test(o)?u.TypeScript:u.Blocks,n.locale).done();break;case"popout":var r=/#(doc|md):([^&?:]+)/i.exec(window.location.href);if(r){var i=k.webConfig.docsUrl||"/--docs",a="doc"==r[1]?""+r[2]:i+"?md="+r[2];window.open(a,"_blank"),window.parent&&window.parent.postMessage({type:"popoutcomplete"},"*")}break;case"localtoken":var s=t;s&&s.localToken&&(k.Cloud.localToken=s.localToken,b.forEach(function(e){return e()}),b=[])}}function _(){var e=Promise.resolve();if(k.appTarget.appTheme&&k.appTarget.appTheme.extendFieldEditors){var t={};e=e.then(function(){return k.BrowserUtils.loadBlocklyAsync()}).then(function(){return k.BrowserUtils.loadScriptAsync("fieldeditors.js")}).then(function(){return k.editor.initFieldExtensionsAsync(t)}).then(function(e){e.fieldEditors&&e.fieldEditors.forEach(function(e){k.blocks.registerFieldEditor(e.selector,e.editor,e.validator)})})}return e}function f(t,n,o){return void 0===o&&(o="blocks"),k.Cloud.privateGetTextAsync(n+"/text").then(function(e){return JSON.parse(e)}).then(function(e){return h(t,e,n,o)})}function h(e,t,n,o){void 0===n&&(n=null),void 0===o&&(o="blocks");var r=JSON.parse(t[k.CONFIG_NAME])||{},i="# "+r.name+" "+(r.version?r.version:"")+"\n\n";i+=n?"* "+(k.appTarget.appTheme.shareUrl||"https://makecode.com/")+n+"\n\n":"* "+k.appTarget.appTheme.homeUrl+"\n\n";var a="README.md";t[a]&&(i+=t[a].replace(/^#+/,"$0#")+"\n"),r.files.filter(function(e){return e!=k.CONFIG_NAME&&e!=a}).forEach(function(e){i+="\n## "+e+"\n",/\.ts$/.test(e)?i+="```typescript\n"+t[e]+"\n```\n":/\.blocks?$/.test(e)?i+="```blocksxml\n"+t[e]+"\n```\n":i+="```"+e.substr(e.indexOf("."))+"\n"+t[e]+"\n```\n"}),r&&r.dependencies&&(i+="\n## Packages\n\n"+Object.keys(r.dependencies).map(function(e){return"* "+e+", "+r.dependencies[e]}).join("\n")+"\n\n```package\n"+Object.keys(r.dependencies).map(function(e){return e+"="+r.dependencies[e]}).join("\n")+"\n```\n");return y(e,i,{print:!0})}c.initFooter=function(e,t){if(e){var n=k.appTarget.appTheme,o=$("body"),r=$(e),i=$("<a/>").attr("href",n.homeUrl).attr("target","_blank");r.append(i),n.organizationLogo?i.append($("<img/>").attr("src",k.Util.toDataUri(n.organizationLogo))):i.append(lf("powered by {0}",n.title)),o.mouseenter(function(e){return r.fadeOut()}),o.mouseleave(function(e){return r.fadeIn()})}},c.showError=o,c.generateHexFileAsync=function(t){return n(t.id).then(function(){return a(0,function(e){t.code&&(e.fileSystem["main.ts"]=t.code)})}).then(function(e){return e.diagnostics&&0<e.diagnostics.length&&console.error("Diagnostics",e.diagnostics),e.outfiles[pxtc.BINARY_HEX]})},c.simulateAsync=function(s,l){return n(l.id).then(function(){return a(0,function(e){l.code&&(e.fileSystem["main.ts"]=l.code)})}).then(function(e){e.diagnostics&&0<e.diagnostics.length&&console.error("Diagnostics",e.diagnostics);var t=e.outfiles[pxtc.BINARY_JS];if(t){var n=new pxsim.SimulatorDriver(s,{}),o=e.usedArguments,r=k.appTarget.simulator.boardDefinition,i=pxtc.computeUsedParts(e,!0),a={boardDefinition:r,parts:i,fnArgs:o,cdnUrl:k.webConfig.commitCdnUrl,localizedStrings:k.Util.getLocalizedStrings(),highContrast:l.highContrast,light:l.light};k.appTarget.simulator&&(a.aspectRatio=i.length&&k.appTarget.simulator.partsAspectRatio?k.appTarget.simulator.partsAspectRatio:k.appTarget.simulator.aspectRatio),n.run(t,a)}})},(e=u=c.LanguageMode||(c.LanguageMode={}))[e.Blocks=0]="Blocks",e[e.TypeScript=1]="TypeScript",c.languageMode=u.Blocks,c.editorLocale="en",c.setEditorContextAsync=p,c.startRenderServer=function(){k.tickEvent("renderer.ready");var o=[],r=void 0;_().done(function(){window.addEventListener("message",function(e){var t=e.data;"renderblocks"==t.type&&(o.push(t),function t(){if(!r){var n=o.shift();n&&(k.tickEvent("renderer.job"),r=k.BrowserUtils.loadBlocklyAsync().then(function(){return c.decompileToBlocksAsync(n.code,n.options)}).then(function(e){return e.blocksSvg?k.blocks.layout.blocklyToSvgAsync(e.blocksSvg,0,0,e.blocksSvg.viewBox.baseVal.width,e.blocksSvg.viewBox.baseVal.height):void 0}).then(function(e){window.parent.postMessage({source:"makecode",type:"renderblocks",id:n.id,width:e?e.width:void 0,height:e?e.height:void 0,svg:e?e.svg:void 0,uri:e?e.xml:void 0,css:e?e.css:void 0},"*"),r=void 0,t()}))}}())},!1),window.parent.postMessage({source:"makecode",type:"renderready"},"*")})},c.startDocsServer=function(e,l){function t(a,s){k.debug("rendering "+a),$(l).hide(),$(e).show(),Promise.delay(100).then(function(){switch(a){case"print":var e=window.localStorage.printjob;return delete window.localStorage.printjob,h(l,JSON.parse(e)).then(function(){return pxsim.print(1e3)});case"project":return h(l,JSON.parse(s)).then(function(){return pxsim.print(1e3)});case"projectid":return f(l,JSON.parse(s)).then(function(){return pxsim.print(1e3)});case"doc":return r=l,i=(i=s).replace(/^\//,""),k.Cloud.downloadMarkdownAsync(i,c.editorLocale,k.Util.localizeLive).then(function(e){return y(r,e,{path:i})});case"book":return n=l,t=(t=s).replace(/^\//,""),k.tickEvent("book",{id:t}),k.log("rendering book from "+t),$("#loading").find(".loader").addClass("text").text(lf("Compiling your book (this may take a minute)")),Promise.delay(100).then(function(){return k.Cloud.downloadMarkdownAsync(t,c.editorLocale,k.Util.localizeLive)}).then(function(e){o=k.docs.buildTOC(e),k.log("TOC: "+JSON.stringify(o,null,2));var n=[];return k.docs.visitTOC(o,function(t){/^\//.test(t.path)&&!/^\/pkg\//.test(t.path)&&n.push(k.Cloud.downloadMarkdownAsync(t.path,c.editorLocale,k.Util.localizeLive).then(function(e){t.markdown=e},function(e){t.markdown="_"+t.path+" failed to load._"}))}),Promise.all(n)}).then(function(e){var t=o[0].name;return k.docs.visitTOC(o,function(e){e.markdown&&(t+="\n\n"+e.markdown)}),y(n,t)});default:return y(l,s)}var n,t,o,r,i}).catch(function(e){$(l).html('\n                    <img style="height:4em;" src="'+k.appTarget.appTheme.docsLogo+'" />\n                    <h1>'+lf("Oops")+"</h1>\n                    <h3>"+lf("We could not load the documentation, please check your internet connection.")+'</h3>\n                    <button class="ui button primary" id="tryagain">'+lf("Try Again")+"</button>"),$(l).find("#tryagain").click(function(){t(a,s)}),window.parent&&window.parent.postMessage({type:"docfailed",docType:a,src:s},"*")}).finally(function(){$(e).hide(),$(l).show()}).done(function(){})}function n(){var e=/^#(doc|md|tutorial|book|project|projectid|print):([^&?:]+)(:([^&?:]+):([^&?:]+))?/i.exec(window.location.hash);e&&(e[4]?p(/^blocks$/.test(e[4])?u.Blocks:u.TypeScript,e[5]):Promise.resolve()).then(function(){return t(e[1],decodeURIComponent(e[2]))})}k.tickEvent("docrenderer.ready"),_().done(function(){window.addEventListener("message",d,!1),window.addEventListener("hashchange",function(){n()},!1),parent.postMessage({type:"sidedocready"},"*"),setTimeout(function(){return n()},1)})},c.renderProjectAsync=f,c.renderProjectFilesAsync=h;var m='\n<aside id=button class=box>\n   <a class="ui primary button" href="@ARGS@">@BODY@</a>\n</aside>\n\n<aside id=vimeo>\n<div class="ui two column stackable grid container">\n<div class="column">\n    <div class="ui embed mdvid" data-source="vimeo" data-id="@ARGS@" data-placeholder="/thumbnail/1024/vimeo/@ARGS@" data-icon="video play">\n    </div>\n</div></div>\n</aside>\n\n<aside id=youtube>\n<div class="ui two column stackable grid container">\n<div class="column">\n    <div class="ui embed mdvid" data-source="youtube" data-id="@ARGS@" data-placeholder="https://img.youtube.com/vi/@ARGS@/0.jpg">\n    </div>\n</div></div>\n</aside>\n\n<aside id=section>\n    \x3c!-- section @ARGS@ --\x3e\n</aside>\n\n<aside id=hide class=box>\n    <div style=\'display:none\'>\n        @BODY@\n    </div>\n</aside>\n\n<aside id=avatar class=box>\n    <div class=\'avatar @ARGS@\'>\n        <div class=\'avatar-image\'></div>\n        <div class=\'ui compact message\'>\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n<aside id=hint class=box>\n    <div class="ui icon green message">\n        <div class="content">\n            <div class="header">Hint</div>\n            @BODY@\n        </div>\n    </div>\n</aside>\n\n\x3c!-- wrapped around ordinary content --\x3e\n<aside id=main-container class=box>\n    <div class="ui text">\n        @BODY@\n    </div>\n</aside>\n\n\x3c!-- used for \'column\' box - they are collected and wrapped in \'column-container\' --\x3e\n<aside id=column class=aside>\n    <div class=\'column\'>\n        @BODY@\n    </div>\n</aside>\n<aside id=column-container class=box>\n    <div class="ui three column stackable grid text">\n        @BODY@\n    </div>\n</aside>\n@breadcrumb@\n@body@';function y(e,t,n){void 0===n&&(n={});(n.path||"").split("/");var o=k.docs.renderMarkdown({template:m,markdown:t,theme:k.appTarget.appTheme}),r=n.blocksAspectRatio||window.innerHeight<window.innerWidth?1.62:1/1.62;$(e).html(o),$(e).find("a").attr("target","_blank");var i={blocksAspectRatio:r,snippetClass:"lang-blocks",signatureClass:"lang-sig",blocksClass:"lang-block",blocksXmlClass:"lang-blocksxml",simulatorClass:"lang-sim",linksClass:"lang-cards",namespacesClass:"lang-namespaces",codeCardClass:"lang-codecard",packageClass:"lang-package",projectClass:"lang-project",snippetReplaceParent:!0,simulator:!0,hex:!0,tutorial:!!n.tutorial,showJavaScript:c.languageMode==u.TypeScript,hexName:k.appTarget.id};return n.print&&(i.showEdit=!1,i.simulator=!1),k.runner.renderAsync(i).then(function(){$(e).find('a[href^="/"]').removeAttr("target").each(function(e,t){$(t).attr("href","#doc:"+$(t).attr("href").replace(/^\//,""))}),$(e).find(".ui.embed").embed()})}c.renderMarkdownAsync=y,c.decompileToBlocksAsync=function(t,r){return n(r&&r.packageId?"pub:"+r.packageId:r&&r.package?"docs:"+r.package:null,t).then(function(){return i(!!k.appTarget.compile&&k.appTarget.compile.hasHex)}).then(function(e){t&&(e.fileSystem["main.ts"]=t),e.ast=!0;var n=pxtc.compile(e);if(n.diagnostics&&0<n.diagnostics.length&&n.diagnostics.forEach(function(e){return console.error(e.messageText)}),!n.success)return Promise.resolve({package:c.mainPkg,compileJS:n});var o=pxtc.getApiInfo(e,n.ast);return ts.pxtc.localizeApisAsync(o,c.mainPkg).then(function(){var e=pxtc.getBlocksInfo(o);k.blocks.initializeAndInject(e);var t=pxtc.decompiler.decompileToBlocks(e,n.ast.getSourceFile("main.ts"),{snippetMode:r&&r.snippetMode});return t.diagnostics&&0<t.diagnostics.length&&t.diagnostics.forEach(function(e){return console.error(e.messageText)}),t.success?(k.debug(t.outfiles["main.blocks"]),{package:c.mainPkg,compileJS:n,compileBlocks:t,apiInfo:o,blocksSvg:k.blocks.render(t.outfiles["main.blocks"],r)}):{package:c.mainPkg,compileJS:n,compileBlocks:t,apiInfo:o}})})},c.compileBlocksAsync=function(o,r){return n(r&&r.packageId?"pub:"+r.packageId:r&&r.package?"docs:"+r.package:null,"").then(function(){return i(!!k.appTarget.compile&&k.appTarget.compile.hasHex)}).then(function(e){e.ast=!0;var t=pxtc.compile(e),n=pxtc.getApiInfo(e,t.ast);return ts.pxtc.localizeApisAsync(n,c.mainPkg).then(function(){var e=pxtc.getBlocksInfo(n);return k.blocks.initializeAndInject(e),{package:c.mainPkg,blocksSvg:k.blocks.render(o,r),apiInfo:n}})})};var v,b=[];c.initCallbacks=[],c.init=function(){t().done(function(){for(var e=0;e<c.initCallbacks.length;++e)c.initCallbacks[e]()})},(v=window.ksRunnerWhenLoaded)&&v()}(k.runner||(k.runner={}))}(pxt||(pxt={}));